var Ta = Object.defineProperty;
var Pr = (n) => {
  throw TypeError(n);
};
var ka = (n, e, t) => e in n ? Ta(n, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) : n[e] = t;
var _ = (n, e, t) => ka(n, typeof e != "symbol" ? e + "" : e, t), Ln = (n, e, t) => e.has(n) || Pr("Cannot " + t);
var u = (n, e, t) => (Ln(n, e, "read from private field"), t ? t.call(n) : e.get(n)), T = (n, e, t) => e.has(n) ? Pr("Cannot add the same private member more than once") : e instanceof WeakSet ? e.add(n) : e.set(n, t), y = (n, e, t, r) => (Ln(n, e, "write to private field"), r ? r.call(n, t) : e.set(n, t), t), $ = (n, e, t) => (Ln(n, e, "access private method"), t);
const Yn = {
  version: "0.0.7"
};
function As(n) {
  const e = atob(n), t = e.length, r = new Uint8Array(t);
  for (let s = 0; s < t; s++)
    r[s] = e.charCodeAt(s);
  return r.buffer;
}
function Cs(n) {
  const e = String.fromCharCode(...new Uint8Array(n));
  return btoa(e);
}
function Os(n) {
  if (typeof n > "u" || n === null || typeof n != "object" || !("type" in n) || typeof n.type != "string" || !n.type || n.type !== "message" || !("content" in n) || !Array.isArray(n.content) || n.content.length < 1)
    return;
  const e = n.content[n.content.length - 1];
  if (!(!("type" in e) || typeof e.type != "string")) {
    if (e.type === "text")
      return typeof e.text == "string" ? e.text : void 0;
    if (e.type === "audio")
      return typeof e.transcript == "string" ? e.transcript : void 0;
  }
}
function Ia(n, e) {
  const t = n.filter((a) => !e.some((i) => i.itemId === a.itemId)), r = e.filter((a) => !n.some((i) => i.itemId === a.itemId)), s = e.filter((a) => n.some((i) => i.itemId === a.itemId && JSON.stringify(i) !== JSON.stringify(a)));
  return {
    removals: t,
    additions: r,
    updates: s
  };
}
function Aa() {
  return typeof window > "u" ? !1 : typeof window.RTCPeerConnection < "u";
}
function jr(n) {
  return n.role === "system" ? n : n.role === "assistant" ? {
    ...n,
    content: n.content.map((e) => e.type === "audio" ? {
      ...e,
      audio: null
    } : e)
  } : n.role === "user" ? {
    ...n,
    content: n.content.map((e) => e.type === "input_audio" ? {
      ...e,
      audio: null
    } : e)
  } : n;
}
function Ca(n, e, t) {
  const r = !t && e.type === "message" ? jr(e) : e, s = n.findIndex((a) => a.itemId === e.itemId);
  if (s !== -1)
    return n.map((a, i) => i === s ? r : !t && a.type === "message" ? jr(a) : a);
  if (e.previousItemId) {
    const a = n.findIndex((i) => i.itemId === e.previousItemId);
    return a !== -1 ? [
      ...n.slice(0, a + 1),
      r,
      ...n.slice(a + 1)
    ] : [...n, r];
  } else
    return [...n, r];
}
const Oa = {
  "User-Agent": `Agents/JavaScript ${Yn.version}`,
  "X-OpenAI-Agents-SDK": `openai-agents-sdk.${Yn.version}`
}, Ea = `openai-agents-sdk.${Yn.version}`;
async function _r(n) {
  try {
    return [null, await n()];
  } catch (e) {
    return [e, null];
  }
}
function Na(n, e) {
  const t = { ...n };
  return Object.defineProperties(t, {
    $brand: {
      value: "auto-parseable-response-format",
      enumerable: !1
    },
    $parseRaw: {
      value: e,
      enumerable: !1
    }
  }), t;
}
const Ra = Symbol("Let zodToJsonSchema decide on which parser to use"), Zr = {
  name: void 0,
  $refStrategy: "root",
  effectStrategy: "input",
  pipeStrategy: "all",
  dateStrategy: "format:date-time",
  mapStrategy: "entries",
  nullableStrategy: "from-target",
  removeAdditionalStrategy: "passthrough",
  definitionPath: "definitions",
  target: "jsonSchema7",
  strictUnions: !1,
  errorMessages: !1,
  markdownDescription: !1,
  patternStrategy: "escape",
  applyRegexFlags: !1,
  emailStrategy: "format:email",
  base64Strategy: "contentEncoding:base64",
  nameStrategy: "ref"
}, Da = (n) => typeof n == "string" ? {
  ...Zr,
  basePath: ["#"],
  definitions: {},
  name: n
} : {
  ...Zr,
  basePath: ["#"],
  definitions: {},
  ...n
}, Xn = (n) => "_def" in n ? n._def : n;
function Pa(n) {
  if (!n)
    return !0;
  for (const e in n)
    return !1;
  return !0;
}
const ja = (n) => {
  const e = Da(n), t = e.name !== void 0 ? [...e.basePath, e.definitionPath, e.name] : e.basePath;
  return {
    ...e,
    currentPath: t,
    propertyPath: void 0,
    seenRefs: /* @__PURE__ */ new Set(),
    seen: new Map(Object.entries(e.definitions).map(([r, s]) => [
      Xn(s),
      {
        def: Xn(s),
        path: [...e.basePath, e.definitionPath, r],
        // Resolution of references will be forced even though seen, so it's ok that the schema is undefined here for now.
        jsonSchema: void 0
      }
    ]))
  };
};
function Es(n, e, t, r) {
  r != null && r.errorMessages && t && (n.errorMessage = {
    ...n.errorMessage,
    [e]: t
  });
}
function q(n, e, t, r, s) {
  n[e] = t, Es(n, e, r, s);
}
var Nt;
(function(n) {
  n.assertEqual = (s) => {
  };
  function e(s) {
  }
  n.assertIs = e;
  function t(s) {
    throw new Error();
  }
  n.assertNever = t, n.arrayToEnum = (s) => {
    const a = {};
    for (const i of s)
      a[i] = i;
    return a;
  }, n.getValidEnumValues = (s) => {
    const a = n.objectKeys(s).filter((o) => typeof s[s[o]] != "number"), i = {};
    for (const o of a)
      i[o] = s[o];
    return n.objectValues(i);
  }, n.objectValues = (s) => n.objectKeys(s).map(function(a) {
    return s[a];
  }), n.objectKeys = typeof Object.keys == "function" ? (s) => Object.keys(s) : (s) => {
    const a = [];
    for (const i in s)
      Object.prototype.hasOwnProperty.call(s, i) && a.push(i);
    return a;
  }, n.find = (s, a) => {
    for (const i of s)
      if (a(i))
        return i;
  }, n.isInteger = typeof Number.isInteger == "function" ? (s) => Number.isInteger(s) : (s) => typeof s == "number" && Number.isFinite(s) && Math.floor(s) === s;
  function r(s, a = " | ") {
    return s.map((i) => typeof i == "string" ? `'${i}'` : i).join(a);
  }
  n.joinValues = r, n.jsonStringifyReplacer = (s, a) => typeof a == "bigint" ? a.toString() : a;
})(Nt || (Nt = {}));
var Mr;
(function(n) {
  n.mergeShapes = (e, t) => ({
    ...e,
    ...t
    // second overwrites first
  });
})(Mr || (Mr = {}));
Nt.arrayToEnum([
  "string",
  "nan",
  "number",
  "integer",
  "float",
  "boolean",
  "date",
  "bigint",
  "symbol",
  "function",
  "undefined",
  "null",
  "array",
  "object",
  "unknown",
  "promise",
  "void",
  "never",
  "map",
  "set"
]);
Nt.arrayToEnum([
  "invalid_type",
  "invalid_literal",
  "custom",
  "invalid_union",
  "invalid_union_discriminator",
  "invalid_enum_value",
  "unrecognized_keys",
  "invalid_arguments",
  "invalid_return_type",
  "invalid_date",
  "invalid_string",
  "too_small",
  "too_big",
  "invalid_intersection_types",
  "not_multiple_of",
  "not_finite"
]);
let $r = class Ns extends Error {
  get errors() {
    return this.issues;
  }
  constructor(e) {
    super(), this.issues = [], this.addIssue = (r) => {
      this.issues = [...this.issues, r];
    }, this.addIssues = (r = []) => {
      this.issues = [...this.issues, ...r];
    };
    const t = new.target.prototype;
    Object.setPrototypeOf ? Object.setPrototypeOf(this, t) : this.__proto__ = t, this.name = "ZodError", this.issues = e;
  }
  format(e) {
    const t = e || function(a) {
      return a.message;
    }, r = { _errors: [] }, s = (a) => {
      for (const i of a.issues)
        if (i.code === "invalid_union")
          i.unionErrors.map(s);
        else if (i.code === "invalid_return_type")
          s(i.returnTypeError);
        else if (i.code === "invalid_arguments")
          s(i.argumentsError);
        else if (i.path.length === 0)
          r._errors.push(t(i));
        else {
          let o = r, c = 0;
          for (; c < i.path.length; ) {
            const p = i.path[c];
            c === i.path.length - 1 ? (o[p] = o[p] || { _errors: [] }, o[p]._errors.push(t(i))) : o[p] = o[p] || { _errors: [] }, o = o[p], c++;
          }
        }
    };
    return s(this), r;
  }
  static assert(e) {
    if (!(e instanceof Ns))
      throw new Error(`Not a ZodError: ${e}`);
  }
  toString() {
    return this.message;
  }
  get message() {
    return JSON.stringify(this.issues, Nt.jsonStringifyReplacer, 2);
  }
  get isEmpty() {
    return this.issues.length === 0;
  }
  flatten(e = (t) => t.message) {
    const t = {}, r = [];
    for (const s of this.issues)
      s.path.length > 0 ? (t[s.path[0]] = t[s.path[0]] || [], t[s.path[0]].push(e(s))) : r.push(e(s));
    return { formErrors: r, fieldErrors: t };
  }
  get formErrors() {
    return this.flatten();
  }
};
$r.create = (n) => new $r(n);
var Fr;
(function(n) {
  n.errToObj = (e) => typeof e == "string" ? { message: e } : e || {}, n.toString = (e) => typeof e == "string" ? e : e == null ? void 0 : e.message;
})(Fr || (Fr = {}));
var D;
(function(n) {
  n.ZodString = "ZodString", n.ZodNumber = "ZodNumber", n.ZodNaN = "ZodNaN", n.ZodBigInt = "ZodBigInt", n.ZodBoolean = "ZodBoolean", n.ZodDate = "ZodDate", n.ZodSymbol = "ZodSymbol", n.ZodUndefined = "ZodUndefined", n.ZodNull = "ZodNull", n.ZodAny = "ZodAny", n.ZodUnknown = "ZodUnknown", n.ZodNever = "ZodNever", n.ZodVoid = "ZodVoid", n.ZodArray = "ZodArray", n.ZodObject = "ZodObject", n.ZodUnion = "ZodUnion", n.ZodDiscriminatedUnion = "ZodDiscriminatedUnion", n.ZodIntersection = "ZodIntersection", n.ZodTuple = "ZodTuple", n.ZodRecord = "ZodRecord", n.ZodMap = "ZodMap", n.ZodSet = "ZodSet", n.ZodFunction = "ZodFunction", n.ZodLazy = "ZodLazy", n.ZodLiteral = "ZodLiteral", n.ZodEnum = "ZodEnum", n.ZodEffects = "ZodEffects", n.ZodNativeEnum = "ZodNativeEnum", n.ZodOptional = "ZodOptional", n.ZodNullable = "ZodNullable", n.ZodDefault = "ZodDefault", n.ZodCatch = "ZodCatch", n.ZodPromise = "ZodPromise", n.ZodBranded = "ZodBranded", n.ZodPipeline = "ZodPipeline", n.ZodReadonly = "ZodReadonly";
})(D || (D = {}));
function Za() {
  return {};
}
function Ma(n, e) {
  var r, s;
  const t = {
    type: "array"
  };
  return ((s = (r = n.type) == null ? void 0 : r._def) == null ? void 0 : s.typeName) !== D.ZodAny && (t.items = J(n.type._def, {
    ...e,
    currentPath: [...e.currentPath, "items"]
  })), n.minLength && q(t, "minItems", n.minLength.value, n.minLength.message, e), n.maxLength && q(t, "maxItems", n.maxLength.value, n.maxLength.message, e), n.exactLength && (q(t, "minItems", n.exactLength.value, n.exactLength.message, e), q(t, "maxItems", n.exactLength.value, n.exactLength.message, e)), t;
}
function $a(n, e) {
  const t = {
    type: "integer",
    format: "int64"
  };
  if (!n.checks)
    return t;
  for (const r of n.checks)
    switch (r.kind) {
      case "min":
        e.target === "jsonSchema7" ? r.inclusive ? q(t, "minimum", r.value, r.message, e) : q(t, "exclusiveMinimum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMinimum = !0), q(t, "minimum", r.value, r.message, e));
        break;
      case "max":
        e.target === "jsonSchema7" ? r.inclusive ? q(t, "maximum", r.value, r.message, e) : q(t, "exclusiveMaximum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMaximum = !0), q(t, "maximum", r.value, r.message, e));
        break;
      case "multipleOf":
        q(t, "multipleOf", r.value, r.message, e);
        break;
    }
  return t;
}
function Fa() {
  return {
    type: "boolean"
  };
}
function La(n, e) {
  return J(n.type._def, e);
}
const Ua = (n, e) => J(n.innerType._def, e);
function Rs(n, e, t) {
  const r = t ?? e.dateStrategy;
  if (Array.isArray(r))
    return {
      anyOf: r.map((s, a) => Rs(n, e, s))
    };
  switch (r) {
    case "string":
    case "format:date-time":
      return {
        type: "string",
        format: "date-time"
      };
    case "format:date":
      return {
        type: "string",
        format: "date"
      };
    case "integer":
      return Ja(n, e);
  }
}
const Ja = (n, e) => {
  const t = {
    type: "integer",
    format: "unix-time"
  };
  if (e.target === "openApi3")
    return t;
  for (const r of n.checks)
    switch (r.kind) {
      case "min":
        q(
          t,
          "minimum",
          r.value,
          // This is in milliseconds
          r.message,
          e
        );
        break;
      case "max":
        q(
          t,
          "maximum",
          r.value,
          // This is in milliseconds
          r.message,
          e
        );
        break;
    }
  return t;
};
function Ba(n, e) {
  return {
    ...J(n.innerType._def, e),
    default: n.defaultValue()
  };
}
function qa(n, e, t) {
  return e.effectStrategy === "input" ? J(n.schema._def, e, t) : {};
}
function Ga(n) {
  return {
    type: "string",
    enum: [...n.values]
  };
}
const Va = (n) => "type" in n && n.type === "string" ? !1 : "allOf" in n;
function za(n, e) {
  const t = [
    J(n.left._def, {
      ...e,
      currentPath: [...e.currentPath, "allOf", "0"]
    }),
    J(n.right._def, {
      ...e,
      currentPath: [...e.currentPath, "allOf", "1"]
    })
  ].filter((a) => !!a);
  let r = e.target === "jsonSchema2019-09" ? { unevaluatedProperties: !1 } : void 0;
  const s = [];
  return t.forEach((a) => {
    if (Va(a))
      s.push(...a.allOf), a.unevaluatedProperties === void 0 && (r = void 0);
    else {
      let i = a;
      if ("additionalProperties" in a && a.additionalProperties === !1) {
        const { additionalProperties: o, ...c } = a;
        i = c;
      } else
        r = void 0;
      s.push(i);
    }
  }), s.length ? {
    allOf: s,
    ...r
  } : void 0;
}
function Wa(n, e) {
  const t = typeof n.value;
  return t !== "bigint" && t !== "number" && t !== "boolean" && t !== "string" ? {
    type: Array.isArray(n.value) ? "array" : "object"
  } : e.target === "openApi3" ? {
    type: t === "bigint" ? "integer" : t,
    enum: [n.value]
  } : {
    type: t === "bigint" ? "integer" : t,
    const: n.value
  };
}
let Un;
const Be = {
  /**
   * `c` was changed to `[cC]` to replicate /i flag
   */
  cuid: /^[cC][^\s-]{8,}$/,
  cuid2: /^[0-9a-z]+$/,
  ulid: /^[0-9A-HJKMNP-TV-Z]{26}$/,
  /**
   * `a-z` was added to replicate /i flag
   */
  email: /^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,
  /**
   * Constructed a valid Unicode RegExp
   *
   * Lazily instantiate since this type of regex isn't supported
   * in all envs (e.g. React Native).
   *
   * See:
   * https://github.com/colinhacks/zod/issues/2433
   * Fix in Zod:
   * https://github.com/colinhacks/zod/commit/9340fd51e48576a75adc919bff65dbc4a5d4c99b
   */
  emoji: () => (Un === void 0 && (Un = RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$", "u")), Un),
  base64: /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,
  nanoid: /^[a-zA-Z0-9_-]{21}$/
};
function Ds(n, e) {
  const t = {
    type: "string"
  };
  function r(s) {
    return e.patternStrategy === "escape" ? Ha(s) : s;
  }
  if (n.checks)
    for (const s of n.checks)
      switch (s.kind) {
        case "min":
          q(t, "minLength", typeof t.minLength == "number" ? Math.max(t.minLength, s.value) : s.value, s.message, e);
          break;
        case "max":
          q(t, "maxLength", typeof t.maxLength == "number" ? Math.min(t.maxLength, s.value) : s.value, s.message, e);
          break;
        case "email":
          switch (e.emailStrategy) {
            case "format:email":
              me(t, "email", s.message, e);
              break;
            case "format:idn-email":
              me(t, "idn-email", s.message, e);
              break;
            case "pattern:zod":
              ge(t, Be.email, s.message, e);
              break;
          }
          break;
        case "url":
          me(t, "uri", s.message, e);
          break;
        case "uuid":
          me(t, "uuid", s.message, e);
          break;
        case "regex":
          ge(t, s.regex, s.message, e);
          break;
        case "cuid":
          ge(t, Be.cuid, s.message, e);
          break;
        case "cuid2":
          ge(t, Be.cuid2, s.message, e);
          break;
        case "startsWith":
          ge(t, RegExp(`^${r(s.value)}`), s.message, e);
          break;
        case "endsWith":
          ge(t, RegExp(`${r(s.value)}$`), s.message, e);
          break;
        case "datetime":
          me(t, "date-time", s.message, e);
          break;
        case "date":
          me(t, "date", s.message, e);
          break;
        case "time":
          me(t, "time", s.message, e);
          break;
        case "duration":
          me(t, "duration", s.message, e);
          break;
        case "length":
          q(t, "minLength", typeof t.minLength == "number" ? Math.max(t.minLength, s.value) : s.value, s.message, e), q(t, "maxLength", typeof t.maxLength == "number" ? Math.min(t.maxLength, s.value) : s.value, s.message, e);
          break;
        case "includes": {
          ge(t, RegExp(r(s.value)), s.message, e);
          break;
        }
        case "ip": {
          s.version !== "v6" && me(t, "ipv4", s.message, e), s.version !== "v4" && me(t, "ipv6", s.message, e);
          break;
        }
        case "emoji":
          ge(t, Be.emoji, s.message, e);
          break;
        case "ulid": {
          ge(t, Be.ulid, s.message, e);
          break;
        }
        case "base64": {
          switch (e.base64Strategy) {
            case "format:binary": {
              me(t, "binary", s.message, e);
              break;
            }
            case "contentEncoding:base64": {
              q(t, "contentEncoding", "base64", s.message, e);
              break;
            }
            case "pattern:zod": {
              ge(t, Be.base64, s.message, e);
              break;
            }
          }
          break;
        }
        case "nanoid":
          ge(t, Be.nanoid, s.message, e);
      }
  return t;
}
const Ha = (n) => Array.from(n).map((e) => /[a-zA-Z0-9]/.test(e) ? e : `\\${e}`).join(""), me = (n, e, t, r) => {
  var s;
  n.format || (s = n.anyOf) != null && s.some((a) => a.format) ? (n.anyOf || (n.anyOf = []), n.format && (n.anyOf.push({
    format: n.format,
    ...n.errorMessage && r.errorMessages && {
      errorMessage: { format: n.errorMessage.format }
    }
  }), delete n.format, n.errorMessage && (delete n.errorMessage.format, Object.keys(n.errorMessage).length === 0 && delete n.errorMessage)), n.anyOf.push({
    format: e,
    ...t && r.errorMessages && { errorMessage: { format: t } }
  })) : q(n, "format", e, t, r);
}, ge = (n, e, t, r) => {
  var s;
  n.pattern || (s = n.allOf) != null && s.some((a) => a.pattern) ? (n.allOf || (n.allOf = []), n.pattern && (n.allOf.push({
    pattern: n.pattern,
    ...n.errorMessage && r.errorMessages && {
      errorMessage: { pattern: n.errorMessage.pattern }
    }
  }), delete n.pattern, n.errorMessage && (delete n.errorMessage.pattern, Object.keys(n.errorMessage).length === 0 && delete n.errorMessage)), n.allOf.push({
    pattern: Lr(e, r),
    ...t && r.errorMessages && { errorMessage: { pattern: t } }
  })) : q(n, "pattern", Lr(e, r), t, r);
}, Lr = (n, e) => {
  var p;
  const t = typeof n == "function" ? n() : n;
  if (!e.applyRegexFlags || !t.flags)
    return t.source;
  const r = {
    i: t.flags.includes("i"),
    // Case-insensitive
    m: t.flags.includes("m"),
    // `^` and `$` matches adjacent to newline characters
    s: t.flags.includes("s")
    // `.` matches newlines
  }, s = r.i ? t.source.toLowerCase() : t.source;
  let a = "", i = !1, o = !1, c = !1;
  for (let l = 0; l < s.length; l++) {
    if (i) {
      a += s[l], i = !1;
      continue;
    }
    if (r.i) {
      if (o) {
        if (s[l].match(/[a-z]/)) {
          c ? (a += s[l], a += `${s[l - 2]}-${s[l]}`.toUpperCase(), c = !1) : s[l + 1] === "-" && ((p = s[l + 2]) != null && p.match(/[a-z]/)) ? (a += s[l], c = !0) : a += `${s[l]}${s[l].toUpperCase()}`;
          continue;
        }
      } else if (s[l].match(/[a-z]/)) {
        a += `[${s[l]}${s[l].toUpperCase()}]`;
        continue;
      }
    }
    if (r.m) {
      if (s[l] === "^") {
        a += `(^|(?<=[\r
]))`;
        continue;
      } else if (s[l] === "$") {
        a += `($|(?=[\r
]))`;
        continue;
      }
    }
    if (r.s && s[l] === ".") {
      a += o ? `${s[l]}\r
` : `[${s[l]}\r
]`;
      continue;
    }
    a += s[l], s[l] === "\\" ? i = !0 : o && s[l] === "]" ? o = !1 : !o && s[l] === "[" && (o = !0);
  }
  try {
    const l = new RegExp(a);
  } catch {
    return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`), t.source;
  }
  return a;
};
function Ps(n, e) {
  var r, s, a, i;
  if (e.target === "openApi3" && ((r = n.keyType) == null ? void 0 : r._def.typeName) === D.ZodEnum)
    return {
      type: "object",
      required: n.keyType._def.values,
      properties: n.keyType._def.values.reduce((o, c) => ({
        ...o,
        [c]: J(n.valueType._def, {
          ...e,
          currentPath: [...e.currentPath, "properties", c]
        }) ?? {}
      }), {}),
      additionalProperties: !1
    };
  const t = {
    type: "object",
    additionalProperties: J(n.valueType._def, {
      ...e,
      currentPath: [...e.currentPath, "additionalProperties"]
    }) ?? {}
  };
  if (e.target === "openApi3")
    return t;
  if (((s = n.keyType) == null ? void 0 : s._def.typeName) === D.ZodString && ((a = n.keyType._def.checks) != null && a.length)) {
    const o = Object.entries(Ds(n.keyType._def, e)).reduce((c, [p, l]) => p === "type" ? c : { ...c, [p]: l }, {});
    return {
      ...t,
      propertyNames: o
    };
  } else if (((i = n.keyType) == null ? void 0 : i._def.typeName) === D.ZodEnum)
    return {
      ...t,
      propertyNames: {
        enum: n.keyType._def.values
      }
    };
  return t;
}
function Ya(n, e) {
  if (e.mapStrategy === "record")
    return Ps(n, e);
  const t = J(n.keyType._def, {
    ...e,
    currentPath: [...e.currentPath, "items", "items", "0"]
  }) || {}, r = J(n.valueType._def, {
    ...e,
    currentPath: [...e.currentPath, "items", "items", "1"]
  }) || {};
  return {
    type: "array",
    maxItems: 125,
    items: {
      type: "array",
      items: [t, r],
      minItems: 2,
      maxItems: 2
    }
  };
}
function Xa(n) {
  const e = n.values, r = Object.keys(n.values).filter((a) => typeof e[e[a]] != "number").map((a) => e[a]), s = Array.from(new Set(r.map((a) => typeof a)));
  return {
    type: s.length === 1 ? s[0] === "string" ? "string" : "number" : ["string", "number"],
    enum: r
  };
}
function Qa() {
  return {
    not: {}
  };
}
function Ka(n) {
  return n.target === "openApi3" ? {
    enum: ["null"],
    nullable: !0
  } : {
    type: "null"
  };
}
const gn = {
  ZodString: "string",
  ZodNumber: "number",
  ZodBigInt: "integer",
  ZodBoolean: "boolean",
  ZodNull: "null"
};
function ei(n, e) {
  if (e.target === "openApi3")
    return Ur(n, e);
  const t = n.options instanceof Map ? Array.from(n.options.values()) : n.options;
  if (t.every((r) => r._def.typeName in gn && (!r._def.checks || !r._def.checks.length))) {
    const r = t.reduce((s, a) => {
      const i = gn[a._def.typeName];
      return i && !s.includes(i) ? [...s, i] : s;
    }, []);
    return {
      type: r.length > 1 ? r : r[0]
    };
  } else if (t.every((r) => r._def.typeName === "ZodLiteral" && !r.description)) {
    const r = t.reduce((s, a) => {
      const i = typeof a._def.value;
      switch (i) {
        case "string":
        case "number":
        case "boolean":
          return [...s, i];
        case "bigint":
          return [...s, "integer"];
        case "object":
          if (a._def.value === null)
            return [...s, "null"];
        case "symbol":
        case "undefined":
        case "function":
        default:
          return s;
      }
    }, []);
    if (r.length === t.length) {
      const s = r.filter((a, i, o) => o.indexOf(a) === i);
      return {
        type: s.length > 1 ? s : s[0],
        enum: t.reduce((a, i) => a.includes(i._def.value) ? a : [...a, i._def.value], [])
      };
    }
  } else if (t.every((r) => r._def.typeName === "ZodEnum"))
    return {
      type: "string",
      enum: t.reduce((r, s) => [...r, ...s._def.values.filter((a) => !r.includes(a))], [])
    };
  return Ur(n, e);
}
const Ur = (n, e) => {
  const t = (n.options instanceof Map ? Array.from(n.options.values()) : n.options).map((r, s) => J(r._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", `${s}`]
  })).filter((r) => !!r && (!e.strictUnions || typeof r == "object" && Object.keys(r).length > 0));
  return t.length ? { anyOf: t } : void 0;
};
function ti(n, e) {
  if (["ZodString", "ZodNumber", "ZodBigInt", "ZodBoolean", "ZodNull"].includes(n.innerType._def.typeName) && (!n.innerType._def.checks || !n.innerType._def.checks.length))
    return e.target === "openApi3" || e.nullableStrategy === "property" ? {
      type: gn[n.innerType._def.typeName],
      nullable: !0
    } : {
      type: [gn[n.innerType._def.typeName], "null"]
    };
  if (e.target === "openApi3") {
    const r = J(n.innerType._def, {
      ...e,
      currentPath: [...e.currentPath]
    });
    return r && "$ref" in r ? { allOf: [r], nullable: !0 } : r && { ...r, nullable: !0 };
  }
  const t = J(n.innerType._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", "0"]
  });
  return t && { anyOf: [t, { type: "null" }] };
}
function ni(n, e) {
  const t = {
    type: "number"
  };
  if (!n.checks)
    return t;
  for (const r of n.checks)
    switch (r.kind) {
      case "int":
        t.type = "integer", Es(t, "type", r.message, e);
        break;
      case "min":
        e.target === "jsonSchema7" ? r.inclusive ? q(t, "minimum", r.value, r.message, e) : q(t, "exclusiveMinimum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMinimum = !0), q(t, "minimum", r.value, r.message, e));
        break;
      case "max":
        e.target === "jsonSchema7" ? r.inclusive ? q(t, "maximum", r.value, r.message, e) : q(t, "exclusiveMaximum", r.value, r.message, e) : (r.inclusive || (t.exclusiveMaximum = !0), q(t, "maximum", r.value, r.message, e));
        break;
      case "multipleOf":
        q(t, "multipleOf", r.value, r.message, e);
        break;
    }
  return t;
}
function ri(n, e) {
  return e.removeAdditionalStrategy === "strict" ? n.catchall._def.typeName === "ZodNever" ? n.unknownKeys !== "strict" : J(n.catchall._def, {
    ...e,
    currentPath: [...e.currentPath, "additionalProperties"]
  }) ?? !0 : n.catchall._def.typeName === "ZodNever" ? n.unknownKeys === "passthrough" : J(n.catchall._def, {
    ...e,
    currentPath: [...e.currentPath, "additionalProperties"]
  }) ?? !0;
}
function si(n, e) {
  const t = {
    type: "object",
    ...Object.entries(n.shape()).reduce((r, [s, a]) => {
      var c;
      if (a === void 0 || a._def === void 0)
        return r;
      const i = [...e.currentPath, "properties", s], o = J(a._def, {
        ...e,
        currentPath: i,
        propertyPath: i
      });
      if (o === void 0)
        return r;
      if (e.openaiStrictMode && a.isOptional() && !a.isNullable() && typeof ((c = a._def) == null ? void 0 : c.defaultValue) > "u")
        throw new Error(`Zod field at \`${i.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);
      return {
        properties: {
          ...r.properties,
          [s]: o
        },
        required: a.isOptional() && !e.openaiStrictMode ? r.required : [...r.required, s]
      };
    }, { properties: {}, required: [] }),
    additionalProperties: ri(n, e)
  };
  return t.required.length || delete t.required, t;
}
const ai = (n, e) => {
  var r;
  if (e.currentPath.toString() === ((r = e.propertyPath) == null ? void 0 : r.toString()))
    return J(n.innerType._def, e);
  const t = J(n.innerType._def, {
    ...e,
    currentPath: [...e.currentPath, "anyOf", "1"]
  });
  return t ? {
    anyOf: [
      {
        not: {}
      },
      t
    ]
  } : {};
}, ii = (n, e) => {
  if (e.pipeStrategy === "input")
    return J(n.in._def, e);
  if (e.pipeStrategy === "output")
    return J(n.out._def, e);
  const t = J(n.in._def, {
    ...e,
    currentPath: [...e.currentPath, "allOf", "0"]
  }), r = J(n.out._def, {
    ...e,
    currentPath: [...e.currentPath, "allOf", t ? "1" : "0"]
  });
  return {
    allOf: [t, r].filter((s) => s !== void 0)
  };
};
function oi(n, e) {
  return J(n.type._def, e);
}
function ui(n, e) {
  const r = {
    type: "array",
    uniqueItems: !0,
    items: J(n.valueType._def, {
      ...e,
      currentPath: [...e.currentPath, "items"]
    })
  };
  return n.minSize && q(r, "minItems", n.minSize.value, n.minSize.message, e), n.maxSize && q(r, "maxItems", n.maxSize.value, n.maxSize.message, e), r;
}
function ci(n, e) {
  return n.rest ? {
    type: "array",
    minItems: n.items.length,
    items: n.items.map((t, r) => J(t._def, {
      ...e,
      currentPath: [...e.currentPath, "items", `${r}`]
    })).reduce((t, r) => r === void 0 ? t : [...t, r], []),
    additionalItems: J(n.rest._def, {
      ...e,
      currentPath: [...e.currentPath, "additionalItems"]
    })
  } : {
    type: "array",
    minItems: n.items.length,
    maxItems: n.items.length,
    items: n.items.map((t, r) => J(t._def, {
      ...e,
      currentPath: [...e.currentPath, "items", `${r}`]
    })).reduce((t, r) => r === void 0 ? t : [...t, r], [])
  };
}
function di() {
  return {
    not: {}
  };
}
function li() {
  return {};
}
const pi = (n, e) => J(n.innerType._def, e);
function J(n, e, t = !1) {
  var i;
  const r = e.seen.get(n);
  if (e.override) {
    const o = (i = e.override) == null ? void 0 : i.call(e, n, e, r, t);
    if (o !== Ra)
      return o;
  }
  if (r && !t) {
    const o = fi(r, e);
    if (o !== void 0)
      return "$ref" in o && e.seenRefs.add(o.$ref), o;
  }
  const s = { def: n, path: e.currentPath, jsonSchema: void 0 };
  e.seen.set(n, s);
  const a = mi(n, n.typeName, e, t);
  return a && gi(n, e, a), s.jsonSchema = a, a;
}
const fi = (n, e) => {
  switch (e.$refStrategy) {
    case "root":
      return { $ref: n.path.join("/") };
    // this case is needed as OpenAI strict mode doesn't support top-level `$ref`s, i.e.
    // the top-level schema *must* be `{"type": "object", "properties": {...}}` but if we ever
    // need to define a `$ref`, relative `$ref`s aren't supported, so we need to extract
    // the schema to `#/definitions/` and reference that.
    //
    // e.g. if we need to reference a schema at
    // `["#","definitions","contactPerson","properties","person1","properties","name"]`
    // then we'll extract it out to `contactPerson_properties_person1_properties_name`
    case "extract-to-root":
      const t = n.path.slice(e.basePath.length + 1).join("_");
      return t !== e.name && e.nameStrategy === "duplicate-ref" && (e.definitions[t] = n.def), { $ref: [...e.basePath, e.definitionPath, t].join("/") };
    case "relative":
      return { $ref: hi(e.currentPath, n.path) };
    case "none":
    case "seen":
      return n.path.length < e.currentPath.length && n.path.every((r, s) => e.currentPath[s] === r) ? (console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`), {}) : e.$refStrategy === "seen" ? {} : void 0;
  }
}, hi = (n, e) => {
  let t = 0;
  for (; t < n.length && t < e.length && n[t] === e[t]; t++)
    ;
  return [(n.length - t).toString(), ...e.slice(t)].join("/");
}, mi = (n, e, t, r) => {
  switch (e) {
    case D.ZodString:
      return Ds(n, t);
    case D.ZodNumber:
      return ni(n, t);
    case D.ZodObject:
      return si(n, t);
    case D.ZodBigInt:
      return $a(n, t);
    case D.ZodBoolean:
      return Fa();
    case D.ZodDate:
      return Rs(n, t);
    case D.ZodUndefined:
      return di();
    case D.ZodNull:
      return Ka(t);
    case D.ZodArray:
      return Ma(n, t);
    case D.ZodUnion:
    case D.ZodDiscriminatedUnion:
      return ei(n, t);
    case D.ZodIntersection:
      return za(n, t);
    case D.ZodTuple:
      return ci(n, t);
    case D.ZodRecord:
      return Ps(n, t);
    case D.ZodLiteral:
      return Wa(n, t);
    case D.ZodEnum:
      return Ga(n);
    case D.ZodNativeEnum:
      return Xa(n);
    case D.ZodNullable:
      return ti(n, t);
    case D.ZodOptional:
      return ai(n, t);
    case D.ZodMap:
      return Ya(n, t);
    case D.ZodSet:
      return ui(n, t);
    case D.ZodLazy:
      return J(n.getter()._def, t);
    case D.ZodPromise:
      return oi(n, t);
    case D.ZodNaN:
    case D.ZodNever:
      return Qa();
    case D.ZodEffects:
      return qa(n, t, r);
    case D.ZodAny:
      return Za();
    case D.ZodUnknown:
      return li();
    case D.ZodDefault:
      return Ba(n, t);
    case D.ZodBranded:
      return La(n, t);
    case D.ZodReadonly:
      return pi(n, t);
    case D.ZodCatch:
      return Ua(n, t);
    case D.ZodPipeline:
      return ii(n, t);
    case D.ZodFunction:
    case D.ZodVoid:
    case D.ZodSymbol:
      return;
    default:
      return /* @__PURE__ */ ((s) => {
      })();
  }
}, gi = (n, e, t) => (n.description && (t.description = n.description, e.markdownDescription && (t.markdownDescription = n.description)), t), _i = (n, e) => {
  const t = ja(e), r = typeof e == "string" ? e : (e == null ? void 0 : e.nameStrategy) === "title" || e == null ? void 0 : e.name, s = J(n._def, r === void 0 ? t : {
    ...t,
    currentPath: [...t.basePath, t.definitionPath, r]
  }, !1) ?? {}, a = typeof e == "object" && e.name !== void 0 && e.nameStrategy === "title" ? e.name : void 0;
  a !== void 0 && (s.title = a);
  const i = (() => {
    if (Pa(t.definitions))
      return;
    const c = {}, p = /* @__PURE__ */ new Set();
    for (let l = 0; l < 500; l++) {
      const f = Object.entries(t.definitions).filter(([m]) => !p.has(m));
      if (f.length === 0)
        break;
      for (const [m, S] of f)
        c[m] = J(Xn(S), { ...t, currentPath: [...t.basePath, t.definitionPath, m] }, !0) ?? {}, p.add(m);
    }
    return c;
  })(), o = r === void 0 ? i ? {
    ...s,
    [t.definitionPath]: i
  } : s : t.nameStrategy === "duplicate-ref" ? {
    ...s,
    ...i || t.seenRefs.size ? {
      [t.definitionPath]: {
        ...i,
        // only actually duplicate the schema definition if it was ever referenced
        // otherwise the duplication is completely pointless
        ...t.seenRefs.size ? { [r]: s } : void 0
      }
    } : void 0
  } : {
    $ref: [...t.$refStrategy === "relative" ? [] : t.basePath, t.definitionPath, r].join("/"),
    [t.definitionPath]: {
      ...i,
      [r]: s
    }
  };
  return t.target === "jsonSchema7" ? o.$schema = "http://json-schema.org/draft-07/schema#" : t.target === "jsonSchema2019-09" && (o.$schema = "https://json-schema.org/draft/2019-09/schema#"), o;
};
function yi(n, { parser: e, callback: t }) {
  const r = { ...n };
  return Object.defineProperties(r, {
    $brand: {
      value: "auto-parseable-tool",
      enumerable: !1
    },
    $parseRaw: {
      value: e,
      enumerable: !1
    },
    $callback: {
      value: t,
      enumerable: !1
    }
  }), r;
}
function js(n, e) {
  return _i(n, {
    openaiStrictMode: !0,
    name: e.name,
    nameStrategy: "duplicate-ref",
    $refStrategy: "extract-to-root",
    nullableStrategy: "property"
  });
}
function vi(n, e, t) {
  return Na({
    type: "json_schema",
    ...t,
    name: e,
    strict: !0,
    schema: js(n, { name: e })
  }, (r) => n.parse(JSON.parse(r)));
}
function wi(n) {
  return yi({
    type: "function",
    name: n.name,
    parameters: js(n.parameters, { name: n.name }),
    strict: !0
  }, {
    callback: n.function,
    parser: (e) => n.parameters.parse(JSON.parse(e))
  });
}
class Je extends Error {
  constructor(t, r) {
    super(t);
    _(this, "state");
    this.state = r;
  }
}
class xi extends Je {
}
class Jr extends Je {
}
class fe extends Je {
}
class Q extends Je {
}
class Br extends Je {
  constructor(t, r, s) {
    super(t, s);
    _(this, "error");
    this.error = r;
  }
}
class bi extends Je {
  constructor(t, r, s) {
    super(t, s);
    _(this, "error");
    this.error = r;
  }
}
class qr extends Je {
  constructor(t, r, s) {
    super(t, s);
    _(this, "result");
    this.result = r;
  }
}
class Qn extends Je {
  constructor(t, r, s) {
    super(t, s);
    _(this, "result");
    this.result = r;
  }
}
function et(n) {
  return typeof n == "object" && n !== null && "_def" in n && typeof n._def == "object" && n._def !== null && "typeName" in n._def && n._def.typeName === "ZodObject";
}
function Si(n) {
  return typeof n == "object" && n !== null && "input" in n && typeof n.input == "string";
}
function _n(n) {
  if (n = n.replace(/\s/g, "_"), n = n.replace(/[^a-zA-Z0-9]/g, "_"), n.length === 0)
    throw new Error("Tool name cannot be empty");
  return n;
}
function yr(n, e) {
  const t = (r) => JSON.parse(r);
  if (et(n)) {
    const r = wi({
      name: e,
      parameters: n,
      function: () => {
      }
    });
    return {
      schema: r.parameters,
      parser: r.$parseRaw
    };
  } else if (typeof n == "object" && n !== null)
    return {
      schema: n,
      parser: t
    };
  throw new Q("Input type is not a ZodObject or a valid JSON schema");
}
function Gr(n) {
  if (n === "text")
    return "text";
  if (et(n)) {
    const e = vi(n, "output");
    return {
      type: e.type,
      name: e.name,
      strict: e.strict || !1,
      schema: e.schema
    };
  }
  return n;
}
function Ti(n) {
  return n && n.__esModule && Object.prototype.hasOwnProperty.call(n, "default") ? n.default : n;
}
var cn = { exports: {} }, Jn, Vr;
function ki() {
  if (Vr) return Jn;
  Vr = 1;
  var n = 1e3, e = n * 60, t = e * 60, r = t * 24, s = r * 7, a = r * 365.25;
  Jn = function(l, f) {
    f = f || {};
    var m = typeof l;
    if (m === "string" && l.length > 0)
      return i(l);
    if (m === "number" && isFinite(l))
      return f.long ? c(l) : o(l);
    throw new Error(
      "val is not a non-empty string or a valid number. val=" + JSON.stringify(l)
    );
  };
  function i(l) {
    if (l = String(l), !(l.length > 100)) {
      var f = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(
        l
      );
      if (f) {
        var m = parseFloat(f[1]), S = (f[2] || "ms").toLowerCase();
        switch (S) {
          case "years":
          case "year":
          case "yrs":
          case "yr":
          case "y":
            return m * a;
          case "weeks":
          case "week":
          case "w":
            return m * s;
          case "days":
          case "day":
          case "d":
            return m * r;
          case "hours":
          case "hour":
          case "hrs":
          case "hr":
          case "h":
            return m * t;
          case "minutes":
          case "minute":
          case "mins":
          case "min":
          case "m":
            return m * e;
          case "seconds":
          case "second":
          case "secs":
          case "sec":
          case "s":
            return m * n;
          case "milliseconds":
          case "millisecond":
          case "msecs":
          case "msec":
          case "ms":
            return m;
          default:
            return;
        }
      }
    }
  }
  function o(l) {
    var f = Math.abs(l);
    return f >= r ? Math.round(l / r) + "d" : f >= t ? Math.round(l / t) + "h" : f >= e ? Math.round(l / e) + "m" : f >= n ? Math.round(l / n) + "s" : l + "ms";
  }
  function c(l) {
    var f = Math.abs(l);
    return f >= r ? p(l, f, r, "day") : f >= t ? p(l, f, t, "hour") : f >= e ? p(l, f, e, "minute") : f >= n ? p(l, f, n, "second") : l + " ms";
  }
  function p(l, f, m, S) {
    var w = f >= m * 1.5;
    return Math.round(l / m) + " " + S + (w ? "s" : "");
  }
  return Jn;
}
var Bn, zr;
function Ii() {
  if (zr) return Bn;
  zr = 1;
  function n(e) {
    r.debug = r, r.default = r, r.coerce = p, r.disable = o, r.enable = a, r.enabled = c, r.humanize = ki(), r.destroy = l, Object.keys(e).forEach((f) => {
      r[f] = e[f];
    }), r.names = [], r.skips = [], r.formatters = {};
    function t(f) {
      let m = 0;
      for (let S = 0; S < f.length; S++)
        m = (m << 5) - m + f.charCodeAt(S), m |= 0;
      return r.colors[Math.abs(m) % r.colors.length];
    }
    r.selectColor = t;
    function r(f) {
      let m, S = null, w, x;
      function O(...R) {
        if (!O.enabled)
          return;
        const V = O, Y = Number(/* @__PURE__ */ new Date()), oe = Y - (m || Y);
        V.diff = oe, V.prev = m, V.curr = Y, m = Y, R[0] = r.coerce(R[0]), typeof R[0] != "string" && R.unshift("%O");
        let ue = 0;
        R[0] = R[0].replace(/%([a-zA-Z%])/g, (Fn, ba) => {
          if (Fn === "%%")
            return "%";
          ue++;
          const Dr = r.formatters[ba];
          if (typeof Dr == "function") {
            const Sa = R[ue];
            Fn = Dr.call(V, Sa), R.splice(ue, 1), ue--;
          }
          return Fn;
        }), r.formatArgs.call(V, R), (V.log || r.log).apply(V, R);
      }
      return O.namespace = f, O.useColors = r.useColors(), O.color = r.selectColor(f), O.extend = s, O.destroy = r.destroy, Object.defineProperty(O, "enabled", {
        enumerable: !0,
        configurable: !1,
        get: () => S !== null ? S : (w !== r.namespaces && (w = r.namespaces, x = r.enabled(f)), x),
        set: (R) => {
          S = R;
        }
      }), typeof r.init == "function" && r.init(O), O;
    }
    function s(f, m) {
      const S = r(this.namespace + (typeof m > "u" ? ":" : m) + f);
      return S.log = this.log, S;
    }
    function a(f) {
      r.save(f), r.namespaces = f, r.names = [], r.skips = [];
      const m = (typeof f == "string" ? f : "").trim().replace(" ", ",").split(",").filter(Boolean);
      for (const S of m)
        S[0] === "-" ? r.skips.push(S.slice(1)) : r.names.push(S);
    }
    function i(f, m) {
      let S = 0, w = 0, x = -1, O = 0;
      for (; S < f.length; )
        if (w < m.length && (m[w] === f[S] || m[w] === "*"))
          m[w] === "*" ? (x = w, O = S, w++) : (S++, w++);
        else if (x !== -1)
          w = x + 1, O++, S = O;
        else
          return !1;
      for (; w < m.length && m[w] === "*"; )
        w++;
      return w === m.length;
    }
    function o() {
      const f = [
        ...r.names,
        ...r.skips.map((m) => "-" + m)
      ].join(",");
      return r.enable(""), f;
    }
    function c(f) {
      for (const m of r.skips)
        if (i(f, m))
          return !1;
      for (const m of r.names)
        if (i(f, m))
          return !0;
      return !1;
    }
    function p(f) {
      return f instanceof Error ? f.stack || f.message : f;
    }
    function l() {
      console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");
    }
    return r.enable(r.load()), r;
  }
  return Bn = n, Bn;
}
var Wr;
function Ai() {
  return Wr || (Wr = 1, function(n, e) {
    e.formatArgs = r, e.save = s, e.load = a, e.useColors = t, e.storage = i(), e.destroy = /* @__PURE__ */ (() => {
      let c = !1;
      return () => {
        c || (c = !0, console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."));
      };
    })(), e.colors = [
      "#0000CC",
      "#0000FF",
      "#0033CC",
      "#0033FF",
      "#0066CC",
      "#0066FF",
      "#0099CC",
      "#0099FF",
      "#00CC00",
      "#00CC33",
      "#00CC66",
      "#00CC99",
      "#00CCCC",
      "#00CCFF",
      "#3300CC",
      "#3300FF",
      "#3333CC",
      "#3333FF",
      "#3366CC",
      "#3366FF",
      "#3399CC",
      "#3399FF",
      "#33CC00",
      "#33CC33",
      "#33CC66",
      "#33CC99",
      "#33CCCC",
      "#33CCFF",
      "#6600CC",
      "#6600FF",
      "#6633CC",
      "#6633FF",
      "#66CC00",
      "#66CC33",
      "#9900CC",
      "#9900FF",
      "#9933CC",
      "#9933FF",
      "#99CC00",
      "#99CC33",
      "#CC0000",
      "#CC0033",
      "#CC0066",
      "#CC0099",
      "#CC00CC",
      "#CC00FF",
      "#CC3300",
      "#CC3333",
      "#CC3366",
      "#CC3399",
      "#CC33CC",
      "#CC33FF",
      "#CC6600",
      "#CC6633",
      "#CC9900",
      "#CC9933",
      "#CCCC00",
      "#CCCC33",
      "#FF0000",
      "#FF0033",
      "#FF0066",
      "#FF0099",
      "#FF00CC",
      "#FF00FF",
      "#FF3300",
      "#FF3333",
      "#FF3366",
      "#FF3399",
      "#FF33CC",
      "#FF33FF",
      "#FF6600",
      "#FF6633",
      "#FF9900",
      "#FF9933",
      "#FFCC00",
      "#FFCC33"
    ];
    function t() {
      if (typeof window < "u" && window.process && (window.process.type === "renderer" || window.process.__nwjs))
        return !0;
      if (typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))
        return !1;
      let c;
      return typeof document < "u" && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773
      typeof window < "u" && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?
      // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages
      typeof navigator < "u" && navigator.userAgent && (c = navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)) && parseInt(c[1], 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker
      typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/);
    }
    function r(c) {
      if (c[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ? " %c" : " ") + c[0] + (this.useColors ? "%c " : " ") + "+" + n.exports.humanize(this.diff), !this.useColors)
        return;
      const p = "color: " + this.color;
      c.splice(1, 0, p, "color: inherit");
      let l = 0, f = 0;
      c[0].replace(/%[a-zA-Z%]/g, (m) => {
        m !== "%%" && (l++, m === "%c" && (f = l));
      }), c.splice(f, 0, p);
    }
    e.log = console.debug || console.log || (() => {
    });
    function s(c) {
      try {
        c ? e.storage.setItem("debug", c) : e.storage.removeItem("debug");
      } catch {
      }
    }
    function a() {
      let c;
      try {
        c = e.storage.getItem("debug");
      } catch {
      }
      return !c && typeof process < "u" && "env" in process && (c = process.env.DEBUG), c;
    }
    function i() {
      try {
        return localStorage;
      } catch {
      }
    }
    n.exports = Ii()(e);
    const { formatters: o } = n.exports;
    o.j = function(c) {
      try {
        return JSON.stringify(c);
      } catch (p) {
        return "[UnexpectedJSONParseError]: " + p.message;
      }
    };
  }(cn, cn.exports)), cn.exports;
}
var Ci = Ai();
const Oi = /* @__PURE__ */ Ti(Ci);
function Ei() {
  return po();
}
function Hr(n) {
  const e = Ei();
  return typeof e < "u" && (e[n] === "true" || e[n] === "1");
}
const Zs = {
  get disabled() {
    return !0;
  }
}, Ms = {
  get dontLogModelData() {
    return Hr("OPENAI_AGENTS_DONT_LOG_MODEL_DATA");
  },
  get dontLogToolData() {
    return Hr("OPENAI_AGENTS_DONT_LOG_TOOL_DATA");
  }
}, Ni = Ms.dontLogModelData, Ri = Ms.dontLogToolData;
function $s(n = "openai-agents") {
  return {
    namespace: n,
    debug: Oi(n),
    error: console.error,
    warn: console.warn,
    dontLogModelData: Ni,
    dontLogToolData: Ri
  };
}
const C = $s("openai-agents:core");
function tt(n) {
  if (n == null)
    return String(n);
  if (typeof n == "string")
    return n;
  if (typeof n == "object")
    try {
      return JSON.stringify(n);
    } catch {
      return "[object with circular references]";
    }
  return String(n);
}
function Di(n, e) {
  return `An error occurred while running the tool. Please try again. Error: ${e instanceof Error ? e.toString() : String(e)}`;
}
function Kn(n) {
  const e = n.name ? _n(n.name) : _n(n.execute.name), t = typeof n.errorFunction > "u" ? Di : n.errorFunction;
  if (!e)
    throw new Error("Tool name cannot be empty. Either name your function or provide a name in the options.");
  const r = n.strict ?? !0;
  if (!r && et(n.parameters))
    throw new Q("Strict mode is required for Zod parameters");
  const { parser: s, schema: a } = yr(n.parameters, e);
  async function i(p, l) {
    const [f, m] = await _r(() => s(l));
    if (f !== null)
      throw C.dontLogToolData ? C.debug(`Invalid JSON input for tool ${e}`) : C.debug(`Invalid JSON input for tool ${e}: ${l}`), new fe("Invalid JSON input for tool");
    C.dontLogToolData ? C.debug(`Invoking tool ${e}`) : C.debug(`Invoking tool ${e} with input ${l}`);
    const S = await n.execute(m, p), w = tt(S);
    return C.dontLogToolData ? C.debug(`Tool ${e} completed`) : C.debug(`Tool ${e} returned: ${w}`), S;
  }
  async function o(p, l) {
    return i(p, l).catch((f) => {
      if (t) {
        const m = jt();
        return m == null || m.setError({
          message: "Error running tool (non-fatal)",
          data: {
            tool_name: e,
            error: f.toString()
          }
        }), t(p, f);
      }
      throw f;
    });
  }
  const c = typeof n.needsApproval == "function" ? n.needsApproval : async () => typeof n.needsApproval == "boolean" ? n.needsApproval : !1;
  return {
    type: "function",
    name: e,
    description: n.description,
    parameters: a,
    strict: r,
    invoke: o,
    needsApproval: c
  };
}
var F;
(function(n) {
  n.assertEqual = (s) => {
  };
  function e(s) {
  }
  n.assertIs = e;
  function t(s) {
    throw new Error();
  }
  n.assertNever = t, n.arrayToEnum = (s) => {
    const a = {};
    for (const i of s)
      a[i] = i;
    return a;
  }, n.getValidEnumValues = (s) => {
    const a = n.objectKeys(s).filter((o) => typeof s[s[o]] != "number"), i = {};
    for (const o of a)
      i[o] = s[o];
    return n.objectValues(i);
  }, n.objectValues = (s) => n.objectKeys(s).map(function(a) {
    return s[a];
  }), n.objectKeys = typeof Object.keys == "function" ? (s) => Object.keys(s) : (s) => {
    const a = [];
    for (const i in s)
      Object.prototype.hasOwnProperty.call(s, i) && a.push(i);
    return a;
  }, n.find = (s, a) => {
    for (const i of s)
      if (a(i))
        return i;
  }, n.isInteger = typeof Number.isInteger == "function" ? (s) => Number.isInteger(s) : (s) => typeof s == "number" && Number.isFinite(s) && Math.floor(s) === s;
  function r(s, a = " | ") {
    return s.map((i) => typeof i == "string" ? `'${i}'` : i).join(a);
  }
  n.joinValues = r, n.jsonStringifyReplacer = (s, a) => typeof a == "bigint" ? a.toString() : a;
})(F || (F = {}));
var Yr;
(function(n) {
  n.mergeShapes = (e, t) => ({
    ...e,
    ...t
    // second overwrites first
  });
})(Yr || (Yr = {}));
const k = F.arrayToEnum([
  "string",
  "nan",
  "number",
  "integer",
  "float",
  "boolean",
  "date",
  "bigint",
  "symbol",
  "function",
  "undefined",
  "null",
  "array",
  "object",
  "unknown",
  "promise",
  "void",
  "never",
  "map",
  "set"
]), je = (n) => {
  switch (typeof n) {
    case "undefined":
      return k.undefined;
    case "string":
      return k.string;
    case "number":
      return Number.isNaN(n) ? k.nan : k.number;
    case "boolean":
      return k.boolean;
    case "function":
      return k.function;
    case "bigint":
      return k.bigint;
    case "symbol":
      return k.symbol;
    case "object":
      return Array.isArray(n) ? k.array : n === null ? k.null : n.then && typeof n.then == "function" && n.catch && typeof n.catch == "function" ? k.promise : typeof Map < "u" && n instanceof Map ? k.map : typeof Set < "u" && n instanceof Set ? k.set : typeof Date < "u" && n instanceof Date ? k.date : k.object;
    default:
      return k.unknown;
  }
}, v = F.arrayToEnum([
  "invalid_type",
  "invalid_literal",
  "custom",
  "invalid_union",
  "invalid_union_discriminator",
  "invalid_enum_value",
  "unrecognized_keys",
  "invalid_arguments",
  "invalid_return_type",
  "invalid_date",
  "invalid_string",
  "too_small",
  "too_big",
  "invalid_intersection_types",
  "not_multiple_of",
  "not_finite"
]);
class Re extends Error {
  get errors() {
    return this.issues;
  }
  constructor(e) {
    super(), this.issues = [], this.addIssue = (r) => {
      this.issues = [...this.issues, r];
    }, this.addIssues = (r = []) => {
      this.issues = [...this.issues, ...r];
    };
    const t = new.target.prototype;
    Object.setPrototypeOf ? Object.setPrototypeOf(this, t) : this.__proto__ = t, this.name = "ZodError", this.issues = e;
  }
  format(e) {
    const t = e || function(a) {
      return a.message;
    }, r = { _errors: [] }, s = (a) => {
      for (const i of a.issues)
        if (i.code === "invalid_union")
          i.unionErrors.map(s);
        else if (i.code === "invalid_return_type")
          s(i.returnTypeError);
        else if (i.code === "invalid_arguments")
          s(i.argumentsError);
        else if (i.path.length === 0)
          r._errors.push(t(i));
        else {
          let o = r, c = 0;
          for (; c < i.path.length; ) {
            const p = i.path[c];
            c === i.path.length - 1 ? (o[p] = o[p] || { _errors: [] }, o[p]._errors.push(t(i))) : o[p] = o[p] || { _errors: [] }, o = o[p], c++;
          }
        }
    };
    return s(this), r;
  }
  static assert(e) {
    if (!(e instanceof Re))
      throw new Error(`Not a ZodError: ${e}`);
  }
  toString() {
    return this.message;
  }
  get message() {
    return JSON.stringify(this.issues, F.jsonStringifyReplacer, 2);
  }
  get isEmpty() {
    return this.issues.length === 0;
  }
  flatten(e = (t) => t.message) {
    const t = {}, r = [];
    for (const s of this.issues)
      s.path.length > 0 ? (t[s.path[0]] = t[s.path[0]] || [], t[s.path[0]].push(e(s))) : r.push(e(s));
    return { formErrors: r, fieldErrors: t };
  }
  get formErrors() {
    return this.flatten();
  }
}
Re.create = (n) => new Re(n);
const er = (n, e) => {
  let t;
  switch (n.code) {
    case v.invalid_type:
      n.received === k.undefined ? t = "Required" : t = `Expected ${n.expected}, received ${n.received}`;
      break;
    case v.invalid_literal:
      t = `Invalid literal value, expected ${JSON.stringify(n.expected, F.jsonStringifyReplacer)}`;
      break;
    case v.unrecognized_keys:
      t = `Unrecognized key(s) in object: ${F.joinValues(n.keys, ", ")}`;
      break;
    case v.invalid_union:
      t = "Invalid input";
      break;
    case v.invalid_union_discriminator:
      t = `Invalid discriminator value. Expected ${F.joinValues(n.options)}`;
      break;
    case v.invalid_enum_value:
      t = `Invalid enum value. Expected ${F.joinValues(n.options)}, received '${n.received}'`;
      break;
    case v.invalid_arguments:
      t = "Invalid function arguments";
      break;
    case v.invalid_return_type:
      t = "Invalid function return type";
      break;
    case v.invalid_date:
      t = "Invalid date";
      break;
    case v.invalid_string:
      typeof n.validation == "object" ? "includes" in n.validation ? (t = `Invalid input: must include "${n.validation.includes}"`, typeof n.validation.position == "number" && (t = `${t} at one or more positions greater than or equal to ${n.validation.position}`)) : "startsWith" in n.validation ? t = `Invalid input: must start with "${n.validation.startsWith}"` : "endsWith" in n.validation ? t = `Invalid input: must end with "${n.validation.endsWith}"` : F.assertNever(n.validation) : n.validation !== "regex" ? t = `Invalid ${n.validation}` : t = "Invalid";
      break;
    case v.too_small:
      n.type === "array" ? t = `Array must contain ${n.exact ? "exactly" : n.inclusive ? "at least" : "more than"} ${n.minimum} element(s)` : n.type === "string" ? t = `String must contain ${n.exact ? "exactly" : n.inclusive ? "at least" : "over"} ${n.minimum} character(s)` : n.type === "number" ? t = `Number must be ${n.exact ? "exactly equal to " : n.inclusive ? "greater than or equal to " : "greater than "}${n.minimum}` : n.type === "date" ? t = `Date must be ${n.exact ? "exactly equal to " : n.inclusive ? "greater than or equal to " : "greater than "}${new Date(Number(n.minimum))}` : t = "Invalid input";
      break;
    case v.too_big:
      n.type === "array" ? t = `Array must contain ${n.exact ? "exactly" : n.inclusive ? "at most" : "less than"} ${n.maximum} element(s)` : n.type === "string" ? t = `String must contain ${n.exact ? "exactly" : n.inclusive ? "at most" : "under"} ${n.maximum} character(s)` : n.type === "number" ? t = `Number must be ${n.exact ? "exactly" : n.inclusive ? "less than or equal to" : "less than"} ${n.maximum}` : n.type === "bigint" ? t = `BigInt must be ${n.exact ? "exactly" : n.inclusive ? "less than or equal to" : "less than"} ${n.maximum}` : n.type === "date" ? t = `Date must be ${n.exact ? "exactly" : n.inclusive ? "smaller than or equal to" : "smaller than"} ${new Date(Number(n.maximum))}` : t = "Invalid input";
      break;
    case v.custom:
      t = "Invalid input";
      break;
    case v.invalid_intersection_types:
      t = "Intersection results could not be merged";
      break;
    case v.not_multiple_of:
      t = `Number must be a multiple of ${n.multipleOf}`;
      break;
    case v.not_finite:
      t = "Number must be finite";
      break;
    default:
      t = e.defaultError, F.assertNever(n);
  }
  return { message: t };
};
let Pi = er;
function ji() {
  return Pi;
}
const Zi = (n) => {
  const { data: e, path: t, errorMaps: r, issueData: s } = n, a = [...t, ...s.path || []], i = {
    ...s,
    path: a
  };
  if (s.message !== void 0)
    return {
      ...s,
      path: a,
      message: s.message
    };
  let o = "";
  const c = r.filter((p) => !!p).slice().reverse();
  for (const p of c)
    o = p(i, { data: e, defaultError: o }).message;
  return {
    ...s,
    path: a,
    message: o
  };
};
function b(n, e) {
  const t = ji(), r = Zi({
    issueData: e,
    data: n.data,
    path: n.path,
    errorMaps: [
      n.common.contextualErrorMap,
      // contextual error map is first priority
      n.schemaErrorMap,
      // then schema-bound map if available
      t,
      // then global override map
      t === er ? void 0 : er
      // then global default map
    ].filter((s) => !!s)
  });
  n.common.issues.push(r);
}
class ae {
  constructor() {
    this.value = "valid";
  }
  dirty() {
    this.value === "valid" && (this.value = "dirty");
  }
  abort() {
    this.value !== "aborted" && (this.value = "aborted");
  }
  static mergeArray(e, t) {
    const r = [];
    for (const s of t) {
      if (s.status === "aborted")
        return E;
      s.status === "dirty" && e.dirty(), r.push(s.value);
    }
    return { status: e.value, value: r };
  }
  static async mergeObjectAsync(e, t) {
    const r = [];
    for (const s of t) {
      const a = await s.key, i = await s.value;
      r.push({
        key: a,
        value: i
      });
    }
    return ae.mergeObjectSync(e, r);
  }
  static mergeObjectSync(e, t) {
    const r = {};
    for (const s of t) {
      const { key: a, value: i } = s;
      if (a.status === "aborted" || i.status === "aborted")
        return E;
      a.status === "dirty" && e.dirty(), i.status === "dirty" && e.dirty(), a.value !== "__proto__" && (typeof i.value < "u" || s.alwaysSet) && (r[a.value] = i.value);
    }
    return { status: e.value, value: r };
  }
}
const E = Object.freeze({
  status: "aborted"
}), Ct = (n) => ({ status: "dirty", value: n }), he = (n) => ({ status: "valid", value: n }), Xr = (n) => n.status === "aborted", Qr = (n) => n.status === "dirty", St = (n) => n.status === "valid", yn = (n) => typeof Promise < "u" && n instanceof Promise;
var I;
(function(n) {
  n.errToObj = (e) => typeof e == "string" ? { message: e } : e || {}, n.toString = (e) => typeof e == "string" ? e : e == null ? void 0 : e.message;
})(I || (I = {}));
class xe {
  constructor(e, t, r, s) {
    this._cachedPath = [], this.parent = e, this.data = t, this._path = r, this._key = s;
  }
  get path() {
    return this._cachedPath.length || (Array.isArray(this._key) ? this._cachedPath.push(...this._path, ...this._key) : this._cachedPath.push(...this._path, this._key)), this._cachedPath;
  }
}
const Kr = (n, e) => {
  if (St(e))
    return { success: !0, data: e.value };
  if (!n.common.issues.length)
    throw new Error("Validation failed but no issues detected.");
  return {
    success: !1,
    get error() {
      if (this._error)
        return this._error;
      const t = new Re(n.common.issues);
      return this._error = t, this._error;
    }
  };
};
function P(n) {
  if (!n)
    return {};
  const { errorMap: e, invalid_type_error: t, required_error: r, description: s } = n;
  if (e && (t || r))
    throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);
  return e ? { errorMap: e, description: s } : { errorMap: (i, o) => {
    const { message: c } = n;
    return i.code === "invalid_enum_value" ? { message: c ?? o.defaultError } : typeof o.data > "u" ? { message: c ?? r ?? o.defaultError } : i.code !== "invalid_type" ? { message: o.defaultError } : { message: c ?? t ?? o.defaultError };
  }, description: s };
}
class M {
  get description() {
    return this._def.description;
  }
  _getType(e) {
    return je(e.data);
  }
  _getOrReturnCtx(e, t) {
    return t || {
      common: e.parent.common,
      data: e.data,
      parsedType: je(e.data),
      schemaErrorMap: this._def.errorMap,
      path: e.path,
      parent: e.parent
    };
  }
  _processInputParams(e) {
    return {
      status: new ae(),
      ctx: {
        common: e.parent.common,
        data: e.data,
        parsedType: je(e.data),
        schemaErrorMap: this._def.errorMap,
        path: e.path,
        parent: e.parent
      }
    };
  }
  _parseSync(e) {
    const t = this._parse(e);
    if (yn(t))
      throw new Error("Synchronous parse encountered promise.");
    return t;
  }
  _parseAsync(e) {
    const t = this._parse(e);
    return Promise.resolve(t);
  }
  parse(e, t) {
    const r = this.safeParse(e, t);
    if (r.success)
      return r.data;
    throw r.error;
  }
  safeParse(e, t) {
    const r = {
      common: {
        issues: [],
        async: (t == null ? void 0 : t.async) ?? !1,
        contextualErrorMap: t == null ? void 0 : t.errorMap
      },
      path: (t == null ? void 0 : t.path) || [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: je(e)
    }, s = this._parseSync({ data: e, path: r.path, parent: r });
    return Kr(r, s);
  }
  "~validate"(e) {
    var r, s;
    const t = {
      common: {
        issues: [],
        async: !!this["~standard"].async
      },
      path: [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: je(e)
    };
    if (!this["~standard"].async)
      try {
        const a = this._parseSync({ data: e, path: [], parent: t });
        return St(a) ? {
          value: a.value
        } : {
          issues: t.common.issues
        };
      } catch (a) {
        (s = (r = a == null ? void 0 : a.message) == null ? void 0 : r.toLowerCase()) != null && s.includes("encountered") && (this["~standard"].async = !0), t.common = {
          issues: [],
          async: !0
        };
      }
    return this._parseAsync({ data: e, path: [], parent: t }).then((a) => St(a) ? {
      value: a.value
    } : {
      issues: t.common.issues
    });
  }
  async parseAsync(e, t) {
    const r = await this.safeParseAsync(e, t);
    if (r.success)
      return r.data;
    throw r.error;
  }
  async safeParseAsync(e, t) {
    const r = {
      common: {
        issues: [],
        contextualErrorMap: t == null ? void 0 : t.errorMap,
        async: !0
      },
      path: (t == null ? void 0 : t.path) || [],
      schemaErrorMap: this._def.errorMap,
      parent: null,
      data: e,
      parsedType: je(e)
    }, s = this._parse({ data: e, path: r.path, parent: r }), a = await (yn(s) ? s : Promise.resolve(s));
    return Kr(r, a);
  }
  refine(e, t) {
    const r = (s) => typeof t == "string" || typeof t > "u" ? { message: t } : typeof t == "function" ? t(s) : t;
    return this._refinement((s, a) => {
      const i = e(s), o = () => a.addIssue({
        code: v.custom,
        ...r(s)
      });
      return typeof Promise < "u" && i instanceof Promise ? i.then((c) => c ? !0 : (o(), !1)) : i ? !0 : (o(), !1);
    });
  }
  refinement(e, t) {
    return this._refinement((r, s) => e(r) ? !0 : (s.addIssue(typeof t == "function" ? t(r, s) : t), !1));
  }
  _refinement(e) {
    return new st({
      schema: this,
      typeName: N.ZodEffects,
      effect: { type: "refinement", refinement: e }
    });
  }
  superRefine(e) {
    return this._refinement(e);
  }
  constructor(e) {
    this.spa = this.safeParseAsync, this._def = e, this.parse = this.parse.bind(this), this.safeParse = this.safeParse.bind(this), this.parseAsync = this.parseAsync.bind(this), this.safeParseAsync = this.safeParseAsync.bind(this), this.spa = this.spa.bind(this), this.refine = this.refine.bind(this), this.refinement = this.refinement.bind(this), this.superRefine = this.superRefine.bind(this), this.optional = this.optional.bind(this), this.nullable = this.nullable.bind(this), this.nullish = this.nullish.bind(this), this.array = this.array.bind(this), this.promise = this.promise.bind(this), this.or = this.or.bind(this), this.and = this.and.bind(this), this.transform = this.transform.bind(this), this.brand = this.brand.bind(this), this.default = this.default.bind(this), this.catch = this.catch.bind(this), this.describe = this.describe.bind(this), this.pipe = this.pipe.bind(this), this.readonly = this.readonly.bind(this), this.isNullable = this.isNullable.bind(this), this.isOptional = this.isOptional.bind(this), this["~standard"] = {
      version: 1,
      vendor: "zod",
      validate: (t) => this["~validate"](t)
    };
  }
  optional() {
    return Ne.create(this, this._def);
  }
  nullable() {
    return at.create(this, this._def);
  }
  nullish() {
    return this.nullable().optional();
  }
  array() {
    return we.create(this);
  }
  promise() {
    return kn.create(this, this._def);
  }
  or(e) {
    return wn.create([this, e], this._def);
  }
  and(e) {
    return xn.create(this, e, this._def);
  }
  transform(e) {
    return new st({
      ...P(this._def),
      schema: this,
      typeName: N.ZodEffects,
      effect: { type: "transform", transform: e }
    });
  }
  default(e) {
    const t = typeof e == "function" ? e : () => e;
    return new In({
      ...P(this._def),
      innerType: this,
      defaultValue: t,
      typeName: N.ZodDefault
    });
  }
  brand() {
    return new Js({
      typeName: N.ZodBranded,
      type: this,
      ...P(this._def)
    });
  }
  catch(e) {
    const t = typeof e == "function" ? e : () => e;
    return new An({
      ...P(this._def),
      innerType: this,
      catchValue: t,
      typeName: N.ZodCatch
    });
  }
  describe(e) {
    const t = this.constructor;
    return new t({
      ...this._def,
      description: e
    });
  }
  pipe(e) {
    return wr.create(this, e);
  }
  readonly() {
    return Cn.create(this);
  }
  isOptional() {
    return this.safeParse(void 0).success;
  }
  isNullable() {
    return this.safeParse(null).success;
  }
}
const Mi = /^c[^\s-]{8,}$/i, $i = /^[0-9a-z]+$/, Fi = /^[0-9A-HJKMNP-TV-Z]{26}$/i, Li = /^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i, Ui = /^[a-z0-9_-]{21}$/i, Ji = /^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/, Bi = /^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/, qi = /^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i, Gi = "^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";
let qn;
const Vi = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/, zi = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/, Wi = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/, Hi = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/, Yi = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/, Xi = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/, Fs = "((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))", Qi = new RegExp(`^${Fs}$`);
function Ls(n) {
  let e = "[0-5]\\d";
  n.precision ? e = `${e}\\.\\d{${n.precision}}` : n.precision == null && (e = `${e}(\\.\\d+)?`);
  const t = n.precision ? "+" : "?";
  return `([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`;
}
function Ki(n) {
  return new RegExp(`^${Ls(n)}$`);
}
function eo(n) {
  let e = `${Fs}T${Ls(n)}`;
  const t = [];
  return t.push(n.local ? "Z?" : "Z"), n.offset && t.push("([+-]\\d{2}:?\\d{2})"), e = `${e}(${t.join("|")})`, new RegExp(`^${e}$`);
}
function to(n, e) {
  return !!((e === "v4" || !e) && Vi.test(n) || (e === "v6" || !e) && Wi.test(n));
}
function no(n, e) {
  if (!Ji.test(n))
    return !1;
  try {
    const [t] = n.split("."), r = t.replace(/-/g, "+").replace(/_/g, "/").padEnd(t.length + (4 - t.length % 4) % 4, "="), s = JSON.parse(atob(r));
    return !(typeof s != "object" || s === null || "typ" in s && (s == null ? void 0 : s.typ) !== "JWT" || !s.alg || e && s.alg !== e);
  } catch {
    return !1;
  }
}
function ro(n, e) {
  return !!((e === "v4" || !e) && zi.test(n) || (e === "v6" || !e) && Hi.test(n));
}
class Ee extends M {
  _parse(e) {
    if (this._def.coerce && (e.data = String(e.data)), this._getType(e) !== k.string) {
      const a = this._getOrReturnCtx(e);
      return b(a, {
        code: v.invalid_type,
        expected: k.string,
        received: a.parsedType
      }), E;
    }
    const r = new ae();
    let s;
    for (const a of this._def.checks)
      if (a.kind === "min")
        e.data.length < a.value && (s = this._getOrReturnCtx(e, s), b(s, {
          code: v.too_small,
          minimum: a.value,
          type: "string",
          inclusive: !0,
          exact: !1,
          message: a.message
        }), r.dirty());
      else if (a.kind === "max")
        e.data.length > a.value && (s = this._getOrReturnCtx(e, s), b(s, {
          code: v.too_big,
          maximum: a.value,
          type: "string",
          inclusive: !0,
          exact: !1,
          message: a.message
        }), r.dirty());
      else if (a.kind === "length") {
        const i = e.data.length > a.value, o = e.data.length < a.value;
        (i || o) && (s = this._getOrReturnCtx(e, s), i ? b(s, {
          code: v.too_big,
          maximum: a.value,
          type: "string",
          inclusive: !0,
          exact: !0,
          message: a.message
        }) : o && b(s, {
          code: v.too_small,
          minimum: a.value,
          type: "string",
          inclusive: !0,
          exact: !0,
          message: a.message
        }), r.dirty());
      } else if (a.kind === "email")
        qi.test(e.data) || (s = this._getOrReturnCtx(e, s), b(s, {
          validation: "email",
          code: v.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "emoji")
        qn || (qn = new RegExp(Gi, "u")), qn.test(e.data) || (s = this._getOrReturnCtx(e, s), b(s, {
          validation: "emoji",
          code: v.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "uuid")
        Li.test(e.data) || (s = this._getOrReturnCtx(e, s), b(s, {
          validation: "uuid",
          code: v.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "nanoid")
        Ui.test(e.data) || (s = this._getOrReturnCtx(e, s), b(s, {
          validation: "nanoid",
          code: v.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "cuid")
        Mi.test(e.data) || (s = this._getOrReturnCtx(e, s), b(s, {
          validation: "cuid",
          code: v.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "cuid2")
        $i.test(e.data) || (s = this._getOrReturnCtx(e, s), b(s, {
          validation: "cuid2",
          code: v.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "ulid")
        Fi.test(e.data) || (s = this._getOrReturnCtx(e, s), b(s, {
          validation: "ulid",
          code: v.invalid_string,
          message: a.message
        }), r.dirty());
      else if (a.kind === "url")
        try {
          new URL(e.data);
        } catch {
          s = this._getOrReturnCtx(e, s), b(s, {
            validation: "url",
            code: v.invalid_string,
            message: a.message
          }), r.dirty();
        }
      else a.kind === "regex" ? (a.regex.lastIndex = 0, a.regex.test(e.data) || (s = this._getOrReturnCtx(e, s), b(s, {
        validation: "regex",
        code: v.invalid_string,
        message: a.message
      }), r.dirty())) : a.kind === "trim" ? e.data = e.data.trim() : a.kind === "includes" ? e.data.includes(a.value, a.position) || (s = this._getOrReturnCtx(e, s), b(s, {
        code: v.invalid_string,
        validation: { includes: a.value, position: a.position },
        message: a.message
      }), r.dirty()) : a.kind === "toLowerCase" ? e.data = e.data.toLowerCase() : a.kind === "toUpperCase" ? e.data = e.data.toUpperCase() : a.kind === "startsWith" ? e.data.startsWith(a.value) || (s = this._getOrReturnCtx(e, s), b(s, {
        code: v.invalid_string,
        validation: { startsWith: a.value },
        message: a.message
      }), r.dirty()) : a.kind === "endsWith" ? e.data.endsWith(a.value) || (s = this._getOrReturnCtx(e, s), b(s, {
        code: v.invalid_string,
        validation: { endsWith: a.value },
        message: a.message
      }), r.dirty()) : a.kind === "datetime" ? eo(a).test(e.data) || (s = this._getOrReturnCtx(e, s), b(s, {
        code: v.invalid_string,
        validation: "datetime",
        message: a.message
      }), r.dirty()) : a.kind === "date" ? Qi.test(e.data) || (s = this._getOrReturnCtx(e, s), b(s, {
        code: v.invalid_string,
        validation: "date",
        message: a.message
      }), r.dirty()) : a.kind === "time" ? Ki(a).test(e.data) || (s = this._getOrReturnCtx(e, s), b(s, {
        code: v.invalid_string,
        validation: "time",
        message: a.message
      }), r.dirty()) : a.kind === "duration" ? Bi.test(e.data) || (s = this._getOrReturnCtx(e, s), b(s, {
        validation: "duration",
        code: v.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "ip" ? to(e.data, a.version) || (s = this._getOrReturnCtx(e, s), b(s, {
        validation: "ip",
        code: v.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "jwt" ? no(e.data, a.alg) || (s = this._getOrReturnCtx(e, s), b(s, {
        validation: "jwt",
        code: v.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "cidr" ? ro(e.data, a.version) || (s = this._getOrReturnCtx(e, s), b(s, {
        validation: "cidr",
        code: v.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "base64" ? Yi.test(e.data) || (s = this._getOrReturnCtx(e, s), b(s, {
        validation: "base64",
        code: v.invalid_string,
        message: a.message
      }), r.dirty()) : a.kind === "base64url" ? Xi.test(e.data) || (s = this._getOrReturnCtx(e, s), b(s, {
        validation: "base64url",
        code: v.invalid_string,
        message: a.message
      }), r.dirty()) : F.assertNever(a);
    return { status: r.value, value: e.data };
  }
  _regex(e, t, r) {
    return this.refinement((s) => e.test(s), {
      validation: t,
      code: v.invalid_string,
      ...I.errToObj(r)
    });
  }
  _addCheck(e) {
    return new Ee({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  email(e) {
    return this._addCheck({ kind: "email", ...I.errToObj(e) });
  }
  url(e) {
    return this._addCheck({ kind: "url", ...I.errToObj(e) });
  }
  emoji(e) {
    return this._addCheck({ kind: "emoji", ...I.errToObj(e) });
  }
  uuid(e) {
    return this._addCheck({ kind: "uuid", ...I.errToObj(e) });
  }
  nanoid(e) {
    return this._addCheck({ kind: "nanoid", ...I.errToObj(e) });
  }
  cuid(e) {
    return this._addCheck({ kind: "cuid", ...I.errToObj(e) });
  }
  cuid2(e) {
    return this._addCheck({ kind: "cuid2", ...I.errToObj(e) });
  }
  ulid(e) {
    return this._addCheck({ kind: "ulid", ...I.errToObj(e) });
  }
  base64(e) {
    return this._addCheck({ kind: "base64", ...I.errToObj(e) });
  }
  base64url(e) {
    return this._addCheck({
      kind: "base64url",
      ...I.errToObj(e)
    });
  }
  jwt(e) {
    return this._addCheck({ kind: "jwt", ...I.errToObj(e) });
  }
  ip(e) {
    return this._addCheck({ kind: "ip", ...I.errToObj(e) });
  }
  cidr(e) {
    return this._addCheck({ kind: "cidr", ...I.errToObj(e) });
  }
  datetime(e) {
    return typeof e == "string" ? this._addCheck({
      kind: "datetime",
      precision: null,
      offset: !1,
      local: !1,
      message: e
    }) : this._addCheck({
      kind: "datetime",
      precision: typeof (e == null ? void 0 : e.precision) > "u" ? null : e == null ? void 0 : e.precision,
      offset: (e == null ? void 0 : e.offset) ?? !1,
      local: (e == null ? void 0 : e.local) ?? !1,
      ...I.errToObj(e == null ? void 0 : e.message)
    });
  }
  date(e) {
    return this._addCheck({ kind: "date", message: e });
  }
  time(e) {
    return typeof e == "string" ? this._addCheck({
      kind: "time",
      precision: null,
      message: e
    }) : this._addCheck({
      kind: "time",
      precision: typeof (e == null ? void 0 : e.precision) > "u" ? null : e == null ? void 0 : e.precision,
      ...I.errToObj(e == null ? void 0 : e.message)
    });
  }
  duration(e) {
    return this._addCheck({ kind: "duration", ...I.errToObj(e) });
  }
  regex(e, t) {
    return this._addCheck({
      kind: "regex",
      regex: e,
      ...I.errToObj(t)
    });
  }
  includes(e, t) {
    return this._addCheck({
      kind: "includes",
      value: e,
      position: t == null ? void 0 : t.position,
      ...I.errToObj(t == null ? void 0 : t.message)
    });
  }
  startsWith(e, t) {
    return this._addCheck({
      kind: "startsWith",
      value: e,
      ...I.errToObj(t)
    });
  }
  endsWith(e, t) {
    return this._addCheck({
      kind: "endsWith",
      value: e,
      ...I.errToObj(t)
    });
  }
  min(e, t) {
    return this._addCheck({
      kind: "min",
      value: e,
      ...I.errToObj(t)
    });
  }
  max(e, t) {
    return this._addCheck({
      kind: "max",
      value: e,
      ...I.errToObj(t)
    });
  }
  length(e, t) {
    return this._addCheck({
      kind: "length",
      value: e,
      ...I.errToObj(t)
    });
  }
  /**
   * Equivalent to `.min(1)`
   */
  nonempty(e) {
    return this.min(1, I.errToObj(e));
  }
  trim() {
    return new Ee({
      ...this._def,
      checks: [...this._def.checks, { kind: "trim" }]
    });
  }
  toLowerCase() {
    return new Ee({
      ...this._def,
      checks: [...this._def.checks, { kind: "toLowerCase" }]
    });
  }
  toUpperCase() {
    return new Ee({
      ...this._def,
      checks: [...this._def.checks, { kind: "toUpperCase" }]
    });
  }
  get isDatetime() {
    return !!this._def.checks.find((e) => e.kind === "datetime");
  }
  get isDate() {
    return !!this._def.checks.find((e) => e.kind === "date");
  }
  get isTime() {
    return !!this._def.checks.find((e) => e.kind === "time");
  }
  get isDuration() {
    return !!this._def.checks.find((e) => e.kind === "duration");
  }
  get isEmail() {
    return !!this._def.checks.find((e) => e.kind === "email");
  }
  get isURL() {
    return !!this._def.checks.find((e) => e.kind === "url");
  }
  get isEmoji() {
    return !!this._def.checks.find((e) => e.kind === "emoji");
  }
  get isUUID() {
    return !!this._def.checks.find((e) => e.kind === "uuid");
  }
  get isNANOID() {
    return !!this._def.checks.find((e) => e.kind === "nanoid");
  }
  get isCUID() {
    return !!this._def.checks.find((e) => e.kind === "cuid");
  }
  get isCUID2() {
    return !!this._def.checks.find((e) => e.kind === "cuid2");
  }
  get isULID() {
    return !!this._def.checks.find((e) => e.kind === "ulid");
  }
  get isIP() {
    return !!this._def.checks.find((e) => e.kind === "ip");
  }
  get isCIDR() {
    return !!this._def.checks.find((e) => e.kind === "cidr");
  }
  get isBase64() {
    return !!this._def.checks.find((e) => e.kind === "base64");
  }
  get isBase64url() {
    return !!this._def.checks.find((e) => e.kind === "base64url");
  }
  get minLength() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e;
  }
  get maxLength() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e;
  }
}
Ee.create = (n) => new Ee({
  checks: [],
  typeName: N.ZodString,
  coerce: (n == null ? void 0 : n.coerce) ?? !1,
  ...P(n)
});
function so(n, e) {
  const t = (n.toString().split(".")[1] || "").length, r = (e.toString().split(".")[1] || "").length, s = t > r ? t : r, a = Number.parseInt(n.toFixed(s).replace(".", "")), i = Number.parseInt(e.toFixed(s).replace(".", ""));
  return a % i / 10 ** s;
}
class Tt extends M {
  constructor() {
    super(...arguments), this.min = this.gte, this.max = this.lte, this.step = this.multipleOf;
  }
  _parse(e) {
    if (this._def.coerce && (e.data = Number(e.data)), this._getType(e) !== k.number) {
      const a = this._getOrReturnCtx(e);
      return b(a, {
        code: v.invalid_type,
        expected: k.number,
        received: a.parsedType
      }), E;
    }
    let r;
    const s = new ae();
    for (const a of this._def.checks)
      a.kind === "int" ? F.isInteger(e.data) || (r = this._getOrReturnCtx(e, r), b(r, {
        code: v.invalid_type,
        expected: "integer",
        received: "float",
        message: a.message
      }), s.dirty()) : a.kind === "min" ? (a.inclusive ? e.data < a.value : e.data <= a.value) && (r = this._getOrReturnCtx(e, r), b(r, {
        code: v.too_small,
        minimum: a.value,
        type: "number",
        inclusive: a.inclusive,
        exact: !1,
        message: a.message
      }), s.dirty()) : a.kind === "max" ? (a.inclusive ? e.data > a.value : e.data >= a.value) && (r = this._getOrReturnCtx(e, r), b(r, {
        code: v.too_big,
        maximum: a.value,
        type: "number",
        inclusive: a.inclusive,
        exact: !1,
        message: a.message
      }), s.dirty()) : a.kind === "multipleOf" ? so(e.data, a.value) !== 0 && (r = this._getOrReturnCtx(e, r), b(r, {
        code: v.not_multiple_of,
        multipleOf: a.value,
        message: a.message
      }), s.dirty()) : a.kind === "finite" ? Number.isFinite(e.data) || (r = this._getOrReturnCtx(e, r), b(r, {
        code: v.not_finite,
        message: a.message
      }), s.dirty()) : F.assertNever(a);
    return { status: s.value, value: e.data };
  }
  gte(e, t) {
    return this.setLimit("min", e, !0, I.toString(t));
  }
  gt(e, t) {
    return this.setLimit("min", e, !1, I.toString(t));
  }
  lte(e, t) {
    return this.setLimit("max", e, !0, I.toString(t));
  }
  lt(e, t) {
    return this.setLimit("max", e, !1, I.toString(t));
  }
  setLimit(e, t, r, s) {
    return new Tt({
      ...this._def,
      checks: [
        ...this._def.checks,
        {
          kind: e,
          value: t,
          inclusive: r,
          message: I.toString(s)
        }
      ]
    });
  }
  _addCheck(e) {
    return new Tt({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  int(e) {
    return this._addCheck({
      kind: "int",
      message: I.toString(e)
    });
  }
  positive(e) {
    return this._addCheck({
      kind: "min",
      value: 0,
      inclusive: !1,
      message: I.toString(e)
    });
  }
  negative(e) {
    return this._addCheck({
      kind: "max",
      value: 0,
      inclusive: !1,
      message: I.toString(e)
    });
  }
  nonpositive(e) {
    return this._addCheck({
      kind: "max",
      value: 0,
      inclusive: !0,
      message: I.toString(e)
    });
  }
  nonnegative(e) {
    return this._addCheck({
      kind: "min",
      value: 0,
      inclusive: !0,
      message: I.toString(e)
    });
  }
  multipleOf(e, t) {
    return this._addCheck({
      kind: "multipleOf",
      value: e,
      message: I.toString(t)
    });
  }
  finite(e) {
    return this._addCheck({
      kind: "finite",
      message: I.toString(e)
    });
  }
  safe(e) {
    return this._addCheck({
      kind: "min",
      inclusive: !0,
      value: Number.MIN_SAFE_INTEGER,
      message: I.toString(e)
    })._addCheck({
      kind: "max",
      inclusive: !0,
      value: Number.MAX_SAFE_INTEGER,
      message: I.toString(e)
    });
  }
  get minValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e;
  }
  get maxValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e;
  }
  get isInt() {
    return !!this._def.checks.find((e) => e.kind === "int" || e.kind === "multipleOf" && F.isInteger(e.value));
  }
  get isFinite() {
    let e = null, t = null;
    for (const r of this._def.checks) {
      if (r.kind === "finite" || r.kind === "int" || r.kind === "multipleOf")
        return !0;
      r.kind === "min" ? (t === null || r.value > t) && (t = r.value) : r.kind === "max" && (e === null || r.value < e) && (e = r.value);
    }
    return Number.isFinite(t) && Number.isFinite(e);
  }
}
Tt.create = (n) => new Tt({
  checks: [],
  typeName: N.ZodNumber,
  coerce: (n == null ? void 0 : n.coerce) || !1,
  ...P(n)
});
class Rt extends M {
  constructor() {
    super(...arguments), this.min = this.gte, this.max = this.lte;
  }
  _parse(e) {
    if (this._def.coerce)
      try {
        e.data = BigInt(e.data);
      } catch {
        return this._getInvalidInput(e);
      }
    if (this._getType(e) !== k.bigint)
      return this._getInvalidInput(e);
    let r;
    const s = new ae();
    for (const a of this._def.checks)
      a.kind === "min" ? (a.inclusive ? e.data < a.value : e.data <= a.value) && (r = this._getOrReturnCtx(e, r), b(r, {
        code: v.too_small,
        type: "bigint",
        minimum: a.value,
        inclusive: a.inclusive,
        message: a.message
      }), s.dirty()) : a.kind === "max" ? (a.inclusive ? e.data > a.value : e.data >= a.value) && (r = this._getOrReturnCtx(e, r), b(r, {
        code: v.too_big,
        type: "bigint",
        maximum: a.value,
        inclusive: a.inclusive,
        message: a.message
      }), s.dirty()) : a.kind === "multipleOf" ? e.data % a.value !== BigInt(0) && (r = this._getOrReturnCtx(e, r), b(r, {
        code: v.not_multiple_of,
        multipleOf: a.value,
        message: a.message
      }), s.dirty()) : F.assertNever(a);
    return { status: s.value, value: e.data };
  }
  _getInvalidInput(e) {
    const t = this._getOrReturnCtx(e);
    return b(t, {
      code: v.invalid_type,
      expected: k.bigint,
      received: t.parsedType
    }), E;
  }
  gte(e, t) {
    return this.setLimit("min", e, !0, I.toString(t));
  }
  gt(e, t) {
    return this.setLimit("min", e, !1, I.toString(t));
  }
  lte(e, t) {
    return this.setLimit("max", e, !0, I.toString(t));
  }
  lt(e, t) {
    return this.setLimit("max", e, !1, I.toString(t));
  }
  setLimit(e, t, r, s) {
    return new Rt({
      ...this._def,
      checks: [
        ...this._def.checks,
        {
          kind: e,
          value: t,
          inclusive: r,
          message: I.toString(s)
        }
      ]
    });
  }
  _addCheck(e) {
    return new Rt({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  positive(e) {
    return this._addCheck({
      kind: "min",
      value: BigInt(0),
      inclusive: !1,
      message: I.toString(e)
    });
  }
  negative(e) {
    return this._addCheck({
      kind: "max",
      value: BigInt(0),
      inclusive: !1,
      message: I.toString(e)
    });
  }
  nonpositive(e) {
    return this._addCheck({
      kind: "max",
      value: BigInt(0),
      inclusive: !0,
      message: I.toString(e)
    });
  }
  nonnegative(e) {
    return this._addCheck({
      kind: "min",
      value: BigInt(0),
      inclusive: !0,
      message: I.toString(e)
    });
  }
  multipleOf(e, t) {
    return this._addCheck({
      kind: "multipleOf",
      value: e,
      message: I.toString(t)
    });
  }
  get minValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e;
  }
  get maxValue() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e;
  }
}
Rt.create = (n) => new Rt({
  checks: [],
  typeName: N.ZodBigInt,
  coerce: (n == null ? void 0 : n.coerce) ?? !1,
  ...P(n)
});
class tr extends M {
  _parse(e) {
    if (this._def.coerce && (e.data = !!e.data), this._getType(e) !== k.boolean) {
      const r = this._getOrReturnCtx(e);
      return b(r, {
        code: v.invalid_type,
        expected: k.boolean,
        received: r.parsedType
      }), E;
    }
    return he(e.data);
  }
}
tr.create = (n) => new tr({
  typeName: N.ZodBoolean,
  coerce: (n == null ? void 0 : n.coerce) || !1,
  ...P(n)
});
class vn extends M {
  _parse(e) {
    if (this._def.coerce && (e.data = new Date(e.data)), this._getType(e) !== k.date) {
      const a = this._getOrReturnCtx(e);
      return b(a, {
        code: v.invalid_type,
        expected: k.date,
        received: a.parsedType
      }), E;
    }
    if (Number.isNaN(e.data.getTime())) {
      const a = this._getOrReturnCtx(e);
      return b(a, {
        code: v.invalid_date
      }), E;
    }
    const r = new ae();
    let s;
    for (const a of this._def.checks)
      a.kind === "min" ? e.data.getTime() < a.value && (s = this._getOrReturnCtx(e, s), b(s, {
        code: v.too_small,
        message: a.message,
        inclusive: !0,
        exact: !1,
        minimum: a.value,
        type: "date"
      }), r.dirty()) : a.kind === "max" ? e.data.getTime() > a.value && (s = this._getOrReturnCtx(e, s), b(s, {
        code: v.too_big,
        message: a.message,
        inclusive: !0,
        exact: !1,
        maximum: a.value,
        type: "date"
      }), r.dirty()) : F.assertNever(a);
    return {
      status: r.value,
      value: new Date(e.data.getTime())
    };
  }
  _addCheck(e) {
    return new vn({
      ...this._def,
      checks: [...this._def.checks, e]
    });
  }
  min(e, t) {
    return this._addCheck({
      kind: "min",
      value: e.getTime(),
      message: I.toString(t)
    });
  }
  max(e, t) {
    return this._addCheck({
      kind: "max",
      value: e.getTime(),
      message: I.toString(t)
    });
  }
  get minDate() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "min" && (e === null || t.value > e) && (e = t.value);
    return e != null ? new Date(e) : null;
  }
  get maxDate() {
    let e = null;
    for (const t of this._def.checks)
      t.kind === "max" && (e === null || t.value < e) && (e = t.value);
    return e != null ? new Date(e) : null;
  }
}
vn.create = (n) => new vn({
  checks: [],
  coerce: (n == null ? void 0 : n.coerce) || !1,
  typeName: N.ZodDate,
  ...P(n)
});
class es extends M {
  _parse(e) {
    if (this._getType(e) !== k.symbol) {
      const r = this._getOrReturnCtx(e);
      return b(r, {
        code: v.invalid_type,
        expected: k.symbol,
        received: r.parsedType
      }), E;
    }
    return he(e.data);
  }
}
es.create = (n) => new es({
  typeName: N.ZodSymbol,
  ...P(n)
});
class nr extends M {
  _parse(e) {
    if (this._getType(e) !== k.undefined) {
      const r = this._getOrReturnCtx(e);
      return b(r, {
        code: v.invalid_type,
        expected: k.undefined,
        received: r.parsedType
      }), E;
    }
    return he(e.data);
  }
}
nr.create = (n) => new nr({
  typeName: N.ZodUndefined,
  ...P(n)
});
class rr extends M {
  _parse(e) {
    if (this._getType(e) !== k.null) {
      const r = this._getOrReturnCtx(e);
      return b(r, {
        code: v.invalid_type,
        expected: k.null,
        received: r.parsedType
      }), E;
    }
    return he(e.data);
  }
}
rr.create = (n) => new rr({
  typeName: N.ZodNull,
  ...P(n)
});
class sr extends M {
  constructor() {
    super(...arguments), this._any = !0;
  }
  _parse(e) {
    return he(e.data);
  }
}
sr.create = (n) => new sr({
  typeName: N.ZodAny,
  ...P(n)
});
class ts extends M {
  constructor() {
    super(...arguments), this._unknown = !0;
  }
  _parse(e) {
    return he(e.data);
  }
}
ts.create = (n) => new ts({
  typeName: N.ZodUnknown,
  ...P(n)
});
class Ue extends M {
  _parse(e) {
    const t = this._getOrReturnCtx(e);
    return b(t, {
      code: v.invalid_type,
      expected: k.never,
      received: t.parsedType
    }), E;
  }
}
Ue.create = (n) => new Ue({
  typeName: N.ZodNever,
  ...P(n)
});
class ns extends M {
  _parse(e) {
    if (this._getType(e) !== k.undefined) {
      const r = this._getOrReturnCtx(e);
      return b(r, {
        code: v.invalid_type,
        expected: k.void,
        received: r.parsedType
      }), E;
    }
    return he(e.data);
  }
}
ns.create = (n) => new ns({
  typeName: N.ZodVoid,
  ...P(n)
});
class we extends M {
  _parse(e) {
    const { ctx: t, status: r } = this._processInputParams(e), s = this._def;
    if (t.parsedType !== k.array)
      return b(t, {
        code: v.invalid_type,
        expected: k.array,
        received: t.parsedType
      }), E;
    if (s.exactLength !== null) {
      const i = t.data.length > s.exactLength.value, o = t.data.length < s.exactLength.value;
      (i || o) && (b(t, {
        code: i ? v.too_big : v.too_small,
        minimum: o ? s.exactLength.value : void 0,
        maximum: i ? s.exactLength.value : void 0,
        type: "array",
        inclusive: !0,
        exact: !0,
        message: s.exactLength.message
      }), r.dirty());
    }
    if (s.minLength !== null && t.data.length < s.minLength.value && (b(t, {
      code: v.too_small,
      minimum: s.minLength.value,
      type: "array",
      inclusive: !0,
      exact: !1,
      message: s.minLength.message
    }), r.dirty()), s.maxLength !== null && t.data.length > s.maxLength.value && (b(t, {
      code: v.too_big,
      maximum: s.maxLength.value,
      type: "array",
      inclusive: !0,
      exact: !1,
      message: s.maxLength.message
    }), r.dirty()), t.common.async)
      return Promise.all([...t.data].map((i, o) => s.type._parseAsync(new xe(t, i, t.path, o)))).then((i) => ae.mergeArray(r, i));
    const a = [...t.data].map((i, o) => s.type._parseSync(new xe(t, i, t.path, o)));
    return ae.mergeArray(r, a);
  }
  get element() {
    return this._def.type;
  }
  min(e, t) {
    return new we({
      ...this._def,
      minLength: { value: e, message: I.toString(t) }
    });
  }
  max(e, t) {
    return new we({
      ...this._def,
      maxLength: { value: e, message: I.toString(t) }
    });
  }
  length(e, t) {
    return new we({
      ...this._def,
      exactLength: { value: e, message: I.toString(t) }
    });
  }
  nonempty(e) {
    return this.min(1, e);
  }
}
we.create = (n, e) => new we({
  type: n,
  minLength: null,
  maxLength: null,
  exactLength: null,
  typeName: N.ZodArray,
  ...P(e)
});
function ut(n) {
  if (n instanceof H) {
    const e = {};
    for (const t in n.shape) {
      const r = n.shape[t];
      e[t] = Ne.create(ut(r));
    }
    return new H({
      ...n._def,
      shape: () => e
    });
  } else return n instanceof we ? new we({
    ...n._def,
    type: ut(n.element)
  }) : n instanceof Ne ? Ne.create(ut(n.unwrap())) : n instanceof at ? at.create(ut(n.unwrap())) : n instanceof nt ? nt.create(n.items.map((e) => ut(e))) : n;
}
class H extends M {
  constructor() {
    super(...arguments), this._cached = null, this.nonstrict = this.passthrough, this.augment = this.extend;
  }
  _getCached() {
    if (this._cached !== null)
      return this._cached;
    const e = this._def.shape(), t = F.objectKeys(e);
    return this._cached = { shape: e, keys: t }, this._cached;
  }
  _parse(e) {
    if (this._getType(e) !== k.object) {
      const p = this._getOrReturnCtx(e);
      return b(p, {
        code: v.invalid_type,
        expected: k.object,
        received: p.parsedType
      }), E;
    }
    const { status: r, ctx: s } = this._processInputParams(e), { shape: a, keys: i } = this._getCached(), o = [];
    if (!(this._def.catchall instanceof Ue && this._def.unknownKeys === "strip"))
      for (const p in s.data)
        i.includes(p) || o.push(p);
    const c = [];
    for (const p of i) {
      const l = a[p], f = s.data[p];
      c.push({
        key: { status: "valid", value: p },
        value: l._parse(new xe(s, f, s.path, p)),
        alwaysSet: p in s.data
      });
    }
    if (this._def.catchall instanceof Ue) {
      const p = this._def.unknownKeys;
      if (p === "passthrough")
        for (const l of o)
          c.push({
            key: { status: "valid", value: l },
            value: { status: "valid", value: s.data[l] }
          });
      else if (p === "strict")
        o.length > 0 && (b(s, {
          code: v.unrecognized_keys,
          keys: o
        }), r.dirty());
      else if (p !== "strip") throw new Error("Internal ZodObject error: invalid unknownKeys value.");
    } else {
      const p = this._def.catchall;
      for (const l of o) {
        const f = s.data[l];
        c.push({
          key: { status: "valid", value: l },
          value: p._parse(
            new xe(s, f, s.path, l)
            //, ctx.child(key), value, getParsedType(value)
          ),
          alwaysSet: l in s.data
        });
      }
    }
    return s.common.async ? Promise.resolve().then(async () => {
      const p = [];
      for (const l of c) {
        const f = await l.key, m = await l.value;
        p.push({
          key: f,
          value: m,
          alwaysSet: l.alwaysSet
        });
      }
      return p;
    }).then((p) => ae.mergeObjectSync(r, p)) : ae.mergeObjectSync(r, c);
  }
  get shape() {
    return this._def.shape();
  }
  strict(e) {
    return I.errToObj, new H({
      ...this._def,
      unknownKeys: "strict",
      ...e !== void 0 ? {
        errorMap: (t, r) => {
          var a, i;
          const s = ((i = (a = this._def).errorMap) == null ? void 0 : i.call(a, t, r).message) ?? r.defaultError;
          return t.code === "unrecognized_keys" ? {
            message: I.errToObj(e).message ?? s
          } : {
            message: s
          };
        }
      } : {}
    });
  }
  strip() {
    return new H({
      ...this._def,
      unknownKeys: "strip"
    });
  }
  passthrough() {
    return new H({
      ...this._def,
      unknownKeys: "passthrough"
    });
  }
  // const AugmentFactory =
  //   <Def extends ZodObjectDef>(def: Def) =>
  //   <Augmentation extends ZodRawShape>(
  //     augmentation: Augmentation
  //   ): ZodObject<
  //     extendShape<ReturnType<Def["shape"]>, Augmentation>,
  //     Def["unknownKeys"],
  //     Def["catchall"]
  //   > => {
  //     return new ZodObject({
  //       ...def,
  //       shape: () => ({
  //         ...def.shape(),
  //         ...augmentation,
  //       }),
  //     }) as any;
  //   };
  extend(e) {
    return new H({
      ...this._def,
      shape: () => ({
        ...this._def.shape(),
        ...e
      })
    });
  }
  /**
   * Prior to zod@1.0.12 there was a bug in the
   * inferred type of merged objects. Please
   * upgrade if you are experiencing issues.
   */
  merge(e) {
    return new H({
      unknownKeys: e._def.unknownKeys,
      catchall: e._def.catchall,
      shape: () => ({
        ...this._def.shape(),
        ...e._def.shape()
      }),
      typeName: N.ZodObject
    });
  }
  // merge<
  //   Incoming extends AnyZodObject,
  //   Augmentation extends Incoming["shape"],
  //   NewOutput extends {
  //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation
  //       ? Augmentation[k]["_output"]
  //       : k extends keyof Output
  //       ? Output[k]
  //       : never;
  //   },
  //   NewInput extends {
  //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation
  //       ? Augmentation[k]["_input"]
  //       : k extends keyof Input
  //       ? Input[k]
  //       : never;
  //   }
  // >(
  //   merging: Incoming
  // ): ZodObject<
  //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
  //   Incoming["_def"]["unknownKeys"],
  //   Incoming["_def"]["catchall"],
  //   NewOutput,
  //   NewInput
  // > {
  //   const merged: any = new ZodObject({
  //     unknownKeys: merging._def.unknownKeys,
  //     catchall: merging._def.catchall,
  //     shape: () =>
  //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
  //     typeName: ZodFirstPartyTypeKind.ZodObject,
  //   }) as any;
  //   return merged;
  // }
  setKey(e, t) {
    return this.augment({ [e]: t });
  }
  // merge<Incoming extends AnyZodObject>(
  //   merging: Incoming
  // ): //ZodObject<T & Incoming["_shape"], UnknownKeys, Catchall> = (merging) => {
  // ZodObject<
  //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
  //   Incoming["_def"]["unknownKeys"],
  //   Incoming["_def"]["catchall"]
  // > {
  //   // const mergedShape = objectUtil.mergeShapes(
  //   //   this._def.shape(),
  //   //   merging._def.shape()
  //   // );
  //   const merged: any = new ZodObject({
  //     unknownKeys: merging._def.unknownKeys,
  //     catchall: merging._def.catchall,
  //     shape: () =>
  //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
  //     typeName: ZodFirstPartyTypeKind.ZodObject,
  //   }) as any;
  //   return merged;
  // }
  catchall(e) {
    return new H({
      ...this._def,
      catchall: e
    });
  }
  pick(e) {
    const t = {};
    for (const r of F.objectKeys(e))
      e[r] && this.shape[r] && (t[r] = this.shape[r]);
    return new H({
      ...this._def,
      shape: () => t
    });
  }
  omit(e) {
    const t = {};
    for (const r of F.objectKeys(this.shape))
      e[r] || (t[r] = this.shape[r]);
    return new H({
      ...this._def,
      shape: () => t
    });
  }
  /**
   * @deprecated
   */
  deepPartial() {
    return ut(this);
  }
  partial(e) {
    const t = {};
    for (const r of F.objectKeys(this.shape)) {
      const s = this.shape[r];
      e && !e[r] ? t[r] = s : t[r] = s.optional();
    }
    return new H({
      ...this._def,
      shape: () => t
    });
  }
  required(e) {
    const t = {};
    for (const r of F.objectKeys(this.shape))
      if (e && !e[r])
        t[r] = this.shape[r];
      else {
        let a = this.shape[r];
        for (; a instanceof Ne; )
          a = a._def.innerType;
        t[r] = a;
      }
    return new H({
      ...this._def,
      shape: () => t
    });
  }
  keyof() {
    return Us(F.objectKeys(this.shape));
  }
}
H.create = (n, e) => new H({
  shape: () => n,
  unknownKeys: "strip",
  catchall: Ue.create(),
  typeName: N.ZodObject,
  ...P(e)
});
H.strictCreate = (n, e) => new H({
  shape: () => n,
  unknownKeys: "strict",
  catchall: Ue.create(),
  typeName: N.ZodObject,
  ...P(e)
});
H.lazycreate = (n, e) => new H({
  shape: n,
  unknownKeys: "strip",
  catchall: Ue.create(),
  typeName: N.ZodObject,
  ...P(e)
});
class wn extends M {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e), r = this._def.options;
    function s(a) {
      for (const o of a)
        if (o.result.status === "valid")
          return o.result;
      for (const o of a)
        if (o.result.status === "dirty")
          return t.common.issues.push(...o.ctx.common.issues), o.result;
      const i = a.map((o) => new Re(o.ctx.common.issues));
      return b(t, {
        code: v.invalid_union,
        unionErrors: i
      }), E;
    }
    if (t.common.async)
      return Promise.all(r.map(async (a) => {
        const i = {
          ...t,
          common: {
            ...t.common,
            issues: []
          },
          parent: null
        };
        return {
          result: await a._parseAsync({
            data: t.data,
            path: t.path,
            parent: i
          }),
          ctx: i
        };
      })).then(s);
    {
      let a;
      const i = [];
      for (const c of r) {
        const p = {
          ...t,
          common: {
            ...t.common,
            issues: []
          },
          parent: null
        }, l = c._parseSync({
          data: t.data,
          path: t.path,
          parent: p
        });
        if (l.status === "valid")
          return l;
        l.status === "dirty" && !a && (a = { result: l, ctx: p }), p.common.issues.length && i.push(p.common.issues);
      }
      if (a)
        return t.common.issues.push(...a.ctx.common.issues), a.result;
      const o = i.map((c) => new Re(c));
      return b(t, {
        code: v.invalid_union,
        unionErrors: o
      }), E;
    }
  }
  get options() {
    return this._def.options;
  }
}
wn.create = (n, e) => new wn({
  options: n,
  typeName: N.ZodUnion,
  ...P(e)
});
const ke = (n) => n instanceof Sn ? ke(n.schema) : n instanceof st ? ke(n.innerType()) : n instanceof Tn ? [n.value] : n instanceof rt ? n.options : n instanceof ir ? F.objectValues(n.enum) : n instanceof In ? ke(n._def.innerType) : n instanceof nr ? [void 0] : n instanceof rr ? [null] : n instanceof Ne ? [void 0, ...ke(n.unwrap())] : n instanceof at ? [null, ...ke(n.unwrap())] : n instanceof Js || n instanceof Cn ? ke(n.unwrap()) : n instanceof An ? ke(n._def.innerType) : [];
class vr extends M {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    if (t.parsedType !== k.object)
      return b(t, {
        code: v.invalid_type,
        expected: k.object,
        received: t.parsedType
      }), E;
    const r = this.discriminator, s = t.data[r], a = this.optionsMap.get(s);
    return a ? t.common.async ? a._parseAsync({
      data: t.data,
      path: t.path,
      parent: t
    }) : a._parseSync({
      data: t.data,
      path: t.path,
      parent: t
    }) : (b(t, {
      code: v.invalid_union_discriminator,
      options: Array.from(this.optionsMap.keys()),
      path: [r]
    }), E);
  }
  get discriminator() {
    return this._def.discriminator;
  }
  get options() {
    return this._def.options;
  }
  get optionsMap() {
    return this._def.optionsMap;
  }
  /**
   * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.
   * However, it only allows a union of objects, all of which need to share a discriminator property. This property must
   * have a different value for each object in the union.
   * @param discriminator the name of the discriminator property
   * @param types an array of object schemas
   * @param params
   */
  static create(e, t, r) {
    const s = /* @__PURE__ */ new Map();
    for (const a of t) {
      const i = ke(a.shape[e]);
      if (!i.length)
        throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);
      for (const o of i) {
        if (s.has(o))
          throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);
        s.set(o, a);
      }
    }
    return new vr({
      typeName: N.ZodDiscriminatedUnion,
      discriminator: e,
      options: t,
      optionsMap: s,
      ...P(r)
    });
  }
}
function ar(n, e) {
  const t = je(n), r = je(e);
  if (n === e)
    return { valid: !0, data: n };
  if (t === k.object && r === k.object) {
    const s = F.objectKeys(e), a = F.objectKeys(n).filter((o) => s.indexOf(o) !== -1), i = { ...n, ...e };
    for (const o of a) {
      const c = ar(n[o], e[o]);
      if (!c.valid)
        return { valid: !1 };
      i[o] = c.data;
    }
    return { valid: !0, data: i };
  } else if (t === k.array && r === k.array) {
    if (n.length !== e.length)
      return { valid: !1 };
    const s = [];
    for (let a = 0; a < n.length; a++) {
      const i = n[a], o = e[a], c = ar(i, o);
      if (!c.valid)
        return { valid: !1 };
      s.push(c.data);
    }
    return { valid: !0, data: s };
  } else return t === k.date && r === k.date && +n == +e ? { valid: !0, data: n } : { valid: !1 };
}
class xn extends M {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e), s = (a, i) => {
      if (Xr(a) || Xr(i))
        return E;
      const o = ar(a.value, i.value);
      return o.valid ? ((Qr(a) || Qr(i)) && t.dirty(), { status: t.value, value: o.data }) : (b(r, {
        code: v.invalid_intersection_types
      }), E);
    };
    return r.common.async ? Promise.all([
      this._def.left._parseAsync({
        data: r.data,
        path: r.path,
        parent: r
      }),
      this._def.right._parseAsync({
        data: r.data,
        path: r.path,
        parent: r
      })
    ]).then(([a, i]) => s(a, i)) : s(this._def.left._parseSync({
      data: r.data,
      path: r.path,
      parent: r
    }), this._def.right._parseSync({
      data: r.data,
      path: r.path,
      parent: r
    }));
  }
}
xn.create = (n, e, t) => new xn({
  left: n,
  right: e,
  typeName: N.ZodIntersection,
  ...P(t)
});
class nt extends M {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== k.array)
      return b(r, {
        code: v.invalid_type,
        expected: k.array,
        received: r.parsedType
      }), E;
    if (r.data.length < this._def.items.length)
      return b(r, {
        code: v.too_small,
        minimum: this._def.items.length,
        inclusive: !0,
        exact: !1,
        type: "array"
      }), E;
    !this._def.rest && r.data.length > this._def.items.length && (b(r, {
      code: v.too_big,
      maximum: this._def.items.length,
      inclusive: !0,
      exact: !1,
      type: "array"
    }), t.dirty());
    const a = [...r.data].map((i, o) => {
      const c = this._def.items[o] || this._def.rest;
      return c ? c._parse(new xe(r, i, r.path, o)) : null;
    }).filter((i) => !!i);
    return r.common.async ? Promise.all(a).then((i) => ae.mergeArray(t, i)) : ae.mergeArray(t, a);
  }
  get items() {
    return this._def.items;
  }
  rest(e) {
    return new nt({
      ...this._def,
      rest: e
    });
  }
}
nt.create = (n, e) => {
  if (!Array.isArray(n))
    throw new Error("You must pass an array of schemas to z.tuple([ ... ])");
  return new nt({
    items: n,
    typeName: N.ZodTuple,
    rest: null,
    ...P(e)
  });
};
class bn extends M {
  get keySchema() {
    return this._def.keyType;
  }
  get valueSchema() {
    return this._def.valueType;
  }
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== k.object)
      return b(r, {
        code: v.invalid_type,
        expected: k.object,
        received: r.parsedType
      }), E;
    const s = [], a = this._def.keyType, i = this._def.valueType;
    for (const o in r.data)
      s.push({
        key: a._parse(new xe(r, o, r.path, o)),
        value: i._parse(new xe(r, r.data[o], r.path, o)),
        alwaysSet: o in r.data
      });
    return r.common.async ? ae.mergeObjectAsync(t, s) : ae.mergeObjectSync(t, s);
  }
  get element() {
    return this._def.valueType;
  }
  static create(e, t, r) {
    return t instanceof M ? new bn({
      keyType: e,
      valueType: t,
      typeName: N.ZodRecord,
      ...P(r)
    }) : new bn({
      keyType: Ee.create(),
      valueType: e,
      typeName: N.ZodRecord,
      ...P(t)
    });
  }
}
class rs extends M {
  get keySchema() {
    return this._def.keyType;
  }
  get valueSchema() {
    return this._def.valueType;
  }
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== k.map)
      return b(r, {
        code: v.invalid_type,
        expected: k.map,
        received: r.parsedType
      }), E;
    const s = this._def.keyType, a = this._def.valueType, i = [...r.data.entries()].map(([o, c], p) => ({
      key: s._parse(new xe(r, o, r.path, [p, "key"])),
      value: a._parse(new xe(r, c, r.path, [p, "value"]))
    }));
    if (r.common.async) {
      const o = /* @__PURE__ */ new Map();
      return Promise.resolve().then(async () => {
        for (const c of i) {
          const p = await c.key, l = await c.value;
          if (p.status === "aborted" || l.status === "aborted")
            return E;
          (p.status === "dirty" || l.status === "dirty") && t.dirty(), o.set(p.value, l.value);
        }
        return { status: t.value, value: o };
      });
    } else {
      const o = /* @__PURE__ */ new Map();
      for (const c of i) {
        const p = c.key, l = c.value;
        if (p.status === "aborted" || l.status === "aborted")
          return E;
        (p.status === "dirty" || l.status === "dirty") && t.dirty(), o.set(p.value, l.value);
      }
      return { status: t.value, value: o };
    }
  }
}
rs.create = (n, e, t) => new rs({
  valueType: e,
  keyType: n,
  typeName: N.ZodMap,
  ...P(t)
});
class Dt extends M {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.parsedType !== k.set)
      return b(r, {
        code: v.invalid_type,
        expected: k.set,
        received: r.parsedType
      }), E;
    const s = this._def;
    s.minSize !== null && r.data.size < s.minSize.value && (b(r, {
      code: v.too_small,
      minimum: s.minSize.value,
      type: "set",
      inclusive: !0,
      exact: !1,
      message: s.minSize.message
    }), t.dirty()), s.maxSize !== null && r.data.size > s.maxSize.value && (b(r, {
      code: v.too_big,
      maximum: s.maxSize.value,
      type: "set",
      inclusive: !0,
      exact: !1,
      message: s.maxSize.message
    }), t.dirty());
    const a = this._def.valueType;
    function i(c) {
      const p = /* @__PURE__ */ new Set();
      for (const l of c) {
        if (l.status === "aborted")
          return E;
        l.status === "dirty" && t.dirty(), p.add(l.value);
      }
      return { status: t.value, value: p };
    }
    const o = [...r.data.values()].map((c, p) => a._parse(new xe(r, c, r.path, p)));
    return r.common.async ? Promise.all(o).then((c) => i(c)) : i(o);
  }
  min(e, t) {
    return new Dt({
      ...this._def,
      minSize: { value: e, message: I.toString(t) }
    });
  }
  max(e, t) {
    return new Dt({
      ...this._def,
      maxSize: { value: e, message: I.toString(t) }
    });
  }
  size(e, t) {
    return this.min(e, t).max(e, t);
  }
  nonempty(e) {
    return this.min(1, e);
  }
}
Dt.create = (n, e) => new Dt({
  valueType: n,
  minSize: null,
  maxSize: null,
  typeName: N.ZodSet,
  ...P(e)
});
class Sn extends M {
  get schema() {
    return this._def.getter();
  }
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    return this._def.getter()._parse({ data: t.data, path: t.path, parent: t });
  }
}
Sn.create = (n, e) => new Sn({
  getter: n,
  typeName: N.ZodLazy,
  ...P(e)
});
class Tn extends M {
  _parse(e) {
    if (e.data !== this._def.value) {
      const t = this._getOrReturnCtx(e);
      return b(t, {
        received: t.data,
        code: v.invalid_literal,
        expected: this._def.value
      }), E;
    }
    return { status: "valid", value: e.data };
  }
  get value() {
    return this._def.value;
  }
}
Tn.create = (n, e) => new Tn({
  value: n,
  typeName: N.ZodLiteral,
  ...P(e)
});
function Us(n, e) {
  return new rt({
    values: n,
    typeName: N.ZodEnum,
    ...P(e)
  });
}
class rt extends M {
  _parse(e) {
    if (typeof e.data != "string") {
      const t = this._getOrReturnCtx(e), r = this._def.values;
      return b(t, {
        expected: F.joinValues(r),
        received: t.parsedType,
        code: v.invalid_type
      }), E;
    }
    if (this._cache || (this._cache = new Set(this._def.values)), !this._cache.has(e.data)) {
      const t = this._getOrReturnCtx(e), r = this._def.values;
      return b(t, {
        received: t.data,
        code: v.invalid_enum_value,
        options: r
      }), E;
    }
    return he(e.data);
  }
  get options() {
    return this._def.values;
  }
  get enum() {
    const e = {};
    for (const t of this._def.values)
      e[t] = t;
    return e;
  }
  get Values() {
    const e = {};
    for (const t of this._def.values)
      e[t] = t;
    return e;
  }
  get Enum() {
    const e = {};
    for (const t of this._def.values)
      e[t] = t;
    return e;
  }
  extract(e, t = this._def) {
    return rt.create(e, {
      ...this._def,
      ...t
    });
  }
  exclude(e, t = this._def) {
    return rt.create(this.options.filter((r) => !e.includes(r)), {
      ...this._def,
      ...t
    });
  }
}
rt.create = Us;
class ir extends M {
  _parse(e) {
    const t = F.getValidEnumValues(this._def.values), r = this._getOrReturnCtx(e);
    if (r.parsedType !== k.string && r.parsedType !== k.number) {
      const s = F.objectValues(t);
      return b(r, {
        expected: F.joinValues(s),
        received: r.parsedType,
        code: v.invalid_type
      }), E;
    }
    if (this._cache || (this._cache = new Set(F.getValidEnumValues(this._def.values))), !this._cache.has(e.data)) {
      const s = F.objectValues(t);
      return b(r, {
        received: r.data,
        code: v.invalid_enum_value,
        options: s
      }), E;
    }
    return he(e.data);
  }
  get enum() {
    return this._def.values;
  }
}
ir.create = (n, e) => new ir({
  values: n,
  typeName: N.ZodNativeEnum,
  ...P(e)
});
class kn extends M {
  unwrap() {
    return this._def.type;
  }
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    if (t.parsedType !== k.promise && t.common.async === !1)
      return b(t, {
        code: v.invalid_type,
        expected: k.promise,
        received: t.parsedType
      }), E;
    const r = t.parsedType === k.promise ? t.data : Promise.resolve(t.data);
    return he(r.then((s) => this._def.type.parseAsync(s, {
      path: t.path,
      errorMap: t.common.contextualErrorMap
    })));
  }
}
kn.create = (n, e) => new kn({
  type: n,
  typeName: N.ZodPromise,
  ...P(e)
});
class st extends M {
  innerType() {
    return this._def.schema;
  }
  sourceType() {
    return this._def.schema._def.typeName === N.ZodEffects ? this._def.schema.sourceType() : this._def.schema;
  }
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e), s = this._def.effect || null, a = {
      addIssue: (i) => {
        b(r, i), i.fatal ? t.abort() : t.dirty();
      },
      get path() {
        return r.path;
      }
    };
    if (a.addIssue = a.addIssue.bind(a), s.type === "preprocess") {
      const i = s.transform(r.data, a);
      if (r.common.async)
        return Promise.resolve(i).then(async (o) => {
          if (t.value === "aborted")
            return E;
          const c = await this._def.schema._parseAsync({
            data: o,
            path: r.path,
            parent: r
          });
          return c.status === "aborted" ? E : c.status === "dirty" || t.value === "dirty" ? Ct(c.value) : c;
        });
      {
        if (t.value === "aborted")
          return E;
        const o = this._def.schema._parseSync({
          data: i,
          path: r.path,
          parent: r
        });
        return o.status === "aborted" ? E : o.status === "dirty" || t.value === "dirty" ? Ct(o.value) : o;
      }
    }
    if (s.type === "refinement") {
      const i = (o) => {
        const c = s.refinement(o, a);
        if (r.common.async)
          return Promise.resolve(c);
        if (c instanceof Promise)
          throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");
        return o;
      };
      if (r.common.async === !1) {
        const o = this._def.schema._parseSync({
          data: r.data,
          path: r.path,
          parent: r
        });
        return o.status === "aborted" ? E : (o.status === "dirty" && t.dirty(), i(o.value), { status: t.value, value: o.value });
      } else
        return this._def.schema._parseAsync({ data: r.data, path: r.path, parent: r }).then((o) => o.status === "aborted" ? E : (o.status === "dirty" && t.dirty(), i(o.value).then(() => ({ status: t.value, value: o.value }))));
    }
    if (s.type === "transform")
      if (r.common.async === !1) {
        const i = this._def.schema._parseSync({
          data: r.data,
          path: r.path,
          parent: r
        });
        if (!St(i))
          return E;
        const o = s.transform(i.value, a);
        if (o instanceof Promise)
          throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");
        return { status: t.value, value: o };
      } else
        return this._def.schema._parseAsync({ data: r.data, path: r.path, parent: r }).then((i) => St(i) ? Promise.resolve(s.transform(i.value, a)).then((o) => ({
          status: t.value,
          value: o
        })) : E);
    F.assertNever(s);
  }
}
st.create = (n, e, t) => new st({
  schema: n,
  typeName: N.ZodEffects,
  effect: e,
  ...P(t)
});
st.createWithPreprocess = (n, e, t) => new st({
  schema: e,
  effect: { type: "preprocess", transform: n },
  typeName: N.ZodEffects,
  ...P(t)
});
class Ne extends M {
  _parse(e) {
    return this._getType(e) === k.undefined ? he(void 0) : this._def.innerType._parse(e);
  }
  unwrap() {
    return this._def.innerType;
  }
}
Ne.create = (n, e) => new Ne({
  innerType: n,
  typeName: N.ZodOptional,
  ...P(e)
});
class at extends M {
  _parse(e) {
    return this._getType(e) === k.null ? he(null) : this._def.innerType._parse(e);
  }
  unwrap() {
    return this._def.innerType;
  }
}
at.create = (n, e) => new at({
  innerType: n,
  typeName: N.ZodNullable,
  ...P(e)
});
class In extends M {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e);
    let r = t.data;
    return t.parsedType === k.undefined && (r = this._def.defaultValue()), this._def.innerType._parse({
      data: r,
      path: t.path,
      parent: t
    });
  }
  removeDefault() {
    return this._def.innerType;
  }
}
In.create = (n, e) => new In({
  innerType: n,
  typeName: N.ZodDefault,
  defaultValue: typeof e.default == "function" ? e.default : () => e.default,
  ...P(e)
});
class An extends M {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e), r = {
      ...t,
      common: {
        ...t.common,
        issues: []
      }
    }, s = this._def.innerType._parse({
      data: r.data,
      path: r.path,
      parent: {
        ...r
      }
    });
    return yn(s) ? s.then((a) => ({
      status: "valid",
      value: a.status === "valid" ? a.value : this._def.catchValue({
        get error() {
          return new Re(r.common.issues);
        },
        input: r.data
      })
    })) : {
      status: "valid",
      value: s.status === "valid" ? s.value : this._def.catchValue({
        get error() {
          return new Re(r.common.issues);
        },
        input: r.data
      })
    };
  }
  removeCatch() {
    return this._def.innerType;
  }
}
An.create = (n, e) => new An({
  innerType: n,
  typeName: N.ZodCatch,
  catchValue: typeof e.catch == "function" ? e.catch : () => e.catch,
  ...P(e)
});
class ss extends M {
  _parse(e) {
    if (this._getType(e) !== k.nan) {
      const r = this._getOrReturnCtx(e);
      return b(r, {
        code: v.invalid_type,
        expected: k.nan,
        received: r.parsedType
      }), E;
    }
    return { status: "valid", value: e.data };
  }
}
ss.create = (n) => new ss({
  typeName: N.ZodNaN,
  ...P(n)
});
class Js extends M {
  _parse(e) {
    const { ctx: t } = this._processInputParams(e), r = t.data;
    return this._def.type._parse({
      data: r,
      path: t.path,
      parent: t
    });
  }
  unwrap() {
    return this._def.type;
  }
}
class wr extends M {
  _parse(e) {
    const { status: t, ctx: r } = this._processInputParams(e);
    if (r.common.async)
      return (async () => {
        const a = await this._def.in._parseAsync({
          data: r.data,
          path: r.path,
          parent: r
        });
        return a.status === "aborted" ? E : a.status === "dirty" ? (t.dirty(), Ct(a.value)) : this._def.out._parseAsync({
          data: a.value,
          path: r.path,
          parent: r
        });
      })();
    {
      const s = this._def.in._parseSync({
        data: r.data,
        path: r.path,
        parent: r
      });
      return s.status === "aborted" ? E : s.status === "dirty" ? (t.dirty(), {
        status: "dirty",
        value: s.value
      }) : this._def.out._parseSync({
        data: s.value,
        path: r.path,
        parent: r
      });
    }
  }
  static create(e, t) {
    return new wr({
      in: e,
      out: t,
      typeName: N.ZodPipeline
    });
  }
}
class Cn extends M {
  _parse(e) {
    const t = this._def.innerType._parse(e), r = (s) => (St(s) && (s.value = Object.freeze(s.value)), s);
    return yn(t) ? t.then((s) => r(s)) : r(t);
  }
  unwrap() {
    return this._def.innerType;
  }
}
Cn.create = (n, e) => new Cn({
  innerType: n,
  typeName: N.ZodReadonly,
  ...P(e)
});
var N;
(function(n) {
  n.ZodString = "ZodString", n.ZodNumber = "ZodNumber", n.ZodNaN = "ZodNaN", n.ZodBigInt = "ZodBigInt", n.ZodBoolean = "ZodBoolean", n.ZodDate = "ZodDate", n.ZodSymbol = "ZodSymbol", n.ZodUndefined = "ZodUndefined", n.ZodNull = "ZodNull", n.ZodAny = "ZodAny", n.ZodUnknown = "ZodUnknown", n.ZodNever = "ZodNever", n.ZodVoid = "ZodVoid", n.ZodArray = "ZodArray", n.ZodObject = "ZodObject", n.ZodUnion = "ZodUnion", n.ZodDiscriminatedUnion = "ZodDiscriminatedUnion", n.ZodIntersection = "ZodIntersection", n.ZodTuple = "ZodTuple", n.ZodRecord = "ZodRecord", n.ZodMap = "ZodMap", n.ZodSet = "ZodSet", n.ZodFunction = "ZodFunction", n.ZodLazy = "ZodLazy", n.ZodLiteral = "ZodLiteral", n.ZodEnum = "ZodEnum", n.ZodEffects = "ZodEffects", n.ZodNativeEnum = "ZodNativeEnum", n.ZodOptional = "ZodOptional", n.ZodNullable = "ZodNullable", n.ZodDefault = "ZodDefault", n.ZodCatch = "ZodCatch", n.ZodPromise = "ZodPromise", n.ZodBranded = "ZodBranded", n.ZodPipeline = "ZodPipeline", n.ZodReadonly = "ZodReadonly";
})(N || (N = {}));
const d = Ee.create, A = Tt.create, Et = tr.create, U = sr.create;
Ue.create;
const B = we.create, g = H.create, Bs = wn.create, pe = vr.create;
xn.create;
nt.create;
const ne = bn.create, ao = Sn.create, h = Tn.create, se = rt.create;
kn.create;
Ne.create;
at.create;
g({
  name: d(),
  description: d().optional(),
  inputSchema: g({
    type: h("object"),
    properties: ne(d(), U()),
    required: B(d()),
    additionalProperties: Et()
  })
});
async function io(n, e = !1) {
  const t = [], r = /* @__PURE__ */ new Set();
  for (const s of n) {
    const a = await oo(s, e), o = [...new Set(a.map((c) => c.name))].filter((c) => r.has(c));
    if (o.length > 0)
      throw new Q(`Duplicate tool names found across MCP servers: ${o.join(", ")}`);
    for (const c of a)
      r.add(c.name), t.push(c);
  }
  return t;
}
const Gn = {};
async function oo(n, e) {
  return n.cacheToolsList && Gn[n.name] ? Gn[n.name] : Po(async (t) => {
    const r = await n.listTools();
    t.spanData.result = r.map((a) => a.name);
    const s = r.map((a) => co(a, n, e));
    return n.cacheToolsList && (Gn[n.name] = s), s;
  }, { data: { server: n.name } });
}
async function uo(n, e = !1) {
  return io(n, e);
}
function co(n, e, t) {
  var i, o, c, p;
  async function r(l, f) {
    let m = {};
    typeof l == "string" && l ? m = JSON.parse(l) : typeof l == "object" && l != null && (m = l);
    const S = jt();
    S && (S.spanData.mcp_data = { server: e.name });
    const w = await e.callTool(n.name, m);
    return w.length === 1 ? w[0] : w;
  }
  const s = {
    type: ((i = n.inputSchema) == null ? void 0 : i.type) ?? "object",
    properties: ((o = n.inputSchema) == null ? void 0 : o.properties) ?? {},
    required: ((c = n.inputSchema) == null ? void 0 : c.required) ?? [],
    additionalProperties: ((p = n.inputSchema) == null ? void 0 : p.additionalProperties) ?? !1
  };
  if (t || s.additionalProperties === !0)
    try {
      const l = lo(s);
      return Kn({
        name: n.name,
        description: n.description || "",
        parameters: l,
        strict: !0,
        execute: r
      });
    } catch (l) {
      C.warn(`Error converting MCP schema to strict mode: ${l}`);
    }
  const a = {
    ...s,
    additionalProperties: !0
  };
  return Kn({
    name: n.name,
    description: n.description || "",
    parameters: a,
    strict: !1,
    execute: r
  });
}
function lo(n) {
  const e = {
    ...n,
    additionalProperties: !1
  };
  return e.required || (e.required = []), e;
}
function po() {
  return {};
}
var pt;
class Pn {
  constructor() {
    T(this, pt, new EventTarget());
  }
  on(e, t) {
    return u(this, pt).addEventListener(e, (r) => t(...r.detail ?? [])), this;
  }
  off(e, t) {
    return u(this, pt).removeEventListener(e, (r) => t(...r.detail ?? [])), this;
  }
  emit(e, ...t) {
    const r = new CustomEvent(e, { detail: t });
    return u(this, pt).dispatchEvent(r);
  }
  once(e, t) {
    const r = (...s) => {
      this.off(e, r), t(...s);
    };
    return this.on(e, r), this;
  }
}
pt = new WeakMap();
const qs = crypto.randomUUID.bind(crypto), fo = class {
  constructor() {
  }
  pipeTo(e, t) {
  }
  pipeThrough(e, t) {
  }
}, ho = globalThis.ReadableStream, mo = globalThis.TransformStream;
class go {
  constructor() {
    _(this, "context", null);
  }
  run(e, t) {
    return this.context = e, t();
  }
  getStore() {
    return this.context;
  }
  enterWith(e) {
    this.context = e;
  }
}
class _o {
  constructor() {
  }
  setTimeout(e, t) {
    const r = setTimeout(e, t);
    return r.ref = typeof r.ref == "function" ? r.ref : () => r, r.unref = typeof r.unref == "function" ? r.unref : () => r, r.hasRef = typeof r.hasRef == "function" ? r.hasRef : () => !0, r.refresh = typeof r.refresh == "function" ? r.refresh : () => r, r;
  }
  clearTimeout(e) {
    window.clearTimeout(e);
  }
}
const yo = new _o();
let as;
function be() {
  return as ?? (as = new go()), as;
}
function Pt() {
  const n = be().getStore();
  return n != null && n.trace ? n.trace : null;
}
function jt() {
  const n = be().getStore();
  return n != null && n.span ? n.span : null;
}
function Gs(n) {
  return async () => {
    const e = Pt();
    if (!e)
      throw new Error("No trace found");
    await e.start();
    const t = await n(e);
    return await e.end(), t;
  };
}
async function vo(n, e, t = {}) {
  const r = typeof n == "string" ? Te().createTrace({
    ...t,
    name: n
  }) : n;
  return be().run({ trace: r }, Gs(e));
}
async function wo(n, e = {}) {
  if (Pt())
    return await n();
  const r = Te().createTrace(e);
  return be().run({ trace: r }, Gs(n));
}
function ln(n) {
  const e = be().getStore();
  if (!e)
    throw new Error("No existing trace found");
  e.span && (e.span.previousSpan = e.previousSpan, e.previousSpan = e.span), e.span = n, be().enterWith(e);
}
function Ot() {
  var e;
  const n = be().getStore();
  n && (n.span = n.previousSpan, n.previousSpan = (e = n.previousSpan) == null ? void 0 : e.previousSpan, be().enterWith(n));
}
function lt(n) {
  const e = jt();
  e && e.setError(n);
}
function xo(n) {
  var e, t, r;
  return {
    trace: (e = n.trace) == null ? void 0 : e.clone(),
    span: (t = n.span) == null ? void 0 : t.clone(),
    previousSpan: (r = n.previousSpan) == null ? void 0 : r.clone()
  };
}
function or(n) {
  const e = be().getStore();
  if (!e)
    throw new Error("No existing trace found");
  const t = xo(e);
  return be().run(t, n);
}
class bo {
  async export(e) {
    if (Zs.disabled) {
      C.debug("Tracing is disabled. Skipping export");
      return;
    }
    for (const t of e)
      t.type === "trace" ? console.log(`[Exporter] Export trace traceId=${t.traceId} name=${t.name}`) : console.log(`[Exporter] Export span: ${JSON.stringify(t)}`);
  }
}
var Lt, ft, Ut, Jt, ht, te, Ae, Ze, Me, mt, ie, ur, cr, ct;
class So {
  constructor(e, {
    maxQueueSize: t = 1e3,
    maxBatchSize: r = 100,
    scheduleDelay: s = 5e3,
    // 5 seconds
    exportTriggerRatio: a = 0.8
  } = {}) {
    T(this, ie);
    T(this, Lt);
    T(this, ft);
    T(this, Ut);
    T(this, Jt);
    T(this, ht);
    T(this, te, []);
    T(this, Ae);
    T(this, Ze, null);
    T(this, Me, !1);
    T(this, mt, null);
    y(this, Lt, t), y(this, ft, r), y(this, Ut, s), y(this, Jt, t * a), y(this, ht, e), y(this, Ae, yo), C.debug("Automatic trace export loop is not supported in this environment. You need to manually call `getGlobalTraceProvider().forceFlush()` to export traces.");
  }
  start() {
    y(this, mt, new AbortController()), $(this, ie, cr).call(this);
  }
  async onTraceStart(e) {
    await $(this, ie, ur).call(this, e);
  }
  async onTraceEnd(e) {
  }
  async onSpanStart(e) {
  }
  async onSpanEnd(e) {
    await $(this, ie, ur).call(this, e);
  }
  async shutdown(e) {
    var t;
    for (e && u(this, Ae).setTimeout(() => {
      var r;
      (r = u(this, mt)) == null || r.abort();
    }, e), C.debug("Shutting down gracefully"); u(this, te).length > 0; ) {
      if (C.debug(`Waiting for buffer to empty. Items left: ${u(this, te).length}`), u(this, Me) || await $(this, ie, ct).call(this, !0), (t = u(this, mt)) != null && t.signal.aborted) {
        C.debug("Timeout reached, force flushing"), await $(this, ie, ct).call(this, !0);
        break;
      }
      await new Promise((r) => u(this, Ae).setTimeout(r, 500));
    }
    C.debug("Buffer empty. Exiting"), u(this, Ae) && u(this, Ze) && u(this, Ae).clearTimeout(u(this, Ze));
  }
  async forceFlush() {
    u(this, te).length > 0 && await $(this, ie, ct).call(this, !0);
  }
}
Lt = new WeakMap(), ft = new WeakMap(), Ut = new WeakMap(), Jt = new WeakMap(), ht = new WeakMap(), te = new WeakMap(), Ae = new WeakMap(), Ze = new WeakMap(), Me = new WeakMap(), mt = new WeakMap(), ie = new WeakSet(), ur = async function(e) {
  if (u(this, te).length + 1 > u(this, Lt)) {
    C.error("Dropping trace because buffer is full");
    return;
  }
  u(this, te).push(e), u(this, te).length > u(this, Jt) && await $(this, ie, ct).call(this);
}, cr = function() {
  y(this, Ze, u(this, Ae).setTimeout(async () => {
    await $(this, ie, ct).call(this), $(this, ie, cr).call(this);
  }, u(this, Ut))), typeof u(this, Ze).unref == "function" && u(this, Ze).unref();
}, ct = async function(e = !1) {
  if (u(this, te).length !== 0) {
    if (C.debug(`Exporting batches. Force: ${e}. Buffer size: ${u(this, te).length}`), e || u(this, te).length < u(this, ft)) {
      const t = [...u(this, te)];
      y(this, te, []), y(this, Me, !0), await u(this, ht).export(t), y(this, Me, !1);
    } else if (u(this, te).length > 0) {
      const t = u(this, te).splice(0, u(this, ft));
      y(this, Me, !0), await u(this, ht).export(t), y(this, Me, !1);
    }
  }
};
var ce;
class To {
  constructor() {
    T(this, ce, []);
  }
  start() {
    for (const e of u(this, ce))
      e.start && e.start();
  }
  addTraceProcessor(e) {
    u(this, ce).push(e);
  }
  setProcessors(e) {
    C.debug("Shutting down old processors");
    for (const t of u(this, ce))
      t.shutdown();
    y(this, ce, e);
  }
  async onTraceStart(e) {
    for (const t of u(this, ce))
      await t.onTraceStart(e);
  }
  async onTraceEnd(e) {
    for (const t of u(this, ce))
      await t.onTraceEnd(e);
  }
  async onSpanStart(e) {
    for (const t of u(this, ce))
      await t.onSpanStart(e);
  }
  async onSpanEnd(e) {
    for (const t of u(this, ce))
      await t.onSpanEnd(e);
  }
  async shutdown(e) {
    for (const t of u(this, ce))
      await t.shutdown(e);
  }
  async forceFlush() {
    for (const e of u(this, ce))
      await e.forceFlush();
  }
}
ce = new WeakMap();
let Vn = null, zn = null;
function ko() {
  return Vn || (Vn = new bo()), Vn;
}
function Vs() {
  return zn || (zn = new So(ko())), zn;
}
function is() {
  return (/* @__PURE__ */ new Date()).toISOString();
}
function zs() {
  return `trace_${qs().replace(/-/g, "")}`;
}
function Io() {
  return `span_${qs().replace(/-/g, "").slice(0, 24)}`;
}
function Ao(n) {
  return Object.fromEntries(Object.entries(n).filter(([e]) => !e.startsWith("_")));
}
var Bt, qt, Gt, Vt, Ge, $e, Fe, Ve, zt;
const Nr = class Nr {
  constructor(e, t) {
    _(this, "type", "trace.span");
    T(this, Bt);
    T(this, qt);
    T(this, Gt);
    T(this, Vt);
    T(this, Ge);
    T(this, $e);
    T(this, Fe);
    T(this, Ve);
    T(this, zt);
    y(this, qt, e.traceId), y(this, Gt, e.spanId ?? Io()), y(this, Bt, e.data), y(this, Ge, t), y(this, Vt, e.parentId ?? null), y(this, Ve, e.error ?? null), y(this, $e, e.startedAt ?? null), y(this, Fe, e.endedAt ?? null);
  }
  get traceId() {
    return u(this, qt);
  }
  get spanData() {
    return u(this, Bt);
  }
  get spanId() {
    return u(this, Gt);
  }
  get parentId() {
    return u(this, Vt);
  }
  get previousSpan() {
    return u(this, zt);
  }
  set previousSpan(e) {
    y(this, zt, e);
  }
  start() {
    if (u(this, $e)) {
      C.warn("Span already started");
      return;
    }
    y(this, $e, is()), u(this, Ge).onSpanStart(this);
  }
  end() {
    if (u(this, Fe)) {
      C.debug("Span already finished", this.spanData);
      return;
    }
    y(this, Fe, is()), u(this, Ge).onSpanEnd(this);
  }
  setError(e) {
    y(this, Ve, e);
  }
  get error() {
    return u(this, Ve);
  }
  get startedAt() {
    return u(this, $e);
  }
  get endedAt() {
    return u(this, Fe);
  }
  clone() {
    var t;
    const e = new Nr({
      traceId: this.traceId,
      spanId: this.spanId,
      parentId: this.parentId ?? void 0,
      data: this.spanData,
      startedAt: u(this, $e) ?? void 0,
      endedAt: u(this, Fe) ?? void 0,
      error: u(this, Ve) ?? void 0
    }, u(this, Ge));
    return e.previousSpan = (t = this.previousSpan) == null ? void 0 : t.clone(), e;
  }
  toJSON() {
    return {
      object: this.type,
      id: this.spanId,
      trace_id: this.traceId,
      parent_id: this.parentId,
      started_at: this.startedAt,
      ended_at: this.endedAt,
      span_data: Ao(this.spanData),
      error: this.error
    };
  }
};
Bt = new WeakMap(), qt = new WeakMap(), Gt = new WeakMap(), Vt = new WeakMap(), Ge = new WeakMap(), $e = new WeakMap(), Fe = new WeakMap(), Ve = new WeakMap(), zt = new WeakMap();
let Zt = Nr;
class De extends Zt {
  constructor(e, t) {
    super({ traceId: "no-op", spanId: "no-op", data: e }, t);
  }
  start() {
  }
  end() {
  }
  setError() {
  }
  toJSON() {
    return null;
  }
}
var gt, Ce;
const Rr = class Rr {
  constructor(e, t) {
    _(this, "type", "trace");
    _(this, "traceId");
    _(this, "name");
    _(this, "groupId", null);
    _(this, "metadata");
    T(this, gt);
    T(this, Ce);
    this.traceId = e.traceId ?? zs(), this.name = e.name ?? "Agent workflow", this.groupId = e.groupId ?? null, this.metadata = e.metadata ?? {}, y(this, gt, t ?? Vs()), y(this, Ce, e.started ?? !1);
  }
  async start() {
    u(this, Ce) || (y(this, Ce, !0), await u(this, gt).onTraceStart(this));
  }
  async end() {
    u(this, Ce) && (y(this, Ce, !1), await u(this, gt).onTraceEnd(this));
  }
  clone() {
    return new Rr({
      traceId: this.traceId,
      name: this.name,
      groupId: this.groupId ?? void 0,
      metadata: this.metadata,
      started: u(this, Ce)
    });
  }
  toJSON() {
    return {
      object: this.type,
      id: this.traceId,
      workflow_name: this.name,
      group_id: this.groupId,
      metadata: this.metadata
    };
  }
};
gt = new WeakMap(), Ce = new WeakMap();
let Mt = Rr;
class Wn extends Mt {
  constructor() {
    super({});
  }
  async start() {
  }
  async end() {
  }
  toJSON() {
    return null;
  }
}
var K, ze, Rn, Ws;
class Co {
  constructor() {
    T(this, Rn);
    T(this, K);
    T(this, ze);
    y(this, K, new To()), y(this, ze, Zs.disabled), $(this, Rn, Ws).call(this);
  }
  /**
   * Add a processor to the list of processors. Each processor will receive all traces/spans.
   *
   * @param processor - The processor to add.
   */
  registerProcessor(e) {
    u(this, K).addTraceProcessor(e);
  }
  /**
   * Set the list of processors. This will replace any existing processors.
   *
   * @param processors - The list of processors to set.
   */
  setProcessors(e) {
    u(this, K).setProcessors(e);
  }
  /**
   * Get the current trace.
   *
   * @returns The current trace.
   */
  getCurrentTrace() {
    return Pt();
  }
  getCurrentSpan() {
    return jt();
  }
  setDisabled(e) {
    y(this, ze, e);
  }
  startExportLoop() {
    u(this, K).start();
  }
  createTrace(e) {
    if (u(this, ze))
      return C.debug("Tracing is disabled, Not creating trace %o", e), new Wn();
    const t = e.traceId ?? zs(), r = e.name ?? "Agent workflow";
    return C.debug("Creating trace %s with name %s", t, r), new Mt({ ...e, name: r, traceId: t }, u(this, K));
  }
  createSpan(e, t) {
    if (u(this, ze) || e.disabled)
      return C.debug("Tracing is disabled, Not creating span %o", e), new De(e.data, u(this, K));
    let r, s;
    if (t) {
      if (t instanceof Mt) {
        if (t instanceof Wn)
          return C.debug("Parent trace is no-op, returning NoopSpan"), new De(e.data, u(this, K));
        s = t.traceId;
      } else if (t instanceof Zt) {
        if (t instanceof De)
          return C.debug("Parent span is no-op, returning NoopSpan"), new De(e.data, u(this, K));
        r = t.spanId, s = t.traceId;
      }
    } else {
      const a = Pt(), i = jt();
      if (!a)
        return C.error("No active trace. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."), new De(e.data, u(this, K));
      if (i instanceof De || a instanceof Wn)
        return C.debug(`Parent ${i} or ${a} is no-op, returning NoopSpan`), new De(e.data, u(this, K));
      s = a.traceId, i ? (C.debug("Using parent span %s", i.spanId), r = i.spanId) : C.debug("No parent span, using current trace %s", a.traceId);
    }
    return s ? (C.debug(`Creating span ${JSON.stringify(e.data)} with id ${e.spanId ?? s}`), new Zt({
      ...e,
      traceId: s,
      parentId: r
    }, u(this, K))) : (C.error("No traceId found. Make sure to start a trace with `withTrace()` first. Returning NoopSpan."), new De(e.data, u(this, K)));
  }
  async shutdown(e) {
    try {
      C.debug("Shutting down tracing provider"), await u(this, K).shutdown(e);
    } catch (t) {
      C.error("Error shutting down tracing provider %o", t);
    }
  }
  async forceFlush() {
    await u(this, K).forceFlush();
  }
}
K = new WeakMap(), ze = new WeakMap(), Rn = new WeakSet(), /** Adds listeners to `process` to ensure `shutdown` occurs before exit. */
Ws = function() {
  if (typeof process < "u" && typeof process.on == "function") {
    const e = async () => {
      const t = setTimeout(() => {
        console.warn("Cleanup timeout, forcing exit"), process.exit(1);
      }, 5e3);
      try {
        await this.shutdown();
      } finally {
        clearTimeout(t);
      }
    };
    process.on("beforeExit", e), process.on("SIGINT", async () => {
      await e(), process.exit(130);
    }), process.on("SIGTERM", async () => {
      await e(), process.exit(0);
    }), process.on("unhandledRejection", async (t, r) => {
      C.error("Unhandled rejection", t, r), await e(), process.exit(1);
    });
  }
};
let Hn;
function Te() {
  return Hn || (Hn = new Co()), Hn;
}
function jn(n) {
  return async (e, ...t) => or(async () => {
    const r = n(...t);
    ln(r);
    try {
      return r.start(), await e(r);
    } catch (s) {
      throw r.setError({
        message: s.message,
        data: s.data
      }), s;
    } finally {
      r.end(), Ot();
    }
  });
}
function os(n, e) {
  var t;
  return Te().createSpan({
    ...n,
    data: {
      type: "agent",
      name: ((t = n == null ? void 0 : n.data) == null ? void 0 : t.name) ?? "Agent",
      ...n == null ? void 0 : n.data
    }
  }, e);
}
function Oo(n, e) {
  var t, r;
  return Te().createSpan({
    ...n,
    data: {
      type: "function",
      input: ((t = n == null ? void 0 : n.data) == null ? void 0 : t.input) ?? "",
      output: ((r = n == null ? void 0 : n.data) == null ? void 0 : r.output) ?? "",
      ...n == null ? void 0 : n.data
    }
  }, e);
}
const us = jn(Oo);
function Eo(n, e) {
  return Te().createSpan({
    ...n,
    data: { type: "handoff", ...n == null ? void 0 : n.data }
  }, e);
}
const No = jn(Eo);
function Ro(n, e) {
  return Te().createSpan({
    ...n,
    data: {
      type: "guardrail",
      triggered: !1,
      ...n == null ? void 0 : n.data
    }
  }, e);
}
const cs = jn(Ro);
function Do(n, e) {
  return Te().createSpan({
    ...n,
    data: {
      type: "mcp_tools",
      ...n == null ? void 0 : n.data
    }
  }, e);
}
const Po = jn(Do);
function jo(n) {
  Te().registerProcessor(n);
}
class xr {
  on(e, t) {
    return this.eventEmitter.on(e, t), this.eventEmitter;
  }
  off(e, t) {
    return this.eventEmitter.off(e, t), this.eventEmitter;
  }
  emit(e, ...t) {
    return this.eventEmitter.emit(e, ...t);
  }
  once(e, t) {
    return this.eventEmitter.once(e, t), this.eventEmitter;
  }
}
class Zo extends xr {
  constructor() {
    super(...arguments);
    _(this, "eventEmitter", new Pn());
  }
}
class Mo extends xr {
  constructor() {
    super(...arguments);
    _(this, "eventEmitter", new Pn());
  }
}
function ds({ name: n, execute: e }) {
  return {
    type: "input",
    name: n,
    guardrailFunction: e,
    async run(t) {
      return {
        guardrail: { type: "input", name: n },
        output: await e(t)
      };
    }
  };
}
function dr({ name: n, execute: e }) {
  return {
    type: "output",
    name: n,
    guardrailFunction: e,
    async run(t) {
      return {
        guardrail: { type: "output", name: n },
        agent: t.agent,
        agentOutput: t.agentOutput,
        output: await e(t)
      };
    }
  };
}
function Hs(n) {
  return JSON.stringify({ assistant: n.name });
}
function $o(n) {
  return `transfer_to_${_n(n.name)}`;
}
function Fo(n) {
  return `Handoff to the ${n.name} agent to handle the request. ${n.handoffDescription ?? ""}`;
}
class Ys {
  constructor(e, t) {
    /**
     * The name of the tool that represents the handoff.
     */
    _(this, "toolName");
    /**
     * The description of the tool that represents the handoff.
     */
    _(this, "toolDescription");
    /**
     * The JSON schema for the handoff input. Can be empty if the handoff does not take an input
     */
    _(this, "inputJsonSchema", {
      type: "object",
      properties: {},
      required: [],
      additionalProperties: !1
    });
    /**
     * Whether the input JSON schema is in strict mode. We **strongly** recommend setting this to
     * true, as it increases the likelihood of correct JSON input.
     */
    _(this, "strictJsonSchema", !0);
    /**
     * The function that invokes the handoff. The parameters passed are:
     * 1. The handoff run context
     * 2. The arugments from the LLM, as a JSON string. Empty string if inputJsonSchema is empty.
     *
     * Must return an agent
     */
    _(this, "onInvokeHandoff");
    /**
     * The name of the agent that is being handed off to.
     */
    _(this, "agentName");
    /**
     * A function that filters the inputs that are passed to the next agent. By default, the new agent
     * sees the entire conversation history. In some cases, you may want to filter inputs e.g. to
     * remove older inputs, or remove tools from existing inputs.
     *
     * The function will receive the entire conversation hisstory so far, including the input item
     * that triggered the handoff and a tool call output item representing the handoff tool's output.
     *
     * You are free to modify the input history or new items as you see fit. The next agent that runs
     * will receive `handoffInputData.allItems
     */
    _(this, "inputFilter");
    /**
     * The agent that is being handed off to.
     */
    _(this, "agent");
    this.agentName = e.name, this.onInvokeHandoff = t, this.toolName = $o(e), this.toolDescription = Fo(e), this.agent = e;
  }
  /**
   * Returns a function tool definition that can be used to invoke the handoff.
   */
  getHandoffAsFunctionTool() {
    return {
      type: "function",
      name: this.toolName,
      description: this.toolDescription,
      parameters: this.inputJsonSchema,
      strict: this.strictJsonSchema
    };
  }
}
function Xs(n, e = {}) {
  let t;
  const r = !!e.onHandoff, s = !!e.inputType;
  if (!(r === s))
    throw new Q("You must provide either both `onHandoff` and `inputType` or neither.");
  async function i(c, p) {
    var l;
    if (t) {
      if (!p)
        throw lt({
          message: `Handoff function expected non empty input but got: ${p}`,
          data: {
            details: "input is empty"
          }
        }), new fe("Handoff function expected non empty input");
      try {
        const f = await t(p);
        e.onHandoff && await e.onHandoff(c, f);
      } catch (f) {
        throw lt({
          message: "Invalid JSON provided",
          data: {}
        }), C.dontLogToolData || C.error(`Invalid JSON when parsing: ${p}. Error: ${f}`), new fe("Invalid JSON provided");
      }
    } else
      await ((l = e.onHandoff) == null ? void 0 : l.call(e, c));
    return n;
  }
  const o = new Ys(n, i);
  if (e.inputType) {
    const c = yr(e.inputType, o.toolName);
    o.inputJsonSchema = c.schema, o.strictJsonSchema = !0, t = c.parser;
  }
  return e.toolNameOverride && (o.toolName = e.toolNameOverride), e.toolDescriptionOverride && (o.toolDescription = e.toolDescriptionOverride), e.inputFilter && (o.inputFilter = e.inputFilter), o;
}
function On(n) {
  return n instanceof Ys ? n : Xs(n);
}
function Lo() {
  throw new Error("No default model provider set. Make sure to set a provider using setDefaultModelProvider before calling getDefaultModelProvider or pass an explicit provider.");
}
const ee = g({
  /**
   * Additional optional provider specific data. Used for custom functionality or model provider
   * specific fields.
   */
  providerData: ne(d(), U()).optional()
}), it = ee.extend({
  /**
   * An ID to identify the item. This is optional by default. If a model provider absolutely
   * requires this field, it will be validated on the model level.
   */
  id: d().optional()
}), Uo = ee.extend({
  type: h("refusal"),
  /**
   * The refusal explanation from the model.
   */
  refusal: d()
}), Jo = ee.extend({
  type: h("output_text"),
  /**
   * The text output from the model.
   */
  text: d()
}), br = ee.extend({
  type: h("input_text"),
  /**
   * A text input for example a message from a user
   */
  text: d()
}), Bo = ee.extend({
  type: h("input_image"),
  /**
   * The image input to the model. Could be a URL, base64 or an object with a file ID.
   */
  image: d().or(g({
    id: d()
  })).describe("Could be a URL, base64 or an object with a file ID.")
}), qo = ee.extend({
  type: h("input_file"),
  /**
   * The file input to the model. Could be a URL, base64 or an object with a file ID.
   */
  file: d().or(g({
    id: d()
  })).describe("Contents of the file or an object with a file ID.")
}), Qs = ee.extend({
  type: h("audio"),
  /**
   * The audio input to the model. Could be base64 encoded audio data or an object with a file ID.
   */
  audio: d().or(g({
    id: d()
  })).describe("Base64 encoded audio data or file id"),
  /**
   * The format of the audio.
   */
  format: d().nullable().optional(),
  /**
   * The transcript of the audio.
   */
  transcript: d().nullable().optional()
}), Go = ee.extend({
  type: h("image"),
  /**
   * The image input to the model. Could be base64 encoded image data or an object with a file ID.
   */
  image: d().describe("Base64 encoded image data")
}), Vo = ee.extend({
  type: h("text"),
  /**
   * The text output from the model.
   */
  text: d()
}), zo = ee.extend({
  type: h("image"),
  /**
   * The image data. Could be base64 encoded image data or an object with a file ID.
   */
  data: d().describe("Base64 encoded image data"),
  /**
   * The media type of the image.
   */
  mediaType: d().describe("IANA media type of the image")
}), Wo = ee.extend({
  type: h("computer_screenshot"),
  /**
   * A base64 encoded image data or a URL representing the screenshot.
   */
  data: d().describe("Base64 encoded image data or URL")
}), Ho = pe("type", [
  g({ type: h("screenshot") }),
  g({
    type: h("click"),
    x: A(),
    y: A(),
    button: se(["left", "right", "wheel", "back", "forward"])
  }),
  g({
    type: h("double_click"),
    x: A(),
    y: A()
  }),
  g({
    type: h("scroll"),
    x: A(),
    y: A(),
    scroll_x: A(),
    scroll_y: A()
  }),
  g({
    type: h("type"),
    text: d()
  }),
  g({ type: h("wait") }),
  g({
    type: h("move"),
    x: A(),
    y: A()
  }),
  g({
    type: h("keypress"),
    keys: B(d())
  }),
  g({
    type: h("drag"),
    path: B(g({ x: A(), y: A() }))
  })
]), Yo = pe("type", [
  Jo,
  Uo,
  br,
  Qs,
  Go
]), Sr = it.extend({
  /**
   * Any item without a type is treated as a message
   */
  type: h("message").optional()
}), Zn = Sr.extend({
  /**
   * Representing a message from the assistant (i.e. the model)
   */
  role: h("assistant"),
  /**
   * The status of the message.
   */
  status: se(["in_progress", "completed", "incomplete"]),
  /**
   * The content of the message.
   */
  content: B(Yo)
}), Xo = pe("type", [
  br,
  Bo,
  qo,
  Qs
]), Ks = Sr.extend({
  // type: z.literal('message'),
  /**
   * Representing a message from the user
   */
  role: h("user"),
  /**
   * The content of the message.
   */
  content: B(Xo).or(d())
}), ea = Sr.extend({
  // type: z.literal('message'),
  /**
   * Representing a system message to the user
   */
  role: h("system"),
  /**
   * The content of the message.
   */
  content: d()
});
pe("role", [
  ea,
  Zn,
  Ks
]);
const $t = it.extend({
  type: h("hosted_tool_call"),
  /**
   * The name of the hosted tool. For example `web_search_call` or `file_search_call`
   */
  name: d().describe("The name of the hosted tool"),
  /**
   * The arguments of the hosted tool call.
   */
  arguments: d().describe("The arguments of the hosted tool call").optional(),
  /**
   * The status of the tool call.
   */
  status: d().optional(),
  /**
   * The primary output of the tool call. Additional output might be in the `providerData` field.
   */
  output: d().optional()
}), Ft = it.extend({
  type: h("function_call"),
  /**
   * The ID of the tool call. Required to match up the respective tool call result.
   */
  callId: d().describe("The ID of the tool call"),
  /**
   * The name of the function.
   */
  name: d().describe("The name of the function"),
  /**
   * The status of the function call.
   */
  status: se(["in_progress", "completed", "incomplete"]).optional(),
  /**
   * The arguments of the function call.
   */
  arguments: d()
}), lr = it.extend({
  type: h("function_call_result"),
  /**
   * The name of the tool that was called
   */
  name: d().describe("The name of the tool"),
  /**
   * The ID of the tool call. Required to match up the respective tool call result.
   */
  callId: d().describe("The ID of the tool call"),
  /**
   * The status of the tool call.
   */
  status: se(["in_progress", "completed", "incomplete"]),
  /**
   * The output of the tool call.
   */
  output: pe("type", [Vo, zo])
}), Tr = it.extend({
  type: h("computer_call"),
  /**
   * The ID of the computer call. Required to match up the respective computer call result.
   */
  callId: d().describe("The ID of the computer call"),
  /**
   * The status of the computer call.
   */
  status: se(["in_progress", "completed", "incomplete"]),
  /**
   * The action to be performed by the computer.
   */
  action: Ho
}), Qo = it.extend({
  type: h("computer_call_result"),
  /**
   * The ID of the computer call. Required to match up the respective computer call result.
   */
  callId: d().describe("The ID of the computer call"),
  /**
   * The output of the computer call.
   */
  output: Wo
}), Ko = pe("type", [
  Tr,
  Ft,
  $t
]), kr = ee.extend({
  id: d().optional(),
  type: h("reasoning"),
  /**
   * The user facing representation of the reasoning. Additional information might be in the `providerData` field.
   */
  content: B(br)
}), ta = it.extend({
  type: h("unknown")
}), Ir = pe("type", [
  Zn,
  $t,
  Ft,
  Tr,
  kr,
  ta
]), eu = Bs([
  Ks,
  Zn,
  ea,
  $t,
  Ft,
  Tr,
  lr,
  Qo,
  kr,
  ta
]), tu = g({
  requests: A().optional(),
  inputTokens: A(),
  outputTokens: A(),
  totalTokens: A(),
  inputTokensDetails: ne(d(), A()).optional(),
  outputTokensDetails: ne(d(), A()).optional()
}), na = ee.extend({
  type: h("output_text_delta"),
  /**
   * The delta text that was streamed by the modelto the user.
   */
  delta: d()
}), nu = ee.extend({
  type: h("response_started")
}), ra = ee.extend({
  type: h("response_done"),
  /**
   * The response from the model.
   */
  response: ee.extend({
    /**
     * The ID of the response.
     */
    id: d(),
    /**
     * The usage data for the response.
     */
    usage: tu,
    /**
     * The output from the model.
     */
    output: B(Ir)
  })
}), ru = ee.extend({
  type: h("model"),
  event: U().describe("The event from the model")
});
pe("type", [
  na,
  ra,
  nu,
  ru
]);
class Mn {
  constructor(e) {
    /**
     * The number of requests made to the LLM API.
     */
    _(this, "requests");
    /**
     * The number of input tokens used across all requests.
     */
    _(this, "inputTokens");
    /**
     * The number of output tokens used across all requests.
     */
    _(this, "outputTokens");
    /**
     * The total number of tokens sent and received, across all requests.
     */
    _(this, "totalTokens");
    /**
     * Details about the input tokens used across all requests.
     */
    _(this, "inputTokensDetails", []);
    /**
     * Details about the output tokens used across all requests.
     */
    _(this, "outputTokensDetails", []);
    typeof e > "u" ? (this.requests = 0, this.inputTokens = 0, this.outputTokens = 0, this.totalTokens = 0, this.inputTokensDetails = [], this.outputTokensDetails = []) : (this.requests = (e == null ? void 0 : e.requests) ?? 1, this.inputTokens = (e == null ? void 0 : e.inputTokens) ?? 0, this.outputTokens = (e == null ? void 0 : e.outputTokens) ?? 0, this.totalTokens = (e == null ? void 0 : e.totalTokens) ?? 0, this.inputTokensDetails = e != null && e.inputTokensDetails ? [e.inputTokensDetails] : [], this.outputTokensDetails = e != null && e.outputTokensDetails ? [e.outputTokensDetails] : []);
  }
  add(e) {
    this.requests += e.requests, this.inputTokens += e.inputTokens, this.outputTokens += e.outputTokens, this.totalTokens += e.totalTokens, this.inputTokensDetails.push(...e.inputTokensDetails), this.outputTokensDetails.push(...e.outputTokensDetails);
  }
}
var de;
class dt {
  constructor(e = {}) {
    /**
     * The context object passed by you to the `Runner.run()`
     */
    _(this, "context");
    /**
     * The usage of the agent run so far. For streamed responses, the usage will be stale until the
     * last chunk of the stream is processed.
     */
    _(this, "usage");
    /**
     * A map of tool names to whether they have been approved.
     */
    T(this, de);
    this.context = e, this.usage = new Mn(), y(this, de, /* @__PURE__ */ new Map());
  }
  /**
   * Rebuild the approvals map from a serialized state.
   * @internal
   *
   * @param approvals - The approvals map to rebuild.
   */
  _rebuildApprovals(e) {
    y(this, de, new Map(Object.entries(e)));
  }
  /**
   * Check if a tool call has been approved.
   *
   * @param toolName - The name of the tool.
   * @param callId - The call ID of the tool call.
   * @returns `true` if the tool call has been approved, `false` if blocked and `undefined` if not yet approved or rejected.
   */
  isToolApproved({ toolName: e, callId: t }) {
    const r = u(this, de).get(e);
    if ((r == null ? void 0 : r.approved) === !0 && r.rejected === !0)
      return C.warn("Tool is permanently approved and rejected at the same time. Approval takes precedence"), !0;
    if ((r == null ? void 0 : r.approved) === !0)
      return !0;
    if ((r == null ? void 0 : r.rejected) === !0)
      return !1;
    const s = Array.isArray(r == null ? void 0 : r.approved) ? r.approved.includes(t) : !1, a = Array.isArray(r == null ? void 0 : r.rejected) ? r.rejected.includes(t) : !1;
    if (s && a)
      return C.warn(`Tool call ${t} is both approved and rejected at the same time. Approval takes precedence`), !0;
    if (s)
      return !0;
    if (a)
      return !1;
  }
  /**
   * Approve a tool call.
   *
   * @param toolName - The name of the tool.
   * @param callId - The call ID of the tool call.
   */
  approveTool(e, { alwaysApprove: t = !1 } = {}) {
    const r = e.rawItem.name;
    if (t) {
      u(this, de).set(r, {
        approved: !0,
        rejected: []
      });
      return;
    }
    const s = u(this, de).get(r) ?? {
      approved: [],
      rejected: []
    };
    if (Array.isArray(s.approved)) {
      const a = "callId" in e.rawItem ? e.rawItem.callId : e.rawItem.id;
      s.approved.push(a);
    }
    u(this, de).set(r, s);
  }
  /**
   * Reject a tool call.
   *
   * @param approvalItem - The tool approval item to reject.
   */
  rejectTool(e, { alwaysReject: t = !1 } = {}) {
    const r = e.rawItem.name;
    if (t) {
      u(this, de).set(r, {
        approved: !1,
        rejected: !0
      });
      return;
    }
    const s = u(this, de).get(r) ?? {
      approved: [],
      rejected: []
    };
    if (Array.isArray(s.rejected)) {
      const a = "callId" in e.rawItem ? e.rawItem.callId : e.rawItem.id;
      s.rejected.push(a);
    }
    u(this, de).set(r, s);
  }
  toJSON() {
    return {
      context: this.context,
      usage: this.usage,
      approvals: Object.fromEntries(u(this, de).entries())
    };
  }
}
de = new WeakMap();
class sa {
  constructor(e) {
    _(this, "state");
    this.state = e;
  }
  /**
   * The history of the agent run. This includes the input items and the new items generated during
   * the agent run.
   *
   * This can be used as inputs for the next agent run.
   */
  get history() {
    return Nn(this.input, this.newItems);
  }
  /**
   * The new items generated during the agent run. These include things like new messages, tool
   * calls and their outputs, etc.
   *
   * It does not include information about the agents and instead represents the model data.
   *
   * For the output including the agents, use the `newItems` property.
   */
  get output() {
    return Nn([], this.newItems);
  }
  /**
   * A copy of the original input items.
   */
  get input() {
    return this.state._originalInput;
  }
  /**
   * The run items generated during the agent run. This associates the model data with the agents.
   *
   * For the model data that can be used as inputs for the next agent run, use the `output` property.
   */
  get newItems() {
    return this.state._generatedItems;
  }
  /**
   * The raw LLM responses generated by the model during the agent run.
   */
  get rawResponses() {
    return this.state._modelResponses;
  }
  /**
   * The last response ID generated by the model during the agent run.
   */
  get lastResponseId() {
    const e = this.rawResponses;
    return e && e.length > 0 ? e[e.length - 1].responseId : void 0;
  }
  /**
   * The last agent that was run
   */
  get lastAgent() {
    return this.state._currentAgent;
  }
  /**
   * Guardrail results for the input messages.
   */
  get inputGuardrailResults() {
    return this.state._inputGuardrailResults;
  }
  /**
   * Guardrail results for the final output of the agent.
   */
  get outputGuardrailResults() {
    return this.state._outputGuardrailResults;
  }
  /**
   * Any interruptions that occurred during the agent run for example for tool approvals.
   */
  get interruptions() {
    var e;
    return ((e = this.state._currentStep) == null ? void 0 : e.type) === "next_step_interruption" ? this.state._currentStep.data.interruptions : [];
  }
  /**
   * The final output of the agent. If the output type was set to anything other than `text`,
   * this will be parsed either as JSON or using the Zod schema you provided.
   */
  get finalOutput() {
    var e;
    if (((e = this.state._currentStep) == null ? void 0 : e.type) === "next_step_final_output")
      return this.state._currentAgent.processFinalOutput(this.state._currentStep.output);
    C.warn("Accessed finalOutput before agent run is completed.");
  }
}
class ls extends sa {
  constructor(e) {
    super(e);
  }
}
var Wt, _t, _e, Le, Ht, Yt, Xt, Qt;
class su extends sa {
  constructor(t = {}) {
    super(t.state);
    /**
     * The current turn number
     */
    _(this, "currentTurn", 0);
    /**
     * The maximum number of turns that can be run
     */
    _(this, "maxTurns");
    T(this, Wt, null);
    T(this, _t);
    T(this, _e);
    T(this, Le);
    T(this, Ht);
    T(this, Yt);
    T(this, Xt);
    T(this, Qt, !1);
    y(this, _t, t.signal), u(this, _t) && u(this, _t).addEventListener("abort", async () => {
      await u(this, Le).cancel();
    }), y(this, Le, new ho({
      start: (r) => {
        y(this, _e, r);
      },
      cancel: () => {
        y(this, Qt, !0);
      }
    })), y(this, Ht, new Promise((r, s) => {
      y(this, Yt, r), y(this, Xt, s);
    }));
  }
  /**
   * The current agent that is running
   */
  get currentAgent() {
    return this.lastAgent;
  }
  /**
   * @internal
   * Adds an item to the stream of output items
   */
  _addItem(t) {
    var r;
    this.cancelled || (r = u(this, _e)) == null || r.enqueue(t);
  }
  /**
   * @internal
   * Indicates that the stream has been completed
   */
  _done() {
    var t;
    !this.cancelled && u(this, _e) && (u(this, _e).close(), y(this, _e, void 0), (t = u(this, Yt)) == null || t.call(this));
  }
  /**
   * @internal
   * Handles an error in the stream loop.
   */
  _raiseError(t) {
    var r;
    !this.cancelled && u(this, _e) && (u(this, _e).error(t), y(this, _e, void 0)), y(this, Wt, t), (r = u(this, Xt)) == null || r.call(this, t);
  }
  /**
   * Returns true if the stream has been cancelled.
   */
  get cancelled() {
    return u(this, Qt);
  }
  /**
   * Returns the underlying readable stream.
   * @returns A readable stream of the agent run.
   */
  toStream() {
    return u(this, Le);
  }
  /**
   * Await this promise to ensure that the stream has been completed if you are not consuming the
   * stream directly.
   */
  get completed() {
    return u(this, Ht);
  }
  /**
   * Error thrown during the run, if any.
   */
  get error() {
    return u(this, Wt);
  }
  toTextStream(t = {}) {
    const r = u(this, Le).pipeThrough(new mo({
      transform(s, a) {
        if (s.type === "raw_model_stream_event" && s.data.type === "output_text_delta") {
          const i = na.parse(s.data);
          a.enqueue(i.delta);
        }
      }
    }));
    return t.compatibleWithNodeStreams ? fo.fromWeb(r) : r;
  }
  [Symbol.asyncIterator]() {
    return u(this, Le)[Symbol.asyncIterator]();
  }
}
Wt = new WeakMap(), _t = new WeakMap(), _e = new WeakMap(), Le = new WeakMap(), Ht = new WeakMap(), Yt = new WeakMap(), Xt = new WeakMap(), Qt = new WeakMap();
function ps(n) {
  return n.type === "function" ? {
    type: "function",
    name: n.name,
    description: n.description,
    parameters: n.parameters,
    strict: n.strict
  } : n.type === "computer" ? {
    type: "computer",
    name: n.name,
    environment: n.computer.environment,
    dimensions: n.computer.dimensions
  } : {
    type: "hosted_tool",
    name: n.name,
    providerData: n.providerData
  };
}
function fs(n) {
  return {
    toolName: n.toolName,
    toolDescription: n.toolDescription,
    inputJsonSchema: n.inputJsonSchema,
    strictJsonSchema: n.strictJsonSchema
  };
}
class ot {
  constructor() {
    _(this, "type", "base_item");
    _(this, "rawItem");
  }
  toJSON() {
    return {
      type: this.type,
      rawItem: this.rawItem
    };
  }
}
class $n extends ot {
  constructor(t, r) {
    super();
    _(this, "rawItem");
    _(this, "agent");
    _(this, "type", "message_output_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
  get content() {
    let t = "";
    for (const r of this.rawItem.content)
      r.type === "output_text" && (t += r.text);
    return t;
  }
}
class Ke extends ot {
  constructor(t, r) {
    super();
    _(this, "rawItem");
    _(this, "agent");
    _(this, "type", "tool_call_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class kt extends ot {
  constructor(t, r, s) {
    super();
    _(this, "rawItem");
    _(this, "agent");
    _(this, "output");
    _(this, "type", "tool_call_output_item");
    this.rawItem = t, this.agent = r, this.output = s;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON(),
      output: tt(this.output)
    };
  }
}
class Ar extends ot {
  constructor(t, r) {
    super();
    _(this, "rawItem");
    _(this, "agent");
    _(this, "type", "reasoning_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class Cr extends ot {
  constructor(t, r) {
    super();
    _(this, "rawItem");
    _(this, "agent");
    _(this, "type", "handoff_call_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
class Or extends ot {
  constructor(t, r, s) {
    super();
    _(this, "rawItem");
    _(this, "sourceAgent");
    _(this, "targetAgent");
    _(this, "type", "handoff_output_item");
    this.rawItem = t, this.sourceAgent = r, this.targetAgent = s;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      sourceAgent: this.sourceAgent.toJSON(),
      targetAgent: this.targetAgent.toJSON()
    };
  }
}
class Se extends ot {
  constructor(t, r) {
    super();
    _(this, "rawItem");
    _(this, "agent");
    _(this, "type", "tool_approval_item");
    this.rawItem = t, this.agent = r;
  }
  toJSON() {
    return {
      ...super.toJSON(),
      agent: this.agent.toJSON()
    };
  }
}
function aa(n) {
  if (n.type !== "message" || n.role !== "assistant")
    return;
  const e = n.content[n.content.length - 1];
  if (e.type === "output_text")
    return e.text;
}
function au(n) {
  return n.output.length === 0 ? "" : aa(n.output[n.output.length - 1]) || "";
}
class iu {
  /**
   * @param data The raw responses stream events from the LLM.
   */
  constructor(e) {
    _(this, "data");
    /**
     * The type of the event.
     */
    _(this, "type", "raw_model_stream_event");
    this.data = e;
  }
}
class ou {
  /**
   * @param name The name of the event.
   * @param item The item that was created.
   */
  constructor(e, t) {
    _(this, "name");
    _(this, "item");
    _(this, "type", "run_item_stream_event");
    this.name = e, this.item = t;
  }
}
class uu {
  /**
   * @param agent The new agent
   */
  constructor(e) {
    _(this, "agent");
    _(this, "type", "agent_updated_stream_event");
    this.agent = e;
  }
}
function hs(n, e, t, r) {
  var w;
  const s = [], a = [], i = [], o = [], c = [], p = [], l = new Map(r.map((x) => [x.toolName, x])), f = new Map(t.filter((x) => x.type === "function").map((x) => [x.name, x])), m = t.find((x) => x.type === "computer"), S = new Map(t.filter((x) => {
    var O;
    return x.type === "hosted_tool" && ((O = x.providerData) == null ? void 0 : O.type) === "mcp";
  }).map((x) => x).map((x) => [x.providerData.server_label, x]));
  for (const x of n.output) {
    if (x.type === "message")
      x.role === "assistant" && s.push(new $n(x, e));
    else if (x.type === "hosted_tool_call") {
      s.push(new Ke(x, e));
      const R = x.name;
      if (p.push(R), ((w = x.providerData) == null ? void 0 : w.type) === "mcp_approval_request" || x.name === "mcp_approval_request") {
        const V = x.providerData, Y = V.server_label, oe = S.get(Y);
        if (typeof oe > "u") {
          const At = `MCP server (${Y}) not found in Agent (${e.name})`;
          throw lt({
            message: At,
            data: { mcp_server_label: Y }
          }), new fe(At);
        }
        const ue = new Se({
          type: "hosted_tool_call",
          // We must use this name to align with the name sent from the servers
          name: V.name,
          id: V.id,
          status: "in_progress",
          providerData: V
        }, e);
        c.push({
          requestItem: ue,
          mcpTool: oe
        }), oe.providerData.on_approval || s.push(ue);
      }
    } else if (x.type === "reasoning")
      s.push(new Ar(x, e));
    else if (x.type === "computer_call") {
      if (s.push(new Ke(x, e)), p.push("computer_use"), !m)
        throw lt({
          message: "Model produced computer action without a computer tool.",
          data: {
            agent_name: e.name
          }
        }), new fe("Model produced computer action without a computer tool.");
      o.push({
        toolCall: x,
        computer: m
      });
    }
    if (x.type !== "function_call")
      continue;
    p.push(x.name);
    const O = l.get(x.name);
    if (O)
      s.push(new Cr(x, e)), a.push({
        toolCall: x,
        handoff: O
      });
    else {
      const R = f.get(x.name);
      if (!R)
        throw lt({
          message: `Tool ${x.name} not found in agent ${e.name}.`,
          data: {
            tool_name: x.name,
            agent_name: e.name
          }
        }), new fe(`Tool ${x.name} not found in agent ${e.name}.`);
      s.push(new Ke(x, e)), i.push({
        toolCall: x,
        tool: R
      });
    }
  }
  return {
    newItems: s,
    handoffs: a,
    functions: i,
    computerActions: o,
    mcpApprovalRequests: c,
    toolsUsed: p,
    hasToolsOrApprovalsToRun() {
      return a.length > 0 || i.length > 0 || c.length > 0 || o.length > 0;
    }
  };
}
const cu = pe("type", [
  g({
    type: h("next_step_handoff"),
    newAgent: U()
  }),
  g({
    type: h("next_step_final_output"),
    output: d()
  }),
  g({
    type: h("next_step_run_again")
  }),
  g({
    type: h("next_step_interruption"),
    data: ne(d(), U())
  })
]);
class ye {
  constructor(e, t, r, s, a) {
    _(this, "originalInput");
    _(this, "modelResponse");
    _(this, "preStepItems");
    _(this, "newStepItems");
    _(this, "nextStep");
    this.originalInput = e, this.modelResponse = t, this.preStepItems = r, this.newStepItems = s, this.nextStep = a;
  }
  /**
   * The items generated during the agent run (i.e. everything generated after originalInput)
   */
  get generatedItems() {
    return this.preStepItems.concat(this.newStepItems);
  }
}
function ms(n, e, t) {
  return n.resetToolChoice && e.hasUsedTools(n) ? { ...t, toolChoice: void 0 } : t;
}
async function gs(n, e, t, r, s, a, i) {
  const o = t.filter((w) => w instanceof Se && "callId" in w.rawItem && w.rawItem.type === "function_call").map((w) => w.rawItem.callId), c = s.functions.filter((w) => o.includes(w.toolCall.callId)), p = await ia(n, c, a, i), l = p.map((w) => w.runItem), f = s.mcpApprovalRequests.filter((w) => {
    var x;
    return w.requestItem.type === "tool_approval_item" && w.requestItem.rawItem.type === "hosted_tool_call" && ((x = w.requestItem.rawItem.providerData) == null ? void 0 : x.type) === "mcp_approval_request";
  });
  for (const w of f) {
    const x = w.requestItem.rawItem.id, O = i._context.isToolApproved({
      // Since this item name must be the same with the one sent from Responses API server
      toolName: w.requestItem.rawItem.name,
      callId: x
    });
    if (typeof O < "u") {
      const R = {
        approve: O,
        approval_request_id: x,
        reason: void 0
      };
      l.push(new Ke({
        type: "hosted_tool_call",
        name: "mcp_approval_response",
        providerData: R
      }, n));
    }
  }
  const m = await oa(n, p, i), S = t.filter((w) => !(w instanceof Se));
  return m.isFinalOutput ? (a.emit("agent_end", i._context, n, m.finalOutput), n.emit("agent_end", i._context, m.finalOutput), new ye(e, r, S, l, {
    type: "next_step_final_output",
    output: m.finalOutput
  })) : m.isInterrupted ? new ye(e, r, S, l, {
    type: "next_step_interruption",
    data: {
      interruptions: m.interruptions
    }
  }) : new ye(e, r, S, l, { type: "next_step_run_again" });
}
async function _s(n, e, t, r, s, a, i) {
  const o = t;
  let c = s.newItems;
  const [p, l] = await Promise.all([
    ia(n, s.functions, a, i),
    lu(n, s.computerActions, a, i._context)
  ]);
  if (c = c.concat(p.map((w) => w.runItem)), c = c.concat(l), s.mcpApprovalRequests.length > 0)
    for (const w of s.mcpApprovalRequests) {
      const x = w.mcpTool.providerData, O = w.requestItem.rawItem.providerData;
      if (x.on_approval) {
        const R = await x.on_approval(i._context, w.requestItem), V = {
          approve: R.approve,
          approval_request_id: O.id,
          reason: R.reason
        };
        c.push(new Ke({
          type: "hosted_tool_call",
          name: "mcp_approval_response",
          providerData: V
        }, n));
      } else {
        c.push(w.requestItem);
        const R = {
          type: "hosted_mcp_tool_approval",
          tool: w.mcpTool,
          runItem: new Se({
            type: "hosted_tool_call",
            name: O.name,
            id: O.id,
            arguments: O.arguments,
            status: "in_progress",
            providerData: O
          }, n)
        };
        p.push(R);
      }
    }
  if (s.handoffs.length > 0)
    return await pu(n, e, o, c, r, s.handoffs, a, i._context);
  const f = await oa(n, p, i);
  if (f.isFinalOutput)
    return a.emit("agent_end", i._context, n, f.finalOutput), n.emit("agent_end", i._context, f.finalOutput), new ye(e, r, o, c, {
      type: "next_step_final_output",
      output: f.finalOutput
    });
  if (f.isInterrupted)
    return new ye(e, r, o, c, {
      type: "next_step_interruption",
      data: {
        interruptions: f.interruptions
      }
    });
  const m = c.filter((w) => w instanceof $n), S = m.length > 0 ? aa(m[m.length - 1].rawItem) : void 0;
  if (!S)
    return new ye(e, r, o, c, { type: "next_step_run_again" });
  if (n.outputType === "text" && !s.hasToolsOrApprovalsToRun())
    return new ye(e, r, o, c, {
      type: "next_step_final_output",
      output: S
    });
  if (n.outputType !== "text" && S) {
    const { parser: w } = yr(n.outputType, "final_output"), [x] = await _r(() => w(S));
    if (x)
      throw lt({
        message: "Invalid output type",
        data: {
          error: String(x)
        }
      }), new fe("Invalid output type");
    return new ye(e, r, o, c, { type: "next_step_final_output", output: S });
  }
  return new ye(e, r, o, c, { type: "next_step_run_again" });
}
function En(n, e) {
  return {
    type: "function_call_result",
    name: n.name,
    callId: n.callId,
    status: "completed",
    output: {
      type: "text",
      text: tt(e)
    }
  };
}
async function ia(n, e, t, r) {
  async function s(a) {
    let i = a.toolCall.arguments;
    if (a.tool.parameters && (et(a.tool.parameters) ? i = a.tool.parameters.parse(i) : i = JSON.parse(i)), await a.tool.needsApproval(r._context, i, a.toolCall.callId)) {
      const c = r._context.isToolApproved({
        toolName: a.tool.name,
        callId: a.toolCall.callId
      });
      if (c === !1)
        return us(async (p) => {
          const l = "Tool execution was not approved.";
          return p.setError({
            message: l,
            data: {
              tool_name: a.tool.name,
              error: `Tool execution for ${a.toolCall.callId} was manually rejected by user.`
            }
          }), p.spanData.output = l, {
            type: "function_output",
            tool: a.tool,
            output: l,
            runItem: new kt(En(a.toolCall, l), n, l)
          };
        }, {
          data: {
            name: a.tool.name
          }
        });
      if (c !== !0)
        return {
          type: "function_approval",
          tool: a.tool,
          runItem: new Se(a.toolCall, n)
        };
    }
    return us(async (c) => {
      t.config.traceIncludeSensitiveData && (c.spanData.input = a.toolCall.arguments);
      try {
        t.emit("agent_tool_start", r._context, n, a.tool), n.emit("agent_tool_start", r._context, a.tool);
        const p = await a.tool.invoke(r._context, a.toolCall.arguments), l = tt(p);
        return t.emit("agent_tool_end", r._context, n, a.tool, l), n.emit("agent_tool_end", r._context, a.tool, l), t.config.traceIncludeSensitiveData && (c.spanData.output = l), {
          type: "function_output",
          tool: a.tool,
          output: p,
          runItem: new kt(En(a.toolCall, p), n, p)
        };
      } catch (p) {
        throw c.setError({
          message: "Error running tool",
          data: {
            tool_name: a.tool.name,
            error: String(p)
          }
        }), p;
      }
    }, {
      data: {
        name: a.tool.name
      }
    });
  }
  try {
    return await Promise.all(e.map(s));
  } catch (a) {
    throw new bi(`Failed to run function tools: ${a}`, a, r);
  }
}
async function du(n, e) {
  const t = e.action;
  let r;
  switch (t.type) {
    case "click":
      await n.click(t.x, t.y, t.button);
      break;
    case "double_click":
      await n.doubleClick(t.x, t.y);
      break;
    case "drag":
      await n.drag(t.path.map((s) => [s.x, s.y]));
      break;
    case "keypress":
      await n.keypress(t.keys);
      break;
    case "move":
      await n.move(t.x, t.y);
      break;
    case "screenshot":
      r = await n.screenshot();
      break;
    case "scroll":
      await n.scroll(t.x, t.y, t.scroll_x, t.scroll_y);
      break;
    case "type":
      await n.type(t.text);
      break;
    case "wait":
      await n.wait();
      break;
  }
  if (typeof r < "u" || typeof n.screenshot == "function" && (r = await n.screenshot(), typeof r < "u"))
    return r;
  throw new Error("Computer does not implement screenshot()");
}
async function lu(n, e, t, r, s = void 0) {
  const a = s ?? C, i = [];
  for (const o of e) {
    const c = o.computer.computer, p = o.toolCall;
    t.emit("agent_tool_start", r, n, o.computer), typeof n.emit == "function" && n.emit("agent_tool_start", r, o.computer);
    let l;
    try {
      l = await du(c, p);
    } catch (S) {
      a.error("Failed to execute computer action:", S), l = "";
    }
    t.emit("agent_tool_end", r, n, o.computer, l), typeof n.emit == "function" && n.emit("agent_tool_end", r, o.computer, l);
    const f = l ? `data:image/png;base64,${l}` : "", m = {
      type: "computer_call_result",
      callId: p.callId,
      output: { type: "computer_screenshot", data: f }
    };
    i.push(new kt(m, n, f));
  }
  return i;
}
async function pu(n, e, t, r, s, a, i, o) {
  if (r = [...r], a.length === 0)
    return C.warn("Incorrectly called executeHandoffCalls with no handoffs. This should not happen. Moving on."), new ye(e, s, t, r, { type: "next_step_run_again" });
  if (a.length > 1) {
    const p = "Multiple handoffs detected, ignorning this one.";
    for (let l = 1; l < a.length; l++)
      r.push(new kt(En(a[l].toolCall, p), n, p));
  }
  const c = a[0];
  return No(async (p) => {
    const l = c.handoff, f = await l.onInvokeHandoff(o, c.toolCall.arguments);
    if (p.spanData.to_agent = f.name, a.length > 1) {
      const S = a.map((w) => w.handoff.agentName);
      p.setError({
        message: "Multiple handoffs requested",
        data: {
          requested_agents: S
        }
      });
    }
    r.push(new Or(En(c.toolCall, Hs(f)), n, f)), i.emit("agent_handoff", o, n, f), n.emit("agent_handoff", o, f);
    const m = l.inputFilter ?? i.config.handoffInputFilter;
    if (m) {
      C.debug("Filtering inputs for handoff"), typeof m != "function" && p.setError({
        message: "Invalid input filter",
        data: {
          details: "not callable"
        }
      });
      const S = {
        inputHistory: Array.isArray(e) ? [...e] : e,
        preHandoffItems: [...t],
        newItems: [...r]
      }, w = m(S);
      e = w.inputHistory, t = w.preHandoffItems, r = w.newItems;
    }
    return new ye(e, s, t, r, { type: "next_step_handoff", newAgent: f });
  }, {
    data: {
      from_agent: n.name
    }
  });
}
const dn = {
  isFinalOutput: !1,
  isInterrupted: void 0
};
async function oa(n, e, t) {
  if (e.length === 0)
    return dn;
  const r = e.filter((i) => i.runItem instanceof Se).map((i) => i.runItem);
  if (r.length > 0)
    return {
      isFinalOutput: !1,
      isInterrupted: !0,
      interruptions: r
    };
  if (n.toolUseBehavior === "run_llm_again")
    return dn;
  const s = e[0];
  if (n.toolUseBehavior === "stop_on_first_tool")
    return (s == null ? void 0 : s.type) === "function_output" ? {
      isFinalOutput: !0,
      isInterrupted: void 0,
      finalOutput: tt(s.output)
    } : dn;
  const a = n.toolUseBehavior;
  if (typeof a == "object") {
    const i = e.find((o) => a.stopAtToolNames.includes(o.tool.name));
    return (i == null ? void 0 : i.type) === "function_output" ? {
      isFinalOutput: !0,
      isInterrupted: void 0,
      finalOutput: tt(i.output)
    } : dn;
  }
  if (typeof a == "function")
    return a(t._context, e);
  throw new Q(`Invalid toolUseBehavior: ${a}`, t);
}
function ys(n, e) {
  for (const t of e.newStepItems) {
    let r;
    if (t instanceof $n)
      r = "message_output_created";
    else if (t instanceof Cr)
      r = "handoff_requested";
    else if (t instanceof Or)
      r = "handoff_occurred";
    else if (t instanceof Ke)
      r = "tool_called";
    else if (t instanceof kt)
      r = "tool_output";
    else if (t instanceof Ar)
      r = "reasoning_item_created";
    else if (t instanceof Se)
      r = "tool_approval_requested";
    else {
      C.warn("Unknown item type: ", t);
      continue;
    }
    n._addItem(new ou(r, t));
  }
}
var yt;
class vs {
  constructor() {
    T(this, yt, /* @__PURE__ */ new Map());
  }
  addToolUse(e, t) {
    u(this, yt).set(e, t);
  }
  hasUsedTools(e) {
    return u(this, yt).has(e);
  }
  toJSON() {
    return Object.fromEntries(Array.from(u(this, yt).entries()).map(([e, t]) => [e.name, t]));
  }
}
yt = new WeakMap();
const pn = "1.0", fu = h(pn), ve = g({
  name: d()
}), hu = g({
  object: h("trace.span"),
  id: d(),
  trace_id: d(),
  parent_id: d().nullable(),
  started_at: d().nullable(),
  ended_at: d().nullable(),
  error: g({
    message: d(),
    data: ne(d(), U()).optional()
  }).nullable(),
  span_data: ne(d(), U())
}), ua = hu.extend({
  previous_span: ao(() => ua).optional()
}), ca = g({
  requests: A(),
  inputTokens: A(),
  outputTokens: A(),
  totalTokens: A()
}), ws = g({
  usage: ca,
  output: B(Ir),
  responseId: d().optional()
}), da = pe("type", [
  g({
    type: h("message_output_item"),
    rawItem: Zn,
    agent: ve
  }),
  g({
    type: h("tool_call_item"),
    rawItem: Ko.or($t),
    agent: ve
  }),
  g({
    type: h("tool_call_output_item"),
    rawItem: lr,
    agent: ve,
    output: d()
  }),
  g({
    type: h("reasoning_item"),
    rawItem: kr,
    agent: ve
  }),
  g({
    type: h("handoff_call_item"),
    rawItem: Ft,
    agent: ve
  }),
  g({
    type: h("handoff_output_item"),
    rawItem: lr,
    sourceAgent: ve,
    targetAgent: ve
  }),
  g({
    type: h("tool_approval_item"),
    rawItem: Ft.or($t),
    agent: ve
  })
]), mu = g({
  object: h("trace"),
  id: d(),
  workflow_name: d(),
  group_id: d().nullable(),
  metadata: ne(d(), U())
}), gu = g({
  newItems: B(da),
  toolsUsed: B(d()),
  handoffs: B(g({
    toolCall: U(),
    handoff: U()
  })),
  functions: B(g({
    toolCall: U(),
    tool: U()
  })),
  computerActions: B(g({
    toolCall: U(),
    computer: U()
  })),
  mcpApprovalRequests: B(g({
    requestItem: g({
      // protocol.HostedToolCallItem
      rawItem: g({
        type: h("hosted_tool_call"),
        name: d(),
        arguments: d().optional(),
        status: d().optional(),
        output: d().optional()
      })
    }),
    // HostedMCPTool
    mcpTool: g({
      type: h("hosted_tool"),
      name: h("hosted_mcp"),
      providerData: ne(d(), U())
    })
  })).optional()
}), la = g({
  tripwireTriggered: Et(),
  outputInfo: U()
}), _u = g({
  guardrail: g({
    type: h("input"),
    name: d()
  }),
  output: la
}), yu = g({
  guardrail: g({
    type: h("output"),
    name: d()
  }),
  agentOutput: U(),
  agent: ve,
  output: la
}), xs = g({
  $schemaVersion: fu,
  currentTurn: A(),
  currentAgent: ve,
  originalInput: d().or(B(eu)),
  modelResponses: B(ws),
  context: g({
    usage: ca,
    approvals: ne(d(), g({
      approved: B(d()).or(Et()),
      rejected: B(d()).or(Et())
    })),
    context: ne(d(), U())
  }),
  toolUseTracker: ne(d(), B(d())),
  maxTurns: A(),
  currentAgentSpan: ua.nullable().optional(),
  noActiveAgentRun: Et(),
  inputGuardrailResults: B(_u),
  outputGuardrailResults: B(yu),
  currentStep: cu.optional(),
  lastModelResponse: ws.optional(),
  generatedItems: B(da),
  lastProcessedResponse: gu.optional(),
  trace: mu.nullable()
});
class qe {
  constructor(e, t, r, s) {
    /**
     * Current turn number in the conversation.
     */
    _(this, "_currentTurn", 0);
    /**
     * The agent currently handling the conversation.
     */
    _(this, "_currentAgent");
    /**
     * Original user input prior to any processing.
     */
    _(this, "_originalInput");
    /**
     * Responses from the model so far.
     */
    _(this, "_modelResponses");
    /**
     * Active tracing span for the current agent if tracing is enabled.
     */
    _(this, "_currentAgentSpan");
    /**
     * Run context tracking approvals, usage, and other metadata.
     */
    _(this, "_context");
    /**
     * Tracks what tools each agent has used.
     */
    _(this, "_toolUseTracker");
    /**
     * Items generated by the agent during the run.
     */
    _(this, "_generatedItems");
    /**
     * Maximum allowed turns before forcing termination.
     */
    _(this, "_maxTurns");
    /**
     * Whether the run has an active agent step in progress.
     */
    _(this, "_noActiveAgentRun", !0);
    /**
     * Last model response for the previous turn.
     */
    _(this, "_lastTurnResponse");
    /**
     * Results from input guardrails applied to the run.
     */
    _(this, "_inputGuardrailResults");
    /**
     * Results from output guardrails applied to the run.
     */
    _(this, "_outputGuardrailResults");
    /**
     * Next step computed for the agent to take.
     */
    _(this, "_currentStep");
    /**
     * Parsed model response after applying guardrails and tools.
     */
    _(this, "_lastProcessedResponse");
    /**
     * Trace associated with this run if tracing is enabled.
     */
    _(this, "_trace", null);
    this._context = e, this._originalInput = structuredClone(t), this._modelResponses = [], this._currentAgentSpan = void 0, this._currentAgent = r, this._toolUseTracker = new vs(), this._generatedItems = [], this._maxTurns = s, this._inputGuardrailResults = [], this._outputGuardrailResults = [], this._trace = Pt();
  }
  /**
   * Approves a tool call requested by the agent through an interruption and approval item request.
   *
   * To approve the request use this method and then run the agent again with the same state object
   * to continue the execution.
   *
   * By default it will only approve the current tool call. To allow the tool to be used multiple
   * times throughout the run, set the `alwaysApprove` option to `true`.
   *
   * @param approvalItem - The tool call approval item to approve.
   * @param options - Options for the approval.
   */
  approve(e, t = { alwaysApprove: !1 }) {
    this._context.approveTool(e, t);
  }
  /**
   * Rejects a tool call requested by the agent through an interruption and approval item request.
   *
   * To reject the request use this method and then run the agent again with the same state object
   * to continue the execution.
   *
   * By default it will only reject the current tool call. To allow the tool to be used multiple
   * times throughout the run, set the `alwaysReject` option to `true`.
   *
   * @param approvalItem - The tool call approval item to reject.
   * @param options - Options for the rejection.
   */
  reject(e, t = { alwaysReject: !1 }) {
    this._context.rejectTool(e, t);
  }
  /**
   * Serializes the run state to a JSON object.
   *
   * This method is used to serialize the run state to a JSON object that can be used to
   * resume the run later.
   *
   * @returns The serialized run state.
   */
  toJSON() {
    var r;
    const e = {
      $schemaVersion: pn,
      currentTurn: this._currentTurn,
      currentAgent: {
        name: this._currentAgent.name
      },
      originalInput: this._originalInput,
      modelResponses: this._modelResponses.map((s) => ({
        usage: {
          requests: s.usage.requests,
          inputTokens: s.usage.inputTokens,
          outputTokens: s.usage.outputTokens,
          totalTokens: s.usage.totalTokens
        },
        output: s.output,
        responseId: s.responseId
      })),
      context: this._context.toJSON(),
      toolUseTracker: this._toolUseTracker.toJSON(),
      maxTurns: this._maxTurns,
      currentAgentSpan: (r = this._currentAgentSpan) == null ? void 0 : r.toJSON(),
      noActiveAgentRun: this._noActiveAgentRun,
      inputGuardrailResults: this._inputGuardrailResults,
      outputGuardrailResults: this._outputGuardrailResults.map((s) => ({
        ...s,
        agent: s.agent.toJSON()
      })),
      currentStep: this._currentStep,
      lastModelResponse: this._lastTurnResponse,
      generatedItems: this._generatedItems.map((s) => s.toJSON()),
      lastProcessedResponse: this._lastProcessedResponse,
      trace: this._trace ? this._trace.toJSON() : null
    }, t = xs.safeParse(e);
    if (!t.success)
      throw new xi(`Failed to serialize run state. ${t.error.message}`);
    return t.data;
  }
  /**
   * Serializes the run state to a string.
   *
   * This method is used to serialize the run state to a string that can be used to
   * resume the run later.
   *
   * @returns The serialized run state.
   */
  toString() {
    return JSON.stringify(this.toJSON());
  }
  /**
   * Deserializes a run state from a string.
   *
   * This method is used to deserialize a run state from a string that was serialized using the
   * `toString` method.
   */
  static async fromString(e, t) {
    var f, m, S, w, x;
    const [r, s] = await _r(() => JSON.parse(t));
    if (r)
      throw new Q(`Failed to parse run state. ${r instanceof Error ? r.message : String(r)}`);
    const a = s.$schemaVersion;
    if (!a)
      throw new Q("Run state is missing schema version");
    if (a !== pn)
      throw new Q(`Run state schema version ${a} is not supported. Please use version ${pn}`);
    const i = xs.parse(JSON.parse(t)), o = vu(e), c = new dt(i.context.context);
    c._rebuildApprovals(i.context.approvals);
    const p = o.get(i.currentAgent.name);
    if (!p)
      throw new Q(`Agent ${i.currentAgent.name} not found`);
    const l = new qe(c, "", p, i.maxTurns);
    l._currentTurn = i.currentTurn, l._toolUseTracker = new vs();
    for (const [O, R] of Object.entries(i.toolUseTracker))
      l._toolUseTracker.addToolUse(o.get(O), R);
    if (i.currentAgentSpan) {
      i.trace || C.warn("Trace is not set, skipping tracing setup");
      const O = Te().createTrace({
        traceId: (f = i.trace) == null ? void 0 : f.id,
        name: (m = i.trace) == null ? void 0 : m.workflow_name,
        groupId: ((S = i.trace) == null ? void 0 : S.group_id) ?? void 0,
        metadata: (w = i.trace) == null ? void 0 : w.metadata
      });
      l._currentAgentSpan = pa(O, i.currentAgentSpan), l._trace = O;
    }
    return l._noActiveAgentRun = i.noActiveAgentRun, l._inputGuardrailResults = i.inputGuardrailResults, l._outputGuardrailResults = i.outputGuardrailResults.map((O) => ({
      ...O,
      agent: o.get(O.agent.name)
    })), l._currentStep = i.currentStep, l._originalInput = i.originalInput, l._modelResponses = i.modelResponses.map(bs), l._lastTurnResponse = i.lastModelResponse ? bs(i.lastModelResponse) : void 0, l._generatedItems = i.generatedItems.map((O) => fa(O, o)), l._lastProcessedResponse = i.lastProcessedResponse ? await wu(o, l._currentAgent, i.lastProcessedResponse) : void 0, ((x = i.currentStep) == null ? void 0 : x.type) === "next_step_handoff" && (l._currentStep = {
      type: "next_step_handoff",
      newAgent: o.get(i.currentStep.newAgent.name)
    }), l;
  }
}
function vu(n) {
  const e = /* @__PURE__ */ new Map(), t = [n];
  for (; t.length > 0; ) {
    const r = t.shift();
    if (!e.has(r.name)) {
      e.set(r.name, r);
      for (const s of r.handoffs)
        s instanceof It ? e.has(s.name) || t.push(s) : s.agent && (e.has(s.agent.name) || t.push(s.agent));
    }
  }
  return e;
}
function pa(n, e) {
  const t = e.span_data, r = e.previous_span ? pa(n, e.previous_span) : void 0, s = Te().createSpan({
    spanId: e.id,
    traceId: e.trace_id,
    parentId: e.parent_id ?? void 0,
    startedAt: e.started_at ?? void 0,
    endedAt: e.ended_at ?? void 0,
    data: t
  }, n);
  return s.previousSpan = r, s;
}
function bs(n) {
  const e = new Mn();
  return e.requests = n.usage.requests, e.inputTokens = n.usage.inputTokens, e.outputTokens = n.usage.outputTokens, e.totalTokens = n.usage.totalTokens, {
    usage: e,
    output: n.output.map((t) => Ir.parse(t)),
    responseId: n.responseId
  };
}
function fa(n, e) {
  switch (n.type) {
    case "message_output_item":
      return new $n(n.rawItem, e.get(n.agent.name));
    case "tool_call_item":
      return new Ke(n.rawItem, e.get(n.agent.name));
    case "tool_call_output_item":
      return new kt(n.rawItem, e.get(n.agent.name), n.output);
    case "reasoning_item":
      return new Ar(n.rawItem, e.get(n.agent.name));
    case "handoff_call_item":
      return new Cr(n.rawItem, e.get(n.agent.name));
    case "handoff_output_item":
      return new Or(n.rawItem, e.get(n.sourceAgent.name), e.get(n.targetAgent.name));
    case "tool_approval_item":
      return new Se(n.rawItem, e.get(n.agent.name));
  }
}
async function wu(n, e, t) {
  const r = await e.getAllTools(), s = new Map(r.filter((c) => c.type === "function").map((c) => [c.name, c])), a = new Map(r.filter((c) => c.type === "computer").map((c) => [c.name, c])), i = new Map(e.handoffs.map((c) => c instanceof It ? [c.name, Xs(c)] : [c.toolName, c])), o = {
    newItems: t.newItems.map((c) => fa(c, n)),
    toolsUsed: t.toolsUsed,
    handoffs: t.handoffs.map((c) => {
      if (!i.has(c.handoff.toolName))
        throw new Q(`Handoff ${c.handoff.toolName} not found`);
      return {
        toolCall: c.toolCall,
        handoff: i.get(c.handoff.toolName)
      };
    }),
    functions: await Promise.all(t.functions.map(async (c) => {
      if (!s.has(c.tool.name))
        throw new Q(`Tool ${c.tool.name} not found`);
      return {
        toolCall: c.toolCall,
        tool: s.get(c.tool.name)
      };
    })),
    computerActions: t.computerActions.map((c) => {
      const p = c.computer.name;
      if (!a.has(p))
        throw new Q(`Computer tool ${p} not found`);
      return {
        toolCall: c.toolCall,
        computer: a.get(p)
      };
    }),
    mcpApprovalRequests: (t.mcpApprovalRequests ?? []).map((c) => ({
      requestItem: new Se(c.requestItem.rawItem, e),
      mcpTool: c.mcpTool
    }))
  };
  return {
    ...o,
    hasToolsOrApprovalsToRun() {
      return o.handoffs.length > 0 || o.functions.length > 0 || o.mcpApprovalRequests.length > 0 || o.computerActions.length > 0;
    }
  };
}
const Ss = 10;
function Ts(n, e) {
  return n ? !1 : e ? !0 : "enabled_without_data";
}
function Nn(n, e) {
  const t = e.map((r) => r.rawItem);
  return typeof n == "string" && (n = [{ type: "message", role: "user", content: n }]), [...n, ...t];
}
var re, pr, fr, hr, ha, mr;
class xu extends Mo {
  constructor(t = {}) {
    super();
    T(this, re);
    _(this, "config");
    _(this, "inputGuardrailDefs");
    _(this, "outputGuardrailDefs");
    this.config = {
      modelProvider: t.modelProvider ?? Lo(),
      model: t.model,
      modelSettings: t.modelSettings,
      handoffInputFilter: t.handoffInputFilter,
      inputGuardrails: t.inputGuardrails,
      outputGuardrails: t.outputGuardrails,
      tracingDisabled: t.tracingDisabled ?? !1,
      traceIncludeSensitiveData: t.traceIncludeSensitiveData ?? !0,
      workflowName: t.workflowName ?? "Agent workflow",
      traceId: t.traceId,
      groupId: t.groupId,
      traceMetadata: t.traceMetadata
    }, this.inputGuardrailDefs = (t.inputGuardrails ?? []).map(ds), this.outputGuardrailDefs = (t.outputGuardrails ?? []).map(dr);
  }
  run(t, r, s = {
    stream: !1,
    context: void 0
  }) {
    return r instanceof qe && r._trace ? vo(r._trace, async () => (r._currentAgentSpan && ln(r._currentAgentSpan), s != null && s.stream ? $(this, re, mr).call(this, t, r, s) : $(this, re, pr).call(this, t, r, s))) : wo(async () => s != null && s.stream ? $(this, re, mr).call(this, t, r, s) : $(this, re, pr).call(this, t, r, s));
  }
}
re = new WeakSet(), pr = async function(t, r, s) {
  return or(async () => {
    var i, o;
    const a = r instanceof qe ? r : new qe(s.context instanceof dt ? s.context : new dt(s.context), r, t, s.maxTurns ?? Ss);
    try {
      for (; ; ) {
        let c = a._currentAgent.model ?? this.config.model;
        if (typeof c == "string" && (c = await this.config.modelProvider.getModel(c)), a._currentStep = a._currentStep ?? {
          type: "next_step_run_again"
        }, a._currentStep.type === "next_step_interruption") {
          if (C.debug("Continuing from interruption"), !a._lastTurnResponse || !a._lastProcessedResponse)
            throw new Q("No model response found in previous state", a);
          const p = await gs(a._currentAgent, a._originalInput, a._generatedItems, a._lastTurnResponse, a._lastProcessedResponse, this, a);
          a._toolUseTracker.addToolUse(a._currentAgent, a._lastProcessedResponse.toolsUsed), a._originalInput = p.originalInput, a._generatedItems = p.generatedItems, a._currentStep = p.nextStep;
          continue;
        }
        if (a._currentStep.type === "next_step_run_again") {
          const p = a._currentAgent.handoffs.map(On);
          if (!a._currentAgentSpan) {
            const R = p.map((V) => V.agentName);
            a._currentAgentSpan = os({
              data: {
                name: a._currentAgent.name,
                handoffs: R,
                output_type: a._currentAgent.outputSchemaName
              }
            }), a._currentAgentSpan.start(), ln(a._currentAgentSpan);
          }
          const l = await a._currentAgent.getAllTools(), f = l.map((R) => ps(R)), m = p.map((R) => fs(R));
          if (a._currentAgentSpan && (a._currentAgentSpan.spanData.tools = l.map((R) => R.name)), a._currentTurn++, a._currentTurn > a._maxTurns)
            throw (i = a._currentAgentSpan) == null || i.setError({
              message: "Max turns exceeded",
              data: { max_turns: a._maxTurns }
            }), new Jr(`Max turns (${a._maxTurns}) exceeded`, a);
          C.debug(`Running agent ${a._currentAgent.name} (turn ${a._currentTurn})`), a._currentTurn === 1 && await $(this, re, fr).call(this, a);
          const S = Nn(a._originalInput, a._generatedItems);
          a._noActiveAgentRun && (a._currentAgent.emit("agent_start", a._context, a._currentAgent), this.emit("agent_start", a._context, a._currentAgent));
          let w = {
            ...this.config.modelSettings,
            ...a._currentAgent.modelSettings
          };
          w = ms(a._currentAgent, a._toolUseTracker, w), a._lastTurnResponse = await c.getResponse({
            systemInstructions: await a._currentAgent.getSystemPrompt(a._context),
            input: S,
            previousResponseId: s.previousResponseId,
            modelSettings: w,
            tools: f,
            outputType: Gr(a._currentAgent.outputType),
            handoffs: m,
            tracing: Ts(this.config.tracingDisabled, this.config.traceIncludeSensitiveData),
            signal: s.signal
          }), a._modelResponses.push(a._lastTurnResponse), a._context.usage.add(a._lastTurnResponse.usage), a._noActiveAgentRun = !1;
          const x = hs(a._lastTurnResponse, a._currentAgent, l, p);
          a._lastProcessedResponse = x;
          const O = await _s(a._currentAgent, a._originalInput, a._generatedItems, a._lastTurnResponse, a._lastProcessedResponse, this, a);
          a._toolUseTracker.addToolUse(a._currentAgent, a._lastProcessedResponse.toolsUsed), a._originalInput = O.originalInput, a._generatedItems = O.generatedItems, a._currentStep = O.nextStep;
        }
        if (a._currentStep && a._currentStep.type === "next_step_final_output")
          return await $(this, re, hr).call(this, a, a._currentStep.output), this.emit("agent_end", a._context, a._currentAgent, a._currentStep.output), a._currentAgent.emit("agent_end", a._context, a._currentStep.output), new ls(a);
        if (a._currentStep && a._currentStep.type === "next_step_handoff")
          a._currentAgent = a._currentStep.newAgent, a._currentAgentSpan && (a._currentAgentSpan.end(), Ot(), a._currentAgentSpan = void 0), a._noActiveAgentRun = !0, a._currentStep = { type: "next_step_run_again" };
        else {
          if (a._currentStep && a._currentStep.type === "next_step_interruption")
            return new ls(a);
          C.debug("Running next loop");
        }
      }
    } catch (c) {
      throw a._currentAgentSpan && a._currentAgentSpan.setError({
        message: "Error in agent run",
        data: { error: String(c) }
      }), c;
    } finally {
      a._currentAgentSpan && (((o = a._currentStep) == null ? void 0 : o.type) !== "next_step_interruption" && a._currentAgentSpan.end(), Ot());
    }
  });
}, fr = async function(t) {
  const r = this.inputGuardrailDefs.concat(t._currentAgent.inputGuardrails.map(ds));
  if (r.length > 0) {
    const s = {
      agent: t._currentAgent,
      input: t._originalInput,
      context: t._context
    };
    try {
      const a = await Promise.all(r.map(async (i) => cs(async (o) => {
        const c = await i.run(s);
        return o.spanData.triggered = c.output.tripwireTriggered, c;
      }, { data: { name: i.name } }, t._currentAgentSpan)));
      for (const i of a)
        if (i.output.tripwireTriggered)
          throw t._currentAgentSpan && t._currentAgentSpan.setError({
            message: "Guardrail tripwire triggered",
            data: { guardrail: i.guardrail.name }
          }), new qr(`Input guardrail triggered: ${JSON.stringify(i.output.outputInfo)}`, i, t);
    } catch (a) {
      throw a instanceof qr ? a : (t._currentTurn--, new Br(`Input guardrail failed to complete: ${a}`, a, t));
    }
  }
}, hr = async function(t, r) {
  const s = this.outputGuardrailDefs.concat(t._currentAgent.outputGuardrails.map(dr));
  if (s.length > 0) {
    const a = t._currentAgent.processFinalOutput(r), i = {
      agent: t._currentAgent,
      agentOutput: a,
      context: t._context
    };
    try {
      const o = await Promise.all(s.map(async (c) => cs(async (p) => {
        const l = await c.run(i);
        return p.spanData.triggered = l.output.tripwireTriggered, l;
      }, { data: { name: c.name } }, t._currentAgentSpan)));
      for (const c of o)
        if (c.output.tripwireTriggered)
          throw t._currentAgentSpan && t._currentAgentSpan.setError({
            message: "Guardrail tripwire triggered",
            data: { guardrail: c.guardrail.name }
          }), new Qn(`Output guardrail triggered: ${JSON.stringify(c.output.outputInfo)}`, c, t);
    } catch (o) {
      throw o instanceof Qn ? o : new Br(`Output guardrail failed to complete: ${o}`, o, t);
    }
  }
}, ha = async function(t, r) {
  var s, a, i;
  try {
    for (; ; ) {
      const o = t.state._currentAgent, c = o.handoffs.map(On), p = await o.getAllTools(), l = p.map((m) => ps(m)), f = c.map((m) => fs(m));
      if (t.state._currentStep = t.state._currentStep ?? {
        type: "next_step_run_again"
      }, t.state._currentStep.type === "next_step_interruption") {
        if (C.debug("Continuing from interruption"), !t.state._lastTurnResponse || !t.state._lastProcessedResponse)
          throw new Q("No model response found in previous state", t.state);
        const m = await gs(t.state._currentAgent, t.state._originalInput, t.state._generatedItems, t.state._lastTurnResponse, t.state._lastProcessedResponse, this, t.state);
        ys(t, m), t.state._toolUseTracker.addToolUse(t.state._currentAgent, t.state._lastProcessedResponse.toolsUsed), t.state._originalInput = m.originalInput, t.state._generatedItems = m.generatedItems, t.state._currentStep = m.nextStep;
        continue;
      }
      if (t.state._currentStep.type === "next_step_run_again") {
        if (!t.state._currentAgentSpan) {
          const V = c.map((Y) => Y.agentName);
          t.state._currentAgentSpan = os({
            data: {
              name: o.name,
              handoffs: V,
              tools: p.map((Y) => Y.name),
              output_type: o.outputSchemaName
            }
          }), t.state._currentAgentSpan.start(), ln(t.state._currentAgentSpan);
        }
        if (t.state._currentTurn++, t.state._currentTurn > t.state._maxTurns)
          throw (s = t.state._currentAgentSpan) == null || s.setError({
            message: "Max turns exceeded",
            data: { max_turns: t.state._maxTurns }
          }), new Jr(`Max turns (${t.state._maxTurns}) exceeded`, t.state);
        C.debug(`Running agent ${o.name} (turn ${t.state._currentTurn})`);
        let m = o.model ?? this.config.model;
        typeof m == "string" && (m = await this.config.modelProvider.getModel(m)), t.state._currentTurn === 1 && await $(this, re, fr).call(this, t.state);
        let S = {
          ...this.config.modelSettings,
          ...o.modelSettings
        };
        S = ms(o, t.state._toolUseTracker, S);
        const w = Nn(t.input, t.newItems);
        t.state._noActiveAgentRun && (o.emit("agent_start", t.state._context, o), this.emit("agent_start", t.state._context, o));
        let x;
        for await (const V of m.getStreamedResponse({
          systemInstructions: await o.getSystemPrompt(t.state._context),
          input: w,
          previousResponseId: r.previousResponseId,
          modelSettings: S,
          tools: l,
          handoffs: f,
          outputType: Gr(o.outputType),
          tracing: Ts(this.config.tracingDisabled, this.config.traceIncludeSensitiveData),
          signal: r.signal
        })) {
          if (V.type === "response_done") {
            const Y = ra.parse(V);
            x = {
              usage: new Mn(Y.response.usage),
              output: Y.response.output,
              responseId: Y.response.id
            };
          }
          if (t.cancelled)
            return;
          t._addItem(new iu(V));
        }
        if (t.state._noActiveAgentRun = !1, !x)
          throw new fe("Model did not procude a final response!", t.state);
        t.state._lastTurnResponse = x, t.state._modelResponses.push(t.state._lastTurnResponse);
        const O = hs(t.state._lastTurnResponse, o, p, c);
        t.state._lastProcessedResponse = O;
        const R = await _s(o, t.state._originalInput, t.state._generatedItems, t.state._lastTurnResponse, t.state._lastProcessedResponse, this, t.state);
        ys(t, R), t.state._toolUseTracker.addToolUse(o, O.toolsUsed), t.state._originalInput = R.originalInput, t.state._generatedItems = R.generatedItems, t.state._currentStep = R.nextStep;
      }
      if (t.state._currentStep.type === "next_step_final_output") {
        await $(this, re, hr).call(this, t.state, t.state._currentStep.output);
        return;
      } else {
        if (t.state._currentStep.type === "next_step_interruption")
          return;
        t.state._currentStep.type === "next_step_handoff" ? (t.state._currentAgent = (a = t.state._currentStep) == null ? void 0 : a.newAgent, t.state._currentAgentSpan && (t.state._currentAgentSpan.end(), Ot()), t.state._currentAgentSpan = void 0, t._addItem(new uu(o)), t.state._noActiveAgentRun = !0, t.state._currentStep = {
          type: "next_step_run_again"
        }) : C.debug("Running next loop");
      }
    }
  } catch (o) {
    throw t.state._currentAgentSpan && t.state._currentAgentSpan.setError({
      message: "Error in agent run",
      data: { error: String(o) }
    }), o;
  } finally {
    t.state._currentAgentSpan && (((i = t.state._currentStep) == null ? void 0 : i.type) !== "next_step_interruption" && t.state._currentAgentSpan.end(), Ot());
  }
}, mr = async function(t, r, s) {
  return s = s ?? {}, or(async () => {
    const a = r instanceof qe ? r : new qe(s.context instanceof dt ? s.context : new dt(s.context), r, t, s.maxTurns ?? Ss), i = new su({
      signal: s.signal,
      state: a
    });
    return i.maxTurns = s.maxTurns ?? a._maxTurns, $(this, re, ha).call(this, i, s).then(() => {
      i._done();
    }, (o) => {
      i._raiseError(o);
    }), i;
  });
};
class It extends Zo {
  constructor(t) {
    super();
    _(this, "name");
    _(this, "instructions");
    _(this, "handoffDescription");
    _(this, "handoffs");
    _(this, "model");
    _(this, "modelSettings");
    _(this, "tools");
    _(this, "mcpServers");
    _(this, "inputGuardrails");
    _(this, "outputGuardrails");
    _(this, "outputType", "text");
    _(this, "toolUseBehavior");
    _(this, "resetToolChoice");
    if (typeof t.name != "string" || t.name.trim() === "")
      throw new Q("Agent must have a name.");
    if (this.name = t.name, this.instructions = t.instructions ?? "", this.handoffDescription = t.handoffDescription ?? "", this.handoffs = t.handoffs ?? [], this.model = t.model ?? "", this.modelSettings = t.modelSettings ?? {}, this.tools = t.tools ?? [], this.mcpServers = t.mcpServers ?? [], this.inputGuardrails = t.inputGuardrails ?? [], this.outputGuardrails = t.outputGuardrails ?? [], t.outputType && (this.outputType = t.outputType), this.toolUseBehavior = t.toolUseBehavior ?? "run_llm_again", this.resetToolChoice = t.resetToolChoice ?? !0, (t.handoffOutputTypeWarningEnabled === void 0 || t.handoffOutputTypeWarningEnabled) && this.handoffs && this.outputType) {
      const r = /* @__PURE__ */ new Set([JSON.stringify(this.outputType)]);
      for (const s of this.handoffs)
        "outputType" in s && s.outputType ? r.add(JSON.stringify(s.outputType)) : "agent" in s && s.agent.outputType && r.add(JSON.stringify(s.agent.outputType));
      r.size > 1 && C.warn(`[Agent] Warning: Handoff agents have different output types: ${Array.from(r).join(", ")}. You can make it type-safe by using Agent.create({ ... }) method instead.`);
    }
  }
  /**
   * Create an Agent with handoffs and automatically infer the union type for TOutput from the handoff agents' output types.
   */
  static create(t) {
    return new It({
      ...t,
      handoffs: t.handoffs,
      outputType: t.outputType,
      handoffOutputTypeWarningEnabled: !1
    });
  }
  /**
   * Ouput schema name
   */
  get outputSchemaName() {
    if (this.outputType === "text")
      return "text";
    if (et(this.outputType))
      return "ZodOutput";
    if (typeof this.outputType == "object")
      return this.outputType.name;
    throw new Error(`Unknown output type: ${this.outputType}`);
  }
  /**
   * Makes a copy of the agent, with the given arguments changed. For example, you could do:
   *
   * ```
   * const newAgent = agent.clone({ instructions: 'New instructions' })
   * ```
   *
   * @param config - A partial configuration to change.
   * @returns A new agent with the given changes.
   */
  clone(t) {
    return new It({
      ...this,
      ...t
    });
  }
  /**
   * Transform this agent into a tool, callable by other agents.
   *
   * This is different from handoffs in two ways:
   * 1. In handoffs, the new agent receives the conversation history. In this tool, the new agent
   *    receives generated input.
   * 2. In handoffs, the new agent takes over the conversation. In this tool, the new agent is
   *    called as a tool, and the conversation is continued by the original agent.
   *
   * @param options - Options for the tool.
   * @returns A tool that runs the agent and returns the output text.
   */
  asTool(t) {
    const { toolName: r, toolDescription: s, customOutputExtractor: a } = t;
    return Kn({
      name: r ?? _n(this.name),
      description: s ?? "",
      parameters: {
        type: "object",
        properties: {
          input: {
            type: "string"
          }
        },
        required: ["input"],
        additionalProperties: !1
      },
      strict: !0,
      execute: async (i, o) => {
        if (!Si(i))
          throw new fe("Agent tool called with invalid input");
        const p = await new xu().run(this, i.input, {
          context: o == null ? void 0 : o.context
        });
        return typeof a == "function" ? a(p) : au(p.rawResponses[p.rawResponses.length - 1]);
      }
    });
  }
  /**
   * Returns the system prompt for the agent.
   *
   * If the agent has a function as its instructions, this function will be called with the
   * runContext and the agent instance.
   */
  async getSystemPrompt(t) {
    return typeof this.instructions == "function" ? await this.instructions(t, this) : this.instructions;
  }
  /**
   * Fetches the available tools from the MCP servers.
   * @returns the MCP powered tools
   */
  async getMcpTools() {
    return this.mcpServers.length > 0 ? uo(this.mcpServers) : [];
  }
  /**
   * ALl agent tools, including the MCPl and function tools.
   *
   * @returns all configured tools
   */
  async getAllTools() {
    return [...await this.getMcpTools(), ...this.tools];
  }
  /**
   * Processes the final output of the agent.
   *
   * @param output - The output of the agent.
   * @returns The parsed out.
   */
  processFinalOutput(t) {
    if (this.outputType === "text")
      return t;
    if (typeof this.outputType == "object") {
      const r = JSON.parse(t);
      return et(this.outputType) ? this.outputType.parse(r) : r;
    }
    throw new Error(`Unknown output type: ${this.outputType}`);
  }
  /**
   * Returns a JSON representation of the agent, which is serializable.
   *
   * @returns A JSON object containing the agent's name.
   */
  toJSON() {
    return {
      name: this.name
    };
  }
}
jo(Vs());
class Tc extends It {
  constructor(t) {
    super(t);
    /**
     * The voice intended to be used by the agent. If another agent already spoke during the
     * RealtimeSession, changing the voice during a handoff will fail.
     */
    _(this, "voice");
    this.voice = t.voice ?? "ash";
  }
}
function bu(n) {
  return {
    debounceTextLength: n.debounceTextLength ?? 100
  };
}
function Su({ policyHint: n, ...e }) {
  const t = dr(e), r = n ?? t.name;
  return {
    ...t,
    policyHint: r,
    run: async (s) => {
      const a = await t.run(s);
      return {
        ...a,
        guardrail: { ...a.guardrail, policyHint: r }
      };
    }
  };
}
function Tu(n) {
  return `
⚠️ Your last answer was blocked. 
Failed Guardrail Reason: ${n.guardrail.policyHint}. 
Failure Details: ${JSON.stringify(n.output.outputInfo ?? {})}. 
Please respond again following policy. Apologize for not being able to answer the question (while avoiding the specific reason) and divert discussion back to an approved topic immediately and not invite more discussion.
`.trim();
}
const Ie = $s("openai-agents:realtime");
g({
  itemId: d()
});
const ks = pe("role", [
  g({
    itemId: d(),
    previousItemId: d().nullable().optional(),
    type: h("message"),
    role: h("system"),
    content: B(g({ type: h("input_text"), text: d() }))
  }),
  g({
    itemId: d(),
    previousItemId: d().nullable().optional(),
    type: h("message"),
    role: h("user"),
    status: se(["in_progress", "completed"]),
    content: B(g({ type: h("input_text"), text: d() }).or(g({
      type: h("input_audio"),
      audio: d().nullable().optional(),
      transcript: d().nullable()
    })))
  }),
  g({
    itemId: d(),
    previousItemId: d().nullable().optional(),
    type: h("message"),
    role: h("assistant"),
    status: se(["in_progress", "completed", "incomplete"]),
    content: B(g({ type: h("text"), text: d() }).or(g({
      type: h("audio"),
      audio: d().nullable().optional(),
      transcript: d().nullable().optional()
    })))
  })
]), Is = g({
  itemId: d(),
  previousItemId: d().nullable().optional(),
  type: h("function_call"),
  status: se(["in_progress", "completed"]),
  arguments: d(),
  name: d(),
  output: d().nullable()
}), ma = g({
  id: d().optional().nullable(),
  conversation_id: d().optional().nullable(),
  max_output_tokens: A().or(h("inf")).optional().nullable(),
  metadata: ne(d(), U()).optional().nullable(),
  modalities: B(d()).optional().nullable(),
  object: h("realtime.response").optional().nullable(),
  output: B(U()).optional().nullable(),
  output_audio_format: d().optional().nullable(),
  status: se(["completed", "incomplete", "failed", "cancelled", "in_progress"]).optional().nullable(),
  status_details: ne(d(), U()).optional().nullable(),
  usage: g({
    input_tokens: A().optional(),
    input_tokens_details: ne(d(), U()).optional().nullable(),
    output_tokens: A().optional(),
    output_tokens_details: ne(d(), U()).optional().nullable()
  }).optional().nullable(),
  voice: d().optional().nullable()
}), ku = g({
  id: d().optional(),
  audio: d().nullable().optional(),
  text: d().nullable().optional(),
  transcript: d().nullable().optional(),
  type: Bs([
    h("input_text"),
    h("input_audio"),
    h("item_reference"),
    h("text"),
    h("audio")
  ])
}), un = g({
  id: d().optional(),
  arguments: d().optional(),
  call_id: d().optional(),
  content: B(ku).optional(),
  name: d().optional(),
  object: h("realtime.item").optional(),
  output: d().optional(),
  role: se(["user", "assistant", "system"]).optional(),
  status: se(["completed", "incomplete", "in_progress"]).optional(),
  type: se(["message", "function_call", "function_call_output"]).optional()
}), Iu = g({
  type: h("conversation.created"),
  event_id: d(),
  conversation: g({
    id: d().optional(),
    object: h("realtime.conversation").optional()
  })
}), Au = g({
  type: h("conversation.item.created"),
  event_id: d(),
  item: un,
  previous_item_id: d().nullable().optional()
}), Cu = g({
  type: h("conversation.item.deleted"),
  event_id: d(),
  item_id: d()
}), Ou = g({
  type: h("conversation.item.input_audio_transcription.completed"),
  event_id: d(),
  item_id: d(),
  content_index: A(),
  transcript: d(),
  logprobs: B(U()).nullable().optional()
}), Eu = g({
  type: h("conversation.item.input_audio_transcription.delta"),
  event_id: d(),
  item_id: d(),
  content_index: A().optional(),
  delta: d().optional(),
  logprobs: B(U()).nullable().optional()
}), Nu = g({
  type: h("conversation.item.input_audio_transcription.failed"),
  event_id: d(),
  item_id: d(),
  content_index: A(),
  error: g({
    code: d().optional(),
    message: d().optional(),
    param: d().optional(),
    type: d().optional()
  })
}), Ru = g({
  type: h("conversation.item.retrieved"),
  event_id: d(),
  item: un
}), Du = g({
  type: h("conversation.item.truncated"),
  event_id: d(),
  item_id: d(),
  audio_end_ms: A(),
  content_index: A()
}), Pu = g({
  type: h("conversation.item.create"),
  item: un,
  event_id: d().optional(),
  previous_item_id: d().nullable().optional()
}), ju = g({
  type: h("conversation.item.delete"),
  item_id: d(),
  event_id: d().optional()
}), Zu = g({
  type: h("conversation.item.retrieve"),
  item_id: d(),
  event_id: d().optional()
}), Mu = g({
  type: h("conversation.item.truncate"),
  item_id: d(),
  audio_end_ms: A(),
  content_index: A(),
  event_id: d().optional()
}), $u = g({
  type: h("error"),
  event_id: d().optional(),
  error: U().optional()
}), Fu = g({
  type: h("input_audio_buffer.cleared"),
  event_id: d()
}), Lu = g({
  type: h("input_audio_buffer.append"),
  audio: d(),
  event_id: d().optional()
}), Uu = g({
  type: h("input_audio_buffer.clear"),
  event_id: d().optional()
}), Ju = g({
  type: h("input_audio_buffer.commit"),
  event_id: d().optional()
}), Bu = g({
  type: h("input_audio_buffer.committed"),
  event_id: d(),
  item_id: d(),
  previous_item_id: d().nullable().optional()
}), qu = g({
  type: h("input_audio_buffer.speech_started"),
  event_id: d(),
  item_id: d(),
  audio_start_ms: A()
}), Gu = g({
  type: h("input_audio_buffer.speech_stopped"),
  event_id: d(),
  item_id: d(),
  audio_end_ms: A()
}), Vu = g({
  type: h("output_audio_buffer.started"),
  event_id: d()
}).passthrough(), zu = g({
  type: h("output_audio_buffer.stopped"),
  event_id: d()
}).passthrough(), Wu = g({
  type: h("output_audio_buffer.cleared"),
  event_id: d()
}), Hu = g({
  type: h("rate_limits.updated"),
  event_id: d(),
  rate_limits: B(g({
    limit: A().optional(),
    name: se(["requests", "tokens"]).optional(),
    remaining: A().optional(),
    reset_seconds: A().optional()
  }))
}), Yu = g({
  type: h("response.audio.delta"),
  event_id: d(),
  item_id: d(),
  content_index: A(),
  delta: d(),
  output_index: A(),
  response_id: d()
}), Xu = g({
  type: h("response.audio.done"),
  event_id: d(),
  item_id: d(),
  content_index: A(),
  output_index: A(),
  response_id: d()
}), Qu = g({
  type: h("response.audio_transcript.delta"),
  event_id: d(),
  item_id: d(),
  content_index: A(),
  delta: d(),
  output_index: A(),
  response_id: d()
}), Ku = g({
  type: h("response.audio_transcript.done"),
  event_id: d(),
  item_id: d(),
  content_index: A(),
  transcript: d(),
  output_index: A(),
  response_id: d()
}), ec = g({
  type: h("response.content_part.added"),
  event_id: d(),
  item_id: d(),
  content_index: A(),
  output_index: A(),
  response_id: d(),
  part: g({
    audio: d().optional(),
    text: d().optional(),
    transcript: d().optional(),
    type: se(["text", "audio"]).optional()
  })
}), tc = g({
  type: h("response.content_part.done"),
  event_id: d(),
  item_id: d(),
  content_index: A(),
  output_index: A(),
  response_id: d(),
  part: g({
    audio: d().optional(),
    text: d().optional(),
    transcript: d().optional(),
    type: se(["text", "audio"]).optional()
  })
}), nc = g({
  type: h("response.created"),
  event_id: d(),
  response: ma
}), ga = g({
  type: h("response.done"),
  event_id: d(),
  response: ma
}), rc = g({
  type: h("response.function_call_arguments.delta"),
  event_id: d(),
  item_id: d(),
  call_id: d(),
  delta: d(),
  output_index: A(),
  response_id: d()
}), sc = g({
  type: h("response.function_call_arguments.done"),
  event_id: d(),
  item_id: d(),
  call_id: d(),
  arguments: d(),
  output_index: A(),
  response_id: d()
}), ac = g({
  type: h("response.output_item.added"),
  event_id: d(),
  item: un,
  output_index: A(),
  response_id: d()
}), ic = g({
  type: h("response.output_item.done"),
  event_id: d(),
  item: un,
  output_index: A(),
  response_id: d()
}), oc = g({
  type: h("response.text.delta"),
  event_id: d(),
  item_id: d(),
  content_index: A(),
  delta: d(),
  output_index: A(),
  response_id: d()
}), uc = g({
  type: h("response.text.done"),
  event_id: d(),
  item_id: d(),
  content_index: A(),
  text: d(),
  output_index: A(),
  response_id: d()
}), cc = g({
  type: h("session.created"),
  event_id: d(),
  session: U()
}), dc = g({
  type: h("session.updated"),
  event_id: d(),
  session: U()
}), lc = g({
  type: h("response.cancel"),
  event_id: d().optional(),
  response_id: d().optional()
}), pc = g({
  type: h("response.create"),
  event_id: d().optional(),
  response: U().optional()
}), fc = g({
  type: h("session.update"),
  event_id: d().optional(),
  session: U()
}), hc = g({
  type: h("transcription_session.update"),
  event_id: d().optional(),
  session: U()
}), mc = g({
  type: h("transcription_session.updated"),
  event_id: d(),
  session: U()
}), gc = g({
  type: d(),
  event_id: d().optional().nullable()
}).passthrough(), _c = pe("type", [
  Iu,
  Au,
  Cu,
  Ou,
  Eu,
  Nu,
  Ru,
  Du,
  $u,
  Fu,
  Bu,
  qu,
  Gu,
  Vu,
  zu,
  Wu,
  Hu,
  Yu,
  Xu,
  Qu,
  Ku,
  ec,
  tc,
  nc,
  ga,
  rc,
  sc,
  ac,
  ic,
  oc,
  uc,
  cc,
  dc,
  mc
]);
pe("type", [
  Pu,
  ju,
  Zu,
  Mu,
  Lu,
  Uu,
  Ju,
  lc,
  pc,
  fc,
  hc
]);
function Er(n) {
  const e = JSON.parse(n.data.toString()), t = _c.safeParse(e);
  if (!t.success) {
    const r = gc.safeParse(e);
    return r.success ? { data: r.data, isGeneric: !0 } : { data: null, isGeneric: !0 };
  }
  return { data: t.data, isGeneric: !1 };
}
const yc = "gpt-4o-realtime-preview", Pe = {
  voice: "ash",
  modalities: ["text", "audio"],
  inputAudioFormat: "pcm16",
  outputAudioFormat: "pcm16",
  inputAudioTranscription: {
    model: "gpt-4o-mini-transcribe"
  },
  turnDetection: {
    type: "semantic_vad"
  }
};
var We, Kt, le;
class _a extends xr {
  constructor(t = {}) {
    super();
    T(this, We);
    T(this, Kt);
    T(this, le, null);
    _(this, "eventEmitter", new Pn());
    y(this, We, t.model ?? yc), y(this, Kt, t.apiKey);
  }
  /**
   * The current model that is being used by the transport layer.
   */
  get currentModel() {
    return u(this, We);
  }
  /**
   * The current model that is being used by the transport layer.
   * **Note**: The model cannot be changed mid conversation.
   */
  set currentModel(t) {
    y(this, We, t);
  }
  async _getApiKey(t) {
    const r = t.apiKey ?? u(this, Kt);
    return typeof r == "function" ? await r() : r;
  }
  _onMessage(t) {
    var a, i, o, c, p, l;
    const { data: r, isGeneric: s } = Er(t);
    if (r !== null && (this.emit("*", r), !s)) {
      if (r.type === "error" ? this.emit("error", { type: "error", error: r }) : this.emit(r.type, r), r.type === "response.created") {
        this.emit("turn_started", {
          type: "response_started",
          providerData: {
            ...r
          }
        });
        return;
      }
      if (r.type === "response.done") {
        const f = ga.safeParse(r);
        if (!f.success) {
          Ie.error("Error parsing response done event", f.error);
          return;
        }
        const m = ((a = f.data.response.usage) == null ? void 0 : a.input_tokens) ?? 0, S = ((i = f.data.response.usage) == null ? void 0 : i.output_tokens) ?? 0, w = m + S, x = new Mn({
          inputTokens: m,
          inputTokensDetails: ((o = f.data.response.usage) == null ? void 0 : o.input_tokens_details) ?? {},
          outputTokens: S,
          outputTokensDetails: ((c = f.data.response.usage) == null ? void 0 : c.output_tokens_details) ?? {},
          totalTokens: w
        });
        this.emit("usage_update", x), this.emit("turn_done", {
          type: "response_done",
          response: {
            id: f.data.response.id ?? "",
            output: f.data.response.output ?? [],
            usage: {
              inputTokens: m,
              inputTokensDetails: ((p = f.data.response.usage) == null ? void 0 : p.input_tokens_details) ?? {},
              outputTokens: S,
              outputTokensDetails: ((l = f.data.response.usage) == null ? void 0 : l.output_tokens_details) ?? {},
              totalTokens: w
            }
          }
        });
        return;
      }
      if (r.type === "response.audio.done") {
        this.emit("audio_done");
        return;
      }
      if (r.type === "conversation.item.deleted") {
        this.emit("item_deleted", {
          itemId: r.item_id
        });
        return;
      }
      if (r.type === "conversation.item.input_audio_transcription.completed" || r.type === "conversation.item.truncated") {
        this.sendEvent({
          type: "conversation.item.retrieve",
          item_id: r.item_id
        });
        return;
      }
      if (r.type === "conversation.item.input_audio_transcription.delta" || r.type === "response.text.delta" || r.type === "response.audio_transcript.delta" || r.type === "response.function_call_arguments.delta") {
        r.type === "response.audio_transcript.delta" && this.emit("audio_transcript_delta", {
          type: "transcript_delta",
          delta: r.delta,
          itemId: r.item_id,
          responseId: r.response_id
        });
        return;
      }
      if ((r.type === "conversation.item.created" || r.type === "conversation.item.retrieved") && r.item.type === "message") {
        const f = r.type === "conversation.item.created" ? r.previous_item_id : null, m = ks.parse({
          itemId: r.item.id,
          previousItemId: f,
          type: r.item.type,
          role: r.item.role,
          content: r.item.content,
          status: r.item.status
        });
        this.emit("item_update", m);
        return;
      }
      if (r.type === "response.output_item.done" || r.type === "response.output_item.added") {
        const f = r.item;
        if (f.type === "function_call" && f.status === "completed") {
          const m = Is.parse({
            itemId: f.id,
            type: f.type,
            status: "in_progress",
            // we set it to in_progress for the UI as it will only be completed with the output
            arguments: f.arguments,
            name: f.name,
            output: null
          });
          this.emit("item_update", m), this.emit("function_call", {
            id: f.id,
            type: "function_call",
            callId: f.call_id ?? "",
            arguments: f.arguments ?? "",
            name: f.name ?? ""
          });
          return;
        }
        if (f.type === "message") {
          const m = ks.parse({
            itemId: r.item.id,
            type: r.item.type,
            role: r.item.role,
            content: r.item.content,
            status: "in_progress"
          });
          this.emit("item_update", m);
          return;
        }
      }
    }
  }
  _onError(t) {
    this.emit("error", {
      type: "error",
      error: t
    });
  }
  _onOpen() {
    this.emit("connected");
  }
  _onClose() {
    this.emit("disconnected");
  }
  /**
   * Send a message to the Realtime API. This will create a new item in the conversation and
   * trigger a response.
   *
   * @param message - The message to send.
   * @param otherEventData - Additional event data to send.
   */
  sendMessage(t, r) {
    this.sendEvent({
      type: "conversation.item.create",
      item: typeof t == "string" ? {
        type: "message",
        role: "user",
        content: [
          {
            type: "input_text",
            text: t
          }
        ]
      } : t,
      ...r
    }), this.sendEvent({
      type: "response.create"
    });
  }
  _getMergedSessionConfig(t) {
    var s;
    return {
      instructions: t.instructions,
      model: t.model ?? u(this, We) ?? Pe.model,
      voice: t.voice ?? Pe.voice,
      modalities: t.modalities ?? Pe.modalities,
      input_audio_format: t.inputAudioFormat ?? Pe.inputAudioFormat,
      output_audio_format: t.outputAudioFormat ?? Pe.outputAudioFormat,
      input_audio_transcription: t.inputAudioTranscription ?? Pe.inputAudioTranscription,
      turn_detection: t.turnDetection ?? Pe.turnDetection,
      tool_choice: t.toolChoice ?? Pe.toolChoice,
      tools: (s = t.tools) == null ? void 0 : s.map((a) => ({
        ...a,
        strict: void 0
      })),
      // We don't set tracing here to make sure that we don't try to override it on every
      // session.update as it might lead to errors
      ...t.providerData ?? {}
    };
  }
  /**
   * Sets the internal tracing config. This is used to track the tracing config that has been set
   * during the session.create event.
   */
  set _tracingConfig(t) {
    y(this, le, t);
  }
  /**
   * Sets the tracing config for the session. This will send the tracing config to the Realtime API.
   *
   * @param tracingConfig - The tracing config to set. We don't support 'auto' here as the SDK will always configure a Workflow Name unless it exists
   */
  _updateTracingConfig(t) {
    var r, s, a;
    if (typeof u(this, le) > "u" && y(this, le, null), t === "auto") {
      this.sendEvent({
        type: "session.update",
        session: {
          tracing: "auto"
        }
      });
      return;
    }
    if (typeof u(this, le) != "string" && typeof t != "string") {
      Ie.warn("Tracing config is already set, skipping setting it again. This likely happens when you already set a tracing config on session creation.");
      return;
    }
    if (t === null) {
      Ie.debug("Disabling tracing for this session. It cannot be turned on for this session from this point on."), this.sendEvent({
        type: "session.update",
        session: {
          tracing: null
        }
      });
      return;
    }
    if (u(this, le) === null || typeof u(this, le) == "string") {
      this.sendEvent({
        type: "session.update",
        session: {
          tracing: t
        }
      });
      return;
    }
    if ((t == null ? void 0 : t.group_id) !== ((r = u(this, le)) == null ? void 0 : r.group_id) || (t == null ? void 0 : t.metadata) !== ((s = u(this, le)) == null ? void 0 : s.metadata) || (t == null ? void 0 : t.workflow_name) !== ((a = u(this, le)) == null ? void 0 : a.workflow_name)) {
      Ie.warn("Mismatch in tracing config. Ignoring the new tracing config. This likely happens when you already set a tracing config on session creation. Current tracing config: %s, new tracing config: %s", JSON.stringify(u(this, le)), JSON.stringify(t));
      return;
    }
    this.sendEvent({
      type: "session.update",
      session: {
        tracing: t
      }
    });
  }
  /**
   * Updates the session config. This will merge it with the current session config with the default
   * values and send it to the Realtime API.
   *
   * @param config - The session config to update.
   */
  updateSessionConfig(t) {
    const r = this._getMergedSessionConfig(t);
    this.sendEvent({
      type: "session.update",
      session: r
    });
  }
  /**
   * Send the output of a function call to the Realtime API.
   *
   * @param toolCall - The tool call to send the output for.
   * @param output - The output of the function call.
   * @param startResponse - Whether to start a new response after sending the output.
   */
  sendFunctionCallOutput(t, r, s = !0) {
    this.sendEvent({
      type: "conversation.item.create",
      item: {
        type: "function_call_output",
        output: r,
        call_id: t.callId
      }
    });
    try {
      const a = Is.parse({
        itemId: t.id,
        previousItemId: t.previousItemId,
        type: "function_call",
        status: "completed",
        arguments: t.arguments,
        name: t.name,
        output: r
      });
      this.emit("item_update", a);
    } catch (a) {
      Ie.error("Error parsing tool call item", a, t);
    }
    s && this.sendEvent({
      type: "response.create"
    });
  }
  /**
   * Send an audio buffer to the Realtime API. If `{ commit: true }` is passed, the audio buffer
   * will be committed and the model will start processing it. This is necessary if you have
   * disabled turn detection / voice activity detection (VAD).
   *
   * @param audio - The audio buffer to send.
   * @param options - The options for the audio buffer.
   */
  sendAudio(t, { commit: r = !1 } = {}) {
    this.sendEvent({
      type: "input_audio_buffer.append",
      audio: Cs(t)
    }), r && this.sendEvent({
      type: "input_audio_buffer.commit"
    });
  }
  /**
   * Reset the history of the conversation. This will create a diff between the old and new history
   * and send the necessary events to the Realtime API to update the history.
   *
   * @param oldHistory - The old history of the conversation.
   * @param newHistory - The new history of the conversation.
   */
  resetHistory(t, r) {
    const { removals: s, additions: a, updates: i } = Ia(t, r), o = new Set(s.map((p) => p.itemId));
    for (const p of i)
      o.add(p.itemId);
    if (o.size > 0)
      for (const p of o)
        this.sendEvent({
          type: "conversation.item.delete",
          item_id: p
        });
    const c = [...a, ...i];
    for (const p of c)
      if (p.type === "message") {
        const l = {
          type: "message",
          role: p.role,
          content: p.content,
          id: p.itemId
        };
        p.role !== "system" && p.status && (l.status = p.status), this.sendEvent({
          type: "conversation.item.create",
          item: l
        });
      } else p.type === "function_call" && Ie.warn("Function calls cannot be manually added or updated at the moment. Ignoring.");
  }
}
We = new WeakMap(), Kt = new WeakMap(), le = new WeakMap();
var en, G, tn, He, nn;
class vc extends _a {
  constructor(t = {}) {
    if (typeof RTCPeerConnection > "u")
      throw new Error("WebRTC is not supported in this environment");
    super(t);
    _(this, "options");
    T(this, en);
    T(this, G, {
      status: "disconnected",
      peerConnection: void 0,
      dataChannel: void 0
    });
    T(this, tn);
    T(this, He, !1);
    T(this, nn, !1);
    this.options = t, y(this, en, t.baseUrl ?? "https://api.openai.com/v1/realtime"), y(this, tn, t.useInsecureApiKey ?? !1);
  }
  /**
   * The current status of the WebRTC connection.
   */
  get status() {
    return u(this, G).status;
  }
  /**
   * The current connection state of the WebRTC connection including the peer connection and data
   * channel.
   */
  get connectionState() {
    return u(this, G);
  }
  /**
   * Whether the session is muted.
   */
  get muted() {
    return u(this, nn);
  }
  /**
   * Connect to the Realtime API. This will establish the connection to the OpenAI Realtime API
   * via WebRTC.
   *
   * If you are using a browser, the transport layer will also automatically configure the
   * microphone and audio output to be used by the session.
   *
   * @param options - The options for the connection.
   */
  async connect(t) {
    if (u(this, G).status === "connected")
      return;
    u(this, G).status === "connecting" && Ie.warn("Realtime connection already in progress. Please await original promise");
    const r = t.model ?? this.currentModel;
    this.currentModel = r;
    const s = t.url ?? u(this, en), a = await this._getApiKey(t), i = typeof a == "string" && a.startsWith("ek_");
    if (!u(this, tn) && !i)
      throw new Q("Using the WebRTC connection in a browser environment requires an insecure API key. Please use a WebSocket connection instead or set the useInsecureApiKey option to true.");
    return new Promise(async (o, c) => {
      try {
        const p = {
          ...t.initialSessionConfig || {},
          model: this.currentModel
        }, l = new URL(s);
        let f = new RTCPeerConnection();
        const m = f.createDataChannel("oai-events");
        y(this, G, {
          status: "connecting",
          peerConnection: f,
          dataChannel: m
        }), this.emit("connection_change", u(this, G).status), m.addEventListener("open", () => {
          y(this, G, {
            status: "connected",
            peerConnection: f,
            dataChannel: m
          }), this.updateSessionConfig(p), this.emit("connection_change", u(this, G).status), this._onOpen(), o();
        }), m.addEventListener("error", (oe) => {
          this.close(), this._onError(oe), c(oe);
        }), m.addEventListener("message", (oe) => {
          this._onMessage(oe);
          const { data: ue, isGeneric: At } = Er(oe);
          !ue || At || (ue.type === "response.created" ? y(this, He, !0) : ue.type === "response.done" && y(this, He, !1), ue.type === "session.created" && (this._tracingConfig = ue.session.tracing, this._updateTracingConfig(p.tracing ?? "auto")));
        });
        const S = this.options.audioElement ?? document.createElement("audio");
        S.autoplay = !0, f.ontrack = (oe) => {
          S.srcObject = oe.streams[0];
        };
        const w = this.options.mediaStream ?? await navigator.mediaDevices.getUserMedia({
          audio: !0
        });
        f.addTrack(w.getAudioTracks()[0]), this.options.changePeerConnection && (f = await this.options.changePeerConnection(f), y(this, G, { ...u(this, G), peerConnection: f }));
        const x = await f.createOffer();
        if (await f.setLocalDescription(x), !x.sdp)
          throw new Error("Failed to create offer");
        const O = {
          ...this._getMergedSessionConfig(p),
          model: this.currentModel
        }, R = new FormData();
        R.append("sdp", x.sdp), R.append("session", JSON.stringify(O));
        const Y = {
          type: "answer",
          sdp: await (await fetch(l, {
            method: "POST",
            body: R,
            headers: {
              Authorization: `Bearer ${a}`,
              "X-OpenAI-Agents-SDK": Oa["X-OpenAI-Agents-SDK"]
            }
          })).text()
        };
        await f.setRemoteDescription(Y);
      } catch (p) {
        this.close(), this._onError(p), c(p);
      }
    });
  }
  /**
   * Send an event to the Realtime API. This will stringify the event and send it directly to the
   * API. This can be used if you want to take control over the connection and send events manually.
   *
   * @param event - The event to send.
   */
  sendEvent(t) {
    if (!u(this, G).dataChannel || u(this, G).dataChannel.readyState !== "open")
      throw new Error("WebRTC data channel is not connected. Make sure you call `connect()` before sending events.");
    u(this, G).dataChannel.send(JSON.stringify(t));
  }
  /**
   * Mute or unmute the session.
   * @param muted - Whether to mute the session.
   */
  mute(t) {
    y(this, nn, t), u(this, G).peerConnection && u(this, G).peerConnection.getSenders().forEach((s) => {
      s.track && (s.track.enabled = !t);
    });
  }
  /**
   * Close the connection to the Realtime API and disconnects the underlying WebRTC connection.
   */
  close() {
    if (u(this, G).dataChannel && u(this, G).dataChannel.close(), u(this, G).peerConnection) {
      const t = u(this, G).peerConnection;
      t.getSenders().forEach((r) => {
        var s;
        (s = r.track) == null || s.stop();
      }), t.close();
    }
    u(this, G).status !== "disconnected" && (y(this, G, {
      status: "disconnected",
      peerConnection: void 0,
      dataChannel: void 0
    }), this.emit("connection_change", u(this, G).status), this._onClose());
  }
  /**
   * Interrupt the current response if one is ongoing and clear the audio buffer so that the agent
   * stops talking.
   */
  interrupt() {
    u(this, He) && (this.sendEvent({
      type: "response.cancel"
    }), y(this, He, !1)), this.sendEvent({
      type: "output_audio_buffer.clear"
    });
  }
}
en = new WeakMap(), G = new WeakMap(), tn = new WeakMap(), He = new WeakMap(), nn = new WeakMap();
const wc = globalThis.WebSocket;
var Ye, vt, X, rn, Oe, Xe, Qe, Dn, ya;
class xc extends _a {
  constructor(t = {}) {
    super(t);
    T(this, Dn);
    T(this, Ye);
    T(this, vt);
    T(this, X, {
      status: "disconnected",
      websocket: void 0
    });
    T(this, rn);
    T(this, Oe);
    T(this, Xe);
    /**
     * Timestamp maintained by the transport layer to aid with the calculation of the elapsed time
     * since the response started to compute the right interruption time.
     *
     * Mostly internal but might be used by extended transport layers for their interruption
     * calculation.
     */
    _(this, "_firstAudioTimestamp");
    _(this, "_audioLengthMs", 0);
    T(this, Qe, !1);
    y(this, vt, `wss://api.openai.com/v1/realtime?model=${this.currentModel}`), y(this, rn, t.useInsecureApiKey ?? !1);
  }
  /**
   * The current status of the WebSocket connection.
   */
  get status() {
    return u(this, X).status;
  }
  /**
   * The current connection state of the WebSocket connection.
   */
  get connectionState() {
    return u(this, X);
  }
  /**
   * Always returns `null` as the WebSocket transport layer does not handle muting. Instead,
   * this should be handled by the client by not triggering the `sendAudio` method.
   */
  get muted() {
    return null;
  }
  /**
   * The current item ID of the ongoing response.
   */
  get currentItemId() {
    return u(this, Oe);
  }
  /**
   * Triggers the `audio` event that a client might listen to to receive the audio buffer.
   * Protected for you to be able to override and disable emitting this event in case your extended
   * transport layer handles audio internally.
   *
   * @param audioEvent - The audio event to emit.
   */
  _onAudio(t) {
    this.emit("audio", t);
  }
  async connect(t) {
    const r = t.model ?? this.currentModel;
    this.currentModel = r, y(this, Ye, await this._getApiKey(t)), y(this, vt, t.url ?? `wss://api.openai.com/v1/realtime?model=${this.currentModel}`);
    const s = {
      ...t.initialSessionConfig || {},
      model: this.currentModel
    };
    await new Promise((a, i) => {
      try {
        $(this, Dn, ya).call(this, a, i, s);
      } catch (o) {
        i(o);
      }
    }), await this.updateSessionConfig(s);
  }
  /**
   * Send an event to the Realtime API. This will stringify the event and send it directly to the
   * API. This can be used if you want to take control over the connection and send events manually.
   *
   * @param event - The event to send.
   */
  sendEvent(t) {
    if (!u(this, X).websocket)
      throw new Error("WebSocket is not connected. Make sure you call `connect()` before sending events.");
    u(this, X).websocket.send(JSON.stringify(t));
  }
  /**
   * Close the WebSocket connection.
   *
   * This will also reset any internal connection tracking used for interruption handling.
   */
  close() {
    var t;
    (t = u(this, X).websocket) == null || t.close(), y(this, Oe, void 0), this._firstAudioTimestamp = void 0, this._audioLengthMs = 0, y(this, Xe, void 0);
  }
  /**
   * Will throw an error as the WebSocket transport layer does not support muting.
   */
  mute(t) {
    throw new Error("Mute is not supported for the WebSocket transport. You have to mute the audio input yourself.");
  }
  /**
   * Send an audio buffer to the Realtime API. This is used for your client to send audio to the
   * model to respond.
   *
   * @param audio - The audio buffer to send.
   * @param options - The options for the audio buffer.
   */
  sendAudio(t, r = {}) {
    u(this, X).status === "connected" && super.sendAudio(t, r);
  }
  /**
   * Send a cancel response event to the Realtime API. This is used to cancel an ongoing
   *  response that the model is currently generating.
   */
  _cancelResponse() {
    u(this, Qe) && (this.sendEvent({
      type: "response.cancel"
    }), y(this, Qe, !1));
  }
  /**
   * Do NOT call this method directly. Call `interrupt()` instead for proper interruption handling.
   *
   * This method is used to send the right events to the API to inform the model that the user has
   * interrupted the response. It might be overridden/extended by an extended transport layer. See
   * the `TwilioRealtimeTransportLayer` for an example.
   *
   * @param elapsedTime - The elapsed time since the response started.
   */
  _interrupt(t) {
    this.emit("audio_interrupted"), this.sendEvent({
      type: "conversation.item.truncate",
      item_id: u(this, Oe),
      content_index: u(this, Xe),
      audio_end_ms: t
    });
  }
  /**
   * Interrupt the ongoing response. This method is triggered automatically by the client when
   * voice activity detection (VAD) is enabled (default) as well as when an output guardrail got
   * triggered.
   *
   * You can also call this method directly if you want to interrupt the conversation for example
   * based on an event in the client.
   */
  interrupt() {
    if (!u(this, Oe) || typeof this._firstAudioTimestamp != "number")
      return;
    this._cancelResponse();
    const t = Date.now() - this._firstAudioTimestamp;
    t >= 0 && t < this._audioLengthMs && this._interrupt(t), y(this, Oe, void 0), this._firstAudioTimestamp = void 0, this._audioLengthMs = 0, y(this, Xe, void 0);
  }
}
Ye = new WeakMap(), vt = new WeakMap(), X = new WeakMap(), rn = new WeakMap(), Oe = new WeakMap(), Xe = new WeakMap(), Qe = new WeakMap(), Dn = new WeakSet(), ya = function(t, r, s) {
  if (u(this, X).websocket) {
    t();
    return;
  }
  if (!u(this, Ye))
    throw new Q("API key is not set. Please call `connect()` with an API key first.");
  if (!u(this, Ye).startsWith("ek_") && !u(this, rn))
    throw new Q("Using the WebSocket connection in a browser environment requires an ephemeral client key. If you have to use a regular API key, set the `useInsecureApiKey` option to true.");
  const a = [
    "realtime",
    // Auth
    "openai-insecure-api-key." + u(this, Ye),
    // Beta protocol, required
    "openai-beta.realtime-v1",
    // Version header
    Ea
  ], i = new wc(u(this, vt), a);
  y(this, X, {
    status: "connecting",
    websocket: i
  }), this.emit("connection_change", u(this, X).status), i.addEventListener("open", () => {
    y(this, X, {
      status: "connected",
      websocket: i
    }), this.emit("connection_change", u(this, X).status), this._onOpen(), t();
  }), i.addEventListener("error", (o) => {
    this._onError(o), y(this, X, {
      status: "disconnected",
      websocket: void 0
    }), this.emit("connection_change", u(this, X).status), r(o);
  }), i.addEventListener("message", (o) => {
    this._onMessage(o);
    const { data: c, isGeneric: p } = Er(o);
    if (!(!c || p))
      if (c.type === "response.audio.delta") {
        y(this, Xe, c.content_index), y(this, Oe, c.item_id), this._firstAudioTimestamp === void 0 && (this._firstAudioTimestamp = Date.now(), this._audioLengthMs = 0);
        const l = As(c.delta);
        this._audioLengthMs += l.byteLength / 24 / 2;
        const f = {
          type: "audio",
          data: l,
          responseId: c.response_id
        };
        this._onAudio(f);
      } else c.type === "input_audio_buffer.speech_started" ? this.interrupt() : c.type === "response.created" ? y(this, Qe, !0) : c.type === "response.done" ? y(this, Qe, !1) : c.type === "session.created" && (this._tracingConfig = c.session.tracing, this._updateTracingConfig(s.tracing ?? "auto"));
  }), i.addEventListener("close", () => {
    y(this, X, {
      status: "disconnected",
      websocket: void 0
    }), this.emit("connection_change", u(this, X).status), this._onClose();
  });
};
var L, Z, sn, j, wt, xt, an, W, on, bt, z, fn, hn, va, mn, wa, gr, xa;
class kc extends Pn {
  constructor(t, r = {}) {
    super();
    T(this, z);
    _(this, "initialAgent");
    _(this, "options");
    T(this, L);
    T(this, Z);
    T(this, sn, []);
    T(this, j);
    T(this, wt, []);
    T(this, xt);
    T(this, an, {});
    T(this, W, []);
    T(this, on);
    T(this, bt, {});
    this.initialAgent = t, this.options = r, typeof r.transport > "u" && Aa() || r.transport === "webrtc" ? y(this, L, new vc()) : r.transport === "websocket" || typeof r.transport > "u" ? y(this, L, new xc()) : y(this, L, r.transport), y(this, Z, t), y(this, j, new dt({
      ...r.context ?? {},
      history: u(this, W)
    })), y(this, wt, (r.outputGuardrails ?? []).map(Su)), y(this, xt, bu(r.outputGuardrailSettings ?? {})), y(this, on, r.historyStoreAudio ?? !1);
  }
  /**
   * The transport layer used by the session.
   */
  get transport() {
    return u(this, L);
  }
  /**
   * The current agent in the session.
   */
  get currentAgent() {
    return u(this, Z);
  }
  /**
   * The current usage of the session.
   */
  get usage() {
    return u(this, j).usage;
  }
  /**
   * The current context of the session.
   */
  get context() {
    return u(this, j);
  }
  /**
   * Whether the session is muted. Might be `null` if the underlying transport layer does not
   * support muting.
   */
  get muted() {
    return u(this, L).muted;
  }
  /**
   * The history of the session.
   */
  get history() {
    return u(this, W);
  }
  async updateAgent(t) {
    return u(this, Z).emit("agent_handoff", u(this, j), t), this.emit("agent_handoff", u(this, j), u(this, Z), t), await $(this, z, fn).call(this, t), await u(this, L).updateSessionConfig(await $(this, z, hn).call(this)), t;
  }
  /**
   * Connect to the session. This will establish the connection to the underlying transport layer
   * and start the session.
   *
   * After connecting, the session will also emit a `history_updated` event with an empty history.
   *
   * @param options - The options for the connection.
   */
  async connect(t) {
    await $(this, z, fn).call(this, this.initialAgent), $(this, z, xa).call(this), await u(this, L).connect({
      apiKey: t.apiKey ?? this.options.apiKey,
      model: this.options.model,
      initialSessionConfig: await $(this, z, hn).call(this, this.options.config)
    }), y(this, W, []), this.emit("history_updated", u(this, W));
  }
  /**
   * Update the history of the session.
   * @param newHistory - The new history to set.
   */
  updateHistory(t) {
    let r;
    typeof t == "function" ? r = t(u(this, W)) : r = t, u(this, L).resetHistory(u(this, W), r);
  }
  /**
   * Send a message to the session.
   * @param message - The message to send.
   * @param otherEventData - Additional event data to send.
   */
  sendMessage(t, r = {}) {
    u(this, L).sendMessage(t, r);
  }
  /**
   * Mute the session.
   * @param muted - Whether to mute the session.
   */
  mute(t) {
    u(this, L).mute(t);
  }
  /**
   * Disconnect from the session.
   */
  close() {
    y(this, bt, {}), u(this, L).close();
  }
  /**
   * Send audio to the session.
   * @param audio - The audio to send.
   * @param options - Additional options.
   * @param options.commit - Whether to finish the turn with this audio.
   */
  sendAudio(t, r = {}) {
    u(this, L).sendAudio(t, r);
  }
  /**
   * Interrupt the session artificially for example if you want to build a "stop talking"
   * button.
   */
  interrupt() {
    u(this, L).interrupt();
  }
  /**
   * Approve a tool call. This will also trigger the tool call to the agent.
   * @param approvalItem - The approval item to approve.
   * @param options - Additional options.
   * @param options.alwaysApprove - Whether to always approve the tool call.
   */
  async approve(t, r = { alwaysApprove: !1 }) {
    u(this, j).approveTool(t, r);
    const s = u(this, Z).tools.find((a) => a.name === t.rawItem.name);
    if (s && s.type === "function" && t.rawItem.type === "function_call")
      await $(this, z, mn).call(this, t.rawItem, s);
    else
      throw new fe(`Tool ${t.rawItem.name} not found`);
  }
  /**
   * Reject a tool call. This will also trigger the tool call to the agent.
   * @param approvalItem - The approval item to reject.
   * @param options - Additional options.
   * @param options.alwaysReject - Whether to always reject the tool call.
   */
  async reject(t, r = { alwaysReject: !1 }) {
    u(this, j).rejectTool(t, r);
    const s = u(this, Z).tools.find((a) => a.name === t.rawItem.name);
    if (s && s.type === "function" && t.rawItem.type === "function_call")
      await $(this, z, mn).call(this, t.rawItem, s);
    else
      throw new fe(`Tool ${t.rawItem.name} not found`);
  }
}
L = new WeakMap(), Z = new WeakMap(), sn = new WeakMap(), j = new WeakMap(), wt = new WeakMap(), xt = new WeakMap(), an = new WeakMap(), W = new WeakMap(), on = new WeakMap(), bt = new WeakMap(), z = new WeakSet(), fn = async function(t) {
  y(this, Z, t);
  const s = u(this, Z).handoffs.map(On).map((a) => a.getHandoffAsFunctionTool());
  y(this, sn, [
    ...(await u(this, Z).getAllTools()).filter((a) => a.type === "function"),
    ...s
  ]);
}, hn = async function(t = {}) {
  const r = await u(this, Z).getSystemPrompt(u(this, j)), s = this.options.tracingDisabled ? null : this.options.workflowName ? {
    workflow_name: this.options.workflowName
  } : "auto";
  return s !== null && s !== "auto" ? (this.options.groupId && (s.group_id = this.options.groupId), this.options.traceMetadata && (s.metadata = this.options.traceMetadata)) : (this.options.groupId || this.options.traceMetadata) && Ie.warn("In order to set traceMetadata or a groupId you need to specify a workflowName."), {
    instructions: r,
    voice: u(this, Z).voice,
    model: this.options.model,
    tools: u(this, sn),
    tracing: s,
    ...t
  };
}, va = async function(t, r) {
  const s = await r.onInvokeHandoff(u(this, j), t.arguments);
  u(this, Z).emit("agent_handoff", u(this, j), s), this.emit("agent_handoff", u(this, j), u(this, Z), s), await $(this, z, fn).call(this, s), await u(this, L).updateSessionConfig(await $(this, z, hn).call(this));
  const a = Hs(s);
  return u(this, L).sendFunctionCallOutput(t, a, !0), s;
}, mn = async function(t, r) {
  u(this, j).context.history = JSON.parse(JSON.stringify(u(this, W)));
  let s = t.arguments;
  if (r.parameters && (et(r.parameters) ? s = r.parameters.parse(s) : s = JSON.parse(s)), await r.needsApproval(u(this, j), s, t.callId)) {
    const c = this.context.isToolApproved({
      toolName: r.name,
      callId: t.callId
    });
    if (c === !1) {
      this.emit("agent_tool_start", u(this, j), u(this, Z), r), u(this, Z).emit("agent_tool_start", u(this, j), r);
      const p = "Tool execution was not approved.";
      u(this, L).sendFunctionCallOutput(t, p, !0), this.emit("agent_tool_end", u(this, j), u(this, Z), r, p), u(this, Z).emit("agent_tool_end", u(this, j), r, p);
      return;
    } else if (typeof c > "u") {
      this.emit("tool_approval_requested", u(this, j), u(this, Z), {
        type: "function_approval",
        tool: r,
        approvalItem: new Se(t, u(this, Z))
      });
      return;
    }
  }
  this.emit("agent_tool_start", u(this, j), u(this, Z), r), u(this, Z).emit("agent_tool_start", u(this, j), r), u(this, j).context.history = JSON.parse(JSON.stringify(u(this, W)));
  const i = await r.invoke(u(this, j), t.arguments), o = tt(i);
  u(this, L).sendFunctionCallOutput(t, o, !0), this.emit("agent_tool_end", u(this, j), u(this, Z), r, o), u(this, Z).emit("agent_tool_end", u(this, j), r, o);
}, wa = async function(t) {
  const r = new Map(u(this, Z).handoffs.map(On).map((i) => [i.toolName, i])), s = new Map((await u(this, Z).getAllTools()).map((i) => [i.name, i])), a = r.get(t.name);
  if (a)
    await $(this, z, va).call(this, t, a);
  else {
    const i = s.get(t.name);
    if (i && i.type === "function")
      await $(this, z, mn).call(this, t, i);
    else
      throw new fe(`Tool ${t.name} not found`);
  }
}, gr = async function(t, r) {
  if (u(this, wt).length === 0)
    return;
  const s = {
    agent: u(this, Z),
    agentOutput: t,
    context: u(this, j)
  }, i = (await Promise.all(u(this, wt).map((o) => o.run(s)))).find((o) => o.output.tripwireTriggered);
  if (i) {
    if (u(this, bt)[r])
      return;
    u(this, bt)[r] = !0;
    const o = new Qn(`Output guardrail triggered: ${JSON.stringify(i.output.outputInfo)}`, i);
    this.emit("guardrail_tripped", u(this, j), u(this, Z), o), this.interrupt();
    const c = Tu(i);
    this.sendMessage(c);
    return;
  }
}, xa = function() {
  u(this, L).on("*", (s) => {
    this.emit("transport_event", s);
  }), u(this, L).on("audio", (s) => {
    this.emit("audio", s);
  }), u(this, L).on("turn_started", () => {
    this.emit("agent_start", u(this, j), u(this, Z)), u(this, Z).emit("agent_start", u(this, j), u(this, Z));
  }), u(this, L).on("turn_done", (s) => {
    const a = s.response.output[s.response.output.length - 1], i = Os(a) ?? "";
    this.emit("agent_end", u(this, j), u(this, Z), i), u(this, Z).emit("agent_end", u(this, j), i), $(this, z, gr).call(this, i, s.response.id);
  }), u(this, L).on("audio_done", () => {
    this.emit("audio_stopped", u(this, j), u(this, Z));
  });
  let t = 0, r;
  u(this, L).on("audio_transcript_delta", (s) => {
    try {
      const a = s.delta, i = s.itemId, o = s.responseId;
      r !== i && (r = i, t = 0);
      const p = (u(this, an)[i] ?? "") + a;
      if (u(this, an)[i] = p, u(this, xt).debounceTextLength < 0)
        return;
      const l = Math.floor(p.length / u(this, xt).debounceTextLength);
      l > t && (t = l, $(this, z, gr).call(this, p, o));
    } catch (a) {
      this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, L).on("item_update", (s) => {
    try {
      const a = !u(this, W).some((i) => i.itemId === s.itemId);
      if (y(this, W, Ca(u(this, W), s, u(this, on))), u(this, j).context.history = u(this, W), a) {
        const i = u(this, W).find((o) => o.itemId === s.itemId);
        i && this.emit("history_added", i);
      }
      this.emit("history_updated", u(this, W));
    } catch (a) {
      this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, L).on("item_deleted", (s) => {
    try {
      y(this, W, u(this, W).filter((a) => a.itemId !== s.itemId)), u(this, j).context.history = u(this, W), this.emit("history_updated", u(this, W));
    } catch (a) {
      this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, L).on("function_call", async (s) => {
    try {
      await $(this, z, wa).call(this, s);
    } catch (a) {
      Ie.error("Error handling function call", a), this.emit("error", {
        type: "error",
        error: a
      });
    }
  }), u(this, L).on("usage_update", (s) => {
    u(this, j).usage.add(s);
  }), u(this, L).on("audio_interrupted", () => {
    this.emit("audio_interrupted", u(this, j), u(this, Z));
  }), u(this, L).on("error", (s) => {
    this.emit("error", s);
  });
};
const Ic = {
  base64ToArrayBuffer: As,
  arrayBufferToBase64: Cs,
  getLastTextFromAudioOutputMessage: Os
};
export {
  yc as DEFAULT_OPENAI_REALTIME_MODEL,
  Pe as DEFAULT_OPENAI_REALTIME_SESSION_CONFIG,
  fe as ModelBehaviorError,
  _a as OpenAIRealtimeBase,
  vc as OpenAIRealtimeWebRTC,
  xc as OpenAIRealtimeWebSocket,
  Qn as OutputGuardrailTripwireTriggered,
  Tc as RealtimeAgent,
  kc as RealtimeSession,
  Q as UserError,
  Kn as tool,
  Ic as utils
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BlbmFpLXJlYWx0aW1lLWFnZW50cy5tanMiLCJzb3VyY2VzIjpbIi4uL21ldGFkYXRhLm1qcyIsIi4uL3V0aWxzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc2FmZUV4ZWN1dGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9saWIvcGFyc2VyLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvT3B0aW9ucy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3V0aWwubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9SZWZzLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvZXJyb3JNZXNzYWdlcy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL2Rpc3QvZXNtL3YzL2hlbHBlcnMvdXRpbC5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy96b2QvZGlzdC9lc20vdjMvWm9kRXJyb3IuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvem9kL2Rpc3QvZXNtL3YzL2hlbHBlcnMvZXJyb3JVdGlsLmpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3pvZC9kaXN0L2VzbS92My90eXBlcy5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9hbnkubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2FycmF5Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9iaWdpbnQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2Jvb2xlYW4ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2JyYW5kZWQubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2NhdGNoLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9kYXRlLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9kZWZhdWx0Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9lZmZlY3RzLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9lbnVtLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9pbnRlcnNlY3Rpb24ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL2xpdGVyYWwubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3N0cmluZy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcmVjb3JkLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9tYXAubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL25hdGl2ZUVudW0ubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL25ldmVyLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9udWxsLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy91bmlvbi5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvbnVsbGFibGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL251bWJlci5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvb2JqZWN0Lm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9vcGVuYWkvX3ZlbmRvci96b2QtdG8tanNvbi1zY2hlbWEvcGFyc2Vycy9vcHRpb25hbC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcGlwZWxpbmUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3Byb21pc2UubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3NldC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdHVwbGUubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZXJzL3VuZGVmaW5lZC5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvdW5rbm93bi5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3BhcnNlcnMvcmVhZG9ubHkubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9wYXJzZURlZi5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL192ZW5kb3Ivem9kLXRvLWpzb24tc2NoZW1hL3pvZFRvSnNvblNjaGVtYS5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvb3BlbmFpL2xpYi9SZXNwb25zZXNQYXJzZXIubWpzIiwiLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL29wZW5haS9oZWxwZXJzL3pvZC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2Vycm9ycy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL3R5cGVHdWFyZHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy90b29scy5tanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvbXMvaW5kZXguanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvZGVidWcvc3JjL2NvbW1vbi5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9kZWJ1Zy9zcmMvYnJvd3Nlci5qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvY29uZmlnLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvbG9nZ2VyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdXRpbHMvc21hcnRTdHJpbmcubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90b29sLm1qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ab3BlbmFpL3pvZC9kaXN0L2VzbS92My9oZWxwZXJzL3V0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvWm9kRXJyb3IuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvbG9jYWxlcy9lbi5qcyIsIi4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9Ab3BlbmFpL3pvZC9kaXN0L2VzbS92My9lcnJvcnMuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvaGVscGVycy9wYXJzZVV0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvaGVscGVycy9lcnJvclV0aWwuanMiLCIuLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQG9wZW5haS96b2QvZGlzdC9lc20vdjMvdHlwZXMuanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L21jcC5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3NoaW1zL3NoaW1zLWJyb3dzZXIubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL2NvbnRleHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3Byb2Nlc3Nvci5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvdXRpbHMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3NwYW5zLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy90cmFjZXMubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC90cmFjaW5nL3Byb3ZpZGVyLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHJhY2luZy9jcmVhdGVTcGFucy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3RyYWNpbmcvaW5kZXgubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9saWZlY3ljbGUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ndWFyZHJhaWwubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9oYW5kb2ZmLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcHJvdmlkZXJzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvdHlwZXMvcHJvdG9jb2wubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91c2FnZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bkNvbnRleHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9yZXN1bHQubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC91dGlscy9zZXJpYWxpemUubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9pdGVtcy5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3V0aWxzL21lc3NhZ2VzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvZXZlbnRzLm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvcnVuSW1wbGVtZW50YXRpb24ubWpzIiwiLi4vLi4vLi4vYWdlbnRzLWNvcmUvZGlzdC9ydW5TdGF0ZS5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L3J1bi5tanMiLCIuLi8uLi8uLi9hZ2VudHMtY29yZS9kaXN0L2FnZW50Lm1qcyIsIi4uLy4uLy4uL2FnZW50cy1jb3JlL2Rpc3QvaW5kZXgubWpzIiwiLi4vcmVhbHRpbWVBZ2VudC5tanMiLCIuLi9ndWFyZHJhaWwubWpzIiwiLi4vbG9nZ2VyLm1qcyIsIi4uL2l0ZW1zLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lQmFzZS5tanMiLCIuLi9vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanMiLCIuLi9zaGltcy9zaGltcy1icm93c2VyLm1qcyIsIi4uL29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qcyIsIi4uL3JlYWx0aW1lU2Vzc2lvbi5tanMiLCIuLi9pbmRleC5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBmaWxlIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkXG5leHBvcnQgY29uc3QgTUVUQURBVEEgPSB7XG4gICAgXCJuYW1lXCI6IFwiQG9wZW5haS9hZ2VudHMtcmVhbHRpbWVcIixcbiAgICBcInZlcnNpb25cIjogXCIwLjAuN1wiLFxuICAgIFwidmVyc2lvbnNcIjoge1xuICAgICAgICBcIkBvcGVuYWkvYWdlbnRzLXJlYWx0aW1lXCI6IFwiMC4wLjdcIixcbiAgICAgICAgXCJAb3BlbmFpL2FnZW50cy1jb3JlXCI6IFwid29ya3NwYWNlOipcIixcbiAgICAgICAgXCJAb3BlbmFpL3pvZFwiOiBcIm5wbTp6b2RAXjMuMjUuNDBcIlxuICAgIH1cbn07XG5leHBvcnQgZGVmYXVsdCBNRVRBREFUQTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1ldGFkYXRhLm1qcy5tYXAiLCJpbXBvcnQgTUVUQURBVEEgZnJvbSBcIi4vbWV0YWRhdGEubWpzXCI7XG4vKipcbiAqIENvbnZlcnRzIGEgYmFzZTY0IHN0cmluZyB0byBhbiBBcnJheUJ1ZmZlclxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2U2NFxuICogQHJldHVybnMge0FycmF5QnVmZmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYmFzZTY0VG9BcnJheUJ1ZmZlcihiYXNlNjQpIHtcbiAgICBjb25zdCBiaW5hcnlTdHJpbmcgPSBhdG9iKGJhc2U2NCk7XG4gICAgY29uc3QgbGVuID0gYmluYXJ5U3RyaW5nLmxlbmd0aDtcbiAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGxlbik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBieXRlc1tpXSA9IGJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgICByZXR1cm4gYnl0ZXMuYnVmZmVyO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBhbiBBcnJheUJ1ZmZlciB0byBhIGJhc2U2NCBzdHJpbmdcbiAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGFycmF5QnVmZmVyXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlCdWZmZXJUb0Jhc2U2NChhcnJheUJ1ZmZlcikge1xuICAgIGNvbnN0IGJpbmFyeVN0cmluZyA9IFN0cmluZy5mcm9tQ2hhckNvZGUoLi4ubmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpKTtcbiAgICByZXR1cm4gYnRvYShiaW5hcnlTdHJpbmcpO1xufVxuLyoqXG4gKiBHZXQgdGhlIGxhc3QgdGV4dCBmcm9tIGFuIGF1ZGlvIG91dHB1dCBtZXNzYWdlXG4gKiBAcGFyYW0gaXRlbVxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZShpdGVtKSB7XG4gICAgaWYgKHR5cGVvZiBpdGVtID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBpdGVtID09PSBudWxsIHx8XG4gICAgICAgIHR5cGVvZiBpdGVtICE9PSAnb2JqZWN0JyB8fFxuICAgICAgICAhKCd0eXBlJyBpbiBpdGVtKSB8fFxuICAgICAgICB0eXBlb2YgaXRlbS50eXBlICE9PSAnc3RyaW5nJyB8fFxuICAgICAgICAhaXRlbS50eXBlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChpdGVtLnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoISgnY29udGVudCcgaW4gaXRlbSkgfHxcbiAgICAgICAgIUFycmF5LmlzQXJyYXkoaXRlbS5jb250ZW50KSB8fFxuICAgICAgICBpdGVtLmNvbnRlbnQubGVuZ3RoIDwgMSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdCBsYXN0Q29udGVudEl0ZW0gPSBpdGVtLmNvbnRlbnRbaXRlbS5jb250ZW50Lmxlbmd0aCAtIDFdO1xuICAgIGlmICghKCd0eXBlJyBpbiBsYXN0Q29udGVudEl0ZW0pIHx8XG4gICAgICAgIHR5cGVvZiBsYXN0Q29udGVudEl0ZW0udHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKGxhc3RDb250ZW50SXRlbS50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBsYXN0Q29udGVudEl0ZW0udGV4dCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gbGFzdENvbnRlbnRJdGVtLnRleHRcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAobGFzdENvbnRlbnRJdGVtLnR5cGUgPT09ICdhdWRpbycpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBsYXN0Q29udGVudEl0ZW0udHJhbnNjcmlwdCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gbGFzdENvbnRlbnRJdGVtLnRyYW5zY3JpcHRcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuLyoqXG4gKiBDb21wYXJlIHR3byBjb252ZXJzYXRpb24gaGlzdG9yaWVzIHRvIGRldGVybWluZSB0aGUgcmVtb3ZhbHMsIGFkZGl0aW9ucywgYW5kIHVwZGF0ZXMuXG4gKiBAcGFyYW0gb2xkSGlzdG9yeSAtIFRoZSBvbGQgaGlzdG9yeS5cbiAqIEBwYXJhbSBuZXdIaXN0b3J5IC0gVGhlIG5ldyBoaXN0b3J5LlxuICogQHJldHVybnMgQSBkaWZmIG9mIHRoZSB0d28gaGlzdG9yaWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlmZlJlYWx0aW1lSGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KSB7XG4gICAgY29uc3QgcmVtb3ZhbHMgPSBvbGRIaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gIW5ld0hpc3Rvcnkuc29tZSgobmV3SXRlbSkgPT4gbmV3SXRlbS5pdGVtSWQgPT09IGl0ZW0uaXRlbUlkKSk7XG4gICAgY29uc3QgYWRkaXRpb25zID0gbmV3SGlzdG9yeS5maWx0ZXIoKGl0ZW0pID0+ICFvbGRIaXN0b3J5LnNvbWUoKG9sZEl0ZW0pID0+IG9sZEl0ZW0uaXRlbUlkID09PSBpdGVtLml0ZW1JZCkpO1xuICAgIGNvbnN0IHVwZGF0ZXMgPSBuZXdIaXN0b3J5LmZpbHRlcigoaXRlbSkgPT4gb2xkSGlzdG9yeS5zb21lKChvbGRJdGVtKSA9PiBvbGRJdGVtLml0ZW1JZCA9PT0gaXRlbS5pdGVtSWQgJiZcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkob2xkSXRlbSkgIT09IEpTT04uc3RyaW5naWZ5KGl0ZW0pKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVtb3ZhbHMsXG4gICAgICAgIGFkZGl0aW9ucyxcbiAgICAgICAgdXBkYXRlcyxcbiAgICB9O1xufVxuLyoqXG4gKiBDaGVjayBpZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBXZWJSVEMuXG4gKiBAcmV0dXJucyBUcnVlIGlmIFdlYlJUQyBpcyBzdXBwb3J0ZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1dlYlJUQ1N1cHBvcnQoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGVvZiB3aW5kb3dbJ1JUQ1BlZXJDb25uZWN0aW9uJ10gIT09ICd1bmRlZmluZWQnO1xufVxuLyoqXG4gKiBSZW1vdmVzIHRoZSBhdWRpbyBkYXRhIGZyb20gYWxsIGNvbnRlbnQgaW4gYSBtZXNzYWdlIGJ5IHNldHRpbmcgaXQgdG8gbnVsbC5cbiAqIEBwYXJhbSBpdGVtXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQXVkaW9Gcm9tQ29udGVudChpdGVtKSB7XG4gICAgaWYgKGl0ZW0ucm9sZSA9PT0gJ3N5c3RlbScpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuICAgIGlmIChpdGVtLnJvbGUgPT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgY29udGVudDogaXRlbS5jb250ZW50Lm1hcCgoZW50cnkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZW50cnkudHlwZSA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uZW50cnksXG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVudHJ5O1xuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpdGVtLnJvbGUgPT09ICd1c2VyJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudC5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LnR5cGUgPT09ICdpbnB1dF9hdWRpbycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmVudHJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW86IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBlbnRyeTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gaXRlbTtcbn1cbi8qKlxuICogVXBkYXRlcyB0aGUgcmVhbHRpbWUgaGlzdG9yeSBhcnJheSBiYXNlZCBvbiB0aGUgaW5jb21pbmcgZXZlbnQgYW5kIG9wdGlvbnMuXG4gKiBAcGFyYW0gaGlzdG9yeSAtIFRoZSBjdXJyZW50IGhpc3RvcnkgYXJyYXkuXG4gKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gcHJvY2VzcyAoUmVhbHRpbWVJdGVtKS5cbiAqIEBwYXJhbSBzaG91bGRJbmNsdWRlQXVkaW9EYXRhIC0gV2hldGhlciB0byBpbmNsdWRlIGF1ZGlvIGRhdGEgaW4gbWVzc2FnZSBpdGVtcy5cbiAqIEByZXR1cm5zIFRoZSB1cGRhdGVkIGhpc3RvcnkgYXJyYXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVSZWFsdGltZUhpc3RvcnkoaGlzdG9yeSwgZXZlbnQsIHNob3VsZEluY2x1ZGVBdWRpb0RhdGEpIHtcbiAgICBjb25zdCBuZXdFdmVudCA9ICFzaG91bGRJbmNsdWRlQXVkaW9EYXRhICYmIGV2ZW50LnR5cGUgPT09ICdtZXNzYWdlJ1xuICAgICAgICA/IHJlbW92ZUF1ZGlvRnJvbUNvbnRlbnQoZXZlbnQpXG4gICAgICAgIDogZXZlbnQ7XG4gICAgY29uc3QgZXhpc3RpbmdJbmRleCA9IGhpc3RvcnkuZmluZEluZGV4KChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQuaXRlbUlkKTtcbiAgICBpZiAoZXhpc3RpbmdJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIGl0ZW1cbiAgICAgICAgcmV0dXJuIGhpc3RvcnkubWFwKChpdGVtLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGlmIChpZHggPT09IGV4aXN0aW5nSW5kZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3RXZlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXNob3VsZEluY2x1ZGVBdWRpb0RhdGEgJiYgaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVtb3ZlQXVkaW9Gcm9tQ29udGVudChpdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXZlbnQucHJldmlvdXNJdGVtSWQpIHtcbiAgICAgICAgLy8gSW5zZXJ0IGFmdGVyIHByZXZpb3VzSXRlbUlkIGlmIGZvdW5kLCBlbHNlIGF0IGVuZFxuICAgICAgICBjb25zdCBwcmV2SW5kZXggPSBoaXN0b3J5LmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50LnByZXZpb3VzSXRlbUlkKTtcbiAgICAgICAgaWYgKHByZXZJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgLi4uaGlzdG9yeS5zbGljZSgwLCBwcmV2SW5kZXggKyAxKSxcbiAgICAgICAgICAgICAgICBuZXdFdmVudCxcbiAgICAgICAgICAgICAgICAuLi5oaXN0b3J5LnNsaWNlKHByZXZJbmRleCArIDEpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbLi4uaGlzdG9yeSwgbmV3RXZlbnRdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gWy4uLmhpc3RvcnksIG5ld0V2ZW50XTtcbiAgICB9XG59XG4vKipcbiAqIFRoZSBoZWFkZXJzIHRvIHVzZSBmb3IgdGhlIFJlYWx0aW1lIEFQSS5cbiAqL1xuZXhwb3J0IGNvbnN0IEhFQURFUlMgPSB7XG4gICAgJ1VzZXItQWdlbnQnOiBgQWdlbnRzL0phdmFTY3JpcHQgJHtNRVRBREFUQS52ZXJzaW9ufWAsXG4gICAgJ1gtT3BlbkFJLUFnZW50cy1TREsnOiBgb3BlbmFpLWFnZW50cy1zZGsuJHtNRVRBREFUQS52ZXJzaW9ufWAsXG59O1xuLyoqXG4gKiBCcm93c2VyIHdlYnNvY2tldCBoZWFkZXJcbiAqL1xuZXhwb3J0IGNvbnN0IFdFQlNPQ0tFVF9NRVRBID0gYG9wZW5haS1hZ2VudHMtc2RrLiR7TUVUQURBVEEudmVyc2lvbn1gO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMubWpzLm1hcCIsImV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYWZlRXhlY3V0ZShmbikge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgYXdhaXQgZm4oKV07XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm4gW2Vycm9yLCBudWxsXTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zYWZlRXhlY3V0ZS5tanMubWFwIiwiaW1wb3J0IHsgQ29udGVudEZpbHRlckZpbmlzaFJlYXNvbkVycm9yLCBMZW5ndGhGaW5pc2hSZWFzb25FcnJvciwgT3BlbkFJRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0KHJlc3BvbnNlX2Zvcm1hdCwgcGFyc2VyKSB7XG4gICAgY29uc3Qgb2JqID0geyAuLi5yZXNwb25zZV9mb3JtYXQgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXJlc3BvbnNlLWZvcm1hdCcsXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgJHBhcnNlUmF3OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VyLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdChyZXNwb25zZV9mb3JtYXQsIHBhcnNlcikge1xuICAgIGNvbnN0IG9iaiA9IHsgLi4ucmVzcG9uc2VfZm9ybWF0IH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICRicmFuZDoge1xuICAgICAgICAgICAgdmFsdWU6ICdhdXRvLXBhcnNlYWJsZS1yZXNwb25zZS1mb3JtYXQnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdChyZXNwb25zZV9mb3JtYXQpIHtcbiAgICByZXR1cm4gcmVzcG9uc2VfZm9ybWF0Py5bJyRicmFuZCddID09PSAnYXV0by1wYXJzZWFibGUtcmVzcG9uc2UtZm9ybWF0Jztcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUGFyc2VhYmxlVG9vbCh0b29sLCB7IHBhcnNlciwgY2FsbGJhY2ssIH0pIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnRvb2wgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXRvb2wnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkY2FsbGJhY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBjYWxsYmFjayxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVUb29sKHRvb2wpIHtcbiAgICByZXR1cm4gdG9vbD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXRvb2wnO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG1heWJlUGFyc2VDaGF0Q29tcGxldGlvbihjb21wbGV0aW9uLCBwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNvbXBsZXRpb24sXG4gICAgICAgICAgICBjaG9pY2VzOiBjb21wbGV0aW9uLmNob2ljZXMubWFwKChjaG9pY2UpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4uY2hvaWNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY2hvaWNlLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgLi4uKGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMgP1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlQ2hhdENvbXBsZXRpb24oY29tcGxldGlvbiwgcGFyYW1zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUNoYXRDb21wbGV0aW9uKGNvbXBsZXRpb24sIHBhcmFtcykge1xuICAgIGNvbnN0IGNob2ljZXMgPSBjb21wbGV0aW9uLmNob2ljZXMubWFwKChjaG9pY2UpID0+IHtcbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uID09PSAnbGVuZ3RoJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IExlbmd0aEZpbmlzaFJlYXNvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNob2ljZS5maW5pc2hfcmVhc29uID09PSAnY29udGVudF9maWx0ZXInKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQ29udGVudEZpbHRlckZpbmlzaFJlYXNvbkVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmNob2ljZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAgICAgICAgICAuLi5jaG9pY2UubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAuLi4oY2hvaWNlLm1lc3NhZ2UudG9vbF9jYWxscyA/XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IGNob2ljZS5tZXNzYWdlLnRvb2xfY2FsbHM/Lm1hcCgodG9vbENhbGwpID0+IHBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkpID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgcGFyc2VkOiBjaG9pY2UubWVzc2FnZS5jb250ZW50ICYmICFjaG9pY2UubWVzc2FnZS5yZWZ1c2FsID9cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VSZXNwb25zZUZvcm1hdChwYXJhbXMsIGNob2ljZS5tZXNzYWdlLmNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHsgLi4uY29tcGxldGlvbiwgY2hvaWNlcyB9O1xufVxuZnVuY3Rpb24gcGFyc2VSZXNwb25zZUZvcm1hdChwYXJhbXMsIGNvbnRlbnQpIHtcbiAgICBpZiAocGFyYW1zLnJlc3BvbnNlX2Zvcm1hdD8udHlwZSAhPT0gJ2pzb25fc2NoZW1hJykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ/LnR5cGUgPT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgaWYgKCckcGFyc2VSYXcnIGluIHBhcmFtcy5yZXNwb25zZV9mb3JtYXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlX2Zvcm1hdCA9IHBhcmFtcy5yZXNwb25zZV9mb3JtYXQ7XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VfZm9ybWF0LiRwYXJzZVJhdyhjb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShjb250ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5mdW5jdGlvbiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgdG9vbENhbGwpIHtcbiAgICBjb25zdCBpbnB1dFRvb2wgPSBwYXJhbXMudG9vbHM/LmZpbmQoKGlucHV0VG9vbCkgPT4gaW5wdXRUb29sLmZ1bmN0aW9uPy5uYW1lID09PSB0b29sQ2FsbC5mdW5jdGlvbi5uYW1lKTtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi50b29sQ2FsbCxcbiAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgIC4uLnRvb2xDYWxsLmZ1bmN0aW9uLFxuICAgICAgICAgICAgcGFyc2VkX2FyZ3VtZW50czogaXNBdXRvUGFyc2FibGVUb29sKGlucHV0VG9vbCkgPyBpbnB1dFRvb2wuJHBhcnNlUmF3KHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cylcbiAgICAgICAgICAgICAgICA6IGlucHV0VG9vbD8uZnVuY3Rpb24uc3RyaWN0ID8gSlNPTi5wYXJzZSh0b29sQ2FsbC5mdW5jdGlvbi5hcmd1bWVudHMpXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRUb29sID0gcGFyYW1zLnRvb2xzPy5maW5kKChpbnB1dFRvb2wpID0+IGlucHV0VG9vbC5mdW5jdGlvbj8ubmFtZSA9PT0gdG9vbENhbGwuZnVuY3Rpb24ubmFtZSk7XG4gICAgcmV0dXJuIGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpIHx8IGlucHV0VG9vbD8uZnVuY3Rpb24uc3RyaWN0IHx8IGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGhhc0F1dG9QYXJzZWFibGVJbnB1dChwYXJhbXMpIHtcbiAgICBpZiAoaXNBdXRvUGFyc2FibGVSZXNwb25zZUZvcm1hdChwYXJhbXMucmVzcG9uc2VfZm9ybWF0KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIChwYXJhbXMudG9vbHM/LnNvbWUoKHQpID0+IGlzQXV0b1BhcnNhYmxlVG9vbCh0KSB8fCAodC50eXBlID09PSAnZnVuY3Rpb24nICYmIHQuZnVuY3Rpb24uc3RyaWN0ID09PSB0cnVlKSkgPz8gZmFsc2UpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRUb29scyh0b29scykge1xuICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scyA/PyBbXSkge1xuICAgICAgICBpZiAodG9vbC50eXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYEN1cnJlbnRseSBvbmx5IFxcYGZ1bmN0aW9uXFxgIHRvb2wgdHlwZXMgc3VwcG9ydCBhdXRvLXBhcnNpbmc7IFJlY2VpdmVkIFxcYCR7dG9vbC50eXBlfVxcYGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b29sLmZ1bmN0aW9uLnN0cmljdCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBUaGUgXFxgJHt0b29sLmZ1bmN0aW9uLm5hbWV9XFxgIHRvb2wgaXMgbm90IG1hcmtlZCB3aXRoIFxcYHN0cmljdDogdHJ1ZVxcYC4gT25seSBzdHJpY3QgZnVuY3Rpb24gdG9vbHMgY2FuIGJlIGF1dG8tcGFyc2VkYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJzZXIubWpzLm1hcCIsImV4cG9ydCBjb25zdCBpZ25vcmVPdmVycmlkZSA9IFN5bWJvbCgnTGV0IHpvZFRvSnNvblNjaGVtYSBkZWNpZGUgb24gd2hpY2ggcGFyc2VyIHRvIHVzZScpO1xuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgbmFtZTogdW5kZWZpbmVkLFxuICAgICRyZWZTdHJhdGVneTogJ3Jvb3QnLFxuICAgIGVmZmVjdFN0cmF0ZWd5OiAnaW5wdXQnLFxuICAgIHBpcGVTdHJhdGVneTogJ2FsbCcsXG4gICAgZGF0ZVN0cmF0ZWd5OiAnZm9ybWF0OmRhdGUtdGltZScsXG4gICAgbWFwU3RyYXRlZ3k6ICdlbnRyaWVzJyxcbiAgICBudWxsYWJsZVN0cmF0ZWd5OiAnZnJvbS10YXJnZXQnLFxuICAgIHJlbW92ZUFkZGl0aW9uYWxTdHJhdGVneTogJ3Bhc3N0aHJvdWdoJyxcbiAgICBkZWZpbml0aW9uUGF0aDogJ2RlZmluaXRpb25zJyxcbiAgICB0YXJnZXQ6ICdqc29uU2NoZW1hNycsXG4gICAgc3RyaWN0VW5pb25zOiBmYWxzZSxcbiAgICBlcnJvck1lc3NhZ2VzOiBmYWxzZSxcbiAgICBtYXJrZG93bkRlc2NyaXB0aW9uOiBmYWxzZSxcbiAgICBwYXR0ZXJuU3RyYXRlZ3k6ICdlc2NhcGUnLFxuICAgIGFwcGx5UmVnZXhGbGFnczogZmFsc2UsXG4gICAgZW1haWxTdHJhdGVneTogJ2Zvcm1hdDplbWFpbCcsXG4gICAgYmFzZTY0U3RyYXRlZ3k6ICdjb250ZW50RW5jb2Rpbmc6YmFzZTY0JyxcbiAgICBuYW1lU3RyYXRlZ3k6ICdyZWYnLFxufTtcbmV4cG9ydCBjb25zdCBnZXREZWZhdWx0T3B0aW9ucyA9IChvcHRpb25zKSA9PiB7XG4gICAgLy8gV2UgbmVlZCB0byBhZGQgYGRlZmluaXRpb25zYCBoZXJlIGFzIHdlIG1heSBtdXRhdGUgaXRcbiAgICByZXR1cm4gKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJyA/XG4gICAgICAgIHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgICAgICAgYmFzZVBhdGg6IFsnIyddLFxuICAgICAgICAgICAgZGVmaW5pdGlvbnM6IHt9LFxuICAgICAgICAgICAgbmFtZTogb3B0aW9ucyxcbiAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIC4uLmRlZmF1bHRPcHRpb25zLFxuICAgICAgICAgICAgYmFzZVBhdGg6IFsnIyddLFxuICAgICAgICAgICAgZGVmaW5pdGlvbnM6IHt9LFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T3B0aW9ucy5tanMubWFwIiwiZXhwb3J0IGNvbnN0IHpvZERlZiA9ICh6b2RTY2hlbWEpID0+IHtcbiAgICByZXR1cm4gJ19kZWYnIGluIHpvZFNjaGVtYSA/IHpvZFNjaGVtYS5fZGVmIDogem9kU2NoZW1hO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5T2JqKG9iaikge1xuICAgIGlmICghb2JqKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBmb3IgKGNvbnN0IF9rIGluIG9iailcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbC5tanMubWFwIiwiaW1wb3J0IHsgZ2V0RGVmYXVsdE9wdGlvbnMgfSBmcm9tIFwiLi9PcHRpb25zLm1qc1wiO1xuaW1wb3J0IHsgem9kRGVmIH0gZnJvbSBcIi4vdXRpbC5tanNcIjtcbmV4cG9ydCBjb25zdCBnZXRSZWZzID0gKG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCBfb3B0aW9ucyA9IGdldERlZmF1bHRPcHRpb25zKG9wdGlvbnMpO1xuICAgIGNvbnN0IGN1cnJlbnRQYXRoID0gX29wdGlvbnMubmFtZSAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgWy4uLl9vcHRpb25zLmJhc2VQYXRoLCBfb3B0aW9ucy5kZWZpbml0aW9uUGF0aCwgX29wdGlvbnMubmFtZV1cbiAgICAgICAgOiBfb3B0aW9ucy5iYXNlUGF0aDtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi5fb3B0aW9ucyxcbiAgICAgICAgY3VycmVudFBhdGg6IGN1cnJlbnRQYXRoLFxuICAgICAgICBwcm9wZXJ0eVBhdGg6IHVuZGVmaW5lZCxcbiAgICAgICAgc2VlblJlZnM6IG5ldyBTZXQoKSxcbiAgICAgICAgc2VlbjogbmV3IE1hcChPYmplY3QuZW50cmllcyhfb3B0aW9ucy5kZWZpbml0aW9ucykubWFwKChbbmFtZSwgZGVmXSkgPT4gW1xuICAgICAgICAgICAgem9kRGVmKGRlZiksXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGVmOiB6b2REZWYoZGVmKSxcbiAgICAgICAgICAgICAgICBwYXRoOiBbLi4uX29wdGlvbnMuYmFzZVBhdGgsIF9vcHRpb25zLmRlZmluaXRpb25QYXRoLCBuYW1lXSxcbiAgICAgICAgICAgICAgICAvLyBSZXNvbHV0aW9uIG9mIHJlZmVyZW5jZXMgd2lsbCBiZSBmb3JjZWQgZXZlbiB0aG91Z2ggc2Vlbiwgc28gaXQncyBvayB0aGF0IHRoZSBzY2hlbWEgaXMgdW5kZWZpbmVkIGhlcmUgZm9yIG5vdy5cbiAgICAgICAgICAgICAgICBqc29uU2NoZW1hOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdKSksXG4gICAgfTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWZzLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gYWRkRXJyb3JNZXNzYWdlKHJlcywga2V5LCBlcnJvck1lc3NhZ2UsIHJlZnMpIHtcbiAgICBpZiAoIXJlZnM/LmVycm9yTWVzc2FnZXMpXG4gICAgICAgIHJldHVybjtcbiAgICBpZiAoZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgIHJlcy5lcnJvck1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAuLi5yZXMuZXJyb3JNZXNzYWdlLFxuICAgICAgICAgICAgW2tleV06IGVycm9yTWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsIGtleSwgdmFsdWUsIGVycm9yTWVzc2FnZSwgcmVmcykge1xuICAgIHJlc1trZXldID0gdmFsdWU7XG4gICAgYWRkRXJyb3JNZXNzYWdlKHJlcywga2V5LCBlcnJvck1lc3NhZ2UsIHJlZnMpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JNZXNzYWdlcy5tanMubWFwIiwiZXhwb3J0IHZhciB1dGlsO1xuKGZ1bmN0aW9uICh1dGlsKSB7XG4gICAgdXRpbC5hc3NlcnRFcXVhbCA9IChfKSA9PiB7IH07XG4gICAgZnVuY3Rpb24gYXNzZXJ0SXMoX2FyZykgeyB9XG4gICAgdXRpbC5hc3NlcnRJcyA9IGFzc2VydElzO1xuICAgIGZ1bmN0aW9uIGFzc2VydE5ldmVyKF94KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cbiAgICB1dGlsLmFzc2VydE5ldmVyID0gYXNzZXJ0TmV2ZXI7XG4gICAgdXRpbC5hcnJheVRvRW51bSA9IChpdGVtcykgPT4ge1xuICAgICAgICBjb25zdCBvYmogPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICBvYmpbaXRlbV0gPSBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcbiAgICB1dGlsLmdldFZhbGlkRW51bVZhbHVlcyA9IChvYmopID0+IHtcbiAgICAgICAgY29uc3QgdmFsaWRLZXlzID0gdXRpbC5vYmplY3RLZXlzKG9iaikuZmlsdGVyKChrKSA9PiB0eXBlb2Ygb2JqW29ialtrXV0gIT09IFwibnVtYmVyXCIpO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGsgb2YgdmFsaWRLZXlzKSB7XG4gICAgICAgICAgICBmaWx0ZXJlZFtrXSA9IG9ialtrXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXRpbC5vYmplY3RWYWx1ZXMoZmlsdGVyZWQpO1xuICAgIH07XG4gICAgdXRpbC5vYmplY3RWYWx1ZXMgPSAob2JqKSA9PiB7XG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdEtleXMob2JqKS5tYXAoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBvYmpbZV07XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgdXRpbC5vYmplY3RLZXlzID0gdHlwZW9mIE9iamVjdC5rZXlzID09PSBcImZ1bmN0aW9uXCIgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgID8gKG9iaikgPT4gT2JqZWN0LmtleXMob2JqKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgOiAob2JqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBrZXlzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfTtcbiAgICB1dGlsLmZpbmQgPSAoYXJyLCBjaGVja2VyKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhcnIpIHtcbiAgICAgICAgICAgIGlmIChjaGVja2VyKGl0ZW0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICB1dGlsLmlzSW50ZWdlciA9IHR5cGVvZiBOdW1iZXIuaXNJbnRlZ2VyID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgPyAodmFsKSA9PiBOdW1iZXIuaXNJbnRlZ2VyKHZhbCkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgIDogKHZhbCkgPT4gdHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIiAmJiBOdW1iZXIuaXNGaW5pdGUodmFsKSAmJiBNYXRoLmZsb29yKHZhbCkgPT09IHZhbDtcbiAgICBmdW5jdGlvbiBqb2luVmFsdWVzKGFycmF5LCBzZXBhcmF0b3IgPSBcIiB8IFwiKSB7XG4gICAgICAgIHJldHVybiBhcnJheS5tYXAoKHZhbCkgPT4gKHR5cGVvZiB2YWwgPT09IFwic3RyaW5nXCIgPyBgJyR7dmFsfSdgIDogdmFsKSkuam9pbihzZXBhcmF0b3IpO1xuICAgIH1cbiAgICB1dGlsLmpvaW5WYWx1ZXMgPSBqb2luVmFsdWVzO1xuICAgIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyID0gKF8sIHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYmlnaW50XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xufSkodXRpbCB8fCAodXRpbCA9IHt9KSk7XG5leHBvcnQgdmFyIG9iamVjdFV0aWw7XG4oZnVuY3Rpb24gKG9iamVjdFV0aWwpIHtcbiAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzID0gKGZpcnN0LCBzZWNvbmQpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmZpcnN0LFxuICAgICAgICAgICAgLi4uc2Vjb25kLCAvLyBzZWNvbmQgb3ZlcndyaXRlcyBmaXJzdFxuICAgICAgICB9O1xuICAgIH07XG59KShvYmplY3RVdGlsIHx8IChvYmplY3RVdGlsID0ge30pKTtcbmV4cG9ydCBjb25zdCBab2RQYXJzZWRUeXBlID0gdXRpbC5hcnJheVRvRW51bShbXG4gICAgXCJzdHJpbmdcIixcbiAgICBcIm5hblwiLFxuICAgIFwibnVtYmVyXCIsXG4gICAgXCJpbnRlZ2VyXCIsXG4gICAgXCJmbG9hdFwiLFxuICAgIFwiYm9vbGVhblwiLFxuICAgIFwiZGF0ZVwiLFxuICAgIFwiYmlnaW50XCIsXG4gICAgXCJzeW1ib2xcIixcbiAgICBcImZ1bmN0aW9uXCIsXG4gICAgXCJ1bmRlZmluZWRcIixcbiAgICBcIm51bGxcIixcbiAgICBcImFycmF5XCIsXG4gICAgXCJvYmplY3RcIixcbiAgICBcInVua25vd25cIixcbiAgICBcInByb21pc2VcIixcbiAgICBcInZvaWRcIixcbiAgICBcIm5ldmVyXCIsXG4gICAgXCJtYXBcIixcbiAgICBcInNldFwiLFxuXSk7XG5leHBvcnQgY29uc3QgZ2V0UGFyc2VkVHlwZSA9IChkYXRhKSA9PiB7XG4gICAgY29uc3QgdCA9IHR5cGVvZiBkYXRhO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQ7XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN0cmluZztcbiAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgcmV0dXJuIE51bWJlci5pc05hTihkYXRhKSA/IFpvZFBhcnNlZFR5cGUubmFuIDogWm9kUGFyc2VkVHlwZS5udW1iZXI7XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5ib29sZWFuO1xuICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmZ1bmN0aW9uO1xuICAgICAgICBjYXNlIFwiYmlnaW50XCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5iaWdpbnQ7XG4gICAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN5bWJvbDtcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5hcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnRoZW4gJiYgdHlwZW9mIGRhdGEudGhlbiA9PT0gXCJmdW5jdGlvblwiICYmIGRhdGEuY2F0Y2ggJiYgdHlwZW9mIGRhdGEuY2F0Y2ggPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIE1hcCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubWFwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBTZXQgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgRGF0ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmRhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5vYmplY3Q7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS51bmtub3duO1xuICAgIH1cbn07XG4iLCJpbXBvcnQgeyB1dGlsIH0gZnJvbSBcIi4vaGVscGVycy91dGlsLmpzXCI7XG5leHBvcnQgY29uc3QgWm9kSXNzdWVDb2RlID0gdXRpbC5hcnJheVRvRW51bShbXG4gICAgXCJpbnZhbGlkX3R5cGVcIixcbiAgICBcImludmFsaWRfbGl0ZXJhbFwiLFxuICAgIFwiY3VzdG9tXCIsXG4gICAgXCJpbnZhbGlkX3VuaW9uXCIsXG4gICAgXCJpbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3JcIixcbiAgICBcImludmFsaWRfZW51bV92YWx1ZVwiLFxuICAgIFwidW5yZWNvZ25pemVkX2tleXNcIixcbiAgICBcImludmFsaWRfYXJndW1lbnRzXCIsXG4gICAgXCJpbnZhbGlkX3JldHVybl90eXBlXCIsXG4gICAgXCJpbnZhbGlkX2RhdGVcIixcbiAgICBcImludmFsaWRfc3RyaW5nXCIsXG4gICAgXCJ0b29fc21hbGxcIixcbiAgICBcInRvb19iaWdcIixcbiAgICBcImludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzXCIsXG4gICAgXCJub3RfbXVsdGlwbGVfb2ZcIixcbiAgICBcIm5vdF9maW5pdGVcIixcbl0pO1xuZXhwb3J0IGNvbnN0IHF1b3RlbGVzc0pzb24gPSAob2JqKSA9PiB7XG4gICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgMik7XG4gICAgcmV0dXJuIGpzb24ucmVwbGFjZSgvXCIoW15cIl0rKVwiOi9nLCBcIiQxOlwiKTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgZ2V0IGVycm9ycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNzdWVzO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcihpc3N1ZXMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pc3N1ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5hZGRJc3N1ZSA9IChzdWIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCBzdWJdO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFkZElzc3VlcyA9IChzdWJzID0gW10pID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCAuLi5zdWJzXTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYWN0dWFsUHJvdG8gPSBuZXcudGFyZ2V0LnByb3RvdHlwZTtcbiAgICAgICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBhY3R1YWxQcm90byk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9fcHJvdG9fXyA9IGFjdHVhbFByb3RvO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IFwiWm9kRXJyb3JcIjtcbiAgICAgICAgdGhpcy5pc3N1ZXMgPSBpc3N1ZXM7XG4gICAgfVxuICAgIGZvcm1hdChfbWFwcGVyKSB7XG4gICAgICAgIGNvbnN0IG1hcHBlciA9IF9tYXBwZXIgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChpc3N1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc3N1ZS5tZXNzYWdlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZmllbGRFcnJvcnMgPSB7IF9lcnJvcnM6IFtdIH07XG4gICAgICAgIGNvbnN0IHByb2Nlc3NFcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpc3N1ZSBvZiBlcnJvci5pc3N1ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3VuaW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWUudW5pb25FcnJvcnMubWFwKHByb2Nlc3NFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9yZXR1cm5fdHlwZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NFcnJvcihpc3N1ZS5yZXR1cm5UeXBlRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfYXJndW1lbnRzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0Vycm9yKGlzc3VlLmFyZ3VtZW50c0Vycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUucGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRFcnJvcnMuX2Vycm9ycy5wdXNoKG1hcHBlcihpc3N1ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnIgPSBmaWVsZEVycm9ycztcbiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaSA8IGlzc3VlLnBhdGgubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbCA9IGlzc3VlLnBhdGhbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXJtaW5hbCA9IGkgPT09IGlzc3VlLnBhdGgubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGVybWluYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAodHlwZW9mIGVsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9IGVsc2UgaWYgKHR5cGVvZiBlbCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY29uc3QgZXJyb3JBcnJheTogYW55ID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBlcnJvckFycmF5Ll9lcnJvcnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgZXJyb3JBcnJheTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXSA9IGN1cnJbZWxdIHx8IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyW2VsXS5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyID0gY3VycltlbF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHByb2Nlc3NFcnJvcih0aGlzKTtcbiAgICAgICAgcmV0dXJuIGZpZWxkRXJyb3JzO1xuICAgIH1cbiAgICBzdGF0aWMgYXNzZXJ0KHZhbHVlKSB7XG4gICAgICAgIGlmICghKHZhbHVlIGluc3RhbmNlb2YgWm9kRXJyb3IpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vdCBhIFpvZEVycm9yOiAke3ZhbHVlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlO1xuICAgIH1cbiAgICBnZXQgbWVzc2FnZSgpIHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMuaXNzdWVzLCB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlciwgMik7XG4gICAgfVxuICAgIGdldCBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc3N1ZXMubGVuZ3RoID09PSAwO1xuICAgIH1cbiAgICBmbGF0dGVuKG1hcHBlciA9IChpc3N1ZSkgPT4gaXNzdWUubWVzc2FnZSkge1xuICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHt9O1xuICAgICAgICBjb25zdCBmb3JtRXJyb3JzID0gW107XG4gICAgICAgIGZvciAoY29uc3Qgc3ViIG9mIHRoaXMuaXNzdWVzKSB7XG4gICAgICAgICAgICBpZiAoc3ViLnBhdGgubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXSA9IGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXSB8fCBbXTtcbiAgICAgICAgICAgICAgICBmaWVsZEVycm9yc1tzdWIucGF0aFswXV0ucHVzaChtYXBwZXIoc3ViKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtRXJyb3JzLnB1c2gobWFwcGVyKHN1YikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IGZvcm1FcnJvcnMsIGZpZWxkRXJyb3JzIH07XG4gICAgfVxuICAgIGdldCBmb3JtRXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mbGF0dGVuKCk7XG4gICAgfVxufVxuWm9kRXJyb3IuY3JlYXRlID0gKGlzc3VlcykgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGlzc3Vlcyk7XG4gICAgcmV0dXJuIGVycm9yO1xufTtcbiIsImV4cG9ydCB2YXIgZXJyb3JVdGlsO1xuKGZ1bmN0aW9uIChlcnJvclV0aWwpIHtcbiAgICBlcnJvclV0aWwuZXJyVG9PYmogPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2UgfSA6IG1lc3NhZ2UgfHwge307XG4gICAgLy8gYmlvbWUtaWdub3JlIGxpbnQ6XG4gICAgZXJyb3JVdGlsLnRvU3RyaW5nID0gKG1lc3NhZ2UpID0+IHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8gbWVzc2FnZSA6IG1lc3NhZ2U/Lm1lc3NhZ2U7XG59KShlcnJvclV0aWwgfHwgKGVycm9yVXRpbCA9IHt9KSk7XG4iLCJpbXBvcnQgeyBab2RFcnJvciwgWm9kSXNzdWVDb2RlLCB9IGZyb20gXCIuL1pvZEVycm9yLmpzXCI7XG5pbXBvcnQgeyBkZWZhdWx0RXJyb3JNYXAsIGdldEVycm9yTWFwIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgeyBlcnJvclV0aWwgfSBmcm9tIFwiLi9oZWxwZXJzL2Vycm9yVXRpbC5qc1wiO1xuaW1wb3J0IHsgRElSVFksIElOVkFMSUQsIE9LLCBQYXJzZVN0YXR1cywgYWRkSXNzdWVUb0NvbnRleHQsIGlzQWJvcnRlZCwgaXNBc3luYywgaXNEaXJ0eSwgaXNWYWxpZCwgbWFrZUlzc3VlLCB9IGZyb20gXCIuL2hlbHBlcnMvcGFyc2VVdGlsLmpzXCI7XG5pbXBvcnQgeyB1dGlsLCBab2RQYXJzZWRUeXBlLCBnZXRQYXJzZWRUeXBlIH0gZnJvbSBcIi4vaGVscGVycy91dGlsLmpzXCI7XG5jbGFzcyBQYXJzZUlucHV0TGF6eVBhdGgge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgdmFsdWUsIHBhdGgsIGtleSkge1xuICAgICAgICB0aGlzLl9jYWNoZWRQYXRoID0gW107XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLmRhdGEgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fcGF0aCA9IHBhdGg7XG4gICAgICAgIHRoaXMuX2tleSA9IGtleTtcbiAgICB9XG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGVkUGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuX2tleSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZWRQYXRoLnB1c2goLi4udGhpcy5fcGF0aCwgLi4udGhpcy5fa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCB0aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRQYXRoO1xuICAgIH1cbn1cbmNvbnN0IGhhbmRsZVJlc3VsdCA9IChjdHgsIHJlc3VsdCkgPT4ge1xuICAgIGlmIChpc1ZhbGlkKHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0LnZhbHVlIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoIWN0eC5jb21tb24uaXNzdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmFsaWRhdGlvbiBmYWlsZWQgYnV0IG5vIGlzc3VlcyBkZXRlY3RlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0IGVycm9yKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9lcnJvcilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKGN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9lcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxufTtcbmZ1bmN0aW9uIHByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICBjb25zdCB7IGVycm9yTWFwLCBpbnZhbGlkX3R5cGVfZXJyb3IsIHJlcXVpcmVkX2Vycm9yLCBkZXNjcmlwdGlvbiB9ID0gcGFyYW1zO1xuICAgIGlmIChlcnJvck1hcCAmJiAoaW52YWxpZF90eXBlX2Vycm9yIHx8IHJlcXVpcmVkX2Vycm9yKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IHVzZSBcImludmFsaWRfdHlwZV9lcnJvclwiIG9yIFwicmVxdWlyZWRfZXJyb3JcIiBpbiBjb25qdW5jdGlvbiB3aXRoIGN1c3RvbSBlcnJvciBtYXAuYCk7XG4gICAgfVxuICAgIGlmIChlcnJvck1hcClcbiAgICAgICAgcmV0dXJuIHsgZXJyb3JNYXA6IGVycm9yTWFwLCBkZXNjcmlwdGlvbiB9O1xuICAgIGNvbnN0IGN1c3RvbU1hcCA9IChpc3MsIGN0eCkgPT4ge1xuICAgICAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IHBhcmFtcztcbiAgICAgICAgaWYgKGlzcy5jb2RlID09PSBcImludmFsaWRfZW51bV92YWx1ZVwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGN0eC5kYXRhID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IHJlcXVpcmVkX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNzLmNvZGUgIT09IFwiaW52YWxpZF90eXBlXCIpXG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gaW52YWxpZF90eXBlX2Vycm9yID8/IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICB9O1xuICAgIHJldHVybiB7IGVycm9yTWFwOiBjdXN0b21NYXAsIGRlc2NyaXB0aW9uIH07XG59XG5leHBvcnQgY2xhc3MgWm9kVHlwZSB7XG4gICAgZ2V0IGRlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBfZ2V0VHlwZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKTtcbiAgICB9XG4gICAgX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpIHtcbiAgICAgICAgcmV0dXJuIChjdHggfHwge1xuICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgZGF0YTogaW5wdXQuZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGF0aDogaW5wdXQucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBuZXcgUGFyc2VTdGF0dXMoKSxcbiAgICAgICAgICAgIGN0eDoge1xuICAgICAgICAgICAgICAgIGNvbW1vbjogaW5wdXQucGFyZW50LmNvbW1vbixcbiAgICAgICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX3BhcnNlU3luYyhpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5bmNocm9ub3VzIHBhcnNlIGVuY291bnRlcmVkIHByb21pc2UuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIF9wYXJzZUFzeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgIH1cbiAgICBwYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zYWZlUGFyc2UoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIHNhZmVQYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogcGFyYW1zPy5hc3luYyA/PyBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZVN5bmMoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICBcIn52YWxpZGF0ZVwiKGRhdGEpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBhc3luYzogISF0aGlzW1wifnN0YW5kYXJkXCJdLmFzeW5jLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdGg6IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIXRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2VTeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkKHJlc3VsdClcbiAgICAgICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyPy5tZXNzYWdlPy50b0xvd2VyQ2FzZSgpPy5pbmNsdWRlcyhcImVuY291bnRlcmVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNbXCJ+c3RhbmRhcmRcIl0uYXN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdHguY29tbW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJzZUFzeW5jKHsgZGF0YSwgcGF0aDogW10sIHBhcmVudDogY3R4IH0pLnRoZW4oKHJlc3VsdCkgPT4gaXNWYWxpZChyZXN1bHQpXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBjdHguY29tbW9uLmlzc3VlcyxcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcyk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcylcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbiAgICBhc3luYyBzYWZlUGFyc2VBc3luYyhkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0ge1xuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICBjb250ZXh0dWFsRXJyb3JNYXA6IHBhcmFtcz8uZXJyb3JNYXAsXG4gICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcGF0aDogcGFyYW1zPy5wYXRoIHx8IFtdLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGRhdGEpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBtYXliZUFzeW5jUmVzdWx0ID0gdGhpcy5fcGFyc2UoeyBkYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IChpc0FzeW5jKG1heWJlQXN5bmNSZXN1bHQpID8gbWF5YmVBc3luY1Jlc3VsdCA6IFByb21pc2UucmVzb2x2ZShtYXliZUFzeW5jUmVzdWx0KSk7XG4gICAgICAgIHJldHVybiBoYW5kbGVSZXN1bHQoY3R4LCByZXN1bHQpO1xuICAgIH1cbiAgICByZWZpbmUoY2hlY2ssIG1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZ2V0SXNzdWVQcm9wZXJ0aWVzID0gKHZhbCkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBtZXNzYWdlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1lc3NhZ2UgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXNzYWdlKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZmluZW1lbnQoKHZhbCwgY3R4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBjaGVjayh2YWwpO1xuICAgICAgICAgICAgY29uc3Qgc2V0RXJyb3IgPSAoKSA9PiBjdHguYWRkSXNzdWUoe1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5jdXN0b20sXG4gICAgICAgICAgICAgICAgLi4uZ2V0SXNzdWVQcm9wZXJ0aWVzKHZhbCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiByZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHNldEVycm9yKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZWZpbmVtZW50KGNoZWNrLCByZWZpbmVtZW50RGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudCgodmFsLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGlmICghY2hlY2sodmFsKSkge1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh0eXBlb2YgcmVmaW5lbWVudERhdGEgPT09IFwiZnVuY3Rpb25cIiA/IHJlZmluZW1lbnREYXRhKHZhbCwgY3R4KSA6IHJlZmluZW1lbnREYXRhKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9yZWZpbmVtZW50KHJlZmluZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInJlZmluZW1lbnRcIiwgcmVmaW5lbWVudCB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3VwZXJSZWZpbmUocmVmaW5lbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVmaW5lbWVudChyZWZpbmVtZW50KTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZGVmKSB7XG4gICAgICAgIC8qKiBBbGlhcyBvZiBzYWZlUGFyc2VBc3luYyAqL1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc2FmZVBhcnNlQXN5bmM7XG4gICAgICAgIHRoaXMuX2RlZiA9IGRlZjtcbiAgICAgICAgdGhpcy5wYXJzZSA9IHRoaXMucGFyc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2UgPSB0aGlzLnNhZmVQYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBhcnNlQXN5bmMgPSB0aGlzLnBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2VBc3luYyA9IHRoaXMuc2FmZVBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zcGEgPSB0aGlzLnNwYS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlZmluZSA9IHRoaXMucmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lbWVudCA9IHRoaXMucmVmaW5lbWVudC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN1cGVyUmVmaW5lID0gdGhpcy5zdXBlclJlZmluZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9wdGlvbmFsID0gdGhpcy5vcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxhYmxlID0gdGhpcy5udWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxpc2ggPSB0aGlzLm51bGxpc2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hcnJheSA9IHRoaXMuYXJyYXkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gdGhpcy5wcm9taXNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3IgPSB0aGlzLm9yLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYW5kID0gdGhpcy5hbmQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0aGlzLnRyYW5zZm9ybS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmJyYW5kID0gdGhpcy5icmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlZmF1bHQgPSB0aGlzLmRlZmF1bHQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jYXRjaCA9IHRoaXMuY2F0Y2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZXNjcmliZSA9IHRoaXMuZGVzY3JpYmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5waXBlID0gdGhpcy5waXBlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSB0aGlzLnJlYWRvbmx5LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNOdWxsYWJsZSA9IHRoaXMuaXNOdWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmlzT3B0aW9uYWwgPSB0aGlzLmlzT3B0aW9uYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpc1tcIn5zdGFuZGFyZFwiXSA9IHtcbiAgICAgICAgICAgIHZlcnNpb246IDEsXG4gICAgICAgICAgICB2ZW5kb3I6IFwiem9kXCIsXG4gICAgICAgICAgICB2YWxpZGF0ZTogKGRhdGEpID0+IHRoaXNbXCJ+dmFsaWRhdGVcIl0oZGF0YSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIG9wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gWm9kT3B0aW9uYWwuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gWm9kTnVsbGFibGUuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxpc2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm51bGxhYmxlKCkub3B0aW9uYWwoKTtcbiAgICB9XG4gICAgYXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBab2RBcnJheS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIHByb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBab2RQcm9taXNlLmNyZWF0ZSh0aGlzLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBvcihvcHRpb24pIHtcbiAgICAgICAgcmV0dXJuIFpvZFVuaW9uLmNyZWF0ZShbdGhpcywgb3B0aW9uXSwgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgYW5kKGluY29taW5nKSB7XG4gICAgICAgIHJldHVybiBab2RJbnRlcnNlY3Rpb24uY3JlYXRlKHRoaXMsIGluY29taW5nLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICB0cmFuc2Zvcm0odHJhbnNmb3JtKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBzY2hlbWE6IHRoaXMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJ0cmFuc2Zvcm1cIiwgdHJhbnNmb3JtIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZWZhdWx0KGRlZikge1xuICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBkZWZhdWx0VmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYnJhbmQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQnJhbmRlZCh7XG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJyYW5kZWQsXG4gICAgICAgICAgICB0eXBlOiB0aGlzLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2goZGVmKSB7XG4gICAgICAgIGNvbnN0IGNhdGNoVmFsdWVGdW5jID0gdHlwZW9mIGRlZiA9PT0gXCJmdW5jdGlvblwiID8gZGVmIDogKCkgPT4gZGVmO1xuICAgICAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIGlubmVyVHlwZTogdGhpcyxcbiAgICAgICAgICAgIGNhdGNoVmFsdWU6IGNhdGNoVmFsdWVGdW5jLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlc2NyaWJlKGRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IFRoaXMgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICByZXR1cm4gbmV3IFRoaXMoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgZGVzY3JpcHRpb24sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaXBlKHRhcmdldCkge1xuICAgICAgICByZXR1cm4gWm9kUGlwZWxpbmUuY3JlYXRlKHRoaXMsIHRhcmdldCk7XG4gICAgfVxuICAgIHJlYWRvbmx5KCkge1xuICAgICAgICByZXR1cm4gWm9kUmVhZG9ubHkuY3JlYXRlKHRoaXMpO1xuICAgIH1cbiAgICBpc09wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UodW5kZWZpbmVkKS5zdWNjZXNzO1xuICAgIH1cbiAgICBpc051bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYWZlUGFyc2UobnVsbCkuc3VjY2VzcztcbiAgICB9XG59XG5jb25zdCBjdWlkUmVnZXggPSAvXmNbXlxccy1dezgsfSQvaTtcbmNvbnN0IGN1aWQyUmVnZXggPSAvXlswLTlhLXpdKyQvO1xuY29uc3QgdWxpZFJlZ2V4ID0gL15bMC05QS1ISktNTlAtVFYtWl17MjZ9JC9pO1xuLy8gY29uc3QgdXVpZFJlZ2V4ID1cbi8vICAgL14oW2EtZjAtOV17OH0tW2EtZjAtOV17NH0tWzEtNV1bYS1mMC05XXszfS1bYS1mMC05XXs0fS1bYS1mMC05XXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTtcbmNvbnN0IHV1aWRSZWdleCA9IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC9pO1xuY29uc3QgbmFub2lkUmVnZXggPSAvXlthLXowLTlfLV17MjF9JC9pO1xuY29uc3Qgand0UmVnZXggPSAvXltBLVphLXowLTktX10rXFwuW0EtWmEtejAtOS1fXStcXC5bQS1aYS16MC05LV9dKiQvO1xuY29uc3QgZHVyYXRpb25SZWdleCA9IC9eWy0rXT9QKD8hJCkoPzooPzpbLStdP1xcZCtZKXwoPzpbLStdP1xcZCtbLixdXFxkK1kkKSk/KD86KD86Wy0rXT9cXGQrTSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtNJCkpPyg/Oig/OlstK10/XFxkK1cpfCg/OlstK10/XFxkK1suLF1cXGQrVyQpKT8oPzooPzpbLStdP1xcZCtEKXwoPzpbLStdP1xcZCtbLixdXFxkK0QkKSk/KD86VCg/PVtcXGQrLV0pKD86KD86Wy0rXT9cXGQrSCl8KD86Wy0rXT9cXGQrWy4sXVxcZCtIJCkpPyg/Oig/OlstK10/XFxkK00pfCg/OlstK10/XFxkK1suLF1cXGQrTSQpKT8oPzpbLStdP1xcZCsoPzpbLixdXFxkKyk/Uyk/KT8/JC87XG4vLyBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80NjE4MS8xNTUwMTU1XG4vLyBvbGQgdmVyc2lvbjogdG9vIHNsb3csIGRpZG4ndCBzdXBwb3J0IHVuaWNvZGVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPSAvXigoKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSsoXFwuKFthLXpdfFxcZHxbISNcXCQlJidcXCpcXCtcXC1cXC89XFw/XFxeX2B7XFx8fX5dfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSspKil8KChcXHgyMikoKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPygoW1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4N2ZdfFxceDIxfFtcXHgyMy1cXHg1Yl18W1xceDVkLVxceDdlXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KFxcXFwoW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBkLVxceDdmXXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKSkqKCgoXFx4MjB8XFx4MDkpKihcXHgwZFxceDBhKSk/KFxceDIwfFxceDA5KSspPyhcXHgyMikpKUAoKChbYS16XXxcXGR8W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpXFwuKSsoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKShbYS16XXxcXGR8LXxcXC58X3x+fFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSooW2Etel18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkkL2k7XG4vL29sZCBlbWFpbCByZWdleFxuLy8gY29uc3QgZW1haWxSZWdleCA9IC9eKChbXjw+KClbXFxdLiw7Olxcc0BcIl0rKFxcLltePD4oKVtcXF0uLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoPyEtKShbXjw+KClbXFxdLiw7Olxcc0BcIl0rXFwuKStbXjw+KClbXFxdLiw7Olxcc0BcIl17MSx9KVteLTw+KClbXFxdLiw7Olxcc0BcIl0kL2k7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXigoW148PigpW1xcXVxcXFwuLDs6XFxzQFxcXCJdKyhcXC5bXjw+KClbXFxdXFxcXC4sOzpcXHNAXFxcIl0rKSopfChcXFwiLitcXFwiKSlAKChcXFsoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXF0pfChcXFtJUHY2OigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSlcXF0pfChbQS1aYS16MC05XShbQS1aYS16MC05LV0qW0EtWmEtejAtOV0pKihcXC5bQS1aYS16XXsyLH0pKykpJC87XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16QS1aMC05XFwuXFwhXFwjXFwkXFwlXFwmXFwnXFwqXFwrXFwvXFw9XFw/XFxeXFxfXFxgXFx7XFx8XFx9XFx+XFwtXStAW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XFwuW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KSokLztcbi8vIGNvbnN0IGVtYWlsUmVnZXggPVxuLy8gICAvXig/OlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXC5bYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKSp8XCIoPzpbXFx4MDEtXFx4MDhcXHgwYlxceDBjXFx4MGUtXFx4MWZcXHgyMVxceDIzLVxceDViXFx4NWQtXFx4N2ZdfFxcXFxbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGUtXFx4N2ZdKSpcIilAKD86KD86W2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP1xcLikrW2EtejAtOV0oPzpbYS16MC05LV0qW2EtejAtOV0pP3xcXFsoPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldP3xbYS16MC05LV0qW2EtejAtOV06KD86W1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4MjEtXFx4NWFcXHg1My1cXHg3Zl18XFxcXFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZS1cXHg3Zl0pKylcXF0pJC9pO1xuY29uc3QgZW1haWxSZWdleCA9IC9eKD8hXFwuKSg/IS4qXFwuXFwuKShbQS1aMC05XycrXFwtXFwuXSopW0EtWjAtOV8rLV1AKFtBLVowLTldW0EtWjAtOVxcLV0qXFwuKStbQS1aXXsyLH0kL2k7XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL15bYS16MC05LiEjJCUm4oCZKisvPT9eX2B7fH1+LV0rQFthLXowLTktXSsoPzpcXC5bYS16MC05XFwtXSspKiQvaTtcbi8vIGZyb20gaHR0cHM6Ly90aGVrZXZpbnNjb3R0LmNvbS9lbW9qaXMtaW4tamF2YXNjcmlwdC8jd3JpdGluZy1hLXJlZ3VsYXItZXhwcmVzc2lvblxuY29uc3QgX2Vtb2ppUmVnZXggPSBgXihcXFxccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9fFxcXFxwe0Vtb2ppX0NvbXBvbmVudH0pKyRgO1xubGV0IGVtb2ppUmVnZXg7XG4vLyBmYXN0ZXIsIHNpbXBsZXIsIHNhZmVyXG5jb25zdCBpcHY0UmVnZXggPSAvXig/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKSQvO1xuY29uc3QgaXB2NENpZHJSZWdleCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwvKDNbMC0yXXxbMTJdP1swLTldKSQvO1xuLy8gY29uc3QgaXB2NlJlZ2V4ID1cbi8vIC9eKChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKSQvO1xuY29uc3QgaXB2NlJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpJC87XG5jb25zdCBpcHY2Q2lkclJlZ2V4ID0gL14oKFswLTlhLWZBLUZdezEsNH06KXs3LDd9WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsN306fChbMC05YS1mQS1GXXsxLDR9Oil7MSw2fTpbMC05YS1mQS1GXXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSw1fSg6WzAtOWEtZkEtRl17MSw0fSl7MSwyfXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH0oOlswLTlhLWZBLUZdezEsNH0pezEsM318KFswLTlhLWZBLUZdezEsNH06KXsxLDN9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDR9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwyfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw1fXxbMC05YS1mQS1GXXsxLDR9OigoOlswLTlhLWZBLUZdezEsNH0pezEsNn0pfDooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDd9fDopfGZlODA6KDpbMC05YS1mQS1GXXswLDR9KXswLDR9JVswLTlhLXpBLVpdezEsfXw6OihmZmZmKDowezEsNH0pezAsMX06KXswLDF9KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pfChbMC05YS1mQS1GXXsxLDR9Oil7MSw0fTooKDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKVxcLil7MywzfSgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSkpXFwvKDEyWzAtOF18MVswMV1bMC05XXxbMS05XT9bMC05XSkkLztcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzc4NjAzOTIvZGV0ZXJtaW5lLWlmLXN0cmluZy1pcy1pbi1iYXNlNjQtdXNpbmctamF2YXNjcmlwdFxuY29uc3QgYmFzZTY0UmVnZXggPSAvXihbMC05YS16QS1aKy9dezR9KSooKFswLTlhLXpBLVorL117Mn09PSl8KFswLTlhLXpBLVorL117M309KSk/JC87XG4vLyBodHRwczovL2Jhc2U2NC5ndXJ1L3N0YW5kYXJkcy9iYXNlNjR1cmxcbmNvbnN0IGJhc2U2NHVybFJlZ2V4ID0gL14oWzAtOWEtekEtWi1fXXs0fSkqKChbMC05YS16QS1aLV9dezJ9KD09KT8pfChbMC05YS16QS1aLV9dezN9KD0pPykpPyQvO1xuLy8gc2ltcGxlXG4vLyBjb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgXFxcXGR7NH0tXFxcXGR7Mn0tXFxcXGR7Mn1gO1xuLy8gbm8gbGVhcCB5ZWFyIHZhbGlkYXRpb25cbi8vIGNvbnN0IGRhdGVSZWdleFNvdXJjZSA9IGBcXFxcZHs0fS0oKDBbMTM1NzhdfDEwfDEyKS0zMXwoMFsxMy05XXwxWzAtMl0pLTMwfCgwWzEtOV18MVswLTJdKS0oMFsxLTldfDFcXFxcZHwyXFxcXGQpKWA7XG4vLyB3aXRoIGxlYXAgeWVhciB2YWxpZGF0aW9uXG5jb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgKChcXFxcZFxcXFxkWzI0NjhdWzA0OF18XFxcXGRcXFxcZFsxMzU3OV1bMjZdfFxcXFxkXFxcXGQwWzQ4XXxbMDI0NjhdWzA0OF0wMHxbMTM1NzldWzI2XTAwKS0wMi0yOXxcXFxcZHs0fS0oKDBbMTM1NzhdfDFbMDJdKS0oMFsxLTldfFsxMl1cXFxcZHwzWzAxXSl8KDBbNDY5XXwxMSktKDBbMS05XXxbMTJdXFxcXGR8MzApfCgwMiktKDBbMS05XXwxXFxcXGR8MlswLThdKSkpYDtcbmNvbnN0IGRhdGVSZWdleCA9IG5ldyBSZWdFeHAoYF4ke2RhdGVSZWdleFNvdXJjZX0kYCk7XG5mdW5jdGlvbiB0aW1lUmVnZXhTb3VyY2UoYXJncykge1xuICAgIGxldCBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgWzAtNV1cXFxcZGA7XG4gICAgaWYgKGFyZ3MucHJlY2lzaW9uKSB7XG4gICAgICAgIHNlY29uZHNSZWdleFNvdXJjZSA9IGAke3NlY29uZHNSZWdleFNvdXJjZX1cXFxcLlxcXFxkeyR7YXJncy5wcmVjaXNpb259fWA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFyZ3MucHJlY2lzaW9uID09IG51bGwpIHtcbiAgICAgICAgc2Vjb25kc1JlZ2V4U291cmNlID0gYCR7c2Vjb25kc1JlZ2V4U291cmNlfShcXFxcLlxcXFxkKyk/YDtcbiAgICB9XG4gICAgY29uc3Qgc2Vjb25kc1F1YW50aWZpZXIgPSBhcmdzLnByZWNpc2lvbiA/IFwiK1wiIDogXCI/XCI7IC8vIHJlcXVpcmUgc2Vjb25kcyBpZiBwcmVjaXNpb24gaXMgbm9uemVyb1xuICAgIHJldHVybiBgKFswMV1cXFxcZHwyWzAtM10pOlswLTVdXFxcXGQoOiR7c2Vjb25kc1JlZ2V4U291cmNlfSkke3NlY29uZHNRdWFudGlmaWVyfWA7XG59XG5mdW5jdGlvbiB0aW1lUmVnZXgoYXJncykge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHt0aW1lUmVnZXhTb3VyY2UoYXJncyl9JGApO1xufVxuLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zMTQzMjMxXG5leHBvcnQgZnVuY3Rpb24gZGF0ZXRpbWVSZWdleChhcmdzKSB7XG4gICAgbGV0IHJlZ2V4ID0gYCR7ZGF0ZVJlZ2V4U291cmNlfVQke3RpbWVSZWdleFNvdXJjZShhcmdzKX1gO1xuICAgIGNvbnN0IG9wdHMgPSBbXTtcbiAgICBvcHRzLnB1c2goYXJncy5sb2NhbCA/IGBaP2AgOiBgWmApO1xuICAgIGlmIChhcmdzLm9mZnNldClcbiAgICAgICAgb3B0cy5wdXNoKGAoWystXVxcXFxkezJ9Oj9cXFxcZHsyfSlgKTtcbiAgICByZWdleCA9IGAke3JlZ2V4fSgke29wdHMuam9pbihcInxcIil9KWA7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3JlZ2V4fSRgKTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRJUChpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NlwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY2UmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGlzVmFsaWRKV1Qoand0LCBhbGcpIHtcbiAgICBpZiAoIWp3dFJlZ2V4LnRlc3Qoand0KSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IFtoZWFkZXJdID0gand0LnNwbGl0KFwiLlwiKTtcbiAgICAgICAgLy8gQ29udmVydCBiYXNlNjR1cmwgdG8gYmFzZTY0XG4gICAgICAgIGNvbnN0IGJhc2U2NCA9IGhlYWRlclxuICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgXCIrXCIpXG4gICAgICAgICAgICAucmVwbGFjZSgvXy9nLCBcIi9cIilcbiAgICAgICAgICAgIC5wYWRFbmQoaGVhZGVyLmxlbmd0aCArICgoNCAtIChoZWFkZXIubGVuZ3RoICUgNCkpICUgNCksIFwiPVwiKTtcbiAgICAgICAgY29uc3QgZGVjb2RlZCA9IEpTT04ucGFyc2UoYXRvYihiYXNlNjQpKTtcbiAgICAgICAgaWYgKHR5cGVvZiBkZWNvZGVkICE9PSBcIm9iamVjdFwiIHx8IGRlY29kZWQgPT09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChcInR5cFwiIGluIGRlY29kZWQgJiYgZGVjb2RlZD8udHlwICE9PSBcIkpXVFwiKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoIWRlY29kZWQuYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoYWxnICYmIGRlY29kZWQuYWxnICE9PSBhbGcpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5mdW5jdGlvbiBpc1ZhbGlkQ2lkcihpcCwgdmVyc2lvbikge1xuICAgIGlmICgodmVyc2lvbiA9PT0gXCJ2NFwiIHx8ICF2ZXJzaW9uKSAmJiBpcHY0Q2lkclJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjZcIiB8fCAhdmVyc2lvbikgJiYgaXB2NkNpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGNsYXNzIFpvZFN0cmluZyBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IFN0cmluZyhpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZykge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zdHJpbmcsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibGVuZ3RoXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBpbnB1dC5kYXRhLmxlbmd0aCA+IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnIHx8IHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW1haWxcIikge1xuICAgICAgICAgICAgICAgIGlmICghZW1haWxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1haWxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtb2ppXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtb2ppUmVnZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1vamlSZWdleCA9IG5ldyBSZWdFeHAoX2Vtb2ppUmVnZXgsIFwidVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJlbW9qaVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXVpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1dWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInV1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm5hbm9pZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFuYW5vaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwibmFub2lkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjdWlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZDJcIikge1xuICAgICAgICAgICAgICAgIGlmICghY3VpZDJSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY3VpZDJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInVsaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdWxpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1bGlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1cmxcIikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBVUkwoaW5wdXQuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBjaGVjay5yZWdleC5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHQgPSBjaGVjay5yZWdleC50ZXN0KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICghdGVzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0cmltXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50cmltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImluY2x1ZGVzXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuaW5jbHVkZXMoY2hlY2sudmFsdWUsIGNoZWNrLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGluY2x1ZGVzOiBjaGVjay52YWx1ZSwgcG9zaXRpb246IGNoZWNrLnBvc2l0aW9uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0b0xvd2VyQ2FzZVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9VcHBlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInN0YXJ0c1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5zdGFydHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IHN0YXJ0c1dpdGg6IGNoZWNrLnZhbHVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbmRzV2l0aFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmVuZHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGVuZHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZGF0ZXRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZXRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZVJlZ2V4O1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gdGltZVJlZ2V4KGNoZWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkdXJhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkdXJhdGlvblJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkdXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiaXBcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZElQKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiaXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImp3dFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkSldUKGlucHV0LmRhdGEsIGNoZWNrLmFsZykpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJqd3RcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImNpZHJcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZENpZHIoaW5wdXQuZGF0YSwgY2hlY2sudmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJjaWRyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJiYXNlNjRcIikge1xuICAgICAgICAgICAgICAgIGlmICghYmFzZTY0UmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImJhc2U2NFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0dXJsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NHVybFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjR1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgX3JlZ2V4KHJlZ2V4LCB2YWxpZGF0aW9uLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmluZW1lbnQoKGRhdGEpID0+IHJlZ2V4LnRlc3QoZGF0YSksIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW1haWwobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtYWlsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1cmxcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBlbW9qaShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZW1vamlcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICB1dWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJ1dWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgbmFub2lkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJuYW5vaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBjdWlkKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZDIobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImN1aWQyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdWxpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidWxpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiYmFzZTY0XCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgYmFzZTY0dXJsKG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBqd3Qob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImp3dFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGlwKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJpcFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGNpZHIob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImNpZHJcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBkYXRldGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIG9mZnNldDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG9jYWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIG9mZnNldDogb3B0aW9ucz8ub2Zmc2V0ID8/IGZhbHNlLFxuICAgICAgICAgICAgbG9jYWw6IG9wdGlvbnM/LmxvY2FsID8/IGZhbHNlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGF0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZGF0ZVwiLCBtZXNzYWdlIH0pO1xuICAgIH1cbiAgICB0aW1lKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwidGltZVwiLFxuICAgICAgICAgICAgcHJlY2lzaW9uOiB0eXBlb2Ygb3B0aW9ucz8ucHJlY2lzaW9uID09PSBcInVuZGVmaW5lZFwiID8gbnVsbCA6IG9wdGlvbnM/LnByZWNpc2lvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGR1cmF0aW9uKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJkdXJhdGlvblwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHJlZ2V4KHJlZ2V4LCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICByZWdleDogcmVnZXgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbmNsdWRlcyh2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbmNsdWRlc1wiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgcG9zaXRpb246IG9wdGlvbnM/LnBvc2l0aW9uLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnM/Lm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJzdGFydHNXaXRoXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbmRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJlbmRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5MZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heExlbmd0aCxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibGVuZ3RoXCIsXG4gICAgICAgICAgICB2YWx1ZTogbGVuLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBgLm1pbigxKWBcbiAgICAgKi9cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBlcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkpO1xuICAgIH1cbiAgICB0cmltKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidHJpbVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9Mb3dlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b0xvd2VyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9VcHBlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b1VwcGVyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IGlzRGF0ZXRpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZXRpbWVcIik7XG4gICAgfVxuICAgIGdldCBpc0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVGltZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJkdXJhdGlvblwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1haWwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1haWxcIik7XG4gICAgfVxuICAgIGdldCBpc1VSTCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1cmxcIik7XG4gICAgfVxuICAgIGdldCBpc0Vtb2ppKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtb2ppXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInV1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc05BTk9JRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJuYW5vaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQ1VJRDIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZDJcIik7XG4gICAgfVxuICAgIGdldCBpc1VMSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidWxpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzSVAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiaXBcIik7XG4gICAgfVxuICAgIGdldCBpc0NJRFIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY2lkclwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQmFzZTY0dXJsKCkge1xuICAgICAgICAvLyBiYXNlNjR1cmwgZW5jb2RpbmcgaXMgYSBtb2RpZmljYXRpb24gb2YgYmFzZTY0IHRoYXQgY2FuIHNhZmVseSBiZSB1c2VkIGluIFVSTHMgYW5kIGZpbGVuYW1lc1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImJhc2U2NHVybFwiKTtcbiAgICB9XG4gICAgZ2V0IG1pbkxlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4TGVuZ3RoKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kU3RyaW5nLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzk2NjQ4NC93aHktZG9lcy1tb2R1bHVzLW9wZXJhdG9yLXJldHVybi1mcmFjdGlvbmFsLW51bWJlci1pbi1qYXZhc2NyaXB0LzMxNzExMDM0IzMxNzExMDM0XG5mdW5jdGlvbiBmbG9hdFNhZmVSZW1haW5kZXIodmFsLCBzdGVwKSB7XG4gICAgY29uc3QgdmFsRGVjQ291bnQgPSAodmFsLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBzdGVwRGVjQ291bnQgPSAoc3RlcC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3QgZGVjQ291bnQgPSB2YWxEZWNDb3VudCA+IHN0ZXBEZWNDb3VudCA/IHZhbERlY0NvdW50IDogc3RlcERlY0NvdW50O1xuICAgIGNvbnN0IHZhbEludCA9IE51bWJlci5wYXJzZUludCh2YWwudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIGNvbnN0IHN0ZXBJbnQgPSBOdW1iZXIucGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIDEwICoqIGRlY0NvdW50O1xufVxuZXhwb3J0IGNsYXNzIFpvZE51bWJlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgICAgICB0aGlzLnN0ZXAgPSB0aGlzLm11bHRpcGxlT2Y7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IE51bWJlcihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bWJlcikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5udW1iZXIsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJpbnRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXRpbC5pc0ludGVnZXIoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBcImludGVnZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBcImZsb2F0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChmbG9hdFNhZmVSZW1haW5kZXIoaW5wdXQuZGF0YSwgY2hlY2sudmFsdWUpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2YsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZU9mOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImZpbml0ZVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9maW5pdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGludChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImludFwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25wb3NpdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZpbml0ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImZpbml0ZVwiLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2FmZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KS5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5WYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluO1xuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heDtcbiAgICB9XG4gICAgZ2V0IGlzSW50KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImludFwiIHx8IChjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIiAmJiB1dGlsLmlzSW50ZWdlcihjaC52YWx1ZSkpKTtcbiAgICB9XG4gICAgZ2V0IGlzRmluaXRlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwiZmluaXRlXCIgfHwgY2gua2luZCA9PT0gXCJpbnRcIiB8fCBjaC5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobWluKSAmJiBOdW1iZXIuaXNGaW5pdGUobWF4KTtcbiAgICB9XG59XG5ab2ROdW1iZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVtYmVyKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdW1iZXIsXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQmlnSW50IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMubWluID0gdGhpcy5ndGU7XG4gICAgICAgIHRoaXMubWF4ID0gdGhpcy5sdGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gQmlnSW50KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYmlnaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA8IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA8PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjaGVjay5pbmNsdXNpdmUgPyBpbnB1dC5kYXRhID4gY2hlY2sudmFsdWUgOiBpbnB1dC5kYXRhID49IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29CaWcpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm11bHRpcGxlT2ZcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhICUgY2hlY2sudmFsdWUgIT09IEJpZ0ludCgwKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9nZXRJbnZhbGlkSW5wdXQoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5iaWdpbnQsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG4gICAgZ3RlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBndCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHQodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBzZXRMaW1pdChraW5kLCB2YWx1ZSwgaW5jbHVzaXZlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogW1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5jaGVja3MsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG11bHRpcGxlT2YodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibXVsdGlwbGVPZlwiLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kQmlnSW50LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQmlnSW50LFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlID8/IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJvb2xlYW4gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBCb29sZWFuKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYm9vbGVhbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5ib29sZWFuLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEJvb2xlYW4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQm9vbGVhbih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbixcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REYXRlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gbmV3IERhdGUoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5kYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmRhdGUsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGlucHV0LmRhdGEuZ2V0VGltZSgpKSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZGF0ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpID4gY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuZXcgRGF0ZShpbnB1dC5kYXRhLmdldFRpbWUoKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkRhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluRGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4RGF0ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhEYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBtaW5EYXRlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW4gIT0gbnVsbCA/IG5ldyBEYXRlKG1pbikgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgbWF4RGF0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4ICE9IG51bGwgPyBuZXcgRGF0ZShtYXgpIDogbnVsbDtcbiAgICB9XG59XG5ab2REYXRlLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERhdGUoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU3ltYm9sIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc3ltYm9sKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnN5bWJvbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RTeW1ib2wuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kU3ltYm9sKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTeW1ib2wsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5kZWZpbmVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RVbmRlZmluZWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5kZWZpbmVkKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmRlZmluZWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVsbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2ROdWxsLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGwoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQW55IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHRvIHByZXZlbnQgaW5zdGFuY2VzIG9mIG90aGVyIGNsYXNzZXMgZnJvbSBleHRlbmRpbmcgWm9kQW55LiB0aGlzIGNhdXNlcyBpc3N1ZXMgd2l0aCBjYXRjaGFsbCBpbiBab2RPYmplY3QuXG4gICAgICAgIHRoaXMuX2FueSA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kQW55LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEFueSh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVua25vd24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLy8gcmVxdWlyZWRcbiAgICAgICAgdGhpcy5fdW5rbm93biA9IHRydWU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5rbm93bi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RVbmtub3duKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5ldmVyIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubmV2ZXIsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG59XG5ab2ROZXZlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROZXZlcih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXIsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVm9pZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS52b2lkLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFZvaWQuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVm9pZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RBcnJheSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCwgc3RhdHVzIH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkZWYgPSB0aGlzLl9kZWY7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYuZXhhY3RMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvb0JpZyA9IGN0eC5kYXRhLmxlbmd0aCA+IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHRvb1NtYWxsID0gY3R4LmRhdGEubGVuZ3RoIDwgZGVmLmV4YWN0TGVuZ3RoLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiB0b29CaWcgPyBab2RJc3N1ZUNvZGUudG9vX2JpZyA6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06ICh0b29TbWFsbCA/IGRlZi5leGFjdExlbmd0aC52YWx1ZSA6IHVuZGVmaW5lZCksXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06ICh0b29CaWcgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWluTGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoIDwgZGVmLm1pbkxlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBkZWYubWluTGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluTGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5tYXhMZW5ndGggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPiBkZWYubWF4TGVuZ3RoLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBkZWYubWF4TGVuZ3RoLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VBc3luYyhuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKTtcbiAgICAgICAgICAgIH0pKS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBbLi4uY3R4LmRhdGFdLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGRlZi50eXBlLl9wYXJzZVN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdCk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5MZW5ndGg6IHsgdmFsdWU6IG1pbkxlbmd0aCwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWF4TGVuZ3RoOiB7IHZhbHVlOiBtYXhMZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbGVuZ3RoKGxlbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGV4YWN0TGVuZ3RoOiB7IHZhbHVlOiBsZW4sIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgbWVzc2FnZSk7XG4gICAgfVxufVxuWm9kQXJyYXkuY3JlYXRlID0gKHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgbWluTGVuZ3RoOiBudWxsLFxuICAgICAgICBtYXhMZW5ndGg6IG51bGwsXG4gICAgICAgIGV4YWN0TGVuZ3RoOiBudWxsLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFycmF5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gZGVlcFBhcnRpYWxpZnkoc2NoZW1hKSB7XG4gICAgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9iamVjdCkge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzY2hlbWEuc2hhcGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gc2NoZW1hLnNoYXBlW2tleV07XG4gICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gWm9kT3B0aW9uYWwuY3JlYXRlKGRlZXBQYXJ0aWFsaWZ5KGZpZWxkU2NoZW1hKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4uc2NoZW1hLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RBcnJheSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgdHlwZTogZGVlcFBhcnRpYWxpZnkoc2NoZW1hLmVsZW1lbnQpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgcmV0dXJuIFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kTnVsbGFibGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZE51bGxhYmxlLmNyZWF0ZShkZWVwUGFydGlhbGlmeShzY2hlbWEudW53cmFwKCkpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kVHVwbGUpIHtcbiAgICAgICAgcmV0dXJuIFpvZFR1cGxlLmNyZWF0ZShzY2hlbWEuaXRlbXMubWFwKChpdGVtKSA9PiBkZWVwUGFydGlhbGlmeShpdGVtKSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kT2JqZWN0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBJbiBtb3N0IGNhc2VzLCB0aGlzIGlzIG5vIGxvbmdlciBuZWVkZWQgLSB1bmtub3duIHByb3BlcnRpZXMgYXJlIG5vdyBzaWxlbnRseSBzdHJpcHBlZC5cbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gcGFzcyB0aHJvdWdoIHVua25vd24gcHJvcGVydGllcywgdXNlIGAucGFzc3Rocm91Z2goKWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9uc3RyaWN0ID0gdGhpcy5wYXNzdGhyb3VnaDtcbiAgICAgICAgLy8gZXh0ZW5kPFxuICAgICAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlLFxuICAgICAgICAvLyAgIE5ld091dHB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAgICAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAgICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PixcbiAgICAgICAgLy8gICBOZXdJbnB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfaW5wdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAgICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgICAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgICAgICAvLyAgIH0+XG4gICAgICAgIC8vID4oXG4gICAgICAgIC8vICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gKTogWm9kT2JqZWN0PFxuICAgICAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIEF1Z21lbnRhdGlvbj4sXG4gICAgICAgIC8vICAgVW5rbm93bktleXMsXG4gICAgICAgIC8vICAgQ2F0Y2hhbGwsXG4gICAgICAgIC8vICAgTmV3T3V0cHV0LFxuICAgICAgICAvLyAgIE5ld0lucHV0XG4gICAgICAgIC8vID4ge1xuICAgICAgICAvLyAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgLy8gICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgLy8gICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAvLyAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgLy8gICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgICAgICAvLyAgICAgfSksXG4gICAgICAgIC8vICAgfSkgYXMgYW55O1xuICAgICAgICAvLyB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYC5leHRlbmRgIGluc3RlYWRcbiAgICAgICAgICogICovXG4gICAgICAgIHRoaXMuYXVnbWVudCA9IHRoaXMuZXh0ZW5kO1xuICAgIH1cbiAgICBfZ2V0Q2FjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGVkICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IHV0aWwub2JqZWN0S2V5cyhzaGFwZSk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IHsgc2hhcGUsIGtleXMgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IHsgc2hhcGUsIGtleXM6IHNoYXBlS2V5cyB9ID0gdGhpcy5fZ2V0Q2FjaGVkKCk7XG4gICAgICAgIGNvbnN0IGV4dHJhS2V5cyA9IFtdO1xuICAgICAgICBpZiAoISh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlciAmJiB0aGlzLl9kZWYudW5rbm93bktleXMgPT09IFwic3RyaXBcIikpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzaGFwZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBleHRyYUtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBzaGFwZUtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleVZhbGlkYXRvciA9IHNoYXBlW2tleV07XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICB2YWx1ZToga2V5VmFsaWRhdG9yLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IGtleSBpbiBjdHguZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlcikge1xuICAgICAgICAgICAgY29uc3QgdW5rbm93bktleXMgPSB0aGlzLl9kZWYudW5rbm93bktleXM7XG4gICAgICAgICAgICBpZiAodW5rbm93bktleXMgPT09IFwicGFzc3Rocm91Z2hcIikge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGV4dHJhS2V5cykge1xuICAgICAgICAgICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBjdHguZGF0YVtrZXldIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmljdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4dHJhS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnVucmVjb2duaXplZF9rZXlzLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogZXh0cmFLZXlzLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodW5rbm93bktleXMgPT09IFwic3RyaXBcIikge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnRlcm5hbCBab2RPYmplY3QgZXJyb3I6IGludmFsaWQgdW5rbm93bktleXMgdmFsdWUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBydW4gY2F0Y2hhbGwgdmFsaWRhdGlvblxuICAgICAgICAgICAgY29uc3QgY2F0Y2hhbGwgPSB0aGlzLl9kZWYuY2F0Y2hhbGw7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN0eC5kYXRhW2tleV07XG4gICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGtleTogeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGtleSB9LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2F0Y2hhbGwuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCB2YWx1ZSwgY3R4LnBhdGgsIGtleSkgLy8sIGN0eC5jaGlsZChrZXkpLCB2YWx1ZSwgZ2V0UGFyc2VkVHlwZSh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzeW5jUGFpcnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcGFpci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgc3luY1BhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNTZXQ6IHBhaXIuYWx3YXlzU2V0LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN5bmNQYWlycztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKHN5bmNQYWlycykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBzeW5jUGFpcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBzaGFwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zaGFwZSgpO1xuICAgIH1cbiAgICBzdHJpY3QobWVzc2FnZSkge1xuICAgICAgICBlcnJvclV0aWwuZXJyVG9PYmo7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1hcDogKGlzc3VlLCBjdHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRFcnJvciA9IHRoaXMuX2RlZi5lcnJvck1hcD8uKGlzc3VlLCBjdHgpLm1lc3NhZ2UgPz8gY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcInVucmVjb2duaXplZF9rZXlzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLm1lc3NhZ2UgPz8gZGVmYXVsdEVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDoge30pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RyaXAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwYXNzdGhyb3VnaCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgdW5rbm93bktleXM6IFwicGFzc3Rocm91Z2hcIixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGNvbnN0IEF1Z21lbnRGYWN0b3J5ID1cbiAgICAvLyAgIDxEZWYgZXh0ZW5kcyBab2RPYmplY3REZWY+KGRlZjogRGVmKSA9PlxuICAgIC8vICAgPEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlPihcbiAgICAvLyAgICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAvLyAgICk6IFpvZE9iamVjdDxcbiAgICAvLyAgICAgZXh0ZW5kU2hhcGU8UmV0dXJuVHlwZTxEZWZbXCJzaGFwZVwiXT4sIEF1Z21lbnRhdGlvbj4sXG4gICAgLy8gICAgIERlZltcInVua25vd25LZXlzXCJdLFxuICAgIC8vICAgICBEZWZbXCJjYXRjaGFsbFwiXVxuICAgIC8vICAgPiA9PiB7XG4gICAgLy8gICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAvLyAgICAgICAuLi5kZWYsXG4gICAgLy8gICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgLy8gICAgICAgICAuLi5kZWYuc2hhcGUoKSxcbiAgICAvLyAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAvLyAgICAgICB9KSxcbiAgICAvLyAgICAgfSkgYXMgYW55O1xuICAgIC8vICAgfTtcbiAgICBleHRlbmQoYXVnbWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJpb3IgdG8gem9kQDEuMC4xMiB0aGVyZSB3YXMgYSBidWcgaW4gdGhlXG4gICAgICogaW5mZXJyZWQgdHlwZSBvZiBtZXJnZWQgb2JqZWN0cy4gUGxlYXNlXG4gICAgICogdXBncmFkZSBpZiB5b3UgYXJlIGV4cGVyaWVuY2luZyBpc3N1ZXMuXG4gICAgICovXG4gICAgbWVyZ2UobWVyZ2luZykge1xuICAgICAgICBjb25zdCBtZXJnZWQgPSBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgICAgICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICAgICAgLi4ubWVyZ2luZy5fZGVmLnNoYXBlKCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1lcmdlZDtcbiAgICB9XG4gICAgLy8gbWVyZ2U8XG4gICAgLy8gICBJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdCxcbiAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIEluY29taW5nW1wic2hhcGVcIl0sXG4gICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIE91dHB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAvLyAgICAgICA/IE91dHB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9LFxuICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB7XG4gICAgLy8gICAgIFtrIGluIGtleW9mIEF1Z21lbnRhdGlvbiB8IGtleW9mIElucHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAvLyAgICAgICA/IElucHV0W2tdXG4gICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAvLyAgIH1cbiAgICAvLyA+KFxuICAgIC8vICAgbWVyZ2luZzogSW5jb21pbmdcbiAgICAvLyApOiBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0LFxuICAgIC8vICAgTmV3SW5wdXRcbiAgICAvLyA+IHtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBzZXRLZXkoa2V5LCBzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXVnbWVudCh7IFtrZXldOiBzY2hlbWEgfSk7XG4gICAgfVxuICAgIC8vIG1lcmdlPEluY29taW5nIGV4dGVuZHMgQW55Wm9kT2JqZWN0PihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogLy9ab2RPYmplY3Q8VCAmIEluY29taW5nW1wiX3NoYXBlXCJdLCBVbmtub3duS2V5cywgQ2F0Y2hhbGw+ID0gKG1lcmdpbmcpID0+IHtcbiAgICAvLyBab2RPYmplY3Q8XG4gICAgLy8gICBleHRlbmRTaGFwZTxULCBSZXR1cm5UeXBlPEluY29taW5nW1wiX2RlZlwiXVtcInNoYXBlXCJdPj4sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgIEluY29taW5nW1wiX2RlZlwiXVtcImNhdGNoYWxsXCJdXG4gICAgLy8gPiB7XG4gICAgLy8gICAvLyBjb25zdCBtZXJnZWRTaGFwZSA9IG9iamVjdFV0aWwubWVyZ2VTaGFwZXMoXG4gICAgLy8gICAvLyAgIHRoaXMuX2RlZi5zaGFwZSgpLFxuICAgIC8vICAgLy8gICBtZXJnaW5nLl9kZWYuc2hhcGUoKVxuICAgIC8vICAgLy8gKTtcbiAgICAvLyAgIGNvbnN0IG1lcmdlZDogYW55ID0gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgIHVua25vd25LZXlzOiBtZXJnaW5nLl9kZWYudW5rbm93bktleXMsXG4gICAgLy8gICAgIGNhdGNoYWxsOiBtZXJnaW5nLl9kZWYuY2F0Y2hhbGwsXG4gICAgLy8gICAgIHNoYXBlOiAoKSA9PlxuICAgIC8vICAgICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXModGhpcy5fZGVmLnNoYXBlKCksIG1lcmdpbmcuX2RlZi5zaGFwZSgpKSxcbiAgICAvLyAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgLy8gICB9KSBhcyBhbnk7XG4gICAgLy8gICByZXR1cm4gbWVyZ2VkO1xuICAgIC8vIH1cbiAgICBjYXRjaGFsbChpbmRleCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjYXRjaGFsbDogaW5kZXgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwaWNrKG1hc2spIHtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKG1hc2spKSB7XG4gICAgICAgICAgICBpZiAobWFza1trZXldICYmIHRoaXMuc2hhcGVba2V5XSkge1xuICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgb21pdChtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgaWYgKCFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICovXG4gICAgZGVlcFBhcnRpYWwoKSB7XG4gICAgICAgIHJldHVybiBkZWVwUGFydGlhbGlmeSh0aGlzKTtcbiAgICB9XG4gICAgcGFydGlhbChtYXNrKSB7XG4gICAgICAgIGNvbnN0IG5ld1NoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyh0aGlzLnNoYXBlKSkge1xuICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IGZpZWxkU2NoZW1hLm9wdGlvbmFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVxdWlyZWQobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmllbGRTY2hlbWEgPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICAgICAgbGV0IG5ld0ZpZWxkID0gZmllbGRTY2hlbWE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG5ld0ZpZWxkIGluc3RhbmNlb2YgWm9kT3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RmllbGQgPSBuZXdGaWVsZC5fZGVmLmlubmVyVHlwZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IG5ld0ZpZWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGtleW9mKCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlWm9kRW51bSh1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpO1xuICAgIH1cbn1cblpvZE9iamVjdC5jcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LnN0cmljdENyZWF0ZSA9IChzaGFwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmljdFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kT2JqZWN0LmxhenljcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGUsXG4gICAgICAgIHVua25vd25LZXlzOiBcInN0cmlwXCIsXG4gICAgICAgIGNhdGNoYWxsOiBab2ROZXZlci5jcmVhdGUoKSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPYmplY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9kZWYub3B0aW9ucztcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0cyhyZXN1bHRzKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gZmlyc3QgaXNzdWUtZnJlZSB2YWxpZGF0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaXNzdWVzIGZyb20gZGlydHkgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4ucmVzdWx0LmN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmV0dXJuIGludmFsaWRcbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gbmV3IFpvZEVycm9yKHJlc3VsdC5jdHguY29tbW9uLmlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ3R4ID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogYXdhaXQgb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGNoaWxkQ3R4LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY3R4OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpLnRoZW4oaGFuZGxlUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZGlydHkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIiAmJiAhZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB7IHJlc3VsdCwgY3R4OiBjaGlsZEN0eCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRDdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzLnB1c2goY2hpbGRDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnR5KSB7XG4gICAgICAgICAgICAgICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaCguLi5kaXJ0eS5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpcnR5LnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gaXNzdWVzLm1hcCgoaXNzdWVzKSA9PiBuZXcgWm9kRXJyb3IoaXNzdWVzKSk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbixcbiAgICAgICAgICAgICAgICB1bmlvbkVycm9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG59XG5ab2RVbmlvbi5jcmVhdGUgPSAodHlwZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5pb24oe1xuICAgICAgICBvcHRpb25zOiB0eXBlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICBab2REaXNjcmltaW5hdGVkVW5pb24gICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBnZXREaXNjcmltaW5hdG9yID0gKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExhenkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5zY2hlbWEpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRWZmZWN0cykge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLmlubmVyVHlwZSgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIFt0eXBlLnZhbHVlXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHR5cGUub3B0aW9ucztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE5hdGl2ZUVudW0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKHR5cGUuZW51bSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2REZWZhdWx0KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuX2RlZi5pbm5lclR5cGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kVW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtudWxsXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCAuLi5nZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RCcmFuZGVkKSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kUmVhZG9ubHkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RDYXRjaCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59O1xuZXhwb3J0IGNsYXNzIFpvZERpc2NyaW1pbmF0ZWRVbmlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yID0gdGhpcy5kaXNjcmltaW5hdG9yO1xuICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWUgPSBjdHguZGF0YVtkaXNjcmltaW5hdG9yXTtcbiAgICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5vcHRpb25zTWFwLmdldChkaXNjcmltaW5hdG9yVmFsdWUpO1xuICAgICAgICBpZiAoIW9wdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBBcnJheS5mcm9tKHRoaXMub3B0aW9uc01hcC5rZXlzKCkpLFxuICAgICAgICAgICAgICAgIHBhdGg6IFtkaXNjcmltaW5hdG9yXSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24uX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRpc2NyaW1pbmF0b3IoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZGlzY3JpbWluYXRvcjtcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnNNYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9uc01hcDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBkaXNjcmltaW5hdGVkIHVuaW9uIHNjaGVtYS4gSXRzIGJlaGF2aW91ciBpcyB2ZXJ5IHNpbWlsYXIgdG8gdGhhdCBvZiB0aGUgbm9ybWFsIHoudW5pb24oKSBjb25zdHJ1Y3Rvci5cbiAgICAgKiBIb3dldmVyLCBpdCBvbmx5IGFsbG93cyBhIHVuaW9uIG9mIG9iamVjdHMsIGFsbCBvZiB3aGljaCBuZWVkIHRvIHNoYXJlIGEgZGlzY3JpbWluYXRvciBwcm9wZXJ0eS4gVGhpcyBwcm9wZXJ0eSBtdXN0XG4gICAgICogaGF2ZSBhIGRpZmZlcmVudCB2YWx1ZSBmb3IgZWFjaCBvYmplY3QgaW4gdGhlIHVuaW9uLlxuICAgICAqIEBwYXJhbSBkaXNjcmltaW5hdG9yIHRoZSBuYW1lIG9mIHRoZSBkaXNjcmltaW5hdG9yIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHR5cGVzIGFuIGFycmF5IG9mIG9iamVjdCBzY2hlbWFzXG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZGlzY3JpbWluYXRvciwgb3B0aW9ucywgcGFyYW1zKSB7XG4gICAgICAgIC8vIEdldCBhbGwgdGhlIHZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWVzXG4gICAgICAgIGNvbnN0IG9wdGlvbnNNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgIC8vIHRyeSB7XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zdCBkaXNjcmltaW5hdG9yVmFsdWVzID0gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnNoYXBlW2Rpc2NyaW1pbmF0b3JdKTtcbiAgICAgICAgICAgIGlmICghZGlzY3JpbWluYXRvclZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEEgZGlzY3JpbWluYXRvciB2YWx1ZSBmb3Iga2V5IFxcYCR7ZGlzY3JpbWluYXRvcn1cXGAgY291bGQgbm90IGJlIGV4dHJhY3RlZCBmcm9tIGFsbCBzY2hlbWEgb3B0aW9uc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkaXNjcmltaW5hdG9yVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnNNYXAuaGFzKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERpc2NyaW1pbmF0b3IgcHJvcGVydHkgJHtTdHJpbmcoZGlzY3JpbWluYXRvcil9IGhhcyBkdXBsaWNhdGUgdmFsdWUgJHtTdHJpbmcodmFsdWUpfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcHRpb25zTWFwLnNldCh2YWx1ZSwgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2REaXNjcmltaW5hdGVkVW5pb24oe1xuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb24sXG4gICAgICAgICAgICBkaXNjcmltaW5hdG9yLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIG9wdGlvbnNNYXAsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1lcmdlVmFsdWVzKGEsIGIpIHtcbiAgICBjb25zdCBhVHlwZSA9IGdldFBhcnNlZFR5cGUoYSk7XG4gICAgY29uc3QgYlR5cGUgPSBnZXRQYXJzZWRUeXBlKGIpO1xuICAgIGlmIChhID09PSBiKSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBhIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLm9iamVjdCAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgY29uc3QgYktleXMgPSB1dGlsLm9iamVjdEtleXMoYik7XG4gICAgICAgIGNvbnN0IHNoYXJlZEtleXMgPSB1dGlsLm9iamVjdEtleXMoYSkuZmlsdGVyKChrZXkpID0+IGJLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpO1xuICAgICAgICBjb25zdCBuZXdPYmogPSB7IC4uLmEsIC4uLmIgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcmVkS2V5cykge1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdPYmpba2V5XSA9IHNoYXJlZFZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld09iaiB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1BID0gYVtpbmRleF07XG4gICAgICAgICAgICBjb25zdCBpdGVtQiA9IGJbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhpdGVtQSwgaXRlbUIpO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3QXJyYXkucHVzaChzaGFyZWRWYWx1ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3QXJyYXkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5kYXRlICYmICthID09PSArYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZEludGVyc2VjdGlvbiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBoYW5kbGVQYXJzZWQgPSAocGFyc2VkTGVmdCwgcGFyc2VkUmlnaHQpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0Fib3J0ZWQocGFyc2VkTGVmdCkgfHwgaXNBYm9ydGVkKHBhcnNlZFJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gbWVyZ2VWYWx1ZXMocGFyc2VkTGVmdC52YWx1ZSwgcGFyc2VkUmlnaHQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKCFtZXJnZWQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzRGlydHkocGFyc2VkTGVmdCkgfHwgaXNEaXJ0eShwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogbWVyZ2VkLmRhdGEgfTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVmLmxlZnQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKS50aGVuKChbbGVmdCwgcmlnaHRdKSA9PiBoYW5kbGVQYXJzZWQobGVmdCwgcmlnaHQpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVQYXJzZWQodGhpcy5fZGVmLmxlZnQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KSwgdGhpcy5fZGVmLnJpZ2h0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuWm9kSW50ZXJzZWN0aW9uLmNyZWF0ZSA9IChsZWZ0LCByaWdodCwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RJbnRlcnNlY3Rpb24oe1xuICAgICAgICBsZWZ0OiBsZWZ0LFxuICAgICAgICByaWdodDogcmlnaHQsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kSW50ZXJzZWN0aW9uLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8gdHlwZSBab2RUdXBsZUl0ZW1zID0gW1pvZFR5cGVBbnksIC4uLlpvZFR5cGVBbnlbXV07XG5leHBvcnQgY2xhc3MgWm9kVHVwbGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmFycmF5KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmFycmF5LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgbWluaW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdCA9IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICBpZiAoIXJlc3QgJiYgY3R4LmRhdGEubGVuZ3RoID4gdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgbWF4aW11bTogdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbXMgPSBbLi4uY3R4LmRhdGFdXG4gICAgICAgICAgICAubWFwKChpdGVtLCBpdGVtSW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuX2RlZi5pdGVtc1tpdGVtSW5kZXhdIHx8IHRoaXMuX2RlZi5yZXN0O1xuICAgICAgICAgICAgaWYgKCFzY2hlbWEpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gc2NoZW1hLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGl0ZW1JbmRleCkpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4KTsgLy8gZmlsdGVyIG51bGxzXG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoaXRlbXMpLnRoZW4oKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VBcnJheShzdGF0dXMsIGl0ZW1zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaXRlbXM7XG4gICAgfVxuICAgIHJlc3QocmVzdCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHJlc3QsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblpvZFR1cGxlLmNyZWF0ZSA9IChzY2hlbWFzLCBwYXJhbXMpID0+IHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoc2NoZW1hcykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiWW91IG11c3QgcGFzcyBhbiBhcnJheSBvZiBzY2hlbWFzIHRvIHoudHVwbGUoWyAuLi4gXSlcIik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgWm9kVHVwbGUoe1xuICAgICAgICBpdGVtczogc2NoZW1hcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RUdXBsZSxcbiAgICAgICAgcmVzdDogbnVsbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RSZWNvcmQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBnZXQga2V5U2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgfVxuICAgIGdldCB2YWx1ZVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhaXJzID0gW107XG4gICAgICAgIGNvbnN0IGtleVR5cGUgPSB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gY3R4LmRhdGEpIHtcbiAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBjdHguZGF0YVtrZXldLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0QXN5bmMoc3RhdHVzLCBwYWlycyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBlbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShmaXJzdCwgc2Vjb25kLCB0aGlyZCkge1xuICAgICAgICBpZiAoc2Vjb25kIGluc3RhbmNlb2YgWm9kVHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAgICAgIGtleVR5cGU6IGZpcnN0LFxuICAgICAgICAgICAgICAgIHZhbHVlVHlwZTogc2Vjb25kLFxuICAgICAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcmQpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBab2RSZWNvcmQoe1xuICAgICAgICAgICAga2V5VHlwZTogWm9kU3RyaW5nLmNyZWF0ZSgpLFxuICAgICAgICAgICAgdmFsdWVUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVjb3JkLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhzZWNvbmQpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTWFwIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm1hcCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5tYXAsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGNvbnN0IHBhaXJzID0gWy4uLmN0eC5kYXRhLmVudHJpZXMoKV0ubWFwKChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIFtpbmRleCwgXCJrZXlcIl0pKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBbaW5kZXgsIFwidmFsdWVcIl0pKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsTWFwLnNldChrZXkudmFsdWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZE1hcC5jcmVhdGUgPSAoa2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE1hcCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXAsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kU2V0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zZXQpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc2V0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoZGVmLm1pblNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplIDwgZGVmLm1pblNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pblNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWluU2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4U2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLnNpemUgPiBkZWYubWF4U2l6ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heFNpemUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2V0XCIsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYubWF4U2l6ZS5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZ1bmN0aW9uIGZpbmFsaXplU2V0KGVsZW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRTZXQgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcGFyc2VkU2V0LmFkZChlbGVtZW50LnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcGFyc2VkU2V0IH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbLi4uY3R4LmRhdGEudmFsdWVzKCldLm1hcCgoaXRlbSwgaSkgPT4gdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgaXRlbSwgY3R4LnBhdGgsIGkpKSk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoZWxlbWVudHMpLnRoZW4oKGVsZW1lbnRzKSA9PiBmaW5hbGl6ZVNldChlbGVtZW50cykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZpbmFsaXplU2V0KGVsZW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBtaW4obWluU2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtaW5TaXplOiB7IHZhbHVlOiBtaW5TaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1heChtYXhTaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heFNpemU6IHsgdmFsdWU6IG1heFNpemUsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2l6ZShzaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbihzaXplLCBtZXNzYWdlKS5tYXgoc2l6ZSwgbWVzc2FnZSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZFNldC5jcmVhdGUgPSAodmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAgbWluU2l6ZTogbnVsbCxcbiAgICAgICAgbWF4U2l6ZTogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRnVuY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy52YWxpZGF0ZSA9IHRoaXMuaW1wbGVtZW50O1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5mdW5jdGlvbikge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5mdW5jdGlvbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VBcmdzSXNzdWUoYXJncywgZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlSXNzdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGFyZ3MsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXBzOiBbY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAsIGN0eC5zY2hlbWFFcnJvck1hcCwgZ2V0RXJyb3JNYXAoKSwgZGVmYXVsdEVycm9yTWFwXS5maWx0ZXIoKHgpID0+ICEheCksXG4gICAgICAgICAgICAgICAgaXNzdWVEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2FyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzRXJyb3I6IGVycm9yLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlUmV0dXJuc0lzc3VlKHJldHVybnMsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiByZXR1cm5zLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVHlwZUVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBlcnJvck1hcDogY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAgfTtcbiAgICAgICAgY29uc3QgZm4gPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5yZXR1cm5zIGluc3RhbmNlb2YgWm9kUHJvbWlzZSkge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoW10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBhd2FpdCBtZS5fZGVmLmFyZ3MucGFyc2VBc3luYyhhcmdzLCBwYXJhbXMpLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VBcmdzSXNzdWUoYXJncywgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gYXdhaXQgbWUuX2RlZi5yZXR1cm5zLl9kZWYudHlwZVxuICAgICAgICAgICAgICAgICAgICAucGFyc2VBc3luYyhyZXN1bHQsIHBhcmFtcylcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yLmFkZElzc3VlKG1ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRSZXR1cm5zO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBXb3VsZCBsb3ZlIGEgd2F5IHRvIGF2b2lkIGRpc2FibGluZyB0aGlzIHJ1bGUsIGJ1dCB3ZSBuZWVkXG4gICAgICAgICAgICAvLyBhbiBhbGlhcyAodXNpbmcgYW4gYXJyb3cgZnVuY3Rpb24gd2FzIHdoYXQgY2F1c2VkIDI2NTEpLlxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgICAgICAgICBjb25zdCBtZSA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gT0soZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gbWUuX2RlZi5hcmdzLnNhZmVQYXJzZShhcmdzLCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIGlmICghcGFyc2VkQXJncy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBab2RFcnJvcihbbWFrZUFyZ3NJc3N1ZShhcmdzLCBwYXJzZWRBcmdzLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBSZWZsZWN0LmFwcGx5KGZuLCB0aGlzLCBwYXJzZWRBcmdzLmRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFJldHVybnMgPSBtZS5fZGVmLnJldHVybnMuc2FmZVBhcnNlKHJlc3VsdCwgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZFJldHVybnMuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VSZXR1cm5zSXNzdWUocmVzdWx0LCBwYXJzZWRSZXR1cm5zLmVycm9yKV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucy5kYXRhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcGFyYW1ldGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5hcmdzO1xuICAgIH1cbiAgICByZXR1cm5UeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnJldHVybnM7XG4gICAgfVxuICAgIGFyZ3MoLi4uaXRlbXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBhcmdzOiBab2RUdXBsZS5jcmVhdGUoaXRlbXMpLnJlc3QoWm9kVW5rbm93bi5jcmVhdGUoKSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm5zKHJldHVyblR5cGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5UeXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdHJpY3RJbXBsZW1lbnQoZnVuYykge1xuICAgICAgICBjb25zdCB2YWxpZGF0ZWRGdW5jID0gdGhpcy5wYXJzZShmdW5jKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlZEZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoYXJncywgcmV0dXJucywgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgYXJnczogKGFyZ3MgPyBhcmdzIDogWm9kVHVwbGUuY3JlYXRlKFtdKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpKSxcbiAgICAgICAgICAgIHJldHVybnM6IHJldHVybnMgfHwgWm9kVW5rbm93bi5jcmVhdGUoKSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb24sXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RMYXp5IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBsYXp5U2NoZW1hID0gdGhpcy5fZGVmLmdldHRlcigpO1xuICAgICAgICByZXR1cm4gbGF6eVNjaGVtYS5fcGFyc2UoeyBkYXRhOiBjdHguZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgIH1cbn1cblpvZExhenkuY3JlYXRlID0gKGdldHRlciwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RMYXp5KHtcbiAgICAgICAgZ2V0dGVyOiBnZXR0ZXIsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RMaXRlcmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dC5kYXRhICE9PSB0aGlzLl9kZWYudmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9saXRlcmFsLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB0aGlzLl9kZWYudmFsdWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWU7XG4gICAgfVxufVxuWm9kTGl0ZXJhbC5jcmVhdGUgPSAodmFsdWUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGl0ZXJhbCh7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMaXRlcmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZnVuY3Rpb24gY3JlYXRlWm9kRW51bSh2YWx1ZXMsIHBhcmFtcykge1xuICAgIHJldHVybiBuZXcgWm9kRW51bSh7XG4gICAgICAgIHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59XG5leHBvcnQgY2xhc3MgWm9kRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0LmRhdGEgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiB1dGlsLmpvaW5WYWx1ZXMoZXhwZWN0ZWRWYWx1ZXMpLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZSA9IG5ldyBTZXQodGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdGhpcy5fZGVmLnZhbHVlcztcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG4gICAgZ2V0IGVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBnZXQgVmFsdWVzKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IEVudW0oKSB7XG4gICAgICAgIGNvbnN0IGVudW1WYWx1ZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5fZGVmLnZhbHVlcykge1xuICAgICAgICAgICAgZW51bVZhbHVlc1t2YWxdID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlbnVtVmFsdWVzO1xuICAgIH1cbiAgICBleHRyYWN0KHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh2YWx1ZXMsIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGV4Y2x1ZGUodmFsdWVzLCBuZXdEZWYgPSB0aGlzLl9kZWYpIHtcbiAgICAgICAgcmV0dXJuIFpvZEVudW0uY3JlYXRlKHRoaXMub3B0aW9ucy5maWx0ZXIoKG9wdCkgPT4gIXZhbHVlcy5pbmNsdWRlcyhvcHQpKSwge1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgLi4ubmV3RGVmLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RFbnVtLmNyZWF0ZSA9IGNyZWF0ZVpvZEVudW07XG5leHBvcnQgY2xhc3MgWm9kTmF0aXZlRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBuYXRpdmVFbnVtVmFsdWVzID0gdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXModGhpcy5fZGVmLnZhbHVlcyk7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN0cmluZyAmJiBjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlLmhhcyhpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB1dGlsLm9iamVjdFZhbHVlcyhuYXRpdmVFbnVtVmFsdWVzKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGV4cGVjdGVkVmFsdWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlcztcbiAgICB9XG59XG5ab2ROYXRpdmVFbnVtLmNyZWF0ZSA9ICh2YWx1ZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmF0aXZlRW51bSh7XG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hdGl2ZUVudW0sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUHJvbWlzZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlICYmIGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnByb21pc2UsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9taXNpZmllZCA9IGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnByb21pc2UgPyBjdHguZGF0YSA6IFByb21pc2UucmVzb2x2ZShjdHguZGF0YSk7XG4gICAgICAgIHJldHVybiBPSyhwcm9taXNpZmllZC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUucGFyc2VBc3luYyhkYXRhLCB7XG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5ab2RQcm9taXNlLmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kUHJvbWlzZSh7XG4gICAgICAgIHR5cGU6IHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RQcm9taXNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEVmZmVjdHMgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBpbm5lclR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBzb3VyY2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0c1xuICAgICAgICAgICAgPyB0aGlzLl9kZWYuc2NoZW1hLnNvdXJjZVR5cGUoKVxuICAgICAgICAgICAgOiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gdGhpcy5fZGVmLmVmZmVjdCB8fCBudWxsO1xuICAgICAgICBjb25zdCBjaGVja0N0eCA9IHtcbiAgICAgICAgICAgIGFkZElzc3VlOiAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBhcmcpO1xuICAgICAgICAgICAgICAgIGlmIChhcmcuZmF0YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5wYXRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tDdHguYWRkSXNzdWUgPSBjaGVja0N0eC5hZGRJc3N1ZS5iaW5kKGNoZWNrQ3R4KTtcbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInByZXByb2Nlc3NcIikge1xuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZWZmZWN0LnRyYW5zZm9ybShjdHguZGF0YSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByb2Nlc3NlZCkudGhlbihhc3luYyAocHJvY2Vzc2VkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJyZWZpbmVtZW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGVSZWZpbmVtZW50ID0gKGFjYykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC5yZWZpbmVtZW50KGFjYywgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXN5bmMgcmVmaW5lbWVudCBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkXG4gICAgICAgICAgICAgICAgZXhlY3V0ZVJlZmluZW1lbnQoaW5uZXIudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChpbm5lcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInRyYW5zZm9ybVwiKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXN5bmNocm9ub3VzIHRyYW5zZm9ybSBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiByZXN1bHQgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChiYXNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZChiYXNlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVmZmVjdC50cmFuc2Zvcm0oYmFzZS52YWx1ZSwgY2hlY2tDdHgpKS50aGVuKChyZXN1bHQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHN0YXR1cy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQsXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGVmZmVjdCk7XG4gICAgfVxufVxuWm9kRWZmZWN0cy5jcmVhdGUgPSAoc2NoZW1hLCBlZmZlY3QsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICBlZmZlY3QsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5ab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzID0gKHByZXByb2Nlc3MsIHNjaGVtYSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgc2NoZW1hLFxuICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJwcmVwcm9jZXNzXCIsIHRyYW5zZm9ybTogcHJlcHJvY2VzcyB9LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgeyBab2RFZmZlY3RzIGFzIFpvZFRyYW5zZm9ybWVyIH07XG5leHBvcnQgY2xhc3MgWm9kT3B0aW9uYWwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBPSyh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kT3B0aW9uYWwuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT3B0aW9uYWwoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTnVsbGFibGUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKGlucHV0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2ROdWxsYWJsZS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsYWJsZSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsYWJsZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2REZWZhdWx0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBsZXQgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkYXRhID0gdGhpcy5fZGVmLmRlZmF1bHRWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZURlZmF1bHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZERlZmF1bHQuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0LFxuICAgICAgICBkZWZhdWx0VmFsdWU6IHR5cGVvZiBwYXJhbXMuZGVmYXVsdCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmRlZmF1bHQgOiAoKSA9PiBwYXJhbXMuZGVmYXVsdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RDYXRjaCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgLy8gbmV3Q3R4IGlzIHVzZWQgdG8gbm90IGNvbGxlY3QgaXNzdWVzIGZyb20gaW5uZXIgdHlwZXMgaW4gY3R4XG4gICAgICAgIGNvbnN0IG5ld0N0eCA9IHtcbiAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5pbm5lclR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGE6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgcGF0aDogbmV3Q3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IHtcbiAgICAgICAgICAgICAgICAuLi5uZXdDdHgsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGlzQXN5bmMocmVzdWx0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogbmV3Q3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXR1czogXCJ2YWxpZFwiLFxuICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZXN1bHQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9kZWYuY2F0Y2hWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBab2RFcnJvcihuZXdDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlQ2F0Y2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZENhdGNoLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZENhdGNoKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICBjYXRjaFZhbHVlOiB0eXBlb2YgcGFyYW1zLmNhdGNoID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMuY2F0Y2ggOiAoKSA9PiBwYXJhbXMuY2F0Y2gsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTmFOIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubmFuKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5hbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbn1cblpvZE5hTi5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROYU4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBCUkFORCA9IFN5bWJvbChcInpvZF9icmFuZFwiKTtcbmV4cG9ydCBjbGFzcyBab2RCcmFuZGVkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBkYXRhID0gY3R4LmRhdGE7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUGlwZWxpbmUgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZUFzeW5jID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluUmVzdWx0ID0gYXdhaXQgdGhpcy5fZGVmLmluLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkoaW5SZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUFzeW5jKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IHRoaXMuX2RlZi5pbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAoaW5SZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZGlydHlcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm91dC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogaW5SZXN1bHQudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RQaXBlbGluZSh7XG4gICAgICAgICAgICBpbjogYSxcbiAgICAgICAgICAgIG91dDogYixcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmUsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RSZWFkb25seSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IGZyZWV6ZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZChkYXRhKSkge1xuICAgICAgICAgICAgICAgIGRhdGEudmFsdWUgPSBPYmplY3QuZnJlZXplKGRhdGEudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpc0FzeW5jKHJlc3VsdCkgPyByZXN1bHQudGhlbigoZGF0YSkgPT4gZnJlZXplKGRhdGEpKSA6IGZyZWV6ZShyZXN1bHQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZFJlYWRvbmx5LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFJlYWRvbmx5KHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlYWRvbmx5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgIHouY3VzdG9tICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuZnVuY3Rpb24gY2xlYW5QYXJhbXMocGFyYW1zLCBkYXRhKSB7XG4gICAgY29uc3QgcCA9IHR5cGVvZiBwYXJhbXMgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcyhkYXRhKSA6IHR5cGVvZiBwYXJhbXMgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHBhcmFtcyB9IDogcGFyYW1zO1xuICAgIGNvbnN0IHAyID0gdHlwZW9mIHAgPT09IFwic3RyaW5nXCIgPyB7IG1lc3NhZ2U6IHAgfSA6IHA7XG4gICAgcmV0dXJuIHAyO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGN1c3RvbShjaGVjaywgX3BhcmFtcyA9IHt9LCBcbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBQYXNzIGBmYXRhbGAgaW50byB0aGUgcGFyYW1zIG9iamVjdCBpbnN0ZWFkOlxuICpcbiAqIGBgYHRzXG4gKiB6LnN0cmluZygpLmN1c3RvbSgodmFsKSA9PiB2YWwubGVuZ3RoID4gNSwgeyBmYXRhbDogZmFsc2UgfSlcbiAqIGBgYFxuICpcbiAqL1xuZmF0YWwpIHtcbiAgICBpZiAoY2hlY2spXG4gICAgICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCkuc3VwZXJSZWZpbmUoKGRhdGEsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IGNoZWNrKGRhdGEpO1xuICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHIudGhlbigocikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX2ZhdGFsID0gcGFyYW1zLmZhdGFsID8/IGZhdGFsID8/IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGNsZWFuUGFyYW1zKF9wYXJhbXMsIGRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh7IGNvZGU6IFwiY3VzdG9tXCIsIC4uLnBhcmFtcywgZmF0YWw6IF9mYXRhbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSk7XG4gICAgcmV0dXJuIFpvZEFueS5jcmVhdGUoKTtcbn1cbmV4cG9ydCB7IFpvZFR5cGUgYXMgU2NoZW1hLCBab2RUeXBlIGFzIFpvZFNjaGVtYSB9O1xuZXhwb3J0IGNvbnN0IGxhdGUgPSB7XG4gICAgb2JqZWN0OiBab2RPYmplY3QubGF6eWNyZWF0ZSxcbn07XG5leHBvcnQgdmFyIFpvZEZpcnN0UGFydHlUeXBlS2luZDtcbihmdW5jdGlvbiAoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kKSB7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU3RyaW5nXCJdID0gXCJab2RTdHJpbmdcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdW1iZXJcIl0gPSBcIlpvZE51bWJlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5hTlwiXSA9IFwiWm9kTmFOXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQmlnSW50XCJdID0gXCJab2RCaWdJbnRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCb29sZWFuXCJdID0gXCJab2RCb29sZWFuXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGF0ZVwiXSA9IFwiWm9kRGF0ZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN5bWJvbFwiXSA9IFwiWm9kU3ltYm9sXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5kZWZpbmVkXCJdID0gXCJab2RVbmRlZmluZWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROdWxsXCJdID0gXCJab2ROdWxsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQW55XCJdID0gXCJab2RBbnlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RVbmtub3duXCJdID0gXCJab2RVbmtub3duXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmV2ZXJcIl0gPSBcIlpvZE5ldmVyXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVm9pZFwiXSA9IFwiWm9kVm9pZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFycmF5XCJdID0gXCJab2RBcnJheVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9iamVjdFwiXSA9IFwiWm9kT2JqZWN0XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5pb25cIl0gPSBcIlpvZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCJdID0gXCJab2REaXNjcmltaW5hdGVkVW5pb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RJbnRlcnNlY3Rpb25cIl0gPSBcIlpvZEludGVyc2VjdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFR1cGxlXCJdID0gXCJab2RUdXBsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlY29yZFwiXSA9IFwiWm9kUmVjb3JkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTWFwXCJdID0gXCJab2RNYXBcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTZXRcIl0gPSBcIlpvZFNldFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEZ1bmN0aW9uXCJdID0gXCJab2RGdW5jdGlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZExhenlcIl0gPSBcIlpvZExhenlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMaXRlcmFsXCJdID0gXCJab2RMaXRlcmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRW51bVwiXSA9IFwiWm9kRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVmZmVjdHNcIl0gPSBcIlpvZEVmZmVjdHNcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYXRpdmVFbnVtXCJdID0gXCJab2ROYXRpdmVFbnVtXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kT3B0aW9uYWxcIl0gPSBcIlpvZE9wdGlvbmFsXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbGFibGVcIl0gPSBcIlpvZE51bGxhYmxlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kRGVmYXVsdFwiXSA9IFwiWm9kRGVmYXVsdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZENhdGNoXCJdID0gXCJab2RDYXRjaFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFByb21pc2VcIl0gPSBcIlpvZFByb21pc2VcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RCcmFuZGVkXCJdID0gXCJab2RCcmFuZGVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUGlwZWxpbmVcIl0gPSBcIlpvZFBpcGVsaW5lXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kUmVhZG9ubHlcIl0gPSBcIlpvZFJlYWRvbmx5XCI7XG59KShab2RGaXJzdFBhcnR5VHlwZUtpbmQgfHwgKFpvZEZpcnN0UGFydHlUeXBlS2luZCA9IHt9KSk7XG4vLyByZXF1aXJlcyBUUyA0LjQrXG5jbGFzcyBDbGFzcyB7XG4gICAgY29uc3RydWN0b3IoLi4uXykgeyB9XG59XG5jb25zdCBpbnN0YW5jZU9mVHlwZSA9IChcbi8vIGNvbnN0IGluc3RhbmNlT2ZUeXBlID0gPFQgZXh0ZW5kcyBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuY2xzLCBwYXJhbXMgPSB7XG4gICAgbWVzc2FnZTogYElucHV0IG5vdCBpbnN0YW5jZSBvZiAke2Nscy5uYW1lfWAsXG59KSA9PiBjdXN0b20oKGRhdGEpID0+IGRhdGEgaW5zdGFuY2VvZiBjbHMsIHBhcmFtcyk7XG5jb25zdCBzdHJpbmdUeXBlID0gWm9kU3RyaW5nLmNyZWF0ZTtcbmNvbnN0IG51bWJlclR5cGUgPSBab2ROdW1iZXIuY3JlYXRlO1xuY29uc3QgbmFuVHlwZSA9IFpvZE5hTi5jcmVhdGU7XG5jb25zdCBiaWdJbnRUeXBlID0gWm9kQmlnSW50LmNyZWF0ZTtcbmNvbnN0IGJvb2xlYW5UeXBlID0gWm9kQm9vbGVhbi5jcmVhdGU7XG5jb25zdCBkYXRlVHlwZSA9IFpvZERhdGUuY3JlYXRlO1xuY29uc3Qgc3ltYm9sVHlwZSA9IFpvZFN5bWJvbC5jcmVhdGU7XG5jb25zdCB1bmRlZmluZWRUeXBlID0gWm9kVW5kZWZpbmVkLmNyZWF0ZTtcbmNvbnN0IG51bGxUeXBlID0gWm9kTnVsbC5jcmVhdGU7XG5jb25zdCBhbnlUeXBlID0gWm9kQW55LmNyZWF0ZTtcbmNvbnN0IHVua25vd25UeXBlID0gWm9kVW5rbm93bi5jcmVhdGU7XG5jb25zdCBuZXZlclR5cGUgPSBab2ROZXZlci5jcmVhdGU7XG5jb25zdCB2b2lkVHlwZSA9IFpvZFZvaWQuY3JlYXRlO1xuY29uc3QgYXJyYXlUeXBlID0gWm9kQXJyYXkuY3JlYXRlO1xuY29uc3Qgb2JqZWN0VHlwZSA9IFpvZE9iamVjdC5jcmVhdGU7XG5jb25zdCBzdHJpY3RPYmplY3RUeXBlID0gWm9kT2JqZWN0LnN0cmljdENyZWF0ZTtcbmNvbnN0IHVuaW9uVHlwZSA9IFpvZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgPSBab2REaXNjcmltaW5hdGVkVW5pb24uY3JlYXRlO1xuY29uc3QgaW50ZXJzZWN0aW9uVHlwZSA9IFpvZEludGVyc2VjdGlvbi5jcmVhdGU7XG5jb25zdCB0dXBsZVR5cGUgPSBab2RUdXBsZS5jcmVhdGU7XG5jb25zdCByZWNvcmRUeXBlID0gWm9kUmVjb3JkLmNyZWF0ZTtcbmNvbnN0IG1hcFR5cGUgPSBab2RNYXAuY3JlYXRlO1xuY29uc3Qgc2V0VHlwZSA9IFpvZFNldC5jcmVhdGU7XG5jb25zdCBmdW5jdGlvblR5cGUgPSBab2RGdW5jdGlvbi5jcmVhdGU7XG5jb25zdCBsYXp5VHlwZSA9IFpvZExhenkuY3JlYXRlO1xuY29uc3QgbGl0ZXJhbFR5cGUgPSBab2RMaXRlcmFsLmNyZWF0ZTtcbmNvbnN0IGVudW1UeXBlID0gWm9kRW51bS5jcmVhdGU7XG5jb25zdCBuYXRpdmVFbnVtVHlwZSA9IFpvZE5hdGl2ZUVudW0uY3JlYXRlO1xuY29uc3QgcHJvbWlzZVR5cGUgPSBab2RQcm9taXNlLmNyZWF0ZTtcbmNvbnN0IGVmZmVjdHNUeXBlID0gWm9kRWZmZWN0cy5jcmVhdGU7XG5jb25zdCBvcHRpb25hbFR5cGUgPSBab2RPcHRpb25hbC5jcmVhdGU7XG5jb25zdCBudWxsYWJsZVR5cGUgPSBab2ROdWxsYWJsZS5jcmVhdGU7XG5jb25zdCBwcmVwcm9jZXNzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlV2l0aFByZXByb2Nlc3M7XG5jb25zdCBwaXBlbGluZVR5cGUgPSBab2RQaXBlbGluZS5jcmVhdGU7XG5jb25zdCBvc3RyaW5nID0gKCkgPT4gc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvbnVtYmVyID0gKCkgPT4gbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBvYm9vbGVhbiA9ICgpID0+IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKTtcbmV4cG9ydCBjb25zdCBjb2VyY2UgPSB7XG4gICAgc3RyaW5nOiAoKGFyZykgPT4gWm9kU3RyaW5nLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBudW1iZXI6ICgoYXJnKSA9PiBab2ROdW1iZXIuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGJvb2xlYW46ICgoYXJnKSA9PiBab2RCb29sZWFuLmNyZWF0ZSh7XG4gICAgICAgIC4uLmFyZyxcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgIH0pKSxcbiAgICBiaWdpbnQ6ICgoYXJnKSA9PiBab2RCaWdJbnQuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGRhdGU6ICgoYXJnKSA9PiBab2REYXRlLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbn07XG5leHBvcnQgeyBhbnlUeXBlIGFzIGFueSwgYXJyYXlUeXBlIGFzIGFycmF5LCBiaWdJbnRUeXBlIGFzIGJpZ2ludCwgYm9vbGVhblR5cGUgYXMgYm9vbGVhbiwgZGF0ZVR5cGUgYXMgZGF0ZSwgZGlzY3JpbWluYXRlZFVuaW9uVHlwZSBhcyBkaXNjcmltaW5hdGVkVW5pb24sIGVmZmVjdHNUeXBlIGFzIGVmZmVjdCwgZW51bVR5cGUgYXMgZW51bSwgZnVuY3Rpb25UeXBlIGFzIGZ1bmN0aW9uLCBpbnN0YW5jZU9mVHlwZSBhcyBpbnN0YW5jZW9mLCBpbnRlcnNlY3Rpb25UeXBlIGFzIGludGVyc2VjdGlvbiwgbGF6eVR5cGUgYXMgbGF6eSwgbGl0ZXJhbFR5cGUgYXMgbGl0ZXJhbCwgbWFwVHlwZSBhcyBtYXAsIG5hblR5cGUgYXMgbmFuLCBuYXRpdmVFbnVtVHlwZSBhcyBuYXRpdmVFbnVtLCBuZXZlclR5cGUgYXMgbmV2ZXIsIG51bGxUeXBlIGFzIG51bGwsIG51bGxhYmxlVHlwZSBhcyBudWxsYWJsZSwgbnVtYmVyVHlwZSBhcyBudW1iZXIsIG9iamVjdFR5cGUgYXMgb2JqZWN0LCBvYm9vbGVhbiwgb251bWJlciwgb3B0aW9uYWxUeXBlIGFzIG9wdGlvbmFsLCBvc3RyaW5nLCBwaXBlbGluZVR5cGUgYXMgcGlwZWxpbmUsIHByZXByb2Nlc3NUeXBlIGFzIHByZXByb2Nlc3MsIHByb21pc2VUeXBlIGFzIHByb21pc2UsIHJlY29yZFR5cGUgYXMgcmVjb3JkLCBzZXRUeXBlIGFzIHNldCwgc3RyaWN0T2JqZWN0VHlwZSBhcyBzdHJpY3RPYmplY3QsIHN0cmluZ1R5cGUgYXMgc3RyaW5nLCBzeW1ib2xUeXBlIGFzIHN5bWJvbCwgZWZmZWN0c1R5cGUgYXMgdHJhbnNmb3JtZXIsIHR1cGxlVHlwZSBhcyB0dXBsZSwgdW5kZWZpbmVkVHlwZSBhcyB1bmRlZmluZWQsIHVuaW9uVHlwZSBhcyB1bmlvbiwgdW5rbm93blR5cGUgYXMgdW5rbm93biwgdm9pZFR5cGUgYXMgdm9pZCwgfTtcbmV4cG9ydCBjb25zdCBORVZFUiA9IElOVkFMSUQ7XG4iLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VBbnlEZWYoKSB7XG4gICAgcmV0dXJuIHt9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW55Lm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyB9IGZyb20gXCIuLi9lcnJvck1lc3NhZ2VzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VBcnJheURlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgfTtcbiAgICBpZiAoZGVmLnR5cGU/Ll9kZWY/LnR5cGVOYW1lICE9PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQW55KSB7XG4gICAgICAgIHJlcy5pdGVtcyA9IHBhcnNlRGVmKGRlZi50eXBlLl9kZWYsIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcyddLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGRlZi5taW5MZW5ndGgpIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5JdGVtcycsIGRlZi5taW5MZW5ndGgudmFsdWUsIGRlZi5taW5MZW5ndGgubWVzc2FnZSwgcmVmcyk7XG4gICAgfVxuICAgIGlmIChkZWYubWF4TGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4SXRlbXMnLCBkZWYubWF4TGVuZ3RoLnZhbHVlLCBkZWYubWF4TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICBpZiAoZGVmLmV4YWN0TGVuZ3RoKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluSXRlbXMnLCBkZWYuZXhhY3RMZW5ndGgudmFsdWUsIGRlZi5leGFjdExlbmd0aC5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhJdGVtcycsIGRlZi5leGFjdExlbmd0aC52YWx1ZSwgZGVmLmV4YWN0TGVuZ3RoLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXkubWpzLm1hcCIsImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUJpZ2ludERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJyxcbiAgICAgICAgZm9ybWF0OiAnaW50NjQnLFxuICAgIH07XG4gICAgaWYgKCFkZWYuY2hlY2tzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdleGNsdXNpdmVNYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBsZU9mJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ211bHRpcGxlT2YnLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJpZ2ludC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQm9vbGVhbkRlZigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJvb2xlYW4ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQnJhbmRlZERlZihfZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKF9kZWYudHlwZS5fZGVmLCByZWZzKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJyYW5kZWQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlQ2F0Y2hEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2F0Y2gubWpzLm1hcCIsImltcG9ydCB7IHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBvdmVycmlkZURhdGVTdHJhdGVneSkge1xuICAgIGNvbnN0IHN0cmF0ZWd5ID0gb3ZlcnJpZGVEYXRlU3RyYXRlZ3kgPz8gcmVmcy5kYXRlU3RyYXRlZ3k7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc3RyYXRlZ3kpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhbnlPZjogc3RyYXRlZ3kubWFwKChpdGVtLCBpKSA9PiBwYXJzZURhdGVEZWYoZGVmLCByZWZzLCBpdGVtKSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN3aXRjaCAoc3RyYXRlZ3kpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgY2FzZSAnZm9ybWF0OmRhdGUtdGltZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUtdGltZScsXG4gICAgICAgICAgICB9O1xuICAgICAgICBjYXNlICdmb3JtYXQ6ZGF0ZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2RhdGUnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAnaW50ZWdlcic6XG4gICAgICAgICAgICByZXR1cm4gaW50ZWdlckRhdGVQYXJzZXIoZGVmLCByZWZzKTtcbiAgICB9XG59XG5jb25zdCBpbnRlZ2VyRGF0ZVBhcnNlciA9IChkZWYsIHJlZnMpID0+IHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdpbnRlZ2VyJyxcbiAgICAgICAgZm9ybWF0OiAndW5peC10aW1lJyxcbiAgICB9O1xuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIGRlZi5jaGVja3MpIHtcbiAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICBjYXNlICdtaW4nOlxuICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCAvLyBUaGlzIGlzIGluIG1pbGxpc2Vjb25kc1xuICAgICAgICAgICAgICAgIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heGltdW0nLCBjaGVjay52YWx1ZSwgLy8gVGhpcyBpcyBpbiBtaWxsaXNlY29uZHNcbiAgICAgICAgICAgICAgICBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGUubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRGVmYXVsdERlZihfZGVmLCByZWZzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4ucGFyc2VEZWYoX2RlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyksXG4gICAgICAgIGRlZmF1bHQ6IF9kZWYuZGVmYXVsdFZhbHVlKCksXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmF1bHQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRWZmZWN0c0RlZihfZGVmLCByZWZzLCBmb3JjZVJlc29sdXRpb24pIHtcbiAgICByZXR1cm4gcmVmcy5lZmZlY3RTdHJhdGVneSA9PT0gJ2lucHV0JyA/IHBhcnNlRGVmKF9kZWYuc2NoZW1hLl9kZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbikgOiB7fTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVmZmVjdHMubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZUVudW1EZWYoZGVmKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgIGVudW06IFsuLi5kZWYudmFsdWVzXSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW51bS5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5jb25zdCBpc0pzb25TY2hlbWE3QWxsT2ZUeXBlID0gKHR5cGUpID0+IHtcbiAgICBpZiAoJ3R5cGUnIGluIHR5cGUgJiYgdHlwZS50eXBlID09PSAnc3RyaW5nJylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiAnYWxsT2YnIGluIHR5cGU7XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSW50ZXJzZWN0aW9uRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IGFsbE9mID0gW1xuICAgICAgICBwYXJzZURlZihkZWYubGVmdC5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWxsT2YnLCAnMCddLFxuICAgICAgICB9KSxcbiAgICAgICAgcGFyc2VEZWYoZGVmLnJpZ2h0Ll9kZWYsIHtcbiAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsICcxJ10sXG4gICAgICAgIH0pLFxuICAgIF0uZmlsdGVyKCh4KSA9PiAhIXgpO1xuICAgIGxldCB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSByZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWEyMDE5LTA5JyA/IHsgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzOiBmYWxzZSB9IDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IG1lcmdlZEFsbE9mID0gW107XG4gICAgLy8gSWYgZWl0aGVyIG9mIHRoZSBzY2hlbWFzIGlzIGFuIGFsbE9mLCBtZXJnZSB0aGVtIGludG8gYSBzaW5nbGUgYWxsT2ZcbiAgICBhbGxPZi5mb3JFYWNoKChzY2hlbWEpID0+IHtcbiAgICAgICAgaWYgKGlzSnNvblNjaGVtYTdBbGxPZlR5cGUoc2NoZW1hKSkge1xuICAgICAgICAgICAgbWVyZ2VkQWxsT2YucHVzaCguLi5zY2hlbWEuYWxsT2YpO1xuICAgICAgICAgICAgaWYgKHNjaGVtYS51bmV2YWx1YXRlZFByb3BlcnRpZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vIElmIG9uZSBvZiB0aGUgc2NoZW1hcyBoYXMgbm8gdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzIHNldCxcbiAgICAgICAgICAgICAgICAvLyB0aGUgbWVyZ2VkIHNjaGVtYSBzaG91bGQgYWxzbyBoYXZlIG5vIHVuZXZhbHVhdGVkUHJvcGVydGllcyBzZXRcbiAgICAgICAgICAgICAgICB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbmVzdGVkU2NoZW1hID0gc2NoZW1hO1xuICAgICAgICAgICAgaWYgKCdhZGRpdGlvbmFsUHJvcGVydGllcycgaW4gc2NoZW1hICYmIHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGFkZGl0aW9uYWxQcm9wZXJ0aWVzLCAuLi5yZXN0IH0gPSBzY2hlbWE7XG4gICAgICAgICAgICAgICAgbmVzdGVkU2NoZW1hID0gcmVzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEFzIHNvb24gYXMgb25lIG9mIHRoZSBzY2hlbWFzIGhhcyBhZGRpdGlvbmFsUHJvcGVydGllcyBzZXQgbm90IHRvIGZhbHNlLCB3ZSBhbGxvdyB1bmV2YWx1YXRlZFByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICB1bmV2YWx1YXRlZFByb3BlcnRpZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtZXJnZWRBbGxPZi5wdXNoKG5lc3RlZFNjaGVtYSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbWVyZ2VkQWxsT2YubGVuZ3RoID9cbiAgICAgICAge1xuICAgICAgICAgICAgYWxsT2Y6IG1lcmdlZEFsbE9mLFxuICAgICAgICAgICAgLi4udW5ldmFsdWF0ZWRQcm9wZXJ0aWVzLFxuICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJzZWN0aW9uLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VMaXRlcmFsRGVmKGRlZiwgcmVmcykge1xuICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0eXBlb2YgZGVmLnZhbHVlO1xuICAgIGlmIChwYXJzZWRUeXBlICE9PSAnYmlnaW50JyAmJlxuICAgICAgICBwYXJzZWRUeXBlICE9PSAnbnVtYmVyJyAmJlxuICAgICAgICBwYXJzZWRUeXBlICE9PSAnYm9vbGVhbicgJiZcbiAgICAgICAgcGFyc2VkVHlwZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IEFycmF5LmlzQXJyYXkoZGVmLnZhbHVlKSA/ICdhcnJheScgOiAnb2JqZWN0JyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBwYXJzZWRUeXBlID09PSAnYmlnaW50JyA/ICdpbnRlZ2VyJyA6IHBhcnNlZFR5cGUsXG4gICAgICAgICAgICBlbnVtOiBbZGVmLnZhbHVlXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZSA9PT0gJ2JpZ2ludCcgPyAnaW50ZWdlcicgOiBwYXJzZWRUeXBlLFxuICAgICAgICBjb25zdDogZGVmLnZhbHVlLFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXRlcmFsLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5sZXQgZW1vamlSZWdleDtcbi8qKlxuICogR2VuZXJhdGVkIGZyb20gdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbnMgZm91bmQgaGVyZSBhcyBvZiAyMDI0LTA1LTIyOlxuICogaHR0cHM6Ly9naXRodWIuY29tL2NvbGluaGFja3Mvem9kL2Jsb2IvbWFzdGVyL3NyYy90eXBlcy50cy5cbiAqXG4gKiBFeHByZXNzaW9ucyB3aXRoIC9pIGZsYWcgaGF2ZSBiZWVuIGNoYW5nZWQgYWNjb3JkaW5nbHkuXG4gKi9cbmV4cG9ydCBjb25zdCB6b2RQYXR0ZXJucyA9IHtcbiAgICAvKipcbiAgICAgKiBgY2Agd2FzIGNoYW5nZWQgdG8gYFtjQ11gIHRvIHJlcGxpY2F0ZSAvaSBmbGFnXG4gICAgICovXG4gICAgY3VpZDogL15bY0NdW15cXHMtXXs4LH0kLyxcbiAgICBjdWlkMjogL15bMC05YS16XSskLyxcbiAgICB1bGlkOiAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kLyxcbiAgICAvKipcbiAgICAgKiBgYS16YCB3YXMgYWRkZWQgdG8gcmVwbGljYXRlIC9pIGZsYWdcbiAgICAgKi9cbiAgICBlbWFpbDogL14oPyFcXC4pKD8hLipcXC5cXC4pKFthLXpBLVowLTlfJytcXC1cXC5dKilbYS16QS1aMC05XystXUAoW2EtekEtWjAtOV1bYS16QS1aMC05XFwtXSpcXC4pK1thLXpBLVpdezIsfSQvLFxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdGVkIGEgdmFsaWQgVW5pY29kZSBSZWdFeHBcbiAgICAgKlxuICAgICAqIExhemlseSBpbnN0YW50aWF0ZSBzaW5jZSB0aGlzIHR5cGUgb2YgcmVnZXggaXNuJ3Qgc3VwcG9ydGVkXG4gICAgICogaW4gYWxsIGVudnMgKGUuZy4gUmVhY3QgTmF0aXZlKS5cbiAgICAgKlxuICAgICAqIFNlZTpcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vY29saW5oYWNrcy96b2QvaXNzdWVzLzI0MzNcbiAgICAgKiBGaXggaW4gWm9kOlxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jb2xpbmhhY2tzL3pvZC9jb21taXQvOTM0MGZkNTFlNDg1NzZhNzVhZGM5MTliZmY2NWRiYzRhNWQ0Yzk5YlxuICAgICAqL1xuICAgIGVtb2ppOiAoKSA9PiB7XG4gICAgICAgIGlmIChlbW9qaVJlZ2V4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGVtb2ppUmVnZXggPSBSZWdFeHAoJ14oXFxcXHB7RXh0ZW5kZWRfUGljdG9ncmFwaGljfXxcXFxccHtFbW9qaV9Db21wb25lbnR9KSskJywgJ3UnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW1vamlSZWdleDtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFVudXNlZFxuICAgICAqL1xuICAgIHV1aWQ6IC9eWzAtOWEtZkEtRl17OH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17NH1cXGItWzAtOWEtZkEtRl17MTJ9JC8sXG4gICAgLyoqXG4gICAgICogVW51c2VkXG4gICAgICovXG4gICAgaXB2NDogL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSkkLyxcbiAgICAvKipcbiAgICAgKiBVbnVzZWRcbiAgICAgKi9cbiAgICBpcHY2OiAvXigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSkkLyxcbiAgICBiYXNlNjQ6IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLyxcbiAgICBuYW5vaWQ6IC9eW2EtekEtWjAtOV8tXXsyMX0kLyxcbn07XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKSB7XG4gICAgY29uc3QgcmVzID0ge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICB9O1xuICAgIGZ1bmN0aW9uIHByb2Nlc3NQYXR0ZXJuKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiByZWZzLnBhdHRlcm5TdHJhdGVneSA9PT0gJ2VzY2FwZScgPyBlc2NhcGVOb25BbHBoYU51bWVyaWModmFsdWUpIDogdmFsdWU7XG4gICAgfVxuICAgIGlmIChkZWYuY2hlY2tzKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgc3dpdGNoIChjaGVjay5raW5kKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbWluJzpcbiAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtaW5MZW5ndGgnLCB0eXBlb2YgcmVzLm1pbkxlbmd0aCA9PT0gJ251bWJlcicgPyBNYXRoLm1heChyZXMubWluTGVuZ3RoLCBjaGVjay52YWx1ZSkgOiBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4TGVuZ3RoJywgdHlwZW9mIHJlcy5tYXhMZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5taW4ocmVzLm1heExlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmVmcy5lbWFpbFN0cmF0ZWd5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmb3JtYXQ6ZW1haWwnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdlbWFpbCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZm9ybWF0Omlkbi1lbWFpbCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2lkbi1lbWFpbCcsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncGF0dGVybjp6b2QnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5lbWFpbCwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndXJsJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ3VyaScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICd1dWlkJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ3V1aWQnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncmVnZXgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgY2hlY2sucmVnZXgsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdWlkJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmN1aWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjdWlkMic6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5jdWlkMiwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0YXJ0c1dpdGgnOlxuICAgICAgICAgICAgICAgICAgICBhZGRQYXR0ZXJuKHJlcywgUmVnRXhwKGBeJHtwcm9jZXNzUGF0dGVybihjaGVjay52YWx1ZSl9YCksIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbmRzV2l0aCc6XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBSZWdFeHAoYCR7cHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpfSRgKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2RhdGV0aW1lJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2RhdGUtdGltZScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2RhdGUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndGltZSc6XG4gICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICd0aW1lJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2R1cmF0aW9uJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2R1cmF0aW9uJywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xlbmd0aCc6XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluTGVuZ3RoJywgdHlwZW9mIHJlcy5taW5MZW5ndGggPT09ICdudW1iZXInID8gTWF0aC5tYXgocmVzLm1pbkxlbmd0aCwgY2hlY2sudmFsdWUpIDogY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21heExlbmd0aCcsIHR5cGVvZiByZXMubWF4TGVuZ3RoID09PSAnbnVtYmVyJyA/IE1hdGgubWluKHJlcy5tYXhMZW5ndGgsIGNoZWNrLnZhbHVlKSA6IGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnaW5jbHVkZXMnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCBSZWdFeHAocHJvY2Vzc1BhdHRlcm4oY2hlY2sudmFsdWUpKSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICdpcCc6IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09ICd2NicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpcHY0JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLnZlcnNpb24gIT09ICd2NCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZvcm1hdChyZXMsICdpcHY2JywgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ2Vtb2ppJzpcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLmVtb2ppLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndWxpZCc6IHtcbiAgICAgICAgICAgICAgICAgICAgYWRkUGF0dGVybihyZXMsIHpvZFBhdHRlcm5zLnVsaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnYmFzZTY0Jzoge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlZnMuYmFzZTY0U3RyYXRlZ3kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zvcm1hdDpiaW5hcnknOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkRm9ybWF0KHJlcywgJ2JpbmFyeScsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnY29udGVudEVuY29kaW5nOmJhc2U2NCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ2NvbnRlbnRFbmNvZGluZycsICdiYXNlNjQnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3BhdHRlcm46em9kJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5iYXNlNjQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICduYW5vaWQnOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFBhdHRlcm4ocmVzLCB6b2RQYXR0ZXJucy5uYW5vaWQsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXNlICd0b0xvd2VyQ2FzZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAndG9VcHBlckNhc2UnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3RyaW0nOlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAoKF8pID0+IHsgfSkoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5jb25zdCBlc2NhcGVOb25BbHBoYU51bWVyaWMgPSAodmFsdWUpID0+IEFycmF5LmZyb20odmFsdWUpXG4gICAgLm1hcCgoYykgPT4gKC9bYS16QS1aMC05XS8udGVzdChjKSA/IGMgOiBgXFxcXCR7Y31gKSlcbiAgICAuam9pbignJyk7XG5jb25zdCBhZGRGb3JtYXQgPSAoc2NoZW1hLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIGlmIChzY2hlbWEuZm9ybWF0IHx8IHNjaGVtYS5hbnlPZj8uc29tZSgoeCkgPT4geC5mb3JtYXQpKSB7XG4gICAgICAgIGlmICghc2NoZW1hLmFueU9mKSB7XG4gICAgICAgICAgICBzY2hlbWEuYW55T2YgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NoZW1hLmZvcm1hdCkge1xuICAgICAgICAgICAgc2NoZW1hLmFueU9mLnB1c2goe1xuICAgICAgICAgICAgICAgIGZvcm1hdDogc2NoZW1hLmZvcm1hdCxcbiAgICAgICAgICAgICAgICAuLi4oc2NoZW1hLmVycm9yTWVzc2FnZSAmJlxuICAgICAgICAgICAgICAgICAgICByZWZzLmVycm9yTWVzc2FnZXMgJiYge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBzY2hlbWEuZXJyb3JNZXNzYWdlLmZvcm1hdCB9LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxldGUgc2NoZW1hLmZvcm1hdDtcbiAgICAgICAgICAgIGlmIChzY2hlbWEuZXJyb3JNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2UuZm9ybWF0O1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbnlPZi5wdXNoKHtcbiAgICAgICAgICAgIGZvcm1hdDogdmFsdWUsXG4gICAgICAgICAgICAuLi4obWVzc2FnZSAmJiByZWZzLmVycm9yTWVzc2FnZXMgJiYgeyBlcnJvck1lc3NhZ2U6IHsgZm9ybWF0OiBtZXNzYWdlIH0gfSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhzY2hlbWEsICdmb3JtYXQnLCB2YWx1ZSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbmNvbnN0IGFkZFBhdHRlcm4gPSAoc2NoZW1hLCByZWdleCwgbWVzc2FnZSwgcmVmcykgPT4ge1xuICAgIGlmIChzY2hlbWEucGF0dGVybiB8fCBzY2hlbWEuYWxsT2Y/LnNvbWUoKHgpID0+IHgucGF0dGVybikpIHtcbiAgICAgICAgaWYgKCFzY2hlbWEuYWxsT2YpIHtcbiAgICAgICAgICAgIHNjaGVtYS5hbGxPZiA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY2hlbWEucGF0dGVybikge1xuICAgICAgICAgICAgc2NoZW1hLmFsbE9mLnB1c2goe1xuICAgICAgICAgICAgICAgIHBhdHRlcm46IHNjaGVtYS5wYXR0ZXJuLFxuICAgICAgICAgICAgICAgIC4uLihzY2hlbWEuZXJyb3JNZXNzYWdlICYmXG4gICAgICAgICAgICAgICAgICAgIHJlZnMuZXJyb3JNZXNzYWdlcyAmJiB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogeyBwYXR0ZXJuOiBzY2hlbWEuZXJyb3JNZXNzYWdlLnBhdHRlcm4gfSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5wYXR0ZXJuO1xuICAgICAgICAgICAgaWYgKHNjaGVtYS5lcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgc2NoZW1hLmVycm9yTWVzc2FnZS5wYXR0ZXJuO1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhzY2hlbWEuZXJyb3JNZXNzYWdlKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNjaGVtYS5lcnJvck1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNjaGVtYS5hbGxPZi5wdXNoKHtcbiAgICAgICAgICAgIHBhdHRlcm46IHByb2Nlc3NSZWdFeHAocmVnZXgsIHJlZnMpLFxuICAgICAgICAgICAgLi4uKG1lc3NhZ2UgJiYgcmVmcy5lcnJvck1lc3NhZ2VzICYmIHsgZXJyb3JNZXNzYWdlOiB7IHBhdHRlcm46IG1lc3NhZ2UgfSB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ3BhdHRlcm4nLCBwcm9jZXNzUmVnRXhwKHJlZ2V4LCByZWZzKSwgbWVzc2FnZSwgcmVmcyk7XG4gICAgfVxufTtcbi8vIE11dGF0ZSB6LnN0cmluZy5yZWdleCgpIGluIGEgYmVzdCBhdHRlbXB0IHRvIGFjY29tbW9kYXRlIGZvciByZWdleCBmbGFncyB3aGVuIGFwcGx5UmVnZXhGbGFncyBpcyB0cnVlXG5jb25zdCBwcm9jZXNzUmVnRXhwID0gKHJlZ2V4T3JGdW5jdGlvbiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IHJlZ2V4ID0gdHlwZW9mIHJlZ2V4T3JGdW5jdGlvbiA9PT0gJ2Z1bmN0aW9uJyA/IHJlZ2V4T3JGdW5jdGlvbigpIDogcmVnZXhPckZ1bmN0aW9uO1xuICAgIGlmICghcmVmcy5hcHBseVJlZ2V4RmxhZ3MgfHwgIXJlZ2V4LmZsYWdzKVxuICAgICAgICByZXR1cm4gcmVnZXguc291cmNlO1xuICAgIC8vIEN1cnJlbnRseSBoYW5kbGVkIGZsYWdzXG4gICAgY29uc3QgZmxhZ3MgPSB7XG4gICAgICAgIGk6IHJlZ2V4LmZsYWdzLmluY2x1ZGVzKCdpJyksIC8vIENhc2UtaW5zZW5zaXRpdmVcbiAgICAgICAgbTogcmVnZXguZmxhZ3MuaW5jbHVkZXMoJ20nKSwgLy8gYF5gIGFuZCBgJGAgbWF0Y2hlcyBhZGphY2VudCB0byBuZXdsaW5lIGNoYXJhY3RlcnNcbiAgICAgICAgczogcmVnZXguZmxhZ3MuaW5jbHVkZXMoJ3MnKSwgLy8gYC5gIG1hdGNoZXMgbmV3bGluZXNcbiAgICB9O1xuICAgIC8vIFRoZSBnZW5lcmFsIHByaW5jaXBsZSBoZXJlIGlzIHRvIHN0ZXAgdGhyb3VnaCBlYWNoIGNoYXJhY3Rlciwgb25lIGF0IGEgdGltZSwgYXBwbHlpbmcgbXV0YXRpb25zIGFzIGZsYWdzIHJlcXVpcmUuIFdlIGtlZXAgdHJhY2sgd2hlbiB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaXMgZXNjYXBlZCwgYW5kIHdoZW4gaXQncyBpbnNpZGUgYSBncm91cCAvbGlrZSBbdGhpc10vIG9yIChhbHNvKSBhIHJhbmdlIGxpa2UgL1thLXpdLy4gVGhlIGZvbGxvd2luZyBpcyBmYWlybHkgYnJpdHRsZSBpbXBlcmF0aXZlIGNvZGU7IGVkaXQgYXQgeW91ciBwZXJpbCFcbiAgICBjb25zdCBzb3VyY2UgPSBmbGFncy5pID8gcmVnZXguc291cmNlLnRvTG93ZXJDYXNlKCkgOiByZWdleC5zb3VyY2U7XG4gICAgbGV0IHBhdHRlcm4gPSAnJztcbiAgICBsZXQgaXNFc2NhcGVkID0gZmFsc2U7XG4gICAgbGV0IGluQ2hhckdyb3VwID0gZmFsc2U7XG4gICAgbGV0IGluQ2hhclJhbmdlID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGlzRXNjYXBlZCkge1xuICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICBpc0VzY2FwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmbGFncy5pKSB7XG4gICAgICAgICAgICBpZiAoaW5DaGFyR3JvdXApIHtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlW2ldLm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbkNoYXJSYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0dGVybiArPSBzb3VyY2VbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAke3NvdXJjZVtpIC0gMl19LSR7c291cmNlW2ldfWAudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQ2hhclJhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2kgKyAxXSA9PT0gJy0nICYmIHNvdXJjZVtpICsgMl0/Lm1hdGNoKC9bYS16XS8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IHNvdXJjZVtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluQ2hhclJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdHRlcm4gKz0gYCR7c291cmNlW2ldfSR7c291cmNlW2ldLnRvVXBwZXJDYXNlKCl9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzb3VyY2VbaV0ubWF0Y2goL1thLXpdLykpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGBbJHtzb3VyY2VbaV19JHtzb3VyY2VbaV0udG9VcHBlckNhc2UoKX1dYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MubSkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZVtpXSA9PT0gJ14nKSB7XG4gICAgICAgICAgICAgICAgcGF0dGVybiArPSBgKF58KD88PVtcXHJcXG5dKSlgO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc291cmNlW2ldID09PSAnJCcpIHtcbiAgICAgICAgICAgICAgICBwYXR0ZXJuICs9IGAoJHwoPz1bXFxyXFxuXSkpYDtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ3MucyAmJiBzb3VyY2VbaV0gPT09ICcuJykge1xuICAgICAgICAgICAgcGF0dGVybiArPSBpbkNoYXJHcm91cCA/IGAke3NvdXJjZVtpXX1cXHJcXG5gIDogYFske3NvdXJjZVtpXX1cXHJcXG5dYDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHBhdHRlcm4gKz0gc291cmNlW2ldO1xuICAgICAgICBpZiAoc291cmNlW2ldID09PSAnXFxcXCcpIHtcbiAgICAgICAgICAgIGlzRXNjYXBlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5DaGFyR3JvdXAgJiYgc291cmNlW2ldID09PSAnXScpIHtcbiAgICAgICAgICAgIGluQ2hhckdyb3VwID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWluQ2hhckdyb3VwICYmIHNvdXJjZVtpXSA9PT0gJ1snKSB7XG4gICAgICAgICAgICBpbkNoYXJHcm91cCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVnZXhUZXN0ID0gbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBjb252ZXJ0IHJlZ2V4IHBhdHRlcm4gYXQgJHtyZWZzLmN1cnJlbnRQYXRoLmpvaW4oJy8nKX0gdG8gYSBmbGFnLWluZGVwZW5kZW50IGZvcm0hIEZhbGxpbmcgYmFjayB0byB0aGUgZmxhZy1pZ25vcmFudCBzb3VyY2VgKTtcbiAgICAgICAgcmV0dXJuIHJlZ2V4LnNvdXJjZTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdHRlcm47XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5nLm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiB9IGZyb20gXCIuL3N0cmluZy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycgJiYgZGVmLmtleVR5cGU/Ll9kZWYudHlwZU5hbWUgPT09IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgIHJlcXVpcmVkOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IGRlZi5rZXlUeXBlLl9kZWYudmFsdWVzLnJlZHVjZSgoYWNjLCBrZXkpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4uYWNjLFxuICAgICAgICAgICAgICAgIFtrZXldOiBwYXJzZURlZihkZWYudmFsdWVUeXBlLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAncHJvcGVydGllcycsIGtleV0sXG4gICAgICAgICAgICAgICAgfSkgPz8ge30sXG4gICAgICAgICAgICB9KSwge30pLFxuICAgICAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBzY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnYWRkaXRpb25hbFByb3BlcnRpZXMnXSxcbiAgICAgICAgfSkgPz8ge30sXG4gICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycpIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYTtcbiAgICB9XG4gICAgaWYgKGRlZi5rZXlUeXBlPy5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3RyaW5nICYmIGRlZi5rZXlUeXBlLl9kZWYuY2hlY2tzPy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qga2V5VHlwZSA9IE9iamVjdC5lbnRyaWVzKHBhcnNlU3RyaW5nRGVmKGRlZi5rZXlUeXBlLl9kZWYsIHJlZnMpKS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsdWVdKSA9PiAoa2V5ID09PSAndHlwZScgPyBhY2MgOiB7IC4uLmFjYywgW2tleV06IHZhbHVlIH0pLCB7fSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWVzOiBrZXlUeXBlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChkZWYua2V5VHlwZT8uX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnNjaGVtYSxcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZXM6IHtcbiAgICAgICAgICAgICAgICBlbnVtOiBkZWYua2V5VHlwZS5fZGVmLnZhbHVlcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBzY2hlbWE7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWNvcmQubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9yZWNvcmQubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNYXBEZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMubWFwU3RyYXRlZ3kgPT09ICdyZWNvcmQnKSB7XG4gICAgICAgIHJldHVybiBwYXJzZVJlY29yZERlZihkZWYsIHJlZnMpO1xuICAgIH1cbiAgICBjb25zdCBrZXlzID0gcGFyc2VEZWYoZGVmLmtleVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsICdpdGVtcycsICcwJ10sXG4gICAgfSkgfHwge307XG4gICAgY29uc3QgdmFsdWVzID0gcGFyc2VEZWYoZGVmLnZhbHVlVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2l0ZW1zJywgJ2l0ZW1zJywgJzEnXSxcbiAgICB9KSB8fCB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYXJyYXknLFxuICAgICAgICBtYXhJdGVtczogMTI1LFxuICAgICAgICBpdGVtczoge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIGl0ZW1zOiBba2V5cywgdmFsdWVzXSxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiAyLFxuICAgICAgICAgICAgbWF4SXRlbXM6IDIsXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hcC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTmF0aXZlRW51bURlZihkZWYpIHtcbiAgICBjb25zdCBvYmplY3QgPSBkZWYudmFsdWVzO1xuICAgIGNvbnN0IGFjdHVhbEtleXMgPSBPYmplY3Qua2V5cyhkZWYudmFsdWVzKS5maWx0ZXIoKGtleSkgPT4ge1xuICAgICAgICByZXR1cm4gdHlwZW9mIG9iamVjdFtvYmplY3Rba2V5XV0gIT09ICdudW1iZXInO1xuICAgIH0pO1xuICAgIGNvbnN0IGFjdHVhbFZhbHVlcyA9IGFjdHVhbEtleXMubWFwKChrZXkpID0+IG9iamVjdFtrZXldKTtcbiAgICBjb25zdCBwYXJzZWRUeXBlcyA9IEFycmF5LmZyb20obmV3IFNldChhY3R1YWxWYWx1ZXMubWFwKCh2YWx1ZXMpID0+IHR5cGVvZiB2YWx1ZXMpKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcGFyc2VkVHlwZXMubGVuZ3RoID09PSAxID9cbiAgICAgICAgICAgIHBhcnNlZFR5cGVzWzBdID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgICAgICAgJ3N0cmluZydcbiAgICAgICAgICAgICAgICA6ICdudW1iZXInXG4gICAgICAgICAgICA6IFsnc3RyaW5nJywgJ251bWJlciddLFxuICAgICAgICBlbnVtOiBhY3R1YWxWYWx1ZXMsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5hdGl2ZUVudW0ubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBwYXJzZU5ldmVyRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdDoge30sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5ldmVyLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gcGFyc2VOdWxsRGVmKHJlZnMpIHtcbiAgICByZXR1cm4gcmVmcy50YXJnZXQgPT09ICdvcGVuQXBpMycgP1xuICAgICAgICB7XG4gICAgICAgICAgICBlbnVtOiBbJ251bGwnXSxcbiAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgdHlwZTogJ251bGwnLFxuICAgICAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bnVsbC5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5leHBvcnQgY29uc3QgcHJpbWl0aXZlTWFwcGluZ3MgPSB7XG4gICAgWm9kU3RyaW5nOiAnc3RyaW5nJyxcbiAgICBab2ROdW1iZXI6ICdudW1iZXInLFxuICAgIFpvZEJpZ0ludDogJ2ludGVnZXInLFxuICAgIFpvZEJvb2xlYW46ICdib29sZWFuJyxcbiAgICBab2ROdWxsOiAnbnVsbCcsXG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5pb25EZWYoZGVmLCByZWZzKSB7XG4gICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnKVxuICAgICAgICByZXR1cm4gYXNBbnlPZihkZWYsIHJlZnMpO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBkZWYub3B0aW9ucyBpbnN0YW5jZW9mIE1hcCA/IEFycmF5LmZyb20oZGVmLm9wdGlvbnMudmFsdWVzKCkpIDogZGVmLm9wdGlvbnM7XG4gICAgLy8gVGhpcyBibG9ja3MgdHJpZXMgdG8gbG9vayBhaGVhZCBhIGJpdCB0byBwcm9kdWNlIG5pY2VyIGxvb2tpbmcgc2NoZW1hcyB3aXRoIHR5cGUgYXJyYXkgaW5zdGVhZCBvZiBhbnlPZi5cbiAgICBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lIGluIHByaW1pdGl2ZU1hcHBpbmdzICYmICgheC5fZGVmLmNoZWNrcyB8fCAheC5fZGVmLmNoZWNrcy5sZW5ndGgpKSkge1xuICAgICAgICAvLyBhbGwgdHlwZXMgaW4gdW5pb24gYXJlIHByaW1pdGl2ZSBhbmQgbGFjayBjaGVja3MsIHNvIG1pZ2h0IGFzIHdlbGwgc3F1YXNoIGludG8ge3R5cGU6IFsuLi5dfVxuICAgICAgICBjb25zdCB0eXBlcyA9IG9wdGlvbnMucmVkdWNlKCh0eXBlcywgeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHByaW1pdGl2ZU1hcHBpbmdzW3guX2RlZi50eXBlTmFtZV07IC8vQ2FuIGJlIHNhZmVseSBjYXN0ZWQgZHVlIHRvIHJvdyA0M1xuICAgICAgICAgICAgcmV0dXJuIHR5cGUgJiYgIXR5cGVzLmluY2x1ZGVzKHR5cGUpID8gWy4uLnR5cGVzLCB0eXBlXSA6IHR5cGVzO1xuICAgICAgICB9LCBbXSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlcy5sZW5ndGggPiAxID8gdHlwZXMgOiB0eXBlc1swXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAob3B0aW9ucy5ldmVyeSgoeCkgPT4geC5fZGVmLnR5cGVOYW1lID09PSAnWm9kTGl0ZXJhbCcgJiYgIXguZGVzY3JpcHRpb24pKSB7XG4gICAgICAgIC8vIGFsbCBvcHRpb25zIGxpdGVyYWxzXG4gICAgICAgIGNvbnN0IHR5cGVzID0gb3B0aW9ucy5yZWR1Y2UoKGFjYywgeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9IHR5cGVvZiB4Ll9kZWYudmFsdWU7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbLi4uYWNjLCB0eXBlXTtcbiAgICAgICAgICAgICAgICBjYXNlICdiaWdpbnQnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWy4uLmFjYywgJ2ludGVnZXInXTtcbiAgICAgICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoeC5fZGVmLnZhbHVlID09PSBudWxsKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5hY2MsICdudWxsJ107XG4gICAgICAgICAgICAgICAgY2FzZSAnc3ltYm9sJzpcbiAgICAgICAgICAgICAgICBjYXNlICd1bmRlZmluZWQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBbXSk7XG4gICAgICAgIGlmICh0eXBlcy5sZW5ndGggPT09IG9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBhbGwgdGhlIGxpdGVyYWxzIGFyZSBwcmltaXRpdmUsIGFzIGZhciBhcyBudWxsIGNhbiBiZSBjb25zaWRlcmVkIHByaW1pdGl2ZVxuICAgICAgICAgICAgY29uc3QgdW5pcXVlVHlwZXMgPSB0eXBlcy5maWx0ZXIoKHgsIGksIGEpID0+IGEuaW5kZXhPZih4KSA9PT0gaSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHVuaXF1ZVR5cGVzLmxlbmd0aCA+IDEgPyB1bmlxdWVUeXBlcyA6IHVuaXF1ZVR5cGVzWzBdLFxuICAgICAgICAgICAgICAgIGVudW06IG9wdGlvbnMucmVkdWNlKChhY2MsIHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYy5pbmNsdWRlcyh4Ll9kZWYudmFsdWUpID8gYWNjIDogWy4uLmFjYywgeC5fZGVmLnZhbHVlXTtcbiAgICAgICAgICAgICAgICB9LCBbXSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wdGlvbnMuZXZlcnkoKHgpID0+IHguX2RlZi50eXBlTmFtZSA9PT0gJ1pvZEVudW0nKSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICBlbnVtOiBvcHRpb25zLnJlZHVjZSgoYWNjLCB4KSA9PiBbLi4uYWNjLCAuLi54Ll9kZWYudmFsdWVzLmZpbHRlcigoeCkgPT4gIWFjYy5pbmNsdWRlcyh4KSldLCBbXSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBhc0FueU9mKGRlZiwgcmVmcyk7XG59XG5jb25zdCBhc0FueU9mID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGNvbnN0IGFueU9mID0gKGRlZi5vcHRpb25zIGluc3RhbmNlb2YgTWFwID8gQXJyYXkuZnJvbShkZWYub3B0aW9ucy52YWx1ZXMoKSkgOiBkZWYub3B0aW9ucylcbiAgICAgICAgLm1hcCgoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgYCR7aX1gXSxcbiAgICB9KSlcbiAgICAgICAgLmZpbHRlcigoeCkgPT4gISF4ICYmICghcmVmcy5zdHJpY3RVbmlvbnMgfHwgKHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiBPYmplY3Qua2V5cyh4KS5sZW5ndGggPiAwKSkpO1xuICAgIHJldHVybiBhbnlPZi5sZW5ndGggPyB7IGFueU9mIH0gOiB1bmRlZmluZWQ7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dW5pb24ubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgcHJpbWl0aXZlTWFwcGluZ3MgfSBmcm9tIFwiLi91bmlvbi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bGxhYmxlRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChbJ1pvZFN0cmluZycsICdab2ROdW1iZXInLCAnWm9kQmlnSW50JywgJ1pvZEJvb2xlYW4nLCAnWm9kTnVsbCddLmluY2x1ZGVzKGRlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZSkgJiZcbiAgICAgICAgKCFkZWYuaW5uZXJUeXBlLl9kZWYuY2hlY2tzIHx8ICFkZWYuaW5uZXJUeXBlLl9kZWYuY2hlY2tzLmxlbmd0aCkpIHtcbiAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnb3BlbkFwaTMnIHx8IHJlZnMubnVsbGFibGVTdHJhdGVneSA9PT0gJ3Byb3BlcnR5Jykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBwcmltaXRpdmVNYXBwaW5nc1tkZWYuaW5uZXJUeXBlLl9kZWYudHlwZU5hbWVdLFxuICAgICAgICAgICAgICAgIG51bGxhYmxlOiB0cnVlLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogW3ByaW1pdGl2ZU1hcHBpbmdzW2RlZi5pbm5lclR5cGUuX2RlZi50eXBlTmFtZV0sICdudWxsJ10sXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChyZWZzLnRhcmdldCA9PT0gJ29wZW5BcGkzJykge1xuICAgICAgICBjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChiYXNlICYmICckcmVmJyBpbiBiYXNlKVxuICAgICAgICAgICAgcmV0dXJuIHsgYWxsT2Y6IFtiYXNlXSwgbnVsbGFibGU6IHRydWUgfTtcbiAgICAgICAgcmV0dXJuIGJhc2UgJiYgeyAuLi5iYXNlLCBudWxsYWJsZTogdHJ1ZSB9O1xuICAgIH1cbiAgICBjb25zdCBiYXNlID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgJzAnXSxcbiAgICB9KTtcbiAgICByZXR1cm4gYmFzZSAmJiB7IGFueU9mOiBbYmFzZSwgeyB0eXBlOiAnbnVsbCcgfV0gfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bGxhYmxlLm1qcy5tYXAiLCJpbXBvcnQgeyBhZGRFcnJvck1lc3NhZ2UsIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMgfSBmcm9tIFwiLi4vZXJyb3JNZXNzYWdlcy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU51bWJlckRlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXMgPSB7XG4gICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgIH07XG4gICAgaWYgKCFkZWYuY2hlY2tzKVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIGZvciAoY29uc3QgY2hlY2sgb2YgZGVmLmNoZWNrcykge1xuICAgICAgICBzd2l0Y2ggKGNoZWNrLmtpbmQpIHtcbiAgICAgICAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgICAgICAgICAgcmVzLnR5cGUgPSAnaW50ZWdlcic7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JNZXNzYWdlKHJlcywgJ3R5cGUnLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ21pbic6XG4gICAgICAgICAgICAgICAgaWYgKHJlZnMudGFyZ2V0ID09PSAnanNvblNjaGVtYTcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnZXhjbHVzaXZlTWluaW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVjay5pbmNsdXNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5leGNsdXNpdmVNaW5pbXVtID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ21pbmltdW0nLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWF4JzpcbiAgICAgICAgICAgICAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdtYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0UmVzcG9uc2VWYWx1ZUFuZEVycm9ycyhyZXMsICdleGNsdXNpdmVNYXhpbXVtJywgY2hlY2sudmFsdWUsIGNoZWNrLm1lc3NhZ2UsIHJlZnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrLmluY2x1c2l2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmV4Y2x1c2l2ZU1heGltdW0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMocmVzLCAnbWF4aW11bScsIGNoZWNrLnZhbHVlLCBjaGVjay5tZXNzYWdlLCByZWZzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtdWx0aXBsZU9mJzpcbiAgICAgICAgICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHJlcywgJ211bHRpcGxlT2YnLCBjaGVjay52YWx1ZSwgY2hlY2subWVzc2FnZSwgcmVmcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW51bWJlci5tanMubWFwIiwiaW1wb3J0IHsgcGFyc2VEZWYgfSBmcm9tIFwiLi4vcGFyc2VEZWYubWpzXCI7XG5mdW5jdGlvbiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpIHtcbiAgICBpZiAocmVmcy5yZW1vdmVBZGRpdGlvbmFsU3RyYXRlZ3kgPT09ICdzdHJpY3QnKSB7XG4gICAgICAgIHJldHVybiBkZWYuY2F0Y2hhbGwuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE5ldmVyJyA/XG4gICAgICAgICAgICBkZWYudW5rbm93bktleXMgIT09ICdzdHJpY3QnXG4gICAgICAgICAgICA6IHBhcnNlRGVmKGRlZi5jYXRjaGFsbC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhZGRpdGlvbmFsUHJvcGVydGllcyddLFxuICAgICAgICAgICAgfSkgPz8gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWYuY2F0Y2hhbGwuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE5ldmVyJyA/XG4gICAgICAgICAgICBkZWYudW5rbm93bktleXMgPT09ICdwYXNzdGhyb3VnaCdcbiAgICAgICAgICAgIDogcGFyc2VEZWYoZGVmLmNhdGNoYWxsLl9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxQcm9wZXJ0aWVzJ10sXG4gICAgICAgICAgICB9KSA/PyB0cnVlO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAuLi5PYmplY3QuZW50cmllcyhkZWYuc2hhcGUoKSkucmVkdWNlKChhY2MsIFtwcm9wTmFtZSwgcHJvcERlZl0pID0+IHtcbiAgICAgICAgICAgIGlmIChwcm9wRGVmID09PSB1bmRlZmluZWQgfHwgcHJvcERlZi5fZGVmID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5UGF0aCA9IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAncHJvcGVydGllcycsIHByb3BOYW1lXTtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZERlZiA9IHBhcnNlRGVmKHByb3BEZWYuX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IHByb3BlcnR5UGF0aCxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0eVBhdGgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChwYXJzZWREZWYgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgaWYgKHJlZnMub3BlbmFpU3RyaWN0TW9kZSAmJlxuICAgICAgICAgICAgICAgIHByb3BEZWYuaXNPcHRpb25hbCgpICYmXG4gICAgICAgICAgICAgICAgIXByb3BEZWYuaXNOdWxsYWJsZSgpICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIHByb3BEZWYuX2RlZj8uZGVmYXVsdFZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWm9kIGZpZWxkIGF0IFxcYCR7cHJvcGVydHlQYXRoLmpvaW4oJy8nKX1cXGAgdXNlcyBcXGAub3B0aW9uYWwoKVxcYCB3aXRob3V0IFxcYC5udWxsYWJsZSgpXFxgIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIEFQSS4gU2VlOiBodHRwczovL3BsYXRmb3JtLm9wZW5haS5jb20vZG9jcy9ndWlkZXMvc3RydWN0dXJlZC1vdXRwdXRzP2FwaS1tb2RlPXJlc3BvbnNlcyNhbGwtZmllbGRzLW11c3QtYmUtcmVxdWlyZWRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICAuLi5hY2MucHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICAgICAgW3Byb3BOYW1lXTogcGFyc2VkRGVmLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHByb3BEZWYuaXNPcHRpb25hbCgpICYmICFyZWZzLm9wZW5haVN0cmljdE1vZGUgPyBhY2MucmVxdWlyZWQgOiBbLi4uYWNjLnJlcXVpcmVkLCBwcm9wTmFtZV0sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LCB7IHByb3BlcnRpZXM6IHt9LCByZXF1aXJlZDogW10gfSksXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyhkZWYsIHJlZnMpLFxuICAgIH07XG4gICAgaWYgKCFyZXN1bHQucmVxdWlyZWQubGVuZ3RoKVxuICAgICAgICBkZWxldGUgcmVzdWx0LnJlcXVpcmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYmplY3QubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHBhcnNlT3B0aW9uYWxEZWYgPSAoZGVmLCByZWZzKSA9PiB7XG4gICAgaWYgKHJlZnMuY3VycmVudFBhdGgudG9TdHJpbmcoKSA9PT0gcmVmcy5wcm9wZXJ0eVBhdGg/LnRvU3RyaW5nKCkpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5pbm5lclR5cGUuX2RlZiwgcmVmcyk7XG4gICAgfVxuICAgIGNvbnN0IGlubmVyU2NoZW1hID0gcGFyc2VEZWYoZGVmLmlubmVyVHlwZS5fZGVmLCB7XG4gICAgICAgIC4uLnJlZnMsXG4gICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FueU9mJywgJzEnXSxcbiAgICB9KTtcbiAgICByZXR1cm4gaW5uZXJTY2hlbWEgP1xuICAgICAgICB7XG4gICAgICAgICAgICBhbnlPZjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbm90OiB7fSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlubmVyU2NoZW1hLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfVxuICAgICAgICA6IHt9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wdGlvbmFsLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZVBpcGVsaW5lRGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gJ2lucHV0Jykge1xuICAgICAgICByZXR1cm4gcGFyc2VEZWYoZGVmLmluLl9kZWYsIHJlZnMpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnBpcGVTdHJhdGVneSA9PT0gJ291dHB1dCcpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwgcmVmcyk7XG4gICAgfVxuICAgIGNvbnN0IGEgPSBwYXJzZURlZihkZWYuaW4uX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsICcwJ10sXG4gICAgfSk7XG4gICAgY29uc3QgYiA9IHBhcnNlRGVmKGRlZi5vdXQuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdhbGxPZicsIGEgPyAnMScgOiAnMCddLFxuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFsbE9mOiBbYSwgYl0uZmlsdGVyKCh4KSA9PiB4ICE9PSB1bmRlZmluZWQpLFxuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwZWxpbmUubWpzLm1hcCIsImltcG9ydCB7IHBhcnNlRGVmIH0gZnJvbSBcIi4uL3BhcnNlRGVmLm1qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUHJvbWlzZURlZihkZWYsIHJlZnMpIHtcbiAgICByZXR1cm4gcGFyc2VEZWYoZGVmLnR5cGUuX2RlZiwgcmVmcyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9taXNlLm1qcy5tYXAiLCJpbXBvcnQgeyBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzIH0gZnJvbSBcIi4uL2Vycm9yTWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNldERlZihkZWYsIHJlZnMpIHtcbiAgICBjb25zdCBpdGVtcyA9IHBhcnNlRGVmKGRlZi52YWx1ZVR5cGUuX2RlZiwge1xuICAgICAgICAuLi5yZWZzLFxuICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcyddLFxuICAgIH0pO1xuICAgIGNvbnN0IHNjaGVtYSA9IHtcbiAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgdW5pcXVlSXRlbXM6IHRydWUsXG4gICAgICAgIGl0ZW1zLFxuICAgIH07XG4gICAgaWYgKGRlZi5taW5TaXplKSB7XG4gICAgICAgIHNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMoc2NoZW1hLCAnbWluSXRlbXMnLCBkZWYubWluU2l6ZS52YWx1ZSwgZGVmLm1pblNpemUubWVzc2FnZSwgcmVmcyk7XG4gICAgfVxuICAgIGlmIChkZWYubWF4U2l6ZSkge1xuICAgICAgICBzZXRSZXNwb25zZVZhbHVlQW5kRXJyb3JzKHNjaGVtYSwgJ21heEl0ZW1zJywgZGVmLm1heFNpemUudmFsdWUsIGRlZi5tYXhTaXplLm1lc3NhZ2UsIHJlZnMpO1xuICAgIH1cbiAgICByZXR1cm4gc2NoZW1hO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2V0Lm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVR1cGxlRGVmKGRlZiwgcmVmcykge1xuICAgIGlmIChkZWYucmVzdCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgaXRlbXM6IGRlZi5pdGVtc1xuICAgICAgICAgICAgICAgIC5tYXAoKHgsIGkpID0+IHBhcnNlRGVmKHguX2RlZiwge1xuICAgICAgICAgICAgICAgIC4uLnJlZnMsXG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmN1cnJlbnRQYXRoLCAnaXRlbXMnLCBgJHtpfWBdLFxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICAgICAgLnJlZHVjZSgoYWNjLCB4KSA9PiAoeCA9PT0gdW5kZWZpbmVkID8gYWNjIDogWy4uLmFjYywgeF0pLCBbXSksXG4gICAgICAgICAgICBhZGRpdGlvbmFsSXRlbXM6IHBhcnNlRGVmKGRlZi5yZXN0Ll9kZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5yZWZzLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoOiBbLi4ucmVmcy5jdXJyZW50UGF0aCwgJ2FkZGl0aW9uYWxJdGVtcyddLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgICAgIG1pbkl0ZW1zOiBkZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgbWF4SXRlbXM6IGRlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICBpdGVtczogZGVmLml0ZW1zXG4gICAgICAgICAgICAgICAgLm1hcCgoeCwgaSkgPT4gcGFyc2VEZWYoeC5fZGVmLCB7XG4gICAgICAgICAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aDogWy4uLnJlZnMuY3VycmVudFBhdGgsICdpdGVtcycsIGAke2l9YF0sXG4gICAgICAgICAgICB9KSlcbiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIHgpID0+ICh4ID09PSB1bmRlZmluZWQgPyBhY2MgOiBbLi4uYWNjLCB4XSksIFtdKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10dXBsZS5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5kZWZpbmVkRGVmKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5vdDoge30sXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXVuZGVmaW5lZC5tanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVW5rbm93bkRlZigpIHtcbiAgICByZXR1cm4ge307XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD11bmtub3duLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuLi9wYXJzZURlZi5tanNcIjtcbmV4cG9ydCBjb25zdCBwYXJzZVJlYWRvbmx5RGVmID0gKGRlZiwgcmVmcykgPT4ge1xuICAgIHJldHVybiBwYXJzZURlZihkZWYuaW5uZXJUeXBlLl9kZWYsIHJlZnMpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlYWRvbmx5Lm1qcy5tYXAiLCJpbXBvcnQgeyBab2RGaXJzdFBhcnR5VHlwZUtpbmQgfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgcGFyc2VBbnlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FueS5tanNcIjtcbmltcG9ydCB7IHBhcnNlQXJyYXlEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2FycmF5Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VCaWdpbnREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2JpZ2ludC5tanNcIjtcbmltcG9ydCB7IHBhcnNlQm9vbGVhbkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvYm9vbGVhbi5tanNcIjtcbmltcG9ydCB7IHBhcnNlQnJhbmRlZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvYnJhbmRlZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlQ2F0Y2hEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2NhdGNoLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEYXRlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kYXRlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VEZWZhdWx0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9kZWZhdWx0Lm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VFZmZlY3RzRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lZmZlY3RzLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VFbnVtRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9lbnVtLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VJbnRlcnNlY3Rpb25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL2ludGVyc2VjdGlvbi5tanNcIjtcbmltcG9ydCB7IHBhcnNlTGl0ZXJhbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbGl0ZXJhbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlTWFwRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9tYXAubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU5hdGl2ZUVudW1EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL25hdGl2ZUVudW0ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU5ldmVyRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9uZXZlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbERlZiB9IGZyb20gXCIuL3BhcnNlcnMvbnVsbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlTnVsbGFibGVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bGxhYmxlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VOdW1iZXJEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL251bWJlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlT2JqZWN0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vYmplY3QubWpzXCI7XG5pbXBvcnQgeyBwYXJzZU9wdGlvbmFsRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9vcHRpb25hbC5tanNcIjtcbmltcG9ydCB7IHBhcnNlUGlwZWxpbmVEZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3BpcGVsaW5lLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VQcm9taXNlRGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9wcm9taXNlLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VSZWNvcmREZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3JlY29yZC5tanNcIjtcbmltcG9ydCB7IHBhcnNlU2V0RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9zZXQubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVN0cmluZ0RlZiB9IGZyb20gXCIuL3BhcnNlcnMvc3RyaW5nLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VUdXBsZURlZiB9IGZyb20gXCIuL3BhcnNlcnMvdHVwbGUubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVuZGVmaW5lZERlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5kZWZpbmVkLm1qc1wiO1xuaW1wb3J0IHsgcGFyc2VVbmlvbkRlZiB9IGZyb20gXCIuL3BhcnNlcnMvdW5pb24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVVua25vd25EZWYgfSBmcm9tIFwiLi9wYXJzZXJzL3Vua25vd24ubWpzXCI7XG5pbXBvcnQgeyBwYXJzZVJlYWRvbmx5RGVmIH0gZnJvbSBcIi4vcGFyc2Vycy9yZWFkb25seS5tanNcIjtcbmltcG9ydCB7IGlnbm9yZU92ZXJyaWRlIH0gZnJvbSBcIi4vT3B0aW9ucy5tanNcIjtcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURlZihkZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbiA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc2Vlbkl0ZW0gPSByZWZzLnNlZW4uZ2V0KGRlZik7XG4gICAgaWYgKHJlZnMub3ZlcnJpZGUpIHtcbiAgICAgICAgY29uc3Qgb3ZlcnJpZGVSZXN1bHQgPSByZWZzLm92ZXJyaWRlPy4oZGVmLCByZWZzLCBzZWVuSXRlbSwgZm9yY2VSZXNvbHV0aW9uKTtcbiAgICAgICAgaWYgKG92ZXJyaWRlUmVzdWx0ICE9PSBpZ25vcmVPdmVycmlkZSkge1xuICAgICAgICAgICAgcmV0dXJuIG92ZXJyaWRlUmVzdWx0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChzZWVuSXRlbSAmJiAhZm9yY2VSZXNvbHV0aW9uKSB7XG4gICAgICAgIGNvbnN0IHNlZW5TY2hlbWEgPSBnZXQkcmVmKHNlZW5JdGVtLCByZWZzKTtcbiAgICAgICAgaWYgKHNlZW5TY2hlbWEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKCckcmVmJyBpbiBzZWVuU2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgcmVmcy5zZWVuUmVmcy5hZGQoc2VlblNjaGVtYS4kcmVmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzZWVuU2NoZW1hO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG5ld0l0ZW0gPSB7IGRlZiwgcGF0aDogcmVmcy5jdXJyZW50UGF0aCwganNvblNjaGVtYTogdW5kZWZpbmVkIH07XG4gICAgcmVmcy5zZWVuLnNldChkZWYsIG5ld0l0ZW0pO1xuICAgIGNvbnN0IGpzb25TY2hlbWEgPSBzZWxlY3RQYXJzZXIoZGVmLCBkZWYudHlwZU5hbWUsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgaWYgKGpzb25TY2hlbWEpIHtcbiAgICAgICAgYWRkTWV0YShkZWYsIHJlZnMsIGpzb25TY2hlbWEpO1xuICAgIH1cbiAgICBuZXdJdGVtLmpzb25TY2hlbWEgPSBqc29uU2NoZW1hO1xuICAgIHJldHVybiBqc29uU2NoZW1hO1xufVxuY29uc3QgZ2V0JHJlZiA9IChpdGVtLCByZWZzKSA9PiB7XG4gICAgc3dpdGNoIChyZWZzLiRyZWZTdHJhdGVneSkge1xuICAgICAgICBjYXNlICdyb290JzpcbiAgICAgICAgICAgIHJldHVybiB7ICRyZWY6IGl0ZW0ucGF0aC5qb2luKCcvJykgfTtcbiAgICAgICAgLy8gdGhpcyBjYXNlIGlzIG5lZWRlZCBhcyBPcGVuQUkgc3RyaWN0IG1vZGUgZG9lc24ndCBzdXBwb3J0IHRvcC1sZXZlbCBgJHJlZmBzLCBpLmUuXG4gICAgICAgIC8vIHRoZSB0b3AtbGV2ZWwgc2NoZW1hICptdXN0KiBiZSBge1widHlwZVwiOiBcIm9iamVjdFwiLCBcInByb3BlcnRpZXNcIjogey4uLn19YCBidXQgaWYgd2UgZXZlclxuICAgICAgICAvLyBuZWVkIHRvIGRlZmluZSBhIGAkcmVmYCwgcmVsYXRpdmUgYCRyZWZgcyBhcmVuJ3Qgc3VwcG9ydGVkLCBzbyB3ZSBuZWVkIHRvIGV4dHJhY3RcbiAgICAgICAgLy8gdGhlIHNjaGVtYSB0byBgIy9kZWZpbml0aW9ucy9gIGFuZCByZWZlcmVuY2UgdGhhdC5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gZS5nLiBpZiB3ZSBuZWVkIHRvIHJlZmVyZW5jZSBhIHNjaGVtYSBhdFxuICAgICAgICAvLyBgW1wiI1wiLFwiZGVmaW5pdGlvbnNcIixcImNvbnRhY3RQZXJzb25cIixcInByb3BlcnRpZXNcIixcInBlcnNvbjFcIixcInByb3BlcnRpZXNcIixcIm5hbWVcIl1gXG4gICAgICAgIC8vIHRoZW4gd2UnbGwgZXh0cmFjdCBpdCBvdXQgdG8gYGNvbnRhY3RQZXJzb25fcHJvcGVydGllc19wZXJzb24xX3Byb3BlcnRpZXNfbmFtZWBcbiAgICAgICAgY2FzZSAnZXh0cmFjdC10by1yb290JzpcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBpdGVtLnBhdGguc2xpY2UocmVmcy5iYXNlUGF0aC5sZW5ndGggKyAxKS5qb2luKCdfJyk7XG4gICAgICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIGV4dHJhY3QgdGhlIHJvb3Qgc2NoZW1hIGluIHRoaXMgY2FzZSwgYXMgaXQncyBhbHJlYWR5XG4gICAgICAgICAgICAvLyBiZWVuIGFkZGVkIHRvIHRoZSBkZWZpbml0aW9uc1xuICAgICAgICAgICAgaWYgKG5hbWUgIT09IHJlZnMubmFtZSAmJiByZWZzLm5hbWVTdHJhdGVneSA9PT0gJ2R1cGxpY2F0ZS1yZWYnKSB7XG4gICAgICAgICAgICAgICAgcmVmcy5kZWZpbml0aW9uc1tuYW1lXSA9IGl0ZW0uZGVmO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgJHJlZjogWy4uLnJlZnMuYmFzZVBhdGgsIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLmpvaW4oJy8nKSB9O1xuICAgICAgICBjYXNlICdyZWxhdGl2ZSc6XG4gICAgICAgICAgICByZXR1cm4geyAkcmVmOiBnZXRSZWxhdGl2ZVBhdGgocmVmcy5jdXJyZW50UGF0aCwgaXRlbS5wYXRoKSB9O1xuICAgICAgICBjYXNlICdub25lJzpcbiAgICAgICAgY2FzZSAnc2Vlbic6IHtcbiAgICAgICAgICAgIGlmIChpdGVtLnBhdGgubGVuZ3RoIDwgcmVmcy5jdXJyZW50UGF0aC5sZW5ndGggJiZcbiAgICAgICAgICAgICAgICBpdGVtLnBhdGguZXZlcnkoKHZhbHVlLCBpbmRleCkgPT4gcmVmcy5jdXJyZW50UGF0aFtpbmRleF0gPT09IHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgUmVjdXJzaXZlIHJlZmVyZW5jZSBkZXRlY3RlZCBhdCAke3JlZnMuY3VycmVudFBhdGguam9pbignLycpfSEgRGVmYXVsdGluZyB0byBhbnlgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVmcy4kcmVmU3RyYXRlZ3kgPT09ICdzZWVuJyA/IHt9IDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufTtcbmNvbnN0IGdldFJlbGF0aXZlUGF0aCA9IChwYXRoQSwgcGF0aEIpID0+IHtcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yICg7IGkgPCBwYXRoQS5sZW5ndGggJiYgaSA8IHBhdGhCLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChwYXRoQVtpXSAhPT0gcGF0aEJbaV0pXG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIFsocGF0aEEubGVuZ3RoIC0gaSkudG9TdHJpbmcoKSwgLi4ucGF0aEIuc2xpY2UoaSldLmpvaW4oJy8nKTtcbn07XG5jb25zdCBzZWxlY3RQYXJzZXIgPSAoZGVmLCB0eXBlTmFtZSwgcmVmcywgZm9yY2VSZXNvbHV0aW9uKSA9PiB7XG4gICAgc3dpdGNoICh0eXBlTmFtZSkge1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTdHJpbmc6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTdHJpbmdEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVtYmVyOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlTnVtYmVyRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU9iamVjdERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCaWdJbnQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VCaWdpbnREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbjpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUJvb2xlYW5EZWYoKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGF0ZTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURhdGVEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5kZWZpbmVkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5kZWZpbmVkRGVmKCk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGw6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOdWxsRGVmKHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUFycmF5RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFVuaW9uOlxuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REaXNjcmltaW5hdGVkVW5pb246XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VVbmlvbkRlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RJbnRlcnNlY3Rpb246XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnRlcnNlY3Rpb25EZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVHVwbGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VUdXBsZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWNvcmQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VSZWNvcmREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGl0ZXJhbDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUxpdGVyYWxEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUVudW1EZWYoZGVmKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmF0aXZlRW51bTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU5hdGl2ZUVudW1EZWYoZGVmKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVsbGFibGU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOdWxsYWJsZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RPcHRpb25hbDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU9wdGlvbmFsRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE1hcDpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZU1hcERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTZXQ6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VTZXREZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGF6eTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZURlZihkZWYuZ2V0dGVyKCkuX2RlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFByb21pc2U6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VQcm9taXNlRGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5hTjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXI6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VOZXZlckRlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRWZmZWN0c0RlZihkZWYsIHJlZnMsIGZvcmNlUmVzb2x1dGlvbik7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUFueURlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmtub3duOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlVW5rbm93bkRlZigpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlRGVmYXVsdERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCcmFuZGVkOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQnJhbmRlZERlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWFkb25seTpcbiAgICAgICAgICAgIHJldHVybiBwYXJzZVJlYWRvbmx5RGVmKGRlZiwgcmVmcyk7XG4gICAgICAgIGNhc2UgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQ2F0Y2hEZWYoZGVmLCByZWZzKTtcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUGlwZWxpbmU6XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VQaXBlbGluZURlZihkZWYsIHJlZnMpO1xuICAgICAgICBjYXNlIFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RGdW5jdGlvbjpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVm9pZDpcbiAgICAgICAgY2FzZSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3ltYm9sOlxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAoKF8pID0+IHVuZGVmaW5lZCkodHlwZU5hbWUpO1xuICAgIH1cbn07XG5jb25zdCBhZGRNZXRhID0gKGRlZiwgcmVmcywganNvblNjaGVtYSkgPT4ge1xuICAgIGlmIChkZWYuZGVzY3JpcHRpb24pIHtcbiAgICAgICAganNvblNjaGVtYS5kZXNjcmlwdGlvbiA9IGRlZi5kZXNjcmlwdGlvbjtcbiAgICAgICAgaWYgKHJlZnMubWFya2Rvd25EZXNjcmlwdGlvbikge1xuICAgICAgICAgICAganNvblNjaGVtYS5tYXJrZG93bkRlc2NyaXB0aW9uID0gZGVmLmRlc2NyaXB0aW9uO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBqc29uU2NoZW1hO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhcnNlRGVmLm1qcy5tYXAiLCJpbXBvcnQgeyBwYXJzZURlZiB9IGZyb20gXCIuL3BhcnNlRGVmLm1qc1wiO1xuaW1wb3J0IHsgZ2V0UmVmcyB9IGZyb20gXCIuL1JlZnMubWpzXCI7XG5pbXBvcnQgeyB6b2REZWYsIGlzRW1wdHlPYmogfSBmcm9tIFwiLi91dGlsLm1qc1wiO1xuY29uc3Qgem9kVG9Kc29uU2NoZW1hID0gKHNjaGVtYSwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHJlZnMgPSBnZXRSZWZzKG9wdGlvbnMpO1xuICAgIGNvbnN0IG5hbWUgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycgPyBvcHRpb25zXG4gICAgICAgIDogb3B0aW9ucz8ubmFtZVN0cmF0ZWd5ID09PSAndGl0bGUnID8gdW5kZWZpbmVkXG4gICAgICAgICAgICA6IG9wdGlvbnM/Lm5hbWU7XG4gICAgY29uc3QgbWFpbiA9IHBhcnNlRGVmKHNjaGVtYS5fZGVmLCBuYW1lID09PSB1bmRlZmluZWQgPyByZWZzIDogKHtcbiAgICAgICAgLi4ucmVmcyxcbiAgICAgICAgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBuYW1lXSxcbiAgICB9KSwgZmFsc2UpID8/IHt9O1xuICAgIGNvbnN0IHRpdGxlID0gdHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnICYmIG9wdGlvbnMubmFtZSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMubmFtZVN0cmF0ZWd5ID09PSAndGl0bGUnID9cbiAgICAgICAgb3B0aW9ucy5uYW1lXG4gICAgICAgIDogdW5kZWZpbmVkO1xuICAgIGlmICh0aXRsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG1haW4udGl0bGUgPSB0aXRsZTtcbiAgICB9XG4gICAgY29uc3QgZGVmaW5pdGlvbnMgPSAoKCkgPT4ge1xuICAgICAgICBpZiAoaXNFbXB0eU9iaihyZWZzLmRlZmluaXRpb25zKSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWZpbml0aW9ucyA9IHt9O1xuICAgICAgICBjb25zdCBwcm9jZXNzZWREZWZpbml0aW9ucyA9IG5ldyBTZXQoKTtcbiAgICAgICAgLy8gdGhlIGNhbGwgdG8gYHBhcnNlRGVmKClgIGhlcmUgbWlnaHQgaXRzZWxmIGFkZCBtb3JlIGVudHJpZXMgdG8gYC5kZWZpbml0aW9uc2BcbiAgICAgICAgLy8gc28gd2UgbmVlZCB0byBjb250aW51YWxseSBldmFsdWF0ZSBkZWZpbml0aW9ucyB1bnRpbCB3ZSd2ZSByZXNvbHZlZCBhbGwgb2YgdGhlbVxuICAgICAgICAvL1xuICAgICAgICAvLyB3ZSBoYXZlIGEgZ2VuZXJvdXMgaXRlcmF0aW9uIGxpbWl0IGhlcmUgdG8gYXZvaWQgYmxvd2luZyB1cCB0aGUgc3RhY2sgaWYgdGhlcmVcbiAgICAgICAgLy8gYXJlIGFueSBidWdzIHRoYXQgd291bGQgb3RoZXJ3aXNlIHJlc3VsdCBpbiB1cyBpdGVyYXRpbmcgaW5kZWZpbml0ZWx5XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTAwOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0RlZmluaXRpb25zID0gT2JqZWN0LmVudHJpZXMocmVmcy5kZWZpbml0aW9ucykuZmlsdGVyKChba2V5XSkgPT4gIXByb2Nlc3NlZERlZmluaXRpb25zLmhhcyhrZXkpKTtcbiAgICAgICAgICAgIGlmIChuZXdEZWZpbml0aW9ucy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHNjaGVtYV0gb2YgbmV3RGVmaW5pdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBkZWZpbml0aW9uc1trZXldID1cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VEZWYoem9kRGVmKHNjaGVtYSksIHsgLi4ucmVmcywgY3VycmVudFBhdGg6IFsuLi5yZWZzLmJhc2VQYXRoLCByZWZzLmRlZmluaXRpb25QYXRoLCBrZXldIH0sIHRydWUpID8/IHt9O1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZERlZmluaXRpb25zLmFkZChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWZpbml0aW9ucztcbiAgICB9KSgpO1xuICAgIGNvbnN0IGNvbWJpbmVkID0gbmFtZSA9PT0gdW5kZWZpbmVkID9cbiAgICAgICAgZGVmaW5pdGlvbnMgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLm1haW4sXG4gICAgICAgICAgICAgICAgW3JlZnMuZGVmaW5pdGlvblBhdGhdOiBkZWZpbml0aW9ucyxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogbWFpblxuICAgICAgICA6IHJlZnMubmFtZVN0cmF0ZWd5ID09PSAnZHVwbGljYXRlLXJlZicgP1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC4uLm1haW4sXG4gICAgICAgICAgICAgICAgLi4uKGRlZmluaXRpb25zIHx8IHJlZnMuc2VlblJlZnMuc2l6ZSA/XG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtyZWZzLmRlZmluaXRpb25QYXRoXToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRlZmluaXRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9ubHkgYWN0dWFsbHkgZHVwbGljYXRlIHRoZSBzY2hlbWEgZGVmaW5pdGlvbiBpZiBpdCB3YXMgZXZlciByZWZlcmVuY2VkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlIHRoZSBkdXBsaWNhdGlvbiBpcyBjb21wbGV0ZWx5IHBvaW50bGVzc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLihyZWZzLnNlZW5SZWZzLnNpemUgPyB7IFtuYW1lXTogbWFpbiB9IDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7XG4gICAgICAgICAgICAgICAgJHJlZjogWy4uLihyZWZzLiRyZWZTdHJhdGVneSA9PT0gJ3JlbGF0aXZlJyA/IFtdIDogcmVmcy5iYXNlUGF0aCksIHJlZnMuZGVmaW5pdGlvblBhdGgsIG5hbWVdLmpvaW4oJy8nKSxcbiAgICAgICAgICAgICAgICBbcmVmcy5kZWZpbml0aW9uUGF0aF06IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZGVmaW5pdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIFtuYW1lXTogbWFpbixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICBpZiAocmVmcy50YXJnZXQgPT09ICdqc29uU2NoZW1hNycpIHtcbiAgICAgICAgY29tYmluZWQuJHNjaGVtYSA9ICdodHRwOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LTA3L3NjaGVtYSMnO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZWZzLnRhcmdldCA9PT0gJ2pzb25TY2hlbWEyMDE5LTA5Jykge1xuICAgICAgICBjb21iaW5lZC4kc2NoZW1hID0gJ2h0dHBzOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LzIwMTktMDkvc2NoZW1hIyc7XG4gICAgfVxuICAgIHJldHVybiBjb21iaW5lZDtcbn07XG5leHBvcnQgeyB6b2RUb0pzb25TY2hlbWEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZFRvSnNvblNjaGVtYS5tanMubWFwIiwiaW1wb3J0IHsgT3BlbkFJRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IubWpzXCI7XG5pbXBvcnQgeyBpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0IH0gZnJvbSBcIi4uL2xpYi9wYXJzZXIubWpzXCI7XG5leHBvcnQgZnVuY3Rpb24gbWF5YmVQYXJzZVJlc3BvbnNlKHJlc3BvbnNlLCBwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcyB8fCAhaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnJlc3BvbnNlLFxuICAgICAgICAgICAgb3V0cHV0X3BhcnNlZDogbnVsbCxcbiAgICAgICAgICAgIG91dHB1dDogcmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZF9hcmd1bWVudHM6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudC5tYXAoKGNvbnRlbnQpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlUmVzcG9uc2UocmVzcG9uc2UsIHBhcmFtcyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZXNwb25zZShyZXNwb25zZSwgcGFyYW1zKSB7XG4gICAgY29uc3Qgb3V0cHV0ID0gcmVzcG9uc2Uub3V0cHV0Lm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBwYXJzZVRvb2xDYWxsKHBhcmFtcywgaXRlbSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGl0ZW0uY29udGVudC5tYXAoKGNvbnRlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAnb3V0cHV0X3RleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkOiBwYXJzZVRleHRGb3JtYXQocGFyYW1zLCBjb250ZW50LnRleHQpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5pdGVtLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH0pO1xuICAgIGNvbnN0IHBhcnNlZCA9IE9iamVjdC5hc3NpZ24oe30sIHJlc3BvbnNlLCB7IG91dHB1dCB9KTtcbiAgICBpZiAoIU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocmVzcG9uc2UsICdvdXRwdXRfdGV4dCcpKSB7XG4gICAgICAgIGFkZE91dHB1dFRleHQocGFyc2VkKTtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBhcnNlZCwgJ291dHB1dF9wYXJzZWQnLCB7XG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIHBhcnNlZC5vdXRwdXQpIHtcbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0LnR5cGUgIT09ICdtZXNzYWdlJykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjb250ZW50IG9mIG91dHB1dC5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICdvdXRwdXRfdGV4dCcgJiYgY29udGVudC5wYXJzZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50LnBhcnNlZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBwYXJzZWQ7XG59XG5mdW5jdGlvbiBwYXJzZVRleHRGb3JtYXQocGFyYW1zLCBjb250ZW50KSB7XG4gICAgaWYgKHBhcmFtcy50ZXh0Py5mb3JtYXQ/LnR5cGUgIT09ICdqc29uX3NjaGVtYScpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICgnJHBhcnNlUmF3JyBpbiBwYXJhbXMudGV4dD8uZm9ybWF0KSB7XG4gICAgICAgIGNvbnN0IHRleHRfZm9ybWF0ID0gcGFyYW1zLnRleHQ/LmZvcm1hdDtcbiAgICAgICAgcmV0dXJuIHRleHRfZm9ybWF0LiRwYXJzZVJhdyhjb250ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoY29udGVudCk7XG59XG5leHBvcnQgZnVuY3Rpb24gaGFzQXV0b1BhcnNlYWJsZUlucHV0KHBhcmFtcykge1xuICAgIGlmIChpc0F1dG9QYXJzYWJsZVJlc3BvbnNlRm9ybWF0KHBhcmFtcy50ZXh0Py5mb3JtYXQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQgZnVuY3Rpb24gbWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCh0b29sLCB7IHBhcnNlciwgY2FsbGJhY2ssIH0pIHtcbiAgICBjb25zdCBvYmogPSB7IC4uLnRvb2wgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhvYmosIHtcbiAgICAgICAgJGJyYW5kOiB7XG4gICAgICAgICAgICB2YWx1ZTogJ2F1dG8tcGFyc2VhYmxlLXRvb2wnLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICAgICRwYXJzZVJhdzoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlcixcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICAkY2FsbGJhY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBjYWxsYmFjayxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBvYmo7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNBdXRvUGFyc2FibGVUb29sKHRvb2wpIHtcbiAgICByZXR1cm4gdG9vbD8uWyckYnJhbmQnXSA9PT0gJ2F1dG8tcGFyc2VhYmxlLXRvb2wnO1xufVxuZnVuY3Rpb24gZ2V0SW5wdXRUb29sQnlOYW1lKGlucHV0X3Rvb2xzLCBuYW1lKSB7XG4gICAgcmV0dXJuIGlucHV0X3Rvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0b29sLm5hbWUgPT09IG5hbWUpO1xufVxuZnVuY3Rpb24gcGFyc2VUb29sQ2FsbChwYXJhbXMsIHRvb2xDYWxsKSB7XG4gICAgY29uc3QgaW5wdXRUb29sID0gZ2V0SW5wdXRUb29sQnlOYW1lKHBhcmFtcy50b29scyA/PyBbXSwgdG9vbENhbGwubmFtZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4udG9vbENhbGwsXG4gICAgICAgIC4uLnRvb2xDYWxsLFxuICAgICAgICBwYXJzZWRfYXJndW1lbnRzOiBpc0F1dG9QYXJzYWJsZVRvb2woaW5wdXRUb29sKSA/IGlucHV0VG9vbC4kcGFyc2VSYXcodG9vbENhbGwuYXJndW1lbnRzKVxuICAgICAgICAgICAgOiBpbnB1dFRvb2w/LnN0cmljdCA/IEpTT04ucGFyc2UodG9vbENhbGwuYXJndW1lbnRzKVxuICAgICAgICAgICAgICAgIDogbnVsbCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFBhcnNlVG9vbENhbGwocGFyYW1zLCB0b29sQ2FsbCkge1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgaW5wdXRUb29sID0gZ2V0SW5wdXRUb29sQnlOYW1lKHBhcmFtcy50b29scyA/PyBbXSwgdG9vbENhbGwubmFtZSk7XG4gICAgcmV0dXJuIGlzQXV0b1BhcnNhYmxlVG9vbChpbnB1dFRvb2wpIHx8IGlucHV0VG9vbD8uc3RyaWN0IHx8IGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRUb29scyh0b29scykge1xuICAgIGZvciAoY29uc3QgdG9vbCBvZiB0b29scyA/PyBbXSkge1xuICAgICAgICBpZiAodG9vbC50eXBlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3BlbkFJRXJyb3IoYEN1cnJlbnRseSBvbmx5IFxcYGZ1bmN0aW9uXFxgIHRvb2wgdHlwZXMgc3VwcG9ydCBhdXRvLXBhcnNpbmc7IFJlY2VpdmVkIFxcYCR7dG9vbC50eXBlfVxcYGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b29sLmZ1bmN0aW9uLnN0cmljdCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9wZW5BSUVycm9yKGBUaGUgXFxgJHt0b29sLmZ1bmN0aW9uLm5hbWV9XFxgIHRvb2wgaXMgbm90IG1hcmtlZCB3aXRoIFxcYHN0cmljdDogdHJ1ZVxcYC4gT25seSBzdHJpY3QgZnVuY3Rpb24gdG9vbHMgY2FuIGJlIGF1dG8tcGFyc2VkYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkT3V0cHV0VGV4dChyc3ApIHtcbiAgICBjb25zdCB0ZXh0cyA9IFtdO1xuICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIHJzcC5vdXRwdXQpIHtcbiAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgY29udGVudCBvZiBvdXRwdXQuY29udGVudCkge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICAgICAgICAgIHRleHRzLnB1c2goY29udGVudC50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByc3Aub3V0cHV0X3RleHQgPSB0ZXh0cy5qb2luKCcnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJlc3BvbnNlc1BhcnNlci5tanMubWFwIiwiaW1wb3J0IHsgbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0LCBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdCwgbWFrZVBhcnNlYWJsZVRvb2wsIH0gZnJvbSBcIi4uL2xpYi9wYXJzZXIubWpzXCI7XG5pbXBvcnQgeyB6b2RUb0pzb25TY2hlbWEgYXMgX3pvZFRvSnNvblNjaGVtYSB9IGZyb20gXCIuLi9fdmVuZG9yL3pvZC10by1qc29uLXNjaGVtYS9pbmRleC5tanNcIjtcbmltcG9ydCB7IG1ha2VQYXJzZWFibGVSZXNwb25zZVRvb2wgfSBmcm9tIFwiLi4vbGliL1Jlc3BvbnNlc1BhcnNlci5tanNcIjtcbmZ1bmN0aW9uIHpvZFRvSnNvblNjaGVtYShzY2hlbWEsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gX3pvZFRvSnNvblNjaGVtYShzY2hlbWEsIHtcbiAgICAgICAgb3BlbmFpU3RyaWN0TW9kZTogdHJ1ZSxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICBuYW1lU3RyYXRlZ3k6ICdkdXBsaWNhdGUtcmVmJyxcbiAgICAgICAgJHJlZlN0cmF0ZWd5OiAnZXh0cmFjdC10by1yb290JyxcbiAgICAgICAgbnVsbGFibGVTdHJhdGVneTogJ3Byb3BlcnR5JyxcbiAgICB9KTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGNoYXQgY29tcGxldGlvbiBgSlNPTlNjaGVtYWAgcmVzcG9uc2UgZm9ybWF0IG9iamVjdCBmcm9tXG4gKiB0aGUgZ2l2ZW4gWm9kIHNjaGVtYS5cbiAqXG4gKiBJZiB0aGlzIGlzIHBhc3NlZCB0byB0aGUgYC5wYXJzZSgpYCwgYC5zdHJlYW0oKWAgb3IgYC5ydW5Ub29scygpYFxuICogY2hhdCBjb21wbGV0aW9uIG1ldGhvZHMgdGhlbiB0aGUgcmVzcG9uc2UgbWVzc2FnZSB3aWxsIGNvbnRhaW4gYVxuICogYC5wYXJzZWRgIHByb3BlcnR5IHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBwYXJzaW5nIHRoZSBjb250ZW50IHdpdGhcbiAqIHRoZSBnaXZlbiBab2Qgb2JqZWN0LlxuICpcbiAqIGBgYHRzXG4gKiBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgY2xpZW50LmNoYXQuY29tcGxldGlvbnMucGFyc2Uoe1xuICogICAgbW9kZWw6ICdncHQtNG8tMjAyNC0wOC0wNicsXG4gKiAgICBtZXNzYWdlczogW1xuICogICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiAnWW91IGFyZSBhIGhlbHBmdWwgbWF0aCB0dXRvci4nIH0sXG4gKiAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnc29sdmUgOHggKyAzMSA9IDInIH0sXG4gKiAgICBdLFxuICogICAgcmVzcG9uc2VfZm9ybWF0OiB6b2RSZXNwb25zZUZvcm1hdChcbiAqICAgICAgei5vYmplY3Qoe1xuICogICAgICAgIHN0ZXBzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAqICAgICAgICAgIGV4cGxhbmF0aW9uOiB6LnN0cmluZygpLFxuICogICAgICAgICAgYW5zd2VyOiB6LnN0cmluZygpLFxuICogICAgICAgIH0pKSxcbiAqICAgICAgICBmaW5hbF9hbnN3ZXI6IHouc3RyaW5nKCksXG4gKiAgICAgIH0pLFxuICogICAgICAnbWF0aF9hbnN3ZXInLFxuICogICAgKSxcbiAqICB9KTtcbiAqICBjb25zdCBtZXNzYWdlID0gY29tcGxldGlvbi5jaG9pY2VzWzBdPy5tZXNzYWdlO1xuICogIGlmIChtZXNzYWdlPy5wYXJzZWQpIHtcbiAqICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UucGFyc2VkKTtcbiAqICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UucGFyc2VkLmZpbmFsX2Fuc3dlcik7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBUaGlzIGNhbiBiZSBwYXNzZWQgZGlyZWN0bHkgdG8gdGhlIGAuY3JlYXRlKClgIG1ldGhvZCBidXQgd2lsbCBub3RcbiAqIHJlc3VsdCBpbiBhbnkgYXV0b21hdGljIHBhcnNpbmcsIHlvdSdsbCBoYXZlIHRvIHBhcnNlIHRoZSByZXNwb25zZSB5b3Vyc2VsZi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvZFJlc3BvbnNlRm9ybWF0KHpvZE9iamVjdCwgbmFtZSwgcHJvcHMpIHtcbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVJlc3BvbnNlRm9ybWF0KHtcbiAgICAgICAgdHlwZTogJ2pzb25fc2NoZW1hJyxcbiAgICAgICAganNvbl9zY2hlbWE6IHtcbiAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgIHNjaGVtYTogem9kVG9Kc29uU2NoZW1hKHpvZE9iamVjdCwgeyBuYW1lIH0pLFxuICAgICAgICB9LFxuICAgIH0sIChjb250ZW50KSA9PiB6b2RPYmplY3QucGFyc2UoSlNPTi5wYXJzZShjb250ZW50KSkpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHpvZFRleHRGb3JtYXQoem9kT2JqZWN0LCBuYW1lLCBwcm9wcykge1xuICAgIHJldHVybiBtYWtlUGFyc2VhYmxlVGV4dEZvcm1hdCh7XG4gICAgICAgIHR5cGU6ICdqc29uX3NjaGVtYScsXG4gICAgICAgIC4uLnByb3BzLFxuICAgICAgICBuYW1lLFxuICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgIHNjaGVtYTogem9kVG9Kc29uU2NoZW1hKHpvZE9iamVjdCwgeyBuYW1lIH0pLFxuICAgIH0sIChjb250ZW50KSA9PiB6b2RPYmplY3QucGFyc2UoSlNPTi5wYXJzZShjb250ZW50KSkpO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgY2hhdCBjb21wbGV0aW9uIGBmdW5jdGlvbmAgdG9vbCB0aGF0IGNhbiBiZSBpbnZva2VkXG4gKiBhdXRvbWF0aWNhbGx5IGJ5IHRoZSBjaGF0IGNvbXBsZXRpb24gYC5ydW5Ub29scygpYCBtZXRob2Qgb3IgYXV0b21hdGljYWxseVxuICogcGFyc2VkIGJ5IGAucGFyc2UoKWAgLyBgLnN0cmVhbSgpYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvZEZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE9cbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVRvb2woe1xuICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICBmdW5jdGlvbjoge1xuICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogem9kVG9Kc29uU2NoZW1hKG9wdGlvbnMucGFyYW1ldGVycywgeyBuYW1lOiBvcHRpb25zLm5hbWUgfSksXG4gICAgICAgICAgICBzdHJpY3Q6IHRydWUsXG4gICAgICAgICAgICAuLi4ob3B0aW9ucy5kZXNjcmlwdGlvbiA/IHsgZGVzY3JpcHRpb246IG9wdGlvbnMuZGVzY3JpcHRpb24gfSA6IHVuZGVmaW5lZCksXG4gICAgICAgIH0sXG4gICAgfSwge1xuICAgICAgICBjYWxsYmFjazogb3B0aW9ucy5mdW5jdGlvbixcbiAgICAgICAgcGFyc2VyOiAoYXJncykgPT4gb3B0aW9ucy5wYXJhbWV0ZXJzLnBhcnNlKEpTT04ucGFyc2UoYXJncykpLFxuICAgIH0pO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHpvZFJlc3BvbnNlc0Z1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbWFrZVBhcnNlYWJsZVJlc3BvbnNlVG9vbCh7XG4gICAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSxcbiAgICAgICAgcGFyYW1ldGVyczogem9kVG9Kc29uU2NoZW1hKG9wdGlvbnMucGFyYW1ldGVycywgeyBuYW1lOiBvcHRpb25zLm5hbWUgfSksXG4gICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgLi4uKG9wdGlvbnMuZGVzY3JpcHRpb24gPyB7IGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uIH0gOiB1bmRlZmluZWQpLFxuICAgIH0sIHtcbiAgICAgICAgY2FsbGJhY2s6IG9wdGlvbnMuZnVuY3Rpb24sXG4gICAgICAgIHBhcnNlcjogKGFyZ3MpID0+IG9wdGlvbnMucGFyYW1ldGVycy5wYXJzZShKU09OLnBhcnNlKGFyZ3MpKSxcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXpvZC5tanMubWFwIiwiLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgZXJyb3JzIHRocm93biBieSB0aGUgbGlicmFyeS5cbiAqL1xuZXhwb3J0IGNsYXNzIEFnZW50c0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIHN0YXRlO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgfVxufVxuLyoqXG4gKiBTeXN0ZW0gZXJyb3IgdGhyb3duIHdoZW4gdGhlIGxpYnJhcnkgZW5jb3VudGVycyBhbiBlcnJvciB0aGF0IGlzIG5vdCBjYXVzZWQgYnkgdGhlIHVzZXInc1xuICogbWlzY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFN5c3RlbUVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgdHVybnMgaXMgZXhjZWVkZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGEgbW9kZWwgYmVoYXZpb3IgaXMgdW5leHBlY3RlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1vZGVsQmVoYXZpb3JFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gdGhlIGVycm9yIGlzIGNhdXNlZCBieSB0aGUgbGlicmFyeSB1c2VyJ3MgbWlzY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFVzZXJFcnJvciBleHRlbmRzIEFnZW50c0Vycm9yIHtcbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSBndWFyZHJhaWwgZXhlY3V0aW9uIGZhaWxzLlxuICovXG5leHBvcnQgY2xhc3MgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IgZXh0ZW5kcyBBZ2VudHNFcnJvciB7XG4gICAgZXJyb3I7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgZXJyb3IsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3IgdGhyb3duIHdoZW4gYSB0b29sIGNhbGwgZmFpbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sQ2FsbEVycm9yIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIGVycm9yO1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGVycm9yLCBzdGF0ZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICB9XG59XG4vKipcbiAqIEVycm9yIHRocm93biB3aGVuIGFuIGlucHV0IGd1YXJkcmFpbCB0cmlwd2lyZSBpcyB0cmlnZ2VyZWQuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIHJlc3VsdDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxufVxuLyoqXG4gKiBFcnJvciB0aHJvd24gd2hlbiBhbiBvdXRwdXQgZ3VhcmRyYWlsIHRyaXB3aXJlIGlzIHRyaWdnZXJlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIGV4dGVuZHMgQWdlbnRzRXJyb3Ige1xuICAgIHJlc3VsdDtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXN1bHQsIHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXJyb3JzLm1qcy5tYXAiLCIvKipcbiAqIFZlcmlmaWVzIHRoYXQgYW4gaW5wdXQgaXMgYSBab2RPYmplY3Qgd2l0aG91dCBuZWVkaW5nIHRvIGhhdmUgWm9kIGF0IHJ1bnRpbWUgc2luY2UgaXQncyBhblxuICogb3B0aW9uYWwgZGVwZW5kZW5jeS5cbiAqIEBwYXJhbSBpbnB1dFxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzWm9kT2JqZWN0KGlucHV0KSB7XG4gICAgcmV0dXJuICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGlucHV0ICE9PSBudWxsICYmXG4gICAgICAgICdfZGVmJyBpbiBpbnB1dCAmJlxuICAgICAgICB0eXBlb2YgaW5wdXQuX2RlZiA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgaW5wdXQuX2RlZiAhPT0gbnVsbCAmJlxuICAgICAgICAndHlwZU5hbWUnIGluIGlucHV0Ll9kZWYgJiZcbiAgICAgICAgaW5wdXQuX2RlZi50eXBlTmFtZSA9PT0gJ1pvZE9iamVjdCcpO1xufVxuLyoqXG4gKiBWZXJpZmllcyB0aGF0IGFuIGlucHV0IGlzIGFuIG9iamVjdCB3aXRoIGFuIGBpbnB1dGAgcHJvcGVydHkuXG4gKiBAcGFyYW0gaW5wdXRcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FnZW50VG9vbElucHV0KGlucHV0KSB7XG4gICAgcmV0dXJuICh0eXBlb2YgaW5wdXQgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGlucHV0ICE9PSBudWxsICYmXG4gICAgICAgICdpbnB1dCcgaW4gaW5wdXQgJiZcbiAgICAgICAgdHlwZW9mIGlucHV0LmlucHV0ID09PSAnc3RyaW5nJyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10eXBlR3VhcmRzLm1qcy5tYXAiLCJpbXBvcnQgeyB6b2RSZXNwb25zZXNGdW5jdGlvbiwgem9kVGV4dEZvcm1hdCB9IGZyb20gJ29wZW5haS9oZWxwZXJzL3pvZCc7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgaXNab2RPYmplY3QgfSBmcm9tIFwiLi90eXBlR3VhcmRzLm1qc1wiO1xuLyoqXG4gKiBDb252ZXJ0IGEgc3RyaW5nIHRvIGEgZnVuY3Rpb24gdG9vbCBuYW1lIGJ5IHJlcGxhY2luZyBzcGFjZXMgd2l0aCB1bmRlcnNjb3JlcyBhbmRcbiAqIG5vbi1hbHBoYW51bWVyaWMgY2hhcmFjdGVycyB3aXRoIHVuZGVyc2NvcmVzLlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdG9vbC5cbiAqIEByZXR1cm5zIFRoZSBmdW5jdGlvbiB0b29sIG5hbWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0Z1bmN0aW9uVG9vbE5hbWUobmFtZSkge1xuICAgIC8vIFJlcGxhY2Ugc3BhY2VzIHdpdGggdW5kZXJzY29yZXNcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKC9cXHMvZywgJ18nKTtcbiAgICAvLyBSZXBsYWNlIG5vbi1hbHBoYW51bWVyaWMgY2hhcmFjdGVycyB3aXRoIHVuZGVyc2NvcmVzXG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW15hLXpBLVowLTldL2csICdfJyk7XG4gICAgLy8gRW5zdXJlIHRoZSBuYW1lIGlzIG5vdCBlbXB0eVxuICAgIGlmIChuYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rvb2wgbmFtZSBjYW5ub3QgYmUgZW1wdHknKTtcbiAgICB9XG4gICAgcmV0dXJuIG5hbWU7XG59XG4vKipcbiAqIEdldCB0aGUgc2NoZW1hIGFuZCBwYXJzZXIgZnJvbSBhbiBpbnB1dCB0eXBlLiBJZiB0aGUgaW5wdXQgdHlwZSBpcyBhIFpvZE9iamVjdCwgd2Ugd2lsbCBjb252ZXJ0XG4gKiBpdCBpbnRvIGEgSlNPTiBTY2hlbWEgYW5kIHVzZSBab2QgYXMgcGFyc2VyLiBJZiB0aGUgaW5wdXQgdHlwZSBpcyBhIEpTT04gc2NoZW1hLCB3ZSB1c2UgdGhlXG4gKiBKU09OLnBhcnNlIGZ1bmN0aW9uIHRvIGdldCB0aGUgcGFyc2VyLlxuICogQHBhcmFtIGlucHV0VHlwZSAtIFRoZSBpbnB1dCB0eXBlIHRvIGdldCB0aGUgc2NoZW1hIGFuZCBwYXJzZXIgZnJvbS5cbiAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHRvb2wuXG4gKiBAcmV0dXJucyBUaGUgc2NoZW1hIGFuZCBwYXJzZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlKGlucHV0VHlwZSwgbmFtZSkge1xuICAgIGNvbnN0IHBhcnNlciA9IChpbnB1dCkgPT4gSlNPTi5wYXJzZShpbnB1dCk7XG4gICAgaWYgKGlzWm9kT2JqZWN0KGlucHV0VHlwZSkpIHtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkRnVuY3Rpb24gPSB6b2RSZXNwb25zZXNGdW5jdGlvbih7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgcGFyYW1ldGVyczogaW5wdXRUeXBlLFxuICAgICAgICAgICAgZnVuY3Rpb246ICgpID0+IHsgfSwgLy8gZW1wdHkgZnVuY3Rpb24gaGVyZSB0byBzYXRpc2Z5IHRoZSBPcGVuQUkgaGVscGVyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2NoZW1hOiBmb3JtYXR0ZWRGdW5jdGlvbi5wYXJhbWV0ZXJzLFxuICAgICAgICAgICAgcGFyc2VyOiBmb3JtYXR0ZWRGdW5jdGlvbi4kcGFyc2VSYXcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dFR5cGUgPT09ICdvYmplY3QnICYmIGlucHV0VHlwZSAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2NoZW1hOiBpbnB1dFR5cGUsXG4gICAgICAgICAgICBwYXJzZXIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ0lucHV0IHR5cGUgaXMgbm90IGEgWm9kT2JqZWN0IG9yIGEgdmFsaWQgSlNPTiBzY2hlbWEnKTtcbn1cbi8qKlxuICogQ29udmVydHMgdGhlIGFnZW50IG91dHB1dCB0eXBlIHByb3ZpZGVkIHRvIGEgc2VyaWFsaXphYmxlIHZlcnNpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZShvdXRwdXRUeXBlKSB7XG4gICAgaWYgKG91dHB1dFR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICByZXR1cm4gJ3RleHQnO1xuICAgIH1cbiAgICBpZiAoaXNab2RPYmplY3Qob3V0cHV0VHlwZSkpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gem9kVGV4dEZvcm1hdChvdXRwdXRUeXBlLCAnb3V0cHV0Jyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBvdXRwdXQudHlwZSxcbiAgICAgICAgICAgIG5hbWU6IG91dHB1dC5uYW1lLFxuICAgICAgICAgICAgc3RyaWN0OiBvdXRwdXQuc3RyaWN0IHx8IGZhbHNlLFxuICAgICAgICAgICAgc2NoZW1hOiBvdXRwdXQuc2NoZW1hLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0VHlwZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvb2xzLm1qcy5tYXAiLCIvKipcbiAqIEhlbHBlcnMuXG4gKi9cblxudmFyIHMgPSAxMDAwO1xudmFyIG0gPSBzICogNjA7XG52YXIgaCA9IG0gKiA2MDtcbnZhciBkID0gaCAqIDI0O1xudmFyIHcgPSBkICogNztcbnZhciB5ID0gZCAqIDM2NS4yNTtcblxuLyoqXG4gKiBQYXJzZSBvciBmb3JtYXQgdGhlIGdpdmVuIGB2YWxgLlxuICpcbiAqIE9wdGlvbnM6XG4gKlxuICogIC0gYGxvbmdgIHZlcmJvc2UgZm9ybWF0dGluZyBbZmFsc2VdXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8TnVtYmVyfSB2YWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEB0aHJvd3Mge0Vycm9yfSB0aHJvdyBhbiBlcnJvciBpZiB2YWwgaXMgbm90IGEgbm9uLWVtcHR5IHN0cmluZyBvciBhIG51bWJlclxuICogQHJldHVybiB7U3RyaW5nfE51bWJlcn1cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodmFsLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWw7XG4gIGlmICh0eXBlID09PSAnc3RyaW5nJyAmJiB2YWwubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBwYXJzZSh2YWwpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09ICdudW1iZXInICYmIGlzRmluaXRlKHZhbCkpIHtcbiAgICByZXR1cm4gb3B0aW9ucy5sb25nID8gZm10TG9uZyh2YWwpIDogZm10U2hvcnQodmFsKTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgJ3ZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgdmFsaWQgbnVtYmVyLiB2YWw9JyArXG4gICAgICBKU09OLnN0cmluZ2lmeSh2YWwpXG4gICk7XG59O1xuXG4vKipcbiAqIFBhcnNlIHRoZSBnaXZlbiBgc3RyYCBhbmQgcmV0dXJuIG1pbGxpc2Vjb25kcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZShzdHIpIHtcbiAgc3RyID0gU3RyaW5nKHN0cik7XG4gIGlmIChzdHIubGVuZ3RoID4gMTAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBtYXRjaCA9IC9eKC0/KD86XFxkKyk/XFwuP1xcZCspICoobWlsbGlzZWNvbmRzP3xtc2Vjcz98bXN8c2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx3ZWVrcz98d3x5ZWFycz98eXJzP3x5KT8kL2kuZXhlYyhcbiAgICBzdHJcbiAgKTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbiA9IHBhcnNlRmxvYXQobWF0Y2hbMV0pO1xuICB2YXIgdHlwZSA9IChtYXRjaFsyXSB8fCAnbXMnKS50b0xvd2VyQ2FzZSgpO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICd5ZWFycyc6XG4gICAgY2FzZSAneWVhcic6XG4gICAgY2FzZSAneXJzJzpcbiAgICBjYXNlICd5cic6XG4gICAgY2FzZSAneSc6XG4gICAgICByZXR1cm4gbiAqIHk7XG4gICAgY2FzZSAnd2Vla3MnOlxuICAgIGNhc2UgJ3dlZWsnOlxuICAgIGNhc2UgJ3cnOlxuICAgICAgcmV0dXJuIG4gKiB3O1xuICAgIGNhc2UgJ2RheXMnOlxuICAgIGNhc2UgJ2RheSc6XG4gICAgY2FzZSAnZCc6XG4gICAgICByZXR1cm4gbiAqIGQ7XG4gICAgY2FzZSAnaG91cnMnOlxuICAgIGNhc2UgJ2hvdXInOlxuICAgIGNhc2UgJ2hycyc6XG4gICAgY2FzZSAnaHInOlxuICAgIGNhc2UgJ2gnOlxuICAgICAgcmV0dXJuIG4gKiBoO1xuICAgIGNhc2UgJ21pbnV0ZXMnOlxuICAgIGNhc2UgJ21pbnV0ZSc6XG4gICAgY2FzZSAnbWlucyc6XG4gICAgY2FzZSAnbWluJzpcbiAgICBjYXNlICdtJzpcbiAgICAgIHJldHVybiBuICogbTtcbiAgICBjYXNlICdzZWNvbmRzJzpcbiAgICBjYXNlICdzZWNvbmQnOlxuICAgIGNhc2UgJ3NlY3MnOlxuICAgIGNhc2UgJ3NlYyc6XG4gICAgY2FzZSAncyc6XG4gICAgICByZXR1cm4gbiAqIHM7XG4gICAgY2FzZSAnbWlsbGlzZWNvbmRzJzpcbiAgICBjYXNlICdtaWxsaXNlY29uZCc6XG4gICAgY2FzZSAnbXNlY3MnOlxuICAgIGNhc2UgJ21zZWMnOlxuICAgIGNhc2UgJ21zJzpcbiAgICAgIHJldHVybiBuO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogU2hvcnQgZm9ybWF0IGZvciBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZm10U2hvcnQobXMpIHtcbiAgdmFyIG1zQWJzID0gTWF0aC5hYnMobXMpO1xuICBpZiAobXNBYnMgPj0gZCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gZCkgKyAnZCc7XG4gIH1cbiAgaWYgKG1zQWJzID49IGgpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGgpICsgJ2gnO1xuICB9XG4gIGlmIChtc0FicyA+PSBtKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBtKSArICdtJztcbiAgfVxuICBpZiAobXNBYnMgPj0gcykge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gcykgKyAncyc7XG4gIH1cbiAgcmV0dXJuIG1zICsgJ21zJztcbn1cblxuLyoqXG4gKiBMb25nIGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGZtdExvbmcobXMpIHtcbiAgdmFyIG1zQWJzID0gTWF0aC5hYnMobXMpO1xuICBpZiAobXNBYnMgPj0gZCkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBkLCAnZGF5Jyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IGgpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgaCwgJ2hvdXInKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gbSkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBtLCAnbWludXRlJyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IHMpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgcywgJ3NlY29uZCcpO1xuICB9XG4gIHJldHVybiBtcyArICcgbXMnO1xufVxuXG4vKipcbiAqIFBsdXJhbGl6YXRpb24gaGVscGVyLlxuICovXG5cbmZ1bmN0aW9uIHBsdXJhbChtcywgbXNBYnMsIG4sIG5hbWUpIHtcbiAgdmFyIGlzUGx1cmFsID0gbXNBYnMgPj0gbiAqIDEuNTtcbiAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBuKSArICcgJyArIG5hbWUgKyAoaXNQbHVyYWwgPyAncycgOiAnJyk7XG59XG4iLCJcbi8qKlxuICogVGhpcyBpcyB0aGUgY29tbW9uIGxvZ2ljIGZvciBib3RoIHRoZSBOb2RlLmpzIGFuZCB3ZWIgYnJvd3NlclxuICogaW1wbGVtZW50YXRpb25zIG9mIGBkZWJ1ZygpYC5cbiAqL1xuXG5mdW5jdGlvbiBzZXR1cChlbnYpIHtcblx0Y3JlYXRlRGVidWcuZGVidWcgPSBjcmVhdGVEZWJ1Zztcblx0Y3JlYXRlRGVidWcuZGVmYXVsdCA9IGNyZWF0ZURlYnVnO1xuXHRjcmVhdGVEZWJ1Zy5jb2VyY2UgPSBjb2VyY2U7XG5cdGNyZWF0ZURlYnVnLmRpc2FibGUgPSBkaXNhYmxlO1xuXHRjcmVhdGVEZWJ1Zy5lbmFibGUgPSBlbmFibGU7XG5cdGNyZWF0ZURlYnVnLmVuYWJsZWQgPSBlbmFibGVkO1xuXHRjcmVhdGVEZWJ1Zy5odW1hbml6ZSA9IHJlcXVpcmUoJ21zJyk7XG5cdGNyZWF0ZURlYnVnLmRlc3Ryb3kgPSBkZXN0cm95O1xuXG5cdE9iamVjdC5rZXlzKGVudikuZm9yRWFjaChrZXkgPT4ge1xuXHRcdGNyZWF0ZURlYnVnW2tleV0gPSBlbnZba2V5XTtcblx0fSk7XG5cblx0LyoqXG5cdCogVGhlIGN1cnJlbnRseSBhY3RpdmUgZGVidWcgbW9kZSBuYW1lcywgYW5kIG5hbWVzIHRvIHNraXAuXG5cdCovXG5cblx0Y3JlYXRlRGVidWcubmFtZXMgPSBbXTtcblx0Y3JlYXRlRGVidWcuc2tpcHMgPSBbXTtcblxuXHQvKipcblx0KiBNYXAgb2Ygc3BlY2lhbCBcIiVuXCIgaGFuZGxpbmcgZnVuY3Rpb25zLCBmb3IgdGhlIGRlYnVnIFwiZm9ybWF0XCIgYXJndW1lbnQuXG5cdCpcblx0KiBWYWxpZCBrZXkgbmFtZXMgYXJlIGEgc2luZ2xlLCBsb3dlciBvciB1cHBlci1jYXNlIGxldHRlciwgaS5lLiBcIm5cIiBhbmQgXCJOXCIuXG5cdCovXG5cdGNyZWF0ZURlYnVnLmZvcm1hdHRlcnMgPSB7fTtcblxuXHQvKipcblx0KiBTZWxlY3RzIGEgY29sb3IgZm9yIGEgZGVidWcgbmFtZXNwYWNlXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZSBUaGUgbmFtZXNwYWNlIHN0cmluZyBmb3IgdGhlIGRlYnVnIGluc3RhbmNlIHRvIGJlIGNvbG9yZWRcblx0KiBAcmV0dXJuIHtOdW1iZXJ8U3RyaW5nfSBBbiBBTlNJIGNvbG9yIGNvZGUgZm9yIHRoZSBnaXZlbiBuYW1lc3BhY2Vcblx0KiBAYXBpIHByaXZhdGVcblx0Ki9cblx0ZnVuY3Rpb24gc2VsZWN0Q29sb3IobmFtZXNwYWNlKSB7XG5cdFx0bGV0IGhhc2ggPSAwO1xuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBuYW1lc3BhY2UubGVuZ3RoOyBpKyspIHtcblx0XHRcdGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIG5hbWVzcGFjZS5jaGFyQ29kZUF0KGkpO1xuXHRcdFx0aGFzaCB8PSAwOyAvLyBDb252ZXJ0IHRvIDMyYml0IGludGVnZXJcblx0XHR9XG5cblx0XHRyZXR1cm4gY3JlYXRlRGVidWcuY29sb3JzW01hdGguYWJzKGhhc2gpICUgY3JlYXRlRGVidWcuY29sb3JzLmxlbmd0aF07XG5cdH1cblx0Y3JlYXRlRGVidWcuc2VsZWN0Q29sb3IgPSBzZWxlY3RDb2xvcjtcblxuXHQvKipcblx0KiBDcmVhdGUgYSBkZWJ1Z2dlciB3aXRoIHRoZSBnaXZlbiBgbmFtZXNwYWNlYC5cblx0KlxuXHQqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2Vcblx0KiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBjcmVhdGVEZWJ1ZyhuYW1lc3BhY2UpIHtcblx0XHRsZXQgcHJldlRpbWU7XG5cdFx0bGV0IGVuYWJsZU92ZXJyaWRlID0gbnVsbDtcblx0XHRsZXQgbmFtZXNwYWNlc0NhY2hlO1xuXHRcdGxldCBlbmFibGVkQ2FjaGU7XG5cblx0XHRmdW5jdGlvbiBkZWJ1ZyguLi5hcmdzKSB7XG5cdFx0XHQvLyBEaXNhYmxlZD9cblx0XHRcdGlmICghZGVidWcuZW5hYmxlZCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHNlbGYgPSBkZWJ1ZztcblxuXHRcdFx0Ly8gU2V0IGBkaWZmYCB0aW1lc3RhbXBcblx0XHRcdGNvbnN0IGN1cnIgPSBOdW1iZXIobmV3IERhdGUoKSk7XG5cdFx0XHRjb25zdCBtcyA9IGN1cnIgLSAocHJldlRpbWUgfHwgY3Vycik7XG5cdFx0XHRzZWxmLmRpZmYgPSBtcztcblx0XHRcdHNlbGYucHJldiA9IHByZXZUaW1lO1xuXHRcdFx0c2VsZi5jdXJyID0gY3Vycjtcblx0XHRcdHByZXZUaW1lID0gY3VycjtcblxuXHRcdFx0YXJnc1swXSA9IGNyZWF0ZURlYnVnLmNvZXJjZShhcmdzWzBdKTtcblxuXHRcdFx0aWYgKHR5cGVvZiBhcmdzWzBdICE9PSAnc3RyaW5nJykge1xuXHRcdFx0XHQvLyBBbnl0aGluZyBlbHNlIGxldCdzIGluc3BlY3Qgd2l0aCAlT1xuXHRcdFx0XHRhcmdzLnVuc2hpZnQoJyVPJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFwcGx5IGFueSBgZm9ybWF0dGVyc2AgdHJhbnNmb3JtYXRpb25zXG5cdFx0XHRsZXQgaW5kZXggPSAwO1xuXHRcdFx0YXJnc1swXSA9IGFyZ3NbMF0ucmVwbGFjZSgvJShbYS16QS1aJV0pL2csIChtYXRjaCwgZm9ybWF0KSA9PiB7XG5cdFx0XHRcdC8vIElmIHdlIGVuY291bnRlciBhbiBlc2NhcGVkICUgdGhlbiBkb24ndCBpbmNyZWFzZSB0aGUgYXJyYXkgaW5kZXhcblx0XHRcdFx0aWYgKG1hdGNoID09PSAnJSUnKSB7XG5cdFx0XHRcdFx0cmV0dXJuICclJztcblx0XHRcdFx0fVxuXHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRjb25zdCBmb3JtYXR0ZXIgPSBjcmVhdGVEZWJ1Zy5mb3JtYXR0ZXJzW2Zvcm1hdF07XG5cdFx0XHRcdGlmICh0eXBlb2YgZm9ybWF0dGVyID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0Y29uc3QgdmFsID0gYXJnc1tpbmRleF07XG5cdFx0XHRcdFx0bWF0Y2ggPSBmb3JtYXR0ZXIuY2FsbChzZWxmLCB2YWwpO1xuXG5cdFx0XHRcdFx0Ly8gTm93IHdlIG5lZWQgdG8gcmVtb3ZlIGBhcmdzW2luZGV4XWAgc2luY2UgaXQncyBpbmxpbmVkIGluIHRoZSBgZm9ybWF0YFxuXHRcdFx0XHRcdGFyZ3Muc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdFx0XHRpbmRleC0tO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBtYXRjaDtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBBcHBseSBlbnYtc3BlY2lmaWMgZm9ybWF0dGluZyAoY29sb3JzLCBldGMuKVxuXHRcdFx0Y3JlYXRlRGVidWcuZm9ybWF0QXJncy5jYWxsKHNlbGYsIGFyZ3MpO1xuXG5cdFx0XHRjb25zdCBsb2dGbiA9IHNlbGYubG9nIHx8IGNyZWF0ZURlYnVnLmxvZztcblx0XHRcdGxvZ0ZuLmFwcGx5KHNlbGYsIGFyZ3MpO1xuXHRcdH1cblxuXHRcdGRlYnVnLm5hbWVzcGFjZSA9IG5hbWVzcGFjZTtcblx0XHRkZWJ1Zy51c2VDb2xvcnMgPSBjcmVhdGVEZWJ1Zy51c2VDb2xvcnMoKTtcblx0XHRkZWJ1Zy5jb2xvciA9IGNyZWF0ZURlYnVnLnNlbGVjdENvbG9yKG5hbWVzcGFjZSk7XG5cdFx0ZGVidWcuZXh0ZW5kID0gZXh0ZW5kO1xuXHRcdGRlYnVnLmRlc3Ryb3kgPSBjcmVhdGVEZWJ1Zy5kZXN0cm95OyAvLyBYWFggVGVtcG9yYXJ5LiBXaWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgcmVsZWFzZS5cblxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShkZWJ1ZywgJ2VuYWJsZWQnLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcblx0XHRcdGdldDogKCkgPT4ge1xuXHRcdFx0XHRpZiAoZW5hYmxlT3ZlcnJpZGUgIT09IG51bGwpIHtcblx0XHRcdFx0XHRyZXR1cm4gZW5hYmxlT3ZlcnJpZGU7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKG5hbWVzcGFjZXNDYWNoZSAhPT0gY3JlYXRlRGVidWcubmFtZXNwYWNlcykge1xuXHRcdFx0XHRcdG5hbWVzcGFjZXNDYWNoZSA9IGNyZWF0ZURlYnVnLm5hbWVzcGFjZXM7XG5cdFx0XHRcdFx0ZW5hYmxlZENhY2hlID0gY3JlYXRlRGVidWcuZW5hYmxlZChuYW1lc3BhY2UpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGVuYWJsZWRDYWNoZTtcblx0XHRcdH0sXG5cdFx0XHRzZXQ6IHYgPT4ge1xuXHRcdFx0XHRlbmFibGVPdmVycmlkZSA9IHY7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBFbnYtc3BlY2lmaWMgaW5pdGlhbGl6YXRpb24gbG9naWMgZm9yIGRlYnVnIGluc3RhbmNlc1xuXHRcdGlmICh0eXBlb2YgY3JlYXRlRGVidWcuaW5pdCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0Y3JlYXRlRGVidWcuaW5pdChkZWJ1Zyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlYnVnO1xuXHR9XG5cblx0ZnVuY3Rpb24gZXh0ZW5kKG5hbWVzcGFjZSwgZGVsaW1pdGVyKSB7XG5cdFx0Y29uc3QgbmV3RGVidWcgPSBjcmVhdGVEZWJ1Zyh0aGlzLm5hbWVzcGFjZSArICh0eXBlb2YgZGVsaW1pdGVyID09PSAndW5kZWZpbmVkJyA/ICc6JyA6IGRlbGltaXRlcikgKyBuYW1lc3BhY2UpO1xuXHRcdG5ld0RlYnVnLmxvZyA9IHRoaXMubG9nO1xuXHRcdHJldHVybiBuZXdEZWJ1Zztcblx0fVxuXG5cdC8qKlxuXHQqIEVuYWJsZXMgYSBkZWJ1ZyBtb2RlIGJ5IG5hbWVzcGFjZXMuIFRoaXMgY2FuIGluY2x1ZGUgbW9kZXNcblx0KiBzZXBhcmF0ZWQgYnkgYSBjb2xvbiBhbmQgd2lsZGNhcmRzLlxuXHQqXG5cdCogQHBhcmFtIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBlbmFibGUobmFtZXNwYWNlcykge1xuXHRcdGNyZWF0ZURlYnVnLnNhdmUobmFtZXNwYWNlcyk7XG5cdFx0Y3JlYXRlRGVidWcubmFtZXNwYWNlcyA9IG5hbWVzcGFjZXM7XG5cblx0XHRjcmVhdGVEZWJ1Zy5uYW1lcyA9IFtdO1xuXHRcdGNyZWF0ZURlYnVnLnNraXBzID0gW107XG5cblx0XHRjb25zdCBzcGxpdCA9ICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gJ3N0cmluZycgPyBuYW1lc3BhY2VzIDogJycpXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgnICcsICcsJylcblx0XHRcdC5zcGxpdCgnLCcpXG5cdFx0XHQuZmlsdGVyKEJvb2xlYW4pO1xuXG5cdFx0Zm9yIChjb25zdCBucyBvZiBzcGxpdCkge1xuXHRcdFx0aWYgKG5zWzBdID09PSAnLScpIHtcblx0XHRcdFx0Y3JlYXRlRGVidWcuc2tpcHMucHVzaChucy5zbGljZSgxKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjcmVhdGVEZWJ1Zy5uYW1lcy5wdXNoKG5zKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBzdHJpbmcgbWF0Y2hlcyBhIG5hbWVzcGFjZSB0ZW1wbGF0ZSwgaG9ub3Jpbmdcblx0ICogYXN0ZXJpc2tzIGFzIHdpbGRjYXJkcy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdGVtcGxhdGVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdGZ1bmN0aW9uIG1hdGNoZXNUZW1wbGF0ZShzZWFyY2gsIHRlbXBsYXRlKSB7XG5cdFx0bGV0IHNlYXJjaEluZGV4ID0gMDtcblx0XHRsZXQgdGVtcGxhdGVJbmRleCA9IDA7XG5cdFx0bGV0IHN0YXJJbmRleCA9IC0xO1xuXHRcdGxldCBtYXRjaEluZGV4ID0gMDtcblxuXHRcdHdoaWxlIChzZWFyY2hJbmRleCA8IHNlYXJjaC5sZW5ndGgpIHtcblx0XHRcdGlmICh0ZW1wbGF0ZUluZGV4IDwgdGVtcGxhdGUubGVuZ3RoICYmICh0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gc2VhcmNoW3NlYXJjaEluZGV4XSB8fCB0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gJyonKSkge1xuXHRcdFx0XHQvLyBNYXRjaCBjaGFyYWN0ZXIgb3IgcHJvY2VlZCB3aXRoIHdpbGRjYXJkXG5cdFx0XHRcdGlmICh0ZW1wbGF0ZVt0ZW1wbGF0ZUluZGV4XSA9PT0gJyonKSB7XG5cdFx0XHRcdFx0c3RhckluZGV4ID0gdGVtcGxhdGVJbmRleDtcblx0XHRcdFx0XHRtYXRjaEluZGV4ID0gc2VhcmNoSW5kZXg7XG5cdFx0XHRcdFx0dGVtcGxhdGVJbmRleCsrOyAvLyBTa2lwIHRoZSAnKidcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzZWFyY2hJbmRleCsrO1xuXHRcdFx0XHRcdHRlbXBsYXRlSW5kZXgrKztcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChzdGFySW5kZXggIT09IC0xKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbmVnYXRlZC1jb25kaXRpb25cblx0XHRcdFx0Ly8gQmFja3RyYWNrIHRvIHRoZSBsYXN0ICcqJyBhbmQgdHJ5IHRvIG1hdGNoIG1vcmUgY2hhcmFjdGVyc1xuXHRcdFx0XHR0ZW1wbGF0ZUluZGV4ID0gc3RhckluZGV4ICsgMTtcblx0XHRcdFx0bWF0Y2hJbmRleCsrO1xuXHRcdFx0XHRzZWFyY2hJbmRleCA9IG1hdGNoSW5kZXg7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7IC8vIE5vIG1hdGNoXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIHRyYWlsaW5nICcqJyBpbiB0ZW1wbGF0ZVxuXHRcdHdoaWxlICh0ZW1wbGF0ZUluZGV4IDwgdGVtcGxhdGUubGVuZ3RoICYmIHRlbXBsYXRlW3RlbXBsYXRlSW5kZXhdID09PSAnKicpIHtcblx0XHRcdHRlbXBsYXRlSW5kZXgrKztcblx0XHR9XG5cblx0XHRyZXR1cm4gdGVtcGxhdGVJbmRleCA9PT0gdGVtcGxhdGUubGVuZ3RoO1xuXHR9XG5cblx0LyoqXG5cdCogRGlzYWJsZSBkZWJ1ZyBvdXRwdXQuXG5cdCpcblx0KiBAcmV0dXJuIHtTdHJpbmd9IG5hbWVzcGFjZXNcblx0KiBAYXBpIHB1YmxpY1xuXHQqL1xuXHRmdW5jdGlvbiBkaXNhYmxlKCkge1xuXHRcdGNvbnN0IG5hbWVzcGFjZXMgPSBbXG5cdFx0XHQuLi5jcmVhdGVEZWJ1Zy5uYW1lcyxcblx0XHRcdC4uLmNyZWF0ZURlYnVnLnNraXBzLm1hcChuYW1lc3BhY2UgPT4gJy0nICsgbmFtZXNwYWNlKVxuXHRcdF0uam9pbignLCcpO1xuXHRcdGNyZWF0ZURlYnVnLmVuYWJsZSgnJyk7XG5cdFx0cmV0dXJuIG5hbWVzcGFjZXM7XG5cdH1cblxuXHQvKipcblx0KiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIG1vZGUgbmFtZSBpcyBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2UuXG5cdCpcblx0KiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCogQGFwaSBwdWJsaWNcblx0Ki9cblx0ZnVuY3Rpb24gZW5hYmxlZChuYW1lKSB7XG5cdFx0Zm9yIChjb25zdCBza2lwIG9mIGNyZWF0ZURlYnVnLnNraXBzKSB7XG5cdFx0XHRpZiAobWF0Y2hlc1RlbXBsYXRlKG5hbWUsIHNraXApKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmb3IgKGNvbnN0IG5zIG9mIGNyZWF0ZURlYnVnLm5hbWVzKSB7XG5cdFx0XHRpZiAobWF0Y2hlc1RlbXBsYXRlKG5hbWUsIG5zKSkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0KiBDb2VyY2UgYHZhbGAuXG5cdCpcblx0KiBAcGFyYW0ge01peGVkfSB2YWxcblx0KiBAcmV0dXJuIHtNaXhlZH1cblx0KiBAYXBpIHByaXZhdGVcblx0Ki9cblx0ZnVuY3Rpb24gY29lcmNlKHZhbCkge1xuXHRcdGlmICh2YWwgaW5zdGFuY2VvZiBFcnJvcikge1xuXHRcdFx0cmV0dXJuIHZhbC5zdGFjayB8fCB2YWwubWVzc2FnZTtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbDtcblx0fVxuXG5cdC8qKlxuXHQqIFhYWCBETyBOT1QgVVNFLiBUaGlzIGlzIGEgdGVtcG9yYXJ5IHN0dWIgZnVuY3Rpb24uXG5cdCogWFhYIEl0IFdJTEwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciByZWxlYXNlLlxuXHQqL1xuXHRmdW5jdGlvbiBkZXN0cm95KCkge1xuXHRcdGNvbnNvbGUud2FybignSW5zdGFuY2UgbWV0aG9kIGBkZWJ1Zy5kZXN0cm95KClgIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciBkb2VzIGFueXRoaW5nLiBJdCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiBvZiBgZGVidWdgLicpO1xuXHR9XG5cblx0Y3JlYXRlRGVidWcuZW5hYmxlKGNyZWF0ZURlYnVnLmxvYWQoKSk7XG5cblx0cmV0dXJuIGNyZWF0ZURlYnVnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNldHVwO1xuIiwiLyogZXNsaW50LWVudiBicm93c2VyICovXG5cbi8qKlxuICogVGhpcyBpcyB0aGUgd2ViIGJyb3dzZXIgaW1wbGVtZW50YXRpb24gb2YgYGRlYnVnKClgLlxuICovXG5cbmV4cG9ydHMuZm9ybWF0QXJncyA9IGZvcm1hdEFyZ3M7XG5leHBvcnRzLnNhdmUgPSBzYXZlO1xuZXhwb3J0cy5sb2FkID0gbG9hZDtcbmV4cG9ydHMudXNlQ29sb3JzID0gdXNlQ29sb3JzO1xuZXhwb3J0cy5zdG9yYWdlID0gbG9jYWxzdG9yYWdlKCk7XG5leHBvcnRzLmRlc3Ryb3kgPSAoKCkgPT4ge1xuXHRsZXQgd2FybmVkID0gZmFsc2U7XG5cblx0cmV0dXJuICgpID0+IHtcblx0XHRpZiAoIXdhcm5lZCkge1xuXHRcdFx0d2FybmVkID0gdHJ1ZTtcblx0XHRcdGNvbnNvbGUud2FybignSW5zdGFuY2UgbWV0aG9kIGBkZWJ1Zy5kZXN0cm95KClgIGlzIGRlcHJlY2F0ZWQgYW5kIG5vIGxvbmdlciBkb2VzIGFueXRoaW5nLiBJdCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5leHQgbWFqb3IgdmVyc2lvbiBvZiBgZGVidWdgLicpO1xuXHRcdH1cblx0fTtcbn0pKCk7XG5cbi8qKlxuICogQ29sb3JzLlxuICovXG5cbmV4cG9ydHMuY29sb3JzID0gW1xuXHQnIzAwMDBDQycsXG5cdCcjMDAwMEZGJyxcblx0JyMwMDMzQ0MnLFxuXHQnIzAwMzNGRicsXG5cdCcjMDA2NkNDJyxcblx0JyMwMDY2RkYnLFxuXHQnIzAwOTlDQycsXG5cdCcjMDA5OUZGJyxcblx0JyMwMENDMDAnLFxuXHQnIzAwQ0MzMycsXG5cdCcjMDBDQzY2Jyxcblx0JyMwMENDOTknLFxuXHQnIzAwQ0NDQycsXG5cdCcjMDBDQ0ZGJyxcblx0JyMzMzAwQ0MnLFxuXHQnIzMzMDBGRicsXG5cdCcjMzMzM0NDJyxcblx0JyMzMzMzRkYnLFxuXHQnIzMzNjZDQycsXG5cdCcjMzM2NkZGJyxcblx0JyMzMzk5Q0MnLFxuXHQnIzMzOTlGRicsXG5cdCcjMzNDQzAwJyxcblx0JyMzM0NDMzMnLFxuXHQnIzMzQ0M2NicsXG5cdCcjMzNDQzk5Jyxcblx0JyMzM0NDQ0MnLFxuXHQnIzMzQ0NGRicsXG5cdCcjNjYwMENDJyxcblx0JyM2NjAwRkYnLFxuXHQnIzY2MzNDQycsXG5cdCcjNjYzM0ZGJyxcblx0JyM2NkNDMDAnLFxuXHQnIzY2Q0MzMycsXG5cdCcjOTkwMENDJyxcblx0JyM5OTAwRkYnLFxuXHQnIzk5MzNDQycsXG5cdCcjOTkzM0ZGJyxcblx0JyM5OUNDMDAnLFxuXHQnIzk5Q0MzMycsXG5cdCcjQ0MwMDAwJyxcblx0JyNDQzAwMzMnLFxuXHQnI0NDMDA2NicsXG5cdCcjQ0MwMDk5Jyxcblx0JyNDQzAwQ0MnLFxuXHQnI0NDMDBGRicsXG5cdCcjQ0MzMzAwJyxcblx0JyNDQzMzMzMnLFxuXHQnI0NDMzM2NicsXG5cdCcjQ0MzMzk5Jyxcblx0JyNDQzMzQ0MnLFxuXHQnI0NDMzNGRicsXG5cdCcjQ0M2NjAwJyxcblx0JyNDQzY2MzMnLFxuXHQnI0NDOTkwMCcsXG5cdCcjQ0M5OTMzJyxcblx0JyNDQ0NDMDAnLFxuXHQnI0NDQ0MzMycsXG5cdCcjRkYwMDAwJyxcblx0JyNGRjAwMzMnLFxuXHQnI0ZGMDA2NicsXG5cdCcjRkYwMDk5Jyxcblx0JyNGRjAwQ0MnLFxuXHQnI0ZGMDBGRicsXG5cdCcjRkYzMzAwJyxcblx0JyNGRjMzMzMnLFxuXHQnI0ZGMzM2NicsXG5cdCcjRkYzMzk5Jyxcblx0JyNGRjMzQ0MnLFxuXHQnI0ZGMzNGRicsXG5cdCcjRkY2NjAwJyxcblx0JyNGRjY2MzMnLFxuXHQnI0ZGOTkwMCcsXG5cdCcjRkY5OTMzJyxcblx0JyNGRkNDMDAnLFxuXHQnI0ZGQ0MzMydcbl07XG5cbi8qKlxuICogQ3VycmVudGx5IG9ubHkgV2ViS2l0LWJhc2VkIFdlYiBJbnNwZWN0b3JzLCBGaXJlZm94ID49IHYzMSxcbiAqIGFuZCB0aGUgRmlyZWJ1ZyBleHRlbnNpb24gKGFueSBGaXJlZm94IHZlcnNpb24pIGFyZSBrbm93blxuICogdG8gc3VwcG9ydCBcIiVjXCIgQ1NTIGN1c3RvbWl6YXRpb25zLlxuICpcbiAqIFRPRE86IGFkZCBhIGBsb2NhbFN0b3JhZ2VgIHZhcmlhYmxlIHRvIGV4cGxpY2l0bHkgZW5hYmxlL2Rpc2FibGUgY29sb3JzXG4gKi9cblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbmZ1bmN0aW9uIHVzZUNvbG9ycygpIHtcblx0Ly8gTkI6IEluIGFuIEVsZWN0cm9uIHByZWxvYWQgc2NyaXB0LCBkb2N1bWVudCB3aWxsIGJlIGRlZmluZWQgYnV0IG5vdCBmdWxseVxuXHQvLyBpbml0aWFsaXplZC4gU2luY2Ugd2Uga25vdyB3ZSdyZSBpbiBDaHJvbWUsIHdlJ2xsIGp1c3QgZGV0ZWN0IHRoaXMgY2FzZVxuXHQvLyBleHBsaWNpdGx5XG5cdGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cucHJvY2VzcyAmJiAod2luZG93LnByb2Nlc3MudHlwZSA9PT0gJ3JlbmRlcmVyJyB8fCB3aW5kb3cucHJvY2Vzcy5fX253anMpKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHQvLyBJbnRlcm5ldCBFeHBsb3JlciBhbmQgRWRnZSBkbyBub3Qgc3VwcG9ydCBjb2xvcnMuXG5cdGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvKGVkZ2V8dHJpZGVudClcXC8oXFxkKykvKSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGxldCBtO1xuXG5cdC8vIElzIHdlYmtpdD8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTY0NTk2MDYvMzc2NzczXG5cdC8vIGRvY3VtZW50IGlzIHVuZGVmaW5lZCBpbiByZWFjdC1uYXRpdmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC1uYXRpdmUvcHVsbC8xNjMyXG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXR1cm4tYXNzaWduXG5cdHJldHVybiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5XZWJraXRBcHBlYXJhbmNlKSB8fFxuXHRcdC8vIElzIGZpcmVidWc/IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM5ODEyMC8zNzY3NzNcblx0XHQodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmNvbnNvbGUgJiYgKHdpbmRvdy5jb25zb2xlLmZpcmVidWcgfHwgKHdpbmRvdy5jb25zb2xlLmV4Y2VwdGlvbiAmJiB3aW5kb3cuY29uc29sZS50YWJsZSkpKSB8fFxuXHRcdC8vIElzIGZpcmVmb3ggPj0gdjMxP1xuXHRcdC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvVG9vbHMvV2ViX0NvbnNvbGUjU3R5bGluZ19tZXNzYWdlc1xuXHRcdCh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiBuYXZpZ2F0b3IudXNlckFnZW50ICYmIChtID0gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9maXJlZm94XFwvKFxcZCspLykpICYmIHBhcnNlSW50KG1bMV0sIDEwKSA+PSAzMSkgfHxcblx0XHQvLyBEb3VibGUgY2hlY2sgd2Via2l0IGluIHVzZXJBZ2VudCBqdXN0IGluIGNhc2Ugd2UgYXJlIGluIGEgd29ya2VyXG5cdFx0KHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci51c2VyQWdlbnQgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9hcHBsZXdlYmtpdFxcLyhcXGQrKS8pKTtcbn1cblxuLyoqXG4gKiBDb2xvcml6ZSBsb2cgYXJndW1lbnRzIGlmIGVuYWJsZWQuXG4gKlxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRBcmdzKGFyZ3MpIHtcblx0YXJnc1swXSA9ICh0aGlzLnVzZUNvbG9ycyA/ICclYycgOiAnJykgK1xuXHRcdHRoaXMubmFtZXNwYWNlICtcblx0XHQodGhpcy51c2VDb2xvcnMgPyAnICVjJyA6ICcgJykgK1xuXHRcdGFyZ3NbMF0gK1xuXHRcdCh0aGlzLnVzZUNvbG9ycyA/ICclYyAnIDogJyAnKSArXG5cdFx0JysnICsgbW9kdWxlLmV4cG9ydHMuaHVtYW5pemUodGhpcy5kaWZmKTtcblxuXHRpZiAoIXRoaXMudXNlQ29sb3JzKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Y29uc3QgYyA9ICdjb2xvcjogJyArIHRoaXMuY29sb3I7XG5cdGFyZ3Muc3BsaWNlKDEsIDAsIGMsICdjb2xvcjogaW5oZXJpdCcpO1xuXG5cdC8vIFRoZSBmaW5hbCBcIiVjXCIgaXMgc29tZXdoYXQgdHJpY2t5LCBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG90aGVyXG5cdC8vIGFyZ3VtZW50cyBwYXNzZWQgZWl0aGVyIGJlZm9yZSBvciBhZnRlciB0aGUgJWMsIHNvIHdlIG5lZWQgdG9cblx0Ly8gZmlndXJlIG91dCB0aGUgY29ycmVjdCBpbmRleCB0byBpbnNlcnQgdGhlIENTUyBpbnRvXG5cdGxldCBpbmRleCA9IDA7XG5cdGxldCBsYXN0QyA9IDA7XG5cdGFyZ3NbMF0ucmVwbGFjZSgvJVthLXpBLVolXS9nLCBtYXRjaCA9PiB7XG5cdFx0aWYgKG1hdGNoID09PSAnJSUnKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGluZGV4Kys7XG5cdFx0aWYgKG1hdGNoID09PSAnJWMnKSB7XG5cdFx0XHQvLyBXZSBvbmx5IGFyZSBpbnRlcmVzdGVkIGluIHRoZSAqbGFzdCogJWNcblx0XHRcdC8vICh0aGUgdXNlciBtYXkgaGF2ZSBwcm92aWRlZCB0aGVpciBvd24pXG5cdFx0XHRsYXN0QyA9IGluZGV4O1xuXHRcdH1cblx0fSk7XG5cblx0YXJncy5zcGxpY2UobGFzdEMsIDAsIGMpO1xufVxuXG4vKipcbiAqIEludm9rZXMgYGNvbnNvbGUuZGVidWcoKWAgd2hlbiBhdmFpbGFibGUuXG4gKiBOby1vcCB3aGVuIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgYSBcImZ1bmN0aW9uXCIuXG4gKiBJZiBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGF2YWlsYWJsZSwgZmFsbHMgYmFja1xuICogdG8gYGNvbnNvbGUubG9nYC5cbiAqXG4gKiBAYXBpIHB1YmxpY1xuICovXG5leHBvcnRzLmxvZyA9IGNvbnNvbGUuZGVidWcgfHwgY29uc29sZS5sb2cgfHwgKCgpID0+IHt9KTtcblxuLyoqXG4gKiBTYXZlIGBuYW1lc3BhY2VzYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlc1xuICogQGFwaSBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNhdmUobmFtZXNwYWNlcykge1xuXHR0cnkge1xuXHRcdGlmIChuYW1lc3BhY2VzKSB7XG5cdFx0XHRleHBvcnRzLnN0b3JhZ2Uuc2V0SXRlbSgnZGVidWcnLCBuYW1lc3BhY2VzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZXhwb3J0cy5zdG9yYWdlLnJlbW92ZUl0ZW0oJ2RlYnVnJyk7XG5cdFx0fVxuXHR9IGNhdGNoIChlcnJvcikge1xuXHRcdC8vIFN3YWxsb3dcblx0XHQvLyBYWFggKEBRaXgtKSBzaG91bGQgd2UgYmUgbG9nZ2luZyB0aGVzZT9cblx0fVxufVxuXG4vKipcbiAqIExvYWQgYG5hbWVzcGFjZXNgLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ30gcmV0dXJucyB0aGUgcHJldmlvdXNseSBwZXJzaXN0ZWQgZGVidWcgbW9kZXNcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBsb2FkKCkge1xuXHRsZXQgcjtcblx0dHJ5IHtcblx0XHRyID0gZXhwb3J0cy5zdG9yYWdlLmdldEl0ZW0oJ2RlYnVnJyk7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Ly8gU3dhbGxvd1xuXHRcdC8vIFhYWCAoQFFpeC0pIHNob3VsZCB3ZSBiZSBsb2dnaW5nIHRoZXNlP1xuXHR9XG5cblx0Ly8gSWYgZGVidWcgaXNuJ3Qgc2V0IGluIExTLCBhbmQgd2UncmUgaW4gRWxlY3Ryb24sIHRyeSB0byBsb2FkICRERUJVR1xuXHRpZiAoIXIgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICdlbnYnIGluIHByb2Nlc3MpIHtcblx0XHRyID0gcHJvY2Vzcy5lbnYuREVCVUc7XG5cdH1cblxuXHRyZXR1cm4gcjtcbn1cblxuLyoqXG4gKiBMb2NhbHN0b3JhZ2UgYXR0ZW1wdHMgdG8gcmV0dXJuIHRoZSBsb2NhbHN0b3JhZ2UuXG4gKlxuICogVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBzYWZhcmkgdGhyb3dzXG4gKiB3aGVuIGEgdXNlciBkaXNhYmxlcyBjb29raWVzL2xvY2Fsc3RvcmFnZVxuICogYW5kIHlvdSBhdHRlbXB0IHRvIGFjY2VzcyBpdC5cbiAqXG4gKiBAcmV0dXJuIHtMb2NhbFN0b3JhZ2V9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBsb2NhbHN0b3JhZ2UoKSB7XG5cdHRyeSB7XG5cdFx0Ly8gVFZNTEtpdCAoQXBwbGUgVFYgSlMgUnVudGltZSkgZG9lcyBub3QgaGF2ZSBhIHdpbmRvdyBvYmplY3QsIGp1c3QgbG9jYWxTdG9yYWdlIGluIHRoZSBnbG9iYWwgY29udGV4dFxuXHRcdC8vIFRoZSBCcm93c2VyIGFsc28gaGFzIGxvY2FsU3RvcmFnZSBpbiB0aGUgZ2xvYmFsIGNvbnRleHQuXG5cdFx0cmV0dXJuIGxvY2FsU3RvcmFnZTtcblx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHQvLyBTd2FsbG93XG5cdFx0Ly8gWFhYIChAUWl4LSkgc2hvdWxkIHdlIGJlIGxvZ2dpbmcgdGhlc2U/XG5cdH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2NvbW1vbicpKGV4cG9ydHMpO1xuXG5jb25zdCB7Zm9ybWF0dGVyc30gPSBtb2R1bGUuZXhwb3J0cztcblxuLyoqXG4gKiBNYXAgJWogdG8gYEpTT04uc3RyaW5naWZ5KClgLCBzaW5jZSBubyBXZWIgSW5zcGVjdG9ycyBkbyB0aGF0IGJ5IGRlZmF1bHQuXG4gKi9cblxuZm9ybWF0dGVycy5qID0gZnVuY3Rpb24gKHYpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkodik7XG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0cmV0dXJuICdbVW5leHBlY3RlZEpTT05QYXJzZUVycm9yXTogJyArIGVycm9yLm1lc3NhZ2U7XG5cdH1cbn07XG4iLCJpbXBvcnQgeyBsb2FkRW52IGFzIF9sb2FkRW52LCBpc0Jyb3dzZXJFbnZpcm9ubWVudCwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG4vKipcbiAqIExvYWRzIGVudmlyb25tZW50IHZhcmlhYmxlcyBmcm9tIHRoZSBwcm9jZXNzIGVudmlyb25tZW50LlxuICpcbiAqIEByZXR1cm5zIEFuIG9iamVjdCBjb250YWluaW5nIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2FkRW52KCkge1xuICAgIHJldHVybiBfbG9hZEVudigpO1xufVxuLyoqXG4gKiBDaGVja3MgaWYgYSBmbGFnIGlzIGVuYWJsZWQgaW4gdGhlIGVudmlyb25tZW50LlxuICpcbiAqIEBwYXJhbSBmbGFnTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBmbGFnIHRvIGNoZWNrLlxuICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBmbGFnIGlzIGVuYWJsZWQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICovXG5mdW5jdGlvbiBpc0VuYWJsZWQoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBlbnYgPSBsb2FkRW52KCk7XG4gICAgcmV0dXJuICh0eXBlb2YgZW52ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAoZW52W2ZsYWdOYW1lXSA9PT0gJ3RydWUnIHx8IGVudltmbGFnTmFtZV0gPT09ICcxJykpO1xufVxuLyoqXG4gKiBHbG9iYWwgY29uZmlndXJhdGlvbiBmb3IgdHJhY2luZy5cbiAqL1xuZXhwb3J0IGNvbnN0IHRyYWNpbmcgPSB7XG4gICAgZ2V0IGRpc2FibGVkKCkge1xuICAgICAgICBpZiAoaXNCcm93c2VyRW52aXJvbm1lbnQoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobG9hZEVudigpLk5PREVfRU5WID09PSAndGVzdCcpIHtcbiAgICAgICAgICAgIC8vIGRpc2FibGluZyBieSBkZWZhdWx0IGluIHRlc3RzXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaXNFbmFibGVkKCdPUEVOQUlfQUdFTlRTX0RJU0FCTEVfVFJBQ0lORycpO1xuICAgIH0sXG59O1xuLyoqXG4gKiBHbG9iYWwgY29uZmlndXJhdGlvbiBmb3IgbG9nZ2luZy5cbiAqL1xuZXhwb3J0IGNvbnN0IGxvZ2dpbmcgPSB7XG4gICAgZ2V0IGRvbnRMb2dNb2RlbERhdGEoKSB7XG4gICAgICAgIHJldHVybiBpc0VuYWJsZWQoJ09QRU5BSV9BR0VOVFNfRE9OVF9MT0dfTU9ERUxfREFUQScpO1xuICAgIH0sXG4gICAgZ2V0IGRvbnRMb2dUb29sRGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIGlzRW5hYmxlZCgnT1BFTkFJX0FHRU5UU19ET05UX0xPR19UT09MX0RBVEEnKTtcbiAgICB9LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmZpZy5tanMubWFwIiwiaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB7IGxvZ2dpbmcgfSBmcm9tIFwiLi9jb25maWcubWpzXCI7XG4vKipcbiAqIEJ5IGRlZmF1bHQgd2UgZG9uJ3QgbG9nIExMTSBpbnB1dHMvb3V0cHV0cywgdG8gcHJldmVudCBleHBvc2luZyBzZW5zaXRpdmUgZGF0YS4gU2V0IHRoaXMgZmxhZ1xuICogdG8gZW5hYmxlIGxvZ2dpbmcgdGhlbS5cbiAqL1xuY29uc3QgZG9udExvZ01vZGVsRGF0YSA9IGxvZ2dpbmcuZG9udExvZ01vZGVsRGF0YTtcbi8qKlxuICogQnkgZGVmYXVsdCB3ZSBkb24ndCBsb2cgdG9vbCBpbnB1dHMvb3V0cHV0cywgdG8gcHJldmVudCBleHBvc2luZyBzZW5zaXRpdmUgZGF0YS4gU2V0IHRoaXMgZmxhZ1xuICogdG8gZW5hYmxlIGxvZ2dpbmcgdGhlbS5cbiAqL1xuY29uc3QgZG9udExvZ1Rvb2xEYXRhID0gbG9nZ2luZy5kb250TG9nVG9vbERhdGE7XG4vKipcbiAqIEdldCBhIGxvZ2dlciBmb3IgYSBnaXZlbiBwYWNrYWdlLlxuICpcbiAqIEBwYXJhbSBuYW1lc3BhY2UgLSB0aGUgbmFtZXNwYWNlIHRvIHVzZSBmb3IgdGhlIGxvZ2dlci5cbiAqIEByZXR1cm5zIEEgbG9nZ2VyIG9iamVjdCB3aXRoIGBkZWJ1Z2AgYW5kIGBlcnJvcmAgbWV0aG9kcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExvZ2dlcihuYW1lc3BhY2UgPSAnb3BlbmFpLWFnZW50cycpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lc3BhY2UsXG4gICAgICAgIGRlYnVnOiBkZWJ1ZyhuYW1lc3BhY2UpLFxuICAgICAgICBlcnJvcjogY29uc29sZS5lcnJvcixcbiAgICAgICAgd2FybjogY29uc29sZS53YXJuLFxuICAgICAgICBkb250TG9nTW9kZWxEYXRhLFxuICAgICAgICBkb250TG9nVG9vbERhdGEsXG4gICAgfTtcbn1cbmV4cG9ydCBjb25zdCBsb2dnZXIgPSBnZXRMb2dnZXIoJ29wZW5haS1hZ2VudHM6Y29yZScpO1xuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9nZ2VyLm1qcy5tYXAiLCJleHBvcnQgZnVuY3Rpb24gdG9TbWFydFN0cmluZyh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcodmFsdWUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoX2UpIHtcbiAgICAgICAgICAgIHJldHVybiAnW29iamVjdCB3aXRoIGNpcmN1bGFyIHJlZmVyZW5jZXNdJztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNtYXJ0U3RyaW5nLm1qcy5tYXAiLCJpbXBvcnQgeyBzYWZlRXhlY3V0ZSB9IGZyb20gXCIuL3V0aWxzL3NhZmVFeGVjdXRlLm1qc1wiO1xuaW1wb3J0IHsgdG9GdW5jdGlvblRvb2xOYW1lIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIH0gZnJvbSBcIi4vdXRpbHMvdG9vbHMubWpzXCI7XG5pbXBvcnQgeyBpc1pvZE9iamVjdCB9IGZyb20gXCIuL3V0aWxzL3R5cGVHdWFyZHMubWpzXCI7XG5pbXBvcnQgeyBNb2RlbEJlaGF2aW9yRXJyb3IsIFVzZXJFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudFNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgdG9TbWFydFN0cmluZyB9IGZyb20gXCIuL3V0aWxzL3NtYXJ0U3RyaW5nLm1qc1wiO1xuLyoqXG4gKiBFeHBvc2VzIGEgY29tcHV0ZXIgdG8gdGhlIGFnZW50IGFzIGEgdG9vbCB0byBiZSBjYWxsZWRcbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyBBZGRpdGlvbmFsIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBjb21wdXRlciB0b29sIGxpa2Ugc3BlY2lmeWluZyB0aGUgbG9jYXRpb24gb2YgeW91ciBhZ2VudFxuICogQHJldHVybnMgYSBjb21wdXRlciB0b29sIGRlZmluaXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVyVG9vbChvcHRpb25zKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2NvbXB1dGVyJyxcbiAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lID8/ICdjb21wdXRlcl91c2VfcHJldmlldycsXG4gICAgICAgIGNvbXB1dGVyOiBvcHRpb25zLmNvbXB1dGVyLFxuICAgIH07XG59XG4vKipcbiAqIENyZWF0ZXMgYSBob3N0ZWQgTUNQIHRvb2wgZGVmaW5pdGlvbi5cbiAqXG4gKiBAcGFyYW0gc2VydmVyTGFiZWwgLSBUaGUgbGFiZWwgaWRlbnRpZnlpbmcgdGhlIE1DUCBzZXJ2ZXIuXG4gKiBAcGFyYW0gc2VydmVyVXJsIC0gVGhlIFVSTCBvZiB0aGUgTUNQIHNlcnZlci5cbiAqIEBwYXJhbSByZXF1aXJlQXBwcm92YWwgLSBXaGV0aGVyIHRvb2wgY2FsbHMgcmVxdWlyZSBhcHByb3ZhbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhvc3RlZE1jcFRvb2wob3B0aW9ucykge1xuICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHR5cGVvZiBvcHRpb25zLnJlcXVpcmVBcHByb3ZhbCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgb3B0aW9ucy5yZXF1aXJlQXBwcm92YWwgPT09ICduZXZlcidcbiAgICAgICAgPyB7XG4gICAgICAgICAgICB0eXBlOiAnbWNwJyxcbiAgICAgICAgICAgIHNlcnZlcl9sYWJlbDogb3B0aW9ucy5zZXJ2ZXJMYWJlbCxcbiAgICAgICAgICAgIHNlcnZlcl91cmw6IG9wdGlvbnMuc2VydmVyVXJsLFxuICAgICAgICAgICAgcmVxdWlyZV9hcHByb3ZhbDogJ25ldmVyJyxcbiAgICAgICAgICAgIGFsbG93ZWRfdG9vbHM6IHRvTWNwQWxsb3dlZFRvb2xzRmlsdGVyKG9wdGlvbnMuYWxsb3dlZFRvb2xzKSxcbiAgICAgICAgICAgIGhlYWRlcnM6IG9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgfVxuICAgICAgICA6IHtcbiAgICAgICAgICAgIHR5cGU6ICdtY3AnLFxuICAgICAgICAgICAgc2VydmVyX2xhYmVsOiBvcHRpb25zLnNlcnZlckxhYmVsLFxuICAgICAgICAgICAgc2VydmVyX3VybDogb3B0aW9ucy5zZXJ2ZXJVcmwsXG4gICAgICAgICAgICBhbGxvd2VkX3Rvb2xzOiB0b01jcEFsbG93ZWRUb29sc0ZpbHRlcihvcHRpb25zLmFsbG93ZWRUb29scyksXG4gICAgICAgICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICByZXF1aXJlX2FwcHJvdmFsOiB0eXBlb2Ygb3B0aW9ucy5yZXF1aXJlQXBwcm92YWwgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgPyAnYWx3YXlzJ1xuICAgICAgICAgICAgICAgIDogYnVpbGRSZXF1aXJlQXBwcm92YWwob3B0aW9ucy5yZXF1aXJlQXBwcm92YWwpLFxuICAgICAgICAgICAgb25fYXBwcm92YWw6IG9wdGlvbnMub25BcHByb3ZhbCxcbiAgICAgICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2wnLFxuICAgICAgICBuYW1lOiAnaG9zdGVkX21jcCcsXG4gICAgICAgIHByb3ZpZGVyRGF0YSxcbiAgICB9O1xufVxuLyoqXG4gKiBUaGUgZGVmYXVsdCBmdW5jdGlvbiB0byBpbnZva2Ugd2hlbiBhbiBlcnJvciBvY2N1cnMgd2hpbGUgcnVubmluZyB0aGUgdG9vbC5cbiAqXG4gKiBBbHdheXMgcmV0dXJucyBgQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcnVubmluZyB0aGUgdG9vbC4gUGxlYXNlIHRyeSBhZ2Fpbi4gRXJyb3I6IDxlcnJvciBkZXRhaWxzPmBcbiAqXG4gKiBAcGFyYW0gY29udGV4dCBBbiBpbnN0YW5jZSBvZiB0aGUgY3VycmVudCBSdW5Db250ZXh0XG4gKiBAcGFyYW0gZXJyb3IgVGhlIGVycm9yIHRoYXQgb2NjdXJyZWRcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdFRvb2xFcnJvckZ1bmN0aW9uKGNvbnRleHQsIGVycm9yKSB7XG4gICAgY29uc3QgZGV0YWlscyA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci50b1N0cmluZygpIDogU3RyaW5nKGVycm9yKTtcbiAgICByZXR1cm4gYEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJ1bm5pbmcgdGhlIHRvb2wuIFBsZWFzZSB0cnkgYWdhaW4uIEVycm9yOiAke2RldGFpbHN9YDtcbn1cbi8qKlxuICogRXhwb3NlcyBhIGZ1bmN0aW9uIHRvIHRoZSBhZ2VudCBhcyBhIHRvb2wgdG8gYmUgY2FsbGVkXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgVGhlIG9wdGlvbnMgZm9yIHRoZSB0b29sXG4gKiBAcmV0dXJucyBBIG5ldyB0b29sXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b29sKG9wdGlvbnMpIHtcbiAgICBjb25zdCBuYW1lID0gb3B0aW9ucy5uYW1lXG4gICAgICAgID8gdG9GdW5jdGlvblRvb2xOYW1lKG9wdGlvbnMubmFtZSlcbiAgICAgICAgOiB0b0Z1bmN0aW9uVG9vbE5hbWUob3B0aW9ucy5leGVjdXRlLm5hbWUpO1xuICAgIGNvbnN0IHRvb2xFcnJvckZ1bmN0aW9uID0gdHlwZW9mIG9wdGlvbnMuZXJyb3JGdW5jdGlvbiA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgPyBkZWZhdWx0VG9vbEVycm9yRnVuY3Rpb25cbiAgICAgICAgOiBvcHRpb25zLmVycm9yRnVuY3Rpb247XG4gICAgaWYgKCFuYW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVG9vbCBuYW1lIGNhbm5vdCBiZSBlbXB0eS4gRWl0aGVyIG5hbWUgeW91ciBmdW5jdGlvbiBvciBwcm92aWRlIGEgbmFtZSBpbiB0aGUgb3B0aW9ucy4nKTtcbiAgICB9XG4gICAgY29uc3Qgc3RyaWN0TW9kZSA9IG9wdGlvbnMuc3RyaWN0ID8/IHRydWU7XG4gICAgaWYgKCFzdHJpY3RNb2RlICYmIGlzWm9kT2JqZWN0KG9wdGlvbnMucGFyYW1ldGVycykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignU3RyaWN0IG1vZGUgaXMgcmVxdWlyZWQgZm9yIFpvZCBwYXJhbWV0ZXJzJyk7XG4gICAgfVxuICAgIGNvbnN0IHsgcGFyc2VyLCBzY2hlbWE6IHBhcmFtZXRlcnMgfSA9IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUob3B0aW9ucy5wYXJhbWV0ZXJzLCBuYW1lKTtcbiAgICBhc3luYyBmdW5jdGlvbiBfaW52b2tlKHJ1bkNvbnRleHQsIGlucHV0KSB7XG4gICAgICAgIGNvbnN0IFtlcnJvciwgcGFyc2VkXSA9IGF3YWl0IHNhZmVFeGVjdXRlKCgpID0+IHBhcnNlcihpbnB1dCkpO1xuICAgICAgICBpZiAoZXJyb3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChsb2dnZXIuZG9udExvZ1Rvb2xEYXRhKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBJbnZhbGlkIEpTT04gaW5wdXQgZm9yIHRvb2wgJHtuYW1lfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBJbnZhbGlkIEpTT04gaW5wdXQgZm9yIHRvb2wgJHtuYW1lfTogJHtpbnB1dH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ0ludmFsaWQgSlNPTiBpbnB1dCBmb3IgdG9vbCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsb2dnZXIuZG9udExvZ1Rvb2xEYXRhKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYEludm9raW5nIHRvb2wgJHtuYW1lfWApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBJbnZva2luZyB0b29sICR7bmFtZX0gd2l0aCBpbnB1dCAke2lucHV0fWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wdGlvbnMuZXhlY3V0ZShwYXJzZWQsIHJ1bkNvbnRleHQpO1xuICAgICAgICBjb25zdCBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKHJlc3VsdCk7XG4gICAgICAgIGlmIChsb2dnZXIuZG9udExvZ1Rvb2xEYXRhKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoYFRvb2wgJHtuYW1lfSBjb21wbGV0ZWRgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgVG9vbCAke25hbWV9IHJldHVybmVkOiAke3N0cmluZ1Jlc3VsdH1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhc3luYyBmdW5jdGlvbiBpbnZva2UocnVuQ29udGV4dCwgaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIF9pbnZva2UocnVuQ29udGV4dCwgaW5wdXQpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgaWYgKHRvb2xFcnJvckZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTcGFuPy5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBydW5uaW5nIHRvb2wgKG5vbi1mYXRhbCknLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sX25hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9vbEVycm9yRnVuY3Rpb24ocnVuQ29udGV4dCwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBuZWVkc0FwcHJvdmFsID0gdHlwZW9mIG9wdGlvbnMubmVlZHNBcHByb3ZhbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IG9wdGlvbnMubmVlZHNBcHByb3ZhbFxuICAgICAgICA6IGFzeW5jICgpID0+IHR5cGVvZiBvcHRpb25zLm5lZWRzQXBwcm92YWwgPT09ICdib29sZWFuJ1xuICAgICAgICAgICAgPyBvcHRpb25zLm5lZWRzQXBwcm92YWxcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZGVzY3JpcHRpb246IG9wdGlvbnMuZGVzY3JpcHRpb24sXG4gICAgICAgIHBhcmFtZXRlcnMsXG4gICAgICAgIHN0cmljdDogc3RyaWN0TW9kZSxcbiAgICAgICAgaW52b2tlLFxuICAgICAgICBuZWVkc0FwcHJvdmFsLFxuICAgIH07XG59XG5mdW5jdGlvbiBidWlsZFJlcXVpcmVBcHByb3ZhbChyZXF1aXJlQXBwcm92YWwpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBpZiAocmVxdWlyZUFwcHJvdmFsLmFsd2F5cykge1xuICAgICAgICByZXN1bHQuYWx3YXlzID0geyB0b29sX25hbWVzOiByZXF1aXJlQXBwcm92YWwuYWx3YXlzLnRvb2xOYW1lcyB9O1xuICAgIH1cbiAgICBpZiAocmVxdWlyZUFwcHJvdmFsLm5ldmVyKSB7XG4gICAgICAgIHJlc3VsdC5uZXZlciA9IHsgdG9vbF9uYW1lczogcmVxdWlyZUFwcHJvdmFsLm5ldmVyLnRvb2xOYW1lcyB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gdG9NY3BBbGxvd2VkVG9vbHNGaWx0ZXIoYWxsb3dlZFRvb2xzKSB7XG4gICAgaWYgKHR5cGVvZiBhbGxvd2VkVG9vbHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGFsbG93ZWRUb29scykpIHtcbiAgICAgICAgcmV0dXJuIHsgdG9vbF9uYW1lczogYWxsb3dlZFRvb2xzIH07XG4gICAgfVxuICAgIHJldHVybiB7IHRvb2xfbmFtZXM6IGFsbG93ZWRUb29scz8udG9vbE5hbWVzID8/IFtdIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b29sLm1qcy5tYXAiLCJleHBvcnQgdmFyIHV0aWw7XG4oZnVuY3Rpb24gKHV0aWwpIHtcbiAgICB1dGlsLmFzc2VydEVxdWFsID0gKF8pID0+IHsgfTtcbiAgICBmdW5jdGlvbiBhc3NlcnRJcyhfYXJnKSB7IH1cbiAgICB1dGlsLmFzc2VydElzID0gYXNzZXJ0SXM7XG4gICAgZnVuY3Rpb24gYXNzZXJ0TmV2ZXIoX3gpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuICAgIHV0aWwuYXNzZXJ0TmV2ZXIgPSBhc3NlcnROZXZlcjtcbiAgICB1dGlsLmFycmF5VG9FbnVtID0gKGl0ZW1zKSA9PiB7XG4gICAgICAgIGNvbnN0IG9iaiA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIG9ialtpdGVtXSA9IGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuICAgIHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzID0gKG9iaikgPT4ge1xuICAgICAgICBjb25zdCB2YWxpZEtleXMgPSB1dGlsLm9iamVjdEtleXMob2JqKS5maWx0ZXIoKGspID0+IHR5cGVvZiBvYmpbb2JqW2tdXSAhPT0gXCJudW1iZXJcIik7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkID0ge307XG4gICAgICAgIGZvciAoY29uc3QgayBvZiB2YWxpZEtleXMpIHtcbiAgICAgICAgICAgIGZpbHRlcmVkW2tdID0gb2JqW2tdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdFZhbHVlcyhmaWx0ZXJlZCk7XG4gICAgfTtcbiAgICB1dGlsLm9iamVjdFZhbHVlcyA9IChvYmopID0+IHtcbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0S2V5cyhvYmopLm1hcChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIG9ialtlXTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB1dGlsLm9iamVjdEtleXMgPSB0eXBlb2YgT2JqZWN0LmtleXMgPT09IFwiZnVuY3Rpb25cIiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgPyAob2JqKSA9PiBPYmplY3Qua2V5cyhvYmopIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFuL2JhblxuICAgICAgICA6IChvYmplY3QpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGtleXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgICB9O1xuICAgIHV0aWwuZmluZCA9IChhcnIsIGNoZWNrZXIpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFycikge1xuICAgICAgICAgICAgaWYgKGNoZWNrZXIoaXRlbSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIHV0aWwuaXNJbnRlZ2VyID0gdHlwZW9mIE51bWJlci5pc0ludGVnZXIgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICA/ICh2YWwpID0+IE51bWJlci5pc0ludGVnZXIodmFsKSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhbi9iYW5cbiAgICAgICAgOiAodmFsKSA9PiB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICYmIE51bWJlci5pc0Zpbml0ZSh2YWwpICYmIE1hdGguZmxvb3IodmFsKSA9PT0gdmFsO1xuICAgIGZ1bmN0aW9uIGpvaW5WYWx1ZXMoYXJyYXksIHNlcGFyYXRvciA9IFwiIHwgXCIpIHtcbiAgICAgICAgcmV0dXJuIGFycmF5Lm1hcCgodmFsKSA9PiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIiA/IGAnJHt2YWx9J2AgOiB2YWwpKS5qb2luKHNlcGFyYXRvcik7XG4gICAgfVxuICAgIHV0aWwuam9pblZhbHVlcyA9IGpvaW5WYWx1ZXM7XG4gICAgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIgPSAoXywgdmFsdWUpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJiaWdpbnRcIikge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG59KSh1dGlsIHx8ICh1dGlsID0ge30pKTtcbmV4cG9ydCB2YXIgb2JqZWN0VXRpbDtcbihmdW5jdGlvbiAob2JqZWN0VXRpbCkge1xuICAgIG9iamVjdFV0aWwubWVyZ2VTaGFwZXMgPSAoZmlyc3QsIHNlY29uZCkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uZmlyc3QsXG4gICAgICAgICAgICAuLi5zZWNvbmQsIC8vIHNlY29uZCBvdmVyd3JpdGVzIGZpcnN0XG4gICAgICAgIH07XG4gICAgfTtcbn0pKG9iamVjdFV0aWwgfHwgKG9iamVjdFV0aWwgPSB7fSkpO1xuZXhwb3J0IGNvbnN0IFpvZFBhcnNlZFR5cGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgICBcInN0cmluZ1wiLFxuICAgIFwibmFuXCIsXG4gICAgXCJudW1iZXJcIixcbiAgICBcImludGVnZXJcIixcbiAgICBcImZsb2F0XCIsXG4gICAgXCJib29sZWFuXCIsXG4gICAgXCJkYXRlXCIsXG4gICAgXCJiaWdpbnRcIixcbiAgICBcInN5bWJvbFwiLFxuICAgIFwiZnVuY3Rpb25cIixcbiAgICBcInVuZGVmaW5lZFwiLFxuICAgIFwibnVsbFwiLFxuICAgIFwiYXJyYXlcIixcbiAgICBcIm9iamVjdFwiLFxuICAgIFwidW5rbm93blwiLFxuICAgIFwicHJvbWlzZVwiLFxuICAgIFwidm9pZFwiLFxuICAgIFwibmV2ZXJcIixcbiAgICBcIm1hcFwiLFxuICAgIFwic2V0XCIsXG5dKTtcbmV4cG9ydCBjb25zdCBnZXRQYXJzZWRUeXBlID0gKGRhdGEpID0+IHtcbiAgICBjb25zdCB0ID0gdHlwZW9mIGRhdGE7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICAgIGNhc2UgXCJ1bmRlZmluZWRcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZDtcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc3RyaW5nO1xuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyLmlzTmFOKGRhdGEpID8gWm9kUGFyc2VkVHlwZS5uYW4gOiBab2RQYXJzZWRUeXBlLm51bWJlcjtcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmJvb2xlYW47XG4gICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZnVuY3Rpb247XG4gICAgICAgIGNhc2UgXCJiaWdpbnRcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmJpZ2ludDtcbiAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc3ltYm9sO1xuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5udWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEudGhlbiAmJiB0eXBlb2YgZGF0YS50aGVuID09PSBcImZ1bmN0aW9uXCIgJiYgZGF0YS5jYXRjaCAmJiB0eXBlb2YgZGF0YS5jYXRjaCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUucHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgTWFwICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5tYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIFNldCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgU2V0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBEYXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGRhdGEgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUuZGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLm9iamVjdDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnVua25vd247XG4gICAgfVxufTtcbiIsImltcG9ydCB7IHV0aWwgfSBmcm9tIFwiLi9oZWxwZXJzL3V0aWwuanNcIjtcbmV4cG9ydCBjb25zdCBab2RJc3N1ZUNvZGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgICBcImludmFsaWRfdHlwZVwiLFxuICAgIFwiaW52YWxpZF9saXRlcmFsXCIsXG4gICAgXCJjdXN0b21cIixcbiAgICBcImludmFsaWRfdW5pb25cIixcbiAgICBcImludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvclwiLFxuICAgIFwiaW52YWxpZF9lbnVtX3ZhbHVlXCIsXG4gICAgXCJ1bnJlY29nbml6ZWRfa2V5c1wiLFxuICAgIFwiaW52YWxpZF9hcmd1bWVudHNcIixcbiAgICBcImludmFsaWRfcmV0dXJuX3R5cGVcIixcbiAgICBcImludmFsaWRfZGF0ZVwiLFxuICAgIFwiaW52YWxpZF9zdHJpbmdcIixcbiAgICBcInRvb19zbWFsbFwiLFxuICAgIFwidG9vX2JpZ1wiLFxuICAgIFwiaW52YWxpZF9pbnRlcnNlY3Rpb25fdHlwZXNcIixcbiAgICBcIm5vdF9tdWx0aXBsZV9vZlwiLFxuICAgIFwibm90X2Zpbml0ZVwiLFxuXSk7XG5leHBvcnQgY29uc3QgcXVvdGVsZXNzSnNvbiA9IChvYmopID0+IHtcbiAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkob2JqLCBudWxsLCAyKTtcbiAgICByZXR1cm4ganNvbi5yZXBsYWNlKC9cIihbXlwiXSspXCI6L2csIFwiJDE6XCIpO1xufTtcbmV4cG9ydCBjbGFzcyBab2RFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBnZXQgZXJyb3JzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc3N1ZXM7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGlzc3Vlcykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmlzc3VlcyA9IFtdO1xuICAgICAgICB0aGlzLmFkZElzc3VlID0gKHN1YikgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc3N1ZXMgPSBbLi4udGhpcy5pc3N1ZXMsIHN1Yl07XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYWRkSXNzdWVzID0gKHN1YnMgPSBbXSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc3N1ZXMgPSBbLi4udGhpcy5pc3N1ZXMsIC4uLnN1YnNdO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBhY3R1YWxQcm90byA9IG5ldy50YXJnZXQucHJvdG90eXBlO1xuICAgICAgICBpZiAoT2JqZWN0LnNldFByb3RvdHlwZU9mKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgYmFuL2JhblxuICAgICAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIGFjdHVhbFByb3RvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX19wcm90b19fID0gYWN0dWFsUHJvdG87XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uYW1lID0gXCJab2RFcnJvclwiO1xuICAgICAgICB0aGlzLmlzc3VlcyA9IGlzc3VlcztcbiAgICB9XG4gICAgZm9ybWF0KF9tYXBwZXIpIHtcbiAgICAgICAgY29uc3QgbWFwcGVyID0gX21hcHBlciB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGlzc3VlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzc3VlLm1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgY29uc3QgcHJvY2Vzc0Vycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlzc3VlIG9mIGVycm9yLmlzc3Vlcykge1xuICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfdW5pb25cIikge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZS51bmlvbkVycm9ycy5tYXAocHJvY2Vzc0Vycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3JldHVybl90eXBlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0Vycm9yKGlzc3VlLnJldHVyblR5cGVFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9hcmd1bWVudHNcIikge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRXJyb3IoaXNzdWUuYXJndW1lbnRzRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5wYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZEVycm9ycy5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyciA9IGZpZWxkRXJyb3JzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgaXNzdWUucGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gaXNzdWUucGF0aFtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm1pbmFsID0gaSA9PT0gaXNzdWUucGF0aC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXJtaW5hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmICh0eXBlb2YgZWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0gZWxzZSBpZiAodHlwZW9mIGVsID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjb25zdCBlcnJvckFycmF5OiBhbnkgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGVycm9yQXJyYXkuX2Vycm9ycyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCBlcnJvckFycmF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdLl9lcnJvcnMucHVzaChtYXBwZXIoaXNzdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnIgPSBjdXJyW2VsXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcHJvY2Vzc0Vycm9yKHRoaXMpO1xuICAgICAgICByZXR1cm4gZmllbGRFcnJvcnM7XG4gICAgfVxuICAgIHN0YXRpYyBhc3NlcnQodmFsdWUpIHtcbiAgICAgICAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiBab2RFcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm90IGEgWm9kRXJyb3I6ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2U7XG4gICAgfVxuICAgIGdldCBtZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5pc3N1ZXMsIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyLCAyKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzc3Vlcy5sZW5ndGggPT09IDA7XG4gICAgfVxuICAgIGZsYXR0ZW4obWFwcGVyID0gKGlzc3VlKSA9PiBpc3N1ZS5tZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkRXJyb3JzID0ge307XG4gICAgICAgIGNvbnN0IGZvcm1FcnJvcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgdGhpcy5pc3N1ZXMpIHtcbiAgICAgICAgICAgIGlmIChzdWIucGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZmllbGRFcnJvcnNbc3ViLnBhdGhbMF1dID0gZmllbGRFcnJvcnNbc3ViLnBhdGhbMF1dIHx8IFtdO1xuICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXS5wdXNoKG1hcHBlcihzdWIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvcm1FcnJvcnMucHVzaChtYXBwZXIoc3ViKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZm9ybUVycm9ycywgZmllbGRFcnJvcnMgfTtcbiAgICB9XG4gICAgZ2V0IGZvcm1FcnJvcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZsYXR0ZW4oKTtcbiAgICB9XG59XG5ab2RFcnJvci5jcmVhdGUgPSAoaXNzdWVzKSA9PiB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoaXNzdWVzKTtcbiAgICByZXR1cm4gZXJyb3I7XG59O1xuIiwiaW1wb3J0IHsgWm9kSXNzdWVDb2RlIH0gZnJvbSBcIi4uL1pvZEVycm9yLmpzXCI7XG5pbXBvcnQgeyB1dGlsLCBab2RQYXJzZWRUeXBlIH0gZnJvbSBcIi4uL2hlbHBlcnMvdXRpbC5qc1wiO1xuY29uc3QgZXJyb3JNYXAgPSAoaXNzdWUsIF9jdHgpID0+IHtcbiAgICBsZXQgbWVzc2FnZTtcbiAgICBzd2l0Y2ggKGlzc3VlLmNvZGUpIHtcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlOlxuICAgICAgICAgICAgaWYgKGlzc3VlLnJlY2VpdmVkID09PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIlJlcXVpcmVkXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEV4cGVjdGVkICR7aXNzdWUuZXhwZWN0ZWR9LCByZWNlaXZlZCAke2lzc3VlLnJlY2VpdmVkfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9saXRlcmFsOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGxpdGVyYWwgdmFsdWUsIGV4cGVjdGVkICR7SlNPTi5zdHJpbmdpZnkoaXNzdWUuZXhwZWN0ZWQsIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyKX1gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLnVucmVjb2duaXplZF9rZXlzOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBVbnJlY29nbml6ZWQga2V5KHMpIGluIG9iamVjdDogJHt1dGlsLmpvaW5WYWx1ZXMoaXNzdWUua2V5cywgXCIsIFwiKX1gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb246XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXRgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb25fZGlzY3JpbWluYXRvcjpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBkaXNjcmltaW5hdG9yIHZhbHVlLiBFeHBlY3RlZCAke3V0aWwuam9pblZhbHVlcyhpc3N1ZS5vcHRpb25zKX1gO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBlbnVtIHZhbHVlLiBFeHBlY3RlZCAke3V0aWwuam9pblZhbHVlcyhpc3N1ZS5vcHRpb25zKX0sIHJlY2VpdmVkICcke2lzc3VlLnJlY2VpdmVkfSdgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfYXJndW1lbnRzOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGZ1bmN0aW9uIGFyZ3VtZW50c2A7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBmdW5jdGlvbiByZXR1cm4gdHlwZWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9kYXRlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGRhdGVgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nOlxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpc3N1ZS52YWxpZGF0aW9uID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiaW5jbHVkZXNcIiBpbiBpc3N1ZS52YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dDogbXVzdCBpbmNsdWRlIFwiJHtpc3N1ZS52YWxpZGF0aW9uLmluY2x1ZGVzfVwiYDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpc3N1ZS52YWxpZGF0aW9uLnBvc2l0aW9uID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gYCR7bWVzc2FnZX0gYXQgb25lIG9yIG1vcmUgcG9zaXRpb25zIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAke2lzc3VlLnZhbGlkYXRpb24ucG9zaXRpb259YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChcInN0YXJ0c1dpdGhcIiBpbiBpc3N1ZS52YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dDogbXVzdCBzdGFydCB3aXRoIFwiJHtpc3N1ZS52YWxpZGF0aW9uLnN0YXJ0c1dpdGh9XCJgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChcImVuZHNXaXRoXCIgaW4gaXNzdWUudmFsaWRhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXQ6IG11c3QgZW5kIHdpdGggXCIke2lzc3VlLnZhbGlkYXRpb24uZW5kc1dpdGh9XCJgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihpc3N1ZS52YWxpZGF0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS52YWxpZGF0aW9uICE9PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgJHtpc3N1ZS52YWxpZGF0aW9ufWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gXCJJbnZhbGlkXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUudG9vX3NtYWxsOlxuICAgICAgICAgICAgaWYgKGlzc3VlLnR5cGUgPT09IFwiYXJyYXlcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYEFycmF5IG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gXCJleGFjdGx5XCIgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgYXQgbGVhc3RgIDogYG1vcmUgdGhhbmB9ICR7aXNzdWUubWluaW11bX0gZWxlbWVudChzKWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgU3RyaW5nIG11c3QgY29udGFpbiAke2lzc3VlLmV4YWN0ID8gXCJleGFjdGx5XCIgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgYXQgbGVhc3RgIDogYG92ZXJgfSAke2lzc3VlLm1pbmltdW19IGNoYXJhY3RlcihzKWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcIm51bWJlclwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgTnVtYmVyIG11c3QgYmUgJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5IGVxdWFsIHRvIGAgOiBpc3N1ZS5pbmNsdXNpdmUgPyBgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGAgOiBgZ3JlYXRlciB0aGFuIGB9JHtpc3N1ZS5taW5pbXVtfWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcImRhdGVcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYERhdGUgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHkgZXF1YWwgdG8gYCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYCA6IGBncmVhdGVyIHRoYW4gYH0ke25ldyBEYXRlKE51bWJlcihpc3N1ZS5taW5pbXVtKSl9YDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gXCJJbnZhbGlkIGlucHV0XCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUudG9vX2JpZzpcbiAgICAgICAgICAgIGlmIChpc3N1ZS50eXBlID09PSBcImFycmF5XCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBBcnJheSBtdXN0IGNvbnRhaW4gJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5YCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBtb3N0YCA6IGBsZXNzIHRoYW5gfSAke2lzc3VlLm1heGltdW19IGVsZW1lbnQocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYFN0cmluZyBtdXN0IGNvbnRhaW4gJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5YCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBtb3N0YCA6IGB1bmRlcmB9ICR7aXNzdWUubWF4aW11bX0gY2hhcmFjdGVyKHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSAke2lzc3VlLmV4YWN0ID8gYGV4YWN0bHlgIDogaXNzdWUuaW5jbHVzaXZlID8gYGxlc3MgdGhhbiBvciBlcXVhbCB0b2AgOiBgbGVzcyB0aGFuYH0gJHtpc3N1ZS5tYXhpbXVtfWA7XG4gICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS50eXBlID09PSBcImJpZ2ludFwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgQmlnSW50IG11c3QgYmUgJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5YCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBsZXNzIHRoYW4gb3IgZXF1YWwgdG9gIDogYGxlc3MgdGhhbmB9ICR7aXNzdWUubWF4aW11bX1gO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJkYXRlXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBEYXRlIG11c3QgYmUgJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5YCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBzbWFsbGVyIHRoYW4gb3IgZXF1YWwgdG9gIDogYHNtYWxsZXIgdGhhbmB9ICR7bmV3IERhdGUoTnVtYmVyKGlzc3VlLm1heGltdW0pKX1gO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIkludmFsaWQgaW5wdXRcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5jdXN0b206XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXRgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnRlcnNlY3Rpb24gcmVzdWx0cyBjb3VsZCBub3QgYmUgbWVyZ2VkYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2Y6XG4gICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgJHtpc3N1ZS5tdWx0aXBsZU9mfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUubm90X2Zpbml0ZTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBcIk51bWJlciBtdXN0IGJlIGZpbml0ZVwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBtZXNzYWdlID0gX2N0eC5kZWZhdWx0RXJyb3I7XG4gICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGlzc3VlKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgbWVzc2FnZSB9O1xufTtcbmV4cG9ydCBkZWZhdWx0IGVycm9yTWFwO1xuIiwiaW1wb3J0IGRlZmF1bHRFcnJvck1hcCBmcm9tIFwiLi9sb2NhbGVzL2VuLmpzXCI7XG5sZXQgb3ZlcnJpZGVFcnJvck1hcCA9IGRlZmF1bHRFcnJvck1hcDtcbmV4cG9ydCB7IGRlZmF1bHRFcnJvck1hcCB9O1xuZXhwb3J0IGZ1bmN0aW9uIHNldEVycm9yTWFwKG1hcCkge1xuICAgIG92ZXJyaWRlRXJyb3JNYXAgPSBtYXA7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RXJyb3JNYXAoKSB7XG4gICAgcmV0dXJuIG92ZXJyaWRlRXJyb3JNYXA7XG59XG4iLCJpbXBvcnQgeyBnZXRFcnJvck1hcCB9IGZyb20gXCIuLi9lcnJvcnMuanNcIjtcbmltcG9ydCBkZWZhdWx0RXJyb3JNYXAgZnJvbSBcIi4uL2xvY2FsZXMvZW4uanNcIjtcbmV4cG9ydCBjb25zdCBtYWtlSXNzdWUgPSAocGFyYW1zKSA9PiB7XG4gICAgY29uc3QgeyBkYXRhLCBwYXRoLCBlcnJvck1hcHMsIGlzc3VlRGF0YSB9ID0gcGFyYW1zO1xuICAgIGNvbnN0IGZ1bGxQYXRoID0gWy4uLnBhdGgsIC4uLihpc3N1ZURhdGEucGF0aCB8fCBbXSldO1xuICAgIGNvbnN0IGZ1bGxJc3N1ZSA9IHtcbiAgICAgICAgLi4uaXNzdWVEYXRhLFxuICAgICAgICBwYXRoOiBmdWxsUGF0aCxcbiAgICB9O1xuICAgIGlmIChpc3N1ZURhdGEubWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5pc3N1ZURhdGEsXG4gICAgICAgICAgICBwYXRoOiBmdWxsUGF0aCxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGlzc3VlRGF0YS5tZXNzYWdlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBsZXQgZXJyb3JNZXNzYWdlID0gXCJcIjtcbiAgICBjb25zdCBtYXBzID0gZXJyb3JNYXBzXG4gICAgICAgIC5maWx0ZXIoKG0pID0+ICEhbSlcbiAgICAgICAgLnNsaWNlKClcbiAgICAgICAgLnJldmVyc2UoKTtcbiAgICBmb3IgKGNvbnN0IG1hcCBvZiBtYXBzKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9IG1hcChmdWxsSXNzdWUsIHsgZGF0YSwgZGVmYXVsdEVycm9yOiBlcnJvck1lc3NhZ2UgfSkubWVzc2FnZTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uaXNzdWVEYXRhLFxuICAgICAgICBwYXRoOiBmdWxsUGF0aCxcbiAgICAgICAgbWVzc2FnZTogZXJyb3JNZXNzYWdlLFxuICAgIH07XG59O1xuZXhwb3J0IGNvbnN0IEVNUFRZX1BBVEggPSBbXTtcbmV4cG9ydCBmdW5jdGlvbiBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIGlzc3VlRGF0YSkge1xuICAgIGNvbnN0IG92ZXJyaWRlTWFwID0gZ2V0RXJyb3JNYXAoKTtcbiAgICBjb25zdCBpc3N1ZSA9IG1ha2VJc3N1ZSh7XG4gICAgICAgIGlzc3VlRGF0YTogaXNzdWVEYXRhLFxuICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgIGVycm9yTWFwczogW1xuICAgICAgICAgICAgY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAsIC8vIGNvbnRleHR1YWwgZXJyb3IgbWFwIGlzIGZpcnN0IHByaW9yaXR5XG4gICAgICAgICAgICBjdHguc2NoZW1hRXJyb3JNYXAsIC8vIHRoZW4gc2NoZW1hLWJvdW5kIG1hcCBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgIG92ZXJyaWRlTWFwLCAvLyB0aGVuIGdsb2JhbCBvdmVycmlkZSBtYXBcbiAgICAgICAgICAgIG92ZXJyaWRlTWFwID09PSBkZWZhdWx0RXJyb3JNYXAgPyB1bmRlZmluZWQgOiBkZWZhdWx0RXJyb3JNYXAsIC8vIHRoZW4gZ2xvYmFsIGRlZmF1bHQgbWFwXG4gICAgICAgIF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgIH0pO1xuICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goaXNzdWUpO1xufVxuZXhwb3J0IGNsYXNzIFBhcnNlU3RhdHVzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IFwidmFsaWRcIjtcbiAgICB9XG4gICAgZGlydHkoKSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlID09PSBcInZhbGlkXCIpXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gXCJkaXJ0eVwiO1xuICAgIH1cbiAgICBhYm9ydCgpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgIT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFwiYWJvcnRlZFwiO1xuICAgIH1cbiAgICBzdGF0aWMgbWVyZ2VBcnJheShzdGF0dXMsIHJlc3VsdHMpIHtcbiAgICAgICAgY29uc3QgYXJyYXlWYWx1ZSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgaWYgKHMuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIGlmIChzLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgYXJyYXlWYWx1ZS5wdXNoKHMudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogYXJyYXlWYWx1ZSB9O1xuICAgIH1cbiAgICBzdGF0aWMgYXN5bmMgbWVyZ2VPYmplY3RBc3luYyhzdGF0dXMsIHBhaXJzKSB7XG4gICAgICAgIGNvbnN0IHN5bmNQYWlycyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBwYWlyLnZhbHVlO1xuICAgICAgICAgICAgc3luY1BhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBzeW5jUGFpcnMpO1xuICAgIH1cbiAgICBzdGF0aWMgbWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgcGFpcnMpIHtcbiAgICAgICAgY29uc3QgZmluYWxPYmplY3QgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICBjb25zdCB7IGtleSwgdmFsdWUgfSA9IHBhaXI7XG4gICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICBpZiAodmFsdWUuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICBpZiAodmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICBpZiAoa2V5LnZhbHVlICE9PSBcIl9fcHJvdG9fX1wiICYmICh0eXBlb2YgdmFsdWUudmFsdWUgIT09IFwidW5kZWZpbmVkXCIgfHwgcGFpci5hbHdheXNTZXQpKSB7XG4gICAgICAgICAgICAgICAgZmluYWxPYmplY3Rba2V5LnZhbHVlXSA9IHZhbHVlLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxPYmplY3QgfTtcbiAgICB9XG59XG5leHBvcnQgY29uc3QgSU5WQUxJRCA9IE9iamVjdC5mcmVlemUoe1xuICAgIHN0YXR1czogXCJhYm9ydGVkXCIsXG59KTtcbmV4cG9ydCBjb25zdCBESVJUWSA9ICh2YWx1ZSkgPT4gKHsgc3RhdHVzOiBcImRpcnR5XCIsIHZhbHVlIH0pO1xuZXhwb3J0IGNvbnN0IE9LID0gKHZhbHVlKSA9PiAoeyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWUgfSk7XG5leHBvcnQgY29uc3QgaXNBYm9ydGVkID0gKHgpID0+IHguc3RhdHVzID09PSBcImFib3J0ZWRcIjtcbmV4cG9ydCBjb25zdCBpc0RpcnR5ID0gKHgpID0+IHguc3RhdHVzID09PSBcImRpcnR5XCI7XG5leHBvcnQgY29uc3QgaXNWYWxpZCA9ICh4KSA9PiB4LnN0YXR1cyA9PT0gXCJ2YWxpZFwiO1xuZXhwb3J0IGNvbnN0IGlzQXN5bmMgPSAoeCkgPT4gdHlwZW9mIFByb21pc2UgIT09IFwidW5kZWZpbmVkXCIgJiYgeCBpbnN0YW5jZW9mIFByb21pc2U7XG4iLCJleHBvcnQgdmFyIGVycm9yVXRpbDtcbihmdW5jdGlvbiAoZXJyb3JVdGlsKSB7XG4gICAgZXJyb3JVdGlsLmVyclRvT2JqID0gKG1lc3NhZ2UpID0+IHR5cGVvZiBtZXNzYWdlID09PSBcInN0cmluZ1wiID8geyBtZXNzYWdlIH0gOiBtZXNzYWdlIHx8IHt9O1xuICAgIC8vIGJpb21lLWlnbm9yZSBsaW50OlxuICAgIGVycm9yVXRpbC50b1N0cmluZyA9IChtZXNzYWdlKSA9PiB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IG1lc3NhZ2UgOiBtZXNzYWdlPy5tZXNzYWdlO1xufSkoZXJyb3JVdGlsIHx8IChlcnJvclV0aWwgPSB7fSkpO1xuIiwiaW1wb3J0IHsgWm9kRXJyb3IsIFpvZElzc3VlQ29kZSwgfSBmcm9tIFwiLi9ab2RFcnJvci5qc1wiO1xuaW1wb3J0IHsgZGVmYXVsdEVycm9yTWFwLCBnZXRFcnJvck1hcCB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuaW1wb3J0IHsgZXJyb3JVdGlsIH0gZnJvbSBcIi4vaGVscGVycy9lcnJvclV0aWwuanNcIjtcbmltcG9ydCB7IERJUlRZLCBJTlZBTElELCBPSywgUGFyc2VTdGF0dXMsIGFkZElzc3VlVG9Db250ZXh0LCBpc0Fib3J0ZWQsIGlzQXN5bmMsIGlzRGlydHksIGlzVmFsaWQsIG1ha2VJc3N1ZSwgfSBmcm9tIFwiLi9oZWxwZXJzL3BhcnNlVXRpbC5qc1wiO1xuaW1wb3J0IHsgdXRpbCwgWm9kUGFyc2VkVHlwZSwgZ2V0UGFyc2VkVHlwZSB9IGZyb20gXCIuL2hlbHBlcnMvdXRpbC5qc1wiO1xuY2xhc3MgUGFyc2VJbnB1dExhenlQYXRoIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIHZhbHVlLCBwYXRoLCBrZXkpIHtcbiAgICAgICAgdGhpcy5fY2FjaGVkUGF0aCA9IFtdO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgICAgdGhpcy5kYXRhID0gdmFsdWU7XG4gICAgICAgIHRoaXMuX3BhdGggPSBwYXRoO1xuICAgICAgICB0aGlzLl9rZXkgPSBrZXk7XG4gICAgfVxuICAgIGdldCBwYXRoKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2NhY2hlZFBhdGgubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLl9rZXkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVkUGF0aC5wdXNoKC4uLnRoaXMuX3BhdGgsIC4uLnRoaXMuX2tleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZWRQYXRoLnB1c2goLi4udGhpcy5fcGF0aCwgdGhpcy5fa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkUGF0aDtcbiAgICB9XG59XG5jb25zdCBoYW5kbGVSZXN1bHQgPSAoY3R4LCByZXN1bHQpID0+IHtcbiAgICBpZiAoaXNWYWxpZChyZXN1bHQpKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlc3VsdC52YWx1ZSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKCFjdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZhbGlkYXRpb24gZmFpbGVkIGJ1dCBubyBpc3N1ZXMgZGV0ZWN0ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fZXJyb3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9lcnJvcjtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBab2RFcnJvcihjdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZXJyb3I7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbn07XG5mdW5jdGlvbiBwcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcykge1xuICAgIGlmICghcGFyYW1zKVxuICAgICAgICByZXR1cm4ge307XG4gICAgY29uc3QgeyBlcnJvck1hcCwgaW52YWxpZF90eXBlX2Vycm9yLCByZXF1aXJlZF9lcnJvciwgZGVzY3JpcHRpb24gfSA9IHBhcmFtcztcbiAgICBpZiAoZXJyb3JNYXAgJiYgKGludmFsaWRfdHlwZV9lcnJvciB8fCByZXF1aXJlZF9lcnJvcikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4ndCB1c2UgXCJpbnZhbGlkX3R5cGVfZXJyb3JcIiBvciBcInJlcXVpcmVkX2Vycm9yXCIgaW4gY29uanVuY3Rpb24gd2l0aCBjdXN0b20gZXJyb3IgbWFwLmApO1xuICAgIH1cbiAgICBpZiAoZXJyb3JNYXApXG4gICAgICAgIHJldHVybiB7IGVycm9yTWFwOiBlcnJvck1hcCwgZGVzY3JpcHRpb24gfTtcbiAgICBjb25zdCBjdXN0b21NYXAgPSAoaXNzLCBjdHgpID0+IHtcbiAgICAgICAgY29uc3QgeyBtZXNzYWdlIH0gPSBwYXJhbXM7XG4gICAgICAgIGlmIChpc3MuY29kZSA9PT0gXCJpbnZhbGlkX2VudW1fdmFsdWVcIikge1xuICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogbWVzc2FnZSA/PyBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBjdHguZGF0YSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogbWVzc2FnZSA/PyByZXF1aXJlZF9lcnJvciA/PyBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzcy5jb2RlICE9PSBcImludmFsaWRfdHlwZVwiKVxuICAgICAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBtZXNzYWdlID8/IGludmFsaWRfdHlwZV9lcnJvciA/PyBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgfTtcbiAgICByZXR1cm4geyBlcnJvck1hcDogY3VzdG9tTWFwLCBkZXNjcmlwdGlvbiB9O1xufVxuZXhwb3J0IGNsYXNzIFpvZFR5cGUge1xuICAgIGdldCBkZXNjcmlwdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5kZXNjcmlwdGlvbjtcbiAgICB9XG4gICAgX2dldFR5cGUoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSk7XG4gICAgfVxuICAgIF9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KSB7XG4gICAgICAgIHJldHVybiAoY3R4IHx8IHtcbiAgICAgICAgICAgIGNvbW1vbjogaW5wdXQucGFyZW50LmNvbW1vbixcbiAgICAgICAgICAgIGRhdGE6IGlucHV0LmRhdGEsXG4gICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGlucHV0LmRhdGEpLFxuICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgIHBhdGg6IGlucHV0LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGlucHV0LnBhcmVudCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXR1czogbmV3IFBhcnNlU3RhdHVzKCksXG4gICAgICAgICAgICBjdHg6IHtcbiAgICAgICAgICAgICAgICBjb21tb246IGlucHV0LnBhcmVudC5jb21tb24sXG4gICAgICAgICAgICAgICAgZGF0YTogaW5wdXQuZGF0YSxcbiAgICAgICAgICAgICAgICBwYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlKGlucHV0LmRhdGEpLFxuICAgICAgICAgICAgICAgIHNjaGVtYUVycm9yTWFwOiB0aGlzLl9kZWYuZXJyb3JNYXAsXG4gICAgICAgICAgICAgICAgcGF0aDogaW5wdXQucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGlucHV0LnBhcmVudCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIF9wYXJzZVN5bmMoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2UoaW5wdXQpO1xuICAgICAgICBpZiAoaXNBc3luYyhyZXN1bHQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTeW5jaHJvbm91cyBwYXJzZSBlbmNvdW50ZXJlZCBwcm9taXNlLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBfcGFyc2VBc3luYyhpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICB9XG4gICAgcGFyc2UoZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuc2FmZVBhcnNlKGRhdGEsIHBhcmFtcyk7XG4gICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcylcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTtcbiAgICAgICAgdGhyb3cgcmVzdWx0LmVycm9yO1xuICAgIH1cbiAgICBzYWZlUGFyc2UoZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHtcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgYXN5bmM6IHBhcmFtcz8uYXN5bmMgPz8gZmFsc2UsXG4gICAgICAgICAgICAgICAgY29udGV4dHVhbEVycm9yTWFwOiBwYXJhbXM/LmVycm9yTWFwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdGg6IHBhcmFtcz8ucGF0aCB8fCBbXSxcbiAgICAgICAgICAgIHNjaGVtYUVycm9yTWFwOiB0aGlzLl9kZWYuZXJyb3JNYXAsXG4gICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShkYXRhKSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fcGFyc2VTeW5jKHsgZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgICAgICByZXR1cm4gaGFuZGxlUmVzdWx0KGN0eCwgcmVzdWx0KTtcbiAgICB9XG4gICAgXCJ+dmFsaWRhdGVcIihkYXRhKSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHtcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgYXN5bmM6ICEhdGhpc1tcIn5zdGFuZGFyZFwiXS5hc3luYyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwYXRoOiBbXSxcbiAgICAgICAgICAgIHNjaGVtYUVycm9yTWFwOiB0aGlzLl9kZWYuZXJyb3JNYXAsXG4gICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShkYXRhKSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCF0aGlzW1wifnN0YW5kYXJkXCJdLmFzeW5jKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlU3luYyh7IGRhdGEsIHBhdGg6IFtdLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNWYWxpZChyZXN1bHQpXG4gICAgICAgICAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlczogY3R4LmNvbW1vbi5pc3N1ZXMsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycj8ubWVzc2FnZT8udG9Mb3dlckNhc2UoKT8uaW5jbHVkZXMoXCJlbmNvdW50ZXJlZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzW1wifnN0YW5kYXJkXCJdLmFzeW5jID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY3R4LmNvbW1vbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fcGFyc2VBc3luYyh7IGRhdGEsIHBhdGg6IFtdLCBwYXJlbnQ6IGN0eCB9KS50aGVuKChyZXN1bHQpID0+IGlzVmFsaWQocmVzdWx0KVxuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC52YWx1ZSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgIGlzc3VlczogY3R4LmNvbW1vbi5pc3N1ZXMsXG4gICAgICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgcGFyc2VBc3luYyhkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5zYWZlUGFyc2VBc3luYyhkYXRhLCBwYXJhbXMpO1xuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LmRhdGE7XG4gICAgICAgIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgICB9XG4gICAgYXN5bmMgc2FmZVBhcnNlQXN5bmMoZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHtcbiAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgY29udGV4dHVhbEVycm9yTWFwOiBwYXJhbXM/LmVycm9yTWFwLFxuICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdGg6IHBhcmFtcz8ucGF0aCB8fCBbXSxcbiAgICAgICAgICAgIHNjaGVtYUVycm9yTWFwOiB0aGlzLl9kZWYuZXJyb3JNYXAsXG4gICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGFyc2VkVHlwZTogZ2V0UGFyc2VkVHlwZShkYXRhKSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgbWF5YmVBc3luY1Jlc3VsdCA9IHRoaXMuX3BhcnNlKHsgZGF0YSwgcGF0aDogY3R4LnBhdGgsIHBhcmVudDogY3R4IH0pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCAoaXNBc3luYyhtYXliZUFzeW5jUmVzdWx0KSA/IG1heWJlQXN5bmNSZXN1bHQgOiBQcm9taXNlLnJlc29sdmUobWF5YmVBc3luY1Jlc3VsdCkpO1xuICAgICAgICByZXR1cm4gaGFuZGxlUmVzdWx0KGN0eCwgcmVzdWx0KTtcbiAgICB9XG4gICAgcmVmaW5lKGNoZWNrLCBtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGdldElzc3VlUHJvcGVydGllcyA9ICh2YWwpID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgbWVzc2FnZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2UgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBtZXNzYWdlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZSh2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KCh2YWwsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gY2hlY2sodmFsKTtcbiAgICAgICAgICAgIGNvbnN0IHNldEVycm9yID0gKCkgPT4gY3R4LmFkZElzc3VlKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuY3VzdG9tLFxuICAgICAgICAgICAgICAgIC4uLmdldElzc3VlUHJvcGVydGllcyh2YWwpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIFByb21pc2UgIT09IFwidW5kZWZpbmVkXCIgJiYgcmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEVycm9yKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBzZXRFcnJvcigpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVmaW5lbWVudChjaGVjaywgcmVmaW5lbWVudERhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZmluZW1lbnQoKHZhbCwgY3R4KSA9PiB7XG4gICAgICAgICAgICBpZiAoIWNoZWNrKHZhbCkpIHtcbiAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUodHlwZW9mIHJlZmluZW1lbnREYXRhID09PSBcImZ1bmN0aW9uXCIgPyByZWZpbmVtZW50RGF0YSh2YWwsIGN0eCkgOiByZWZpbmVtZW50RGF0YSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfcmVmaW5lbWVudChyZWZpbmVtZW50KSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgICAgICBzY2hlbWE6IHRoaXMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJyZWZpbmVtZW50XCIsIHJlZmluZW1lbnQgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN1cGVyUmVmaW5lKHJlZmluZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZmluZW1lbnQocmVmaW5lbWVudCk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGRlZikge1xuICAgICAgICAvKiogQWxpYXMgb2Ygc2FmZVBhcnNlQXN5bmMgKi9cbiAgICAgICAgdGhpcy5zcGEgPSB0aGlzLnNhZmVQYXJzZUFzeW5jO1xuICAgICAgICB0aGlzLl9kZWYgPSBkZWY7XG4gICAgICAgIHRoaXMucGFyc2UgPSB0aGlzLnBhcnNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2FmZVBhcnNlID0gdGhpcy5zYWZlUGFyc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5wYXJzZUFzeW5jID0gdGhpcy5wYXJzZUFzeW5jLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2FmZVBhcnNlQXN5bmMgPSB0aGlzLnNhZmVQYXJzZUFzeW5jLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc3BhID0gdGhpcy5zcGEuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5yZWZpbmUgPSB0aGlzLnJlZmluZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlZmluZW1lbnQgPSB0aGlzLnJlZmluZW1lbnQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zdXBlclJlZmluZSA9IHRoaXMuc3VwZXJSZWZpbmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vcHRpb25hbCA9IHRoaXMub3B0aW9uYWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5udWxsYWJsZSA9IHRoaXMubnVsbGFibGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5udWxsaXNoID0gdGhpcy5udWxsaXNoLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYXJyYXkgPSB0aGlzLmFycmF5LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IHRoaXMucHJvbWlzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9yID0gdGhpcy5vci5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmFuZCA9IHRoaXMuYW5kLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtID0gdGhpcy50cmFuc2Zvcm0uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5icmFuZCA9IHRoaXMuYnJhbmQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZWZhdWx0ID0gdGhpcy5kZWZhdWx0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuY2F0Y2ggPSB0aGlzLmNhdGNoLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZGVzY3JpYmUgPSB0aGlzLmRlc2NyaWJlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucGlwZSA9IHRoaXMucGlwZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlYWRvbmx5ID0gdGhpcy5yZWFkb25seS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmlzTnVsbGFibGUgPSB0aGlzLmlzTnVsbGFibGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5pc09wdGlvbmFsID0gdGhpcy5pc09wdGlvbmFsLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXNbXCJ+c3RhbmRhcmRcIl0gPSB7XG4gICAgICAgICAgICB2ZXJzaW9uOiAxLFxuICAgICAgICAgICAgdmVuZG9yOiBcInpvZFwiLFxuICAgICAgICAgICAgdmFsaWRhdGU6IChkYXRhKSA9PiB0aGlzW1wifnZhbGlkYXRlXCJdKGRhdGEpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBvcHRpb25hbCgpIHtcbiAgICAgICAgcmV0dXJuIFpvZE9wdGlvbmFsLmNyZWF0ZSh0aGlzLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBudWxsYWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZE51bGxhYmxlLmNyZWF0ZSh0aGlzLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBudWxsaXNoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5udWxsYWJsZSgpLm9wdGlvbmFsKCk7XG4gICAgfVxuICAgIGFycmF5KCkge1xuICAgICAgICByZXR1cm4gWm9kQXJyYXkuY3JlYXRlKHRoaXMpO1xuICAgIH1cbiAgICBwcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gWm9kUHJvbWlzZS5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgb3Iob3B0aW9uKSB7XG4gICAgICAgIHJldHVybiBab2RVbmlvbi5jcmVhdGUoW3RoaXMsIG9wdGlvbl0sIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIGFuZChpbmNvbWluZykge1xuICAgICAgICByZXR1cm4gWm9kSW50ZXJzZWN0aW9uLmNyZWF0ZSh0aGlzLCBpbmNvbWluZywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgdHJhbnNmb3JtKHRyYW5zZm9ybSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgc2NoZW1hOiB0aGlzLFxuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICAgICAgZWZmZWN0OiB7IHR5cGU6IFwidHJhbnNmb3JtXCIsIHRyYW5zZm9ybSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGVmYXVsdChkZWYpIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdFZhbHVlRnVuYyA9IHR5cGVvZiBkZWYgPT09IFwiZnVuY3Rpb25cIiA/IGRlZiA6ICgpID0+IGRlZjtcbiAgICAgICAgcmV0dXJuIG5ldyBab2REZWZhdWx0KHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIGlubmVyVHlwZTogdGhpcyxcbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdFZhbHVlRnVuYyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGVmYXVsdCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGJyYW5kKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEJyYW5kZWQoe1xuICAgICAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RCcmFuZGVkLFxuICAgICAgICAgICAgdHlwZTogdGhpcyxcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoKGRlZikge1xuICAgICAgICBjb25zdCBjYXRjaFZhbHVlRnVuYyA9IHR5cGVvZiBkZWYgPT09IFwiZnVuY3Rpb25cIiA/IGRlZiA6ICgpID0+IGRlZjtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RDYXRjaCh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBpbm5lclR5cGU6IHRoaXMsXG4gICAgICAgICAgICBjYXRjaFZhbHVlOiBjYXRjaFZhbHVlRnVuYyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQ2F0Y2gsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkZXNjcmliZShkZXNjcmlwdGlvbikge1xuICAgICAgICBjb25zdCBUaGlzID0gdGhpcy5jb25zdHJ1Y3RvcjtcbiAgICAgICAgcmV0dXJuIG5ldyBUaGlzKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcGlwZSh0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIFpvZFBpcGVsaW5lLmNyZWF0ZSh0aGlzLCB0YXJnZXQpO1xuICAgIH1cbiAgICByZWFkb25seSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZFJlYWRvbmx5LmNyZWF0ZSh0aGlzKTtcbiAgICB9XG4gICAgaXNPcHRpb25hbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2FmZVBhcnNlKHVuZGVmaW5lZCkuc3VjY2VzcztcbiAgICB9XG4gICAgaXNOdWxsYWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2FmZVBhcnNlKG51bGwpLnN1Y2Nlc3M7XG4gICAgfVxufVxuY29uc3QgY3VpZFJlZ2V4ID0gL15jW15cXHMtXXs4LH0kL2k7XG5jb25zdCBjdWlkMlJlZ2V4ID0gL15bMC05YS16XSskLztcbmNvbnN0IHVsaWRSZWdleCA9IC9eWzAtOUEtSEpLTU5QLVRWLVpdezI2fSQvaTtcbi8vIGNvbnN0IHV1aWRSZWdleCA9XG4vLyAgIC9eKFthLWYwLTldezh9LVthLWYwLTldezR9LVsxLTVdW2EtZjAtOV17M30tW2EtZjAtOV17NH0tW2EtZjAtOV17MTJ9fDAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCkkL2k7XG5jb25zdCB1dWlkUmVnZXggPSAvXlswLTlhLWZBLUZdezh9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezEyfSQvaTtcbmNvbnN0IG5hbm9pZFJlZ2V4ID0gL15bYS16MC05Xy1dezIxfSQvaTtcbmNvbnN0IGp3dFJlZ2V4ID0gL15bQS1aYS16MC05LV9dK1xcLltBLVphLXowLTktX10rXFwuW0EtWmEtejAtOS1fXSokLztcbmNvbnN0IGR1cmF0aW9uUmVnZXggPSAvXlstK10/UCg/ISQpKD86KD86Wy0rXT9cXGQrWSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtZJCkpPyg/Oig/OlstK10/XFxkK00pfCg/OlstK10/XFxkK1suLF1cXGQrTSQpKT8oPzooPzpbLStdP1xcZCtXKXwoPzpbLStdP1xcZCtbLixdXFxkK1ckKSk/KD86KD86Wy0rXT9cXGQrRCl8KD86Wy0rXT9cXGQrWy4sXVxcZCtEJCkpPyg/OlQoPz1bXFxkKy1dKSg/Oig/OlstK10/XFxkK0gpfCg/OlstK10/XFxkK1suLF1cXGQrSCQpKT8oPzooPzpbLStdP1xcZCtNKXwoPzpbLStdP1xcZCtbLixdXFxkK00kKSk/KD86Wy0rXT9cXGQrKD86Wy4sXVxcZCspP1MpPyk/PyQvO1xuLy8gZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDYxODEvMTU1MDE1NVxuLy8gb2xkIHZlcnNpb246IHRvbyBzbG93LCBkaWRuJ3Qgc3VwcG9ydCB1bmljb2RlXG4vLyBjb25zdCBlbWFpbFJlZ2V4ID0gL14oKChbYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKFxcLihbYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKSopfCgoXFx4MjIpKCgoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oKFtcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDdmXXxcXHgyMXxbXFx4MjMtXFx4NWJdfFtcXHg1ZC1cXHg3ZV18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfChcXFxcKFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZC1cXHg3Zl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkpKigoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oXFx4MjIpKSlAKCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLikrKChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpJC9pO1xuLy9vbGQgZW1haWwgcmVnZXhcbi8vIGNvbnN0IGVtYWlsUmVnZXggPSAvXigoW148PigpW1xcXS4sOzpcXHNAXCJdKyhcXC5bXjw+KClbXFxdLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKD8hLSkoW148PigpW1xcXS4sOzpcXHNAXCJdK1xcLikrW148PigpW1xcXS4sOzpcXHNAXCJdezEsfSlbXi08PigpW1xcXS4sOzpcXHNAXCJdJC9pO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL14oKFtePD4oKVtcXF1cXFxcLiw7Olxcc0BcXFwiXSsoXFwuW148PigpW1xcXVxcXFwuLDs6XFxzQFxcXCJdKykqKXwoXFxcIi4rXFxcIikpQCgoXFxbKCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFxdKXwoXFxbSVB2NjooKFthLWYwLTldezEsNH06KXs3fXw6OihbYS1mMC05XXsxLDR9Oil7MCw2fXwoW2EtZjAtOV17MSw0fTopezF9OihbYS1mMC05XXsxLDR9Oil7MCw1fXwoW2EtZjAtOV17MSw0fTopezJ9OihbYS1mMC05XXsxLDR9Oil7MCw0fXwoW2EtZjAtOV17MSw0fTopezN9OihbYS1mMC05XXsxLDR9Oil7MCwzfXwoW2EtZjAtOV17MSw0fTopezR9OihbYS1mMC05XXsxLDR9Oil7MCwyfXwoW2EtZjAtOV17MSw0fTopezV9OihbYS1mMC05XXsxLDR9Oil7MCwxfSkoW2EtZjAtOV17MSw0fXwoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSkpXFxdKXwoW0EtWmEtejAtOV0oW0EtWmEtejAtOS1dKltBLVphLXowLTldKSooXFwuW0EtWmEtel17Mix9KSspKSQvO1xuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eW2EtekEtWjAtOVxcLlxcIVxcI1xcJFxcJVxcJlxcJ1xcKlxcK1xcL1xcPVxcP1xcXlxcX1xcYFxce1xcfFxcfVxcflxcLV0rQFthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPyg/OlxcLlthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykqJC87XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL14oPzpbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqfFwiKD86W1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4MjFcXHgyMy1cXHg1YlxceDVkLVxceDdmXXxcXFxcW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBlLVxceDdmXSkqXCIpQCg/Oig/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT98XFxbKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT98W2EtejAtOS1dKlthLXowLTldOig/OltcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDIxLVxceDVhXFx4NTMtXFx4N2ZdfFxcXFxbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGUtXFx4N2ZdKSspXFxdKSQvaTtcbmNvbnN0IGVtYWlsUmVnZXggPSAvXig/IVxcLikoPyEuKlxcLlxcLikoW0EtWjAtOV8nK1xcLVxcLl0qKVtBLVowLTlfKy1dQChbQS1aMC05XVtBLVowLTlcXC1dKlxcLikrW0EtWl17Mix9JC9pO1xuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eW2EtejAtOS4hIyQlJuKAmSorLz0/Xl9ge3x9fi1dK0BbYS16MC05LV0rKD86XFwuW2EtejAtOVxcLV0rKSokL2k7XG4vLyBmcm9tIGh0dHBzOi8vdGhla2V2aW5zY290dC5jb20vZW1vamlzLWluLWphdmFzY3JpcHQvI3dyaXRpbmctYS1yZWd1bGFyLWV4cHJlc3Npb25cbmNvbnN0IF9lbW9qaVJlZ2V4ID0gYF4oXFxcXHB7RXh0ZW5kZWRfUGljdG9ncmFwaGljfXxcXFxccHtFbW9qaV9Db21wb25lbnR9KSskYDtcbmxldCBlbW9qaVJlZ2V4O1xuLy8gZmFzdGVyLCBzaW1wbGVyLCBzYWZlclxuY29uc3QgaXB2NFJlZ2V4ID0gL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSkkLztcbmNvbnN0IGlwdjRDaWRyUmVnZXggPSAvXig/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSlcXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXwxWzAtOV1bMC05XXxbMS05XVswLTldfFswLTldKVxcLygzWzAtMl18WzEyXT9bMC05XSkkLztcbi8vIGNvbnN0IGlwdjZSZWdleCA9XG4vLyAvXigoW2EtZjAtOV17MSw0fTopezd9fDo6KFthLWYwLTldezEsNH06KXswLDZ9fChbYS1mMC05XXsxLDR9Oil7MX06KFthLWYwLTldezEsNH06KXswLDV9fChbYS1mMC05XXsxLDR9Oil7Mn06KFthLWYwLTldezEsNH06KXswLDR9fChbYS1mMC05XXsxLDR9Oil7M306KFthLWYwLTldezEsNH06KXswLDN9fChbYS1mMC05XXsxLDR9Oil7NH06KFthLWYwLTldezEsNH06KXswLDJ9fChbYS1mMC05XXsxLDR9Oil7NX06KFthLWYwLTldezEsNH06KXswLDF9KShbYS1mMC05XXsxLDR9fCgoKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKVxcLil7M30oKDI1WzAtNV0pfCgyWzAtNF1bMC05XSl8KDFbMC05XXsyfSl8KFswLTldezEsMn0pKSkkLztcbmNvbnN0IGlwdjZSZWdleCA9IC9eKChbMC05YS1mQS1GXXsxLDR9Oil7Nyw3fVswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDd9OnwoWzAtOWEtZkEtRl17MSw0fTopezEsNn06WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsNX0oOlswLTlhLWZBLUZdezEsNH0pezEsMn18KFswLTlhLWZBLUZdezEsNH06KXsxLDR9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDN9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwzfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsMn0oOlswLTlhLWZBLUZdezEsNH0pezEsNX18WzAtOWEtZkEtRl17MSw0fTooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDZ9KXw6KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw3fXw6KXxmZTgwOig6WzAtOWEtZkEtRl17MCw0fSl7MCw0fSVbMC05YS16QS1aXXsxLH18OjooZmZmZig6MHsxLDR9KXswLDF9Oil7MCwxfSgoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH06KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pKSQvO1xuY29uc3QgaXB2NkNpZHJSZWdleCA9IC9eKChbMC05YS1mQS1GXXsxLDR9Oil7Nyw3fVswLTlhLWZBLUZdezEsNH18KFswLTlhLWZBLUZdezEsNH06KXsxLDd9OnwoWzAtOWEtZkEtRl17MSw0fTopezEsNn06WzAtOWEtZkEtRl17MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsNX0oOlswLTlhLWZBLUZdezEsNH0pezEsMn18KFswLTlhLWZBLUZdezEsNH06KXsxLDR9KDpbMC05YS1mQS1GXXsxLDR9KXsxLDN9fChbMC05YS1mQS1GXXsxLDR9Oil7MSwzfSg6WzAtOWEtZkEtRl17MSw0fSl7MSw0fXwoWzAtOWEtZkEtRl17MSw0fTopezEsMn0oOlswLTlhLWZBLUZdezEsNH0pezEsNX18WzAtOWEtZkEtRl17MSw0fTooKDpbMC05YS1mQS1GXXsxLDR9KXsxLDZ9KXw6KCg6WzAtOWEtZkEtRl17MSw0fSl7MSw3fXw6KXxmZTgwOig6WzAtOWEtZkEtRl17MCw0fSl7MCw0fSVbMC05YS16QS1aXXsxLH18OjooZmZmZig6MHsxLDR9KXswLDF9Oil7MCwxfSgoMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pXFwuKXszLDN9KDI1WzAtNV18KDJbMC00XXwxezAsMX1bMC05XSl7MCwxfVswLTldKXwoWzAtOWEtZkEtRl17MSw0fTopezEsNH06KCgyNVswLTVdfCgyWzAtNF18MXswLDF9WzAtOV0pezAsMX1bMC05XSlcXC4pezMsM30oMjVbMC01XXwoMlswLTRdfDF7MCwxfVswLTldKXswLDF9WzAtOV0pKVxcLygxMlswLThdfDFbMDFdWzAtOV18WzEtOV0/WzAtOV0pJC87XG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy83ODYwMzkyL2RldGVybWluZS1pZi1zdHJpbmctaXMtaW4tYmFzZTY0LXVzaW5nLWphdmFzY3JpcHRcbmNvbnN0IGJhc2U2NFJlZ2V4ID0gL14oWzAtOWEtekEtWisvXXs0fSkqKChbMC05YS16QS1aKy9dezJ9PT0pfChbMC05YS16QS1aKy9dezN9PSkpPyQvO1xuLy8gaHR0cHM6Ly9iYXNlNjQuZ3VydS9zdGFuZGFyZHMvYmFzZTY0dXJsXG5jb25zdCBiYXNlNjR1cmxSZWdleCA9IC9eKFswLTlhLXpBLVotX117NH0pKigoWzAtOWEtekEtWi1fXXsyfSg9PSk/KXwoWzAtOWEtekEtWi1fXXszfSg9KT8pKT8kLztcbi8vIHNpbXBsZVxuLy8gY29uc3QgZGF0ZVJlZ2V4U291cmNlID0gYFxcXFxkezR9LVxcXFxkezJ9LVxcXFxkezJ9YDtcbi8vIG5vIGxlYXAgeWVhciB2YWxpZGF0aW9uXG4vLyBjb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgXFxcXGR7NH0tKCgwWzEzNTc4XXwxMHwxMiktMzF8KDBbMTMtOV18MVswLTJdKS0zMHwoMFsxLTldfDFbMC0yXSktKDBbMS05XXwxXFxcXGR8MlxcXFxkKSlgO1xuLy8gd2l0aCBsZWFwIHllYXIgdmFsaWRhdGlvblxuY29uc3QgZGF0ZVJlZ2V4U291cmNlID0gYCgoXFxcXGRcXFxcZFsyNDY4XVswNDhdfFxcXFxkXFxcXGRbMTM1NzldWzI2XXxcXFxcZFxcXFxkMFs0OF18WzAyNDY4XVswNDhdMDB8WzEzNTc5XVsyNl0wMCktMDItMjl8XFxcXGR7NH0tKCgwWzEzNTc4XXwxWzAyXSktKDBbMS05XXxbMTJdXFxcXGR8M1swMV0pfCgwWzQ2OV18MTEpLSgwWzEtOV18WzEyXVxcXFxkfDMwKXwoMDIpLSgwWzEtOV18MVxcXFxkfDJbMC04XSkpKWA7XG5jb25zdCBkYXRlUmVnZXggPSBuZXcgUmVnRXhwKGBeJHtkYXRlUmVnZXhTb3VyY2V9JGApO1xuZnVuY3Rpb24gdGltZVJlZ2V4U291cmNlKGFyZ3MpIHtcbiAgICBsZXQgc2Vjb25kc1JlZ2V4U291cmNlID0gYFswLTVdXFxcXGRgO1xuICAgIGlmIChhcmdzLnByZWNpc2lvbikge1xuICAgICAgICBzZWNvbmRzUmVnZXhTb3VyY2UgPSBgJHtzZWNvbmRzUmVnZXhTb3VyY2V9XFxcXC5cXFxcZHske2FyZ3MucHJlY2lzaW9ufX1gO1xuICAgIH1cbiAgICBlbHNlIGlmIChhcmdzLnByZWNpc2lvbiA9PSBudWxsKSB7XG4gICAgICAgIHNlY29uZHNSZWdleFNvdXJjZSA9IGAke3NlY29uZHNSZWdleFNvdXJjZX0oXFxcXC5cXFxcZCspP2A7XG4gICAgfVxuICAgIGNvbnN0IHNlY29uZHNRdWFudGlmaWVyID0gYXJncy5wcmVjaXNpb24gPyBcIitcIiA6IFwiP1wiOyAvLyByZXF1aXJlIHNlY29uZHMgaWYgcHJlY2lzaW9uIGlzIG5vbnplcm9cbiAgICByZXR1cm4gYChbMDFdXFxcXGR8MlswLTNdKTpbMC01XVxcXFxkKDoke3NlY29uZHNSZWdleFNvdXJjZX0pJHtzZWNvbmRzUXVhbnRpZmllcn1gO1xufVxuZnVuY3Rpb24gdGltZVJlZ2V4KGFyZ3MpIHtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChgXiR7dGltZVJlZ2V4U291cmNlKGFyZ3MpfSRgKTtcbn1cbi8vIEFkYXB0ZWQgZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzE0MzIzMVxuZXhwb3J0IGZ1bmN0aW9uIGRhdGV0aW1lUmVnZXgoYXJncykge1xuICAgIGxldCByZWdleCA9IGAke2RhdGVSZWdleFNvdXJjZX1UJHt0aW1lUmVnZXhTb3VyY2UoYXJncyl9YDtcbiAgICBjb25zdCBvcHRzID0gW107XG4gICAgb3B0cy5wdXNoKGFyZ3MubG9jYWwgPyBgWj9gIDogYFpgKTtcbiAgICBpZiAoYXJncy5vZmZzZXQpXG4gICAgICAgIG9wdHMucHVzaChgKFsrLV1cXFxcZHsyfTo/XFxcXGR7Mn0pYCk7XG4gICAgcmVnZXggPSBgJHtyZWdleH0oJHtvcHRzLmpvaW4oXCJ8XCIpfSlgO1xuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHtyZWdleH0kYCk7XG59XG5mdW5jdGlvbiBpc1ZhbGlkSVAoaXAsIHZlcnNpb24pIHtcbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjRcIiB8fCAhdmVyc2lvbikgJiYgaXB2NFJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjZcIiB8fCAhdmVyc2lvbikgJiYgaXB2NlJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBpc1ZhbGlkSldUKGp3dCwgYWxnKSB7XG4gICAgaWYgKCFqd3RSZWdleC50ZXN0KGp3dCkpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBbaGVhZGVyXSA9IGp3dC5zcGxpdChcIi5cIik7XG4gICAgICAgIC8vIENvbnZlcnQgYmFzZTY0dXJsIHRvIGJhc2U2NFxuICAgICAgICBjb25zdCBiYXNlNjQgPSBoZWFkZXJcbiAgICAgICAgICAgIC5yZXBsYWNlKC8tL2csIFwiK1wiKVxuICAgICAgICAgICAgLnJlcGxhY2UoL18vZywgXCIvXCIpXG4gICAgICAgICAgICAucGFkRW5kKGhlYWRlci5sZW5ndGggKyAoKDQgLSAoaGVhZGVyLmxlbmd0aCAlIDQpKSAlIDQpLCBcIj1cIik7XG4gICAgICAgIGNvbnN0IGRlY29kZWQgPSBKU09OLnBhcnNlKGF0b2IoYmFzZTY0KSk7XG4gICAgICAgIGlmICh0eXBlb2YgZGVjb2RlZCAhPT0gXCJvYmplY3RcIiB8fCBkZWNvZGVkID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoXCJ0eXBcIiBpbiBkZWNvZGVkICYmIGRlY29kZWQ/LnR5cCAhPT0gXCJKV1RcIilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCFkZWNvZGVkLmFsZylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGFsZyAmJiBkZWNvZGVkLmFsZyAhPT0gYWxnKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2gge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuZnVuY3Rpb24gaXNWYWxpZENpZHIoaXAsIHZlcnNpb24pIHtcbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjRcIiB8fCAhdmVyc2lvbikgJiYgaXB2NENpZHJSZWdleC50ZXN0KGlwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCh2ZXJzaW9uID09PSBcInY2XCIgfHwgIXZlcnNpb24pICYmIGlwdjZDaWRyUmVnZXgudGVzdChpcCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydCBjbGFzcyBab2RTdHJpbmcgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBTdHJpbmcoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zdHJpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc3RyaW5nLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5sZW5ndGggPiBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImxlbmd0aFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vQmlnID0gaW5wdXQuZGF0YS5sZW5ndGggPiBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGlucHV0LmRhdGEubGVuZ3RoIDwgY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvb0JpZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtYWlsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtYWlsUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImVtYWlsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbW9qaVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4KSB7XG4gICAgICAgICAgICAgICAgICAgIGVtb2ppUmVnZXggPSBuZXcgUmVnRXhwKF9lbW9qaVJlZ2V4LCBcInVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZW1vamlSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1vamlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInV1aWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXVpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1dWlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJuYW5vaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghbmFub2lkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcIm5hbm9pZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImN1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImN1aWQyXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWQyUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImN1aWQyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1bGlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXVsaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwidWxpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXJsXCIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgVVJMKGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwidXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJyZWdleFwiKSB7XG4gICAgICAgICAgICAgICAgY2hlY2sucmVnZXgubGFzdEluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXN0UmVzdWx0ID0gY2hlY2sucmVnZXgudGVzdChpbnB1dC5kYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRlc3RSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJyZWdleFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidHJpbVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudHJpbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJpbmNsdWRlc1wiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmluY2x1ZGVzKGNoZWNrLnZhbHVlLCBjaGVjay5wb3NpdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBpbmNsdWRlczogY2hlY2sudmFsdWUsIHBvc2l0aW9uOiBjaGVjay5wb3NpdGlvbiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9Mb3dlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRvVXBwZXJDYXNlXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJzdGFydHNXaXRoXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuc3RhcnRzV2l0aChjaGVjay52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBzdGFydHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZW5kc1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5lbmRzV2l0aChjaGVjay52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogeyBlbmRzV2l0aDogY2hlY2sudmFsdWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGV0aW1lXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IGRhdGV0aW1lUmVnZXgoY2hlY2spO1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkYXRlXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IGRhdGVSZWdleDtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0aW1lXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IHRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwidGltZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZHVyYXRpb25cIikge1xuICAgICAgICAgICAgICAgIGlmICghZHVyYXRpb25SZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZHVyYXRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImlwXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWRJUChpbnB1dC5kYXRhLCBjaGVjay52ZXJzaW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImlwXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJqd3RcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZEpXVChpbnB1dC5kYXRhLCBjaGVjay5hbGcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiand0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJjaWRyXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWRDaWRyKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiY2lkclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiYmFzZTY0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWJhc2U2NFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJiYXNlNjRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImJhc2U2NHVybFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFiYXNlNjR1cmxSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiYmFzZTY0dXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9yZWdleChyZWdleCwgdmFsaWRhdGlvbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZpbmVtZW50KChkYXRhKSA9PiByZWdleC50ZXN0KGRhdGEpLCB7XG4gICAgICAgICAgICB2YWxpZGF0aW9uLFxuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVtYWlsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJlbWFpbFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHVybChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidXJsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgZW1vamkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtb2ppXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXVpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidXVpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIG5hbm9pZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwibmFub2lkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiY3VpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGN1aWQyKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkMlwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHVsaWQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcInVsaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBiYXNlNjQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImJhc2U2NFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGJhc2U2NHVybChtZXNzYWdlKSB7XG4gICAgICAgIC8vIGJhc2U2NHVybCBlbmNvZGluZyBpcyBhIG1vZGlmaWNhdGlvbiBvZiBiYXNlNjQgdGhhdCBjYW4gc2FmZWx5IGJlIHVzZWQgaW4gVVJMcyBhbmQgZmlsZW5hbWVzXG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImJhc2U2NHVybFwiLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgand0KG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJqd3RcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBpcChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiaXBcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG9wdGlvbnMpIH0pO1xuICAgIH1cbiAgICBjaWRyKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjaWRyXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zKSB9KTtcbiAgICB9XG4gICAgZGF0ZXRpbWUob3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICAgICAga2luZDogXCJkYXRldGltZVwiLFxuICAgICAgICAgICAgICAgIHByZWNpc2lvbjogbnVsbCxcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGxvY2FsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBvcHRpb25zLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgIHByZWNpc2lvbjogdHlwZW9mIG9wdGlvbnM/LnByZWNpc2lvbiA9PT0gXCJ1bmRlZmluZWRcIiA/IG51bGwgOiBvcHRpb25zPy5wcmVjaXNpb24sXG4gICAgICAgICAgICBvZmZzZXQ6IG9wdGlvbnM/Lm9mZnNldCA/PyBmYWxzZSxcbiAgICAgICAgICAgIGxvY2FsOiBvcHRpb25zPy5sb2NhbCA/PyBmYWxzZSxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRhdGUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImRhdGVcIiwgbWVzc2FnZSB9KTtcbiAgICB9XG4gICAgdGltZShvcHRpb25zKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgICAgICBraW5kOiBcInRpbWVcIixcbiAgICAgICAgICAgICAgICBwcmVjaXNpb246IG51bGwsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogb3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcInRpbWVcIixcbiAgICAgICAgICAgIHByZWNpc2lvbjogdHlwZW9mIG9wdGlvbnM/LnByZWNpc2lvbiA9PT0gXCJ1bmRlZmluZWRcIiA/IG51bGwgOiBvcHRpb25zPy5wcmVjaXNpb24sXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucz8ubWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkdXJhdGlvbihtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZHVyYXRpb25cIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICByZWdleChyZWdleCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJyZWdleFwiLFxuICAgICAgICAgICAgcmVnZXg6IHJlZ2V4LFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW5jbHVkZXModmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiaW5jbHVkZXNcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBvcHRpb25zPy5wb3NpdGlvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zPy5tZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXJ0c1dpdGgodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwic3RhcnRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW5kc1dpdGgodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiZW5kc1dpdGhcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1pbihtaW5MZW5ndGgsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogbWluTGVuZ3RoLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heExlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBtYXhMZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsZW5ndGgobGVuLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImxlbmd0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IGxlbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gYC5taW4oMSlgXG4gICAgICovXG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgdHJpbSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgeyBraW5kOiBcInRyaW1cIiB9XSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRvTG93ZXJDYXNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidG9Mb3dlckNhc2VcIiB9XSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRvVXBwZXJDYXNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidG9VcHBlckNhc2VcIiB9XSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCBpc0RhdGV0aW1lKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImRhdGV0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEYXRlKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImRhdGVcIik7XG4gICAgfVxuICAgIGdldCBpc1RpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidGltZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZHVyYXRpb25cIik7XG4gICAgfVxuICAgIGdldCBpc0VtYWlsKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtYWlsXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVUkwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidXJsXCIpO1xuICAgIH1cbiAgICBnZXQgaXNFbW9qaSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJlbW9qaVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVVVJRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1dWlkXCIpO1xuICAgIH1cbiAgICBnZXQgaXNOQU5PSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwibmFub2lkXCIpO1xuICAgIH1cbiAgICBnZXQgaXNDVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImN1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQyKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImN1aWQyXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVTElEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInVsaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0lQKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImlwXCIpO1xuICAgIH1cbiAgICBnZXQgaXNDSURSKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImNpZHJcIik7XG4gICAgfVxuICAgIGdldCBpc0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJiYXNlNjRcIik7XG4gICAgfVxuICAgIGdldCBpc0Jhc2U2NHVybCgpIHtcbiAgICAgICAgLy8gYmFzZTY0dXJsIGVuY29kaW5nIGlzIGEgbW9kaWZpY2F0aW9uIG9mIGJhc2U2NCB0aGF0IGNhbiBzYWZlbHkgYmUgdXNlZCBpbiBVUkxzIGFuZCBmaWxlbmFtZXNcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJiYXNlNjR1cmxcIik7XG4gICAgfVxuICAgIGdldCBtaW5MZW5ndGgoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heExlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4O1xuICAgIH1cbn1cblpvZFN0cmluZy5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RTdHJpbmcoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFN0cmluZyxcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSA/PyBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM5NjY0ODQvd2h5LWRvZXMtbW9kdWx1cy1vcGVyYXRvci1yZXR1cm4tZnJhY3Rpb25hbC1udW1iZXItaW4tamF2YXNjcmlwdC8zMTcxMTAzNCMzMTcxMTAzNFxuZnVuY3Rpb24gZmxvYXRTYWZlUmVtYWluZGVyKHZhbCwgc3RlcCkge1xuICAgIGNvbnN0IHZhbERlY0NvdW50ID0gKHZhbC50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXSB8fCBcIlwiKS5sZW5ndGg7XG4gICAgY29uc3Qgc3RlcERlY0NvdW50ID0gKHN0ZXAudG9TdHJpbmcoKS5zcGxpdChcIi5cIilbMV0gfHwgXCJcIikubGVuZ3RoO1xuICAgIGNvbnN0IGRlY0NvdW50ID0gdmFsRGVjQ291bnQgPiBzdGVwRGVjQ291bnQgPyB2YWxEZWNDb3VudCA6IHN0ZXBEZWNDb3VudDtcbiAgICBjb25zdCB2YWxJbnQgPSBOdW1iZXIucGFyc2VJbnQodmFsLnRvRml4ZWQoZGVjQ291bnQpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgICBjb25zdCBzdGVwSW50ID0gTnVtYmVyLnBhcnNlSW50KHN0ZXAudG9GaXhlZChkZWNDb3VudCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgIHJldHVybiAodmFsSW50ICUgc3RlcEludCkgLyAxMCAqKiBkZWNDb3VudDtcbn1cbmV4cG9ydCBjbGFzcyBab2ROdW1iZXIgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5taW4gPSB0aGlzLmd0ZTtcbiAgICAgICAgdGhpcy5tYXggPSB0aGlzLmx0ZTtcbiAgICAgICAgdGhpcy5zdGVwID0gdGhpcy5tdWx0aXBsZU9mO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBOdW1iZXIoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVtYmVyLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwiaW50XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXV0aWwuaXNJbnRlZ2VyKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJpbnRlZ2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlZDogXCJmbG9hdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGNoZWNrLmluY2x1c2l2ZSA/IGlucHV0LmRhdGEgPCBjaGVjay52YWx1ZSA6IGlucHV0LmRhdGEgPD0gY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vQmlnID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA+IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA+PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBjaGVjay5pbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmxvYXRTYWZlUmVtYWluZGVyKGlucHV0LmRhdGEsIGNoZWNrLnZhbHVlKSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJmaW5pdGVcIikge1xuICAgICAgICAgICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfZmluaXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBndGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGd0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHRlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIHNldExpbWl0KGtpbmQsIHZhbHVlLCBpbmNsdXNpdmUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2ROdW1iZXIoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbXG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLmNoZWNrcyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtpbmQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCBjaGVja10sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbnQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbnRcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBuZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ubmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbXVsdGlwbGVPZih2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtdWx0aXBsZU9mXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmaW5pdGUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJmaW5pdGVcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNhZmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSkuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxuICAgIGdldCBpc0ludCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJpbnRcIiB8fCAoY2gua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIgJiYgdXRpbC5pc0ludGVnZXIoY2gudmFsdWUpKSk7XG4gICAgfVxuICAgIGdldCBpc0Zpbml0ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcImZpbml0ZVwiIHx8IGNoLmtpbmQgPT09IFwiaW50XCIgfHwgY2gua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKG1pbikgJiYgTnVtYmVyLmlzRmluaXRlKG1heCk7XG4gICAgfVxufVxuWm9kTnVtYmVyLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVtYmVyLFxuICAgICAgICBjb2VyY2U6IHBhcmFtcz8uY29lcmNlIHx8IGZhbHNlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEJpZ0ludCBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLm1pbiA9IHRoaXMuZ3RlO1xuICAgICAgICB0aGlzLm1heCA9IHRoaXMubHRlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IEJpZ0ludChpbnB1dC5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW52YWxpZElucHV0KGlucHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmJpZ2ludCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldEludmFsaWRJbnB1dChpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGNoZWNrLmluY2x1c2l2ZSA/IGlucHV0LmRhdGEgPCBjaGVjay52YWx1ZSA6IGlucHV0LmRhdGEgPD0gY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vQmlnID0gY2hlY2suaW5jbHVzaXZlID8gaW5wdXQuZGF0YSA+IGNoZWNrLnZhbHVlIDogaW5wdXQuZGF0YSA+PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJiaWdpbnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBjaGVjay5pbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YSAlIGNoZWNrLnZhbHVlICE9PSBCaWdJbnQoMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLm5vdF9tdWx0aXBsZV9vZixcbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpcGxlT2Y6IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBfZ2V0SW52YWxpZElucHV0KGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYmlnaW50LFxuICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxuICAgIGd0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgZ3QodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgc2V0TGltaXQoa2luZCwgdmFsdWUsIGluY2x1c2l2ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEJpZ0ludCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuY2hlY2tzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2luZCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogQmlnSW50KDApLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5lZ2F0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogQmlnSW50KDApLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5vbnBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogQmlnSW50KDApLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ubmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtdWx0aXBsZU9mKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm11bHRpcGxlT2ZcIixcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IG1pblZhbHVlKCkge1xuICAgICAgICBsZXQgbWluID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChtaW4gPT09IG51bGwgfHwgY2gudmFsdWUgPiBtaW4pXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaW47XG4gICAgfVxuICAgIGdldCBtYXhWYWx1ZSgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4O1xuICAgIH1cbn1cblpvZEJpZ0ludC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJpZ0ludCxcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSA/PyBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RCb29sZWFuIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gQm9vbGVhbihpbnB1dC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLmJvb2xlYW4pIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYm9vbGVhbixcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RCb29sZWFuLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEJvb2xlYW4oe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJvb2xlYW4sXG4gICAgICAgIGNvZXJjZTogcGFyYW1zPy5jb2VyY2UgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRGF0ZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAodGhpcy5fZGVmLmNvZXJjZSkge1xuICAgICAgICAgICAgaW5wdXQuZGF0YSA9IG5ldyBEYXRlKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuZGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5kYXRlLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlci5pc05hTihpbnB1dC5kYXRhLmdldFRpbWUoKSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2RhdGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IG5ldyBQYXJzZVN0YXR1cygpO1xuICAgICAgICBsZXQgY3R4ID0gdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaGVjay5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEuZ2V0VGltZSgpIDwgY2hlY2sudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZGF0ZVwiLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmdldFRpbWUoKSA+IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMudmFsdWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IERhdGUoaW5wdXQuZGF0YS5nZXRUaW1lKCkpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2REYXRlKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1pbihtaW5EYXRlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IG1pbkRhdGUuZ2V0VGltZSgpLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heERhdGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICB2YWx1ZTogbWF4RGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluRGF0ZSgpIHtcbiAgICAgICAgbGV0IG1pbiA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWluID09PSBudWxsIHx8IGNoLnZhbHVlID4gbWluKVxuICAgICAgICAgICAgICAgICAgICBtaW4gPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWluICE9IG51bGwgPyBuZXcgRGF0ZShtaW4pIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0IG1heERhdGUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1heCAhPSBudWxsID8gbmV3IERhdGUobWF4KSA6IG51bGw7XG4gICAgfVxufVxuWm9kRGF0ZS5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2REYXRlKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgY29lcmNlOiBwYXJhbXM/LmNvZXJjZSB8fCBmYWxzZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2REYXRlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFN5bWJvbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnN5bWJvbCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zeW1ib2wsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kU3ltYm9sLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFN5bWJvbCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU3ltYm9sLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVuZGVmaW5lZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS51bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5kZWZpbmVkLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFVuZGVmaW5lZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5kZWZpbmVkLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE51bGwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udWxsKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm51bGwsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kTnVsbC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdWxsKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROdWxsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEFueSBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAvLyB0byBwcmV2ZW50IGluc3RhbmNlcyBvZiBvdGhlciBjbGFzc2VzIGZyb20gZXh0ZW5kaW5nIFpvZEFueS4gdGhpcyBjYXVzZXMgaXNzdWVzIHdpdGggY2F0Y2hhbGwgaW4gWm9kT2JqZWN0LlxuICAgICAgICB0aGlzLl9hbnkgPSB0cnVlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEFueS5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RBbnkoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEFueSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RVbmtub3duIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHJlcXVpcmVkXG4gICAgICAgIHRoaXMuX3Vua25vd24gPSB0cnVlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFVua25vd24uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5rbm93bih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5rbm93bixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2ROZXZlciBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm5ldmVyLFxuICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgfVxufVxuWm9kTmV2ZXIuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmV2ZXIoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE5ldmVyLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFZvaWQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUudm9pZCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RWb2lkLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFZvaWQoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFZvaWQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQXJyYXkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHgsIHN0YXR1cyB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYXJyYXkpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYXJyYXksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLmV4YWN0TGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjdHguZGF0YS5sZW5ndGggPiBkZWYuZXhhY3RMZW5ndGgudmFsdWU7XG4gICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGN0eC5kYXRhLmxlbmd0aCA8IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGlmICh0b29CaWcgfHwgdG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogdG9vQmlnID8gWm9kSXNzdWVDb2RlLnRvb19iaWcgOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiAodG9vU21hbGwgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiAodG9vQmlnID8gZGVmLmV4YWN0TGVuZ3RoLnZhbHVlIDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYuZXhhY3RMZW5ndGgubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLm1pbkxlbmd0aCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IGRlZi5taW5MZW5ndGgudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pbkxlbmd0aC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1pbkxlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4TGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoID4gZGVmLm1heExlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heExlbmd0aC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1heExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoWy4uLmN0eC5kYXRhXS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmLnR5cGUuX3BhcnNlQXN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgICAgICB9KSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gWy4uLmN0eC5kYXRhXS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VTeW5jKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBpdGVtLCBjdHgucGF0aCwgaSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHQpO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBtaW4obWluTGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWluTGVuZ3RoOiB7IHZhbHVlOiBtaW5MZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heExlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heExlbmd0aDogeyB2YWx1ZTogbWF4TGVuZ3RoLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBleGFjdExlbmd0aDogeyB2YWx1ZTogbGVuLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZEFycmF5LmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICB0eXBlOiBzY2hlbWEsXG4gICAgICAgIG1pbkxlbmd0aDogbnVsbCxcbiAgICAgICAgbWF4TGVuZ3RoOiBudWxsLFxuICAgICAgICBleGFjdExlbmd0aDogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmZ1bmN0aW9uIGRlZXBQYXJ0aWFsaWZ5KHNjaGVtYSkge1xuICAgIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RPYmplY3QpIHtcbiAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hLnNoYXBlKSB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZFNjaGVtYSA9IHNjaGVtYS5zaGFwZVtrZXldO1xuICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShmaWVsZFNjaGVtYSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kQXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi5zY2hlbWEuX2RlZixcbiAgICAgICAgICAgIHR5cGU6IGRlZXBQYXJ0aWFsaWZ5KHNjaGVtYS5lbGVtZW50KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBab2RPcHRpb25hbC5jcmVhdGUoZGVlcFBhcnRpYWxpZnkoc2NoZW1hLnVud3JhcCgpKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBab2ROdWxsYWJsZS5jcmVhdGUoZGVlcFBhcnRpYWxpZnkoc2NoZW1hLnVud3JhcCgpKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZFR1cGxlKSB7XG4gICAgICAgIHJldHVybiBab2RUdXBsZS5jcmVhdGUoc2NoZW1hLml0ZW1zLm1hcCgoaXRlbSkgPT4gZGVlcFBhcnRpYWxpZnkoaXRlbSkpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBzY2hlbWE7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZE9iamVjdCBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLl9jYWNoZWQgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgSW4gbW9zdCBjYXNlcywgdGhpcyBpcyBubyBsb25nZXIgbmVlZGVkIC0gdW5rbm93biBwcm9wZXJ0aWVzIGFyZSBub3cgc2lsZW50bHkgc3RyaXBwZWQuXG4gICAgICAgICAqIElmIHlvdSB3YW50IHRvIHBhc3MgdGhyb3VnaCB1bmtub3duIHByb3BlcnRpZXMsIHVzZSBgLnBhc3N0aHJvdWdoKClgIGluc3RlYWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5vbnN0cmljdCA9IHRoaXMucGFzc3Rocm91Z2g7XG4gICAgICAgIC8vIGV4dGVuZDxcbiAgICAgICAgLy8gICBBdWdtZW50YXRpb24gZXh0ZW5kcyBab2RSYXdTaGFwZSxcbiAgICAgICAgLy8gICBOZXdPdXRwdXQgZXh0ZW5kcyB1dGlsLmZsYXR0ZW48e1xuICAgICAgICAvLyAgICAgW2sgaW4ga2V5b2YgQXVnbWVudGF0aW9uIHwga2V5b2YgT3V0cHV0XTogayBleHRlbmRzIGtleW9mIEF1Z21lbnRhdGlvblxuICAgICAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9vdXRwdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgT3V0cHV0XG4gICAgICAgIC8vICAgICAgID8gT3V0cHV0W2tdXG4gICAgICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgICAgIC8vICAgfT4sXG4gICAgICAgIC8vICAgTmV3SW5wdXQgZXh0ZW5kcyB1dGlsLmZsYXR0ZW48e1xuICAgICAgICAvLyAgICAgW2sgaW4ga2V5b2YgQXVnbWVudGF0aW9uIHwga2V5b2YgSW5wdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX2lucHV0XCJdXG4gICAgICAgIC8vICAgICAgIDogayBleHRlbmRzIGtleW9mIElucHV0XG4gICAgICAgIC8vICAgICAgID8gSW5wdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PlxuICAgICAgICAvLyA+KFxuICAgICAgICAvLyAgIGF1Z21lbnRhdGlvbjogQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICk6IFpvZE9iamVjdDxcbiAgICAgICAgLy8gICBleHRlbmRTaGFwZTxULCBBdWdtZW50YXRpb24+LFxuICAgICAgICAvLyAgIFVua25vd25LZXlzLFxuICAgICAgICAvLyAgIENhdGNoYWxsLFxuICAgICAgICAvLyAgIE5ld091dHB1dCxcbiAgICAgICAgLy8gICBOZXdJbnB1dFxuICAgICAgICAvLyA+IHtcbiAgICAgICAgLy8gICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIC8vICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgIC8vICAgICBzaGFwZTogKCkgPT4gKHtcbiAgICAgICAgLy8gICAgICAgLi4udGhpcy5fZGVmLnNoYXBlKCksXG4gICAgICAgIC8vICAgICAgIC4uLmF1Z21lbnRhdGlvbixcbiAgICAgICAgLy8gICAgIH0pLFxuICAgICAgICAvLyAgIH0pIGFzIGFueTtcbiAgICAgICAgLy8gfVxuICAgICAgICAvKipcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgVXNlIGAuZXh0ZW5kYCBpbnN0ZWFkXG4gICAgICAgICAqICAqL1xuICAgICAgICB0aGlzLmF1Z21lbnQgPSB0aGlzLmV4dGVuZDtcbiAgICB9XG4gICAgX2dldENhY2hlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NhY2hlZCAhPT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWQ7XG4gICAgICAgIGNvbnN0IHNoYXBlID0gdGhpcy5fZGVmLnNoYXBlKCk7XG4gICAgICAgIGNvbnN0IGtleXMgPSB1dGlsLm9iamVjdEtleXMoc2hhcGUpO1xuICAgICAgICB0aGlzLl9jYWNoZWQgPSB7IHNoYXBlLCBrZXlzIH07XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWQ7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCB7IHNoYXBlLCBrZXlzOiBzaGFwZUtleXMgfSA9IHRoaXMuX2dldENhY2hlZCgpO1xuICAgICAgICBjb25zdCBleHRyYUtleXMgPSBbXTtcbiAgICAgICAgaWYgKCEodGhpcy5fZGVmLmNhdGNoYWxsIGluc3RhbmNlb2YgWm9kTmV2ZXIgJiYgdGhpcy5fZGVmLnVua25vd25LZXlzID09PSBcInN0cmlwXCIpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBjdHguZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmICghc2hhcGVLZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFLZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFpcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcGVLZXlzKSB7XG4gICAgICAgICAgICBjb25zdCBrZXlWYWxpZGF0b3IgPSBzaGFwZVtrZXldO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjdHguZGF0YVtrZXldO1xuICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAga2V5OiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZToga2V5IH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IGtleVZhbGlkYXRvci5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIHZhbHVlLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fZGVmLmNhdGNoYWxsIGluc3RhbmNlb2YgWm9kTmV2ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHVua25vd25LZXlzID0gdGhpcy5fZGVmLnVua25vd25LZXlzO1xuICAgICAgICAgICAgaWYgKHVua25vd25LZXlzID09PSBcInBhc3N0aHJvdWdoXCIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogY3R4LmRhdGFba2V5XSB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh1bmtub3duS2V5cyA9PT0gXCJzdHJpY3RcIikge1xuICAgICAgICAgICAgICAgIGlmIChleHRyYUtleXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS51bnJlY29nbml6ZWRfa2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXM6IGV4dHJhS2V5cyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmlwXCIpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW50ZXJuYWwgWm9kT2JqZWN0IGVycm9yOiBpbnZhbGlkIHVua25vd25LZXlzIHZhbHVlLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gcnVuIGNhdGNoYWxsIHZhbGlkYXRpb25cbiAgICAgICAgICAgIGNvbnN0IGNhdGNoYWxsID0gdGhpcy5fZGVmLmNhdGNoYWxsO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgZXh0cmFLZXlzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjdHguZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNhdGNoYWxsLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpIC8vLCBjdHguY2hpbGQoa2V5KSwgdmFsdWUsIGdldFBhcnNlZFR5cGUodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGFsd2F5c1NldDoga2V5IGluIGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgICAgICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3luY1BhaXJzID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHN5bmNQYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBwYWlyLmFsd2F5c1NldCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzeW5jUGFpcnM7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKChzeW5jUGFpcnMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgc3luY1BhaXJzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICB9XG4gICAgc3RyaWN0KG1lc3NhZ2UpIHtcbiAgICAgICAgZXJyb3JVdGlsLmVyclRvT2JqO1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICB1bmtub3duS2V5czogXCJzdHJpY3RcIixcbiAgICAgICAgICAgIC4uLihtZXNzYWdlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNYXA6IChpc3N1ZSwgY3R4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0RXJyb3IgPSB0aGlzLl9kZWYuZXJyb3JNYXA/Lihpc3N1ZSwgY3R4KS5tZXNzYWdlID8/IGN0eC5kZWZhdWx0RXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNzdWUuY29kZSA9PT0gXCJ1bnJlY29nbml6ZWRfa2V5c1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKS5tZXNzYWdlID8/IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWZhdWx0RXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0cmlwKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcGFzc3Rocm91Z2goKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInBhc3N0aHJvdWdoXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBjb25zdCBBdWdtZW50RmFjdG9yeSA9XG4gICAgLy8gICA8RGVmIGV4dGVuZHMgWm9kT2JqZWN0RGVmPihkZWY6IERlZikgPT5cbiAgICAvLyAgIDxBdWdtZW50YXRpb24gZXh0ZW5kcyBab2RSYXdTaGFwZT4oXG4gICAgLy8gICAgIGF1Z21lbnRhdGlvbjogQXVnbWVudGF0aW9uXG4gICAgLy8gICApOiBab2RPYmplY3Q8XG4gICAgLy8gICAgIGV4dGVuZFNoYXBlPFJldHVyblR5cGU8RGVmW1wic2hhcGVcIl0+LCBBdWdtZW50YXRpb24+LFxuICAgIC8vICAgICBEZWZbXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgICAgRGVmW1wiY2F0Y2hhbGxcIl1cbiAgICAvLyAgID4gPT4ge1xuICAgIC8vICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgICAgLi4uZGVmLFxuICAgIC8vICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgIC8vICAgICAgICAgLi4uZGVmLnNoYXBlKCksXG4gICAgLy8gICAgICAgICAuLi5hdWdtZW50YXRpb24sXG4gICAgLy8gICAgICAgfSksXG4gICAgLy8gICAgIH0pIGFzIGFueTtcbiAgICAvLyAgIH07XG4gICAgZXh0ZW5kKGF1Z21lbnRhdGlvbikge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgICAgICAgICAuLi5hdWdtZW50YXRpb24sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByaW9yIHRvIHpvZEAxLjAuMTIgdGhlcmUgd2FzIGEgYnVnIGluIHRoZVxuICAgICAqIGluZmVycmVkIHR5cGUgb2YgbWVyZ2VkIG9iamVjdHMuIFBsZWFzZVxuICAgICAqIHVwZ3JhZGUgaWYgeW91IGFyZSBleHBlcmllbmNpbmcgaXNzdWVzLlxuICAgICAqL1xuICAgIG1lcmdlKG1lcmdpbmcpIHtcbiAgICAgICAgY29uc3QgbWVyZ2VkID0gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgICAgICAgICAgY2F0Y2hhbGw6IG1lcmdpbmcuX2RlZi5jYXRjaGFsbCxcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLm1lcmdpbmcuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtZXJnZWQ7XG4gICAgfVxuICAgIC8vIG1lcmdlPFxuICAgIC8vICAgSW5jb21pbmcgZXh0ZW5kcyBBbnlab2RPYmplY3QsXG4gICAgLy8gICBBdWdtZW50YXRpb24gZXh0ZW5kcyBJbmNvbWluZ1tcInNoYXBlXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0IGV4dGVuZHMge1xuICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfb3V0cHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgT3V0cHV0XG4gICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgIC8vICAgfSxcbiAgICAvLyAgIE5ld0lucHV0IGV4dGVuZHMge1xuICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9pbnB1dFwiXVxuICAgIC8vICAgICAgIDogayBleHRlbmRzIGtleW9mIElucHV0XG4gICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9XG4gICAgLy8gPihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogWm9kT2JqZWN0PFxuICAgIC8vICAgZXh0ZW5kU2hhcGU8VCwgUmV0dXJuVHlwZTxJbmNvbWluZ1tcIl9kZWZcIl1bXCJzaGFwZVwiXT4+LFxuICAgIC8vICAgSW5jb21pbmdbXCJfZGVmXCJdW1widW5rbm93bktleXNcIl0sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJjYXRjaGFsbFwiXSxcbiAgICAvLyAgIE5ld091dHB1dCxcbiAgICAvLyAgIE5ld0lucHV0XG4gICAgLy8gPiB7XG4gICAgLy8gICBjb25zdCBtZXJnZWQ6IGFueSA9IG5ldyBab2RPYmplY3Qoe1xuICAgIC8vICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgIC8vICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgIC8vICAgICBzaGFwZTogKCkgPT5cbiAgICAvLyAgICAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKHRoaXMuX2RlZi5zaGFwZSgpLCBtZXJnaW5nLl9kZWYuc2hhcGUoKSksXG4gICAgLy8gICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgIC8vICAgfSkgYXMgYW55O1xuICAgIC8vICAgcmV0dXJuIG1lcmdlZDtcbiAgICAvLyB9XG4gICAgc2V0S2V5KGtleSwgc2NoZW1hKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF1Z21lbnQoeyBba2V5XTogc2NoZW1hIH0pO1xuICAgIH1cbiAgICAvLyBtZXJnZTxJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdD4oXG4gICAgLy8gICBtZXJnaW5nOiBJbmNvbWluZ1xuICAgIC8vICk6IC8vWm9kT2JqZWN0PFQgJiBJbmNvbWluZ1tcIl9zaGFwZVwiXSwgVW5rbm93bktleXMsIENhdGNoYWxsPiA9IChtZXJnaW5nKSA9PiB7XG4gICAgLy8gWm9kT2JqZWN0PFxuICAgIC8vICAgZXh0ZW5kU2hhcGU8VCwgUmV0dXJuVHlwZTxJbmNvbWluZ1tcIl9kZWZcIl1bXCJzaGFwZVwiXT4+LFxuICAgIC8vICAgSW5jb21pbmdbXCJfZGVmXCJdW1widW5rbm93bktleXNcIl0sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJjYXRjaGFsbFwiXVxuICAgIC8vID4ge1xuICAgIC8vICAgLy8gY29uc3QgbWVyZ2VkU2hhcGUgPSBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKFxuICAgIC8vICAgLy8gICB0aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAvLyAgIC8vICAgbWVyZ2luZy5fZGVmLnNoYXBlKClcbiAgICAvLyAgIC8vICk7XG4gICAgLy8gICBjb25zdCBtZXJnZWQ6IGFueSA9IG5ldyBab2RPYmplY3Qoe1xuICAgIC8vICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgIC8vICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgIC8vICAgICBzaGFwZTogKCkgPT5cbiAgICAvLyAgICAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKHRoaXMuX2RlZi5zaGFwZSgpLCBtZXJnaW5nLl9kZWYuc2hhcGUoKSksXG4gICAgLy8gICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgIC8vICAgfSkgYXMgYW55O1xuICAgIC8vICAgcmV0dXJuIG1lcmdlZDtcbiAgICAvLyB9XG4gICAgY2F0Y2hhbGwoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2F0Y2hhbGw6IGluZGV4LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcGljayhtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHV0aWwub2JqZWN0S2V5cyhtYXNrKSkge1xuICAgICAgICAgICAgaWYgKG1hc2tba2V5XSAmJiB0aGlzLnNoYXBlW2tleV0pIHtcbiAgICAgICAgICAgICAgICBzaGFwZVtrZXldID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9taXQobWFzaykge1xuICAgICAgICBjb25zdCBzaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGlmICghbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgc2hhcGVba2V5XSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIGRlZXBQYXJ0aWFsKCkge1xuICAgICAgICByZXR1cm4gZGVlcFBhcnRpYWxpZnkodGhpcyk7XG4gICAgfVxuICAgIHBhcnRpYWwobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgaWYgKG1hc2sgJiYgIW1hc2tba2V5XSkge1xuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSBmaWVsZFNjaGVtYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSBmaWVsZFNjaGVtYS5vcHRpb25hbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlcXVpcmVkKG1hc2spIHtcbiAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdXRpbC5vYmplY3RLZXlzKHRoaXMuc2hhcGUpKSB7XG4gICAgICAgICAgICBpZiAobWFzayAmJiAhbWFza1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkU2NoZW1hID0gdGhpcy5zaGFwZVtrZXldO1xuICAgICAgICAgICAgICAgIGxldCBuZXdGaWVsZCA9IGZpZWxkU2NoZW1hO1xuICAgICAgICAgICAgICAgIHdoaWxlIChuZXdGaWVsZCBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0ZpZWxkID0gbmV3RmllbGQuX2RlZi5pbm5lclR5cGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSBuZXdGaWVsZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBrZXlvZigpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVpvZEVudW0odXRpbC5vYmplY3RLZXlzKHRoaXMuc2hhcGUpKTtcbiAgICB9XG59XG5ab2RPYmplY3QuY3JlYXRlID0gKHNoYXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgdW5rbm93bktleXM6IFwic3RyaXBcIixcbiAgICAgICAgY2F0Y2hhbGw6IFpvZE5ldmVyLmNyZWF0ZSgpLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcblpvZE9iamVjdC5zdHJpY3RDcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpY3RcIixcbiAgICAgICAgY2F0Y2hhbGw6IFpvZE5ldmVyLmNyZWF0ZSgpLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcblpvZE9iamVjdC5sYXp5Y3JlYXRlID0gKHNoYXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFVuaW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5fZGVmLm9wdGlvbnM7XG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVJlc3VsdHMocmVzdWx0cykge1xuICAgICAgICAgICAgLy8gcmV0dXJuIGZpcnN0IGlzc3VlLWZyZWUgdmFsaWRhdGlvbiBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlc3VsdCBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5yZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGlzc3VlcyBmcm9tIGRpcnR5IG9wdGlvblxuICAgICAgICAgICAgICAgICAgICBjdHguY29tbW9uLmlzc3Vlcy5wdXNoKC4uLnJlc3VsdC5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHJldHVybiBpbnZhbGlkXG4gICAgICAgICAgICBjb25zdCB1bmlvbkVycm9ycyA9IHJlc3VsdHMubWFwKChyZXN1bHQpID0+IG5ldyBab2RFcnJvcihyZXN1bHQuY3R4LmNvbW1vbi5pc3N1ZXMpKTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uLFxuICAgICAgICAgICAgICAgIHVuaW9uRXJyb3JzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKG9wdGlvbnMubWFwKGFzeW5jIChvcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGF3YWl0IG9wdGlvbi5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGN0eDogY2hpbGRDdHgsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKS50aGVuKGhhbmRsZVJlc3VsdHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IGRpcnR5ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3QgaXNzdWVzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRDdHggPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmN0eCxcbiAgICAgICAgICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jdHguY29tbW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNzdWVzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb3B0aW9uLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY2hpbGRDdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIgJiYgIWRpcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGRpcnR5ID0geyByZXN1bHQsIGN0eDogY2hpbGRDdHggfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkQ3R4LmNvbW1vbi5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzc3Vlcy5wdXNoKGNoaWxkQ3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaXJ0eSkge1xuICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4uZGlydHkuY3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkaXJ0eS5yZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1bmlvbkVycm9ycyA9IGlzc3Vlcy5tYXAoKGlzc3VlcykgPT4gbmV3IFpvZEVycm9yKGlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm9wdGlvbnM7XG4gICAgfVxufVxuWm9kVW5pb24uY3JlYXRlID0gKHR5cGVzLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFVuaW9uKHtcbiAgICAgICAgb3B0aW9uczogdHlwZXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5pb24sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgWm9kRGlzY3JpbWluYXRlZFVuaW9uICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuY29uc3QgZ2V0RGlzY3JpbWluYXRvciA9ICh0eXBlKSA9PiB7XG4gICAgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RMYXp5KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuc2NoZW1hKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVmZmVjdHMpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5pbm5lclR5cGUoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RMaXRlcmFsKSB7XG4gICAgICAgIHJldHVybiBbdHlwZS52YWx1ZV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RFbnVtKSB7XG4gICAgICAgIHJldHVybiB0eXBlLm9wdGlvbnM7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROYXRpdmVFbnVtKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBiYW4vYmFuXG4gICAgICAgIHJldHVybiB1dGlsLm9iamVjdFZhbHVlcyh0eXBlLmVudW0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRGVmYXVsdCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZFVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gW3VuZGVmaW5lZF07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROdWxsKSB7XG4gICAgICAgIHJldHVybiBbbnVsbF07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RPcHRpb25hbCkge1xuICAgICAgICByZXR1cm4gW3VuZGVmaW5lZCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2ROdWxsYWJsZSkge1xuICAgICAgICByZXR1cm4gW251bGwsIC4uLmdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSldO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kQnJhbmRlZCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZFJlYWRvbmx5KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kQ2F0Y2gpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5fZGVmLmlubmVyVHlwZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxufTtcbmV4cG9ydCBjbGFzcyBab2REaXNjcmltaW5hdGVkVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5vYmplY3QpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUub2JqZWN0LFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGlzY3JpbWluYXRvciA9IHRoaXMuZGlzY3JpbWluYXRvcjtcbiAgICAgICAgY29uc3QgZGlzY3JpbWluYXRvclZhbHVlID0gY3R4LmRhdGFbZGlzY3JpbWluYXRvcl07XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IHRoaXMub3B0aW9uc01hcC5nZXQoZGlzY3JpbWluYXRvclZhbHVlKTtcbiAgICAgICAgaWYgKCFvcHRpb24pIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3VuaW9uX2Rpc2NyaW1pbmF0b3IsXG4gICAgICAgICAgICAgICAgb3B0aW9uczogQXJyYXkuZnJvbSh0aGlzLm9wdGlvbnNNYXAua2V5cygpKSxcbiAgICAgICAgICAgICAgICBwYXRoOiBbZGlzY3JpbWluYXRvcl0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBkaXNjcmltaW5hdG9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmRpc2NyaW1pbmF0b3I7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm9wdGlvbnM7XG4gICAgfVxuICAgIGdldCBvcHRpb25zTWFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLm9wdGlvbnNNYXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgZGlzY3JpbWluYXRlZCB1bmlvbiBzY2hlbWEuIEl0cyBiZWhhdmlvdXIgaXMgdmVyeSBzaW1pbGFyIHRvIHRoYXQgb2YgdGhlIG5vcm1hbCB6LnVuaW9uKCkgY29uc3RydWN0b3IuXG4gICAgICogSG93ZXZlciwgaXQgb25seSBhbGxvd3MgYSB1bmlvbiBvZiBvYmplY3RzLCBhbGwgb2Ygd2hpY2ggbmVlZCB0byBzaGFyZSBhIGRpc2NyaW1pbmF0b3IgcHJvcGVydHkuIFRoaXMgcHJvcGVydHkgbXVzdFxuICAgICAqIGhhdmUgYSBkaWZmZXJlbnQgdmFsdWUgZm9yIGVhY2ggb2JqZWN0IGluIHRoZSB1bmlvbi5cbiAgICAgKiBAcGFyYW0gZGlzY3JpbWluYXRvciB0aGUgbmFtZSBvZiB0aGUgZGlzY3JpbWluYXRvciBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSB0eXBlcyBhbiBhcnJheSBvZiBvYmplY3Qgc2NoZW1hc1xuICAgICAqIEBwYXJhbSBwYXJhbXNcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGRpc2NyaW1pbmF0b3IsIG9wdGlvbnMsIHBhcmFtcykge1xuICAgICAgICAvLyBHZXQgYWxsIHRoZSB2YWxpZCBkaXNjcmltaW5hdG9yIHZhbHVlc1xuICAgICAgICBjb25zdCBvcHRpb25zTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAvLyB0cnkge1xuICAgICAgICBmb3IgKGNvbnN0IHR5cGUgb2Ygb3B0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgZGlzY3JpbWluYXRvclZhbHVlcyA9IGdldERpc2NyaW1pbmF0b3IodHlwZS5zaGFwZVtkaXNjcmltaW5hdG9yXSk7XG4gICAgICAgICAgICBpZiAoIWRpc2NyaW1pbmF0b3JWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBIGRpc2NyaW1pbmF0b3IgdmFsdWUgZm9yIGtleSBcXGAke2Rpc2NyaW1pbmF0b3J9XFxgIGNvdWxkIG5vdCBiZSBleHRyYWN0ZWQgZnJvbSBhbGwgc2NoZW1hIG9wdGlvbnNgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgZGlzY3JpbWluYXRvclZhbHVlcykge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zTWFwLmhhcyh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEaXNjcmltaW5hdG9yIHByb3BlcnR5ICR7U3RyaW5nKGRpc2NyaW1pbmF0b3IpfSBoYXMgZHVwbGljYXRlIHZhbHVlICR7U3RyaW5nKHZhbHVlKX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3B0aW9uc01hcC5zZXQodmFsdWUsIHR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kRGlzY3JpbWluYXRlZFVuaW9uKHtcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGlzY3JpbWluYXRlZFVuaW9uLFxuICAgICAgICAgICAgZGlzY3JpbWluYXRvcixcbiAgICAgICAgICAgIG9wdGlvbnMsXG4gICAgICAgICAgICBvcHRpb25zTWFwLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5mdW5jdGlvbiBtZXJnZVZhbHVlcyhhLCBiKSB7XG4gICAgY29uc3QgYVR5cGUgPSBnZXRQYXJzZWRUeXBlKGEpO1xuICAgIGNvbnN0IGJUeXBlID0gZ2V0UGFyc2VkVHlwZShiKTtcbiAgICBpZiAoYSA9PT0gYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5vYmplY3QgJiYgYlR5cGUgPT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgIGNvbnN0IGJLZXlzID0gdXRpbC5vYmplY3RLZXlzKGIpO1xuICAgICAgICBjb25zdCBzaGFyZWRLZXlzID0gdXRpbC5vYmplY3RLZXlzKGEpLmZpbHRlcigoa2V5KSA9PiBiS2V5cy5pbmRleE9mKGtleSkgIT09IC0xKTtcbiAgICAgICAgY29uc3QgbmV3T2JqID0geyAuLi5hLCAuLi5iIH07XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHNoYXJlZEtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlZFZhbHVlID0gbWVyZ2VWYWx1ZXMoYVtrZXldLCBiW2tleV0pO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3T2JqW2tleV0gPSBzaGFyZWRWYWx1ZS5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiB0cnVlLCBkYXRhOiBuZXdPYmogfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuYXJyYXkgJiYgYlR5cGUgPT09IFpvZFBhcnNlZFR5cGUuYXJyYXkpIHtcbiAgICAgICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmV3QXJyYXkgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGEubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtQSA9IGFbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3QgaXRlbUIgPSBiW2luZGV4XTtcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlZFZhbHVlID0gbWVyZ2VWYWx1ZXMoaXRlbUEsIGl0ZW1CKTtcbiAgICAgICAgICAgIGlmICghc2hhcmVkVmFsdWUudmFsaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5ld0FycmF5LnB1c2goc2hhcmVkVmFsdWUuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld0FycmF5IH07XG4gICAgfVxuICAgIGVsc2UgaWYgKGFUeXBlID09PSBab2RQYXJzZWRUeXBlLmRhdGUgJiYgYlR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJiArYSA9PT0gK2IpIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IGEgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBab2RJbnRlcnNlY3Rpb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgaGFuZGxlUGFyc2VkID0gKHBhcnNlZExlZnQsIHBhcnNlZFJpZ2h0KSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNBYm9ydGVkKHBhcnNlZExlZnQpIHx8IGlzQWJvcnRlZChwYXJzZWRSaWdodCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IG1lcmdlVmFsdWVzKHBhcnNlZExlZnQudmFsdWUsIHBhcnNlZFJpZ2h0LnZhbHVlKTtcbiAgICAgICAgICAgIGlmICghbWVyZ2VkLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2ludGVyc2VjdGlvbl90eXBlcyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0RpcnR5KHBhcnNlZExlZnQpIHx8IGlzRGlydHkocGFyc2VkUmlnaHQpKSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IG1lcmdlZC5kYXRhIH07XG4gICAgICAgIH07XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgIHRoaXMuX2RlZi5sZWZ0Ll9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWYucmlnaHQuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSkudGhlbigoW2xlZnQsIHJpZ2h0XSkgPT4gaGFuZGxlUGFyc2VkKGxlZnQsIHJpZ2h0KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlUGFyc2VkKHRoaXMuX2RlZi5sZWZ0Ll9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgfSksIHRoaXMuX2RlZi5yaWdodC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZEludGVyc2VjdGlvbi5jcmVhdGUgPSAobGVmdCwgcmlnaHQsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kSW50ZXJzZWN0aW9uKHtcbiAgICAgICAgbGVmdDogbGVmdCxcbiAgICAgICAgcmlnaHQ6IHJpZ2h0LFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEludGVyc2VjdGlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vIHR5cGUgWm9kVHVwbGVJdGVtcyA9IFtab2RUeXBlQW55LCAuLi5ab2RUeXBlQW55W11dO1xuZXhwb3J0IGNsYXNzIFpvZFR1cGxlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5hcnJheSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguZGF0YS5sZW5ndGggPCB0aGlzLl9kZWYuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgIG1pbmltdW06IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3QgPSB0aGlzLl9kZWYucmVzdDtcbiAgICAgICAgaWYgKCFyZXN0ICYmIGN0eC5kYXRhLmxlbmd0aCA+IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgIG1heGltdW06IHRoaXMuX2RlZi5pdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gWy4uLmN0eC5kYXRhXVxuICAgICAgICAgICAgLm1hcCgoaXRlbSwgaXRlbUluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzY2hlbWEgPSB0aGlzLl9kZWYuaXRlbXNbaXRlbUluZGV4XSB8fCB0aGlzLl9kZWYucmVzdDtcbiAgICAgICAgICAgIGlmICghc2NoZW1hKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHNjaGVtYS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpdGVtSW5kZXgpKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoKHgpID0+ICEheCk7IC8vIGZpbHRlciBudWxsc1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGl0ZW1zKS50aGVuKChyZXN1bHRzKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHRzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCBpdGVtcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGl0ZW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLml0ZW1zO1xuICAgIH1cbiAgICByZXN0KHJlc3QpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RUdXBsZSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICByZXN0LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5ab2RUdXBsZS5jcmVhdGUgPSAoc2NoZW1hcywgcGFyYW1zKSA9PiB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHNjaGVtYXMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBtdXN0IHBhc3MgYW4gYXJyYXkgb2Ygc2NoZW1hcyB0byB6LnR1cGxlKFsgLi4uIF0pXCIpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFpvZFR1cGxlKHtcbiAgICAgICAgaXRlbXM6IHNjaGVtYXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVHVwbGUsXG4gICAgICAgIHJlc3Q6IG51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kUmVjb3JkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IGtleVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBrZXksIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgY3R4LmRhdGFba2V5XSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIGFsd2F5c1NldDoga2V5IGluIGN0eC5kYXRhLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdEFzeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoZmlyc3QsIHNlY29uZCwgdGhpcmQpIHtcbiAgICAgICAgaWYgKHNlY29uZCBpbnN0YW5jZW9mIFpvZFR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWm9kUmVjb3JkKHtcbiAgICAgICAgICAgICAgICBrZXlUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgICAgICB2YWx1ZVR5cGU6IHNlY29uZCxcbiAgICAgICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlY29yZCxcbiAgICAgICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXJkKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kUmVjb3JkKHtcbiAgICAgICAgICAgIGtleVR5cGU6IFpvZFN0cmluZy5jcmVhdGUoKSxcbiAgICAgICAgICAgIHZhbHVlVHlwZTogZmlyc3QsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlY29yZCxcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMoc2Vjb25kKSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZE1hcCBleHRlbmRzIFpvZFR5cGUge1xuICAgIGdldCBrZXlTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYua2V5VHlwZTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlU2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5tYXApIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubWFwLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qga2V5VHlwZSA9IHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgICAgICBjb25zdCB2YWx1ZVR5cGUgPSB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgICAgICBjb25zdCBwYWlycyA9IFsuLi5jdHguZGF0YS5lbnRyaWVzKCldLm1hcCgoW2tleSwgdmFsdWVdLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBrZXk6IGtleVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBrZXksIGN0eC5wYXRoLCBbaW5kZXgsIFwia2V5XCJdKSksXG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlVHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIHZhbHVlLCBjdHgucGF0aCwgW2luZGV4LCBcInZhbHVlXCJdKSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBhd2FpdCBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBwYWlyLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImFib3J0ZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiZGlydHlcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmluYWxNYXAuc2V0KGtleS52YWx1ZSwgdmFsdWUudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGZpbmFsTWFwIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsTWFwID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYWlyLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGZpbmFsTWFwIH07XG4gICAgICAgIH1cbiAgICB9XG59XG5ab2RNYXAuY3JlYXRlID0gKGtleVR5cGUsIHZhbHVlVHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RNYXAoe1xuICAgICAgICB2YWx1ZVR5cGUsXG4gICAgICAgIGtleVR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTWFwLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFNldCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc2V0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnNldCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRlZiA9IHRoaXMuX2RlZjtcbiAgICAgICAgaWYgKGRlZi5taW5TaXplICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEuc2l6ZSA8IGRlZi5taW5TaXplLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGRlZi5taW5TaXplLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNldFwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1pblNpemUubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLm1heFNpemUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChjdHguZGF0YS5zaXplID4gZGVmLm1heFNpemUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgIG1heGltdW06IGRlZi5tYXhTaXplLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNldFwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1heFNpemUubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2YWx1ZVR5cGUgPSB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgICAgICBmdW5jdGlvbiBmaW5hbGl6ZVNldChlbGVtZW50cykge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkU2V0ID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIHBhcnNlZFNldC5hZGQoZWxlbWVudC52YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IHBhcnNlZFNldCB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gWy4uLmN0eC5kYXRhLnZhbHVlcygpXS5tYXAoKGl0ZW0sIGkpID0+IHZhbHVlVHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSkpO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGVsZW1lbnRzKS50aGVuKChlbGVtZW50cykgPT4gZmluYWxpemVTZXQoZWxlbWVudHMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmaW5hbGl6ZVNldChlbGVtZW50cyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWluKG1pblNpemUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTZXQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWluU2l6ZTogeyB2YWx1ZTogbWluU2l6ZSwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4U2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFNldCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBtYXhTaXplOiB7IHZhbHVlOiBtYXhTaXplLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNpemUoc2l6ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oc2l6ZSwgbWVzc2FnZSkubWF4KHNpemUsIG1lc3NhZ2UpO1xuICAgIH1cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBtZXNzYWdlKTtcbiAgICB9XG59XG5ab2RTZXQuY3JlYXRlID0gKHZhbHVlVHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RTZXQoe1xuICAgICAgICB2YWx1ZVR5cGUsXG4gICAgICAgIG1pblNpemU6IG51bGwsXG4gICAgICAgIG1heFNpemU6IG51bGwsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kU2V0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZEZ1bmN0aW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMudmFsaWRhdGUgPSB0aGlzLmltcGxlbWVudDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuZnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuZnVuY3Rpb24sXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlQXJnc0lzc3VlKGFyZ3MsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBhcmdzLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW2N0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLCBjdHguc2NoZW1hRXJyb3JNYXAsIGdldEVycm9yTWFwKCksIGRlZmF1bHRFcnJvck1hcF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9hcmd1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c0Vycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbWFrZVJldHVybnNJc3N1ZShyZXR1cm5zLCBlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VJc3N1ZSh7XG4gICAgICAgICAgICAgICAgZGF0YTogcmV0dXJucyxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBlcnJvck1hcHM6IFtjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCwgY3R4LnNjaGVtYUVycm9yTWFwLCBnZXRFcnJvck1hcCgpLCBkZWZhdWx0RXJyb3JNYXBdLmZpbHRlcigoeCkgPT4gISF4KSxcbiAgICAgICAgICAgICAgICBpc3N1ZURhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfcmV0dXJuX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblR5cGVFcnJvcjogZXJyb3IsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHsgZXJyb3JNYXA6IGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwIH07XG4gICAgICAgIGNvbnN0IGZuID0gY3R4LmRhdGE7XG4gICAgICAgIGlmICh0aGlzLl9kZWYucmV0dXJucyBpbnN0YW5jZW9mIFpvZFByb21pc2UpIHtcbiAgICAgICAgICAgIC8vIFdvdWxkIGxvdmUgYSB3YXkgdG8gYXZvaWQgZGlzYWJsaW5nIHRoaXMgcnVsZSwgYnV0IHdlIG5lZWRcbiAgICAgICAgICAgIC8vIGFuIGFsaWFzICh1c2luZyBhbiBhcnJvdyBmdW5jdGlvbiB3YXMgd2hhdCBjYXVzZWQgMjY1MSkuXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXNcbiAgICAgICAgICAgIGNvbnN0IG1lID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBPSyhhc3luYyBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gbmV3IFpvZEVycm9yKFtdKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRBcmdzID0gYXdhaXQgbWUuX2RlZi5hcmdzLnBhcnNlQXN5bmMoYXJncywgcGFyYW1zKS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5hZGRJc3N1ZShtYWtlQXJnc0lzc3VlKGFyZ3MsIGUpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUmVmbGVjdC5hcHBseShmbiwgdGhpcywgcGFyc2VkQXJncyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkUmV0dXJucyA9IGF3YWl0IG1lLl9kZWYucmV0dXJucy5fZGVmLnR5cGVcbiAgICAgICAgICAgICAgICAgICAgLnBhcnNlQXN5bmMocmVzdWx0LCBwYXJhbXMpXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlcnJvci5hZGRJc3N1ZShtYWtlUmV0dXJuc0lzc3VlKHJlc3VsdCwgZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkUmV0dXJucztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkQXJncyA9IG1lLl9kZWYuYXJncy5zYWZlUGFyc2UoYXJncywgcGFyYW1zKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZEFyZ3Muc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgWm9kRXJyb3IoW21ha2VBcmdzSXNzdWUoYXJncywgcGFyc2VkQXJncy5lcnJvcildKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gUmVmbGVjdC5hcHBseShmbiwgdGhpcywgcGFyc2VkQXJncy5kYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWRSZXR1cm5zID0gbWUuX2RlZi5yZXR1cm5zLnNhZmVQYXJzZShyZXN1bHQsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgaWYgKCFwYXJzZWRSZXR1cm5zLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFpvZEVycm9yKFttYWtlUmV0dXJuc0lzc3VlKHJlc3VsdCwgcGFyc2VkUmV0dXJucy5lcnJvcildKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZFJldHVybnMuZGF0YTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHBhcmFtZXRlcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuYXJncztcbiAgICB9XG4gICAgcmV0dXJuVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5yZXR1cm5zO1xuICAgIH1cbiAgICBhcmdzKC4uLml0ZW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgYXJnczogWm9kVHVwbGUuY3JlYXRlKGl0ZW1zKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJucyhyZXR1cm5UeXBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRnVuY3Rpb24oe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgcmV0dXJuczogcmV0dXJuVHlwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGltcGxlbWVudChmdW5jKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRlZEZ1bmMgPSB0aGlzLnBhcnNlKGZ1bmMpO1xuICAgICAgICByZXR1cm4gdmFsaWRhdGVkRnVuYztcbiAgICB9XG4gICAgc3RyaWN0SW1wbGVtZW50KGZ1bmMpIHtcbiAgICAgICAgY29uc3QgdmFsaWRhdGVkRnVuYyA9IHRoaXMucGFyc2UoZnVuYyk7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZWRGdW5jO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKGFyZ3MsIHJldHVybnMsIHBhcmFtcykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEZ1bmN0aW9uKHtcbiAgICAgICAgICAgIGFyZ3M6IChhcmdzID8gYXJncyA6IFpvZFR1cGxlLmNyZWF0ZShbXSkucmVzdChab2RVbmtub3duLmNyZWF0ZSgpKSksXG4gICAgICAgICAgICByZXR1cm5zOiByZXR1cm5zIHx8IFpvZFVua25vd24uY3JlYXRlKCksXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEZ1bmN0aW9uLFxuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kTGF6eSBleHRlbmRzIFpvZFR5cGUge1xuICAgIGdldCBzY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuZ2V0dGVyKCk7XG4gICAgfVxuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgbGF6eVNjaGVtYSA9IHRoaXMuX2RlZi5nZXR0ZXIoKTtcbiAgICAgICAgcmV0dXJuIGxhenlTY2hlbWEuX3BhcnNlKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICB9XG59XG5ab2RMYXp5LmNyZWF0ZSA9IChnZXR0ZXIsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTGF6eSh7XG4gICAgICAgIGdldHRlcjogZ2V0dGVyLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZExhenksXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kTGl0ZXJhbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQuZGF0YSAhPT0gdGhpcy5fZGVmLnZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfbGl0ZXJhbCxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdGhpcy5fZGVmLnZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlO1xuICAgIH1cbn1cblpvZExpdGVyYWwuY3JlYXRlID0gKHZhbHVlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZExpdGVyYWwoe1xuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGl0ZXJhbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmZ1bmN0aW9uIGNyZWF0ZVpvZEVudW0odmFsdWVzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IFpvZEVudW0oe1xuICAgICAgICB2YWx1ZXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuZXhwb3J0IGNsYXNzIFpvZEVudW0gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dC5kYXRhICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBuZXcgU2V0KHRoaXMuX2RlZi52YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGUuaGFzKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBleHBlY3RlZFZhbHVlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBnZXQgb3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgZW51bVZhbHVlcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHZhbCBvZiB0aGlzLl9kZWYudmFsdWVzKSB7XG4gICAgICAgICAgICBlbnVtVmFsdWVzW3ZhbF0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVudW1WYWx1ZXM7XG4gICAgfVxuICAgIGdldCBFbnVtKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZXh0cmFjdCh2YWx1ZXMsIG5ld0RlZiA9IHRoaXMuX2RlZikge1xuICAgICAgICByZXR1cm4gWm9kRW51bS5jcmVhdGUodmFsdWVzLCB7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICAuLi5uZXdEZWYsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBleGNsdWRlKHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh0aGlzLm9wdGlvbnMuZmlsdGVyKChvcHQpID0+ICF2YWx1ZXMuaW5jbHVkZXMob3B0KSksIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxufVxuWm9kRW51bS5jcmVhdGUgPSBjcmVhdGVab2RFbnVtO1xuZXhwb3J0IGNsYXNzIFpvZE5hdGl2ZUVudW0gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgbmF0aXZlRW51bVZhbHVlcyA9IHV0aWwuZ2V0VmFsaWRFbnVtVmFsdWVzKHRoaXMuX2RlZi52YWx1ZXMpO1xuICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgIGlmIChjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zdHJpbmcgJiYgY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUubnVtYmVyKSB7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHV0aWwub2JqZWN0VmFsdWVzKG5hdGl2ZUVudW1WYWx1ZXMpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IHV0aWwuam9pblZhbHVlcyhleHBlY3RlZFZhbHVlcyksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGUpIHtcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlID0gbmV3IFNldCh1dGlsLmdldFZhbGlkRW51bVZhbHVlcyh0aGlzLl9kZWYudmFsdWVzKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9jYWNoZS5oYXMoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBleHBlY3RlZFZhbHVlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBnZXQgZW51bSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgfVxufVxuWm9kTmF0aXZlRW51bS5jcmVhdGUgPSAodmFsdWVzLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE5hdGl2ZUVudW0oe1xuICAgICAgICB2YWx1ZXM6IHZhbHVlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROYXRpdmVFbnVtLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZFByb21pc2UgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUucHJvbWlzZSAmJiBjdHguY29tbW9uLmFzeW5jID09PSBmYWxzZSkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5wcm9taXNlLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvbWlzaWZpZWQgPSBjdHgucGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5wcm9taXNlID8gY3R4LmRhdGEgOiBQcm9taXNlLnJlc29sdmUoY3R4LmRhdGEpO1xuICAgICAgICByZXR1cm4gT0socHJvbWlzaWZpZWQudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlLnBhcnNlQXN5bmMoZGF0YSwge1xuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwOiBjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuWm9kUHJvbWlzZS5jcmVhdGUgPSAoc2NoZW1hLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFByb21pc2Uoe1xuICAgICAgICB0eXBlOiBzY2hlbWEsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUHJvbWlzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmV4cG9ydCBjbGFzcyBab2RFZmZlY3RzIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgaW5uZXJUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYTtcbiAgICB9XG4gICAgc291cmNlVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zY2hlbWEuX2RlZi50eXBlTmFtZSA9PT0gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHNcbiAgICAgICAgICAgID8gdGhpcy5fZGVmLnNjaGVtYS5zb3VyY2VUeXBlKClcbiAgICAgICAgICAgIDogdGhpcy5fZGVmLnNjaGVtYTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IGVmZmVjdCA9IHRoaXMuX2RlZi5lZmZlY3QgfHwgbnVsbDtcbiAgICAgICAgY29uc3QgY2hlY2tDdHggPSB7XG4gICAgICAgICAgICBhZGRJc3N1ZTogKGFyZykgPT4ge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwgYXJnKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJnLmZhdGFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5hYm9ydCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldCBwYXRoKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdHgucGF0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICAgIGNoZWNrQ3R4LmFkZElzc3VlID0gY2hlY2tDdHguYWRkSXNzdWUuYmluZChjaGVja0N0eCk7XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJwcmVwcm9jZXNzXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZCA9IGVmZmVjdC50cmFuc2Zvcm0oY3R4LmRhdGEsIGNoZWNrQ3R4KTtcbiAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwcm9jZXNzZWQpLnRoZW4oYXN5bmMgKHByb2Nlc3NlZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzLnZhbHVlID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzLnZhbHVlID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBwcm9jZXNzZWQsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZWZmZWN0LnR5cGUgPT09IFwicmVmaW5lbWVudFwiKSB7XG4gICAgICAgICAgICBjb25zdCBleGVjdXRlUmVmaW5lbWVudCA9IChhY2MpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBlZmZlY3QucmVmaW5lbWVudChhY2MsIGNoZWNrQ3R4KTtcbiAgICAgICAgICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFzeW5jIHJlZmluZW1lbnQgZW5jb3VudGVyZWQgZHVyaW5nIHN5bmNocm9ub3VzIHBhcnNlIG9wZXJhdGlvbi4gVXNlIC5wYXJzZUFzeW5jIGluc3RlYWQuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlubmVyID0gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gdmFsdWUgaXMgaWdub3JlZFxuICAgICAgICAgICAgICAgIGV4ZWN1dGVSZWZpbmVtZW50KGlubmVyLnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlubmVyLnZhbHVlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VBc3luYyh7IGRhdGE6IGN0eC5kYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSkudGhlbigoaW5uZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVyLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBleGVjdXRlUmVmaW5lbWVudChpbm5lci52YWx1ZSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlubmVyLnZhbHVlIH07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJ0cmFuc2Zvcm1cIikge1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZSA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkKGJhc2UpKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBlZmZlY3QudHJhbnNmb3JtKGJhc2UudmFsdWUsIGNoZWNrQ3R4KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFzeW5jaHJvbm91cyB0cmFuc2Zvcm0gZW5jb3VudGVyZWQgZHVyaW5nIHN5bmNocm9ub3VzIHBhcnNlIG9wZXJhdGlvbi4gVXNlIC5wYXJzZUFzeW5jIGluc3RlYWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogcmVzdWx0IH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fcGFyc2VBc3luYyh7IGRhdGE6IGN0eC5kYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSkudGhlbigoYmFzZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShlZmZlY3QudHJhbnNmb3JtKGJhc2UudmFsdWUsIGNoZWNrQ3R4KSkudGhlbigocmVzdWx0KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdXRpbC5hc3NlcnROZXZlcihlZmZlY3QpO1xuICAgIH1cbn1cblpvZEVmZmVjdHMuY3JlYXRlID0gKHNjaGVtYSwgZWZmZWN0LCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgICAgICBzY2hlbWEsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgZWZmZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kRWZmZWN0cy5jcmVhdGVXaXRoUHJlcHJvY2VzcyA9IChwcmVwcm9jZXNzLCBzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgZWZmZWN0OiB7IHR5cGU6IFwicHJlcHJvY2Vzc1wiLCB0cmFuc2Zvcm06IHByZXByb2Nlc3MgfSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IHsgWm9kRWZmZWN0cyBhcyBab2RUcmFuc2Zvcm1lciB9O1xuZXhwb3J0IGNsYXNzIFpvZE9wdGlvbmFsIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gT0sodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2UoaW5wdXQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZE9wdGlvbmFsLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9wdGlvbmFsKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9wdGlvbmFsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE51bGxhYmxlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUubnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIE9LKG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kTnVsbGFibGUuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTnVsbGFibGUoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTnVsbGFibGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kRGVmYXVsdCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgbGV0IGRhdGEgPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGF0YSA9IHRoaXMuX2RlZi5kZWZhdWx0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW1vdmVEZWZhdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2REZWZhdWx0LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGVmYXVsdCxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiB0eXBlb2YgcGFyYW1zLmRlZmF1bHQgPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcy5kZWZhdWx0IDogKCkgPT4gcGFyYW1zLmRlZmF1bHQsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgWm9kQ2F0Y2ggZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIC8vIG5ld0N0eCBpcyB1c2VkIHRvIG5vdCBjb2xsZWN0IGlzc3VlcyBmcm9tIGlubmVyIHR5cGVzIGluIGN0eFxuICAgICAgICBjb25zdCBuZXdDdHggPSB7XG4gICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAuLi5jdHguY29tbW9uLFxuICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhOiBuZXdDdHguZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IG5ld0N0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiB7XG4gICAgICAgICAgICAgICAgLi4ubmV3Q3R4LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBcInZhbGlkXCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXN1bHQuc3RhdHVzID09PSBcInZhbGlkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcmVzdWx0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX2RlZi5jYXRjaFZhbHVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgWm9kRXJyb3IobmV3Q3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IG5ld0N0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwidmFsaWRcIixcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiXG4gICAgICAgICAgICAgICAgICAgID8gcmVzdWx0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5fZGVmLmNhdGNoVmFsdWUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0IGVycm9yKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgWm9kRXJyb3IobmV3Q3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBuZXdDdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZUNhdGNoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2RDYXRjaC5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RDYXRjaCh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RDYXRjaCxcbiAgICAgICAgY2F0Y2hWYWx1ZTogdHlwZW9mIHBhcmFtcy5jYXRjaCA9PT0gXCJmdW5jdGlvblwiID8gcGFyYW1zLmNhdGNoIDogKCkgPT4gcGFyYW1zLmNhdGNoLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuZXhwb3J0IGNsYXNzIFpvZE5hTiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm5hbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5uYW4sXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG59XG5ab2ROYU4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmFOKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROYU4sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5leHBvcnQgY29uc3QgQlJBTkQgPSBTeW1ib2woXCJ6b2RfYnJhbmRcIik7XG5leHBvcnQgY2xhc3MgWm9kQnJhbmRlZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZGF0YSA9IGN0eC5kYXRhO1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGUuX3BhcnNlKHtcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnR5cGU7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFpvZFBpcGVsaW5lIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVBc3luYyA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5pbi5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGlmIChpblJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKGluUmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYub3V0Ll9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVBc3luYygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaW5SZXN1bHQgPSB0aGlzLl9kZWYuaW4uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChpblJlc3VsdC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBcImRpcnR5XCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpblJlc3VsdC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShhLCBiKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kUGlwZWxpbmUoe1xuICAgICAgICAgICAgaW46IGEsXG4gICAgICAgICAgICBvdXQ6IGIsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFBpcGVsaW5lLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgWm9kUmVhZG9ubHkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2UoaW5wdXQpO1xuICAgICAgICBjb25zdCBmcmVlemUgPSAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzVmFsaWQoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBkYXRhLnZhbHVlID0gT2JqZWN0LmZyZWV6ZShkYXRhLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gaXNBc3luYyhyZXN1bHQpID8gcmVzdWx0LnRoZW4oKGRhdGEpID0+IGZyZWV6ZShkYXRhKSkgOiBmcmVlemUocmVzdWx0KTtcbiAgICB9XG4gICAgdW53cmFwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2RSZWFkb25seS5jcmVhdGUgPSAodHlwZSwgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RSZWFkb25seSh7XG4gICAgICAgIGlubmVyVHlwZTogdHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RSZWFkb25seSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICB6LmN1c3RvbSAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmZ1bmN0aW9uIGNsZWFuUGFyYW1zKHBhcmFtcywgZGF0YSkge1xuICAgIGNvbnN0IHAgPSB0eXBlb2YgcGFyYW1zID09PSBcImZ1bmN0aW9uXCIgPyBwYXJhbXMoZGF0YSkgOiB0eXBlb2YgcGFyYW1zID09PSBcInN0cmluZ1wiID8geyBtZXNzYWdlOiBwYXJhbXMgfSA6IHBhcmFtcztcbiAgICBjb25zdCBwMiA9IHR5cGVvZiBwID09PSBcInN0cmluZ1wiID8geyBtZXNzYWdlOiBwIH0gOiBwO1xuICAgIHJldHVybiBwMjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjdXN0b20oY2hlY2ssIF9wYXJhbXMgPSB7fSwgXG4vKipcbiAqIEBkZXByZWNhdGVkXG4gKlxuICogUGFzcyBgZmF0YWxgIGludG8gdGhlIHBhcmFtcyBvYmplY3QgaW5zdGVhZDpcbiAqXG4gKiBgYGB0c1xuICogei5zdHJpbmcoKS5jdXN0b20oKHZhbCkgPT4gdmFsLmxlbmd0aCA+IDUsIHsgZmF0YWw6IGZhbHNlIH0pXG4gKiBgYGBcbiAqXG4gKi9cbmZhdGFsKSB7XG4gICAgaWYgKGNoZWNrKVxuICAgICAgICByZXR1cm4gWm9kQW55LmNyZWF0ZSgpLnN1cGVyUmVmaW5lKChkYXRhLCBjdHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBjaGVjayhkYXRhKTtcbiAgICAgICAgICAgIGlmIChyIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByLnRoZW4oKHIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBjbGVhblBhcmFtcyhfcGFyYW1zLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9mYXRhbCA9IHBhcmFtcy5mYXRhbCA/PyBmYXRhbCA/PyB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmFkZElzc3VlKHsgY29kZTogXCJjdXN0b21cIiwgLi4ucGFyYW1zLCBmYXRhbDogX2ZhdGFsIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBjbGVhblBhcmFtcyhfcGFyYW1zLCBkYXRhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBfZmF0YWwgPSBwYXJhbXMuZmF0YWwgPz8gZmF0YWwgPz8gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUoeyBjb2RlOiBcImN1c3RvbVwiLCAuLi5wYXJhbXMsIGZhdGFsOiBfZmF0YWwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0pO1xuICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCk7XG59XG5leHBvcnQgeyBab2RUeXBlIGFzIFNjaGVtYSwgWm9kVHlwZSBhcyBab2RTY2hlbWEgfTtcbmV4cG9ydCBjb25zdCBsYXRlID0ge1xuICAgIG9iamVjdDogWm9kT2JqZWN0LmxhenljcmVhdGUsXG59O1xuZXhwb3J0IHZhciBab2RGaXJzdFBhcnR5VHlwZUtpbmQ7XG4oZnVuY3Rpb24gKFpvZEZpcnN0UGFydHlUeXBlS2luZCkge1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN0cmluZ1wiXSA9IFwiWm9kU3RyaW5nXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVtYmVyXCJdID0gXCJab2ROdW1iZXJcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYU5cIl0gPSBcIlpvZE5hTlwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEJpZ0ludFwiXSA9IFwiWm9kQmlnSW50XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQm9vbGVhblwiXSA9IFwiWm9kQm9vbGVhblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERhdGVcIl0gPSBcIlpvZERhdGVcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTeW1ib2xcIl0gPSBcIlpvZFN5bWJvbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFVuZGVmaW5lZFwiXSA9IFwiWm9kVW5kZWZpbmVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbFwiXSA9IFwiWm9kTnVsbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFueVwiXSA9IFwiWm9kQW55XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5rbm93blwiXSA9IFwiWm9kVW5rbm93blwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5ldmVyXCJdID0gXCJab2ROZXZlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFZvaWRcIl0gPSBcIlpvZFZvaWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RBcnJheVwiXSA9IFwiWm9kQXJyYXlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RPYmplY3RcIl0gPSBcIlpvZE9iamVjdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFVuaW9uXCJdID0gXCJab2RVbmlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERpc2NyaW1pbmF0ZWRVbmlvblwiXSA9IFwiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kSW50ZXJzZWN0aW9uXCJdID0gXCJab2RJbnRlcnNlY3Rpb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RUdXBsZVwiXSA9IFwiWm9kVHVwbGVcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RSZWNvcmRcIl0gPSBcIlpvZFJlY29yZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE1hcFwiXSA9IFwiWm9kTWFwXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU2V0XCJdID0gXCJab2RTZXRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RGdW5jdGlvblwiXSA9IFwiWm9kRnVuY3Rpb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMYXp5XCJdID0gXCJab2RMYXp5XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTGl0ZXJhbFwiXSA9IFwiWm9kTGl0ZXJhbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVudW1cIl0gPSBcIlpvZEVudW1cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RFZmZlY3RzXCJdID0gXCJab2RFZmZlY3RzXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmF0aXZlRW51bVwiXSA9IFwiWm9kTmF0aXZlRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9wdGlvbmFsXCJdID0gXCJab2RPcHRpb25hbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE51bGxhYmxlXCJdID0gXCJab2ROdWxsYWJsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERlZmF1bHRcIl0gPSBcIlpvZERlZmF1bHRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RDYXRjaFwiXSA9IFwiWm9kQ2F0Y2hcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RQcm9taXNlXCJdID0gXCJab2RQcm9taXNlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQnJhbmRlZFwiXSA9IFwiWm9kQnJhbmRlZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFBpcGVsaW5lXCJdID0gXCJab2RQaXBlbGluZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlYWRvbmx5XCJdID0gXCJab2RSZWFkb25seVwiO1xufSkoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIHx8IChab2RGaXJzdFBhcnR5VHlwZUtpbmQgPSB7fSkpO1xuLy8gcmVxdWlyZXMgVFMgNC40K1xuY2xhc3MgQ2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKC4uLl8pIHsgfVxufVxuY29uc3QgaW5zdGFuY2VPZlR5cGUgPSAoXG4vLyBjb25zdCBpbnN0YW5jZU9mVHlwZSA9IDxUIGV4dGVuZHMgbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gYW55PihcbmNscywgcGFyYW1zID0ge1xuICAgIG1lc3NhZ2U6IGBJbnB1dCBub3QgaW5zdGFuY2Ugb2YgJHtjbHMubmFtZX1gLFxufSkgPT4gY3VzdG9tKChkYXRhKSA9PiBkYXRhIGluc3RhbmNlb2YgY2xzLCBwYXJhbXMpO1xuY29uc3Qgc3RyaW5nVHlwZSA9IFpvZFN0cmluZy5jcmVhdGU7XG5jb25zdCBudW1iZXJUeXBlID0gWm9kTnVtYmVyLmNyZWF0ZTtcbmNvbnN0IG5hblR5cGUgPSBab2ROYU4uY3JlYXRlO1xuY29uc3QgYmlnSW50VHlwZSA9IFpvZEJpZ0ludC5jcmVhdGU7XG5jb25zdCBib29sZWFuVHlwZSA9IFpvZEJvb2xlYW4uY3JlYXRlO1xuY29uc3QgZGF0ZVR5cGUgPSBab2REYXRlLmNyZWF0ZTtcbmNvbnN0IHN5bWJvbFR5cGUgPSBab2RTeW1ib2wuY3JlYXRlO1xuY29uc3QgdW5kZWZpbmVkVHlwZSA9IFpvZFVuZGVmaW5lZC5jcmVhdGU7XG5jb25zdCBudWxsVHlwZSA9IFpvZE51bGwuY3JlYXRlO1xuY29uc3QgYW55VHlwZSA9IFpvZEFueS5jcmVhdGU7XG5jb25zdCB1bmtub3duVHlwZSA9IFpvZFVua25vd24uY3JlYXRlO1xuY29uc3QgbmV2ZXJUeXBlID0gWm9kTmV2ZXIuY3JlYXRlO1xuY29uc3Qgdm9pZFR5cGUgPSBab2RWb2lkLmNyZWF0ZTtcbmNvbnN0IGFycmF5VHlwZSA9IFpvZEFycmF5LmNyZWF0ZTtcbmNvbnN0IG9iamVjdFR5cGUgPSBab2RPYmplY3QuY3JlYXRlO1xuY29uc3Qgc3RyaWN0T2JqZWN0VHlwZSA9IFpvZE9iamVjdC5zdHJpY3RDcmVhdGU7XG5jb25zdCB1bmlvblR5cGUgPSBab2RVbmlvbi5jcmVhdGU7XG5jb25zdCBkaXNjcmltaW5hdGVkVW5pb25UeXBlID0gWm9kRGlzY3JpbWluYXRlZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGludGVyc2VjdGlvblR5cGUgPSBab2RJbnRlcnNlY3Rpb24uY3JlYXRlO1xuY29uc3QgdHVwbGVUeXBlID0gWm9kVHVwbGUuY3JlYXRlO1xuY29uc3QgcmVjb3JkVHlwZSA9IFpvZFJlY29yZC5jcmVhdGU7XG5jb25zdCBtYXBUeXBlID0gWm9kTWFwLmNyZWF0ZTtcbmNvbnN0IHNldFR5cGUgPSBab2RTZXQuY3JlYXRlO1xuY29uc3QgZnVuY3Rpb25UeXBlID0gWm9kRnVuY3Rpb24uY3JlYXRlO1xuY29uc3QgbGF6eVR5cGUgPSBab2RMYXp5LmNyZWF0ZTtcbmNvbnN0IGxpdGVyYWxUeXBlID0gWm9kTGl0ZXJhbC5jcmVhdGU7XG5jb25zdCBlbnVtVHlwZSA9IFpvZEVudW0uY3JlYXRlO1xuY29uc3QgbmF0aXZlRW51bVR5cGUgPSBab2ROYXRpdmVFbnVtLmNyZWF0ZTtcbmNvbnN0IHByb21pc2VUeXBlID0gWm9kUHJvbWlzZS5jcmVhdGU7XG5jb25zdCBlZmZlY3RzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlO1xuY29uc3Qgb3B0aW9uYWxUeXBlID0gWm9kT3B0aW9uYWwuY3JlYXRlO1xuY29uc3QgbnVsbGFibGVUeXBlID0gWm9kTnVsbGFibGUuY3JlYXRlO1xuY29uc3QgcHJlcHJvY2Vzc1R5cGUgPSBab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzO1xuY29uc3QgcGlwZWxpbmVUeXBlID0gWm9kUGlwZWxpbmUuY3JlYXRlO1xuY29uc3Qgb3N0cmluZyA9ICgpID0+IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpO1xuY29uc3Qgb251bWJlciA9ICgpID0+IG51bWJlclR5cGUoKS5vcHRpb25hbCgpO1xuY29uc3Qgb2Jvb2xlYW4gPSAoKSA9PiBib29sZWFuVHlwZSgpLm9wdGlvbmFsKCk7XG5leHBvcnQgY29uc3QgY29lcmNlID0ge1xuICAgIHN0cmluZzogKChhcmcpID0+IFpvZFN0cmluZy5jcmVhdGUoeyAuLi5hcmcsIGNvZXJjZTogdHJ1ZSB9KSksXG4gICAgbnVtYmVyOiAoKGFyZykgPT4gWm9kTnVtYmVyLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBib29sZWFuOiAoKGFyZykgPT4gWm9kQm9vbGVhbi5jcmVhdGUoe1xuICAgICAgICAuLi5hcmcsXG4gICAgICAgIGNvZXJjZTogdHJ1ZSxcbiAgICB9KSksXG4gICAgYmlnaW50OiAoKGFyZykgPT4gWm9kQmlnSW50LmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBkYXRlOiAoKGFyZykgPT4gWm9kRGF0ZS5jcmVhdGUoeyAuLi5hcmcsIGNvZXJjZTogdHJ1ZSB9KSksXG59O1xuZXhwb3J0IHsgYW55VHlwZSBhcyBhbnksIGFycmF5VHlwZSBhcyBhcnJheSwgYmlnSW50VHlwZSBhcyBiaWdpbnQsIGJvb2xlYW5UeXBlIGFzIGJvb2xlYW4sIGRhdGVUeXBlIGFzIGRhdGUsIGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgYXMgZGlzY3JpbWluYXRlZFVuaW9uLCBlZmZlY3RzVHlwZSBhcyBlZmZlY3QsIGVudW1UeXBlIGFzIGVudW0sIGZ1bmN0aW9uVHlwZSBhcyBmdW5jdGlvbiwgaW5zdGFuY2VPZlR5cGUgYXMgaW5zdGFuY2VvZiwgaW50ZXJzZWN0aW9uVHlwZSBhcyBpbnRlcnNlY3Rpb24sIGxhenlUeXBlIGFzIGxhenksIGxpdGVyYWxUeXBlIGFzIGxpdGVyYWwsIG1hcFR5cGUgYXMgbWFwLCBuYW5UeXBlIGFzIG5hbiwgbmF0aXZlRW51bVR5cGUgYXMgbmF0aXZlRW51bSwgbmV2ZXJUeXBlIGFzIG5ldmVyLCBudWxsVHlwZSBhcyBudWxsLCBudWxsYWJsZVR5cGUgYXMgbnVsbGFibGUsIG51bWJlclR5cGUgYXMgbnVtYmVyLCBvYmplY3RUeXBlIGFzIG9iamVjdCwgb2Jvb2xlYW4sIG9udW1iZXIsIG9wdGlvbmFsVHlwZSBhcyBvcHRpb25hbCwgb3N0cmluZywgcGlwZWxpbmVUeXBlIGFzIHBpcGVsaW5lLCBwcmVwcm9jZXNzVHlwZSBhcyBwcmVwcm9jZXNzLCBwcm9taXNlVHlwZSBhcyBwcm9taXNlLCByZWNvcmRUeXBlIGFzIHJlY29yZCwgc2V0VHlwZSBhcyBzZXQsIHN0cmljdE9iamVjdFR5cGUgYXMgc3RyaWN0T2JqZWN0LCBzdHJpbmdUeXBlIGFzIHN0cmluZywgc3ltYm9sVHlwZSBhcyBzeW1ib2wsIGVmZmVjdHNUeXBlIGFzIHRyYW5zZm9ybWVyLCB0dXBsZVR5cGUgYXMgdHVwbGUsIHVuZGVmaW5lZFR5cGUgYXMgdW5kZWZpbmVkLCB1bmlvblR5cGUgYXMgdW5pb24sIHVua25vd25UeXBlIGFzIHVua25vd24sIHZvaWRUeXBlIGFzIHZvaWQsIH07XG5leHBvcnQgY29uc3QgTkVWRVIgPSBJTlZBTElEO1xuIiwiaW1wb3J0IHsgdG9vbCB9IGZyb20gXCIuL3Rvb2wubWpzXCI7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBNQ1BTZXJ2ZXJTdGRpbyBhcyBVbmRlcmx5aW5nTUNQU2VydmVyU3RkaW8sIE1DUFNlcnZlclN0cmVhbWFibGVIdHRwIGFzIFVuZGVybHlpbmdNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBnZXRDdXJyZW50U3Bhbiwgd2l0aE1DUExpc3RUb29sc1NwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgbG9nZ2VyIGFzIGdsb2JhbExvZ2dlciwgZ2V0TG9nZ2VyIH0gZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCB7IHogfSBmcm9tICdAb3BlbmFpL3pvZC92Myc7XG5leHBvcnQgY29uc3QgREVGQVVMVF9TVERJT19NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FID0gJ29wZW5haS1hZ2VudHM6c3RkaW8tbWNwLWNsaWVudCc7XG5leHBvcnQgY29uc3QgREVGQVVMVF9TVFJFQU1BQkxFX0hUVFBfTUNQX0NMSUVOVF9MT0dHRVJfTkFNRSA9ICdvcGVuYWktYWdlbnRzOnN0cmVhbWFibGUtaHR0cC1tY3AtY2xpZW50JztcbmV4cG9ydCBjbGFzcyBCYXNlTUNQU2VydmVyU3RkaW8ge1xuICAgIGNhY2hlVG9vbHNMaXN0O1xuICAgIF9jYWNoZWRUb29scyA9IHVuZGVmaW5lZDtcbiAgICBsb2dnZXI7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLmxvZ2dlciA9XG4gICAgICAgICAgICBvcHRpb25zLmxvZ2dlciA/PyBnZXRMb2dnZXIoREVGQVVMVF9TVERJT19NQ1BfQ0xJRU5UX0xPR0dFUl9OQU1FKTtcbiAgICAgICAgdGhpcy5jYWNoZVRvb2xzTGlzdCA9IG9wdGlvbnMuY2FjaGVUb29sc0xpc3QgPz8gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9ncyBhIGRlYnVnIG1lc3NhZ2Ugd2hlbiBkZWJ1ZyBsb2dnaW5nIGlzIGVuYWJsZWQuXG4gICAgICogQHBhcmFtIGJ1aWxkTWVzc2FnZSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbWVzc2FnZSB0byBsb2cuXG4gICAgICovXG4gICAgZGVidWdMb2coYnVpbGRNZXNzYWdlKSB7XG4gICAgICAgIGlmIChkZWJ1Zy5lbmFibGVkKHRoaXMubG9nZ2VyLm5hbWVzcGFjZSkpIHtcbiAgICAgICAgICAgIC8vIG9ubHkgd2hlbiB0aGlzIGlzIHRydWUsIHRoZSBmdW5jdGlvbiB0byBidWlsZCB0aGUgc3RyaW5nIGlzIGNhbGxlZFxuICAgICAgICAgICAgdGhpcy5sb2dnZXIuZGVidWcoYnVpbGRNZXNzYWdlKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEJhc2VNQ1BTZXJ2ZXJTdHJlYW1hYmxlSHR0cCB7XG4gICAgY2FjaGVUb29sc0xpc3Q7XG4gICAgX2NhY2hlZFRvb2xzID0gdW5kZWZpbmVkO1xuICAgIGxvZ2dlcjtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyID1cbiAgICAgICAgICAgIG9wdGlvbnMubG9nZ2VyID8/XG4gICAgICAgICAgICAgICAgZ2V0TG9nZ2VyKERFRkFVTFRfU1RSRUFNQUJMRV9IVFRQX01DUF9DTElFTlRfTE9HR0VSX05BTUUpO1xuICAgICAgICB0aGlzLmNhY2hlVG9vbHNMaXN0ID0gb3B0aW9ucy5jYWNoZVRvb2xzTGlzdCA/PyB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2dzIGEgZGVidWcgbWVzc2FnZSB3aGVuIGRlYnVnIGxvZ2dpbmcgaXMgZW5hYmxlZC5cbiAgICAgKiBAcGFyYW0gYnVpbGRNZXNzYWdlIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKi9cbiAgICBkZWJ1Z0xvZyhidWlsZE1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGRlYnVnLmVuYWJsZWQodGhpcy5sb2dnZXIubmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgLy8gb25seSB3aGVuIHRoaXMgaXMgdHJ1ZSwgdGhlIGZ1bmN0aW9uIHRvIGJ1aWxkIHRoZSBzdHJpbmcgaXMgY2FsbGVkXG4gICAgICAgICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhidWlsZE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIE1pbmltdW0gTUNQIHRvb2wgZGF0YSBkZWZpbml0aW9uLlxuICogVGhpcyB0eXBlIGRlZmluaXRpb24gZG9lcyBub3QgaW50ZW5kIHRvIGNvdmVyIGFsbCBwb3NzaWJsZSBwcm9wZXJ0aWVzLlxuICogSXQgc3VwcG9ydHMgdGhlIHByb3BlcnRpZXMgdGhhdCBhcmUgdXNlZCBpbiB0aGlzIFNESy5cbiAqL1xuZXhwb3J0IGNvbnN0IE1DUFRvb2wgPSB6Lm9iamVjdCh7XG4gICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGlucHV0U2NoZW1hOiB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnb2JqZWN0JyksXG4gICAgICAgIHByb3BlcnRpZXM6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgICAgICByZXF1aXJlZDogei5hcnJheSh6LnN0cmluZygpKSxcbiAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IHouYm9vbGVhbigpLFxuICAgIH0pLFxufSk7XG4vKipcbiAqIFB1YmxpYyBpbnRlcmZhY2Ugb2YgYW4gTUNQIHNlcnZlciB0aGF0IHByb3ZpZGVzIHRvb2xzLlxuICogWW91IGNhbiB1c2UgdGhpcyBjbGFzcyB0byBwYXNzIE1DUCBzZXJ2ZXIgc2V0dGluZ3MgdG8geW91ciBhZ2VudC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1DUFNlcnZlclN0ZGlvIGV4dGVuZHMgQmFzZU1DUFNlcnZlclN0ZGlvIHtcbiAgICB1bmRlcmx5aW5nO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMudW5kZXJseWluZyA9IG5ldyBVbmRlcmx5aW5nTUNQU2VydmVyU3RkaW8ob3B0aW9ucyk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLm5hbWU7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY29ubmVjdCgpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jbG9zZSgpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0VG9vbHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0ICYmIHRoaXMuX2NhY2hlZFRvb2xzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkVG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9vbHMgPSBhd2FpdCB0aGlzLnVuZGVybHlpbmcubGlzdFRvb2xzKCk7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0KSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRUb29scyA9IHRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b29scztcbiAgICB9XG4gICAgY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jYWxsVG9vbCh0b29sTmFtZSwgYXJncyk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE1DUFNlcnZlclN0cmVhbWFibGVIdHRwIGV4dGVuZHMgQmFzZU1DUFNlcnZlclN0cmVhbWFibGVIdHRwIHtcbiAgICB1bmRlcmx5aW5nO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMudW5kZXJseWluZyA9IG5ldyBVbmRlcmx5aW5nTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAob3B0aW9ucyk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nLm5hbWU7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmcuY29ubmVjdCgpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jbG9zZSgpO1xuICAgIH1cbiAgICBhc3luYyBsaXN0VG9vbHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0ICYmIHRoaXMuX2NhY2hlZFRvb2xzKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkVG9vbHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9vbHMgPSBhd2FpdCB0aGlzLnVuZGVybHlpbmcubGlzdFRvb2xzKCk7XG4gICAgICAgIGlmICh0aGlzLmNhY2hlVG9vbHNMaXN0KSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZWRUb29scyA9IHRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b29scztcbiAgICB9XG4gICAgY2FsbFRvb2wodG9vbE5hbWUsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5kZXJseWluZy5jYWxsVG9vbCh0b29sTmFtZSwgYXJncyk7XG4gICAgfVxufVxuLyoqXG4gKiBGZXRjaGVzIGFuZCBmbGF0dGVucyBhbGwgdG9vbHMgZnJvbSBtdWx0aXBsZSBNQ1Agc2VydmVycy5cbiAqIExvZ3MgYW5kIHNraXBzIGFueSBzZXJ2ZXJzIHRoYXQgZmFpbCB0byByZXNwb25kLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsTWNwRnVuY3Rpb25Ub29scyhtY3BTZXJ2ZXJzLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0ID0gZmFsc2UpIHtcbiAgICBjb25zdCBhbGxUb29scyA9IFtdO1xuICAgIGNvbnN0IHRvb2xOYW1lcyA9IG5ldyBTZXQoKTtcbiAgICBmb3IgKGNvbnN0IHNlcnZlciBvZiBtY3BTZXJ2ZXJzKSB7XG4gICAgICAgIGNvbnN0IHNlcnZlclRvb2xzID0gYXdhaXQgZ2V0RnVuY3Rpb25Ub29sc0Zyb21TZXJ2ZXIoc2VydmVyLCBjb252ZXJ0U2NoZW1hc1RvU3RyaWN0KTtcbiAgICAgICAgY29uc3Qgc2VydmVyVG9vbE5hbWVzID0gbmV3IFNldChzZXJ2ZXJUb29scy5tYXAoKHQpID0+IHQubmFtZSkpO1xuICAgICAgICBjb25zdCBpbnRlcnNlY3Rpb24gPSBbLi4uc2VydmVyVG9vbE5hbWVzXS5maWx0ZXIoKG4pID0+IHRvb2xOYW1lcy5oYXMobikpO1xuICAgICAgICBpZiAoaW50ZXJzZWN0aW9uLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYER1cGxpY2F0ZSB0b29sIG5hbWVzIGZvdW5kIGFjcm9zcyBNQ1Agc2VydmVyczogJHtpbnRlcnNlY3Rpb24uam9pbignLCAnKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygc2VydmVyVG9vbHMpIHtcbiAgICAgICAgICAgIHRvb2xOYW1lcy5hZGQodC5uYW1lKTtcbiAgICAgICAgICAgIGFsbFRvb2xzLnB1c2godCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFsbFRvb2xzO1xufVxuY29uc3QgX2NhY2hlZFRvb2xzID0ge307XG4vKipcbiAqIFJlbW92ZSBjYWNoZWQgdG9vbHMgZm9yIHRoZSBnaXZlbiBzZXJ2ZXIgc28gdGhlIG5leHQgbG9va3VwIGZldGNoZXMgZnJlc2ggZGF0YS5cbiAqXG4gKiBAcGFyYW0gc2VydmVyTmFtZSAtIE5hbWUgb2YgdGhlIE1DUCBzZXJ2ZXIgd2hvc2UgY2FjaGUgc2hvdWxkIGJlIGNsZWFyZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnZhbGlkYXRlU2VydmVyVG9vbHNDYWNoZShzZXJ2ZXJOYW1lKSB7XG4gICAgZGVsZXRlIF9jYWNoZWRUb29sc1tzZXJ2ZXJOYW1lXTtcbn1cbi8qKlxuICogRmV0Y2hlcyBhbGwgZnVuY3Rpb24gdG9vbHMgZnJvbSBhIHNpbmdsZSBNQ1Agc2VydmVyLlxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRGdW5jdGlvblRvb2xzRnJvbVNlcnZlcihzZXJ2ZXIsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QpIHtcbiAgICBpZiAoc2VydmVyLmNhY2hlVG9vbHNMaXN0ICYmIF9jYWNoZWRUb29sc1tzZXJ2ZXIubmFtZV0pIHtcbiAgICAgICAgcmV0dXJuIF9jYWNoZWRUb29sc1tzZXJ2ZXIubmFtZV07XG4gICAgfVxuICAgIHJldHVybiB3aXRoTUNQTGlzdFRvb2xzU3Bhbihhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICBjb25zdCBtY3BUb29scyA9IGF3YWl0IHNlcnZlci5saXN0VG9vbHMoKTtcbiAgICAgICAgc3Bhbi5zcGFuRGF0YS5yZXN1bHQgPSBtY3BUb29scy5tYXAoKHQpID0+IHQubmFtZSk7XG4gICAgICAgIGNvbnN0IHRvb2xzID0gbWNwVG9vbHMubWFwKCh0KSA9PiBtY3BUb0Z1bmN0aW9uVG9vbCh0LCBzZXJ2ZXIsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QpKTtcbiAgICAgICAgaWYgKHNlcnZlci5jYWNoZVRvb2xzTGlzdCkge1xuICAgICAgICAgICAgX2NhY2hlZFRvb2xzW3NlcnZlci5uYW1lXSA9IHRvb2xzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b29scztcbiAgICB9LCB7IGRhdGE6IHsgc2VydmVyOiBzZXJ2ZXIubmFtZSB9IH0pO1xufVxuLyoqXG4gKiBSZXR1cm5zIGFsbCBNQ1AgdG9vbHMgZnJvbSB0aGUgcHJvdmlkZWQgc2VydmVycywgdXNpbmcgdGhlIGZ1bmN0aW9uIHRvb2wgY29udmVyc2lvbi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbE1jcFRvb2xzKG1jcFNlcnZlcnMsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QgPSBmYWxzZSkge1xuICAgIHJldHVybiBnZXRBbGxNY3BGdW5jdGlvblRvb2xzKG1jcFNlcnZlcnMsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QpO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBhbiBNQ1AgdG9vbCBkZWZpbml0aW9uIHRvIGEgZnVuY3Rpb24gdG9vbCBmb3IgdGhlIEFnZW50cyBTREsuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtY3BUb0Z1bmN0aW9uVG9vbChtY3BUb29sLCBzZXJ2ZXIsIGNvbnZlcnRTY2hlbWFzVG9TdHJpY3QpIHtcbiAgICBhc3luYyBmdW5jdGlvbiBpbnZva2UoaW5wdXQsIF9jb250ZXh0KSB7XG4gICAgICAgIGxldCBhcmdzID0ge307XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnICYmIGlucHV0KSB7XG4gICAgICAgICAgICBhcmdzID0gSlNPTi5wYXJzZShpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSAnb2JqZWN0JyAmJiBpbnB1dCAhPSBudWxsKSB7XG4gICAgICAgICAgICBhcmdzID0gaW5wdXQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDdXJyZW50U3BhbigpO1xuICAgICAgICBpZiAoY3VycmVudFNwYW4pIHtcbiAgICAgICAgICAgIGN1cnJlbnRTcGFuLnNwYW5EYXRhWydtY3BfZGF0YSddID0geyBzZXJ2ZXI6IHNlcnZlci5uYW1lIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHNlcnZlci5jYWxsVG9vbChtY3BUb29sLm5hbWUsIGFyZ3MpO1xuICAgICAgICByZXR1cm4gY29udGVudC5sZW5ndGggPT09IDEgPyBjb250ZW50WzBdIDogY29udGVudDtcbiAgICB9XG4gICAgY29uc3Qgc2NoZW1hID0ge1xuICAgICAgICB0eXBlOiBtY3BUb29sLmlucHV0U2NoZW1hPy50eXBlID8/ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiBtY3BUb29sLmlucHV0U2NoZW1hPy5wcm9wZXJ0aWVzID8/IHt9LFxuICAgICAgICByZXF1aXJlZDogbWNwVG9vbC5pbnB1dFNjaGVtYT8ucmVxdWlyZWQgPz8gW10sXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiBtY3BUb29sLmlucHV0U2NoZW1hPy5hZGRpdGlvbmFsUHJvcGVydGllcyA/PyBmYWxzZSxcbiAgICB9O1xuICAgIGlmIChjb252ZXJ0U2NoZW1hc1RvU3RyaWN0IHx8IHNjaGVtYS5hZGRpdGlvbmFsUHJvcGVydGllcyA9PT0gdHJ1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RyaWN0U2NoZW1hID0gZW5zdXJlU3RyaWN0SnNvblNjaGVtYShzY2hlbWEpO1xuICAgICAgICAgICAgcmV0dXJuIHRvb2woe1xuICAgICAgICAgICAgICAgIG5hbWU6IG1jcFRvb2wubmFtZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogbWNwVG9vbC5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiBzdHJpY3RTY2hlbWEsXG4gICAgICAgICAgICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGU6IGludm9rZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBnbG9iYWxMb2dnZXIud2FybihgRXJyb3IgY29udmVydGluZyBNQ1Agc2NoZW1hIHRvIHN0cmljdCBtb2RlOiAke2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgbm9uU3RyaWN0U2NoZW1hID0ge1xuICAgICAgICAuLi5zY2hlbWEsXG4gICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB0cnVlLFxuICAgIH07XG4gICAgcmV0dXJuIHRvb2woe1xuICAgICAgICBuYW1lOiBtY3BUb29sLm5hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBtY3BUb29sLmRlc2NyaXB0aW9uIHx8ICcnLFxuICAgICAgICBwYXJhbWV0ZXJzOiBub25TdHJpY3RTY2hlbWEsXG4gICAgICAgIHN0cmljdDogZmFsc2UsXG4gICAgICAgIGV4ZWN1dGU6IGludm9rZSxcbiAgICB9KTtcbn1cbi8qKlxuICogRW5zdXJlcyB0aGUgZ2l2ZW4gSlNPTiBzY2hlbWEgaXMgc3RyaWN0IChubyBhZGRpdGlvbmFsIHByb3BlcnRpZXMsIHJlcXVpcmVkIGZpZWxkcyBzZXQpLlxuICovXG5mdW5jdGlvbiBlbnN1cmVTdHJpY3RKc29uU2NoZW1hKHNjaGVtYSkge1xuICAgIGNvbnN0IG91dCA9IHtcbiAgICAgICAgLi4uc2NoZW1hLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UsXG4gICAgfTtcbiAgICBpZiAoIW91dC5yZXF1aXJlZClcbiAgICAgICAgb3V0LnJlcXVpcmVkID0gW107XG4gICAgcmV0dXJuIG91dDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1jcC5tanMubWFwIiwiLy8vIDxyZWZlcmVuY2UgbGliPVwiZG9tXCIgLz5cbi8vIFVzZSBmdW5jdGlvbiBpbnN0ZWFkIG9mIGV4cG9ydGluZyB0aGUgdmFsdWUgdG8gcHJldmVudFxuLy8gY2lyY3VsYXIgZGVwZW5kZW5jeSByZXNvbHV0aW9uIGlzc3VlcyBjYXVzZWQgYnkgb3RoZXIgZXhwb3J0cyBpbiAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnXG5leHBvcnQgZnVuY3Rpb24gbG9hZEVudigpIHtcbiAgICByZXR1cm4ge307XG59XG5leHBvcnQgY2xhc3MgQnJvd3NlckV2ZW50RW1pdHRlciB7XG4gICAgI3RhcmdldCA9IG5ldyBFdmVudFRhcmdldCgpO1xuICAgIG9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuI3RhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsICgoZXZlbnQpID0+IGxpc3RlbmVyKC4uLihldmVudC5kZXRhaWwgPz8gW10pKSkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgb2ZmKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuI3RhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsICgoZXZlbnQpID0+IGxpc3RlbmVyKC4uLihldmVudC5kZXRhaWwgPz8gW10pKSkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZW1pdCh0eXBlLCAuLi5hcmdzKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KHR5cGUsIHsgZGV0YWlsOiBhcmdzIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy4jdGFyZ2V0LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgICBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgdGhpcy5vZmYodHlwZSwgaGFuZGxlcik7XG4gICAgICAgICAgICBsaXN0ZW5lciguLi5hcmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vbih0eXBlLCBoYW5kbGVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuZXhwb3J0IHsgQnJvd3NlckV2ZW50RW1pdHRlciBhcyBSdW50aW1lRXZlbnRFbWl0dGVyIH07XG5leHBvcnQgY29uc3QgcmFuZG9tVVVJRCA9IGNyeXB0by5yYW5kb21VVUlELmJpbmQoY3J5cHRvKTtcbmV4cG9ydCBjb25zdCBSZWFkYWJsZSA9IGNsYXNzIFJlYWRhYmxlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIHBpcGVUbyhfZGVzdGluYXRpb24sIF9vcHRpb25zKSB7IH1cbiAgICBwaXBlVGhyb3VnaChfdHJhbnNmb3JtLCBfb3B0aW9ucykgeyB9XG59O1xuZXhwb3J0IGNvbnN0IFJlYWRhYmxlU3RyZWFtID0gZ2xvYmFsVGhpcy5SZWFkYWJsZVN0cmVhbTtcbmV4cG9ydCBjb25zdCBSZWFkYWJsZVN0cmVhbUNvbnRyb2xsZXIgPSBnbG9iYWxUaGlzLlJlYWRhYmxlU3RyZWFtRGVmYXVsdENvbnRyb2xsZXI7XG5leHBvcnQgY29uc3QgVHJhbnNmb3JtU3RyZWFtID0gZ2xvYmFsVGhpcy5UcmFuc2Zvcm1TdHJlYW07XG5leHBvcnQgY2xhc3MgQXN5bmNMb2NhbFN0b3JhZ2Uge1xuICAgIGNvbnRleHQgPSBudWxsO1xuICAgIGNvbnN0cnVjdG9yKCkgeyB9XG4gICAgcnVuKGNvbnRleHQsIGZuKSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHJldHVybiBmbigpO1xuICAgIH1cbiAgICBnZXRTdG9yZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dDtcbiAgICB9XG4gICAgZW50ZXJXaXRoKGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gaXNCcm93c2VyRW52aXJvbm1lbnQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNUcmFjaW5nTG9vcFJ1bm5pbmdCeURlZmF1bHQoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IHsgTUNQU2VydmVyU3RkaW8sIE1DUFNlcnZlclN0cmVhbWFibGVIdHRwIH0gZnJvbSBcIi4vbWNwLXNlcnZlci9icm93c2VyLm1qc1wiO1xuY2xhc3MgQnJvd3NlclRpbWVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxuICAgIHNldFRpbWVvdXQoY2FsbGJhY2ssIG1zKSB7XG4gICAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCBtcyk7XG4gICAgICAgIHRpbWVvdXQucmVmID1cbiAgICAgICAgICAgIHR5cGVvZiB0aW1lb3V0LnJlZiA9PT0gJ2Z1bmN0aW9uJyA/IHRpbWVvdXQucmVmIDogKCkgPT4gdGltZW91dDtcbiAgICAgICAgdGltZW91dC51bnJlZiA9XG4gICAgICAgICAgICB0eXBlb2YgdGltZW91dC51bnJlZiA9PT0gJ2Z1bmN0aW9uJyA/IHRpbWVvdXQudW5yZWYgOiAoKSA9PiB0aW1lb3V0O1xuICAgICAgICB0aW1lb3V0Lmhhc1JlZiA9XG4gICAgICAgICAgICB0eXBlb2YgdGltZW91dC5oYXNSZWYgPT09ICdmdW5jdGlvbicgPyB0aW1lb3V0Lmhhc1JlZiA6ICgpID0+IHRydWU7XG4gICAgICAgIHRpbWVvdXQucmVmcmVzaCA9XG4gICAgICAgICAgICB0eXBlb2YgdGltZW91dC5yZWZyZXNoID09PSAnZnVuY3Rpb24nID8gdGltZW91dC5yZWZyZXNoIDogKCkgPT4gdGltZW91dDtcbiAgICAgICAgcmV0dXJuIHRpbWVvdXQ7XG4gICAgfVxuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpIHtcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgIH1cbn1cbmNvbnN0IHRpbWVyID0gbmV3IEJyb3dzZXJUaW1lcigpO1xuZXhwb3J0IHsgdGltZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoaW1zLWJyb3dzZXIubWpzLm1hcCIsImltcG9ydCB7IEFzeW5jTG9jYWxTdG9yYWdlIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS9fc2hpbXMnO1xuaW1wb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3Byb3ZpZGVyLm1qc1wiO1xubGV0IF9jb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2U7XG5mdW5jdGlvbiBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKSB7XG4gICAgX2NvbnRleHRBc3luY0xvY2FsU3RvcmFnZSA/Pz0gbmV3IEFzeW5jTG9jYWxTdG9yYWdlKCk7XG4gICAgcmV0dXJuIF9jb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2U7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBnZXQgdGhlIGN1cnJlbnQgdHJhY2UgZnJvbSB0aGUgZXhlY3V0aW9uIGNvbnRleHQuXG4gKlxuICogQHJldHVybnMgVGhlIGN1cnJlbnQgdHJhY2Ugb3IgbnVsbCBpZiB0aGVyZSBpcyBubyB0cmFjZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRUcmFjZSgpIHtcbiAgICBjb25zdCBjdXJyZW50VHJhY2UgPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIGlmIChjdXJyZW50VHJhY2U/LnRyYWNlKSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50VHJhY2UudHJhY2U7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgZ2V0IHRoZSBjdXJyZW50IHNwYW4gZnJvbSB0aGUgZXhlY3V0aW9uIGNvbnRleHQuXG4gKlxuICogQHJldHVybnMgVGhlIGN1cnJlbnQgc3BhbiBvciBudWxsIGlmIHRoZXJlIGlzIG5vIHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50U3BhbigpIHtcbiAgICBjb25zdCBjdXJyZW50U3BhbiA9IGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmdldFN0b3JlKCk7XG4gICAgaWYgKGN1cnJlbnRTcGFuPy5zcGFuKSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50U3Bhbi5zcGFuO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogVGhpcyBpcyBhbiBBc3luY0xvY2FsU3RvcmFnZSBpbnN0YW5jZSB0aGF0IHN0b3JlcyB0aGUgY3VycmVudCB0cmFjZS5cbiAqIEl0IHdpbGwgYXV0b21hdGljYWxseSBoYW5kbGUgdGhlIGV4ZWN1dGlvbiBjb250ZXh0IG9mIGRpZmZlcmVudCBldmVudCBsb29wIGV4ZWN1dGlvbnMuXG4gKlxuICogVGhlIGZ1bmN0aW9ucyBiZWxvdyBzaG91bGQgYmUgdGhlIG9ubHkgd2F5IHRoYXQgdGhpcyBjb250ZXh0IGdldHMgaW50ZXJmYWNlZCB3aXRoLlxuICovXG5mdW5jdGlvbiBfd3JhcEZ1bmN0aW9uV2l0aFRyYWNlTGlmZWN5Y2xlKGZuKSB7XG4gICAgcmV0dXJuIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgdHJhY2UgPSBnZXRDdXJyZW50VHJhY2UoKTtcbiAgICAgICAgaWYgKCF0cmFjZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyB0cmFjZSBmb3VuZCcpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRyYWNlLnN0YXJ0KCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKHRyYWNlKTtcbiAgICAgICAgYXdhaXQgdHJhY2UuZW5kKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiB3aWxsIGNyZWF0ZSBhIG5ldyB0cmFjZSBhbmQgYXNzaWduIGl0IHRvIHRoZSBleGVjdXRpb24gY29udGV4dCBvZiB0aGUgZnVuY3Rpb25cbiAqIHBhc3NlZCB0byBpdC5cbiAqXG4gKiBAcGFyYW0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gcnVuIGFuZCBhc3NpZ24gdGhlIHRyYWNlIGNvbnRleHQgdG8uXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSBjcmVhdGlvbiBvZiB0aGUgdHJhY2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdpdGhUcmFjZSh0cmFjZSwgZm4sIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IG5ld1RyYWNlID0gdHlwZW9mIHRyYWNlID09PSAnc3RyaW5nJ1xuICAgICAgICA/IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVUcmFjZSh7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgbmFtZTogdHJhY2UsXG4gICAgICAgIH0pXG4gICAgICAgIDogdHJhY2U7XG4gICAgcmV0dXJuIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLnJ1bih7IHRyYWNlOiBuZXdUcmFjZSB9LCBfd3JhcEZ1bmN0aW9uV2l0aFRyYWNlTGlmZWN5Y2xlKGZuKSk7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBjaGVjayBpZiB0aGVyZSBpcyBhbiBleGlzdGluZyBhY3RpdmUgdHJhY2UgaW4gdGhlIGV4ZWN1dGlvbiBjb250ZXh0LiBJZiB0aGVyZVxuICogaXMsIGl0IHdpbGwgcnVuIHRoZSBnaXZlbiBmdW5jdGlvbiB3aXRoIHRoZSBleGlzdGluZyB0cmFjZS4gSWYgdGhlcmUgaXMgbm8gdHJhY2UsIGl0IHdpbGwgY3JlYXRlXG4gKiBhIG5ldyBvbmUgYW5kIGFzc2lnbiBpdCB0byB0aGUgZXhlY3V0aW9uIGNvbnRleHQgb2YgdGhlIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSBmbiAtIFRoZSBmenVuY3Rpb24gdG8gcnVuIGFuZCBhc3NpZ24gdGhlIHRyYWNlIGNvbnRleHQgdG8uXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSBjcmVhdGlvbiBvZiB0aGUgdHJhY2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE9yQ3JlYXRlVHJhY2UoZm4sIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGN1cnJlbnRUcmFjZSA9IGdldEN1cnJlbnRUcmFjZSgpO1xuICAgIGlmIChjdXJyZW50VHJhY2UpIHtcbiAgICAgICAgLy8gaWYgdGhpcyBleGVjdXRpb24gY29udGV4dCBhbHJlYWR5IGhhcyBhIHRyYWNlIGluc3RhbmNlIGluIGl0IHdlIGp1c3QgY29udGludWVcbiAgICAgICAgcmV0dXJuIGF3YWl0IGZuKCk7XG4gICAgfVxuICAgIGNvbnN0IG5ld1RyYWNlID0gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVRyYWNlKG9wdGlvbnMpO1xuICAgIHJldHVybiBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5ydW4oeyB0cmFjZTogbmV3VHJhY2UgfSwgX3dyYXBGdW5jdGlvbldpdGhUcmFjZUxpZmVjeWNsZShmbikpO1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgc2V0IHRoZSBjdXJyZW50IHNwYW4gaW4gdGhlIGV4ZWN1dGlvbiBjb250ZXh0LlxuICpcbiAqIEBwYXJhbSBzcGFuIC0gVGhlIHNwYW4gdG8gc2V0IGFzIHRoZSBjdXJyZW50IHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRDdXJyZW50U3BhbihzcGFuKSB7XG4gICAgY29uc3QgY29udGV4dCA9IGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmdldFN0b3JlKCk7XG4gICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZXhpc3RpbmcgdHJhY2UgZm91bmQnKTtcbiAgICB9XG4gICAgaWYgKGNvbnRleHQuc3Bhbikge1xuICAgICAgICBjb250ZXh0LnNwYW4ucHJldmlvdXNTcGFuID0gY29udGV4dC5wcmV2aW91c1NwYW47XG4gICAgICAgIGNvbnRleHQucHJldmlvdXNTcGFuID0gY29udGV4dC5zcGFuO1xuICAgIH1cbiAgICBjb250ZXh0LnNwYW4gPSBzcGFuO1xuICAgIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmVudGVyV2l0aChjb250ZXh0KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiByZXNldEN1cnJlbnRTcGFuKCkge1xuICAgIGNvbnN0IGNvbnRleHQgPSBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5nZXRTdG9yZSgpO1xuICAgIGlmIChjb250ZXh0KSB7XG4gICAgICAgIGNvbnRleHQuc3BhbiA9IGNvbnRleHQucHJldmlvdXNTcGFuO1xuICAgICAgICBjb250ZXh0LnByZXZpb3VzU3BhbiA9IGNvbnRleHQucHJldmlvdXNTcGFuPy5wcmV2aW91c1NwYW47XG4gICAgICAgIGdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSgpLmVudGVyV2l0aChjb250ZXh0KTtcbiAgICB9XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBhZGQgYW4gZXJyb3IgdG8gdGhlIGN1cnJlbnQgc3Bhbi5cbiAqXG4gKiBAcGFyYW0gc3BhbkVycm9yIC0gVGhlIGVycm9yIHRvIGFkZCB0byB0aGUgY3VycmVudCBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHNwYW5FcnJvcikge1xuICAgIGNvbnN0IGN1cnJlbnRTcGFuID0gZ2V0Q3VycmVudFNwYW4oKTtcbiAgICBpZiAoY3VycmVudFNwYW4pIHtcbiAgICAgICAgY3VycmVudFNwYW4uc2V0RXJyb3Ioc3BhbkVycm9yKTtcbiAgICB9XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBjbG9uZSB0aGUgY3VycmVudCBjb250ZXh0IGJ5IGNyZWF0aW5nIG5ldyBpbnN0YW5jZXMgb2YgdGhlIHRyYWNlLCBzcGFuLCBhbmRcbiAqIHByZXZpb3VzIHNwYW4uXG4gKlxuICogQHBhcmFtIGNvbnRleHQgLSBUaGUgY29udGV4dCB0byBjbG9uZS5cbiAqIEByZXR1cm5zIEEgY2xvbmUgb2YgdGhlIGNvbnRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZUN1cnJlbnRDb250ZXh0KGNvbnRleHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0cmFjZTogY29udGV4dC50cmFjZT8uY2xvbmUoKSxcbiAgICAgICAgc3BhbjogY29udGV4dC5zcGFuPy5jbG9uZSgpLFxuICAgICAgICBwcmV2aW91c1NwYW46IGNvbnRleHQucHJldmlvdXNTcGFuPy5jbG9uZSgpLFxuICAgIH07XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gd2lsbCBydW4gdGhlIGdpdmVuIGZ1bmN0aW9uIHdpdGggYSBuZXcgc3BhbiBjb250ZXh0LlxuICpcbiAqIEBwYXJhbSBmbiAtIFRoZSBmdW5jdGlvbiB0byBydW4gd2l0aCB0aGUgbmV3IHNwYW4gY29udGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhOZXdTcGFuQ29udGV4dChmbikge1xuICAgIGNvbnN0IGN1cnJlbnRDb250ZXh0ID0gZ2V0Q29udGV4dEFzeW5jTG9jYWxTdG9yYWdlKCkuZ2V0U3RvcmUoKTtcbiAgICBpZiAoIWN1cnJlbnRDb250ZXh0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZXhpc3RpbmcgdHJhY2UgZm91bmQnKTtcbiAgICB9XG4gICAgY29uc3QgY29weU9mQ29udGV4dCA9IGNsb25lQ3VycmVudENvbnRleHQoY3VycmVudENvbnRleHQpO1xuICAgIHJldHVybiBnZXRDb250ZXh0QXN5bmNMb2NhbFN0b3JhZ2UoKS5ydW4oY29weU9mQ29udGV4dCwgZm4pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29udGV4dC5tanMubWFwIiwiaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgdGltZXIgYXMgX3RpbWVyLCBpc1RyYWNpbmdMb29wUnVubmluZ0J5RGVmYXVsdCwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyB0cmFjaW5nIH0gZnJvbSBcIi4uL2NvbmZpZy5tanNcIjtcbi8qKlxuICogUHJpbnRzIHRoZSB0cmFjZXMgYW5kIHNwYW5zIHRvIHRoZSBjb25zb2xlXG4gKi9cbmV4cG9ydCBjbGFzcyBDb25zb2xlU3BhbkV4cG9ydGVyIHtcbiAgICBhc3luYyBleHBvcnQoaXRlbXMpIHtcbiAgICAgICAgaWYgKHRyYWNpbmcuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnVHJhY2luZyBpcyBkaXNhYmxlZC4gU2tpcHBpbmcgZXhwb3J0Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAndHJhY2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtFeHBvcnRlcl0gRXhwb3J0IHRyYWNlIHRyYWNlSWQ9JHtpdGVtLnRyYWNlSWR9IG5hbWU9JHtpdGVtLm5hbWV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW0V4cG9ydGVyXSBFeHBvcnQgc3BhbjogJHtKU09OLnN0cmluZ2lmeShpdGVtKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBCYXRjaFRyYWNlUHJvY2Vzc29yIHtcbiAgICAjbWF4UXVldWVTaXplO1xuICAgICNtYXhCYXRjaFNpemU7XG4gICAgI3NjaGVkdWxlRGVsYXk7XG4gICAgI2V4cG9ydFRyaWdnZXJTaXplO1xuICAgICNleHBvcnRlcjtcbiAgICAjYnVmZmVyID0gW107XG4gICAgI3RpbWVyO1xuICAgICN0aW1lb3V0ID0gbnVsbDtcbiAgICAjZXhwb3J0SW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICN0aW1lb3V0QWJvcnRDb250cm9sbGVyID0gbnVsbDtcbiAgICBjb25zdHJ1Y3RvcihleHBvcnRlciwgeyBtYXhRdWV1ZVNpemUgPSAxMDAwLCBtYXhCYXRjaFNpemUgPSAxMDAsIHNjaGVkdWxlRGVsYXkgPSA1MDAwLCAvLyA1IHNlY29uZHNcbiAgICBleHBvcnRUcmlnZ2VyUmF0aW8gPSAwLjgsIH0gPSB7fSkge1xuICAgICAgICB0aGlzLiNtYXhRdWV1ZVNpemUgPSBtYXhRdWV1ZVNpemU7XG4gICAgICAgIHRoaXMuI21heEJhdGNoU2l6ZSA9IG1heEJhdGNoU2l6ZTtcbiAgICAgICAgdGhpcy4jc2NoZWR1bGVEZWxheSA9IHNjaGVkdWxlRGVsYXk7XG4gICAgICAgIHRoaXMuI2V4cG9ydFRyaWdnZXJTaXplID0gbWF4UXVldWVTaXplICogZXhwb3J0VHJpZ2dlclJhdGlvO1xuICAgICAgICB0aGlzLiNleHBvcnRlciA9IGV4cG9ydGVyO1xuICAgICAgICB0aGlzLiN0aW1lciA9IF90aW1lcjtcbiAgICAgICAgaWYgKGlzVHJhY2luZ0xvb3BSdW5uaW5nQnlEZWZhdWx0KCkpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQXV0b21hdGljIHRyYWNlIGV4cG9ydCBsb29wIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudC4gWW91IG5lZWQgdG8gbWFudWFsbHkgY2FsbCBgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmZvcmNlRmx1c2goKWAgdG8gZXhwb3J0IHRyYWNlcy4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy4jdGltZW91dEFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICAgICAgdGhpcy4jcnVuRXhwb3J0TG9vcCgpO1xuICAgIH1cbiAgICBhc3luYyAjc2FmZUFkZEl0ZW0oaXRlbSkge1xuICAgICAgICBpZiAodGhpcy4jYnVmZmVyLmxlbmd0aCArIDEgPiB0aGlzLiNtYXhRdWV1ZVNpemUpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRHJvcHBpbmcgdHJhY2UgYmVjYXVzZSBidWZmZXIgaXMgZnVsbCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFkZCB0aGUgaXRlbSB0byB0aGUgYnVmZmVyXG4gICAgICAgIHRoaXMuI2J1ZmZlci5wdXNoKGl0ZW0pO1xuICAgICAgICBpZiAodGhpcy4jYnVmZmVyLmxlbmd0aCA+IHRoaXMuI2V4cG9ydFRyaWdnZXJTaXplKSB7XG4gICAgICAgICAgICAvLyBzdGFydCBleHBvcnRpbmcgaW1tZWRpYXRlbHlcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydEJhdGNoZXMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAjcnVuRXhwb3J0TG9vcCgpIHtcbiAgICAgICAgdGhpcy4jdGltZW91dCA9IHRoaXMuI3RpbWVyLnNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gc2NoZWR1bGVkIGV4cG9ydFxuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0QmF0Y2hlcygpO1xuICAgICAgICAgICAgdGhpcy4jcnVuRXhwb3J0TG9vcCgpO1xuICAgICAgICB9LCB0aGlzLiNzY2hlZHVsZURlbGF5KTtcbiAgICAgICAgLy8gV2Ugc2V0IHRoaXMgc28gdGhhdCBOb2RlIG5vIGxvbmdlciBjb25zaWRlcnMgdGhpcyBwYXJ0IG9mIHRoZSBldmVudCBsb29wIGFuZCBrZWVwcyB0aGVcbiAgICAgICAgLy8gcHJvY2VzcyBhbGl2ZSB1bnRpbCB0aGUgdGltZXIgaXMgZG9uZS5cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLiN0aW1lb3V0LnVucmVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLiN0aW1lb3V0LnVucmVmKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgI2V4cG9ydEJhdGNoZXMoZm9yY2UgPSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy4jYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgRXhwb3J0aW5nIGJhdGNoZXMuIEZvcmNlOiAke2ZvcmNlfS4gQnVmZmVyIHNpemU6ICR7dGhpcy4jYnVmZmVyLmxlbmd0aH1gKTtcbiAgICAgICAgaWYgKGZvcmNlIHx8IHRoaXMuI2J1ZmZlci5sZW5ndGggPCB0aGlzLiNtYXhCYXRjaFNpemUpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvRXhwb3J0ID0gWy4uLnRoaXMuI2J1ZmZlcl07XG4gICAgICAgICAgICB0aGlzLiNidWZmZXIgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jZXhwb3J0ZXIuZXhwb3J0KHRvRXhwb3J0KTtcbiAgICAgICAgICAgIHRoaXMuI2V4cG9ydEluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLiNidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgYmF0Y2ggPSB0aGlzLiNidWZmZXIuc3BsaWNlKDAsIHRoaXMuI21heEJhdGNoU2l6ZSk7XG4gICAgICAgICAgICB0aGlzLiNleHBvcnRJblByb2dyZXNzID0gdHJ1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydGVyLmV4cG9ydChiYXRjaCk7XG4gICAgICAgICAgICB0aGlzLiNleHBvcnRJblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25UcmFjZVN0YXJ0KHRyYWNlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuI3NhZmVBZGRJdGVtKHRyYWNlKTtcbiAgICB9XG4gICAgYXN5bmMgb25UcmFjZUVuZChfdHJhY2UpIHtcbiAgICAgICAgLy8gV2UgZG9uJ3Qgc2VuZCB0cmFjZXMgb24gZW5kIGJlY2F1c2Ugd2UgYWxyZWFkeSBzZW5kIHRoZW0gb24gc3RhcnRcbiAgICB9XG4gICAgYXN5bmMgb25TcGFuU3RhcnQoX3NwYW4pIHtcbiAgICAgICAgLy8gV2UgZG9uJ3Qgc2VuZCBzcGFucyBvbiBzdGFydCBiZWNhdXNlIHdlIHNlbmQgdGhlbSBhdCB0aGUgZW5kXG4gICAgfVxuICAgIGFzeW5jIG9uU3BhbkVuZChzcGFuKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuI3NhZmVBZGRJdGVtKHNwYW4pO1xuICAgIH1cbiAgICBhc3luYyBzaHV0ZG93bih0aW1lb3V0KSB7XG4gICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgICB0aGlzLiN0aW1lci5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBmb3JjZSBzaHV0ZG93biB0aGUgSFRUUCByZXF1ZXN0XG4gICAgICAgICAgICAgICAgdGhpcy4jdGltZW91dEFib3J0Q29udHJvbGxlcj8uYWJvcnQoKTtcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnU2h1dHRpbmcgZG93biBncmFjZWZ1bGx5Jyk7XG4gICAgICAgIHdoaWxlICh0aGlzLiNidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKGBXYWl0aW5nIGZvciBidWZmZXIgdG8gZW1wdHkuIEl0ZW1zIGxlZnQ6ICR7dGhpcy4jYnVmZmVyLmxlbmd0aH1gKTtcbiAgICAgICAgICAgIGlmICghdGhpcy4jZXhwb3J0SW5Qcm9ncmVzcykge1xuICAgICAgICAgICAgICAgIC8vIG5vIGN1cnJlbnQgZXhwb3J0IGluIHByb2dyZXNzLiBGb3JjaW5nIGFsbCBpdGVtcyB0byBiZSBleHBvcnRlZFxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydEJhdGNoZXModHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy4jdGltZW91dEFib3J0Q29udHJvbGxlcj8uc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1RpbWVvdXQgcmVhY2hlZCwgZm9yY2UgZmx1c2hpbmcnKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNleHBvcnRCYXRjaGVzKHRydWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdXNpbmcgc2V0VGltZW91dCB0byBhZGQgdG8gdGhlIGV2ZW50IGxvb3AgYW5kIGtlZXAgdGhpcyBhbGl2ZSB1bnRpbCBkb25lXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gdGhpcy4jdGltZXIuc2V0VGltZW91dChyZXNvbHZlLCA1MDApKTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZGVidWcoJ0J1ZmZlciBlbXB0eS4gRXhpdGluZycpO1xuICAgICAgICBpZiAodGhpcy4jdGltZXIgJiYgdGhpcy4jdGltZW91dCkge1xuICAgICAgICAgICAgLy8gbWFraW5nIHN1cmUgdGhlcmUgYXJlIG5vIG1vcmUgcmVxdWVzdHNcbiAgICAgICAgICAgIHRoaXMuI3RpbWVyLmNsZWFyVGltZW91dCh0aGlzLiN0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBmb3JjZUZsdXNoKCkge1xuICAgICAgICBpZiAodGhpcy4jYnVmZmVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2V4cG9ydEJhdGNoZXModHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgY2xhc3MgTXVsdGlUcmFjaW5nUHJvY2Vzc29yIHtcbiAgICAjcHJvY2Vzc29ycyA9IFtdO1xuICAgIHN0YXJ0KCkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBpZiAocHJvY2Vzc29yLnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgcHJvY2Vzc29yLnN0YXJ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYWRkVHJhY2VQcm9jZXNzb3IocHJvY2Vzc29yKSB7XG4gICAgICAgIHRoaXMuI3Byb2Nlc3NvcnMucHVzaChwcm9jZXNzb3IpO1xuICAgIH1cbiAgICBzZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdTaHV0dGluZyBkb3duIG9sZCBwcm9jZXNzb3JzJyk7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIHByb2Nlc3Nvci5zaHV0ZG93bigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3Byb2Nlc3NvcnMgPSBwcm9jZXNzb3JzO1xuICAgIH1cbiAgICBhc3luYyBvblRyYWNlU3RhcnQodHJhY2UpIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc29yLm9uVHJhY2VTdGFydCh0cmFjZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25UcmFjZUVuZCh0cmFjZSkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25UcmFjZUVuZCh0cmFjZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25TcGFuU3RhcnQoc3Bhbikge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3Iub25TcGFuU3RhcnQoc3Bhbik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25TcGFuRW5kKHNwYW4pIHtcbiAgICAgICAgZm9yIChjb25zdCBwcm9jZXNzb3Igb2YgdGhpcy4jcHJvY2Vzc29ycykge1xuICAgICAgICAgICAgYXdhaXQgcHJvY2Vzc29yLm9uU3BhbkVuZChzcGFuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzaHV0ZG93bih0aW1lb3V0KSB7XG4gICAgICAgIGZvciAoY29uc3QgcHJvY2Vzc29yIG9mIHRoaXMuI3Byb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3Nvci5zaHV0ZG93bih0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBmb3JjZUZsdXNoKCkge1xuICAgICAgICBmb3IgKGNvbnN0IHByb2Nlc3NvciBvZiB0aGlzLiNwcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICBhd2FpdCBwcm9jZXNzb3IuZm9yY2VGbHVzaCgpO1xuICAgICAgICB9XG4gICAgfVxufVxubGV0IF9kZWZhdWx0RXhwb3J0ZXIgPSBudWxsO1xubGV0IF9kZWZhdWx0UHJvY2Vzc29yID0gbnVsbDtcbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0RXhwb3J0ZXIoKSB7XG4gICAgaWYgKCFfZGVmYXVsdEV4cG9ydGVyKSB7XG4gICAgICAgIF9kZWZhdWx0RXhwb3J0ZXIgPSBuZXcgQ29uc29sZVNwYW5FeHBvcnRlcigpO1xuICAgIH1cbiAgICByZXR1cm4gX2RlZmF1bHRFeHBvcnRlcjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0UHJvY2Vzc29yKCkge1xuICAgIGlmICghX2RlZmF1bHRQcm9jZXNzb3IpIHtcbiAgICAgICAgX2RlZmF1bHRQcm9jZXNzb3IgPSBuZXcgQmF0Y2hUcmFjZVByb2Nlc3NvcihkZWZhdWx0RXhwb3J0ZXIoKSk7XG4gICAgfVxuICAgIHJldHVybiBfZGVmYXVsdFByb2Nlc3Nvcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb2Nlc3Nvci5tanMubWFwIiwiaW1wb3J0IHsgcmFuZG9tVVVJRCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbi8qKlxuICogR2VuZXJhdGUgYW4gSVNPIDg2MDEgdGltZXN0YW1wIG9mIHRoZSBjdXJyZW50IHRpbWUuXG4gKiBAcmV0dXJucyBBbiBJU08gODYwMSB0aW1lc3RhbXAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0aW1lSXNvKCkge1xuICAgIHJldHVybiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG59XG4vKipcbiAqIEdlbmVyYXRlIGEgdHJhY2UgSUQgYnkgY3JlYXRpbmcgYSByYW5kb20gVVVJRCB2NCBhbmQgcmVtb3ZpbmcgdGhlIGRhc2hlcy4gVGhpcyBpcyB0aGUgZXF1aXZhbGVudFxuICogb2YgYHV1aWQ0KCkuaGV4YCBpbiBQeXRob24gYW5kIHByZWZpeGluZyBpdCB3aXRoIGB0cmFjZV9gLlxuICogQHJldHVybnMgQSB0cmFjZSBJRC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlVHJhY2VJZCgpIHtcbiAgICByZXR1cm4gYHRyYWNlXyR7cmFuZG9tVVVJRCgpLnJlcGxhY2UoLy0vZywgJycpfWA7XG59XG4vKipcbiAqIEdlbmVyYXRlIGEgc3BhbiBJRCBieSBjcmVhdGluZyBhIHJhbmRvbSBVVUlEIHY0IGFuZCByZW1vdmluZyB0aGUgZGFzaGVzLiBUaGlzIGlzIHRoZSBlcXVpdmFsZW50XG4gKiBvZiBgdXVpZDQoKS5oZXhgIGluIFB5dGhvbiBhbmQgcHJlZml4aW5nIGl0IHdpdGggYHNwYW5fYC5cbiAqIEByZXR1cm5zIEEgc3BhbiBJRC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlU3BhbklkKCkge1xuICAgIHJldHVybiBgc3Bhbl8ke3JhbmRvbVVVSUQoKS5yZXBsYWNlKC8tL2csICcnKS5zbGljZSgwLCAyNCl9YDtcbn1cbi8qKlxuICogR2VuZXJhdGUgYSBncm91cCBJRCBieSBjcmVhdGluZyBhIHJhbmRvbSBVVUlEIHY0IGFuZCByZW1vdmluZyB0aGUgZGFzaGVzLiBUaGlzIGlzIHRoZSBlcXVpdmFsZW50XG4gKiBvZiBgdXVpZDQoKS5oZXhgIGluIFB5dGhvbiBhbmQgcHJlZml4aW5nIGl0IHdpdGggYGdyb3VwX2AuXG4gKiBAcmV0dXJucyBBIGdyb3VwIElELlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVHcm91cElkKCkge1xuICAgIHJldHVybiBgZ3JvdXBfJHtyYW5kb21VVUlEKCkucmVwbGFjZSgvLS9nLCAnJykuc2xpY2UoMCwgMjQpfWA7XG59XG4vKipcbiAqIFJlbW92ZSBmaWVsZHMgdGhhdCBzdGFydCB3aXRoIGFuIHVuZGVyc2NvcmUgZnJvbSBhbiBvYmplY3QuXG4gKiBAcGFyYW0gb2JqIC0gVGhlIG9iamVjdCB0byByZW1vdmUgcHJpdmF0ZSBmaWVsZHMgZnJvbS5cbiAqIEByZXR1cm5zIEEgbmV3IG9iamVjdCB3aXRoIHByaXZhdGUgZmllbGRzIHJlbW92ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVQcml2YXRlRmllbGRzKG9iaikge1xuICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMob2JqKS5maWx0ZXIoKFtrZXldKSA9PiAha2V5LnN0YXJ0c1dpdGgoJ18nKSkpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMubWpzLm1hcCIsImltcG9ydCBsb2dnZXIgZnJvbSBcIi4uL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlU3BhbklkLCByZW1vdmVQcml2YXRlRmllbGRzLCB0aW1lSXNvIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5leHBvcnQgY2xhc3MgU3BhbiB7XG4gICAgdHlwZSA9ICd0cmFjZS5zcGFuJztcbiAgICAjZGF0YTtcbiAgICAjdHJhY2VJZDtcbiAgICAjc3BhbklkO1xuICAgICNwYXJlbnRJZDtcbiAgICAjcHJvY2Vzc29yO1xuICAgICNzdGFydGVkQXQ7XG4gICAgI2VuZGVkQXQ7XG4gICAgI2Vycm9yO1xuICAgICNwcmV2aW91c1NwYW47XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgcHJvY2Vzc29yKSB7XG4gICAgICAgIHRoaXMuI3RyYWNlSWQgPSBvcHRpb25zLnRyYWNlSWQ7XG4gICAgICAgIHRoaXMuI3NwYW5JZCA9IG9wdGlvbnMuc3BhbklkID8/IGdlbmVyYXRlU3BhbklkKCk7XG4gICAgICAgIHRoaXMuI2RhdGEgPSBvcHRpb25zLmRhdGE7XG4gICAgICAgIHRoaXMuI3Byb2Nlc3NvciA9IHByb2Nlc3NvcjtcbiAgICAgICAgdGhpcy4jcGFyZW50SWQgPSBvcHRpb25zLnBhcmVudElkID8/IG51bGw7XG4gICAgICAgIHRoaXMuI2Vycm9yID0gb3B0aW9ucy5lcnJvciA/PyBudWxsO1xuICAgICAgICB0aGlzLiNzdGFydGVkQXQgPSBvcHRpb25zLnN0YXJ0ZWRBdCA/PyBudWxsO1xuICAgICAgICB0aGlzLiNlbmRlZEF0ID0gb3B0aW9ucy5lbmRlZEF0ID8/IG51bGw7XG4gICAgfVxuICAgIGdldCB0cmFjZUlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jdHJhY2VJZDtcbiAgICB9XG4gICAgZ2V0IHNwYW5EYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZGF0YTtcbiAgICB9XG4gICAgZ2V0IHNwYW5JZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3NwYW5JZDtcbiAgICB9XG4gICAgZ2V0IHBhcmVudElkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jcGFyZW50SWQ7XG4gICAgfVxuICAgIGdldCBwcmV2aW91c1NwYW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNwcmV2aW91c1NwYW47XG4gICAgfVxuICAgIHNldCBwcmV2aW91c1NwYW4oc3Bhbikge1xuICAgICAgICB0aGlzLiNwcmV2aW91c1NwYW4gPSBzcGFuO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXJ0ZWRBdCkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1NwYW4gYWxyZWFkeSBzdGFydGVkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jc3RhcnRlZEF0ID0gdGltZUlzbygpO1xuICAgICAgICB0aGlzLiNwcm9jZXNzb3Iub25TcGFuU3RhcnQodGhpcyk7XG4gICAgfVxuICAgIGVuZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuI2VuZGVkQXQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnU3BhbiBhbHJlYWR5IGZpbmlzaGVkJywgdGhpcy5zcGFuRGF0YSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jZW5kZWRBdCA9IHRpbWVJc28oKTtcbiAgICAgICAgdGhpcy4jcHJvY2Vzc29yLm9uU3BhbkVuZCh0aGlzKTtcbiAgICB9XG4gICAgc2V0RXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdGhpcy4jZXJyb3IgPSBlcnJvcjtcbiAgICB9XG4gICAgZ2V0IGVycm9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZXJyb3I7XG4gICAgfVxuICAgIGdldCBzdGFydGVkQXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGFydGVkQXQ7XG4gICAgfVxuICAgIGdldCBlbmRlZEF0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZW5kZWRBdDtcbiAgICB9XG4gICAgY2xvbmUoKSB7XG4gICAgICAgIGNvbnN0IHNwYW4gPSBuZXcgU3Bhbih7XG4gICAgICAgICAgICB0cmFjZUlkOiB0aGlzLnRyYWNlSWQsXG4gICAgICAgICAgICBzcGFuSWQ6IHRoaXMuc3BhbklkLFxuICAgICAgICAgICAgcGFyZW50SWQ6IHRoaXMucGFyZW50SWQgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgZGF0YTogdGhpcy5zcGFuRGF0YSxcbiAgICAgICAgICAgIHN0YXJ0ZWRBdDogdGhpcy4jc3RhcnRlZEF0ID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGVuZGVkQXQ6IHRoaXMuI2VuZGVkQXQgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgZXJyb3I6IHRoaXMuI2Vycm9yID8/IHVuZGVmaW5lZCxcbiAgICAgICAgfSwgdGhpcy4jcHJvY2Vzc29yKTtcbiAgICAgICAgc3Bhbi5wcmV2aW91c1NwYW4gPSB0aGlzLnByZXZpb3VzU3Bhbj8uY2xvbmUoKTtcbiAgICAgICAgcmV0dXJuIHNwYW47XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9iamVjdDogdGhpcy50eXBlLFxuICAgICAgICAgICAgaWQ6IHRoaXMuc3BhbklkLFxuICAgICAgICAgICAgdHJhY2VfaWQ6IHRoaXMudHJhY2VJZCxcbiAgICAgICAgICAgIHBhcmVudF9pZDogdGhpcy5wYXJlbnRJZCxcbiAgICAgICAgICAgIHN0YXJ0ZWRfYXQ6IHRoaXMuc3RhcnRlZEF0LFxuICAgICAgICAgICAgZW5kZWRfYXQ6IHRoaXMuZW5kZWRBdCxcbiAgICAgICAgICAgIHNwYW5fZGF0YTogcmVtb3ZlUHJpdmF0ZUZpZWxkcyh0aGlzLnNwYW5EYXRhKSxcbiAgICAgICAgICAgIGVycm9yOiB0aGlzLmVycm9yLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBOb29wU3BhbiBleHRlbmRzIFNwYW4ge1xuICAgIGNvbnN0cnVjdG9yKGRhdGEsIHByb2Nlc3Nvcikge1xuICAgICAgICBzdXBlcih7IHRyYWNlSWQ6ICduby1vcCcsIHNwYW5JZDogJ25vLW9wJywgZGF0YSB9LCBwcm9jZXNzb3IpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbmQoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0RXJyb3IoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zcGFucy5tanMubWFwIiwiaW1wb3J0IHsgZGVmYXVsdFByb2Nlc3NvciB9IGZyb20gXCIuL3Byb2Nlc3Nvci5tanNcIjtcbmltcG9ydCB7IGdlbmVyYXRlVHJhY2VJZCB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuZXhwb3J0IGNsYXNzIFRyYWNlIHtcbiAgICB0eXBlID0gJ3RyYWNlJztcbiAgICB0cmFjZUlkO1xuICAgIG5hbWU7XG4gICAgZ3JvdXBJZCA9IG51bGw7XG4gICAgbWV0YWRhdGE7XG4gICAgI3Byb2Nlc3NvcjtcbiAgICAjc3RhcnRlZDtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy50cmFjZUlkID0gb3B0aW9ucy50cmFjZUlkID8/IGdlbmVyYXRlVHJhY2VJZCgpO1xuICAgICAgICB0aGlzLm5hbWUgPSBvcHRpb25zLm5hbWUgPz8gJ0FnZW50IHdvcmtmbG93JztcbiAgICAgICAgdGhpcy5ncm91cElkID0gb3B0aW9ucy5ncm91cElkID8/IG51bGw7XG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBvcHRpb25zLm1ldGFkYXRhID8/IHt9O1xuICAgICAgICB0aGlzLiNwcm9jZXNzb3IgPSBwcm9jZXNzb3IgPz8gZGVmYXVsdFByb2Nlc3NvcigpO1xuICAgICAgICB0aGlzLiNzdGFydGVkID0gb3B0aW9ucy5zdGFydGVkID8/IGZhbHNlO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgYXdhaXQgdGhpcy4jcHJvY2Vzc29yLm9uVHJhY2VTdGFydCh0aGlzKTtcbiAgICB9XG4gICAgYXN5bmMgZW5kKCkge1xuICAgICAgICBpZiAoIXRoaXMuI3N0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGFydGVkID0gZmFsc2U7XG4gICAgICAgIGF3YWl0IHRoaXMuI3Byb2Nlc3Nvci5vblRyYWNlRW5kKHRoaXMpO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFjZSh7XG4gICAgICAgICAgICB0cmFjZUlkOiB0aGlzLnRyYWNlSWQsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBncm91cElkOiB0aGlzLmdyb3VwSWQgPz8gdW5kZWZpbmVkLFxuICAgICAgICAgICAgbWV0YWRhdGE6IHRoaXMubWV0YWRhdGEsXG4gICAgICAgICAgICBzdGFydGVkOiB0aGlzLiNzdGFydGVkLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb2JqZWN0OiB0aGlzLnR5cGUsXG4gICAgICAgICAgICBpZDogdGhpcy50cmFjZUlkLFxuICAgICAgICAgICAgd29ya2Zsb3dfbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgZ3JvdXBfaWQ6IHRoaXMuZ3JvdXBJZCxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB0aGlzLm1ldGFkYXRhLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBOb29wVHJhY2UgZXh0ZW5kcyBUcmFjZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKHt9KTtcbiAgICB9XG4gICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXN5bmMgZW5kKCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhY2VzLm1qcy5tYXAiLCJpbXBvcnQgeyBnZXRDdXJyZW50U3BhbiwgZ2V0Q3VycmVudFRyYWNlIH0gZnJvbSBcIi4vY29udGV4dC5tanNcIjtcbmltcG9ydCB7IHRyYWNpbmcgfSBmcm9tIFwiLi4vY29uZmlnLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgTXVsdGlUcmFjaW5nUHJvY2Vzc29yIH0gZnJvbSBcIi4vcHJvY2Vzc29yLm1qc1wiO1xuaW1wb3J0IHsgTm9vcFNwYW4sIFNwYW4gfSBmcm9tIFwiLi9zcGFucy5tanNcIjtcbmltcG9ydCB7IE5vb3BUcmFjZSwgVHJhY2UgfSBmcm9tIFwiLi90cmFjZXMubWpzXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVRyYWNlSWQgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmV4cG9ydCBjbGFzcyBUcmFjZVByb3ZpZGVyIHtcbiAgICAjbXVsdGlQcm9jZXNzb3I7XG4gICAgI2Rpc2FibGVkO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3NvciA9IG5ldyBNdWx0aVRyYWNpbmdQcm9jZXNzb3IoKTtcbiAgICAgICAgdGhpcy4jZGlzYWJsZWQgPSB0cmFjaW5nLmRpc2FibGVkO1xuICAgICAgICB0aGlzLiNhZGRDbGVhbnVwTGlzdGVuZXJzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhIHByb2Nlc3NvciB0byB0aGUgbGlzdCBvZiBwcm9jZXNzb3JzLiBFYWNoIHByb2Nlc3NvciB3aWxsIHJlY2VpdmUgYWxsIHRyYWNlcy9zcGFucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwcm9jZXNzb3IgLSBUaGUgcHJvY2Vzc29yIHRvIGFkZC5cbiAgICAgKi9cbiAgICByZWdpc3RlclByb2Nlc3Nvcihwcm9jZXNzb3IpIHtcbiAgICAgICAgdGhpcy4jbXVsdGlQcm9jZXNzb3IuYWRkVHJhY2VQcm9jZXNzb3IocHJvY2Vzc29yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIFRoaXMgd2lsbCByZXBsYWNlIGFueSBleGlzdGluZyBwcm9jZXNzb3JzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHByb2Nlc3NvcnMgLSBUaGUgbGlzdCBvZiBwcm9jZXNzb3JzIHRvIHNldC5cbiAgICAgKi9cbiAgICBzZXRQcm9jZXNzb3JzKHByb2Nlc3NvcnMpIHtcbiAgICAgICAgdGhpcy4jbXVsdGlQcm9jZXNzb3Iuc2V0UHJvY2Vzc29ycyhwcm9jZXNzb3JzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjdXJyZW50IHRyYWNlLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGN1cnJlbnQgdHJhY2UuXG4gICAgICovXG4gICAgZ2V0Q3VycmVudFRyYWNlKCkge1xuICAgICAgICByZXR1cm4gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgfVxuICAgIGdldEN1cnJlbnRTcGFuKCkge1xuICAgICAgICByZXR1cm4gZ2V0Q3VycmVudFNwYW4oKTtcbiAgICB9XG4gICAgc2V0RGlzYWJsZWQoZGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy4jZGlzYWJsZWQgPSBkaXNhYmxlZDtcbiAgICB9XG4gICAgc3RhcnRFeHBvcnRMb29wKCkge1xuICAgICAgICB0aGlzLiNtdWx0aVByb2Nlc3Nvci5zdGFydCgpO1xuICAgIH1cbiAgICBjcmVhdGVUcmFjZSh0cmFjZU9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuI2Rpc2FibGVkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1RyYWNpbmcgaXMgZGlzYWJsZWQsIE5vdCBjcmVhdGluZyB0cmFjZSAlbycsIHRyYWNlT3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vb3BUcmFjZSgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRyYWNlSWQgPSB0cmFjZU9wdGlvbnMudHJhY2VJZCA/PyBnZW5lcmF0ZVRyYWNlSWQoKTtcbiAgICAgICAgY29uc3QgbmFtZSA9IHRyYWNlT3B0aW9ucy5uYW1lID8/ICdBZ2VudCB3b3JrZmxvdyc7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQ3JlYXRpbmcgdHJhY2UgJXMgd2l0aCBuYW1lICVzJywgdHJhY2VJZCwgbmFtZSk7XG4gICAgICAgIHJldHVybiBuZXcgVHJhY2UoeyAuLi50cmFjZU9wdGlvbnMsIG5hbWUsIHRyYWNlSWQgfSwgdGhpcy4jbXVsdGlQcm9jZXNzb3IpO1xuICAgIH1cbiAgICBjcmVhdGVTcGFuKHNwYW5PcHRpb25zLCBwYXJlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuI2Rpc2FibGVkIHx8IHNwYW5PcHRpb25zLmRpc2FibGVkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1RyYWNpbmcgaXMgZGlzYWJsZWQsIE5vdCBjcmVhdGluZyBzcGFuICVvJywgc3Bhbk9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBhcmVudElkO1xuICAgICAgICBsZXQgdHJhY2VJZDtcbiAgICAgICAgaWYgKCFwYXJlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUcmFjZSA9IGdldEN1cnJlbnRUcmFjZSgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFNwYW4gPSBnZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50VHJhY2UpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ05vIGFjdGl2ZSB0cmFjZS4gTWFrZSBzdXJlIHRvIHN0YXJ0IGEgdHJhY2Ugd2l0aCBgd2l0aFRyYWNlKClgIGZpcnN0LiBSZXR1cm5pbmcgTm9vcFNwYW4uJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VycmVudFNwYW4gaW5zdGFuY2VvZiBOb29wU3BhbiB8fFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUcmFjZSBpbnN0YW5jZW9mIE5vb3BUcmFjZSkge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgUGFyZW50ICR7Y3VycmVudFNwYW59IG9yICR7Y3VycmVudFRyYWNlfSBpcyBuby1vcCwgcmV0dXJuaW5nIE5vb3BTcGFuYCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cmFjZUlkID0gY3VycmVudFRyYWNlLnRyYWNlSWQ7XG4gICAgICAgICAgICBpZiAoY3VycmVudFNwYW4pIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1VzaW5nIHBhcmVudCBzcGFuICVzJywgY3VycmVudFNwYW4uc3BhbklkKTtcbiAgICAgICAgICAgICAgICBwYXJlbnRJZCA9IGN1cnJlbnRTcGFuLnNwYW5JZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnTm8gcGFyZW50IHNwYW4sIHVzaW5nIGN1cnJlbnQgdHJhY2UgJXMnLCBjdXJyZW50VHJhY2UudHJhY2VJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyZW50IGluc3RhbmNlb2YgVHJhY2UpIHtcbiAgICAgICAgICAgIGlmIChwYXJlbnQgaW5zdGFuY2VvZiBOb29wVHJhY2UpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1BhcmVudCB0cmFjZSBpcyBuby1vcCwgcmV0dXJuaW5nIE5vb3BTcGFuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cmFjZUlkID0gcGFyZW50LnRyYWNlSWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGFyZW50IGluc3RhbmNlb2YgU3Bhbikge1xuICAgICAgICAgICAgaWYgKHBhcmVudCBpbnN0YW5jZW9mIE5vb3BTcGFuKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdQYXJlbnQgc3BhbiBpcyBuby1vcCwgcmV0dXJuaW5nIE5vb3BTcGFuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnRJZCA9IHBhcmVudC5zcGFuSWQ7XG4gICAgICAgICAgICB0cmFjZUlkID0gcGFyZW50LnRyYWNlSWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0cmFjZUlkKSB7XG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ05vIHRyYWNlSWQgZm91bmQuIE1ha2Ugc3VyZSB0byBzdGFydCBhIHRyYWNlIHdpdGggYHdpdGhUcmFjZSgpYCBmaXJzdC4gUmV0dXJuaW5nIE5vb3BTcGFuLicpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBOb29wU3BhbihzcGFuT3B0aW9ucy5kYXRhLCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBDcmVhdGluZyBzcGFuICR7SlNPTi5zdHJpbmdpZnkoc3Bhbk9wdGlvbnMuZGF0YSl9IHdpdGggaWQgJHtzcGFuT3B0aW9ucy5zcGFuSWQgPz8gdHJhY2VJZH1gKTtcbiAgICAgICAgcmV0dXJuIG5ldyBTcGFuKHtcbiAgICAgICAgICAgIC4uLnNwYW5PcHRpb25zLFxuICAgICAgICAgICAgdHJhY2VJZCxcbiAgICAgICAgICAgIHBhcmVudElkLFxuICAgICAgICB9LCB0aGlzLiNtdWx0aVByb2Nlc3Nvcik7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKHRpbWVvdXQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnU2h1dHRpbmcgZG93biB0cmFjaW5nIHByb3ZpZGVyJyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNtdWx0aVByb2Nlc3Nvci5zaHV0ZG93bih0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3Igc2h1dHRpbmcgZG93biB0cmFjaW5nIHByb3ZpZGVyICVvJywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBBZGRzIGxpc3RlbmVycyB0byBgcHJvY2Vzc2AgdG8gZW5zdXJlIGBzaHV0ZG93bmAgb2NjdXJzIGJlZm9yZSBleGl0LiAqL1xuICAgICNhZGRDbGVhbnVwTGlzdGVuZXJzKCkge1xuICAgICAgICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzLm9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAvLyBoYW5kbGluZyBOb2RlLmpzIHByb2Nlc3MgdGVybWluYXRpb25cbiAgICAgICAgICAgIGNvbnN0IGNsZWFudXAgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0NsZWFudXAgdGltZW91dCwgZm9yY2luZyBleGl0Jyk7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgICAgICAgICAgICB9LCA1MDAwKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNodXRkb3duKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBub3JtYWwgdGVybWluYXRpb25cbiAgICAgICAgICAgIHByb2Nlc3Mub24oJ2JlZm9yZUV4aXQnLCBjbGVhbnVwKTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBDVFJMK0MgKFNJR0lOVClcbiAgICAgICAgICAgIHByb2Nlc3Mub24oJ1NJR0lOVCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBjbGVhbnVwKCk7XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEzMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEhhbmRsZSB0ZXJtaW5hdGlvbiAoU0lHVEVSTSlcbiAgICAgICAgICAgIHByb2Nlc3Mub24oJ1NJR1RFUk0nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcHJvY2Vzcy5vbigndW5oYW5kbGVkUmVqZWN0aW9uJywgYXN5bmMgKHJlYXNvbiwgcHJvbWlzZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5lcnJvcignVW5oYW5kbGVkIHJlamVjdGlvbicsIHJlYXNvbiwgcHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgY2xlYW51cCgpO1xuICAgICAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGZvcmNlRmx1c2goKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuI211bHRpUHJvY2Vzc29yLmZvcmNlRmx1c2goKTtcbiAgICB9XG59XG5sZXQgR0xPQkFMX1RSQUNFX1BST1ZJREVSID0gdW5kZWZpbmVkO1xuZXhwb3J0IGZ1bmN0aW9uIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKSB7XG4gICAgaWYgKCFHTE9CQUxfVFJBQ0VfUFJPVklERVIpIHtcbiAgICAgICAgR0xPQkFMX1RSQUNFX1BST1ZJREVSID0gbmV3IFRyYWNlUHJvdmlkZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIEdMT0JBTF9UUkFDRV9QUk9WSURFUjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb3ZpZGVyLm1qcy5tYXAiLCJpbXBvcnQgeyByZXNldEN1cnJlbnRTcGFuLCBzZXRDdXJyZW50U3Bhbiwgd2l0aE5ld1NwYW5Db250ZXh0LCB9IGZyb20gXCIuL2NvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vcHJvdmlkZXIubWpzXCI7XG5mdW5jdGlvbiBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZVNwYW4pIHtcbiAgICByZXR1cm4gYXN5bmMgKGZuLCAuLi5hcmdzKSA9PiB7XG4gICAgICAgIC8vIENyZWF0aW5nIGEgbmV3IHNwYW4gY29udGV4dCB0byBtYWtlIHN1cmUgdGhhdCB0aGUgcHJldmlvdXMgc3BhbiBpcyBjb3JyZWN0bHkgcmVzZXRcbiAgICAgICAgcmV0dXJuIHdpdGhOZXdTcGFuQ29udGV4dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzcGFuID0gY3JlYXRlU3BhbiguLi5hcmdzKTtcbiAgICAgICAgICAgIHNldEN1cnJlbnRTcGFuKHNwYW4pO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzcGFuLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGZuKHNwYW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGVycm9yLmRhdGEsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBzcGFuLmVuZCgpO1xuICAgICAgICAgICAgICAgIHJlc2V0Q3VycmVudFNwYW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IHJlc3BvbnNlIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXJcbiAqIHVzZSBgd2l0aFJlc3BvbnNlU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogVGhpcyBzcGFuIGNhcHR1cmVzIHRoZSBkZXRhaWxzIG9mIGEgbW9kZWwgcmVzcG9uc2UsIHByaW1hcmlseSB0aGUgcmVzcG9uc2UgaWRlbnRpZmllci5cbiAqIElmIHlvdSBuZWVkIHRvIGNhcHR1cmUgZGV0YWlsZWQgZ2VuZXJhdGlvbiBpbmZvcm1hdGlvbiBzdWNoIGFzIGlucHV0L291dHB1dCBtZXNzYWdlcyxcbiAqIG1vZGVsIGNvbmZpZ3VyYXRpb24sIG9yIHVzYWdlIGRhdGEsIHVzZSBgY3JlYXRlR2VuZXJhdGlvblNwYW4oKWAgaW5zdGVhZC5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNwYW4gY3JlYXRpb24gb3B0aW9ucywgaW5jbHVkaW5nIHNwYW4gZGF0YSBhbmQgaWRlbnRpZmllcnMuXG4gKiBAcGFyYW0gcGFyZW50IC0gVGhlIHBhcmVudCBzcGFuIG9yIHRyYWNlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBjdXJyZW50IHRyYWNlL3NwYW4gd2lsbCBiZSB1c2VkXG4gKiBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIHJlc3BvbnNlIHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZXNwb25zZVNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZScsXG4gICAgICAgICAgICAuLi5vcHRpb25zLmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IHJlc3BvbnNlIHNwYW4gYW5kIGF1dG9tYXRpY2FsbHkgc3RhcnQgYW5kIGVuZCBpdC5cbiAqXG4gKiBUaGlzIHNwYW4gY2FwdHVyZXMgdGhlIGRldGFpbHMgb2YgYSBtb2RlbCByZXNwb25zZSwgcHJpbWFyaWx5IHRoZSByZXNwb25zZSBpZGVudGlmaWVyLlxuICogSWYgeW91IG5lZWQgdG8gY2FwdHVyZSBkZXRhaWxlZCBnZW5lcmF0aW9uIGluZm9ybWF0aW9uIHN1Y2ggYXMgaW5wdXQvb3V0cHV0IG1lc3NhZ2VzLFxuICogbW9kZWwgY29uZmlndXJhdGlvbiwgb3IgdXNhZ2UgZGF0YSwgdXNlIGBnZW5lcmF0aW9uU3BhbigpYCBpbnN0ZWFkLlxuICovXG5leHBvcnQgY29uc3Qgd2l0aFJlc3BvbnNlU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlUmVzcG9uc2VTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGFnZW50IHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseSwgeW91IHNob3VsZCBlaXRoZXJcbiAqIHVzZSBgd2l0aEFnZW50U3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbCBzcGFuIGNyZWF0aW9uIG9wdGlvbnMsIGluY2x1ZGluZyBzcGFuIGRhdGEgYW5kIGlkZW50aWZpZXJzLlxuICogQHBhcmFtIHBhcmVudCAtIFRoZSBwYXJlbnQgc3BhbiBvciB0cmFjZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgY3VycmVudCB0cmFjZS9zcGFuIHdpbGwgYmUgdXNlZFxuICogYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCBhZ2VudCBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQWdlbnRTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdhZ2VudCcsXG4gICAgICAgICAgICBuYW1lOiBvcHRpb25zPy5kYXRhPy5uYW1lID8/ICdBZ2VudCcsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBhZ2VudCBzcGFuIGFuZCBhdXRvbWF0aWNhbGx5IHN0YXJ0IGFuZCBlbmQgaXQuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoQWdlbnRTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVBZ2VudFNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZnVuY3Rpb24gc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoRnVuY3Rpb25TcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsIHNwYW4gY3JlYXRpb24gb3B0aW9ucywgaW5jbHVkaW5nIHNwYW4gZGF0YSBhbmQgaWRlbnRpZmllcnMuXG4gKiBAcGFyYW0gcGFyZW50IC0gVGhlIHBhcmVudCBzcGFuIG9yIHRyYWNlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBjdXJyZW50IHRyYWNlL3NwYW4gd2lsbCBiZSB1c2VkXG4gKiBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIGZ1bmN0aW9uIHNwYW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGdW5jdGlvblNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgICAgIGlucHV0OiBvcHRpb25zPy5kYXRhPy5pbnB1dCA/PyAnJyxcbiAgICAgICAgICAgIG91dHB1dDogb3B0aW9ucz8uZGF0YT8ub3V0cHV0ID8/ICcnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZnVuY3Rpb24gc3BhbiBhbmQgYXV0b21hdGljYWxseSBzdGFydCBhbmQgZW5kIGl0LlxuICovXG5leHBvcnQgY29uc3Qgd2l0aEZ1bmN0aW9uU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlRnVuY3Rpb25TcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGhhbmRvZmYgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoSGFuZG9mZlNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgc3BhbiBjcmVhdGlvbiBvcHRpb25zLCBpbmNsdWRpbmcgc3BhbiBkYXRhIGFuZCBpZGVudGlmaWVycy5cbiAqIEBwYXJhbSBwYXJlbnQgLSBUaGUgcGFyZW50IHNwYW4gb3IgdHJhY2UuIElmIG5vdCBwcm92aWRlZCwgdGhlIGN1cnJlbnQgdHJhY2Uvc3BhbiB3aWxsIGJlIHVzZWRcbiAqIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHJldHVybnMgVGhlIG5ld2x5IGNyZWF0ZWQgaGFuZG9mZiBzcGFuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSGFuZG9mZlNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YTogeyB0eXBlOiAnaGFuZG9mZicsIC4uLm9wdGlvbnM/LmRhdGEgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaGFuZG9mZiBzcGFuIGFuZCBhdXRvbWF0aWNhbGx5IHN0YXJ0IGFuZCBlbmQgaXQuXG4gKi9cbmV4cG9ydCBjb25zdCB3aXRoSGFuZG9mZlNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUhhbmRvZmZTcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGdlbmVyYXRpb24gc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlclxuICogdXNlIGB3aXRoR2VuZXJhdGlvblNwYW4oKWAgb3IgY2FsbCBgc3Bhbi5zdGFydCgpYCBhbmQgYHNwYW4uZW5kKClgIG1hbnVhbGx5LlxuICpcbiAqIFRoaXMgc3BhbiBjYXB0dXJlcyB0aGUgZGV0YWlscyBvZiBhIG1vZGVsIGdlbmVyYXRpb24sIGluY2x1ZGluZyBpbnB1dC9vdXRwdXQgbWVzc2FnZVxuICogc2VxdWVuY2VzLCBtb2RlbCBpbmZvcm1hdGlvbiwgYW5kIHVzYWdlIGRhdGEuIElmIHlvdSBvbmx5IG5lZWQgdG8gY2FwdHVyZSBhIG1vZGVsIHJlc3BvbnNlXG4gKiBpZGVudGlmaWVyLCBjb25zaWRlciB1c2luZyBgY3JlYXRlUmVzcG9uc2VTcGFuKClgIGluc3RlYWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHZW5lcmF0aW9uU3BhbihvcHRpb25zLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVNwYW4oe1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0eXBlOiAnZ2VuZXJhdGlvbicsXG4gICAgICAgICAgICAuLi5vcHRpb25zPy5kYXRhLFxuICAgICAgICB9LFxuICAgIH0sIHBhcmVudCk7XG59XG4vKiogQXV0b21hdGljYWxseSBjcmVhdGUgYSBnZW5lcmF0aW9uIHNwYW4sIHJ1biBmbiBhbmQgY2xvc2UgdGhlIHNwYW4gKi9cbmV4cG9ydCBjb25zdCB3aXRoR2VuZXJhdGlvblNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZUdlbmVyYXRpb25TcGFuKTtcbi8qKlxuICogQ3JlYXRlIGEgbmV3IGN1c3RvbSBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHksIHlvdSBzaG91bGQgZWl0aGVyIHVzZVxuICogYHdpdGhDdXN0b21TcGFuKClgIG9yIGNhbGwgYHNwYW4uc3RhcnQoKWAgYW5kIGBzcGFuLmVuZCgpYCBtYW51YWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUN1c3RvbVNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ2N1c3RvbScsXG4gICAgICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoQ3VzdG9tU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlQ3VzdG9tU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBndWFyZHJhaWwgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LCB5b3Ugc2hvdWxkIGVpdGhlciB1c2VcbiAqIGB3aXRoR3VhcmRyYWlsU3BhbigpYCBvciBjYWxsIGBzcGFuLnN0YXJ0KClgIGFuZCBgc3Bhbi5lbmQoKWAgbWFudWFsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHdWFyZHJhaWxTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdndWFyZHJhaWwnLFxuICAgICAgICAgICAgdHJpZ2dlcmVkOiBmYWxzZSxcbiAgICAgICAgICAgIC4uLm9wdGlvbnM/LmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoR3VhcmRyYWlsU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlR3VhcmRyYWlsU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyB0cmFuc2NyaXB0aW9uIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRyYW5zY3JpcHRpb25TcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICd0cmFuc2NyaXB0aW9uJyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMuZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhUcmFuc2NyaXB0aW9uU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlVHJhbnNjcmlwdGlvblNwYW4pO1xuLyoqXG4gKiBDcmVhdGUgYSBuZXcgc3BlZWNoIHNwYW4uIFRoZSBzcGFuIHdpbGwgbm90IGJlIHN0YXJ0ZWQgYXV0b21hdGljYWxseS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNwZWVjaFNwYW4ob3B0aW9ucywgcGFyZW50KSB7XG4gICAgcmV0dXJuIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogJ3NwZWVjaCcsXG4gICAgICAgICAgICAuLi5vcHRpb25zLmRhdGEsXG4gICAgICAgIH0sXG4gICAgfSwgcGFyZW50KTtcbn1cbmV4cG9ydCBjb25zdCB3aXRoU3BlZWNoU3BhbiA9IF93aXRoU3BhbkZhY3RvcnkoY3JlYXRlU3BlZWNoU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBzcGVlY2ggZ3JvdXAgc3Bhbi4gVGhlIHNwYW4gd2lsbCBub3QgYmUgc3RhcnRlZCBhdXRvbWF0aWNhbGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3BlZWNoR3JvdXBTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdzcGVlY2hfZ3JvdXAnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhTcGVlY2hHcm91cFNwYW4gPSBfd2l0aFNwYW5GYWN0b3J5KGNyZWF0ZVNwZWVjaEdyb3VwU3Bhbik7XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBNQ1AgbGlzdCB0b29scyBzcGFuLiBUaGUgc3BhbiB3aWxsIG5vdCBiZSBzdGFydGVkIGF1dG9tYXRpY2FsbHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNQ1BMaXN0VG9vbHNTcGFuKG9wdGlvbnMsIHBhcmVudCkge1xuICAgIHJldHVybiBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuY3JlYXRlU3Bhbih7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6ICdtY3BfdG9vbHMnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucz8uZGF0YSxcbiAgICAgICAgfSxcbiAgICB9LCBwYXJlbnQpO1xufVxuZXhwb3J0IGNvbnN0IHdpdGhNQ1BMaXN0VG9vbHNTcGFuID0gX3dpdGhTcGFuRmFjdG9yeShjcmVhdGVNQ1BMaXN0VG9vbHNTcGFuKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNyZWF0ZVNwYW5zLm1qcy5tYXAiLCJpbXBvcnQgeyBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyIH0gZnJvbSBcIi4vcHJvdmlkZXIubWpzXCI7XG5leHBvcnQgeyBnZXRDdXJyZW50U3BhbiwgZ2V0Q3VycmVudFRyYWNlLCBnZXRPckNyZWF0ZVRyYWNlLCByZXNldEN1cnJlbnRTcGFuLCBzZXRDdXJyZW50U3Bhbiwgd2l0aFRyYWNlLCB9IGZyb20gXCIuL2NvbnRleHQubWpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9jcmVhdGVTcGFucy5tanNcIjtcbmV4cG9ydCB7IEJhdGNoVHJhY2VQcm9jZXNzb3IsIENvbnNvbGVTcGFuRXhwb3J0ZXIsIH0gZnJvbSBcIi4vcHJvY2Vzc29yLm1qc1wiO1xuZXhwb3J0IHsgTm9vcFNwYW4sIFNwYW4gfSBmcm9tIFwiLi9zcGFucy5tanNcIjtcbmV4cG9ydCB7IE5vb3BUcmFjZSwgVHJhY2UgfSBmcm9tIFwiLi90cmFjZXMubWpzXCI7XG5leHBvcnQgeyBnZW5lcmF0ZUdyb3VwSWQsIGdlbmVyYXRlU3BhbklkLCBnZW5lcmF0ZVRyYWNlSWQgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbi8qKlxuICogQWRkIGEgcHJvY2Vzc29yIHRvIHRoZSBsaXN0IG9mIHByb2Nlc3NvcnMuIEVhY2ggcHJvY2Vzc29yIHdpbGwgcmVjZWl2ZSBhbGwgdHJhY2VzL3NwYW5zLlxuICpcbiAqIEBwYXJhbSBwcm9jZXNzb3IgLSBUaGUgcHJvY2Vzc29yIHRvIGFkZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFRyYWNlUHJvY2Vzc29yKHByb2Nlc3Nvcikge1xuICAgIGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5yZWdpc3RlclByb2Nlc3Nvcihwcm9jZXNzb3IpO1xufVxuLyoqXG4gKiBTZXQgdGhlIGxpc3Qgb2YgcHJvY2Vzc29ycy4gVGhpcyB3aWxsIHJlcGxhY2UgYW55IGV4aXN0aW5nIHByb2Nlc3NvcnMuXG4gKlxuICogQHBhcmFtIHByb2Nlc3NvcnMgLSBUaGUgbGlzdCBvZiBwcm9jZXNzb3JzIHRvIHNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFRyYWNlUHJvY2Vzc29ycyhwcm9jZXNzb3JzKSB7XG4gICAgZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLnNldFByb2Nlc3NvcnMocHJvY2Vzc29ycyk7XG59XG4vKipcbiAqIFNldCB0aGUgZGlzYWJsZWQgc3RhdGUgb2YgdGhlIHRyYWNpbmcgcHJvdmlkZXIuXG4gKlxuICogQHBhcmFtIGRpc2FibGVkIC0gV2hldGhlciB0byBkaXNhYmxlIHRyYWNpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRUcmFjaW5nRGlzYWJsZWQoZGlzYWJsZWQpIHtcbiAgICBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuc2V0RGlzYWJsZWQoZGlzYWJsZWQpO1xufVxuLyoqXG4gKiBTdGFydCB0aGUgdHJhY2UgZXhwb3J0IGxvb3AuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydFRyYWNlRXhwb3J0TG9vcCgpIHtcbiAgICBnZXRHbG9iYWxUcmFjZVByb3ZpZGVyKCkuc3RhcnRFeHBvcnRMb29wKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIiwiaW1wb3J0IHsgUnVudGltZUV2ZW50RW1pdHRlciwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5leHBvcnQgY2xhc3MgRXZlbnRFbWl0dGVyRGVsZWdhdGUge1xuICAgIG9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLm9uKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRFbWl0dGVyO1xuICAgIH1cbiAgICBvZmYodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIub2ZmKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRFbWl0dGVyO1xuICAgIH1cbiAgICBlbWl0KHR5cGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQodHlwZSwgLi4uYXJncyk7XG4gICAgfVxuICAgIG9uY2UodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5ldmVudEVtaXR0ZXIub25jZSh0eXBlLCBsaXN0ZW5lcik7XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50RW1pdHRlcjtcbiAgICB9XG59XG4vKipcbiAqIEV2ZW50IGVtaXR0ZXIgdGhhdCBldmVyeSBBZ2VudCBpbnN0YW5jZSBpbmhlcml0cyBmcm9tIGFuZCB0aGF0IGVtaXRzIGV2ZW50cyBmb3IgdGhlIGxpZmVjeWNsZVxuICogb2YgdGhlIGFnZW50LlxuICovXG5leHBvcnQgY2xhc3MgQWdlbnRIb29rcyBleHRlbmRzIEV2ZW50RW1pdHRlckRlbGVnYXRlIHtcbiAgICBldmVudEVtaXR0ZXIgPSBuZXcgUnVudGltZUV2ZW50RW1pdHRlcigpO1xufVxuLyoqXG4gKiBFdmVudCBlbWl0dGVyIHRoYXQgZXZlcnkgUnVubmVyIGluc3RhbmNlIGluaGVyaXRzIGZyb20gYW5kIHRoYXQgZW1pdHMgZXZlbnRzIGZvciB0aGUgbGlmZWN5Y2xlXG4gKiBvZiB0aGUgb3ZlcmFsbCBydW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5Ib29rcyBleHRlbmRzIEV2ZW50RW1pdHRlckRlbGVnYXRlIHtcbiAgICBldmVudEVtaXR0ZXIgPSBuZXcgUnVudGltZUV2ZW50RW1pdHRlcigpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGlmZWN5Y2xlLm1qcy5tYXAiLCIvKipcbiAqIERlZmluZXMgYW4gaW5wdXQgZ3VhcmRyYWlsIGRlZmluaXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVJbnB1dEd1YXJkcmFpbCh7IG5hbWUsIGV4ZWN1dGUsIH0pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnaW5wdXQnLFxuICAgICAgICBuYW1lLFxuICAgICAgICBndWFyZHJhaWxGdW5jdGlvbjogZXhlY3V0ZSxcbiAgICAgICAgYXN5bmMgcnVuKGFyZ3MpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZ3VhcmRyYWlsOiB7IHR5cGU6ICdpbnB1dCcsIG5hbWUgfSxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IGF3YWl0IGV4ZWN1dGUoYXJncyksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG59XG4vKipcbiAqIENyZWF0ZXMgYW4gb3V0cHV0IGd1YXJkcmFpbCBkZWZpbml0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lT3V0cHV0R3VhcmRyYWlsKHsgbmFtZSwgZXhlY3V0ZSwgfSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdvdXRwdXQnLFxuICAgICAgICBuYW1lLFxuICAgICAgICBndWFyZHJhaWxGdW5jdGlvbjogZXhlY3V0ZSxcbiAgICAgICAgYXN5bmMgcnVuKGFyZ3MpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZ3VhcmRyYWlsOiB7IHR5cGU6ICdvdXRwdXQnLCBuYW1lIH0sXG4gICAgICAgICAgICAgICAgYWdlbnQ6IGFyZ3MuYWdlbnQsXG4gICAgICAgICAgICAgICAgYWdlbnRPdXRwdXQ6IGFyZ3MuYWdlbnRPdXRwdXQsXG4gICAgICAgICAgICAgICAgb3V0cHV0OiBhd2FpdCBleGVjdXRlKGFyZ3MpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3VhcmRyYWlsLm1qcy5tYXAiLCJpbXBvcnQgeyBNb2RlbEJlaGF2aW9yRXJyb3IsIFVzZXJFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmltcG9ydCB7IHRvRnVuY3Rpb25Ub29sTmFtZSB9IGZyb20gXCIuL3V0aWxzL3Rvb2xzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZSB9IGZyb20gXCIuL3V0aWxzL3Rvb2xzLm1qc1wiO1xuaW1wb3J0IHsgYWRkRXJyb3JUb0N1cnJlbnRTcGFuIH0gZnJvbSBcIi4vdHJhY2luZy9jb250ZXh0Lm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG4vKipcbiAqIEdlbmVyYXRlcyB0aGUgbWVzc2FnZSB0aGF0IHdpbGwgYmUgZ2l2ZW4gYXMgdG9vbCBvdXRwdXQgdG8gdGhlIG1vZGVsIHRoYXQgcmVxdWVzdGVkIHRoZSBoYW5kb2ZmLlxuICpcbiAqIEBwYXJhbSBhZ2VudCBUaGUgYWdlbnQgdG8gdHJhbnNmZXIgdG9cbiAqIEByZXR1cm5zIFRoZSBtZXNzYWdlIHRoYXQgd2lsbCBiZSBnaXZlbiBhcyB0b29sIG91dHB1dCB0byB0aGUgbW9kZWwgdGhhdCByZXF1ZXN0ZWQgdGhlIGhhbmRvZmZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYW5zZmVyTWVzc2FnZShhZ2VudCkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7IGFzc2lzdGFudDogYWdlbnQubmFtZSB9KTtcbn1cbi8qKlxuICogVGhlIGRlZmF1bHQgbmFtZSBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmYuXG4gKlxuICogQHBhcmFtIGFnZW50IFRoZSBhZ2VudCB0byB0cmFuc2ZlciB0b1xuICogQHJldHVybnMgVGhlIG5hbWUgb2YgdGhlIHRvb2wgdGhhdCByZXByZXNlbnRzIHRoZSBoYW5kb2ZmXG4gKi9cbmZ1bmN0aW9uIGRlZmF1bHRIYW5kb2ZmVG9vbE5hbWUoYWdlbnQpIHtcbiAgICByZXR1cm4gYHRyYW5zZmVyX3RvXyR7dG9GdW5jdGlvblRvb2xOYW1lKGFnZW50Lm5hbWUpfWA7XG59XG4vKipcbiAqIEdlbmVyYXRlcyB0aGUgZGVzY3JpcHRpb24gb2YgdGhlIHRvb2wgdGhhdCByZXByZXNlbnRzIHRoZSBoYW5kb2ZmLlxuICpcbiAqIEBwYXJhbSBhZ2VudCBUaGUgYWdlbnQgdG8gdHJhbnNmZXIgdG9cbiAqIEByZXR1cm5zIFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmZcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdEhhbmRvZmZUb29sRGVzY3JpcHRpb24oYWdlbnQpIHtcbiAgICByZXR1cm4gYEhhbmRvZmYgdG8gdGhlICR7YWdlbnQubmFtZX0gYWdlbnQgdG8gaGFuZGxlIHRoZSByZXF1ZXN0LiAke2FnZW50LmhhbmRvZmZEZXNjcmlwdGlvbiA/PyAnJ31gO1xufVxuLyoqXG4gKiBBIGhhbmRvZmYgaXMgd2hlbiBhbiBhZ2VudCBkZWxlZ2F0ZXMgYSB0YXNrIHRvIGFub3RoZXIgYWdlbnQuXG4gKiBGb3IgZXhhbXBsZSwgaW4gYSBjdXN0b21lciBzdXBwb3J0IHNjZW5hcmlvIHlvdSBtaWdodCBoYXZlIGEgXCJ0cmlhZ2UgYWdlbnRcIiB0aGF0IGRldGVybWluZXMgd2hpY2hcbiAqIGFnZW50IHNob3VsZCBoYW5kbGUgdGhlIHVzZXIncyByZXF1ZXN0LCBhbmQgc3ViLWFnZW50cyB0aGF0IHNwZWNpYWxpemUgaW4gZGlmZmVyZW50IGFyZWFzIGxpa2VcbiAqIGJpbGxpbmcsIGFjY291bnQgbWFuYWdlbWVudCwgZXRjLlxuICpcbiAqIEB0ZW1wbGF0ZSBUQ29udGV4dCBUaGUgY29udGV4dCBvZiB0aGUgaGFuZG9mZlxuICogQHRlbXBsYXRlIFRPdXRwdXQgVGhlIG91dHB1dCB0eXBlIG9mIHRoZSBoYW5kb2ZmXG4gKi9cbmV4cG9ydCBjbGFzcyBIYW5kb2ZmIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0aGF0IHJlcHJlc2VudHMgdGhlIGhhbmRvZmYuXG4gICAgICovXG4gICAgdG9vbE5hbWU7XG4gICAgLyoqXG4gICAgICogVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sIHRoYXQgcmVwcmVzZW50cyB0aGUgaGFuZG9mZi5cbiAgICAgKi9cbiAgICB0b29sRGVzY3JpcHRpb247XG4gICAgLyoqXG4gICAgICogVGhlIEpTT04gc2NoZW1hIGZvciB0aGUgaGFuZG9mZiBpbnB1dC4gQ2FuIGJlIGVtcHR5IGlmIHRoZSBoYW5kb2ZmIGRvZXMgbm90IHRha2UgYW4gaW5wdXRcbiAgICAgKi9cbiAgICBpbnB1dEpzb25TY2hlbWEgPSB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7fSxcbiAgICAgICAgcmVxdWlyZWQ6IFtdLFxuICAgICAgICBhZGRpdGlvbmFsUHJvcGVydGllczogZmFsc2UsXG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoZSBpbnB1dCBKU09OIHNjaGVtYSBpcyBpbiBzdHJpY3QgbW9kZS4gV2UgKipzdHJvbmdseSoqIHJlY29tbWVuZCBzZXR0aW5nIHRoaXMgdG9cbiAgICAgKiB0cnVlLCBhcyBpdCBpbmNyZWFzZXMgdGhlIGxpa2VsaWhvb2Qgb2YgY29ycmVjdCBKU09OIGlucHV0LlxuICAgICAqL1xuICAgIHN0cmljdEpzb25TY2hlbWEgPSB0cnVlO1xuICAgIC8qKlxuICAgICAqIFRoZSBmdW5jdGlvbiB0aGF0IGludm9rZXMgdGhlIGhhbmRvZmYuIFRoZSBwYXJhbWV0ZXJzIHBhc3NlZCBhcmU6XG4gICAgICogMS4gVGhlIGhhbmRvZmYgcnVuIGNvbnRleHRcbiAgICAgKiAyLiBUaGUgYXJ1Z21lbnRzIGZyb20gdGhlIExMTSwgYXMgYSBKU09OIHN0cmluZy4gRW1wdHkgc3RyaW5nIGlmIGlucHV0SnNvblNjaGVtYSBpcyBlbXB0eS5cbiAgICAgKlxuICAgICAqIE11c3QgcmV0dXJuIGFuIGFnZW50XG4gICAgICovXG4gICAgb25JbnZva2VIYW5kb2ZmO1xuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBhZ2VudCB0aGF0IGlzIGJlaW5nIGhhbmRlZCBvZmYgdG8uXG4gICAgICovXG4gICAgYWdlbnROYW1lO1xuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCBmaWx0ZXJzIHRoZSBpbnB1dHMgdGhhdCBhcmUgcGFzc2VkIHRvIHRoZSBuZXh0IGFnZW50LiBCeSBkZWZhdWx0LCB0aGUgbmV3IGFnZW50XG4gICAgICogc2VlcyB0aGUgZW50aXJlIGNvbnZlcnNhdGlvbiBoaXN0b3J5LiBJbiBzb21lIGNhc2VzLCB5b3UgbWF5IHdhbnQgdG8gZmlsdGVyIGlucHV0cyBlLmcuIHRvXG4gICAgICogcmVtb3ZlIG9sZGVyIGlucHV0cywgb3IgcmVtb3ZlIHRvb2xzIGZyb20gZXhpc3RpbmcgaW5wdXRzLlxuICAgICAqXG4gICAgICogVGhlIGZ1bmN0aW9uIHdpbGwgcmVjZWl2ZSB0aGUgZW50aXJlIGNvbnZlcnNhdGlvbiBoaXNzdG9yeSBzbyBmYXIsIGluY2x1ZGluZyB0aGUgaW5wdXQgaXRlbVxuICAgICAqIHRoYXQgdHJpZ2dlcmVkIHRoZSBoYW5kb2ZmIGFuZCBhIHRvb2wgY2FsbCBvdXRwdXQgaXRlbSByZXByZXNlbnRpbmcgdGhlIGhhbmRvZmYgdG9vbCdzIG91dHB1dC5cbiAgICAgKlxuICAgICAqIFlvdSBhcmUgZnJlZSB0byBtb2RpZnkgdGhlIGlucHV0IGhpc3Rvcnkgb3IgbmV3IGl0ZW1zIGFzIHlvdSBzZWUgZml0LiBUaGUgbmV4dCBhZ2VudCB0aGF0IHJ1bnNcbiAgICAgKiB3aWxsIHJlY2VpdmUgYGhhbmRvZmZJbnB1dERhdGEuYWxsSXRlbXNcbiAgICAgKi9cbiAgICBpbnB1dEZpbHRlcjtcbiAgICAvKipcbiAgICAgKiBUaGUgYWdlbnQgdGhhdCBpcyBiZWluZyBoYW5kZWQgb2ZmIHRvLlxuICAgICAqL1xuICAgIGFnZW50O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBmdW5jdGlvbiB0b29sIGRlZmluaXRpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBpbnZva2UgdGhlIGhhbmRvZmYuXG4gICAgICovXG4gICAgZ2V0SGFuZG9mZkFzRnVuY3Rpb25Ub29sKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMudG9vbE5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy50b29sRGVzY3JpcHRpb24sXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiB0aGlzLmlucHV0SnNvblNjaGVtYSxcbiAgICAgICAgICAgIHN0cmljdDogdGhpcy5zdHJpY3RKc29uU2NoZW1hLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihhZ2VudCwgb25JbnZva2VIYW5kb2ZmKSB7XG4gICAgICAgIHRoaXMuYWdlbnROYW1lID0gYWdlbnQubmFtZTtcbiAgICAgICAgdGhpcy5vbkludm9rZUhhbmRvZmYgPSBvbkludm9rZUhhbmRvZmY7XG4gICAgICAgIHRoaXMudG9vbE5hbWUgPSBkZWZhdWx0SGFuZG9mZlRvb2xOYW1lKGFnZW50KTtcbiAgICAgICAgdGhpcy50b29sRGVzY3JpcHRpb24gPSBkZWZhdWx0SGFuZG9mZlRvb2xEZXNjcmlwdGlvbihhZ2VudCk7XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgYSBoYW5kb2ZmIGZyb20gYW4gYWdlbnQuIEhhbmRvZmZzIGFyZSBhdXRvbWF0aWNhbGx5IGNyZWF0ZWQgd2hlbiB5b3UgcGFzcyBhbiBhZ2VudFxuICogaW50byB0aGUgYGhhbmRvZmZzYCBvcHRpb24gb2YgdGhlIGBBZ2VudGAgY29uc3RydWN0b3IuIEFsdGVybmF0aXZlbHksIHlvdSBjYW4gdXNlIHRoaXMgZnVuY3Rpb25cbiAqIHRvIGNyZWF0ZSBhIGhhbmRvZmYgbWFudWFsbHksIGdpdmluZyB5b3UgbW9yZSBjb250cm9sIG92ZXIgY29uZmlndXJhdGlvbi5cbiAqXG4gKiBAdGVtcGxhdGUgVENvbnRleHQgVGhlIGNvbnRleHQgb2YgdGhlIGhhbmRvZmZcbiAqIEB0ZW1wbGF0ZSBUT3V0cHV0IFRoZSBvdXRwdXQgdHlwZSBvZiB0aGUgaGFuZG9mZlxuICogQHRlbXBsYXRlIFRJbnB1dFR5cGUgVGhlIGlucHV0IHR5cGUgb2YgdGhlIGhhbmRvZmZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhbmRvZmYoYWdlbnQsIGNvbmZpZyA9IHt9KSB7XG4gICAgbGV0IHBhcnNlciA9IHVuZGVmaW5lZDtcbiAgICBjb25zdCBoYXNPbkhhbmRvZmYgPSAhIWNvbmZpZy5vbkhhbmRvZmY7XG4gICAgY29uc3QgaGFzSW5wdXRUeXBlID0gISFjb25maWcuaW5wdXRUeXBlO1xuICAgIGNvbnN0IGhhc0JvdGhPck5laXRoZXJIYW5kb2ZmQW5kSW5wdXRUeXBlID0gaGFzT25IYW5kb2ZmID09PSBoYXNJbnB1dFR5cGU7XG4gICAgaWYgKCFoYXNCb3RoT3JOZWl0aGVySGFuZG9mZkFuZElucHV0VHlwZSkge1xuICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdZb3UgbXVzdCBwcm92aWRlIGVpdGhlciBib3RoIGBvbkhhbmRvZmZgIGFuZCBgaW5wdXRUeXBlYCBvciBuZWl0aGVyLicpO1xuICAgIH1cbiAgICBhc3luYyBmdW5jdGlvbiBvbkludm9rZUhhbmRvZmYoY29udGV4dCwgaW5wdXRKc29uU3RyaW5nKSB7XG4gICAgICAgIGlmIChwYXJzZXIpIHtcbiAgICAgICAgICAgIGlmICghaW5wdXRKc29uU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEhhbmRvZmYgZnVuY3Rpb24gZXhwZWN0ZWQgbm9uIGVtcHR5IGlucHV0IGJ1dCBnb3Q6ICR7aW5wdXRKc29uU3RyaW5nfWAsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHM6IGBpbnB1dCBpcyBlbXB0eWAsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignSGFuZG9mZiBmdW5jdGlvbiBleHBlY3RlZCBub24gZW1wdHkgaW5wdXQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gdmVyaWZ5IHRoYXQgaXQncyB2YWxpZCBpbnB1dCBidXQgd2UgZG9uJ3QgY2FyZSBhYm91dCB0aGUgcmVzdWx0XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gYXdhaXQgcGFyc2VyKGlucHV0SnNvblN0cmluZyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5vbkhhbmRvZmYpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY29uZmlnLm9uSGFuZG9mZihjb250ZXh0LCBwYXJzZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBJbnZhbGlkIEpTT04gcHJvdmlkZWRgLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWxvZ2dlci5kb250TG9nVG9vbERhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGBJbnZhbGlkIEpTT04gd2hlbiBwYXJzaW5nOiAke2lucHV0SnNvblN0cmluZ30uIEVycm9yOiAke2Vycm9yfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdJbnZhbGlkIEpTT04gcHJvdmlkZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IGNvbmZpZy5vbkhhbmRvZmY/Lihjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWdlbnQ7XG4gICAgfVxuICAgIGNvbnN0IGhhbmRvZmYgPSBuZXcgSGFuZG9mZihhZ2VudCwgb25JbnZva2VIYW5kb2ZmKTtcbiAgICBpZiAoY29uZmlnLmlucHV0VHlwZSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlKGNvbmZpZy5pbnB1dFR5cGUsIGhhbmRvZmYudG9vbE5hbWUpO1xuICAgICAgICBoYW5kb2ZmLmlucHV0SnNvblNjaGVtYSA9IHJlc3VsdC5zY2hlbWE7XG4gICAgICAgIGhhbmRvZmYuc3RyaWN0SnNvblNjaGVtYSA9IHRydWU7XG4gICAgICAgIHBhcnNlciA9IHJlc3VsdC5wYXJzZXI7XG4gICAgfVxuICAgIGlmIChjb25maWcudG9vbE5hbWVPdmVycmlkZSkge1xuICAgICAgICBoYW5kb2ZmLnRvb2xOYW1lID0gY29uZmlnLnRvb2xOYW1lT3ZlcnJpZGU7XG4gICAgfVxuICAgIGlmIChjb25maWcudG9vbERlc2NyaXB0aW9uT3ZlcnJpZGUpIHtcbiAgICAgICAgaGFuZG9mZi50b29sRGVzY3JpcHRpb24gPSBjb25maWcudG9vbERlc2NyaXB0aW9uT3ZlcnJpZGU7XG4gICAgfVxuICAgIGlmIChjb25maWcuaW5wdXRGaWx0ZXIpIHtcbiAgICAgICAgaGFuZG9mZi5pbnB1dEZpbHRlciA9IGNvbmZpZy5pbnB1dEZpbHRlcjtcbiAgICB9XG4gICAgcmV0dXJuIGhhbmRvZmY7XG59XG4vKipcbiAqIFJldHVybnMgYSBoYW5kb2ZmIGZvciB0aGUgZ2l2ZW4gYWdlbnQuIElmIHRoZSBhZ2VudCBpcyBhbHJlYWR5IHdyYXBwZWQgaW50byBhIGhhbmRvZmYsXG4gKiBpdCB3aWxsIGJlIHJldHVybmVkIGFzIGlzLiBPdGhlcndpc2UsIGEgbmV3IGhhbmRvZmYgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkLlxuICpcbiAqIEB0ZW1wbGF0ZSBUQ29udGV4dCBUaGUgY29udGV4dCBvZiB0aGUgaGFuZG9mZlxuICogQHRlbXBsYXRlIFRPdXRwdXQgVGhlIG91dHB1dCB0eXBlIG9mIHRoZSBoYW5kb2ZmXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRIYW5kb2ZmKGFnZW50KSB7XG4gICAgaWYgKGFnZW50IGluc3RhbmNlb2YgSGFuZG9mZikge1xuICAgICAgICByZXR1cm4gYWdlbnQ7XG4gICAgfVxuICAgIHJldHVybiBoYW5kb2ZmKGFnZW50KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhhbmRvZmYubWpzLm1hcCIsImxldCBERUZBVUxUX1BST1ZJREVSO1xuLyoqXG4gKiBTZXQgdGhlIG1vZGVsIHByb3ZpZGVyIHVzZWQgd2hlbiBubyBleHBsaWNpdCBwcm92aWRlciBpcyBzdXBwbGllZC5cbiAqXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gdXNlIGJ5IGRlZmF1bHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0TW9kZWxQcm92aWRlcihwcm92aWRlcikge1xuICAgIERFRkFVTFRfUFJPVklERVIgPSBwcm92aWRlcjtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgZGVmYXVsdCBtb2RlbCBwcm92aWRlci5cbiAqXG4gKiBAcmV0dXJucyBUaGUgZGVmYXVsdCBtb2RlbCBwcm92aWRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRNb2RlbFByb3ZpZGVyKCkge1xuICAgIGlmICh0eXBlb2YgREVGQVVMVF9QUk9WSURFUiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBkZWZhdWx0IG1vZGVsIHByb3ZpZGVyIHNldC4gTWFrZSBzdXJlIHRvIHNldCBhIHByb3ZpZGVyIHVzaW5nIHNldERlZmF1bHRNb2RlbFByb3ZpZGVyIGJlZm9yZSBjYWxsaW5nIGdldERlZmF1bHRNb2RlbFByb3ZpZGVyIG9yIHBhc3MgYW4gZXhwbGljaXQgcHJvdmlkZXIuJyk7XG4gICAgfVxuICAgIHJldHVybiBERUZBVUxUX1BST1ZJREVSO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvdmlkZXJzLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnQG9wZW5haS96b2QvdjMnO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gU2hhcmVkIGJhc2UgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8qKlxuICogRXZlcnkgaXRlbSBpbiB0aGUgcHJvdG9jb2wgcHJvdmlkZXMgYSBgcHJvdmlkZXJEYXRhYCBmaWVsZCB0byBhY2NvbW9kYXRlIGN1c3RvbSBmdW5jdGlvbmFsaXR5XG4gKiBvciBuZXcgZmllbGRzXG4gKi9cbmV4cG9ydCBjb25zdCBTaGFyZWRCYXNlID0gei5vYmplY3Qoe1xuICAgIC8qKlxuICAgICAqIEFkZGl0aW9uYWwgb3B0aW9uYWwgcHJvdmlkZXIgc3BlY2lmaWMgZGF0YS4gVXNlZCBmb3IgY3VzdG9tIGZ1bmN0aW9uYWxpdHkgb3IgbW9kZWwgcHJvdmlkZXJcbiAgICAgKiBzcGVjaWZpYyBmaWVsZHMuXG4gICAgICovXG4gICAgcHJvdmlkZXJEYXRhOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLFxufSk7XG4vKipcbiAqIEV2ZXJ5IGl0ZW0gaGFzIGEgc2hhcmVkIG9mIHNoYXJlZCBpdGVtIGRhdGEgaW5jbHVkaW5nIGFuIG9wdGlvbmFsIElELlxuICovXG5leHBvcnQgY29uc3QgSXRlbUJhc2UgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgLyoqXG4gICAgICogQW4gSUQgdG8gaWRlbnRpZnkgdGhlIGl0ZW0uIFRoaXMgaXMgb3B0aW9uYWwgYnkgZGVmYXVsdC4gSWYgYSBtb2RlbCBwcm92aWRlciBhYnNvbHV0ZWx5XG4gICAgICogcmVxdWlyZXMgdGhpcyBmaWVsZCwgaXQgd2lsbCBiZSB2YWxpZGF0ZWQgb24gdGhlIG1vZGVsIGxldmVsLlxuICAgICAqL1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIENvbnRlbnQgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBSZWZ1c2FsID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVmdXNhbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSByZWZ1c2FsIGV4cGxhbmF0aW9uIGZyb20gdGhlIG1vZGVsLlxuICAgICAqL1xuICAgIHJlZnVzYWw6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBPdXRwdXRUZXh0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnb3V0cHV0X3RleHQnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdGV4dCBvdXRwdXQgZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgdGV4dDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IElucHV0VGV4dCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X3RleHQnKSxcbiAgICAvKipcbiAgICAgKiBBIHRleHQgaW5wdXQgZm9yIGV4YW1wbGUgYSBtZXNzYWdlIGZyb20gYSB1c2VyXG4gICAgICovXG4gICAgdGV4dDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IElucHV0SW1hZ2UgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9pbWFnZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBpbWFnZSBpbnB1dCB0byB0aGUgbW9kZWwuIENvdWxkIGJlIGEgVVJMLCBiYXNlNjQgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELlxuICAgICAqL1xuICAgIGltYWdlOiB6XG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAub3Ioei5vYmplY3Qoe1xuICAgICAgICBpZDogei5zdHJpbmcoKSxcbiAgICB9KSlcbiAgICAgICAgLmRlc2NyaWJlKCdDb3VsZCBiZSBhIFVSTCwgYmFzZTY0IG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC4nKSxcbn0pO1xuZXhwb3J0IGNvbnN0IElucHV0RmlsZSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2ZpbGUnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgZmlsZSBpbnB1dCB0byB0aGUgbW9kZWwuIENvdWxkIGJlIGEgVVJMLCBiYXNlNjQgb3IgYW4gb2JqZWN0IHdpdGggYSBmaWxlIElELlxuICAgICAqL1xuICAgIGZpbGU6IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5vcih6Lm9iamVjdCh7XG4gICAgICAgIGlkOiB6LnN0cmluZygpLFxuICAgIH0pKVxuICAgICAgICAuZGVzY3JpYmUoJ0NvbnRlbnRzIG9mIHRoZSBmaWxlIG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC4nKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEF1ZGlvQ29udGVudCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2F1ZGlvJyksXG4gICAgLyoqXG4gICAgICogVGhlIGF1ZGlvIGlucHV0IHRvIHRoZSBtb2RlbC4gQ291bGQgYmUgYmFzZTY0IGVuY29kZWQgYXVkaW8gZGF0YSBvciBhbiBvYmplY3Qgd2l0aCBhIGZpbGUgSUQuXG4gICAgICovXG4gICAgYXVkaW86IHpcbiAgICAgICAgLnN0cmluZygpXG4gICAgICAgIC5vcih6Lm9iamVjdCh7XG4gICAgICAgIGlkOiB6LnN0cmluZygpLFxuICAgIH0pKVxuICAgICAgICAuZGVzY3JpYmUoJ0Jhc2U2NCBlbmNvZGVkIGF1ZGlvIGRhdGEgb3IgZmlsZSBpZCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBmb3JtYXQgb2YgdGhlIGF1ZGlvLlxuICAgICAqL1xuICAgIGZvcm1hdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogVGhlIHRyYW5zY3JpcHQgb2YgdGhlIGF1ZGlvLlxuICAgICAqL1xuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgSW1hZ2VDb250ZW50ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW1hZ2UnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgaW1hZ2UgaW5wdXQgdG8gdGhlIG1vZGVsLiBDb3VsZCBiZSBiYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC5cbiAgICAgKi9cbiAgICBpbWFnZTogei5zdHJpbmcoKS5kZXNjcmliZSgnQmFzZTY0IGVuY29kZWQgaW1hZ2UgZGF0YScpLFxufSk7XG5leHBvcnQgY29uc3QgVG9vbE91dHB1dFRleHQgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCd0ZXh0JyksXG4gICAgLyoqXG4gICAgICogVGhlIHRleHQgb3V0cHV0IGZyb20gdGhlIG1vZGVsLlxuICAgICAqL1xuICAgIHRleHQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBUb29sT3V0cHV0SW1hZ2UgPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbWFnZScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBpbWFnZSBkYXRhLiBDb3VsZCBiZSBiYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhIG9yIGFuIG9iamVjdCB3aXRoIGEgZmlsZSBJRC5cbiAgICAgKi9cbiAgICBkYXRhOiB6LnN0cmluZygpLmRlc2NyaWJlKCdCYXNlNjQgZW5jb2RlZCBpbWFnZSBkYXRhJyksXG4gICAgLyoqXG4gICAgICogVGhlIG1lZGlhIHR5cGUgb2YgdGhlIGltYWdlLlxuICAgICAqL1xuICAgIG1lZGlhVHlwZTogei5zdHJpbmcoKS5kZXNjcmliZSgnSUFOQSBtZWRpYSB0eXBlIG9mIHRoZSBpbWFnZScpLFxufSk7XG5leHBvcnQgY29uc3QgQ29tcHV0ZXJUb29sT3V0cHV0ID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29tcHV0ZXJfc2NyZWVuc2hvdCcpLFxuICAgIC8qKlxuICAgICAqIEEgYmFzZTY0IGVuY29kZWQgaW1hZ2UgZGF0YSBvciBhIFVSTCByZXByZXNlbnRpbmcgdGhlIHNjcmVlbnNob3QuXG4gICAgICovXG4gICAgZGF0YTogei5zdHJpbmcoKS5kZXNjcmliZSgnQmFzZTY0IGVuY29kZWQgaW1hZ2UgZGF0YSBvciBVUkwnKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbXB1dGVyQWN0aW9ucyA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdzY3JlZW5zaG90JykgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2NsaWNrJyksXG4gICAgICAgIHg6IHoubnVtYmVyKCksXG4gICAgICAgIHk6IHoubnVtYmVyKCksXG4gICAgICAgIGJ1dHRvbjogei5lbnVtKFsnbGVmdCcsICdyaWdodCcsICd3aGVlbCcsICdiYWNrJywgJ2ZvcndhcmQnXSksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2RvdWJsZV9jbGljaycpLFxuICAgICAgICB4OiB6Lm51bWJlcigpLFxuICAgICAgICB5OiB6Lm51bWJlcigpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdzY3JvbGwnKSxcbiAgICAgICAgeDogei5udW1iZXIoKSxcbiAgICAgICAgeTogei5udW1iZXIoKSxcbiAgICAgICAgc2Nyb2xsX3g6IHoubnVtYmVyKCksXG4gICAgICAgIHNjcm9sbF95OiB6Lm51bWJlcigpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCd0eXBlJyksXG4gICAgICAgIHRleHQ6IHouc3RyaW5nKCksXG4gICAgfSksXG4gICAgei5vYmplY3QoeyB0eXBlOiB6LmxpdGVyYWwoJ3dhaXQnKSB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbW92ZScpLFxuICAgICAgICB4OiB6Lm51bWJlcigpLFxuICAgICAgICB5OiB6Lm51bWJlcigpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdrZXlwcmVzcycpLFxuICAgICAgICBrZXlzOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCdkcmFnJyksXG4gICAgICAgIHBhdGg6IHouYXJyYXkoei5vYmplY3QoeyB4OiB6Lm51bWJlcigpLCB5OiB6Lm51bWJlcigpIH0pKSxcbiAgICB9KSxcbl0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gTWVzc2FnZSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IEFzc2lzdGFudENvbnRlbnQgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBPdXRwdXRUZXh0LFxuICAgIFJlZnVzYWwsXG4gICAgSW5wdXRUZXh0LFxuICAgIEF1ZGlvQ29udGVudCxcbiAgICBJbWFnZUNvbnRlbnQsXG5dKTtcbmNvbnN0IE1lc3NhZ2VCYXNlID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICAvKipcbiAgICAgKiBBbnkgaXRlbSB3aXRob3V0IGEgdHlwZSBpcyB0cmVhdGVkIGFzIGEgbWVzc2FnZVxuICAgICAqL1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBBc3Npc3RhbnRNZXNzYWdlSXRlbSA9IE1lc3NhZ2VCYXNlLmV4dGVuZCh7XG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50aW5nIGEgbWVzc2FnZSBmcm9tIHRoZSBhc3Npc3RhbnQgKGkuZS4gdGhlIG1vZGVsKVxuICAgICAqL1xuICAgIHJvbGU6IHoubGl0ZXJhbCgnYXNzaXN0YW50JyksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgbWVzc2FnZS5cbiAgICAgKi9cbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgIC8qKlxuICAgICAqIFRoZSBjb250ZW50IG9mIHRoZSBtZXNzYWdlLlxuICAgICAqL1xuICAgIGNvbnRlbnQ6IHouYXJyYXkoQXNzaXN0YW50Q29udGVudCksXG59KTtcbmV4cG9ydCBjb25zdCBVc2VyQ29udGVudCA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIElucHV0VGV4dCxcbiAgICBJbnB1dEltYWdlLFxuICAgIElucHV0RmlsZSxcbiAgICBBdWRpb0NvbnRlbnQsXG5dKTtcbmV4cG9ydCBjb25zdCBVc2VyTWVzc2FnZUl0ZW0gPSBNZXNzYWdlQmFzZS5leHRlbmQoe1xuICAgIC8vIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgIC8qKlxuICAgICAqIFJlcHJlc2VudGluZyBhIG1lc3NhZ2UgZnJvbSB0aGUgdXNlclxuICAgICAqL1xuICAgIHJvbGU6IHoubGl0ZXJhbCgndXNlcicpLFxuICAgIC8qKlxuICAgICAqIFRoZSBjb250ZW50IG9mIHRoZSBtZXNzYWdlLlxuICAgICAqL1xuICAgIGNvbnRlbnQ6IHouYXJyYXkoVXNlckNvbnRlbnQpLm9yKHouc3RyaW5nKCkpLFxufSk7XG5jb25zdCBTeXN0ZW1NZXNzYWdlSXRlbSA9IE1lc3NhZ2VCYXNlLmV4dGVuZCh7XG4gICAgLy8gdHlwZTogei5saXRlcmFsKCdtZXNzYWdlJyksXG4gICAgLyoqXG4gICAgICogUmVwcmVzZW50aW5nIGEgc3lzdGVtIG1lc3NhZ2UgdG8gdGhlIHVzZXJcbiAgICAgKi9cbiAgICByb2xlOiB6LmxpdGVyYWwoJ3N5c3RlbScpLFxuICAgIC8qKlxuICAgICAqIFRoZSBjb250ZW50IG9mIHRoZSBtZXNzYWdlLlxuICAgICAqL1xuICAgIGNvbnRlbnQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBNZXNzYWdlSXRlbSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCdyb2xlJywgW1xuICAgIFN5c3RlbU1lc3NhZ2VJdGVtLFxuICAgIEFzc2lzdGFudE1lc3NhZ2VJdGVtLFxuICAgIFVzZXJNZXNzYWdlSXRlbSxcbl0pO1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVG9vbCBjYWxsIHR5cGVzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnQgY29uc3QgSG9zdGVkVG9vbENhbGxJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2hvc3RlZF90b29sX2NhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgaG9zdGVkIHRvb2wuIEZvciBleGFtcGxlIGB3ZWJfc2VhcmNoX2NhbGxgIG9yIGBmaWxlX3NlYXJjaF9jYWxsYFxuICAgICAqL1xuICAgIG5hbWU6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBuYW1lIG9mIHRoZSBob3N0ZWQgdG9vbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBhcmd1bWVudHMgb2YgdGhlIGhvc3RlZCB0b29sIGNhbGwuXG4gICAgICovXG4gICAgYXJndW1lbnRzOiB6XG4gICAgICAgIC5zdHJpbmcoKVxuICAgICAgICAuZGVzY3JpYmUoJ1RoZSBhcmd1bWVudHMgb2YgdGhlIGhvc3RlZCB0b29sIGNhbGwnKVxuICAgICAgICAub3B0aW9uYWwoKSxcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIG9mIHRoZSB0b29sIGNhbGwuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogVGhlIHByaW1hcnkgb3V0cHV0IG9mIHRoZSB0b29sIGNhbGwuIEFkZGl0aW9uYWwgb3V0cHV0IG1pZ2h0IGJlIGluIHRoZSBgcHJvdmlkZXJEYXRhYCBmaWVsZC5cbiAgICAgKi9cbiAgICBvdXRwdXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IEZ1bmN0aW9uQ2FsbEl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnZnVuY3Rpb25fY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBJRCBvZiB0aGUgdG9vbCBjYWxsLiBSZXF1aXJlZCB0byBtYXRjaCB1cCB0aGUgcmVzcGVjdGl2ZSB0b29sIGNhbGwgcmVzdWx0LlxuICAgICAqL1xuICAgIGNhbGxJZDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIElEIG9mIHRoZSB0b29sIGNhbGwnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgZnVuY3Rpb24uXG4gICAgICovXG4gICAgbmFtZTogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uJyksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgZnVuY3Rpb24gY2FsbC5cbiAgICAgKi9cbiAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLm9wdGlvbmFsKCksXG4gICAgLyoqXG4gICAgICogVGhlIGFyZ3VtZW50cyBvZiB0aGUgZnVuY3Rpb24gY2FsbC5cbiAgICAgKi9cbiAgICBhcmd1bWVudHM6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCBGdW5jdGlvbkNhbGxSZXN1bHRJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2Z1bmN0aW9uX2NhbGxfcmVzdWx0JyksXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHRvb2wgdGhhdCB3YXMgY2FsbGVkXG4gICAgICovXG4gICAgbmFtZTogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIG5hbWUgb2YgdGhlIHRvb2wnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgb2YgdGhlIHRvb2wgY2FsbC4gUmVxdWlyZWQgdG8gbWF0Y2ggdXAgdGhlIHJlc3BlY3RpdmUgdG9vbCBjYWxsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjYWxsSWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBJRCBvZiB0aGUgdG9vbCBjYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIHN0YXR1cyBvZiB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJywgJ2luY29tcGxldGUnXSksXG4gICAgLyoqXG4gICAgICogVGhlIG91dHB1dCBvZiB0aGUgdG9vbCBjYWxsLlxuICAgICAqL1xuICAgIG91dHB1dDogei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbVG9vbE91dHB1dFRleHQsIFRvb2xPdXRwdXRJbWFnZV0pLFxufSk7XG5leHBvcnQgY29uc3QgQ29tcHV0ZXJVc2VDYWxsSXRlbSA9IEl0ZW1CYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb21wdXRlcl9jYWxsJyksXG4gICAgLyoqXG4gICAgICogVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsLiBSZXF1aXJlZCB0byBtYXRjaCB1cCB0aGUgcmVzcGVjdGl2ZSBjb21wdXRlciBjYWxsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjYWxsSWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBJRCBvZiB0aGUgY29tcHV0ZXIgY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBzdGF0dXMgb2YgdGhlIGNvbXB1dGVyIGNhbGwuXG4gICAgICovXG4gICAgc3RhdHVzOiB6LmVudW0oWydpbl9wcm9ncmVzcycsICdjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZSddKSxcbiAgICAvKipcbiAgICAgKiBUaGUgYWN0aW9uIHRvIGJlIHBlcmZvcm1lZCBieSB0aGUgY29tcHV0ZXIuXG4gICAgICovXG4gICAgYWN0aW9uOiBjb21wdXRlckFjdGlvbnMsXG59KTtcbmV4cG9ydCBjb25zdCBDb21wdXRlckNhbGxSZXN1bHRJdGVtID0gSXRlbUJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbXB1dGVyX2NhbGxfcmVzdWx0JyksXG4gICAgLyoqXG4gICAgICogVGhlIElEIG9mIHRoZSBjb21wdXRlciBjYWxsLiBSZXF1aXJlZCB0byBtYXRjaCB1cCB0aGUgcmVzcGVjdGl2ZSBjb21wdXRlciBjYWxsIHJlc3VsdC5cbiAgICAgKi9cbiAgICBjYWxsSWQ6IHouc3RyaW5nKCkuZGVzY3JpYmUoJ1RoZSBJRCBvZiB0aGUgY29tcHV0ZXIgY2FsbCcpLFxuICAgIC8qKlxuICAgICAqIFRoZSBvdXRwdXQgb2YgdGhlIGNvbXB1dGVyIGNhbGwuXG4gICAgICovXG4gICAgb3V0cHV0OiBDb21wdXRlclRvb2xPdXRwdXQsXG59KTtcbmV4cG9ydCBjb25zdCBUb29sQ2FsbEl0ZW0gPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICBDb21wdXRlclVzZUNhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbEl0ZW0sXG4gICAgSG9zdGVkVG9vbENhbGxJdGVtLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBTcGVjaWFsIGl0ZW0gdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBSZWFzb25pbmdJdGVtID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei5saXRlcmFsKCdyZWFzb25pbmcnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgdXNlciBmYWNpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJlYXNvbmluZy4gQWRkaXRpb25hbCBpbmZvcm1hdGlvbiBtaWdodCBiZSBpbiB0aGUgYHByb3ZpZGVyRGF0YWAgZmllbGQuXG4gICAgICovXG4gICAgY29udGVudDogei5hcnJheShJbnB1dFRleHQpLFxufSk7XG4vKipcbiAqIFRoaXMgaXMgYSBjYXRjaCBhbGwgZm9yIGl0ZW1zIHRoYXQgYXJlIG5vdCBwYXJ0IG9mIHRoZSBwcm90b2NvbC5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgYSBtb2RlbCBtaWdodCByZXR1cm4gYW4gaXRlbSB0aGF0IGlzIG5vdCBwYXJ0IG9mIHRoZSBwcm90b2NvbCB1c2luZyB0aGlzIHR5cGUuXG4gKlxuICogSW4gdGhhdCBjYXNlIGV2ZXJ5dGhpbmcgcmV0dXJuZWQgZnJvbSB0aGUgbW9kZWwgc2hvdWxkIGJlIHBhc3NlZCBpbiB0aGUgYHByb3ZpZGVyRGF0YWAgZmllbGQuXG4gKlxuICogVGhpcyBlbmFibGVzIG5ldyBmZWF0dXJlcyB0byBiZSBhZGRlZCB0byBiZSBhZGRlZCBieSBhIG1vZGVsIHByb3ZpZGVyIHdpdGhvdXQgYnJlYWtpbmcgdGhlIHByb3RvY29sLlxuICovXG5leHBvcnQgY29uc3QgVW5rbm93bkl0ZW0gPSBJdGVtQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndW5rbm93bicpLFxufSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBKb2luZWQgaXRlbSB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGNvbnN0IE91dHB1dE1vZGVsSXRlbSA9IHouZGlzY3JpbWluYXRlZFVuaW9uKCd0eXBlJywgW1xuICAgIEFzc2lzdGFudE1lc3NhZ2VJdGVtLFxuICAgIEhvc3RlZFRvb2xDYWxsSXRlbSxcbiAgICBGdW5jdGlvbkNhbGxJdGVtLFxuICAgIENvbXB1dGVyVXNlQ2FsbEl0ZW0sXG4gICAgUmVhc29uaW5nSXRlbSxcbiAgICBVbmtub3duSXRlbSxcbl0pO1xuZXhwb3J0IGNvbnN0IE1vZGVsSXRlbSA9IHoudW5pb24oW1xuICAgIFVzZXJNZXNzYWdlSXRlbSxcbiAgICBBc3Npc3RhbnRNZXNzYWdlSXRlbSxcbiAgICBTeXN0ZW1NZXNzYWdlSXRlbSxcbiAgICBIb3N0ZWRUb29sQ2FsbEl0ZW0sXG4gICAgRnVuY3Rpb25DYWxsSXRlbSxcbiAgICBDb21wdXRlclVzZUNhbGxJdGVtLFxuICAgIEZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0sXG4gICAgQ29tcHV0ZXJDYWxsUmVzdWx0SXRlbSxcbiAgICBSZWFzb25pbmdJdGVtLFxuICAgIFVua25vd25JdGVtLFxuXSk7XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBNZXRhIGRhdGEgdHlwZXNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCBjb25zdCBVc2FnZURhdGEgPSB6Lm9iamVjdCh7XG4gICAgcmVxdWVzdHM6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICBpbnB1dFRva2Vuczogei5udW1iZXIoKSxcbiAgICBvdXRwdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgdG90YWxUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgaW5wdXRUb2tlbnNEZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6Lm51bWJlcigpKS5vcHRpb25hbCgpLFxuICAgIG91dHB1dFRva2Vuc0RldGFpbHM6IHoucmVjb3JkKHouc3RyaW5nKCksIHoubnVtYmVyKCkpLm9wdGlvbmFsKCksXG59KTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFN0cmVhbSBldmVudCB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLyoqXG4gKiBFdmVudCByZXR1cm5lZCBieSB0aGUgbW9kZWwgd2hlbiBuZXcgb3V0cHV0IHRleHQgaXMgYXZhaWxhYmxlIHRvIHN0cmVhbSB0byB0aGUgdXNlci5cbiAqL1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50VGV4dFN0cmVhbSA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF90ZXh0X2RlbHRhJyksXG4gICAgLyoqXG4gICAgICogVGhlIGRlbHRhIHRleHQgdGhhdCB3YXMgc3RyZWFtZWQgYnkgdGhlIG1vZGVsdG8gdGhlIHVzZXIuXG4gICAgICovXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG59KTtcbi8qKlxuICogRXZlbnQgcmV0dXJuZWQgYnkgdGhlIG1vZGVsIHdoZW4gYSBuZXcgcmVzcG9uc2UgaXMgc3RhcnRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50UmVzcG9uc2VTdGFydGVkID0gU2hhcmVkQmFzZS5leHRlbmQoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Vfc3RhcnRlZCcpLFxufSk7XG4vKipcbiAqIEV2ZW50IHJldHVybmVkIGJ5IHRoZSBtb2RlbCB3aGVuIGEgcmVzcG9uc2UgaXMgY29tcGxldGVkLlxuICovXG5leHBvcnQgY29uc3QgU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZCA9IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlX2RvbmUnKSxcbiAgICAvKipcbiAgICAgKiBUaGUgcmVzcG9uc2UgZnJvbSB0aGUgbW9kZWwuXG4gICAgICovXG4gICAgcmVzcG9uc2U6IFNoYXJlZEJhc2UuZXh0ZW5kKHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBJRCBvZiB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAqL1xuICAgICAgICBpZDogei5zdHJpbmcoKSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB1c2FnZSBkYXRhIGZvciB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAqL1xuICAgICAgICB1c2FnZTogVXNhZ2VEYXRhLFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG91dHB1dCBmcm9tIHRoZSBtb2RlbC5cbiAgICAgICAgICovXG4gICAgICAgIG91dHB1dDogei5hcnJheShPdXRwdXRNb2RlbEl0ZW0pLFxuICAgIH0pLFxufSk7XG4vKipcbiAqIEV2ZW50IHJldHVybmVkIGZvciBldmVyeSBpdGVtIHRoYXQgZ2V0cyBzdHJlYW1lZCB0byB0aGUgbW9kZWwuIFVzZWQgdG8gZXhwb3NlIHRoZSByYXcgZXZlbnRzXG4gKiBmcm9tIHRoZSBtb2RlbC5cbiAqL1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50R2VuZXJpY0l0ZW0gPSBTaGFyZWRCYXNlLmV4dGVuZCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdtb2RlbCcpLFxuICAgIGV2ZW50OiB6LmFueSgpLmRlc2NyaWJlKCdUaGUgZXZlbnQgZnJvbSB0aGUgbW9kZWwnKSxcbn0pO1xuZXhwb3J0IGNvbnN0IFN0cmVhbUV2ZW50ID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgU3RyZWFtRXZlbnRUZXh0U3RyZWFtLFxuICAgIFN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQsXG4gICAgU3RyZWFtRXZlbnRSZXNwb25zZVN0YXJ0ZWQsXG4gICAgU3RyZWFtRXZlbnRHZW5lcmljSXRlbSxcbl0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvdG9jb2wubWpzLm1hcCIsImltcG9ydCB7IFVzYWdlRGF0YSB9IGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuLyoqXG4gKiBUcmFja3MgdG9rZW4gdXNhZ2UgYW5kIHJlcXVlc3QgY291bnRzIGZvciBhbiBhZ2VudCBydW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBVc2FnZSB7XG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiByZXF1ZXN0cyBtYWRlIHRvIHRoZSBMTE0gQVBJLlxuICAgICAqL1xuICAgIHJlcXVlc3RzO1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgaW5wdXQgdG9rZW5zIHVzZWQgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICBpbnB1dFRva2VucztcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIG91dHB1dCB0b2tlbnMgdXNlZCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIG91dHB1dFRva2VucztcbiAgICAvKipcbiAgICAgKiBUaGUgdG90YWwgbnVtYmVyIG9mIHRva2VucyBzZW50IGFuZCByZWNlaXZlZCwgYWNyb3NzIGFsbCByZXF1ZXN0cy5cbiAgICAgKi9cbiAgICB0b3RhbFRva2VucztcbiAgICAvKipcbiAgICAgKiBEZXRhaWxzIGFib3V0IHRoZSBpbnB1dCB0b2tlbnMgdXNlZCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIGlucHV0VG9rZW5zRGV0YWlscyA9IFtdO1xuICAgIC8qKlxuICAgICAqIERldGFpbHMgYWJvdXQgdGhlIG91dHB1dCB0b2tlbnMgdXNlZCBhY3Jvc3MgYWxsIHJlcXVlc3RzLlxuICAgICAqL1xuICAgIG91dHB1dFRva2Vuc0RldGFpbHMgPSBbXTtcbiAgICBjb25zdHJ1Y3RvcihpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0cyA9IDA7XG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zID0gMDtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zID0gMDtcbiAgICAgICAgICAgIHRoaXMudG90YWxUb2tlbnMgPSAwO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFRva2Vuc0RldGFpbHMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0cyA9IGlucHV0Py5yZXF1ZXN0cyA/PyAxO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFRva2VucyA9IGlucHV0Py5pbnB1dFRva2VucyA/PyAwO1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnMgPSBpbnB1dD8ub3V0cHV0VG9rZW5zID8/IDA7XG4gICAgICAgICAgICB0aGlzLnRvdGFsVG9rZW5zID0gaW5wdXQ/LnRvdGFsVG9rZW5zID8/IDA7XG4gICAgICAgICAgICB0aGlzLmlucHV0VG9rZW5zRGV0YWlscyA9IGlucHV0Py5pbnB1dFRva2Vuc0RldGFpbHNcbiAgICAgICAgICAgICAgICA/IFtpbnB1dC5pbnB1dFRva2Vuc0RldGFpbHNdXG4gICAgICAgICAgICAgICAgOiBbXTtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0VG9rZW5zRGV0YWlscyA9IGlucHV0Py5vdXRwdXRUb2tlbnNEZXRhaWxzXG4gICAgICAgICAgICAgICAgPyBbaW5wdXQub3V0cHV0VG9rZW5zRGV0YWlsc11cbiAgICAgICAgICAgICAgICA6IFtdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZChuZXdVc2FnZSkge1xuICAgICAgICB0aGlzLnJlcXVlc3RzICs9IG5ld1VzYWdlLnJlcXVlc3RzO1xuICAgICAgICB0aGlzLmlucHV0VG9rZW5zICs9IG5ld1VzYWdlLmlucHV0VG9rZW5zO1xuICAgICAgICB0aGlzLm91dHB1dFRva2VucyArPSBuZXdVc2FnZS5vdXRwdXRUb2tlbnM7XG4gICAgICAgIHRoaXMudG90YWxUb2tlbnMgKz0gbmV3VXNhZ2UudG90YWxUb2tlbnM7XG4gICAgICAgIHRoaXMuaW5wdXRUb2tlbnNEZXRhaWxzLnB1c2goLi4ubmV3VXNhZ2UuaW5wdXRUb2tlbnNEZXRhaWxzKTtcbiAgICAgICAgdGhpcy5vdXRwdXRUb2tlbnNEZXRhaWxzLnB1c2goLi4ubmV3VXNhZ2Uub3V0cHV0VG9rZW5zRGV0YWlscyk7XG4gICAgfVxufVxuZXhwb3J0IHsgVXNhZ2VEYXRhIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11c2FnZS5tanMubWFwIiwiaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuLyoqXG4gKiBBIGNvbnRleHQgb2JqZWN0IHRoYXQgaXMgcGFzc2VkIHRvIHRoZSBgUnVubmVyLnJ1bigpYCBtZXRob2QuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5Db250ZXh0IHtcbiAgICAvKipcbiAgICAgKiBUaGUgY29udGV4dCBvYmplY3QgcGFzc2VkIGJ5IHlvdSB0byB0aGUgYFJ1bm5lci5ydW4oKWBcbiAgICAgKi9cbiAgICBjb250ZXh0O1xuICAgIC8qKlxuICAgICAqIFRoZSB1c2FnZSBvZiB0aGUgYWdlbnQgcnVuIHNvIGZhci4gRm9yIHN0cmVhbWVkIHJlc3BvbnNlcywgdGhlIHVzYWdlIHdpbGwgYmUgc3RhbGUgdW50aWwgdGhlXG4gICAgICogbGFzdCBjaHVuayBvZiB0aGUgc3RyZWFtIGlzIHByb2Nlc3NlZC5cbiAgICAgKi9cbiAgICB1c2FnZTtcbiAgICAvKipcbiAgICAgKiBBIG1hcCBvZiB0b29sIG5hbWVzIHRvIHdoZXRoZXIgdGhleSBoYXZlIGJlZW4gYXBwcm92ZWQuXG4gICAgICovXG4gICAgI2FwcHJvdmFscztcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0ID0ge30pIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy51c2FnZSA9IG5ldyBVc2FnZSgpO1xuICAgICAgICB0aGlzLiNhcHByb3ZhbHMgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYnVpbGQgdGhlIGFwcHJvdmFscyBtYXAgZnJvbSBhIHNlcmlhbGl6ZWQgc3RhdGUuXG4gICAgICogQGludGVybmFsXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxzIC0gVGhlIGFwcHJvdmFscyBtYXAgdG8gcmVidWlsZC5cbiAgICAgKi9cbiAgICBfcmVidWlsZEFwcHJvdmFscyhhcHByb3ZhbHMpIHtcbiAgICAgICAgdGhpcy4jYXBwcm92YWxzID0gbmV3IE1hcChPYmplY3QuZW50cmllcyhhcHByb3ZhbHMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSB0b29sIGNhbGwgaGFzIGJlZW4gYXBwcm92ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdG9vbE5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdG9vbC5cbiAgICAgKiBAcGFyYW0gY2FsbElkIC0gVGhlIGNhbGwgSUQgb2YgdGhlIHRvb2wgY2FsbC5cbiAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHRvb2wgY2FsbCBoYXMgYmVlbiBhcHByb3ZlZCwgYGZhbHNlYCBpZiBibG9ja2VkIGFuZCBgdW5kZWZpbmVkYCBpZiBub3QgeWV0IGFwcHJvdmVkIG9yIHJlamVjdGVkLlxuICAgICAqL1xuICAgIGlzVG9vbEFwcHJvdmVkKHsgdG9vbE5hbWUsIGNhbGxJZCB9KSB7XG4gICAgICAgIGNvbnN0IGFwcHJvdmFsRW50cnkgPSB0aGlzLiNhcHByb3ZhbHMuZ2V0KHRvb2xOYW1lKTtcbiAgICAgICAgaWYgKGFwcHJvdmFsRW50cnk/LmFwcHJvdmVkID09PSB0cnVlICYmIGFwcHJvdmFsRW50cnkucmVqZWN0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdUb29sIGlzIHBlcm1hbmVudGx5IGFwcHJvdmVkIGFuZCByZWplY3RlZCBhdCB0aGUgc2FtZSB0aW1lLiBBcHByb3ZhbCB0YWtlcyBwcmVjZWRlbmNlJyk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXBwcm92YWxFbnRyeT8uYXBwcm92ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcHByb3ZhbEVudHJ5Py5yZWplY3RlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGl2aWR1YWxDYWxsQXBwcm92YWwgPSBBcnJheS5pc0FycmF5KGFwcHJvdmFsRW50cnk/LmFwcHJvdmVkKVxuICAgICAgICAgICAgPyBhcHByb3ZhbEVudHJ5LmFwcHJvdmVkLmluY2x1ZGVzKGNhbGxJZClcbiAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgIGNvbnN0IGluZGl2aWR1YWxDYWxsUmVqZWN0aW9uID0gQXJyYXkuaXNBcnJheShhcHByb3ZhbEVudHJ5Py5yZWplY3RlZClcbiAgICAgICAgICAgID8gYXBwcm92YWxFbnRyeS5yZWplY3RlZC5pbmNsdWRlcyhjYWxsSWQpXG4gICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICBpZiAoaW5kaXZpZHVhbENhbGxBcHByb3ZhbCAmJiBpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbikge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oYFRvb2wgY2FsbCAke2NhbGxJZH0gaXMgYm90aCBhcHByb3ZlZCBhbmQgcmVqZWN0ZWQgYXQgdGhlIHNhbWUgdGltZS4gQXBwcm92YWwgdGFrZXMgcHJlY2VkZW5jZWApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGl2aWR1YWxDYWxsQXBwcm92YWwpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcHJvdmUgYSB0b29sIGNhbGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdG9vbE5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdG9vbC5cbiAgICAgKiBAcGFyYW0gY2FsbElkIC0gVGhlIGNhbGwgSUQgb2YgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBhcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0sIHsgYWx3YXlzQXBwcm92ZSA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICBjb25zdCB0b29sTmFtZSA9IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWU7XG4gICAgICAgIGlmIChhbHdheXNBcHByb3ZlKSB7XG4gICAgICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCB7XG4gICAgICAgICAgICAgICAgYXBwcm92ZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgcmVqZWN0ZWQ6IFtdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXBwcm92YWxFbnRyeSA9IHRoaXMuI2FwcHJvdmFscy5nZXQodG9vbE5hbWUpID8/IHtcbiAgICAgICAgICAgIGFwcHJvdmVkOiBbXSxcbiAgICAgICAgICAgIHJlamVjdGVkOiBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXBwcm92YWxFbnRyeS5hcHByb3ZlZCkpIHtcbiAgICAgICAgICAgIC8vIGZ1bmN0aW9uIHRvb2wgaGFzIGNhbGxfaWQsIGhvc3RlZCB0b29sIGNhbGwgaGFzIGlkXG4gICAgICAgICAgICBjb25zdCBjYWxsSWQgPSAnY2FsbElkJyBpbiBhcHByb3ZhbEl0ZW0ucmF3SXRlbVxuICAgICAgICAgICAgICAgID8gYXBwcm92YWxJdGVtLnJhd0l0ZW0uY2FsbElkIC8vIGZ1bmN0aW9uIHRvb2xzXG4gICAgICAgICAgICAgICAgOiBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5pZDsgLy8gaG9zdGVkIHRvb2xzXG4gICAgICAgICAgICBhcHByb3ZhbEVudHJ5LmFwcHJvdmVkLnB1c2goY2FsbElkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNhcHByb3ZhbHMuc2V0KHRvb2xOYW1lLCBhcHByb3ZhbEVudHJ5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVqZWN0IGEgdG9vbCBjYWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSB0b29sIGFwcHJvdmFsIGl0ZW0gdG8gcmVqZWN0LlxuICAgICAqL1xuICAgIHJlamVjdFRvb2woYXBwcm92YWxJdGVtLCB7IGFsd2F5c1JlamVjdCA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICBjb25zdCB0b29sTmFtZSA9IGFwcHJvdmFsSXRlbS5yYXdJdGVtLm5hbWU7XG4gICAgICAgIGlmIChhbHdheXNSZWplY3QpIHtcbiAgICAgICAgICAgIHRoaXMuI2FwcHJvdmFscy5zZXQodG9vbE5hbWUsIHtcbiAgICAgICAgICAgICAgICBhcHByb3ZlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgcmVqZWN0ZWQ6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcHByb3ZhbEVudHJ5ID0gdGhpcy4jYXBwcm92YWxzLmdldCh0b29sTmFtZSkgPz8ge1xuICAgICAgICAgICAgYXBwcm92ZWQ6IFtdLFxuICAgICAgICAgICAgcmVqZWN0ZWQ6IFtdLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcHByb3ZhbEVudHJ5LnJlamVjdGVkKSkge1xuICAgICAgICAgICAgLy8gZnVuY3Rpb24gdG9vbCBoYXMgY2FsbF9pZCwgaG9zdGVkIHRvb2wgY2FsbCBoYXMgaWRcbiAgICAgICAgICAgIGNvbnN0IGNhbGxJZCA9ICdjYWxsSWQnIGluIGFwcHJvdmFsSXRlbS5yYXdJdGVtXG4gICAgICAgICAgICAgICAgPyBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5jYWxsSWQgLy8gZnVuY3Rpb24gdG9vbHNcbiAgICAgICAgICAgICAgICA6IGFwcHJvdmFsSXRlbS5yYXdJdGVtLmlkOyAvLyBob3N0ZWQgdG9vbHNcbiAgICAgICAgICAgIGFwcHJvdmFsRW50cnkucmVqZWN0ZWQucHVzaChjYWxsSWQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2FwcHJvdmFscy5zZXQodG9vbE5hbWUsIGFwcHJvdmFsRW50cnkpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHQsXG4gICAgICAgICAgICB1c2FnZTogdGhpcy51c2FnZSxcbiAgICAgICAgICAgIGFwcHJvdmFsczogT2JqZWN0LmZyb21FbnRyaWVzKHRoaXMuI2FwcHJvdmFscy5lbnRyaWVzKCkpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1bkNvbnRleHQubWpzLm1hcCIsImltcG9ydCB7IFJlYWRhYmxlU3RyZWFtIGFzIF9SZWFkYWJsZVN0cmVhbSwgVHJhbnNmb3JtU3RyZWFtLCBSZWFkYWJsZSwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBnZXRUdXJuSW5wdXQgfSBmcm9tIFwiLi9ydW4ubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IFN0cmVhbUV2ZW50VGV4dFN0cmVhbSB9IGZyb20gXCIuL3R5cGVzL3Byb3RvY29sLm1qc1wiO1xuY2xhc3MgUnVuUmVzdWx0QmFzZSB7XG4gICAgc3RhdGU7XG4gICAgY29uc3RydWN0b3Ioc3RhdGUpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgaGlzdG9yeSBvZiB0aGUgYWdlbnQgcnVuLiBUaGlzIGluY2x1ZGVzIHRoZSBpbnB1dCBpdGVtcyBhbmQgdGhlIG5ldyBpdGVtcyBnZW5lcmF0ZWQgZHVyaW5nXG4gICAgICogdGhlIGFnZW50IHJ1bi5cbiAgICAgKlxuICAgICAqIFRoaXMgY2FuIGJlIHVzZWQgYXMgaW5wdXRzIGZvciB0aGUgbmV4dCBhZ2VudCBydW4uXG4gICAgICovXG4gICAgZ2V0IGhpc3RvcnkoKSB7XG4gICAgICAgIHJldHVybiBnZXRUdXJuSW5wdXQodGhpcy5pbnB1dCwgdGhpcy5uZXdJdGVtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBuZXcgaXRlbXMgZ2VuZXJhdGVkIGR1cmluZyB0aGUgYWdlbnQgcnVuLiBUaGVzZSBpbmNsdWRlIHRoaW5ncyBsaWtlIG5ldyBtZXNzYWdlcywgdG9vbFxuICAgICAqIGNhbGxzIGFuZCB0aGVpciBvdXRwdXRzLCBldGMuXG4gICAgICpcbiAgICAgKiBJdCBkb2VzIG5vdCBpbmNsdWRlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBhZ2VudHMgYW5kIGluc3RlYWQgcmVwcmVzZW50cyB0aGUgbW9kZWwgZGF0YS5cbiAgICAgKlxuICAgICAqIEZvciB0aGUgb3V0cHV0IGluY2x1ZGluZyB0aGUgYWdlbnRzLCB1c2UgdGhlIGBuZXdJdGVtc2AgcHJvcGVydHkuXG4gICAgICovXG4gICAgZ2V0IG91dHB1dCgpIHtcbiAgICAgICAgcmV0dXJuIGdldFR1cm5JbnB1dChbXSwgdGhpcy5uZXdJdGVtcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgY29weSBvZiB0aGUgb3JpZ2luYWwgaW5wdXQgaXRlbXMuXG4gICAgICovXG4gICAgZ2V0IGlucHV0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5fb3JpZ2luYWxJbnB1dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHJ1biBpdGVtcyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBhZ2VudCBydW4uIFRoaXMgYXNzb2NpYXRlcyB0aGUgbW9kZWwgZGF0YSB3aXRoIHRoZSBhZ2VudHMuXG4gICAgICpcbiAgICAgKiBGb3IgdGhlIG1vZGVsIGRhdGEgdGhhdCBjYW4gYmUgdXNlZCBhcyBpbnB1dHMgZm9yIHRoZSBuZXh0IGFnZW50IHJ1biwgdXNlIHRoZSBgb3V0cHV0YCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBnZXQgbmV3SXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9nZW5lcmF0ZWRJdGVtcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHJhdyBMTE0gcmVzcG9uc2VzIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgZHVyaW5nIHRoZSBhZ2VudCBydW4uXG4gICAgICovXG4gICAgZ2V0IHJhd1Jlc3BvbnNlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX21vZGVsUmVzcG9uc2VzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbGFzdCByZXNwb25zZSBJRCBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGR1cmluZyB0aGUgYWdlbnQgcnVuLlxuICAgICAqL1xuICAgIGdldCBsYXN0UmVzcG9uc2VJZCgpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VzID0gdGhpcy5yYXdSZXNwb25zZXM7XG4gICAgICAgIHJldHVybiByZXNwb25zZXMgJiYgcmVzcG9uc2VzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgID8gcmVzcG9uc2VzW3Jlc3BvbnNlcy5sZW5ndGggLSAxXS5yZXNwb25zZUlkXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxhc3QgYWdlbnQgdGhhdCB3YXMgcnVuXG4gICAgICovXG4gICAgZ2V0IGxhc3RBZ2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX2N1cnJlbnRBZ2VudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR3VhcmRyYWlsIHJlc3VsdHMgZm9yIHRoZSBpbnB1dCBtZXNzYWdlcy5cbiAgICAgKi9cbiAgICBnZXQgaW5wdXRHdWFyZHJhaWxSZXN1bHRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5faW5wdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHdWFyZHJhaWwgcmVzdWx0cyBmb3IgdGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgYWdlbnQuXG4gICAgICovXG4gICAgZ2V0IG91dHB1dEd1YXJkcmFpbFJlc3VsdHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbnkgaW50ZXJydXB0aW9ucyB0aGF0IG9jY3VycmVkIGR1cmluZyB0aGUgYWdlbnQgcnVuIGZvciBleGFtcGxlIGZvciB0b29sIGFwcHJvdmFscy5cbiAgICAgKi9cbiAgICBnZXQgaW50ZXJydXB0aW9ucygpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuX2N1cnJlbnRTdGVwPy50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlLl9jdXJyZW50U3RlcC5kYXRhLmludGVycnVwdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZmluYWwgb3V0cHV0IG9mIHRoZSBhZ2VudC4gSWYgdGhlIG91dHB1dCB0eXBlIHdhcyBzZXQgdG8gYW55dGhpbmcgb3RoZXIgdGhhbiBgdGV4dGAsXG4gICAgICogdGhpcyB3aWxsIGJlIHBhcnNlZCBlaXRoZXIgYXMgSlNPTiBvciB1c2luZyB0aGUgWm9kIHNjaGVtYSB5b3UgcHJvdmlkZWQuXG4gICAgICovXG4gICAgZ2V0IGZpbmFsT3V0cHV0KCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgPT09ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0Jykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUuX2N1cnJlbnRBZ2VudC5wcm9jZXNzRmluYWxPdXRwdXQodGhpcy5zdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIud2FybignQWNjZXNzZWQgZmluYWxPdXRwdXQgYmVmb3JlIGFnZW50IHJ1biBpcyBjb21wbGV0ZWQuJyk7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuLyoqXG4gKiBUaGUgcmVzdWx0IG9mIGFuIGFnZW50IHJ1bi5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1blJlc3VsdCBleHRlbmRzIFJ1blJlc3VsdEJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKHN0YXRlKSB7XG4gICAgICAgIHN1cGVyKHN0YXRlKTtcbiAgICB9XG59XG4vKipcbiAqIFRoZSByZXN1bHQgb2YgYW4gYWdlbnQgcnVuIGluIHN0cmVhbWluZyBtb2RlLlxuICovXG5leHBvcnQgY2xhc3MgU3RyZWFtZWRSdW5SZXN1bHQgZXh0ZW5kcyBSdW5SZXN1bHRCYXNlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBhZ2VudCB0aGF0IGlzIHJ1bm5pbmdcbiAgICAgKi9cbiAgICBnZXQgY3VycmVudEFnZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXN0QWdlbnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IHR1cm4gbnVtYmVyXG4gICAgICovXG4gICAgY3VycmVudFR1cm4gPSAwO1xuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0dXJucyB0aGF0IGNhbiBiZSBydW5cbiAgICAgKi9cbiAgICBtYXhUdXJucztcbiAgICAjZXJyb3IgPSBudWxsO1xuICAgICNzaWduYWw7XG4gICAgI3JlYWRhYmxlQ29udHJvbGxlcjtcbiAgICAjcmVhZGFibGVTdHJlYW07XG4gICAgI2NvbXBsZXRlZFByb21pc2U7XG4gICAgI2NvbXBsZXRlZFByb21pc2VSZXNvbHZlO1xuICAgICNjb21wbGV0ZWRQcm9taXNlUmVqZWN0O1xuICAgICNjYW5jZWxsZWQgPSBmYWxzZTtcbiAgICBjb25zdHJ1Y3RvcihyZXN1bHQgPSB7fSkge1xuICAgICAgICBzdXBlcihyZXN1bHQuc3RhdGUpO1xuICAgICAgICB0aGlzLiNzaWduYWwgPSByZXN1bHQuc2lnbmFsO1xuICAgICAgICBpZiAodGhpcy4jc2lnbmFsKSB7XG4gICAgICAgICAgICB0aGlzLiNzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy4jcmVhZGFibGVTdHJlYW0uY2FuY2VsKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNyZWFkYWJsZVN0cmVhbSA9IG5ldyBfUmVhZGFibGVTdHJlYW0oe1xuICAgICAgICAgICAgc3RhcnQ6IChjb250cm9sbGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyID0gY29udHJvbGxlcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5jZWw6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLiNjYW5jZWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlUmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICAgICAgICB0aGlzLiNjb21wbGV0ZWRQcm9taXNlUmVqZWN0ID0gcmVqZWN0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogQWRkcyBhbiBpdGVtIHRvIHRoZSBzdHJlYW0gb2Ygb3V0cHV0IGl0ZW1zXG4gICAgICovXG4gICAgX2FkZEl0ZW0oaXRlbSkge1xuICAgICAgICBpZiAoIXRoaXMuY2FuY2VsbGVkKSB7XG4gICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXI/LmVucXVldWUoaXRlbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICogSW5kaWNhdGVzIHRoYXQgdGhlIHN0cmVhbSBoYXMgYmVlbiBjb21wbGV0ZWRcbiAgICAgKi9cbiAgICBfZG9uZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbmNlbGxlZCAmJiB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy4jY29tcGxldGVkUHJvbWlzZVJlc29sdmU/LigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqIEhhbmRsZXMgYW4gZXJyb3IgaW4gdGhlIHN0cmVhbSBsb29wLlxuICAgICAqL1xuICAgIF9yYWlzZUVycm9yKGVycikge1xuICAgICAgICBpZiAoIXRoaXMuY2FuY2VsbGVkICYmIHRoaXMuI3JlYWRhYmxlQ29udHJvbGxlcikge1xuICAgICAgICAgICAgdGhpcy4jcmVhZGFibGVDb250cm9sbGVyLmVycm9yKGVycik7XG4gICAgICAgICAgICB0aGlzLiNyZWFkYWJsZUNvbnRyb2xsZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jZXJyb3IgPSBlcnI7XG4gICAgICAgIHRoaXMuI2NvbXBsZXRlZFByb21pc2VSZWplY3Q/LihlcnIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmVhbSBoYXMgYmVlbiBjYW5jZWxsZWQuXG4gICAgICovXG4gICAgZ2V0IGNhbmNlbGxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NhbmNlbGxlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyByZWFkYWJsZSBzdHJlYW0uXG4gICAgICogQHJldHVybnMgQSByZWFkYWJsZSBzdHJlYW0gb2YgdGhlIGFnZW50IHJ1bi5cbiAgICAgKi9cbiAgICB0b1N0cmVhbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3JlYWRhYmxlU3RyZWFtO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBd2FpdCB0aGlzIHByb21pc2UgdG8gZW5zdXJlIHRoYXQgdGhlIHN0cmVhbSBoYXMgYmVlbiBjb21wbGV0ZWQgaWYgeW91IGFyZSBub3QgY29uc3VtaW5nIHRoZVxuICAgICAqIHN0cmVhbSBkaXJlY3RseS5cbiAgICAgKi9cbiAgICBnZXQgY29tcGxldGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY29tcGxldGVkUHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXJyb3IgdGhyb3duIGR1cmluZyB0aGUgcnVuLCBpZiBhbnkuXG4gICAgICovXG4gICAgZ2V0IGVycm9yKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jZXJyb3I7XG4gICAgfVxuICAgIHRvVGV4dFN0cmVhbShvcHRpb25zID0ge30pIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy4jcmVhZGFibGVTdHJlYW0ucGlwZVRocm91Z2gobmV3IFRyYW5zZm9ybVN0cmVhbSh7XG4gICAgICAgICAgICB0cmFuc2Zvcm0oZXZlbnQsIGNvbnRyb2xsZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3Jhd19tb2RlbF9zdHJlYW1fZXZlbnQnICYmXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEudHlwZSA9PT0gJ291dHB1dF90ZXh0X2RlbHRhJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gU3RyZWFtRXZlbnRUZXh0U3RyZWFtLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoaXRlbS5kZWx0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSkpO1xuICAgICAgICBpZiAob3B0aW9ucy5jb21wYXRpYmxlV2l0aE5vZGVTdHJlYW1zKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVhZGFibGUuZnJvbVdlYihzdHJlYW0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHJlYW07XG4gICAgfVxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNyZWFkYWJsZVN0cmVhbVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXN1bHQubWpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVUb29sKHRvb2wpIHtcbiAgICBpZiAodG9vbC50eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRvb2wuZGVzY3JpcHRpb24sXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiB0b29sLnBhcmFtZXRlcnMsXG4gICAgICAgICAgICBzdHJpY3Q6IHRvb2wuc3RyaWN0LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAodG9vbC50eXBlID09PSAnY29tcHV0ZXInKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnY29tcHV0ZXInLFxuICAgICAgICAgICAgbmFtZTogdG9vbC5uYW1lLFxuICAgICAgICAgICAgZW52aXJvbm1lbnQ6IHRvb2wuY29tcHV0ZXIuZW52aXJvbm1lbnQsXG4gICAgICAgICAgICBkaW1lbnNpb25zOiB0b29sLmNvbXB1dGVyLmRpbWVuc2lvbnMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbCcsXG4gICAgICAgIG5hbWU6IHRvb2wubmFtZSxcbiAgICAgICAgcHJvdmlkZXJEYXRhOiB0b29sLnByb3ZpZGVyRGF0YSxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZUhhbmRvZmYoaCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHRvb2xOYW1lOiBoLnRvb2xOYW1lLFxuICAgICAgICB0b29sRGVzY3JpcHRpb246IGgudG9vbERlc2NyaXB0aW9uLFxuICAgICAgICBpbnB1dEpzb25TY2hlbWE6IGguaW5wdXRKc29uU2NoZW1hLFxuICAgICAgICBzdHJpY3RKc29uU2NoZW1hOiBoLnN0cmljdEpzb25TY2hlbWEsXG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlcmlhbGl6ZS5tanMubWFwIiwiaW1wb3J0IHsgdG9TbWFydFN0cmluZyB9IGZyb20gXCIuL3V0aWxzL3NtYXJ0U3RyaW5nLm1qc1wiO1xuZXhwb3J0IGNsYXNzIFJ1bkl0ZW1CYXNlIHtcbiAgICB0eXBlID0gJ2Jhc2VfaXRlbSc7XG4gICAgcmF3SXRlbTtcbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICAgICAgICByYXdJdGVtOiB0aGlzLnJhd0l0ZW0sXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1bk1lc3NhZ2VPdXRwdXRJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICdtZXNzYWdlX291dHB1dF9pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldCBjb250ZW50KCkge1xuICAgICAgICBsZXQgY29udGVudCA9ICcnO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgdGhpcy5yYXdJdGVtLmNvbnRlbnQpIHtcbiAgICAgICAgICAgIGlmIChwYXJ0LnR5cGUgPT09ICdvdXRwdXRfdGV4dCcpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IHBhcnQudGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuVG9vbENhbGxJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICd0b29sX2NhbGxfaXRlbSc7XG4gICAgY29uc3RydWN0b3IocmF3SXRlbSwgYWdlbnQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5zdXBlci50b0pTT04oKSxcbiAgICAgICAgICAgIGFnZW50OiB0aGlzLmFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICBvdXRwdXQ7XG4gICAgdHlwZSA9ICd0b29sX2NhbGxfb3V0cHV0X2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50LCBvdXRwdXQpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yYXdJdGVtID0gcmF3SXRlbTtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgICAgICB0aGlzLm91dHB1dCA9IG91dHB1dDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIG91dHB1dDogdG9TbWFydFN0cmluZyh0aGlzLm91dHB1dCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1blJlYXNvbmluZ0l0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBhZ2VudDtcbiAgICB0eXBlID0gJ3JlYXNvbmluZ19pdGVtJztcbiAgICBjb25zdHJ1Y3RvcihyYXdJdGVtLCBhZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLmFnZW50ID0gYWdlbnQ7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnN1cGVyLnRvSlNPTigpLFxuICAgICAgICAgICAgYWdlbnQ6IHRoaXMuYWdlbnQudG9KU09OKCksXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1bkhhbmRvZmZDYWxsSXRlbSBleHRlbmRzIFJ1bkl0ZW1CYXNlIHtcbiAgICByYXdJdGVtO1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAnaGFuZG9mZl9jYWxsX2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVuSGFuZG9mZk91dHB1dEl0ZW0gZXh0ZW5kcyBSdW5JdGVtQmFzZSB7XG4gICAgcmF3SXRlbTtcbiAgICBzb3VyY2VBZ2VudDtcbiAgICB0YXJnZXRBZ2VudDtcbiAgICB0eXBlID0gJ2hhbmRvZmZfb3V0cHV0X2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIHNvdXJjZUFnZW50LCB0YXJnZXRBZ2VudCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnJhd0l0ZW0gPSByYXdJdGVtO1xuICAgICAgICB0aGlzLnNvdXJjZUFnZW50ID0gc291cmNlQWdlbnQ7XG4gICAgICAgIHRoaXMudGFyZ2V0QWdlbnQgPSB0YXJnZXRBZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBzb3VyY2VBZ2VudDogdGhpcy5zb3VyY2VBZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIHRhcmdldEFnZW50OiB0aGlzLnRhcmdldEFnZW50LnRvSlNPTigpLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBSdW5Ub29sQXBwcm92YWxJdGVtIGV4dGVuZHMgUnVuSXRlbUJhc2Uge1xuICAgIHJhd0l0ZW07XG4gICAgYWdlbnQ7XG4gICAgdHlwZSA9ICd0b29sX2FwcHJvdmFsX2l0ZW0nO1xuICAgIGNvbnN0cnVjdG9yKHJhd0l0ZW0sIGFnZW50KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucmF3SXRlbSA9IHJhd0l0ZW07XG4gICAgICAgIHRoaXMuYWdlbnQgPSBhZ2VudDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uc3VwZXIudG9KU09OKCksXG4gICAgICAgICAgICBhZ2VudDogdGhpcy5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgfTtcbiAgICB9XG59XG4vKipcbiAqIEV4dHJhY3QgYWxsIHRleHQgb3V0cHV0IGZyb20gYSBsaXN0IG9mIHJ1biBpdGVtcyBieSBjb25jYXRlbmF0aW5nIHRoZSBjb250ZW50IG9mIGFsbFxuICogbWVzc2FnZSBvdXRwdXQgaXRlbXMuXG4gKlxuICogQHBhcmFtIGl0ZW1zIC0gVGhlIGxpc3Qgb2YgcnVuIGl0ZW1zIHRvIGV4dHJhY3QgdGV4dCBmcm9tLlxuICogQHJldHVybnMgQSBzdHJpbmcgb2YgYWxsIHRoZSB0ZXh0IG91dHB1dCBmcm9tIHRoZSBydW4gaXRlbXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0QWxsVGV4dE91dHB1dChpdGVtcykge1xuICAgIHJldHVybiBpdGVtc1xuICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtLnR5cGUgPT09ICdtZXNzYWdlX291dHB1dF9pdGVtJylcbiAgICAgICAgLm1hcCgoaXRlbSkgPT4gaXRlbS5jb250ZW50KVxuICAgICAgICAuam9pbignJyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pdGVtcy5tanMubWFwIiwiLyoqXG4gKiBHZXQgdGhlIGxhc3QgdGV4dCBmcm9tIHRoZSBvdXRwdXQgbWVzc2FnZS5cbiAqIEBwYXJhbSBvdXRwdXRNZXNzYWdlXG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFzdFRleHRGcm9tT3V0cHV0TWVzc2FnZShvdXRwdXRNZXNzYWdlKSB7XG4gICAgaWYgKG91dHB1dE1lc3NhZ2UudHlwZSAhPT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChvdXRwdXRNZXNzYWdlLnJvbGUgIT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IGxhc3RJdGVtID0gb3V0cHV0TWVzc2FnZS5jb250ZW50W291dHB1dE1lc3NhZ2UuY29udGVudC5sZW5ndGggLSAxXTtcbiAgICBpZiAobGFzdEl0ZW0udHlwZSAhPT0gJ291dHB1dF90ZXh0Jykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gbGFzdEl0ZW0udGV4dDtcbn1cbi8qKlxuICogR2V0IHRoZSBsYXN0IHRleHQgZnJvbSB0aGUgb3V0cHV0IG1lc3NhZ2UuXG4gKiBAcGFyYW0gb3V0cHV0XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3V0cHV0VGV4dChvdXRwdXQpIHtcbiAgICBpZiAob3V0cHV0Lm91dHB1dC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICByZXR1cm4gKGdldExhc3RUZXh0RnJvbU91dHB1dE1lc3NhZ2Uob3V0cHV0Lm91dHB1dFtvdXRwdXQub3V0cHV0Lmxlbmd0aCAtIDFdKSB8fCAnJyk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tZXNzYWdlcy5tanMubWFwIiwiLyoqXG4gKiBTdHJlYW1pbmcgZXZlbnQgZnJvbSB0aGUgTExNLiBUaGVzZSBhcmUgYHJhd2AgZXZlbnRzLCBpLmUuIHRoZXkgYXJlIGRpcmVjdGx5IHBhc3NlZCB0aHJvdWdoIGZyb21cbiAqIHRoZSBMTE0uXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50IHtcbiAgICBkYXRhO1xuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIG9mIHRoZSBldmVudC5cbiAgICAgKi9cbiAgICB0eXBlID0gJ3Jhd19tb2RlbF9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBkYXRhIFRoZSByYXcgcmVzcG9uc2VzIHN0cmVhbSBldmVudHMgZnJvbSB0aGUgTExNLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB9XG59XG4vKipcbiAqIFN0cmVhbWluZyBldmVudHMgdGhhdCB3cmFwIGEgYFJ1bkl0ZW1gLiBBcyB0aGUgYWdlbnQgcHJvY2Vzc2VzIHRoZSBMTE0gcmVzcG9uc2UsIGl0IHdpbGwgZ2VuZXJhdGVcbiAqIHRoZXNlIGV2ZW50cyBmcm9tIG5ldyBtZXNzYWdlcywgdG9vbCBjYWxscywgdG9vbCBvdXRwdXRzLCBoYW5kb2ZmcywgZXRjLlxuICovXG5leHBvcnQgY2xhc3MgUnVuSXRlbVN0cmVhbUV2ZW50IHtcbiAgICBuYW1lO1xuICAgIGl0ZW07XG4gICAgdHlwZSA9ICdydW5faXRlbV9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudC5cbiAgICAgKiBAcGFyYW0gaXRlbSBUaGUgaXRlbSB0aGF0IHdhcyBjcmVhdGVkLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGl0ZW0pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5pdGVtID0gaXRlbTtcbiAgICB9XG59XG4vKipcbiAqIEV2ZW50IHRoYXQgbm90aWZpZXMgdGhhdCB0aGVyZSBpcyBhIG5ldyBhZ2VudCBydW5uaW5nLlxuICovXG5leHBvcnQgY2xhc3MgUnVuQWdlbnRVcGRhdGVkU3RyZWFtRXZlbnQge1xuICAgIGFnZW50O1xuICAgIHR5cGUgPSAnYWdlbnRfdXBkYXRlZF9zdHJlYW1fZXZlbnQnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBhZ2VudCBUaGUgbmV3IGFnZW50XG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYWdlbnQpIHtcbiAgICAgICAgdGhpcy5hZ2VudCA9IGFnZW50O1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50cy5tanMubWFwIiwiaW1wb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBUb29sQ2FsbEVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgeyBnZXRUcmFuc2Zlck1lc3NhZ2UgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuaW1wb3J0IHsgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5IYW5kb2ZmT3V0cHV0SXRlbSwgUnVuTWVzc2FnZU91dHB1dEl0ZW0sIFJ1blJlYXNvbmluZ0l0ZW0sIFJ1blRvb2xBcHByb3ZhbEl0ZW0sIFJ1blRvb2xDYWxsSXRlbSwgUnVuVG9vbENhbGxPdXRwdXRJdGVtLCB9IGZyb20gXCIuL2l0ZW1zLm1qc1wiO1xuaW1wb3J0IGxvZ2dlciBmcm9tIFwiLi9sb2dnZXIubWpzXCI7XG5pbXBvcnQgeyBnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlIH0gZnJvbSBcIi4vdXRpbHMvbWVzc2FnZXMubWpzXCI7XG5pbXBvcnQgeyB3aXRoRnVuY3Rpb25TcGFuLCB3aXRoSGFuZG9mZlNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2NyZWF0ZVNwYW5zLm1qc1wiO1xuaW1wb3J0IHsgZ2V0U2NoZW1hQW5kUGFyc2VyRnJvbUlucHV0VHlwZSB9IGZyb20gXCIuL3V0aWxzL3Rvb2xzLm1qc1wiO1xuaW1wb3J0IHsgc2FmZUV4ZWN1dGUgfSBmcm9tIFwiLi91dGlscy9zYWZlRXhlY3V0ZS5tanNcIjtcbmltcG9ydCB7IGFkZEVycm9yVG9DdXJyZW50U3BhbiB9IGZyb20gXCIuL3RyYWNpbmcvY29udGV4dC5tanNcIjtcbmltcG9ydCB7IFJ1bkl0ZW1TdHJlYW1FdmVudCB9IGZyb20gXCIuL2V2ZW50cy5tanNcIjtcbmltcG9ydCB7IHogfSBmcm9tICdAb3BlbmFpL3pvZC92Myc7XG5pbXBvcnQgeyB0b1NtYXJ0U3RyaW5nIH0gZnJvbSBcIi4vdXRpbHMvc21hcnRTdHJpbmcubWpzXCI7XG5pbXBvcnQgeyBpc1pvZE9iamVjdCB9IGZyb20gXCIuL3V0aWxzL2luZGV4Lm1qc1wiO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NNb2RlbFJlc3BvbnNlKG1vZGVsUmVzcG9uc2UsIGFnZW50LCB0b29scywgaGFuZG9mZnMpIHtcbiAgICBjb25zdCBpdGVtcyA9IFtdO1xuICAgIGNvbnN0IHJ1bkhhbmRvZmZzID0gW107XG4gICAgY29uc3QgcnVuRnVuY3Rpb25zID0gW107XG4gICAgY29uc3QgcnVuQ29tcHV0ZXJBY3Rpb25zID0gW107XG4gICAgY29uc3QgcnVuTUNQQXBwcm92YWxSZXF1ZXN0cyA9IFtdO1xuICAgIGNvbnN0IHRvb2xzVXNlZCA9IFtdO1xuICAgIGNvbnN0IGhhbmRvZmZNYXAgPSBuZXcgTWFwKGhhbmRvZmZzLm1hcCgoaCkgPT4gW2gudG9vbE5hbWUsIGhdKSk7XG4gICAgY29uc3QgZnVuY3Rpb25NYXAgPSBuZXcgTWFwKHRvb2xzLmZpbHRlcigodCkgPT4gdC50eXBlID09PSAnZnVuY3Rpb24nKS5tYXAoKHQpID0+IFt0Lm5hbWUsIHRdKSk7XG4gICAgY29uc3QgY29tcHV0ZXJUb29sID0gdG9vbHMuZmluZCgodCkgPT4gdC50eXBlID09PSAnY29tcHV0ZXInKTtcbiAgICBjb25zdCBtY3BUb29sTWFwID0gbmV3IE1hcCh0b29sc1xuICAgICAgICAuZmlsdGVyKCh0KSA9PiB0LnR5cGUgPT09ICdob3N0ZWRfdG9vbCcgJiYgdC5wcm92aWRlckRhdGE/LnR5cGUgPT09ICdtY3AnKVxuICAgICAgICAubWFwKCh0KSA9PiB0KVxuICAgICAgICAubWFwKCh0KSA9PiBbdC5wcm92aWRlckRhdGEuc2VydmVyX2xhYmVsLCB0XSkpO1xuICAgIGZvciAoY29uc3Qgb3V0cHV0IG9mIG1vZGVsUmVzcG9uc2Uub3V0cHV0KSB7XG4gICAgICAgIGlmIChvdXRwdXQudHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICBpZiAob3V0cHV0LnJvbGUgPT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMucHVzaChuZXcgUnVuTWVzc2FnZU91dHB1dEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAnaG9zdGVkX3Rvb2xfY2FsbCcpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgICAgICBjb25zdCB0b29sTmFtZSA9IG91dHB1dC5uYW1lO1xuICAgICAgICAgICAgdG9vbHNVc2VkLnB1c2godG9vbE5hbWUpO1xuICAgICAgICAgICAgaWYgKG91dHB1dC5wcm92aWRlckRhdGE/LnR5cGUgPT09ICdtY3BfYXBwcm92YWxfcmVxdWVzdCcgfHxcbiAgICAgICAgICAgICAgICBvdXRwdXQubmFtZSA9PT0gJ21jcF9hcHByb3ZhbF9yZXF1ZXN0Jykge1xuICAgICAgICAgICAgICAgIC8vIEhvc3RlZCByZW1vdGUgTUNQIHNlcnZlcidzIGFwcHJvdmFsIHByb2Nlc3NcbiAgICAgICAgICAgICAgICBjb25zdCBwcm92aWRlckRhdGEgPSBvdXRwdXQucHJvdmlkZXJEYXRhO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1jcFNlcnZlckxhYmVsID0gcHJvdmlkZXJEYXRhLnNlcnZlcl9sYWJlbDtcbiAgICAgICAgICAgICAgICBjb25zdCBtY3BTZXJ2ZXJUb29sID0gbWNwVG9vbE1hcC5nZXQobWNwU2VydmVyTGFiZWwpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWNwU2VydmVyVG9vbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBNQ1Agc2VydmVyICgke21jcFNlcnZlckxhYmVsfSkgbm90IGZvdW5kIGluIEFnZW50ICgke2FnZW50Lm5hbWV9KWA7XG4gICAgICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBtY3Bfc2VydmVyX2xhYmVsOiBtY3BTZXJ2ZXJMYWJlbCB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gRG8gdGhpcyBhcHByb3ZhbCBsYXRlcjpcbiAgICAgICAgICAgICAgICAvLyBXZSBzdXBwb3J0IGJvdGggb25BcHByb3ZhbCBjYWxsYmFjayAobGlrZSB0aGUgUHl0aG9uIFNESyBkb2VzKSBhbmQgSElUTCBwYXR0ZXJucy5cbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbEl0ZW0gPSBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbF9jYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgbXVzdCB1c2UgdGhpcyBuYW1lIHRvIGFsaWduIHdpdGggdGhlIG5hbWUgc2VudCBmcm9tIHRoZSBzZXJ2ZXJzXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHByb3ZpZGVyRGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBpZDogcHJvdmlkZXJEYXRhLmlkLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdpbl9wcm9ncmVzcycsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YSxcbiAgICAgICAgICAgICAgICB9LCBhZ2VudCk7XG4gICAgICAgICAgICAgICAgcnVuTUNQQXBwcm92YWxSZXF1ZXN0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEl0ZW06IGFwcHJvdmFsSXRlbSxcbiAgICAgICAgICAgICAgICAgICAgbWNwVG9vbDogbWNwU2VydmVyVG9vbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIW1jcFNlcnZlclRvb2wucHJvdmlkZXJEYXRhLm9uX2FwcHJvdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gb25BcHByb3ZhbCBmdW5jdGlvbiBleGlzdHMsIGl0IGNvbmZpcm1zIHRoZSBhcHByb3ZhbCByaWdodCBhZnRlciB0aGlzLlxuICAgICAgICAgICAgICAgICAgICAvLyBUaHVzLCB0aGlzIGFwcHJvdmFsIGl0ZW0gbXVzdCBiZSBhcHBlbmRlZCBvbmx5IGZvciB0aGUgbmV4dCB0dXJuIGludGVycnB1dGlvbiBwYXR0ZXJucy5cbiAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaChhcHByb3ZhbEl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdXRwdXQudHlwZSA9PT0gJ3JlYXNvbmluZycpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1blJlYXNvbmluZ0l0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG91dHB1dC50eXBlID09PSAnY29tcHV0ZXJfY2FsbCcpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgICAgICB0b29sc1VzZWQucHVzaCgnY29tcHV0ZXJfdXNlJyk7XG4gICAgICAgICAgICBpZiAoIWNvbXB1dGVyVG9vbCkge1xuICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNb2RlbCBwcm9kdWNlZCBjb21wdXRlciBhY3Rpb24gd2l0aG91dCBhIGNvbXB1dGVyIHRvb2wuJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWdlbnRfbmFtZTogYWdlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdNb2RlbCBwcm9kdWNlZCBjb21wdXRlciBhY3Rpb24gd2l0aG91dCBhIGNvbXB1dGVyIHRvb2wuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBydW5Db21wdXRlckFjdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgdG9vbENhbGw6IG91dHB1dCxcbiAgICAgICAgICAgICAgICBjb21wdXRlcjogY29tcHV0ZXJUb29sLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG91dHB1dC50eXBlICE9PSAnZnVuY3Rpb25fY2FsbCcpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHRvb2xzVXNlZC5wdXNoKG91dHB1dC5uYW1lKTtcbiAgICAgICAgY29uc3QgaGFuZG9mZiA9IGhhbmRvZmZNYXAuZ2V0KG91dHB1dC5uYW1lKTtcbiAgICAgICAgaWYgKGhhbmRvZmYpIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3IFJ1bkhhbmRvZmZDYWxsSXRlbShvdXRwdXQsIGFnZW50KSk7XG4gICAgICAgICAgICBydW5IYW5kb2Zmcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogb3V0cHV0LFxuICAgICAgICAgICAgICAgIGhhbmRvZmY6IGhhbmRvZmYsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uVG9vbCA9IGZ1bmN0aW9uTWFwLmdldChvdXRwdXQubmFtZSk7XG4gICAgICAgICAgICBpZiAoIWZ1bmN0aW9uVG9vbCkge1xuICAgICAgICAgICAgICAgIGFkZEVycm9yVG9DdXJyZW50U3Bhbih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBUb29sICR7b3V0cHV0Lm5hbWV9IG5vdCBmb3VuZCBpbiBhZ2VudCAke2FnZW50Lm5hbWV9LmAsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfbmFtZTogb3V0cHV0Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhZ2VudF9uYW1lOiBhZ2VudC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoYFRvb2wgJHtvdXRwdXQubmFtZX0gbm90IGZvdW5kIGluIGFnZW50ICR7YWdlbnQubmFtZX0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtcy5wdXNoKG5ldyBSdW5Ub29sQ2FsbEl0ZW0ob3V0cHV0LCBhZ2VudCkpO1xuICAgICAgICAgICAgcnVuRnVuY3Rpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBvdXRwdXQsXG4gICAgICAgICAgICAgICAgdG9vbDogZnVuY3Rpb25Ub29sLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmV3SXRlbXM6IGl0ZW1zLFxuICAgICAgICBoYW5kb2ZmczogcnVuSGFuZG9mZnMsXG4gICAgICAgIGZ1bmN0aW9uczogcnVuRnVuY3Rpb25zLFxuICAgICAgICBjb21wdXRlckFjdGlvbnM6IHJ1bkNvbXB1dGVyQWN0aW9ucyxcbiAgICAgICAgbWNwQXBwcm92YWxSZXF1ZXN0czogcnVuTUNQQXBwcm92YWxSZXF1ZXN0cyxcbiAgICAgICAgdG9vbHNVc2VkOiB0b29sc1VzZWQsXG4gICAgICAgIGhhc1Rvb2xzT3JBcHByb3ZhbHNUb1J1bigpIHtcbiAgICAgICAgICAgIHJldHVybiAocnVuSGFuZG9mZnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJ1bkZ1bmN0aW9ucy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcnVuTUNQQXBwcm92YWxSZXF1ZXN0cy5sZW5ndGggPiAwIHx8XG4gICAgICAgICAgICAgICAgcnVuQ29tcHV0ZXJBY3Rpb25zLmxlbmd0aCA+IDApO1xuICAgICAgICB9LFxuICAgIH07XG59XG5leHBvcnQgY29uc3QgbmV4dFN0ZXBTY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbmV4dF9zdGVwX2hhbmRvZmYnKSxcbiAgICAgICAgbmV3QWdlbnQ6IHouYW55KCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnKSxcbiAgICAgICAgb3V0cHV0OiB6LnN0cmluZygpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgdHlwZTogei5saXRlcmFsKCduZXh0X3N0ZXBfcnVuX2FnYWluJyksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSxcbiAgICAgICAgZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG4gICAgfSksXG5dKTtcbmNsYXNzIFNpbmdsZVN0ZXBSZXN1bHQge1xuICAgIG9yaWdpbmFsSW5wdXQ7XG4gICAgbW9kZWxSZXNwb25zZTtcbiAgICBwcmVTdGVwSXRlbXM7XG4gICAgbmV3U3RlcEl0ZW1zO1xuICAgIG5leHRTdGVwO1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBpbnB1dCBpdGVtcyBpLmUuIHRoZSBpdGVtcyBiZWZvcmUgcnVuKCkgd2FzIGNhbGxlZC4gTWF5IGJlIG11dGVkIGJ5IGhhbmRvZmYgaW5wdXQgZmlsdGVyc1xuICAgICAqL1xuICAgIG9yaWdpbmFsSW5wdXQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBtb2RlbCByZXNwb25zZSBmb3IgdGhlIGN1cnJlbnQgc3RlcFxuICAgICAqL1xuICAgIG1vZGVsUmVzcG9uc2UsIFxuICAgIC8qKlxuICAgICAqIFRoZSBpdGVtcyBiZWZvcmUgdGhlIGN1cnJlbnQgc3RlcCB3YXMgZXhlY3V0ZWRcbiAgICAgKi9cbiAgICBwcmVTdGVwSXRlbXMsIFxuICAgIC8qKlxuICAgICAqIFRoZSBpdGVtcyBhZnRlciB0aGUgY3VycmVudCBzdGVwIHdhcyBleGVjdXRlZFxuICAgICAqL1xuICAgIG5ld1N0ZXBJdGVtcywgXG4gICAgLyoqXG4gICAgICogVGhlIG5leHQgc3RlcCB0byBleGVjdXRlXG4gICAgICovXG4gICAgbmV4dFN0ZXApIHtcbiAgICAgICAgdGhpcy5vcmlnaW5hbElucHV0ID0gb3JpZ2luYWxJbnB1dDtcbiAgICAgICAgdGhpcy5tb2RlbFJlc3BvbnNlID0gbW9kZWxSZXNwb25zZTtcbiAgICAgICAgdGhpcy5wcmVTdGVwSXRlbXMgPSBwcmVTdGVwSXRlbXM7XG4gICAgICAgIHRoaXMubmV3U3RlcEl0ZW1zID0gbmV3U3RlcEl0ZW1zO1xuICAgICAgICB0aGlzLm5leHRTdGVwID0gbmV4dFN0ZXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBpdGVtcyBnZW5lcmF0ZWQgZHVyaW5nIHRoZSBhZ2VudCBydW4gKGkuZS4gZXZlcnl0aGluZyBnZW5lcmF0ZWQgYWZ0ZXIgb3JpZ2luYWxJbnB1dClcbiAgICAgKi9cbiAgICBnZXQgZ2VuZXJhdGVkSXRlbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZVN0ZXBJdGVtcy5jb25jYXQodGhpcy5uZXdTdGVwSXRlbXMpO1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXliZVJlc2V0VG9vbENob2ljZShhZ2VudCwgdG9vbFVzZVRyYWNrZXIsIG1vZGVsU2V0dGluZ3MpIHtcbiAgICBpZiAoYWdlbnQucmVzZXRUb29sQ2hvaWNlICYmIHRvb2xVc2VUcmFja2VyLmhhc1VzZWRUb29scyhhZ2VudCkpIHtcbiAgICAgICAgcmV0dXJuIHsgLi4ubW9kZWxTZXR0aW5ncywgdG9vbENob2ljZTogdW5kZWZpbmVkIH07XG4gICAgfVxuICAgIHJldHVybiBtb2RlbFNldHRpbmdzO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVJbnRlcnJ1cHRlZFRvb2xzQW5kU2lkZUVmZmVjdHMoYWdlbnQsIG9yaWdpbmFsSW5wdXQsIG9yaWdpbmFsUHJlU3RlcEl0ZW1zLCBuZXdSZXNwb25zZSwgcHJvY2Vzc2VkUmVzcG9uc2UsIHJ1bm5lciwgc3RhdGUpIHtcbiAgICAvLyBjYWxsX2lkcyBmb3IgZnVuY3Rpb24gdG9vbHNcbiAgICBjb25zdCBmdW5jdGlvbkNhbGxJZHMgPSBvcmlnaW5hbFByZVN0ZXBJdGVtc1xuICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBpdGVtIGluc3RhbmNlb2YgUnVuVG9vbEFwcHJvdmFsSXRlbSAmJlxuICAgICAgICAnY2FsbElkJyBpbiBpdGVtLnJhd0l0ZW0gJiZcbiAgICAgICAgaXRlbS5yYXdJdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJylcbiAgICAgICAgLm1hcCgoaXRlbSkgPT4gaXRlbS5yYXdJdGVtLmNhbGxJZCk7XG4gICAgLy8gUnVuIGZ1bmN0aW9uIHRvb2xzIHRoYXQgcmVxdWlyZSBhcHByb3ZhbCBhZnRlciB0aGV5IGdldCB0aGVpciBhcHByb3ZhbCByZXN1bHRzXG4gICAgY29uc3QgZnVuY3Rpb25Ub29sUnVucyA9IHByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucy5maWx0ZXIoKHJ1bikgPT4ge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb25DYWxsSWRzLmluY2x1ZGVzKHJ1bi50b29sQ2FsbC5jYWxsSWQpO1xuICAgIH0pO1xuICAgIGNvbnN0IGZ1bmN0aW9uUmVzdWx0cyA9IGF3YWl0IGV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyhhZ2VudCwgZnVuY3Rpb25Ub29sUnVucywgcnVubmVyLCBzdGF0ZSk7XG4gICAgLy8gQ3JlYXRlIHRoZSBpbml0aWFsIHNldCBvZiB0aGUgb3V0cHV0IGl0ZW1zXG4gICAgY29uc3QgbmV3SXRlbXMgPSBmdW5jdGlvblJlc3VsdHMubWFwKChyKSA9PiByLnJ1bkl0ZW0pO1xuICAgIC8vIFJ1biBNQ1AgdG9vbHMgdGhhdCByZXF1aXJlIGFwcHJvdmFsIGFmdGVyIHRoZXkgZ2V0IHRoZWlyIGFwcHJvdmFsIHJlc3VsdHNcbiAgICBjb25zdCBtY3BBcHByb3ZhbFJ1bnMgPSBwcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzLmZpbHRlcigocnVuKSA9PiB7XG4gICAgICAgIHJldHVybiAocnVuLnJlcXVlc3RJdGVtLnR5cGUgPT09ICd0b29sX2FwcHJvdmFsX2l0ZW0nICYmXG4gICAgICAgICAgICBydW4ucmVxdWVzdEl0ZW0ucmF3SXRlbS50eXBlID09PSAnaG9zdGVkX3Rvb2xfY2FsbCcgJiZcbiAgICAgICAgICAgIHJ1bi5yZXF1ZXN0SXRlbS5yYXdJdGVtLnByb3ZpZGVyRGF0YT8udHlwZSA9PT0gJ21jcF9hcHByb3ZhbF9yZXF1ZXN0Jyk7XG4gICAgfSk7XG4gICAgZm9yIChjb25zdCBydW4gb2YgbWNwQXBwcm92YWxSdW5zKSB7XG4gICAgICAgIC8vIHRoZSBhcHByb3ZhbF9yZXF1ZXN0X2lkIFwibWNwcl8xMjMuLi5cIlxuICAgICAgICBjb25zdCBhcHByb3ZhbFJlcXVlc3RJZCA9IHJ1bi5yZXF1ZXN0SXRlbS5yYXdJdGVtLmlkO1xuICAgICAgICBjb25zdCBhcHByb3ZlZCA9IHN0YXRlLl9jb250ZXh0LmlzVG9vbEFwcHJvdmVkKHtcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgaXRlbSBuYW1lIG11c3QgYmUgdGhlIHNhbWUgd2l0aCB0aGUgb25lIHNlbnQgZnJvbSBSZXNwb25zZXMgQVBJIHNlcnZlclxuICAgICAgICAgICAgdG9vbE5hbWU6IHJ1bi5yZXF1ZXN0SXRlbS5yYXdJdGVtLm5hbWUsXG4gICAgICAgICAgICBjYWxsSWQ6IGFwcHJvdmFsUmVxdWVzdElkLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGVvZiBhcHByb3ZlZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IHtcbiAgICAgICAgICAgICAgICBhcHByb3ZlOiBhcHByb3ZlZCxcbiAgICAgICAgICAgICAgICBhcHByb3ZhbF9yZXF1ZXN0X2lkOiBhcHByb3ZhbFJlcXVlc3RJZCxcbiAgICAgICAgICAgICAgICByZWFzb246IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBUZWxsIFJlc3BvbnNlcyBBUEkgc2VydmVyIHRoZSBhcHByb3ZhbCByZXN1bHQgaW4gdGhlIG5leHQgdHVyblxuICAgICAgICAgICAgbmV3SXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxJdGVtKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnaG9zdGVkX3Rvb2xfY2FsbCcsXG4gICAgICAgICAgICAgICAgbmFtZTogJ21jcF9hcHByb3ZhbF9yZXNwb25zZScsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhLFxuICAgICAgICAgICAgfSwgYWdlbnQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBjaGVja1Rvb2xPdXRwdXQgPSBhd2FpdCBjaGVja0ZvckZpbmFsT3V0cHV0RnJvbVRvb2xzKGFnZW50LCBmdW5jdGlvblJlc3VsdHMsIHN0YXRlKTtcbiAgICAvLyBFeGNsdWRlIHRoZSB0b29sIGFwcHJvdmFsIGl0ZW1zLCB3aGljaCBzaG91bGQgbm90IGJlIHNlbnQgdG8gUmVzcG9uc2VzIEFQSSxcbiAgICAvLyBmcm9tIHRoZSBTaW5nbGVTdGVwUmVzdWx0J3MgcHJlU3RlcEl0ZW1zXG4gICAgY29uc3QgcHJlU3RlcEl0ZW1zID0gb3JpZ2luYWxQcmVTdGVwSXRlbXMuZmlsdGVyKChpdGVtKSA9PiB7XG4gICAgICAgIHJldHVybiAhKGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtKTtcbiAgICB9KTtcbiAgICBpZiAoY2hlY2tUb29sT3V0cHV0LmlzRmluYWxPdXRwdXQpIHtcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBhZ2VudCwgY2hlY2tUb29sT3V0cHV0LmZpbmFsT3V0cHV0KTtcbiAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIGNoZWNrVG9vbE91dHB1dC5maW5hbE91dHB1dCk7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9maW5hbF9vdXRwdXQnLFxuICAgICAgICAgICAgb3V0cHV0OiBjaGVja1Rvb2xPdXRwdXQuZmluYWxPdXRwdXQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChjaGVja1Rvb2xPdXRwdXQuaXNJbnRlcnJ1cHRlZCkge1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHtcbiAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpbnRlcnJ1cHRpb25zOiBjaGVja1Rvb2xPdXRwdXQuaW50ZXJydXB0aW9ucyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyB3ZSBvbmx5IHJhbiBuZXcgdG9vbHMgYW5kIHNpZGUgZWZmZWN0cy4gV2UgbmVlZCB0byBydW4gdGhlIHJlc3Qgb2YgdGhlIGFnZW50XG4gICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlVG9vbHNBbmRTaWRlRWZmZWN0cyhhZ2VudCwgb3JpZ2luYWxJbnB1dCwgb3JpZ2luYWxQcmVTdGVwSXRlbXMsIG5ld1Jlc3BvbnNlLCBwcm9jZXNzZWRSZXNwb25zZSwgcnVubmVyLCBzdGF0ZSkge1xuICAgIGNvbnN0IHByZVN0ZXBJdGVtcyA9IG9yaWdpbmFsUHJlU3RlcEl0ZW1zO1xuICAgIGxldCBuZXdJdGVtcyA9IHByb2Nlc3NlZFJlc3BvbnNlLm5ld0l0ZW1zO1xuICAgIGNvbnN0IFtmdW5jdGlvblJlc3VsdHMsIGNvbXB1dGVyUmVzdWx0c10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgIGV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyhhZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2UuZnVuY3Rpb25zLCBydW5uZXIsIHN0YXRlKSxcbiAgICAgICAgZXhlY3V0ZUNvbXB1dGVyQWN0aW9ucyhhZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2UuY29tcHV0ZXJBY3Rpb25zLCBydW5uZXIsIHN0YXRlLl9jb250ZXh0KSxcbiAgICBdKTtcbiAgICBuZXdJdGVtcyA9IG5ld0l0ZW1zLmNvbmNhdChmdW5jdGlvblJlc3VsdHMubWFwKChyKSA9PiByLnJ1bkl0ZW0pKTtcbiAgICBuZXdJdGVtcyA9IG5ld0l0ZW1zLmNvbmNhdChjb21wdXRlclJlc3VsdHMpO1xuICAgIC8vIHJ1biBob3N0ZWQgTUNQIGFwcHJvdmFsIHJlcXVlc3RzXG4gICAgaWYgKHByb2Nlc3NlZFJlc3BvbnNlLm1jcEFwcHJvdmFsUmVxdWVzdHMubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGNvbnN0IGFwcHJvdmFsUmVxdWVzdCBvZiBwcm9jZXNzZWRSZXNwb25zZS5tY3BBcHByb3ZhbFJlcXVlc3RzKSB7XG4gICAgICAgICAgICBjb25zdCB0b29sRGF0YSA9IGFwcHJvdmFsUmVxdWVzdC5tY3BUb29sXG4gICAgICAgICAgICAgICAgLnByb3ZpZGVyRGF0YTtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3REYXRhID0gYXBwcm92YWxSZXF1ZXN0LnJlcXVlc3RJdGVtLnJhd0l0ZW1cbiAgICAgICAgICAgICAgICAucHJvdmlkZXJEYXRhO1xuICAgICAgICAgICAgaWYgKHRvb2xEYXRhLm9uX2FwcHJvdmFsKSB7XG4gICAgICAgICAgICAgICAgLy8gc3luY2hyb25vdXNseSBoYW5kbGUgdGhlIGFwcHJvdmFsIHByb2Nlc3MgaGVyZVxuICAgICAgICAgICAgICAgIGNvbnN0IGFwcHJvdmFsUmVzdWx0ID0gYXdhaXQgdG9vbERhdGEub25fYXBwcm92YWwoc3RhdGUuX2NvbnRleHQsIGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYXBwcm92YWxSZXNwb25zZURhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmU6IGFwcHJvdmFsUmVzdWx0LmFwcHJvdmUsXG4gICAgICAgICAgICAgICAgICAgIGFwcHJvdmFsX3JlcXVlc3RfaWQ6IHJlcXVlc3REYXRhLmlkLFxuICAgICAgICAgICAgICAgICAgICByZWFzb246IGFwcHJvdmFsUmVzdWx0LnJlYXNvbixcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIG5ld0l0ZW1zLnB1c2gobmV3IFJ1blRvb2xDYWxsSXRlbSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfdG9vbF9jYWxsJyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ21jcF9hcHByb3ZhbF9yZXNwb25zZScsXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogYXBwcm92YWxSZXNwb25zZURhdGEsXG4gICAgICAgICAgICAgICAgfSwgYWdlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHJlY2VpdmUgYSB1c2VyJ3MgYXBwcm92YWwgb24gdGhlIG5leHQgdHVyblxuICAgICAgICAgICAgICAgIG5ld0l0ZW1zLnB1c2goYXBwcm92YWxSZXF1ZXN0LnJlcXVlc3RJdGVtKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhcHByb3ZhbEl0ZW0gPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdob3N0ZWRfbWNwX3Rvb2xfYXBwcm92YWwnLFxuICAgICAgICAgICAgICAgICAgICB0b29sOiBhcHByb3ZhbFJlcXVlc3QubWNwVG9vbCxcbiAgICAgICAgICAgICAgICAgICAgcnVuSXRlbTogbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2hvc3RlZF90b29sX2NhbGwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcmVxdWVzdERhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiByZXF1ZXN0RGF0YS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50czogcmVxdWVzdERhdGEuYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiByZXF1ZXN0RGF0YSxcbiAgICAgICAgICAgICAgICAgICAgfSwgYWdlbnQpLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZnVuY3Rpb25SZXN1bHRzLnB1c2goYXBwcm92YWxJdGVtKTtcbiAgICAgICAgICAgICAgICAvLyBuZXdJdGVtcy5wdXNoKGFwcHJvdmFsSXRlbS5ydW5JdGVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBwcm9jZXNzIGhhbmRvZmZzXG4gICAgaWYgKHByb2Nlc3NlZFJlc3BvbnNlLmhhbmRvZmZzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGV4ZWN1dGVIYW5kb2ZmQ2FsbHMoYWdlbnQsIG9yaWdpbmFsSW5wdXQsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIG5ld1Jlc3BvbnNlLCBwcm9jZXNzZWRSZXNwb25zZS5oYW5kb2ZmcywgcnVubmVyLCBzdGF0ZS5fY29udGV4dCk7XG4gICAgfVxuICAgIGNvbnN0IGNoZWNrVG9vbE91dHB1dCA9IGF3YWl0IGNoZWNrRm9yRmluYWxPdXRwdXRGcm9tVG9vbHMoYWdlbnQsIGZ1bmN0aW9uUmVzdWx0cywgc3RhdGUpO1xuICAgIGlmIChjaGVja1Rvb2xPdXRwdXQuaXNGaW5hbE91dHB1dCkge1xuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfZW5kJywgc3RhdGUuX2NvbnRleHQsIGFnZW50LCBjaGVja1Rvb2xPdXRwdXQuZmluYWxPdXRwdXQpO1xuICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgY2hlY2tUb29sT3V0cHV0LmZpbmFsT3V0cHV0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7XG4gICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcsXG4gICAgICAgICAgICBvdXRwdXQ6IGNoZWNrVG9vbE91dHB1dC5maW5hbE91dHB1dCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNoZWNrVG9vbE91dHB1dC5pc0ludGVycnVwdGVkKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdJdGVtcywge1xuICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGludGVycnVwdGlvbnM6IGNoZWNrVG9vbE91dHB1dC5pbnRlcnJ1cHRpb25zLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGNoZWNrIGlmIHRoZSBhZ2VudCBwcm9kdWNlZCBhbnkgbWVzc2FnZXNcbiAgICBjb25zdCBtZXNzYWdlSXRlbXMgPSBuZXdJdGVtcy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0gaW5zdGFuY2VvZiBSdW5NZXNzYWdlT3V0cHV0SXRlbSk7XG4gICAgLy8gd2Ugd2lsbCB1c2UgdGhlIGxhc3QgY29udGVudCBvdXRwdXQgYXMgdGhlIGZpbmFsIG91dHB1dFxuICAgIGNvbnN0IHBvdGVudGlhbEZpbmFsT3V0cHV0ID0gbWVzc2FnZUl0ZW1zLmxlbmd0aCA+IDBcbiAgICAgICAgPyBnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlKG1lc3NhZ2VJdGVtc1ttZXNzYWdlSXRlbXMubGVuZ3RoIC0gMV0ucmF3SXRlbSlcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgLy8gaWYgdGhlcmUgaXMgbm8gb3V0cHV0IHdlIGp1c3QgcnVuIGFnYWluXG4gICAgaWYgKCFwb3RlbnRpYWxGaW5hbE91dHB1dCkge1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nIH0pO1xuICAgIH1cbiAgICBpZiAoYWdlbnQub3V0cHV0VHlwZSA9PT0gJ3RleHQnICYmXG4gICAgICAgICFwcm9jZXNzZWRSZXNwb25zZS5oYXNUb29sc09yQXBwcm92YWxzVG9SdW4oKSkge1xuICAgICAgICByZXR1cm4gbmV3IFNpbmdsZVN0ZXBSZXN1bHQob3JpZ2luYWxJbnB1dCwgbmV3UmVzcG9uc2UsIHByZVN0ZXBJdGVtcywgbmV3SXRlbXMsIHtcbiAgICAgICAgICAgIHR5cGU6ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0JyxcbiAgICAgICAgICAgIG91dHB1dDogcG90ZW50aWFsRmluYWxPdXRwdXQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChhZ2VudC5vdXRwdXRUeXBlICE9PSAndGV4dCcgJiYgcG90ZW50aWFsRmluYWxPdXRwdXQpIHtcbiAgICAgICAgLy8gU3RydWN0dXJlZCBvdXRwdXQgc2NoZW1hID0+IGFsd2F5cyBsZWFkcyB0byBhIGZpbmFsIG91dHB1dCBpZiB3ZSBoYXZlIHRleHRcbiAgICAgICAgY29uc3QgeyBwYXJzZXIgfSA9IGdldFNjaGVtYUFuZFBhcnNlckZyb21JbnB1dFR5cGUoYWdlbnQub3V0cHV0VHlwZSwgJ2ZpbmFsX291dHB1dCcpO1xuICAgICAgICBjb25zdCBbZXJyb3JdID0gYXdhaXQgc2FmZUV4ZWN1dGUoKCkgPT4gcGFyc2VyKHBvdGVudGlhbEZpbmFsT3V0cHV0KSk7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgYWRkRXJyb3JUb0N1cnJlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBvdXRwdXQgdHlwZScsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcjogU3RyaW5nKGVycm9yKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKCdJbnZhbGlkIG91dHB1dCB0eXBlJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0Jywgb3V0cHV0OiBwb3RlbnRpYWxGaW5hbE91dHB1dCB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld0l0ZW1zLCB7IHR5cGU6ICduZXh0X3N0ZXBfcnVuX2FnYWluJyB9KTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb29sQ2FsbE91dHB1dEl0ZW0odG9vbENhbGwsIG91dHB1dCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsX3Jlc3VsdCcsXG4gICAgICAgIG5hbWU6IHRvb2xDYWxsLm5hbWUsXG4gICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxuICAgICAgICBvdXRwdXQ6IHtcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIHRleHQ6IHRvU21hcnRTdHJpbmcob3V0cHV0KSxcbiAgICAgICAgfSxcbiAgICB9O1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVGdW5jdGlvblRvb2xDYWxscyhhZ2VudCwgdG9vbFJ1bnMsIHJ1bm5lciwgc3RhdGUpIHtcbiAgICBhc3luYyBmdW5jdGlvbiBydW5TaW5nbGVUb29sKHRvb2xSdW4pIHtcbiAgICAgICAgbGV0IHBhcnNlZEFyZ3MgPSB0b29sUnVuLnRvb2xDYWxsLmFyZ3VtZW50cztcbiAgICAgICAgaWYgKHRvb2xSdW4udG9vbC5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICBpZiAoaXNab2RPYmplY3QodG9vbFJ1bi50b29sLnBhcmFtZXRlcnMpKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IHRvb2xSdW4udG9vbC5wYXJhbWV0ZXJzLnBhcnNlKHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IEpTT04ucGFyc2UocGFyc2VkQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmVlZHNBcHByb3ZhbCA9IGF3YWl0IHRvb2xSdW4udG9vbC5uZWVkc0FwcHJvdmFsKHN0YXRlLl9jb250ZXh0LCBwYXJzZWRBcmdzLCB0b29sUnVuLnRvb2xDYWxsLmNhbGxJZCk7XG4gICAgICAgIGlmIChuZWVkc0FwcHJvdmFsKSB7XG4gICAgICAgICAgICBjb25zdCBhcHByb3ZhbCA9IHN0YXRlLl9jb250ZXh0LmlzVG9vbEFwcHJvdmVkKHtcbiAgICAgICAgICAgICAgICB0b29sTmFtZTogdG9vbFJ1bi50b29sLm5hbWUsXG4gICAgICAgICAgICAgICAgY2FsbElkOiB0b29sUnVuLnRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGFwcHJvdmFsID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIC8vIHJlamVjdGVkXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpdGhGdW5jdGlvblNwYW4oYXN5bmMgKHNwYW4pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSAnVG9vbCBleGVjdXRpb24gd2FzIG5vdCBhcHByb3ZlZC4nO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xfbmFtZTogdG9vbFJ1bi50b29sLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBUb29sIGV4ZWN1dGlvbiBmb3IgJHt0b29sUnVuLnRvb2xDYWxsLmNhbGxJZH0gd2FzIG1hbnVhbGx5IHJlamVjdGVkIGJ5IHVzZXIuYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNwYW5EYXRhLm91dHB1dCA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX291dHB1dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sOiB0b29sUnVuLnRvb2wsXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcnVuSXRlbTogbmV3IFJ1blRvb2xDYWxsT3V0cHV0SXRlbShnZXRUb29sQ2FsbE91dHB1dEl0ZW0odG9vbFJ1bi50b29sQ2FsbCwgcmVzcG9uc2UpLCBhZ2VudCwgcmVzcG9uc2UpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdG9vbFJ1bi50b29sLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXBwcm92YWwgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGFwcHJvdmFsIHByb2Nlc3MgbmVlZHMgdG8gYmUgZG9uZSBpbiB0aGUgbmV4dCB0dXJuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2FwcHJvdmFsJyxcbiAgICAgICAgICAgICAgICAgICAgdG9vbDogdG9vbFJ1bi50b29sLFxuICAgICAgICAgICAgICAgICAgICBydW5JdGVtOiBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh0b29sUnVuLnRvb2xDYWxsLCBhZ2VudCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2l0aEZ1bmN0aW9uU3Bhbihhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgaWYgKHJ1bm5lci5jb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSkge1xuICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEuaW5wdXQgPSB0b29sUnVuLnRvb2xDYWxsLmFyZ3VtZW50cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBzdGF0ZS5fY29udGV4dCwgYWdlbnQsIHRvb2xSdW4udG9vbCk7XG4gICAgICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHN0YXRlLl9jb250ZXh0LCB0b29sUnVuLnRvb2wpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvb2xSdW4udG9vbC5pbnZva2Uoc3RhdGUuX2NvbnRleHQsIHRvb2xSdW4udG9vbENhbGwuYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAvLyBVc2Ugc3RyaW5nIGRhdGEgZm9yIHRyYWNpbmcgYW5kIGV2ZW50IGVtaXR0ZXJcbiAgICAgICAgICAgICAgICBjb25zdCBzdHJpbmdSZXN1bHQgPSB0b1NtYXJ0U3RyaW5nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgc3RhdGUuX2NvbnRleHQsIGFnZW50LCB0b29sUnVuLnRvb2wsIHN0cmluZ1Jlc3VsdCk7XG4gICAgICAgICAgICAgICAgYWdlbnQuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgdG9vbFJ1bi50b29sLCBzdHJpbmdSZXN1bHQpO1xuICAgICAgICAgICAgICAgIGlmIChydW5uZXIuY29uZmlnLnRyYWNlSW5jbHVkZVNlbnNpdGl2ZURhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zcGFuRGF0YS5vdXRwdXQgPSBzdHJpbmdSZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9vdXRwdXQnLFxuICAgICAgICAgICAgICAgICAgICB0b29sOiB0b29sUnVuLnRvb2wsXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogcmVzdWx0LFxuICAgICAgICAgICAgICAgICAgICBydW5JdGVtOiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbSh0b29sUnVuLnRvb2xDYWxsLCByZXN1bHQpLCBhZ2VudCwgcmVzdWx0KSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBydW5uaW5nIHRvb2wnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sX25hbWU6IHRvb2xSdW4udG9vbC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IFN0cmluZyhlcnJvciksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0b29sUnVuLnRvb2wubmFtZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwodG9vbFJ1bnMubWFwKHJ1blNpbmdsZVRvb2wpKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBUb29sQ2FsbEVycm9yKGBGYWlsZWQgdG8gcnVuIGZ1bmN0aW9uIHRvb2xzOiAke2V9YCwgZSwgc3RhdGUpO1xuICAgIH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbi8vIEludGVybmFsIGhlbHBlcjogZGlzcGF0Y2ggYSBjb21wdXRlciBhY3Rpb24gYW5kIHJldHVybiBhIHNjcmVlbnNob3QgKHN5bmMvYXN5bmMpXG5hc3luYyBmdW5jdGlvbiBfcnVuQ29tcHV0ZXJBY3Rpb25BbmRTY3JlZW5zaG90KGNvbXB1dGVyLCB0b29sQ2FsbCkge1xuICAgIGNvbnN0IGFjdGlvbiA9IHRvb2xDYWxsLmFjdGlvbjtcbiAgICBsZXQgc2NyZWVuc2hvdDtcbiAgICAvLyBEaXNwYXRjaCBiYXNlZCBvbiBhY3Rpb24gdHlwZSBzdHJpbmcgKGFzc3VtZSBhY3Rpb24udHlwZSBleGlzdHMpXG4gICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgICAgICBjYXNlICdjbGljayc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5jbGljayhhY3Rpb24ueCwgYWN0aW9uLnksIGFjdGlvbi5idXR0b24pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RvdWJsZV9jbGljayc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5kb3VibGVDbGljayhhY3Rpb24ueCwgYWN0aW9uLnkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2RyYWcnOlxuICAgICAgICAgICAgYXdhaXQgY29tcHV0ZXIuZHJhZyhhY3Rpb24ucGF0aC5tYXAoKHApID0+IFtwLngsIHAueV0pKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdrZXlwcmVzcyc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5rZXlwcmVzcyhhY3Rpb24ua2V5cyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbW92ZSc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5tb3ZlKGFjdGlvbi54LCBhY3Rpb24ueSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnc2NyZWVuc2hvdCc6XG4gICAgICAgICAgICBzY3JlZW5zaG90ID0gYXdhaXQgY29tcHV0ZXIuc2NyZWVuc2hvdCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3Njcm9sbCc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci5zY3JvbGwoYWN0aW9uLngsIGFjdGlvbi55LCBhY3Rpb24uc2Nyb2xsX3gsIGFjdGlvbi5zY3JvbGxfeSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndHlwZSc6XG4gICAgICAgICAgICBhd2FpdCBjb21wdXRlci50eXBlKGFjdGlvbi50ZXh0KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd3YWl0JzpcbiAgICAgICAgICAgIGF3YWl0IGNvbXB1dGVyLndhaXQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYWN0aW9uOyAvLyBlbnN1cmVzIHRoYXQgd2UgaGFuZGxlIGV2ZXJ5IGFjdGlvbiB3ZSBrbm93IG9mXG4gICAgICAgICAgICAvLyBVbmtub3duIGFjdGlvbiwganVzdCB0YWtlIHNjcmVlbnNob3RcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNjcmVlbnNob3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBzY3JlZW5zaG90O1xuICAgIH1cbiAgICAvLyBBbHdheXMgcmV0dXJuIHNjcmVlbnNob3QgYXMgYmFzZTY0IHN0cmluZ1xuICAgIGlmICh0eXBlb2YgY29tcHV0ZXIuc2NyZWVuc2hvdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBzY3JlZW5zaG90ID0gYXdhaXQgY29tcHV0ZXIuc2NyZWVuc2hvdCgpO1xuICAgICAgICBpZiAodHlwZW9mIHNjcmVlbnNob3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gc2NyZWVuc2hvdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbXB1dGVyIGRvZXMgbm90IGltcGxlbWVudCBzY3JlZW5zaG90KCknKTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjdXRlQ29tcHV0ZXJBY3Rpb25zKGFnZW50LCBhY3Rpb25zLCBydW5uZXIsIHJ1bkNvbnRleHQsIGN1c3RvbUxvZ2dlciA9IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IF9sb2dnZXIgPSBjdXN0b21Mb2dnZXIgPz8gbG9nZ2VyO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGFjdGlvbiBvZiBhY3Rpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbXB1dGVyID0gYWN0aW9uLmNvbXB1dGVyLmNvbXB1dGVyO1xuICAgICAgICBjb25zdCB0b29sQ2FsbCA9IGFjdGlvbi50b29sQ2FsbDtcbiAgICAgICAgLy8gSG9va3M6IG9uX3Rvb2xfc3RhcnQgKGdsb2JhbCArIGFnZW50KVxuICAgICAgICBydW5uZXIuZW1pdCgnYWdlbnRfdG9vbF9zdGFydCcsIHJ1bkNvbnRleHQsIGFnZW50LCBhY3Rpb24uY29tcHV0ZXIpO1xuICAgICAgICBpZiAodHlwZW9mIGFnZW50LmVtaXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCBydW5Db250ZXh0LCBhY3Rpb24uY29tcHV0ZXIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJ1biB0aGUgYWN0aW9uIGFuZCBnZXQgc2NyZWVuc2hvdFxuICAgICAgICBsZXQgb3V0cHV0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgb3V0cHV0ID0gYXdhaXQgX3J1bkNvbXB1dGVyQWN0aW9uQW5kU2NyZWVuc2hvdChjb21wdXRlciwgdG9vbENhbGwpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIF9sb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBleGVjdXRlIGNvbXB1dGVyIGFjdGlvbjonLCBlcnIpO1xuICAgICAgICAgICAgb3V0cHV0ID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSG9va3M6IG9uX3Rvb2xfZW5kIChnbG9iYWwgKyBhZ2VudClcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgcnVuQ29udGV4dCwgYWdlbnQsIGFjdGlvbi5jb21wdXRlciwgb3V0cHV0KTtcbiAgICAgICAgaWYgKHR5cGVvZiBhZ2VudC5lbWl0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHJ1bkNvbnRleHQsIGFjdGlvbi5jb21wdXRlciwgb3V0cHV0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBbHdheXMgcmV0dXJuIGEgc2NyZWVuc2hvdCBhcyBhIGJhc2U2NCBkYXRhIFVSTFxuICAgICAgICBjb25zdCBpbWFnZVVybCA9IG91dHB1dCA/IGBkYXRhOmltYWdlL3BuZztiYXNlNjQsJHtvdXRwdXR9YCA6ICcnO1xuICAgICAgICBjb25zdCByYXdJdGVtID0ge1xuICAgICAgICAgICAgdHlwZTogJ2NvbXB1dGVyX2NhbGxfcmVzdWx0JyxcbiAgICAgICAgICAgIGNhbGxJZDogdG9vbENhbGwuY2FsbElkLFxuICAgICAgICAgICAgb3V0cHV0OiB7IHR5cGU6ICdjb21wdXRlcl9zY3JlZW5zaG90JywgZGF0YTogaW1hZ2VVcmwgfSxcbiAgICAgICAgfTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0ocmF3SXRlbSwgYWdlbnQsIGltYWdlVXJsKSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWN1dGVIYW5kb2ZmQ2FsbHMoYWdlbnQsIG9yaWdpbmFsSW5wdXQsIHByZVN0ZXBJdGVtcywgbmV3U3RlcEl0ZW1zLCBuZXdSZXNwb25zZSwgcnVuSGFuZG9mZnMsIHJ1bm5lciwgcnVuQ29udGV4dCkge1xuICAgIG5ld1N0ZXBJdGVtcyA9IFsuLi5uZXdTdGVwSXRlbXNdO1xuICAgIGlmIChydW5IYW5kb2Zmcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oJ0luY29ycmVjdGx5IGNhbGxlZCBleGVjdXRlSGFuZG9mZkNhbGxzIHdpdGggbm8gaGFuZG9mZnMuIFRoaXMgc2hvdWxkIG5vdCBoYXBwZW4uIE1vdmluZyBvbi4nKTtcbiAgICAgICAgcmV0dXJuIG5ldyBTaW5nbGVTdGVwUmVzdWx0KG9yaWdpbmFsSW5wdXQsIG5ld1Jlc3BvbnNlLCBwcmVTdGVwSXRlbXMsIG5ld1N0ZXBJdGVtcywgeyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfSk7XG4gICAgfVxuICAgIGlmIChydW5IYW5kb2Zmcy5sZW5ndGggPiAxKSB7XG4gICAgICAgIC8vIG11bHRpcGxlIGhhbmRvZmZzLiBJZ25vcmluZyBhbGwgYnV0IHRoZSBmaXJzdCBvbmUgYnkgYWRkaW5nIHJlamVjdCByZXNwb25zZXMgZm9yIHRob3NlXG4gICAgICAgIGNvbnN0IG91dHB1dE1lc3NhZ2UgPSAnTXVsdGlwbGUgaGFuZG9mZnMgZGV0ZWN0ZWQsIGlnbm9ybmluZyB0aGlzIG9uZS4nO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHJ1bkhhbmRvZmZzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBuZXdTdGVwSXRlbXMucHVzaChuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKGdldFRvb2xDYWxsT3V0cHV0SXRlbShydW5IYW5kb2Zmc1tpXS50b29sQ2FsbCwgb3V0cHV0TWVzc2FnZSksIGFnZW50LCBvdXRwdXRNZXNzYWdlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWN0dWFsSGFuZG9mZiA9IHJ1bkhhbmRvZmZzWzBdO1xuICAgIHJldHVybiB3aXRoSGFuZG9mZlNwYW4oYXN5bmMgKGhhbmRvZmZTcGFuKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRvZmYgPSBhY3R1YWxIYW5kb2ZmLmhhbmRvZmY7XG4gICAgICAgIGNvbnN0IG5ld0FnZW50ID0gYXdhaXQgaGFuZG9mZi5vbkludm9rZUhhbmRvZmYocnVuQ29udGV4dCwgYWN0dWFsSGFuZG9mZi50b29sQ2FsbC5hcmd1bWVudHMpO1xuICAgICAgICBoYW5kb2ZmU3Bhbi5zcGFuRGF0YS50b19hZ2VudCA9IG5ld0FnZW50Lm5hbWU7XG4gICAgICAgIGlmIChydW5IYW5kb2Zmcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ZWRBZ2VudHMgPSBydW5IYW5kb2Zmcy5tYXAoKGgpID0+IGguaGFuZG9mZi5hZ2VudE5hbWUpO1xuICAgICAgICAgICAgaGFuZG9mZlNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNdWx0aXBsZSBoYW5kb2ZmcyByZXF1ZXN0ZWQnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdGVkX2FnZW50czogcmVxdWVzdGVkQWdlbnRzLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBuZXdTdGVwSXRlbXMucHVzaChuZXcgUnVuSGFuZG9mZk91dHB1dEl0ZW0oZ2V0VG9vbENhbGxPdXRwdXRJdGVtKGFjdHVhbEhhbmRvZmYudG9vbENhbGwsIGdldFRyYW5zZmVyTWVzc2FnZShuZXdBZ2VudCkpLCBhZ2VudCwgbmV3QWdlbnQpKTtcbiAgICAgICAgcnVubmVyLmVtaXQoJ2FnZW50X2hhbmRvZmYnLCBydW5Db250ZXh0LCBhZ2VudCwgbmV3QWdlbnQpO1xuICAgICAgICBhZ2VudC5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgcnVuQ29udGV4dCwgbmV3QWdlbnQpO1xuICAgICAgICBjb25zdCBpbnB1dEZpbHRlciA9IGhhbmRvZmYuaW5wdXRGaWx0ZXIgPz8gcnVubmVyLmNvbmZpZy5oYW5kb2ZmSW5wdXRGaWx0ZXI7XG4gICAgICAgIGlmIChpbnB1dEZpbHRlcikge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdGaWx0ZXJpbmcgaW5wdXRzIGZvciBoYW5kb2ZmJyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGlucHV0RmlsdGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgaGFuZG9mZlNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBpbnB1dCBmaWx0ZXInLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiAnbm90IGNhbGxhYmxlJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhhbmRvZmZJbnB1dERhdGEgPSB7XG4gICAgICAgICAgICAgICAgaW5wdXRIaXN0b3J5OiBBcnJheS5pc0FycmF5KG9yaWdpbmFsSW5wdXQpXG4gICAgICAgICAgICAgICAgICAgID8gWy4uLm9yaWdpbmFsSW5wdXRdXG4gICAgICAgICAgICAgICAgICAgIDogb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgICAgICBwcmVIYW5kb2ZmSXRlbXM6IFsuLi5wcmVTdGVwSXRlbXNdLFxuICAgICAgICAgICAgICAgIG5ld0l0ZW1zOiBbLi4ubmV3U3RlcEl0ZW1zXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IGlucHV0RmlsdGVyKGhhbmRvZmZJbnB1dERhdGEpO1xuICAgICAgICAgICAgb3JpZ2luYWxJbnB1dCA9IGZpbHRlcmVkLmlucHV0SGlzdG9yeTtcbiAgICAgICAgICAgIHByZVN0ZXBJdGVtcyA9IGZpbHRlcmVkLnByZUhhbmRvZmZJdGVtcztcbiAgICAgICAgICAgIG5ld1N0ZXBJdGVtcyA9IGZpbHRlcmVkLm5ld0l0ZW1zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgU2luZ2xlU3RlcFJlc3VsdChvcmlnaW5hbElucHV0LCBuZXdSZXNwb25zZSwgcHJlU3RlcEl0ZW1zLCBuZXdTdGVwSXRlbXMsIHsgdHlwZTogJ25leHRfc3RlcF9oYW5kb2ZmJywgbmV3QWdlbnQgfSk7XG4gICAgfSwge1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBmcm9tX2FnZW50OiBhZ2VudC5uYW1lLFxuICAgICAgICB9LFxuICAgIH0pO1xufVxuY29uc3QgTk9UX0ZJTkFMX09VVFBVVCA9IHtcbiAgICBpc0ZpbmFsT3V0cHV0OiBmYWxzZSxcbiAgICBpc0ludGVycnVwdGVkOiB1bmRlZmluZWQsXG59O1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRm9yRmluYWxPdXRwdXRGcm9tVG9vbHMoYWdlbnQsIHRvb2xSZXN1bHRzLCBzdGF0ZSkge1xuICAgIGlmICh0b29sUmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIE5PVF9GSU5BTF9PVVRQVVQ7XG4gICAgfVxuICAgIGNvbnN0IGludGVycnVwdGlvbnMgPSB0b29sUmVzdWx0c1xuICAgICAgICAuZmlsdGVyKChyKSA9PiByLnJ1bkl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtKVxuICAgICAgICAubWFwKChyKSA9PiByLnJ1bkl0ZW0pO1xuICAgIGlmIChpbnRlcnJ1cHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzRmluYWxPdXRwdXQ6IGZhbHNlLFxuICAgICAgICAgICAgaXNJbnRlcnJ1cHRlZDogdHJ1ZSxcbiAgICAgICAgICAgIGludGVycnVwdGlvbnMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChhZ2VudC50b29sVXNlQmVoYXZpb3IgPT09ICdydW5fbGxtX2FnYWluJykge1xuICAgICAgICByZXR1cm4gTk9UX0ZJTkFMX09VVFBVVDtcbiAgICB9XG4gICAgY29uc3QgZmlyc3RUb29sUmVzdWx0ID0gdG9vbFJlc3VsdHNbMF07XG4gICAgaWYgKGFnZW50LnRvb2xVc2VCZWhhdmlvciA9PT0gJ3N0b3Bfb25fZmlyc3RfdG9vbCcpIHtcbiAgICAgICAgaWYgKGZpcnN0VG9vbFJlc3VsdD8udHlwZSA9PT0gJ2Z1bmN0aW9uX291dHB1dCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ091dHB1dCA9IHRvU21hcnRTdHJpbmcoZmlyc3RUb29sUmVzdWx0Lm91dHB1dCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzRmluYWxPdXRwdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNJbnRlcnJ1cHRlZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0OiBzdHJpbmdPdXRwdXQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOT1RfRklOQUxfT1VUUFVUO1xuICAgIH1cbiAgICBjb25zdCB0b29sVXNlQmVoYXZpb3IgPSBhZ2VudC50b29sVXNlQmVoYXZpb3I7XG4gICAgaWYgKHR5cGVvZiB0b29sVXNlQmVoYXZpb3IgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNvbnN0IHN0b3BwaW5nVG9vbCA9IHRvb2xSZXN1bHRzLmZpbmQoKHIpID0+IHRvb2xVc2VCZWhhdmlvci5zdG9wQXRUb29sTmFtZXMuaW5jbHVkZXMoci50b29sLm5hbWUpKTtcbiAgICAgICAgaWYgKHN0b3BwaW5nVG9vbD8udHlwZSA9PT0gJ2Z1bmN0aW9uX291dHB1dCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ091dHB1dCA9IHRvU21hcnRTdHJpbmcoc3RvcHBpbmdUb29sLm91dHB1dCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzRmluYWxPdXRwdXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNJbnRlcnJ1cHRlZDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0OiBzdHJpbmdPdXRwdXQsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBOT1RfRklOQUxfT1VUUFVUO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRvb2xVc2VCZWhhdmlvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gdG9vbFVzZUJlaGF2aW9yKHN0YXRlLl9jb250ZXh0LCB0b29sUmVzdWx0cyk7XG4gICAgfVxuICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEludmFsaWQgdG9vbFVzZUJlaGF2aW9yOiAke3Rvb2xVc2VCZWhhdmlvcn1gLCBzdGF0ZSk7XG59XG5leHBvcnQgZnVuY3Rpb24gYWRkU3RlcFRvUnVuUmVzdWx0KHJlc3VsdCwgc3RlcCkge1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiBzdGVwLm5ld1N0ZXBJdGVtcykge1xuICAgICAgICBsZXQgaXRlbU5hbWU7XG4gICAgICAgIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuTWVzc2FnZU91dHB1dEl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lID0gJ21lc3NhZ2Vfb3V0cHV0X2NyZWF0ZWQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5IYW5kb2ZmQ2FsbEl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lID0gJ2hhbmRvZmZfcmVxdWVzdGVkJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuSGFuZG9mZk91dHB1dEl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lID0gJ2hhbmRvZmZfb2NjdXJyZWQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQ2FsbEl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lID0gJ3Rvb2xfY2FsbGVkJztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpdGVtIGluc3RhbmNlb2YgUnVuVG9vbENhbGxPdXRwdXRJdGVtKSB7XG4gICAgICAgICAgICBpdGVtTmFtZSA9ICd0b29sX291dHB1dCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXRlbSBpbnN0YW5jZW9mIFJ1blJlYXNvbmluZ0l0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lID0gJ3JlYXNvbmluZ19pdGVtX2NyZWF0ZWQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGl0ZW0gaW5zdGFuY2VvZiBSdW5Ub29sQXBwcm92YWxJdGVtKSB7XG4gICAgICAgICAgICBpdGVtTmFtZSA9ICd0b29sX2FwcHJvdmFsX3JlcXVlc3RlZCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsb2dnZXIud2FybignVW5rbm93biBpdGVtIHR5cGU6ICcsIGl0ZW0pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0Ll9hZGRJdGVtKG5ldyBSdW5JdGVtU3RyZWFtRXZlbnQoaXRlbU5hbWUsIGl0ZW0pKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQWdlbnRUb29sVXNlVHJhY2tlciB7XG4gICAgI2FnZW50VG9Ub29scyA9IG5ldyBNYXAoKTtcbiAgICBhZGRUb29sVXNlKGFnZW50LCB0b29sTmFtZXMpIHtcbiAgICAgICAgdGhpcy4jYWdlbnRUb1Rvb2xzLnNldChhZ2VudCwgdG9vbE5hbWVzKTtcbiAgICB9XG4gICAgaGFzVXNlZFRvb2xzKGFnZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNhZ2VudFRvVG9vbHMuaGFzKGFnZW50KTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKEFycmF5LmZyb20odGhpcy4jYWdlbnRUb1Rvb2xzLmVudHJpZXMoKSkubWFwKChbYWdlbnQsIHRvb2xOYW1lc10pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBbYWdlbnQubmFtZSwgdG9vbE5hbWVzXTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ1bkltcGxlbWVudGF0aW9uLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnQG9wZW5haS96b2QvdjMnO1xuaW1wb3J0IHsgQWdlbnQgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmltcG9ydCB7IFJ1bk1lc3NhZ2VPdXRwdXRJdGVtLCBSdW5Ub29sQXBwcm92YWxJdGVtLCBSdW5Ub29sQ2FsbEl0ZW0sIFJ1blRvb2xDYWxsT3V0cHV0SXRlbSwgUnVuUmVhc29uaW5nSXRlbSwgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5IYW5kb2ZmT3V0cHV0SXRlbSwgfSBmcm9tIFwiLi9pdGVtcy5tanNcIjtcbmltcG9ydCB7IFJ1bkNvbnRleHQgfSBmcm9tIFwiLi9ydW5Db250ZXh0Lm1qc1wiO1xuaW1wb3J0IHsgQWdlbnRUb29sVXNlVHJhY2tlciwgbmV4dFN0ZXBTY2hlbWEsIH0gZnJvbSBcIi4vcnVuSW1wbGVtZW50YXRpb24ubWpzXCI7XG5pbXBvcnQgeyBTeXN0ZW1FcnJvciwgVXNlckVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3RyYWNpbmcvcHJvdmlkZXIubWpzXCI7XG5pbXBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuaW1wb3J0IHsgZ2V0Q3VycmVudFRyYWNlIH0gZnJvbSBcIi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgaGFuZG9mZiB9IGZyb20gXCIuL2hhbmRvZmYubWpzXCI7XG5pbXBvcnQgKiBhcyBwcm90b2NvbCBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbmltcG9ydCB7IHNhZmVFeGVjdXRlIH0gZnJvbSBcIi4vdXRpbHMvc2FmZUV4ZWN1dGUubWpzXCI7XG4vKipcbiAqIFRoZSBzY2hlbWEgdmVyc2lvbiBvZiB0aGUgc2VyaWFsaXplZCBydW4gc3RhdGUuIFRoaXMgaXMgdXNlZCB0byBlbnN1cmUgdGhhdCB0aGUgc2VyaWFsaXplZFxuICogcnVuIHN0YXRlIGlzIGNvbXBhdGlibGUgd2l0aCB0aGUgY3VycmVudCB2ZXJzaW9uIG9mIHRoZSBTREsuXG4gKiBJZiBhbnl0aGluZyBpbiB0aGlzIHNjaGVtYSBjaGFuZ2VzLCB0aGUgdmVyc2lvbiB3aWxsIGhhdmUgdG8gYmUgaW5jcmVtZW50ZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBDVVJSRU5UX1NDSEVNQV9WRVJTSU9OID0gJzEuMCc7XG5jb25zdCAkc2NoZW1hVmVyc2lvbiA9IHoubGl0ZXJhbChDVVJSRU5UX1NDSEVNQV9WRVJTSU9OKTtcbmNvbnN0IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBuYW1lOiB6LnN0cmluZygpLFxufSk7XG5jb25zdCBzZXJpYWxpemVkU3BhbkJhc2UgPSB6Lm9iamVjdCh7XG4gICAgb2JqZWN0OiB6LmxpdGVyYWwoJ3RyYWNlLnNwYW4nKSxcbiAgICBpZDogei5zdHJpbmcoKSxcbiAgICB0cmFjZV9pZDogei5zdHJpbmcoKSxcbiAgICBwYXJlbnRfaWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBzdGFydGVkX2F0OiB6LnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgZW5kZWRfYXQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBlcnJvcjogelxuICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgbWVzc2FnZTogei5zdHJpbmcoKSxcbiAgICAgICAgZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKSxcbiAgICB9KVxuICAgICAgICAubnVsbGFibGUoKSxcbiAgICBzcGFuX2RhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxufSk7XG5jb25zdCBTZXJpYWxpemVkU3BhbiA9IHNlcmlhbGl6ZWRTcGFuQmFzZS5leHRlbmQoe1xuICAgIHByZXZpb3VzX3NwYW46IHoubGF6eSgoKSA9PiBTZXJpYWxpemVkU3Bhbikub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgdXNhZ2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgcmVxdWVzdHM6IHoubnVtYmVyKCksXG4gICAgaW5wdXRUb2tlbnM6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0VG9rZW5zOiB6Lm51bWJlcigpLFxuICAgIHRvdGFsVG9rZW5zOiB6Lm51bWJlcigpLFxufSk7XG5jb25zdCBtb2RlbFJlc3BvbnNlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHVzYWdlOiB1c2FnZVNjaGVtYSxcbiAgICBvdXRwdXQ6IHouYXJyYXkocHJvdG9jb2wuT3V0cHV0TW9kZWxJdGVtKSxcbiAgICByZXNwb25zZUlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmNvbnN0IGl0ZW1TY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigndHlwZScsIFtcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZV9vdXRwdXRfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5Bc3Npc3RhbnRNZXNzYWdlSXRlbSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgndG9vbF9jYWxsX2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuVG9vbENhbGxJdGVtLm9yKHByb3RvY29sLkhvc3RlZFRvb2xDYWxsSXRlbSksXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3Rvb2xfY2FsbF9vdXRwdXRfaXRlbScpLFxuICAgICAgICByYXdJdGVtOiBwcm90b2NvbC5GdW5jdGlvbkNhbGxSZXN1bHRJdGVtLFxuICAgICAgICBhZ2VudDogc2VyaWFsaXplZEFnZW50U2NoZW1hLFxuICAgICAgICBvdXRwdXQ6IHouc3RyaW5nKCksXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ3JlYXNvbmluZ19pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLlJlYXNvbmluZ0l0ZW0sXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2hhbmRvZmZfY2FsbF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkZ1bmN0aW9uQ2FsbEl0ZW0sXG4gICAgICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgfSksXG4gICAgei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2hhbmRvZmZfb3V0cHV0X2l0ZW0nKSxcbiAgICAgICAgcmF3SXRlbTogcHJvdG9jb2wuRnVuY3Rpb25DYWxsUmVzdWx0SXRlbSxcbiAgICAgICAgc291cmNlQWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICAgICAgdGFyZ2V0QWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgndG9vbF9hcHByb3ZhbF9pdGVtJyksXG4gICAgICAgIHJhd0l0ZW06IHByb3RvY29sLkZ1bmN0aW9uQ2FsbEl0ZW0ub3IocHJvdG9jb2wuSG9zdGVkVG9vbENhbGxJdGVtKSxcbiAgICAgICAgYWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICB9KSxcbl0pO1xuY29uc3Qgc2VyaWFsaXplZFRyYWNlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIG9iamVjdDogei5saXRlcmFsKCd0cmFjZScpLFxuICAgIGlkOiB6LnN0cmluZygpLFxuICAgIHdvcmtmbG93X25hbWU6IHouc3RyaW5nKCksXG4gICAgZ3JvdXBfaWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBtZXRhZGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG59KTtcbmNvbnN0IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBuZXdJdGVtczogei5hcnJheShpdGVtU2NoZW1hKSxcbiAgICB0b29sc1VzZWQ6IHouYXJyYXkoei5zdHJpbmcoKSksXG4gICAgaGFuZG9mZnM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0b29sQ2FsbDogei5hbnkoKSxcbiAgICAgICAgaGFuZG9mZjogei5hbnkoKSxcbiAgICB9KSksXG4gICAgZnVuY3Rpb25zOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgdG9vbENhbGw6IHouYW55KCksXG4gICAgICAgIHRvb2w6IHouYW55KCksXG4gICAgfSkpLFxuICAgIGNvbXB1dGVyQWN0aW9uczogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIHRvb2xDYWxsOiB6LmFueSgpLFxuICAgICAgICBjb21wdXRlcjogei5hbnkoKSxcbiAgICB9KSksXG4gICAgbWNwQXBwcm92YWxSZXF1ZXN0czogelxuICAgICAgICAuYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICByZXF1ZXN0SXRlbTogei5vYmplY3Qoe1xuICAgICAgICAgICAgLy8gcHJvdG9jb2wuSG9zdGVkVG9vbENhbGxJdGVtXG4gICAgICAgICAgICByYXdJdGVtOiB6Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdob3N0ZWRfdG9vbF9jYWxsJyksXG4gICAgICAgICAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICBvdXRwdXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgICAgLy8gSG9zdGVkTUNQVG9vbFxuICAgICAgICBtY3BUb29sOiB6Lm9iamVjdCh7XG4gICAgICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2hvc3RlZF90b29sJyksXG4gICAgICAgICAgICBuYW1lOiB6LmxpdGVyYWwoJ2hvc3RlZF9tY3AnKSxcbiAgICAgICAgICAgIHByb3ZpZGVyRGF0YTogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSksXG4gICAgICAgIH0pLFxuICAgIH0pKVxuICAgICAgICAub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgZ3VhcmRyYWlsRnVuY3Rpb25PdXRwdXRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHJpcHdpcmVUcmlnZ2VyZWQ6IHouYm9vbGVhbigpLFxuICAgIG91dHB1dEluZm86IHouYW55KCksXG59KTtcbmNvbnN0IGlucHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGd1YXJkcmFpbDogei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0JyksXG4gICAgICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgfSksXG4gICAgb3V0cHV0OiBndWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSxcbn0pO1xuY29uc3Qgb3V0cHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGd1YXJkcmFpbDogei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dCcpLFxuICAgICAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIH0pLFxuICAgIGFnZW50T3V0cHV0OiB6LmFueSgpLFxuICAgIGFnZW50OiBzZXJpYWxpemVkQWdlbnRTY2hlbWEsXG4gICAgb3V0cHV0OiBndWFyZHJhaWxGdW5jdGlvbk91dHB1dFNjaGVtYSxcbn0pO1xuZXhwb3J0IGNvbnN0IFNlcmlhbGl6ZWRSdW5TdGF0ZSA9IHoub2JqZWN0KHtcbiAgICAkc2NoZW1hVmVyc2lvbixcbiAgICBjdXJyZW50VHVybjogei5udW1iZXIoKSxcbiAgICBjdXJyZW50QWdlbnQ6IHNlcmlhbGl6ZWRBZ2VudFNjaGVtYSxcbiAgICBvcmlnaW5hbElucHV0OiB6LnN0cmluZygpLm9yKHouYXJyYXkocHJvdG9jb2wuTW9kZWxJdGVtKSksXG4gICAgbW9kZWxSZXNwb25zZXM6IHouYXJyYXkobW9kZWxSZXNwb25zZVNjaGVtYSksXG4gICAgY29udGV4dDogei5vYmplY3Qoe1xuICAgICAgICB1c2FnZTogdXNhZ2VTY2hlbWEsXG4gICAgICAgIGFwcHJvdmFsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5vYmplY3Qoe1xuICAgICAgICAgICAgYXBwcm92ZWQ6IHouYXJyYXkoei5zdHJpbmcoKSkub3Ioei5ib29sZWFuKCkpLFxuICAgICAgICAgICAgcmVqZWN0ZWQ6IHouYXJyYXkoei5zdHJpbmcoKSkub3Ioei5ib29sZWFuKCkpLFxuICAgICAgICB9KSksXG4gICAgICAgIGNvbnRleHQ6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLFxuICAgIH0pLFxuICAgIHRvb2xVc2VUcmFja2VyOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFycmF5KHouc3RyaW5nKCkpKSxcbiAgICBtYXhUdXJuczogei5udW1iZXIoKSxcbiAgICBjdXJyZW50QWdlbnRTcGFuOiBTZXJpYWxpemVkU3Bhbi5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgbm9BY3RpdmVBZ2VudFJ1bjogei5ib29sZWFuKCksXG4gICAgaW5wdXRHdWFyZHJhaWxSZXN1bHRzOiB6LmFycmF5KGlucHV0R3VhcmRyYWlsUmVzdWx0U2NoZW1hKSxcbiAgICBvdXRwdXRHdWFyZHJhaWxSZXN1bHRzOiB6LmFycmF5KG91dHB1dEd1YXJkcmFpbFJlc3VsdFNjaGVtYSksXG4gICAgY3VycmVudFN0ZXA6IG5leHRTdGVwU2NoZW1hLm9wdGlvbmFsKCksXG4gICAgbGFzdE1vZGVsUmVzcG9uc2U6IG1vZGVsUmVzcG9uc2VTY2hlbWEub3B0aW9uYWwoKSxcbiAgICBnZW5lcmF0ZWRJdGVtczogei5hcnJheShpdGVtU2NoZW1hKSxcbiAgICBsYXN0UHJvY2Vzc2VkUmVzcG9uc2U6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZVNjaGVtYS5vcHRpb25hbCgpLFxuICAgIHRyYWNlOiBzZXJpYWxpemVkVHJhY2VTY2hlbWEubnVsbGFibGUoKSxcbn0pO1xuLyoqXG4gKiBTZXJpYWxpemFibGUgc25hcHNob3Qgb2YgYW4gYWdlbnQncyBydW4sIGluY2x1ZGluZyBjb250ZXh0LCB1c2FnZSBhbmQgdHJhY2UuXG4gKiBXaGlsZSB0aGlzIGNsYXNzIGhhcyBwdWJsaWNseSB3cml0YWJsZSBwcm9wZXJ0aWVzIChwcmVmaXhlZCB3aXRoIGBfYCksIHRoZXkgYXJlIG5vdCBtZWFudCB0byBiZVxuICogdXNlZCBkaXJlY3RseS4gVG8gcmVhZCB0aGVzZSBwcm9wZXJ0aWVzLCB1c2UgdGhlIGBSdW5SZXN1bHRgIGluc3RlYWQuXG4gKlxuICogTWFuaXB1bGF0aW9uIG9mIHRoZSBzdGF0ZSBkaXJlY3RseSBjYW4gbGVhZCB0byB1bmV4cGVjdGVkIGJlaGF2aW9yIGFuZCBzaG91bGQgYmUgYXZvaWRlZC5cbiAqIEluc3RlYWQsIHVzZSB0aGUgYGFwcHJvdmVgIGFuZCBgcmVqZWN0YCBtZXRob2RzIHRvIGludGVyYWN0IHdpdGggdGhlIHN0YXRlLlxuICovXG5leHBvcnQgY2xhc3MgUnVuU3RhdGUge1xuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgdHVybiBudW1iZXIgaW4gdGhlIGNvbnZlcnNhdGlvbi5cbiAgICAgKi9cbiAgICBfY3VycmVudFR1cm4gPSAwO1xuICAgIC8qKlxuICAgICAqIFRoZSBhZ2VudCBjdXJyZW50bHkgaGFuZGxpbmcgdGhlIGNvbnZlcnNhdGlvbi5cbiAgICAgKi9cbiAgICBfY3VycmVudEFnZW50O1xuICAgIC8qKlxuICAgICAqIE9yaWdpbmFsIHVzZXIgaW5wdXQgcHJpb3IgdG8gYW55IHByb2Nlc3NpbmcuXG4gICAgICovXG4gICAgX29yaWdpbmFsSW5wdXQ7XG4gICAgLyoqXG4gICAgICogUmVzcG9uc2VzIGZyb20gdGhlIG1vZGVsIHNvIGZhci5cbiAgICAgKi9cbiAgICBfbW9kZWxSZXNwb25zZXM7XG4gICAgLyoqXG4gICAgICogQWN0aXZlIHRyYWNpbmcgc3BhbiBmb3IgdGhlIGN1cnJlbnQgYWdlbnQgaWYgdHJhY2luZyBpcyBlbmFibGVkLlxuICAgICAqL1xuICAgIF9jdXJyZW50QWdlbnRTcGFuO1xuICAgIC8qKlxuICAgICAqIFJ1biBjb250ZXh0IHRyYWNraW5nIGFwcHJvdmFscywgdXNhZ2UsIGFuZCBvdGhlciBtZXRhZGF0YS5cbiAgICAgKi9cbiAgICBfY29udGV4dDtcbiAgICAvKipcbiAgICAgKiBUcmFja3Mgd2hhdCB0b29scyBlYWNoIGFnZW50IGhhcyB1c2VkLlxuICAgICAqL1xuICAgIF90b29sVXNlVHJhY2tlcjtcbiAgICAvKipcbiAgICAgKiBJdGVtcyBnZW5lcmF0ZWQgYnkgdGhlIGFnZW50IGR1cmluZyB0aGUgcnVuLlxuICAgICAqL1xuICAgIF9nZW5lcmF0ZWRJdGVtcztcbiAgICAvKipcbiAgICAgKiBNYXhpbXVtIGFsbG93ZWQgdHVybnMgYmVmb3JlIGZvcmNpbmcgdGVybWluYXRpb24uXG4gICAgICovXG4gICAgX21heFR1cm5zO1xuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIHJ1biBoYXMgYW4gYWN0aXZlIGFnZW50IHN0ZXAgaW4gcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgX25vQWN0aXZlQWdlbnRSdW4gPSB0cnVlO1xuICAgIC8qKlxuICAgICAqIExhc3QgbW9kZWwgcmVzcG9uc2UgZm9yIHRoZSBwcmV2aW91cyB0dXJuLlxuICAgICAqL1xuICAgIF9sYXN0VHVyblJlc3BvbnNlO1xuICAgIC8qKlxuICAgICAqIFJlc3VsdHMgZnJvbSBpbnB1dCBndWFyZHJhaWxzIGFwcGxpZWQgdG8gdGhlIHJ1bi5cbiAgICAgKi9cbiAgICBfaW5wdXRHdWFyZHJhaWxSZXN1bHRzO1xuICAgIC8qKlxuICAgICAqIFJlc3VsdHMgZnJvbSBvdXRwdXQgZ3VhcmRyYWlscyBhcHBsaWVkIHRvIHRoZSBydW4uXG4gICAgICovXG4gICAgX291dHB1dEd1YXJkcmFpbFJlc3VsdHM7XG4gICAgLyoqXG4gICAgICogTmV4dCBzdGVwIGNvbXB1dGVkIGZvciB0aGUgYWdlbnQgdG8gdGFrZS5cbiAgICAgKi9cbiAgICBfY3VycmVudFN0ZXAgPSB1bmRlZmluZWQ7XG4gICAgLyoqXG4gICAgICogUGFyc2VkIG1vZGVsIHJlc3BvbnNlIGFmdGVyIGFwcGx5aW5nIGd1YXJkcmFpbHMgYW5kIHRvb2xzLlxuICAgICAqL1xuICAgIF9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UgPSB1bmRlZmluZWQ7XG4gICAgLyoqXG4gICAgICogVHJhY2UgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcnVuIGlmIHRyYWNpbmcgaXMgZW5hYmxlZC5cbiAgICAgKi9cbiAgICBfdHJhY2UgPSBudWxsO1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQsIG9yaWdpbmFsSW5wdXQsIHN0YXJ0aW5nQWdlbnQsIG1heFR1cm5zKSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLl9vcmlnaW5hbElucHV0ID0gc3RydWN0dXJlZENsb25lKG9yaWdpbmFsSW5wdXQpO1xuICAgICAgICB0aGlzLl9tb2RlbFJlc3BvbnNlcyA9IFtdO1xuICAgICAgICB0aGlzLl9jdXJyZW50QWdlbnRTcGFuID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9jdXJyZW50QWdlbnQgPSBzdGFydGluZ0FnZW50O1xuICAgICAgICB0aGlzLl90b29sVXNlVHJhY2tlciA9IG5ldyBBZ2VudFRvb2xVc2VUcmFja2VyKCk7XG4gICAgICAgIHRoaXMuX2dlbmVyYXRlZEl0ZW1zID0gW107XG4gICAgICAgIHRoaXMuX21heFR1cm5zID0gbWF4VHVybnM7XG4gICAgICAgIHRoaXMuX2lucHV0R3VhcmRyYWlsUmVzdWx0cyA9IFtdO1xuICAgICAgICB0aGlzLl9vdXRwdXRHdWFyZHJhaWxSZXN1bHRzID0gW107XG4gICAgICAgIHRoaXMuX3RyYWNlID0gZ2V0Q3VycmVudFRyYWNlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcHJvdmVzIGEgdG9vbCBjYWxsIHJlcXVlc3RlZCBieSB0aGUgYWdlbnQgdGhyb3VnaCBhbiBpbnRlcnJ1cHRpb24gYW5kIGFwcHJvdmFsIGl0ZW0gcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIFRvIGFwcHJvdmUgdGhlIHJlcXVlc3QgdXNlIHRoaXMgbWV0aG9kIGFuZCB0aGVuIHJ1biB0aGUgYWdlbnQgYWdhaW4gd2l0aCB0aGUgc2FtZSBzdGF0ZSBvYmplY3RcbiAgICAgKiB0byBjb250aW51ZSB0aGUgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCBpdCB3aWxsIG9ubHkgYXBwcm92ZSB0aGUgY3VycmVudCB0b29sIGNhbGwuIFRvIGFsbG93IHRoZSB0b29sIHRvIGJlIHVzZWQgbXVsdGlwbGVcbiAgICAgKiB0aW1lcyB0aHJvdWdob3V0IHRoZSBydW4sIHNldCB0aGUgYGFsd2F5c0FwcHJvdmVgIG9wdGlvbiB0byBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIHRvb2wgY2FsbCBhcHByb3ZhbCBpdGVtIHRvIGFwcHJvdmUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgYXBwcm92YWwuXG4gICAgICovXG4gICAgYXBwcm92ZShhcHByb3ZhbEl0ZW0sIG9wdGlvbnMgPSB7IGFsd2F5c0FwcHJvdmU6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy5fY29udGV4dC5hcHByb3ZlVG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWplY3RzIGEgdG9vbCBjYWxsIHJlcXVlc3RlZCBieSB0aGUgYWdlbnQgdGhyb3VnaCBhbiBpbnRlcnJ1cHRpb24gYW5kIGFwcHJvdmFsIGl0ZW0gcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIFRvIHJlamVjdCB0aGUgcmVxdWVzdCB1c2UgdGhpcyBtZXRob2QgYW5kIHRoZW4gcnVuIHRoZSBhZ2VudCBhZ2FpbiB3aXRoIHRoZSBzYW1lIHN0YXRlIG9iamVjdFxuICAgICAqIHRvIGNvbnRpbnVlIHRoZSBleGVjdXRpb24uXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0IGl0IHdpbGwgb25seSByZWplY3QgdGhlIGN1cnJlbnQgdG9vbCBjYWxsLiBUbyBhbGxvdyB0aGUgdG9vbCB0byBiZSB1c2VkIG11bHRpcGxlXG4gICAgICogdGltZXMgdGhyb3VnaG91dCB0aGUgcnVuLCBzZXQgdGhlIGBhbHdheXNSZWplY3RgIG9wdGlvbiB0byBgdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXBwcm92YWxJdGVtIC0gVGhlIHRvb2wgY2FsbCBhcHByb3ZhbCBpdGVtIHRvIHJlamVjdC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRoZSByZWplY3Rpb24uXG4gICAgICovXG4gICAgcmVqZWN0KGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzUmVqZWN0OiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMuX2NvbnRleHQucmVqZWN0VG9vbChhcHByb3ZhbEl0ZW0sIG9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemVzIHRoZSBydW4gc3RhdGUgdG8gYSBKU09OIG9iamVjdC5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2VyaWFsaXplIHRoZSBydW4gc3RhdGUgdG8gYSBKU09OIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogcmVzdW1lIHRoZSBydW4gbGF0ZXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgc2VyaWFsaXplZCBydW4gc3RhdGUuXG4gICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCBvdXRwdXQgPSB7XG4gICAgICAgICAgICAkc2NoZW1hVmVyc2lvbjogQ1VSUkVOVF9TQ0hFTUFfVkVSU0lPTixcbiAgICAgICAgICAgIGN1cnJlbnRUdXJuOiB0aGlzLl9jdXJyZW50VHVybixcbiAgICAgICAgICAgIGN1cnJlbnRBZ2VudDoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuX2N1cnJlbnRBZ2VudC5uYW1lLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9yaWdpbmFsSW5wdXQ6IHRoaXMuX29yaWdpbmFsSW5wdXQsXG4gICAgICAgICAgICBtb2RlbFJlc3BvbnNlczogdGhpcy5fbW9kZWxSZXNwb25zZXMubWFwKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVzYWdlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0czogcmVzcG9uc2UudXNhZ2UucmVxdWVzdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2VuczogcmVzcG9uc2UudXNhZ2UuaW5wdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnM6IHJlc3BvbnNlLnVzYWdlLm91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsVG9rZW5zOiByZXNwb25zZS51c2FnZS50b3RhbFRva2VucyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0OiByZXNwb25zZS5vdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHJlc3BvbnNlLnJlc3BvbnNlSWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgY29udGV4dDogdGhpcy5fY29udGV4dC50b0pTT04oKSxcbiAgICAgICAgICAgIHRvb2xVc2VUcmFja2VyOiB0aGlzLl90b29sVXNlVHJhY2tlci50b0pTT04oKSxcbiAgICAgICAgICAgIG1heFR1cm5zOiB0aGlzLl9tYXhUdXJucyxcbiAgICAgICAgICAgIGN1cnJlbnRBZ2VudFNwYW46IHRoaXMuX2N1cnJlbnRBZ2VudFNwYW4/LnRvSlNPTigpLFxuICAgICAgICAgICAgbm9BY3RpdmVBZ2VudFJ1bjogdGhpcy5fbm9BY3RpdmVBZ2VudFJ1bixcbiAgICAgICAgICAgIGlucHV0R3VhcmRyYWlsUmVzdWx0czogdGhpcy5faW5wdXRHdWFyZHJhaWxSZXN1bHRzLFxuICAgICAgICAgICAgb3V0cHV0R3VhcmRyYWlsUmVzdWx0czogdGhpcy5fb3V0cHV0R3VhcmRyYWlsUmVzdWx0cy5tYXAoKHIpID0+ICh7XG4gICAgICAgICAgICAgICAgLi4ucixcbiAgICAgICAgICAgICAgICBhZ2VudDogci5hZ2VudC50b0pTT04oKSxcbiAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgIGN1cnJlbnRTdGVwOiB0aGlzLl9jdXJyZW50U3RlcCxcbiAgICAgICAgICAgIGxhc3RNb2RlbFJlc3BvbnNlOiB0aGlzLl9sYXN0VHVyblJlc3BvbnNlLFxuICAgICAgICAgICAgZ2VuZXJhdGVkSXRlbXM6IHRoaXMuX2dlbmVyYXRlZEl0ZW1zLm1hcCgoaXRlbSkgPT4gaXRlbS50b0pTT04oKSksXG4gICAgICAgICAgICBsYXN0UHJvY2Vzc2VkUmVzcG9uc2U6IHRoaXMuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSxcbiAgICAgICAgICAgIHRyYWNlOiB0aGlzLl90cmFjZSA/IHRoaXMuX3RyYWNlLnRvSlNPTigpIDogbnVsbCxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gcGFyc2luZyB0aGUgc2NoZW1hIHRvIGVuc3VyZSB0aGUgb3V0cHV0IGlzIHZhbGlkIGZvciByZXBhcnNpbmdcbiAgICAgICAgY29uc3QgcGFyc2VkID0gU2VyaWFsaXplZFJ1blN0YXRlLnNhZmVQYXJzZShvdXRwdXQpO1xuICAgICAgICBpZiAoIXBhcnNlZC5zdWNjZXNzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU3lzdGVtRXJyb3IoYEZhaWxlZCB0byBzZXJpYWxpemUgcnVuIHN0YXRlLiAke3BhcnNlZC5lcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJzZWQuZGF0YTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VyaWFsaXplcyB0aGUgcnVuIHN0YXRlIHRvIGEgc3RyaW5nLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBzZXJpYWxpemUgdGhlIHJ1biBzdGF0ZSB0byBhIHN0cmluZyB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogcmVzdW1lIHRoZSBydW4gbGF0ZXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgc2VyaWFsaXplZCBydW4gc3RhdGUuXG4gICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnRvSlNPTigpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVzZXJpYWxpemVzIGEgcnVuIHN0YXRlIGZyb20gYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIGRlc2VyaWFsaXplIGEgcnVuIHN0YXRlIGZyb20gYSBzdHJpbmcgdGhhdCB3YXMgc2VyaWFsaXplZCB1c2luZyB0aGVcbiAgICAgKiBgdG9TdHJpbmdgIG1ldGhvZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgZnJvbVN0cmluZyhpbml0aWFsQWdlbnQsIHN0cikge1xuICAgICAgICBjb25zdCBbcGFyc2luZ0Vycm9yLCBqc29uUmVzdWx0XSA9IGF3YWl0IHNhZmVFeGVjdXRlKCgpID0+IEpTT04ucGFyc2Uoc3RyKSk7XG4gICAgICAgIGlmIChwYXJzaW5nRXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYEZhaWxlZCB0byBwYXJzZSBydW4gc3RhdGUuICR7cGFyc2luZ0Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBwYXJzaW5nRXJyb3IubWVzc2FnZSA6IFN0cmluZyhwYXJzaW5nRXJyb3IpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cnJlbnRTY2hlbWFWZXJzaW9uID0ganNvblJlc3VsdC4kc2NoZW1hVmVyc2lvbjtcbiAgICAgICAgaWYgKCFjdXJyZW50U2NoZW1hVmVyc2lvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignUnVuIHN0YXRlIGlzIG1pc3Npbmcgc2NoZW1hIHZlcnNpb24nKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudFNjaGVtYVZlcnNpb24gIT09IENVUlJFTlRfU0NIRU1BX1ZFUlNJT04pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoYFJ1biBzdGF0ZSBzY2hlbWEgdmVyc2lvbiAke2N1cnJlbnRTY2hlbWFWZXJzaW9ufSBpcyBub3Qgc3VwcG9ydGVkLiBQbGVhc2UgdXNlIHZlcnNpb24gJHtDVVJSRU5UX1NDSEVNQV9WRVJTSU9OfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXRlSnNvbiA9IFNlcmlhbGl6ZWRSdW5TdGF0ZS5wYXJzZShKU09OLnBhcnNlKHN0cikpO1xuICAgICAgICBjb25zdCBhZ2VudE1hcCA9IGJ1aWxkQWdlbnRNYXAoaW5pdGlhbEFnZW50KTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gUmVidWlsZCB0aGUgY29udGV4dFxuICAgICAgICAvL1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gbmV3IFJ1bkNvbnRleHQoc3RhdGVKc29uLmNvbnRleHQuY29udGV4dCk7XG4gICAgICAgIGNvbnRleHQuX3JlYnVpbGRBcHByb3ZhbHMoc3RhdGVKc29uLmNvbnRleHQuYXBwcm92YWxzKTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gRmluZCB0aGUgY3VycmVudCBhZ2VudCBmcm9tIHRoZSBpbml0aWFsIGFnZW50XG4gICAgICAgIC8vXG4gICAgICAgIGNvbnN0IGN1cnJlbnRBZ2VudCA9IGFnZW50TWFwLmdldChzdGF0ZUpzb24uY3VycmVudEFnZW50Lm5hbWUpO1xuICAgICAgICBpZiAoIWN1cnJlbnRBZ2VudCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgQWdlbnQgJHtzdGF0ZUpzb24uY3VycmVudEFnZW50Lm5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0YXRlID0gbmV3IFJ1blN0YXRlKGNvbnRleHQsICcnLCBjdXJyZW50QWdlbnQsIHN0YXRlSnNvbi5tYXhUdXJucyk7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50VHVybiA9IHN0YXRlSnNvbi5jdXJyZW50VHVybjtcbiAgICAgICAgLy8gcmVidWlsZCB0b29sIHVzZSB0cmFja2VyXG4gICAgICAgIHN0YXRlLl90b29sVXNlVHJhY2tlciA9IG5ldyBBZ2VudFRvb2xVc2VUcmFja2VyKCk7XG4gICAgICAgIGZvciAoY29uc3QgW2FnZW50TmFtZSwgdG9vbE5hbWVzXSBvZiBPYmplY3QuZW50cmllcyhzdGF0ZUpzb24udG9vbFVzZVRyYWNrZXIpKSB7XG4gICAgICAgICAgICBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIuYWRkVG9vbFVzZShhZ2VudE1hcC5nZXQoYWdlbnROYW1lKSwgdG9vbE5hbWVzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZWJ1aWxkIGN1cnJlbnQgYWdlbnQgc3BhblxuICAgICAgICBpZiAoc3RhdGVKc29uLmN1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgIGlmICghc3RhdGVKc29uLnRyYWNlKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1RyYWNlIGlzIG5vdCBzZXQsIHNraXBwaW5nIHRyYWNpbmcgc2V0dXAnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRyYWNlID0gZ2V0R2xvYmFsVHJhY2VQcm92aWRlcigpLmNyZWF0ZVRyYWNlKHtcbiAgICAgICAgICAgICAgICB0cmFjZUlkOiBzdGF0ZUpzb24udHJhY2U/LmlkLFxuICAgICAgICAgICAgICAgIG5hbWU6IHN0YXRlSnNvbi50cmFjZT8ud29ya2Zsb3dfbmFtZSxcbiAgICAgICAgICAgICAgICBncm91cElkOiBzdGF0ZUpzb24udHJhY2U/Lmdyb3VwX2lkID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YTogc3RhdGVKc29uLnRyYWNlPy5tZXRhZGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4gPSBkZXNlcmlhbGl6ZVNwYW4odHJhY2UsIHN0YXRlSnNvbi5jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgIHN0YXRlLl90cmFjZSA9IHRyYWNlO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gc3RhdGVKc29uLm5vQWN0aXZlQWdlbnRSdW47XG4gICAgICAgIHN0YXRlLl9pbnB1dEd1YXJkcmFpbFJlc3VsdHMgPVxuICAgICAgICAgICAgc3RhdGVKc29uLmlucHV0R3VhcmRyYWlsUmVzdWx0cztcbiAgICAgICAgc3RhdGUuX291dHB1dEd1YXJkcmFpbFJlc3VsdHMgPSBzdGF0ZUpzb24ub3V0cHV0R3VhcmRyYWlsUmVzdWx0cy5tYXAoKHIpID0+ICh7XG4gICAgICAgICAgICAuLi5yLFxuICAgICAgICAgICAgYWdlbnQ6IGFnZW50TWFwLmdldChyLmFnZW50Lm5hbWUpLFxuICAgICAgICB9KSk7XG4gICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHN0YXRlSnNvbi5jdXJyZW50U3RlcDtcbiAgICAgICAgc3RhdGUuX29yaWdpbmFsSW5wdXQgPSBzdGF0ZUpzb24ub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgc3RhdGUuX21vZGVsUmVzcG9uc2VzID0gc3RhdGVKc29uLm1vZGVsUmVzcG9uc2VzLm1hcChkZXNlcmlhbGl6ZU1vZGVsUmVzcG9uc2UpO1xuICAgICAgICBzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSA9IHN0YXRlSnNvbi5sYXN0TW9kZWxSZXNwb25zZVxuICAgICAgICAgICAgPyBkZXNlcmlhbGl6ZU1vZGVsUmVzcG9uc2Uoc3RhdGVKc29uLmxhc3RNb2RlbFJlc3BvbnNlKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHN0YXRlSnNvbi5nZW5lcmF0ZWRJdGVtcy5tYXAoKGl0ZW0pID0+IGRlc2VyaWFsaXplSXRlbShpdGVtLCBhZ2VudE1hcCkpO1xuICAgICAgICBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlID0gc3RhdGVKc29uLmxhc3RQcm9jZXNzZWRSZXNwb25zZVxuICAgICAgICAgICAgPyBhd2FpdCBkZXNlcmlhbGl6ZVByb2Nlc3NlZFJlc3BvbnNlKGFnZW50TWFwLCBzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZUpzb24ubGFzdFByb2Nlc3NlZFJlc3BvbnNlKVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChzdGF0ZUpzb24uY3VycmVudFN0ZXA/LnR5cGUgPT09ICduZXh0X3N0ZXBfaGFuZG9mZicpIHtcbiAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcCA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX2hhbmRvZmYnLFxuICAgICAgICAgICAgICAgIG5ld0FnZW50OiBhZ2VudE1hcC5nZXQoc3RhdGVKc29uLmN1cnJlbnRTdGVwLm5ld0FnZW50Lm5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfVxufVxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQWdlbnRNYXAoaW5pdGlhbEFnZW50KSB7XG4gICAgY29uc3QgbWFwID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IHF1ZXVlID0gW2luaXRpYWxBZ2VudF07XG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgY3VycmVudEFnZW50ID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgaWYgKG1hcC5oYXMoY3VycmVudEFnZW50Lm5hbWUpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBtYXAuc2V0KGN1cnJlbnRBZ2VudC5uYW1lLCBjdXJyZW50QWdlbnQpO1xuICAgICAgICBmb3IgKGNvbnN0IGhhbmRvZmYgb2YgY3VycmVudEFnZW50LmhhbmRvZmZzKSB7XG4gICAgICAgICAgICBpZiAoaGFuZG9mZiBpbnN0YW5jZW9mIEFnZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXAuaGFzKGhhbmRvZmYubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWUucHVzaChoYW5kb2ZmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChoYW5kb2ZmLmFnZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXAuaGFzKGhhbmRvZmYuYWdlbnQubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWUucHVzaChoYW5kb2ZmLmFnZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hcDtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXNlcmlhbGl6ZVNwYW4odHJhY2UsIHNlcmlhbGl6ZWRTcGFuKSB7XG4gICAgY29uc3Qgc3BhbkRhdGEgPSBzZXJpYWxpemVkU3Bhbi5zcGFuX2RhdGE7XG4gICAgY29uc3QgcHJldmlvdXNTcGFuID0gc2VyaWFsaXplZFNwYW4ucHJldmlvdXNfc3BhblxuICAgICAgICA/IGRlc2VyaWFsaXplU3Bhbih0cmFjZSwgc2VyaWFsaXplZFNwYW4ucHJldmlvdXNfc3BhbilcbiAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgY29uc3Qgc3BhbiA9IGdldEdsb2JhbFRyYWNlUHJvdmlkZXIoKS5jcmVhdGVTcGFuKHtcbiAgICAgICAgc3BhbklkOiBzZXJpYWxpemVkU3Bhbi5pZCxcbiAgICAgICAgdHJhY2VJZDogc2VyaWFsaXplZFNwYW4udHJhY2VfaWQsXG4gICAgICAgIHBhcmVudElkOiBzZXJpYWxpemVkU3Bhbi5wYXJlbnRfaWQgPz8gdW5kZWZpbmVkLFxuICAgICAgICBzdGFydGVkQXQ6IHNlcmlhbGl6ZWRTcGFuLnN0YXJ0ZWRfYXQgPz8gdW5kZWZpbmVkLFxuICAgICAgICBlbmRlZEF0OiBzZXJpYWxpemVkU3Bhbi5lbmRlZF9hdCA/PyB1bmRlZmluZWQsXG4gICAgICAgIGRhdGE6IHNwYW5EYXRhLFxuICAgIH0sIHRyYWNlKTtcbiAgICBzcGFuLnByZXZpb3VzU3BhbiA9IHByZXZpb3VzU3BhbjtcbiAgICByZXR1cm4gc3Bhbjtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXNlcmlhbGl6ZU1vZGVsUmVzcG9uc2Uoc2VyaWFsaXplZE1vZGVsUmVzcG9uc2UpIHtcbiAgICBjb25zdCB1c2FnZSA9IG5ldyBVc2FnZSgpO1xuICAgIHVzYWdlLnJlcXVlc3RzID0gc2VyaWFsaXplZE1vZGVsUmVzcG9uc2UudXNhZ2UucmVxdWVzdHM7XG4gICAgdXNhZ2UuaW5wdXRUb2tlbnMgPSBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS51c2FnZS5pbnB1dFRva2VucztcbiAgICB1c2FnZS5vdXRwdXRUb2tlbnMgPSBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS51c2FnZS5vdXRwdXRUb2tlbnM7XG4gICAgdXNhZ2UudG90YWxUb2tlbnMgPSBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS51c2FnZS50b3RhbFRva2VucztcbiAgICByZXR1cm4ge1xuICAgICAgICB1c2FnZSxcbiAgICAgICAgb3V0cHV0OiBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS5vdXRwdXQubWFwKChpdGVtKSA9PiBwcm90b2NvbC5PdXRwdXRNb2RlbEl0ZW0ucGFyc2UoaXRlbSkpLFxuICAgICAgICByZXNwb25zZUlkOiBzZXJpYWxpemVkTW9kZWxSZXNwb25zZS5yZXNwb25zZUlkLFxuICAgIH07XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVJdGVtKHNlcmlhbGl6ZWRJdGVtLCBhZ2VudE1hcCkge1xuICAgIHN3aXRjaCAoc2VyaWFsaXplZEl0ZW0udHlwZSkge1xuICAgICAgICBjYXNlICdtZXNzYWdlX291dHB1dF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuTWVzc2FnZU91dHB1dEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICAgICAgY2FzZSAndG9vbF9jYWxsX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5Ub29sQ2FsbEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICAgICAgY2FzZSAndG9vbF9jYWxsX291dHB1dF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuVG9vbENhbGxPdXRwdXRJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSwgc2VyaWFsaXplZEl0ZW0ub3V0cHV0KTtcbiAgICAgICAgY2FzZSAncmVhc29uaW5nX2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5SZWFzb25pbmdJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ2hhbmRvZmZfY2FsbF9pdGVtJzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnVuSGFuZG9mZkNhbGxJdGVtKHNlcmlhbGl6ZWRJdGVtLnJhd0l0ZW0sIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS5hZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ2hhbmRvZmZfb3V0cHV0X2l0ZW0nOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5IYW5kb2ZmT3V0cHV0SXRlbShzZXJpYWxpemVkSXRlbS5yYXdJdGVtLCBhZ2VudE1hcC5nZXQoc2VyaWFsaXplZEl0ZW0uc291cmNlQWdlbnQubmFtZSksIGFnZW50TWFwLmdldChzZXJpYWxpemVkSXRlbS50YXJnZXRBZ2VudC5uYW1lKSk7XG4gICAgICAgIGNhc2UgJ3Rvb2xfYXBwcm92YWxfaXRlbSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1blRvb2xBcHByb3ZhbEl0ZW0oc2VyaWFsaXplZEl0ZW0ucmF3SXRlbSwgYWdlbnRNYXAuZ2V0KHNlcmlhbGl6ZWRJdGVtLmFnZW50Lm5hbWUpKTtcbiAgICB9XG59XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5hc3luYyBmdW5jdGlvbiBkZXNlcmlhbGl6ZVByb2Nlc3NlZFJlc3BvbnNlKGFnZW50TWFwLCBjdXJyZW50QWdlbnQsIHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZSkge1xuICAgIGNvbnN0IGFsbFRvb2xzID0gYXdhaXQgY3VycmVudEFnZW50LmdldEFsbFRvb2xzKCk7XG4gICAgY29uc3QgdG9vbHMgPSBuZXcgTWFwKGFsbFRvb2xzXG4gICAgICAgIC5maWx0ZXIoKHRvb2wpID0+IHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgLm1hcCgodG9vbCkgPT4gW3Rvb2wubmFtZSwgdG9vbF0pKTtcbiAgICBjb25zdCBjb21wdXRlclRvb2xzID0gbmV3IE1hcChhbGxUb29sc1xuICAgICAgICAuZmlsdGVyKCh0b29sKSA9PiB0b29sLnR5cGUgPT09ICdjb21wdXRlcicpXG4gICAgICAgIC5tYXAoKHRvb2wpID0+IFt0b29sLm5hbWUsIHRvb2xdKSk7XG4gICAgY29uc3QgaGFuZG9mZnMgPSBuZXcgTWFwKGN1cnJlbnRBZ2VudC5oYW5kb2Zmcy5tYXAoKGVudHJ5KSA9PiB7XG4gICAgICAgIGlmIChlbnRyeSBpbnN0YW5jZW9mIEFnZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gW2VudHJ5Lm5hbWUsIGhhbmRvZmYoZW50cnkpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW2VudHJ5LnRvb2xOYW1lLCBlbnRyeV07XG4gICAgfSkpO1xuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgbmV3SXRlbXM6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5uZXdJdGVtcy5tYXAoKGl0ZW0pID0+IGRlc2VyaWFsaXplSXRlbShpdGVtLCBhZ2VudE1hcCkpLFxuICAgICAgICB0b29sc1VzZWQ6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS50b29sc1VzZWQsXG4gICAgICAgIGhhbmRvZmZzOiBzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UuaGFuZG9mZnMubWFwKChoYW5kb2ZmKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRvZmZzLmhhcyhoYW5kb2ZmLmhhbmRvZmYudG9vbE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcihgSGFuZG9mZiAke2hhbmRvZmYuaGFuZG9mZi50b29sTmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBoYW5kb2ZmLnRvb2xDYWxsLFxuICAgICAgICAgICAgICAgIGhhbmRvZmY6IGhhbmRvZmZzLmdldChoYW5kb2ZmLmhhbmRvZmYudG9vbE5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSksXG4gICAgICAgIGZ1bmN0aW9uczogYXdhaXQgUHJvbWlzZS5hbGwoc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLmZ1bmN0aW9ucy5tYXAoYXN5bmMgKGZ1bmN0aW9uQ2FsbCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0b29scy5oYXMoZnVuY3Rpb25DYWxsLnRvb2wubmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBUb29sICR7ZnVuY3Rpb25DYWxsLnRvb2wubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRvb2xDYWxsOiBmdW5jdGlvbkNhbGwudG9vbENhbGwsXG4gICAgICAgICAgICAgICAgdG9vbDogdG9vbHMuZ2V0KGZ1bmN0aW9uQ2FsbC50b29sLm5hbWUpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpLFxuICAgICAgICBjb21wdXRlckFjdGlvbnM6IHNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZS5jb21wdXRlckFjdGlvbnMubWFwKChjb21wdXRlckFjdGlvbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgdG9vbE5hbWUgPSBjb21wdXRlckFjdGlvbi5jb21wdXRlci5uYW1lO1xuICAgICAgICAgICAgaWYgKCFjb21wdXRlclRvb2xzLmhhcyh0b29sTmFtZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKGBDb21wdXRlciB0b29sICR7dG9vbE5hbWV9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b29sQ2FsbDogY29tcHV0ZXJBY3Rpb24udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgY29tcHV0ZXI6IGNvbXB1dGVyVG9vbHMuZ2V0KHRvb2xOYW1lKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pLFxuICAgICAgICBtY3BBcHByb3ZhbFJlcXVlc3RzOiAoc2VyaWFsaXplZFByb2Nlc3NlZFJlc3BvbnNlLm1jcEFwcHJvdmFsUmVxdWVzdHMgPz8gW10pLm1hcCgoYXBwcm92YWxSZXF1ZXN0KSA9PiAoe1xuICAgICAgICAgICAgcmVxdWVzdEl0ZW06IG5ldyBSdW5Ub29sQXBwcm92YWxJdGVtKGFwcHJvdmFsUmVxdWVzdC5yZXF1ZXN0SXRlbVxuICAgICAgICAgICAgICAgIC5yYXdJdGVtLCBjdXJyZW50QWdlbnQpLFxuICAgICAgICAgICAgbWNwVG9vbDogYXBwcm92YWxSZXF1ZXN0Lm1jcFRvb2wsXG4gICAgICAgIH0pKSxcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLnJlc3VsdCxcbiAgICAgICAgaGFzVG9vbHNPckFwcHJvdmFsc1RvUnVuKCkge1xuICAgICAgICAgICAgcmV0dXJuIChyZXN1bHQuaGFuZG9mZnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJlc3VsdC5mdW5jdGlvbnMubGVuZ3RoID4gMCB8fFxuICAgICAgICAgICAgICAgIHJlc3VsdC5tY3BBcHByb3ZhbFJlcXVlc3RzLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgICAgICAgICByZXN1bHQuY29tcHV0ZXJBY3Rpb25zLmxlbmd0aCA+IDApO1xuICAgICAgICB9LFxuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW5TdGF0ZS5tanMubWFwIiwiaW1wb3J0IHsgZGVmaW5lSW5wdXRHdWFyZHJhaWwsIGRlZmluZU91dHB1dEd1YXJkcmFpbCwgfSBmcm9tIFwiLi9ndWFyZHJhaWwubWpzXCI7XG5pbXBvcnQgeyBnZXRIYW5kb2ZmIH0gZnJvbSBcIi4vaGFuZG9mZi5tanNcIjtcbmltcG9ydCB7IGdldERlZmF1bHRNb2RlbFByb3ZpZGVyIH0gZnJvbSBcIi4vcHJvdmlkZXJzLm1qc1wiO1xuaW1wb3J0IHsgUnVuQ29udGV4dCB9IGZyb20gXCIuL3J1bkNvbnRleHQubWpzXCI7XG5pbXBvcnQgeyBSdW5SZXN1bHQsIFN0cmVhbWVkUnVuUmVzdWx0IH0gZnJvbSBcIi4vcmVzdWx0Lm1qc1wiO1xuaW1wb3J0IHsgUnVuSG9va3MgfSBmcm9tIFwiLi9saWZlY3ljbGUubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IHNlcmlhbGl6ZVRvb2wsIHNlcmlhbGl6ZUhhbmRvZmYgfSBmcm9tIFwiLi91dGlscy9zZXJpYWxpemUubWpzXCI7XG5pbXBvcnQgeyBHdWFyZHJhaWxFeGVjdXRpb25FcnJvciwgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgTWF4VHVybnNFeGNlZWRlZEVycm9yLCBNb2RlbEJlaGF2aW9yRXJyb3IsIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBVc2VyRXJyb3IsIH0gZnJvbSBcIi4vZXJyb3JzLm1qc1wiO1xuaW1wb3J0IHsgYWRkU3RlcFRvUnVuUmVzdWx0LCBleGVjdXRlSW50ZXJydXB0ZWRUb29sc0FuZFNpZGVFZmZlY3RzLCBleGVjdXRlVG9vbHNBbmRTaWRlRWZmZWN0cywgbWF5YmVSZXNldFRvb2xDaG9pY2UsIHByb2Nlc3NNb2RlbFJlc3BvbnNlLCB9IGZyb20gXCIuL3J1bkltcGxlbWVudGF0aW9uLm1qc1wiO1xuaW1wb3J0IHsgZ2V0T3JDcmVhdGVUcmFjZSwgcmVzZXRDdXJyZW50U3Bhbiwgc2V0Q3VycmVudFNwYW4sIHdpdGhOZXdTcGFuQ29udGV4dCwgd2l0aFRyYWNlLCB9IGZyb20gXCIuL3RyYWNpbmcvY29udGV4dC5tanNcIjtcbmltcG9ydCB7IGNyZWF0ZUFnZW50U3Bhbiwgd2l0aEd1YXJkcmFpbFNwYW4gfSBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuaW1wb3J0IHsgVXNhZ2UgfSBmcm9tIFwiLi91c2FnZS5tanNcIjtcbmltcG9ydCB7IFJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50LCBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50IH0gZnJvbSBcIi4vZXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgUnVuU3RhdGUgfSBmcm9tIFwiLi9ydW5TdGF0ZS5tanNcIjtcbmltcG9ydCB7IFN0cmVhbUV2ZW50UmVzcG9uc2VDb21wbGV0ZWQgfSBmcm9tIFwiLi90eXBlcy9wcm90b2NvbC5tanNcIjtcbmltcG9ydCB7IGNvbnZlcnRBZ2VudE91dHB1dFR5cGVUb1NlcmlhbGl6YWJsZSB9IGZyb20gXCIuL3V0aWxzL3Rvb2xzLm1qc1wiO1xuY29uc3QgREVGQVVMVF9NQVhfVFVSTlMgPSAxMDtcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFjaW5nKHRyYWNpbmdEaXNhYmxlZCwgdHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSkge1xuICAgIGlmICh0cmFjaW5nRGlzYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAodHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuICdlbmFibGVkX3dpdGhvdXRfZGF0YSc7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0VHVybklucHV0KG9yaWdpbmFsSW5wdXQsIGdlbmVyYXRlZEl0ZW1zKSB7XG4gICAgY29uc3QgcmF3SXRlbXMgPSBnZW5lcmF0ZWRJdGVtcy5tYXAoKGl0ZW0pID0+IGl0ZW0ucmF3SXRlbSk7XG4gICAgaWYgKHR5cGVvZiBvcmlnaW5hbElucHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICBvcmlnaW5hbElucHV0ID0gW3sgdHlwZTogJ21lc3NhZ2UnLCByb2xlOiAndXNlcicsIGNvbnRlbnQ6IG9yaWdpbmFsSW5wdXQgfV07XG4gICAgfVxuICAgIHJldHVybiBbLi4ub3JpZ2luYWxJbnB1dCwgLi4ucmF3SXRlbXNdO1xufVxuLyoqXG4gKiBBIFJ1bm5lciBpcyByZXNwb25zaWJsZSBmb3IgcnVubmluZyBhbiBhZ2VudCB3b3JrZmxvdy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5lciBleHRlbmRzIFJ1bkhvb2tzIHtcbiAgICBjb25maWc7XG4gICAgaW5wdXRHdWFyZHJhaWxEZWZzO1xuICAgIG91dHB1dEd1YXJkcmFpbERlZnM7XG4gICAgY29uc3RydWN0b3IoY29uZmlnID0ge30pIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5jb25maWcgPSB7XG4gICAgICAgICAgICBtb2RlbFByb3ZpZGVyOiBjb25maWcubW9kZWxQcm92aWRlciA/PyBnZXREZWZhdWx0TW9kZWxQcm92aWRlcigpLFxuICAgICAgICAgICAgbW9kZWw6IGNvbmZpZy5tb2RlbCxcbiAgICAgICAgICAgIG1vZGVsU2V0dGluZ3M6IGNvbmZpZy5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgaGFuZG9mZklucHV0RmlsdGVyOiBjb25maWcuaGFuZG9mZklucHV0RmlsdGVyLFxuICAgICAgICAgICAgaW5wdXRHdWFyZHJhaWxzOiBjb25maWcuaW5wdXRHdWFyZHJhaWxzLFxuICAgICAgICAgICAgb3V0cHV0R3VhcmRyYWlsczogY29uZmlnLm91dHB1dEd1YXJkcmFpbHMsXG4gICAgICAgICAgICB0cmFjaW5nRGlzYWJsZWQ6IGNvbmZpZy50cmFjaW5nRGlzYWJsZWQgPz8gZmFsc2UsXG4gICAgICAgICAgICB0cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhOiBjb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSA/PyB0cnVlLFxuICAgICAgICAgICAgd29ya2Zsb3dOYW1lOiBjb25maWcud29ya2Zsb3dOYW1lID8/ICdBZ2VudCB3b3JrZmxvdycsXG4gICAgICAgICAgICB0cmFjZUlkOiBjb25maWcudHJhY2VJZCxcbiAgICAgICAgICAgIGdyb3VwSWQ6IGNvbmZpZy5ncm91cElkLFxuICAgICAgICAgICAgdHJhY2VNZXRhZGF0YTogY29uZmlnLnRyYWNlTWV0YWRhdGEsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaW5wdXRHdWFyZHJhaWxEZWZzID0gKGNvbmZpZy5pbnB1dEd1YXJkcmFpbHMgPz8gW10pLm1hcChkZWZpbmVJbnB1dEd1YXJkcmFpbCk7XG4gICAgICAgIHRoaXMub3V0cHV0R3VhcmRyYWlsRGVmcyA9IChjb25maWcub3V0cHV0R3VhcmRyYWlscyA/PyBbXSkubWFwKGRlZmluZU91dHB1dEd1YXJkcmFpbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFzeW5jICNydW5JbmRpdmlkdWFsTm9uU3RyZWFtKHN0YXJ0aW5nQWdlbnQsIGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB3aXRoTmV3U3BhbkNvbnRleHQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIHNhdmVkIHN0YXRlIHdlIHVzZSB0aGF0IG9uZSwgb3RoZXJ3aXNlIHdlIGNyZWF0ZSBhIG5ldyBvbmVcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gaW5wdXQgaW5zdGFuY2VvZiBSdW5TdGF0ZVxuICAgICAgICAgICAgICAgID8gaW5wdXRcbiAgICAgICAgICAgICAgICA6IG5ldyBSdW5TdGF0ZShvcHRpb25zLmNvbnRleHQgaW5zdGFuY2VvZiBSdW5Db250ZXh0XG4gICAgICAgICAgICAgICAgICAgID8gb3B0aW9ucy5jb250ZXh0XG4gICAgICAgICAgICAgICAgICAgIDogbmV3IFJ1bkNvbnRleHQob3B0aW9ucy5jb250ZXh0KSwgaW5wdXQsIHN0YXJ0aW5nQWdlbnQsIG9wdGlvbnMubWF4VHVybnMgPz8gREVGQVVMVF9NQVhfVFVSTlMpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbW9kZWwgPSBzdGF0ZS5fY3VycmVudEFnZW50Lm1vZGVsID8/IHRoaXMuY29uZmlnLm1vZGVsO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1vZGVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwgPSBhd2FpdCB0aGlzLmNvbmZpZy5tb2RlbFByb3ZpZGVyLmdldE1vZGVsKG1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBpZiB3ZSBkb24ndCBoYXZlIGEgY3VycmVudCBzdGVwLCB3ZSB0cmVhdCB0aGlzIGFzIGEgbmV3IHJ1blxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSBzdGF0ZS5fY3VycmVudFN0ZXAgPz8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ25leHRfc3RlcF9ydW5fYWdhaW4nLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdDb250aW51aW5nIGZyb20gaW50ZXJydXB0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLl9sYXN0VHVyblJlc3BvbnNlIHx8ICFzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignTm8gbW9kZWwgcmVzcG9uc2UgZm91bmQgaW4gcHJldmlvdXMgc3RhdGUnLCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuUmVzdWx0ID0gYXdhaXQgZXhlY3V0ZUludGVycnVwdGVkVG9vbHNBbmRTaWRlRWZmZWN0cyhzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fb3JpZ2luYWxJbnB1dCwgc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLCBzdGF0ZS5fbGFzdFR1cm5SZXNwb25zZSwgc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSwgdGhpcywgc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX3Rvb2xVc2VUcmFja2VyLmFkZFRvb2xVc2Uoc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZS50b29sc1VzZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX29yaWdpbmFsSW5wdXQgPSB0dXJuUmVzdWx0Lm9yaWdpbmFsSW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMgPSB0dXJuUmVzdWx0LmdlbmVyYXRlZEl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwID0gdHVyblJlc3VsdC5uZXh0U3RlcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9ydW5fYWdhaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYW5kb2ZmcyA9IHN0YXRlLl9jdXJyZW50QWdlbnQuaGFuZG9mZnMubWFwKGdldEhhbmRvZmYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRvZmZOYW1lcyA9IGhhbmRvZmZzLm1hcCgoaCkgPT4gaC5hZ2VudE5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuID0gY3JlYXRlQWdlbnRTcGFuKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc3RhdGUuX2N1cnJlbnRBZ2VudC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZG9mZnM6IGhhbmRvZmZOYW1lcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dF90eXBlOiBzdGF0ZS5fY3VycmVudEFnZW50Lm91dHB1dFNjaGVtYU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc3RhcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50U3BhbihzdGF0ZS5fY3VycmVudEFnZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0b29scyA9IGF3YWl0IHN0YXRlLl9jdXJyZW50QWdlbnQuZ2V0QWxsVG9vbHMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRUb29scyA9IHRvb2xzLm1hcCgodCkgPT4gc2VyaWFsaXplVG9vbCh0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXJpYWxpemVkSGFuZG9mZnMgPSBoYW5kb2Zmcy5tYXAoKGgpID0+IHNlcmlhbGl6ZUhhbmRvZmYoaCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc3BhbkRhdGEudG9vbHMgPSB0b29scy5tYXAoKHQpID0+IHQubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFR1cm4rKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFR1cm4gPiBzdGF0ZS5fbWF4VHVybnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbj8uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnTWF4IHR1cm5zIGV4Y2VlZGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBtYXhfdHVybnM6IHN0YXRlLl9tYXhUdXJucyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IoYE1heCB0dXJucyAoJHtzdGF0ZS5fbWF4VHVybnN9KSBleGNlZWRlZGAsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgUnVubmluZyBhZ2VudCAke3N0YXRlLl9jdXJyZW50QWdlbnQubmFtZX0gKHR1cm4gJHtzdGF0ZS5fY3VycmVudFR1cm59KWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50VHVybiA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI3J1bklucHV0R3VhcmRyYWlscyhzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuSW5wdXQgPSBnZXRUdXJuSW5wdXQoc3RhdGUuX29yaWdpbmFsSW5wdXQsIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3N0YXJ0Jywgc3RhdGUuX2NvbnRleHQsIHN0YXRlLl9jdXJyZW50QWdlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfc3RhcnQnLCBzdGF0ZS5fY29udGV4dCwgc3RhdGUuX2N1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbW9kZWxTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi50aGlzLmNvbmZpZy5tb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnN0YXRlLl9jdXJyZW50QWdlbnQubW9kZWxTZXR0aW5ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbFNldHRpbmdzID0gbWF5YmVSZXNldFRvb2xDaG9pY2Uoc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX3Rvb2xVc2VUcmFja2VyLCBtb2RlbFNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlID0gYXdhaXQgbW9kZWwuZ2V0UmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5c3RlbUluc3RydWN0aW9uczogYXdhaXQgc3RhdGUuX2N1cnJlbnRBZ2VudC5nZXRTeXN0ZW1Qcm9tcHQoc3RhdGUuX2NvbnRleHQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiB0dXJuSW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNSZXNwb25zZUlkOiBvcHRpb25zLnByZXZpb3VzUmVzcG9uc2VJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbFNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xzOiBzZXJpYWxpemVkVG9vbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VHlwZTogY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlKHN0YXRlLl9jdXJyZW50QWdlbnQub3V0cHV0VHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZG9mZnM6IHNlcmlhbGl6ZWRIYW5kb2ZmcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiBnZXRUcmFjaW5nKHRoaXMuY29uZmlnLnRyYWNpbmdEaXNhYmxlZCwgdGhpcy5jb25maWcudHJhY2VJbmNsdWRlU2Vuc2l0aXZlRGF0YSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLnNpZ25hbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX21vZGVsUmVzcG9uc2VzLnB1c2goc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2NvbnRleHQudXNhZ2UuYWRkKHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLnVzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRSZXNwb25zZSA9IHByb2Nlc3NNb2RlbFJlc3BvbnNlKHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBzdGF0ZS5fY3VycmVudEFnZW50LCB0b29scywgaGFuZG9mZnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZSA9IHByb2Nlc3NlZFJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHVyblJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVUb29sc0FuZFNpZGVFZmZlY3RzKHN0YXRlLl9jdXJyZW50QWdlbnQsIHN0YXRlLl9vcmlnaW5hbElucHV0LCBzdGF0ZS5fZ2VuZXJhdGVkSXRlbXMsIHN0YXRlLl9sYXN0VHVyblJlc3BvbnNlLCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCB0aGlzLCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fdG9vbFVzZVRyYWNrZXIuYWRkVG9vbFVzZShzdGF0ZS5fY3VycmVudEFnZW50LCBzdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLnRvb2xzVXNlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fb3JpZ2luYWxJbnB1dCA9IHR1cm5SZXN1bHQub3JpZ2luYWxJbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9nZW5lcmF0ZWRJdGVtcyA9IHR1cm5SZXN1bHQuZ2VuZXJhdGVkSXRlbXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudFN0ZXAgPSB0dXJuUmVzdWx0Lm5leHRTdGVwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ZpbmFsX291dHB1dCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI3J1bk91dHB1dEd1YXJkcmFpbHMoc3RhdGUsIHN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9lbmQnLCBzdGF0ZS5fY29udGV4dCwgc3RhdGUuX2N1cnJlbnRBZ2VudCwgc3RhdGUuX2N1cnJlbnRTdGVwLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X2VuZCcsIHN0YXRlLl9jb250ZXh0LCBzdGF0ZS5fY3VycmVudFN0ZXAub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUnVuUmVzdWx0KHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2hhbmRvZmYnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50ID0gc3RhdGUuX2N1cnJlbnRTdGVwLm5ld0FnZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UndmUgcHJvY2Vzc2VkIHRoZSBoYW5kb2ZmLCBzbyB3ZSBuZWVkIHRvIHJ1biB0aGUgbG9vcCBhZ2FpblxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRTdGVwID0geyB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzdGF0ZS5fY3VycmVudFN0ZXAgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGludGVycnVwdGVkLiBEb24ndCBydW4gYW55IGd1YXJkcmFpbHNcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUnVuUmVzdWx0KHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnUnVubmluZyBuZXh0IGxvb3AnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIGluIGFnZW50IHJ1bicsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGVycm9yOiBTdHJpbmcoZXJyKSB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5fY3VycmVudFN0ZXA/LnR5cGUgIT09ICduZXh0X3N0ZXBfaW50ZXJydXB0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9uJ3QgZW5kIHRoZSBzcGFuIGlmIHRoZSBydW4gd2FzIGludGVycnVwdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXNldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgI3J1bklucHV0R3VhcmRyYWlscyhzdGF0ZSkge1xuICAgICAgICBjb25zdCBndWFyZHJhaWxzID0gdGhpcy5pbnB1dEd1YXJkcmFpbERlZnMuY29uY2F0KHN0YXRlLl9jdXJyZW50QWdlbnQuaW5wdXRHdWFyZHJhaWxzLm1hcChkZWZpbmVJbnB1dEd1YXJkcmFpbCkpO1xuICAgICAgICBpZiAoZ3VhcmRyYWlscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBndWFyZHJhaWxBcmdzID0ge1xuICAgICAgICAgICAgICAgIGFnZW50OiBzdGF0ZS5fY3VycmVudEFnZW50LFxuICAgICAgICAgICAgICAgIGlucHV0OiBzdGF0ZS5fb3JpZ2luYWxJbnB1dCxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBzdGF0ZS5fY29udGV4dCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChndWFyZHJhaWxzLm1hcChhc3luYyAoZ3VhcmRyYWlsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aXRoR3VhcmRyYWlsU3Bhbihhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3VhcmRyYWlsLnJ1bihndWFyZHJhaWxBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEudHJpZ2dlcmVkID0gcmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH0sIHsgZGF0YTogeyBuYW1lOiBndWFyZHJhaWwubmFtZSB9IH0sIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnR3VhcmRyYWlsIHRyaXB3aXJlIHRyaWdnZXJlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZ3VhcmRyYWlsOiByZXN1bHQuZ3VhcmRyYWlsLm5hbWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkKGBJbnB1dCBndWFyZHJhaWwgdHJpZ2dlcmVkOiAke0pTT04uc3RyaW5naWZ5KHJlc3VsdC5vdXRwdXQub3V0cHV0SW5mbyl9YCwgcmVzdWx0LCBzdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyByb2xsIGJhY2sgdGhlIGN1cnJlbnQgdHVybiB0byBlbmFibGUgcmVydW5zXG4gICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRUdXJuLS07XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEd1YXJkcmFpbEV4ZWN1dGlvbkVycm9yKGBJbnB1dCBndWFyZHJhaWwgZmFpbGVkIHRvIGNvbXBsZXRlOiAke2V9YCwgZSwgc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jICNydW5PdXRwdXRHdWFyZHJhaWxzKHN0YXRlLCBvdXRwdXQpIHtcbiAgICAgICAgY29uc3QgZ3VhcmRyYWlscyA9IHRoaXMub3V0cHV0R3VhcmRyYWlsRGVmcy5jb25jYXQoc3RhdGUuX2N1cnJlbnRBZ2VudC5vdXRwdXRHdWFyZHJhaWxzLm1hcChkZWZpbmVPdXRwdXRHdWFyZHJhaWwpKTtcbiAgICAgICAgaWYgKGd1YXJkcmFpbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgYWdlbnRPdXRwdXQgPSBzdGF0ZS5fY3VycmVudEFnZW50LnByb2Nlc3NGaW5hbE91dHB1dChvdXRwdXQpO1xuICAgICAgICAgICAgY29uc3QgZ3VhcmRyYWlsQXJncyA9IHtcbiAgICAgICAgICAgICAgICBhZ2VudDogc3RhdGUuX2N1cnJlbnRBZ2VudCxcbiAgICAgICAgICAgICAgICBhZ2VudE91dHB1dCxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBzdGF0ZS5fY29udGV4dCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChndWFyZHJhaWxzLm1hcChhc3luYyAoZ3VhcmRyYWlsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aXRoR3VhcmRyYWlsU3Bhbihhc3luYyAoc3BhbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ3VhcmRyYWlsLnJ1bihndWFyZHJhaWxBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uc3BhbkRhdGEudHJpZ2dlcmVkID0gcmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIH0sIHsgZGF0YTogeyBuYW1lOiBndWFyZHJhaWwubmFtZSB9IH0sIHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnR3VhcmRyYWlsIHRyaXB3aXJlIHRyaWdnZXJlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgZ3VhcmRyYWlsOiByZXN1bHQuZ3VhcmRyYWlsLm5hbWUgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZChgT3V0cHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0Lm91dHB1dC5vdXRwdXRJbmZvKX1gLCByZXN1bHQsIHN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IoYE91dHB1dCBndWFyZHJhaWwgZmFpbGVkIHRvIGNvbXBsZXRlOiAke2V9YCwgZSwgc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFzeW5jICNydW5TdHJlYW1Mb29wKHJlc3VsdCwgb3B0aW9ucykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50QWdlbnQgPSByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudDtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kb2ZmcyA9IGN1cnJlbnRBZ2VudC5oYW5kb2Zmcy5tYXAoZ2V0SGFuZG9mZik7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vbHMgPSBhd2FpdCBjdXJyZW50QWdlbnQuZ2V0QWxsVG9vbHMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJpYWxpemVkVG9vbHMgPSB0b29scy5tYXAoKHQpID0+IHNlcmlhbGl6ZVRvb2wodCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlcmlhbGl6ZWRIYW5kb2ZmcyA9IGhhbmRvZmZzLm1hcCgoaCkgPT4gc2VyaWFsaXplSGFuZG9mZihoKSk7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA9IHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPz8ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC50eXBlID09PSAnbmV4dF9zdGVwX2ludGVycnVwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdDb250aW51aW5nIGZyb20gaW50ZXJydXB0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ05vIG1vZGVsIHJlc3BvbnNlIGZvdW5kIGluIHByZXZpb3VzIHN0YXRlJywgcmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0dXJuUmVzdWx0ID0gYXdhaXQgZXhlY3V0ZUludGVycnVwdGVkVG9vbHNBbmRTaWRlRWZmZWN0cyhyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudCwgcmVzdWx0LnN0YXRlLl9vcmlnaW5hbElucHV0LCByZXN1bHQuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLCByZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCB0aGlzLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBhZGRTdGVwVG9SdW5SZXN1bHQocmVzdWx0LCB0dXJuUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50LCByZXN1bHQuc3RhdGUuX2xhc3RQcm9jZXNzZWRSZXNwb25zZS50b29sc1VzZWQpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX29yaWdpbmFsSW5wdXQgPSB0dXJuUmVzdWx0Lm9yaWdpbmFsSW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fZ2VuZXJhdGVkSXRlbXMgPSB0dXJuUmVzdWx0LmdlbmVyYXRlZEl0ZW1zO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwID0gdHVyblJlc3VsdC5uZXh0U3RlcDtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfcnVuX2FnYWluJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFuZG9mZk5hbWVzID0gaGFuZG9mZnMubWFwKChoKSA9PiBoLmFnZW50TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4gPSBjcmVhdGVBZ2VudFNwYW4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogY3VycmVudEFnZW50Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRvZmZzOiBoYW5kb2ZmTmFtZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xzOiB0b29scy5tYXAoKHQpID0+IHQubmFtZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dF90eXBlOiBjdXJyZW50QWdlbnQub3V0cHV0U2NoZW1hTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uc3RhcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEN1cnJlbnRTcGFuKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybisrO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50VHVybiA+IHJlc3VsdC5zdGF0ZS5fbWF4VHVybnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbj8uc2V0RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdNYXggdHVybnMgZXhjZWVkZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgbWF4X3R1cm5zOiByZXN1bHQuc3RhdGUuX21heFR1cm5zIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNYXhUdXJuc0V4Y2VlZGVkRXJyb3IoYE1heCB0dXJucyAoJHtyZXN1bHQuc3RhdGUuX21heFR1cm5zfSkgZXhjZWVkZWRgLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhgUnVubmluZyBhZ2VudCAke2N1cnJlbnRBZ2VudC5uYW1lfSAodHVybiAke3Jlc3VsdC5zdGF0ZS5fY3VycmVudFR1cm59KWApO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbW9kZWwgPSBjdXJyZW50QWdlbnQubW9kZWwgPz8gdGhpcy5jb25maWcubW9kZWw7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbW9kZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbCA9IGF3YWl0IHRoaXMuY29uZmlnLm1vZGVsUHJvdmlkZXIuZ2V0TW9kZWwobW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRUdXJuID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNydW5JbnB1dEd1YXJkcmFpbHMocmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgbW9kZWxTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnRoaXMuY29uZmlnLm1vZGVsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jdXJyZW50QWdlbnQubW9kZWxTZXR0aW5ncyxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0aW5ncyA9IG1heWJlUmVzZXRUb29sQ2hvaWNlKGN1cnJlbnRBZ2VudCwgcmVzdWx0LnN0YXRlLl90b29sVXNlVHJhY2tlciwgbW9kZWxTZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR1cm5JbnB1dCA9IGdldFR1cm5JbnB1dChyZXN1bHQuaW5wdXQsIHJlc3VsdC5uZXdJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9zdGFydCcsIHJlc3VsdC5zdGF0ZS5fY29udGV4dCwgY3VycmVudEFnZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfc3RhcnQnLCByZXN1bHQuc3RhdGUuX2NvbnRleHQsIGN1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbmFsUmVzcG9uc2UgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgZXZlbnQgb2YgbW9kZWwuZ2V0U3RyZWFtZWRSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBzeXN0ZW1JbnN0cnVjdGlvbnM6IGF3YWl0IGN1cnJlbnRBZ2VudC5nZXRTeXN0ZW1Qcm9tcHQocmVzdWx0LnN0YXRlLl9jb250ZXh0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiB0dXJuSW5wdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1Jlc3BvbnNlSWQ6IG9wdGlvbnMucHJldmlvdXNSZXNwb25zZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0aW5ncyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xzOiBzZXJpYWxpemVkVG9vbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kb2Zmczogc2VyaWFsaXplZEhhbmRvZmZzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VHlwZTogY29udmVydEFnZW50T3V0cHV0VHlwZVRvU2VyaWFsaXphYmxlKGN1cnJlbnRBZ2VudC5vdXRwdXRUeXBlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNpbmc6IGdldFRyYWNpbmcodGhpcy5jb25maWcudHJhY2luZ0Rpc2FibGVkLCB0aGlzLmNvbmZpZy50cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgICAgICAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3Jlc3BvbnNlX2RvbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gU3RyZWFtRXZlbnRSZXNwb25zZUNvbXBsZXRlZC5wYXJzZShldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxSZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNhZ2U6IG5ldyBVc2FnZShwYXJzZWQucmVzcG9uc2UudXNhZ2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHBhcnNlZC5yZXNwb25zZS5vdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHBhcnNlZC5yZXNwb25zZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jYW5jZWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHRoZSB1c2VyJ3MgY29kZSBleGl0cyBhIGxvb3AgdG8gY29uc3VtZSB0aGUgc3RyZWFtLCB3ZSBuZWVkIHRvIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBsb29wIHRvIHByZXZlbnQgaW50ZXJuYWwgZmFsc2UgZXJyb3JzIGFuZCB1bm5lY2Vzc2FyeSBwcm9jZXNzaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Ll9hZGRJdGVtKG5ldyBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50KGV2ZW50KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9ub0FjdGl2ZUFnZW50UnVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmluYWxSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE1vZGVsQmVoYXZpb3JFcnJvcignTW9kZWwgZGlkIG5vdCBwcm9jdWRlIGEgZmluYWwgcmVzcG9uc2UhJywgcmVzdWx0LnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UgPSBmaW5hbFJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX21vZGVsUmVzcG9uc2VzLnB1c2gocmVzdWx0LnN0YXRlLl9sYXN0VHVyblJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkUmVzcG9uc2UgPSBwcm9jZXNzTW9kZWxSZXNwb25zZShyZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIGN1cnJlbnRBZ2VudCwgdG9vbHMsIGhhbmRvZmZzKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9sYXN0UHJvY2Vzc2VkUmVzcG9uc2UgPSBwcm9jZXNzZWRSZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHVyblJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVUb29sc0FuZFNpZGVFZmZlY3RzKGN1cnJlbnRBZ2VudCwgcmVzdWx0LnN0YXRlLl9vcmlnaW5hbElucHV0LCByZXN1bHQuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zLCByZXN1bHQuc3RhdGUuX2xhc3RUdXJuUmVzcG9uc2UsIHJlc3VsdC5zdGF0ZS5fbGFzdFByb2Nlc3NlZFJlc3BvbnNlLCB0aGlzLCByZXN1bHQuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICBhZGRTdGVwVG9SdW5SZXN1bHQocmVzdWx0LCB0dXJuUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl90b29sVXNlVHJhY2tlci5hZGRUb29sVXNlKGN1cnJlbnRBZ2VudCwgcHJvY2Vzc2VkUmVzcG9uc2UudG9vbHNVc2VkKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9vcmlnaW5hbElucHV0ID0gdHVyblJlc3VsdC5vcmlnaW5hbElucHV0O1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2dlbmVyYXRlZEl0ZW1zID0gdHVyblJlc3VsdC5nZW5lcmF0ZWRJdGVtcztcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcCA9IHR1cm5SZXN1bHQubmV4dFN0ZXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfZmluYWxfb3V0cHV0Jykge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiNydW5PdXRwdXRHdWFyZHJhaWxzKHJlc3VsdC5zdGF0ZSwgcmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcC5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAudHlwZSA9PT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGFyZSBkb25lIGZvciBub3cuIERvbid0IHJ1biBhbnkgb3V0cHV0IGd1YXJkcmFpbHNcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwLnR5cGUgPT09ICduZXh0X3N0ZXBfaGFuZG9mZicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnQgPSByZXN1bHQuc3RhdGUuX2N1cnJlbnRTdGVwXG4gICAgICAgICAgICAgICAgICAgICAgICA/Lm5ld0FnZW50O1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4uZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNldEN1cnJlbnRTcGFuKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnN0YXRlLl9jdXJyZW50QWdlbnRTcGFuID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuX2FkZEl0ZW0obmV3IFJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50KGN1cnJlbnRBZ2VudCkpO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuc3RhdGUuX25vQWN0aXZlQWdlbnRSdW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAvLyB3ZSd2ZSBwcm9jZXNzZWQgdGhlIGhhbmRvZmYsIHNvIHdlIG5lZWQgdG8gcnVuIHRoZSBsb29wIGFnYWluXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudFN0ZXAgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbmV4dF9zdGVwX3J1bl9hZ2FpbicsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1J1bm5pbmcgbmV4dCBsb29wJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5zZXRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdFcnJvciBpbiBhZ2VudCBydW4nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGVycm9yOiBTdHJpbmcoZXJyb3IpIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUuX2N1cnJlbnRBZ2VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXRlLl9jdXJyZW50U3RlcD8udHlwZSAhPT0gJ25leHRfc3RlcF9pbnRlcnJ1cHRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zdGF0ZS5fY3VycmVudEFnZW50U3Bhbi5lbmQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzZXRDdXJyZW50U3BhbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGFzeW5jICNydW5JbmRpdmlkdWFsU3RyZWFtKGFnZW50LCBpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyA/PyB7fTtcbiAgICAgICAgcmV0dXJuIHdpdGhOZXdTcGFuQ29udGV4dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIG9yIHJldXNlIGV4aXN0aW5nIHN0YXRlXG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IGlucHV0IGluc3RhbmNlb2YgUnVuU3RhdGVcbiAgICAgICAgICAgICAgICA/IGlucHV0XG4gICAgICAgICAgICAgICAgOiBuZXcgUnVuU3RhdGUob3B0aW9ucy5jb250ZXh0IGluc3RhbmNlb2YgUnVuQ29udGV4dFxuICAgICAgICAgICAgICAgICAgICA/IG9wdGlvbnMuY29udGV4dFxuICAgICAgICAgICAgICAgICAgICA6IG5ldyBSdW5Db250ZXh0KG9wdGlvbnMuY29udGV4dCksIGlucHV0LCBhZ2VudCwgb3B0aW9ucy5tYXhUdXJucyA/PyBERUZBVUxUX01BWF9UVVJOUyk7XG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBzdHJlYW1lZCByZXN1bHQgd2l0aCBleGlzdGluZyBzdGF0ZVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFN0cmVhbWVkUnVuUmVzdWx0KHtcbiAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsLFxuICAgICAgICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBTZXR1cCBkZWZhdWx0c1xuICAgICAgICAgICAgcmVzdWx0Lm1heFR1cm5zID0gb3B0aW9ucy5tYXhUdXJucyA/PyBzdGF0ZS5fbWF4VHVybnM7XG4gICAgICAgICAgICAvLyBDb250aW51ZSB0aGUgc3RyZWFtIGxvb3Agd2l0aG91dCBibG9ja2luZ1xuICAgICAgICAgICAgdGhpcy4jcnVuU3RyZWFtTG9vcChyZXN1bHQsIG9wdGlvbnMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5fZG9uZSgpO1xuICAgICAgICAgICAgfSwgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5fcmFpc2VFcnJvcihlcnIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucyA9IHtcbiAgICAgICAgc3RyZWFtOiBmYWxzZSxcbiAgICAgICAgY29udGV4dDogdW5kZWZpbmVkLFxuICAgIH0pIHtcbiAgICAgICAgaWYgKGlucHV0IGluc3RhbmNlb2YgUnVuU3RhdGUgJiYgaW5wdXQuX3RyYWNlKSB7XG4gICAgICAgICAgICByZXR1cm4gd2l0aFRyYWNlKGlucHV0Ll90cmFjZSwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5fY3VycmVudEFnZW50U3Bhbikge1xuICAgICAgICAgICAgICAgICAgICBzZXRDdXJyZW50U3BhbihpbnB1dC5fY3VycmVudEFnZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zPy5zdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuI3J1bkluZGl2aWR1YWxTdHJlYW0oYWdlbnQsIGlucHV0LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiNydW5JbmRpdmlkdWFsTm9uU3RyZWFtKGFnZW50LCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdldE9yQ3JlYXRlVHJhY2UoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnM/LnN0cmVhbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiNydW5JbmRpdmlkdWFsU3RyZWFtKGFnZW50LCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4jcnVuSW5kaXZpZHVhbE5vblN0cmVhbShhZ2VudCwgaW5wdXQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5sZXQgX2RlZmF1bHRSdW5uZXIgPSB1bmRlZmluZWQ7XG5mdW5jdGlvbiBnZXREZWZhdWx0UnVubmVyKCkge1xuICAgIGlmIChfZGVmYXVsdFJ1bm5lcikge1xuICAgICAgICByZXR1cm4gX2RlZmF1bHRSdW5uZXI7XG4gICAgfVxuICAgIF9kZWZhdWx0UnVubmVyID0gbmV3IFJ1bm5lcigpO1xuICAgIHJldHVybiBfZGVmYXVsdFJ1bm5lcjtcbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW4oYWdlbnQsIGlucHV0LCBvcHRpb25zKSB7XG4gICAgY29uc3QgcnVubmVyID0gZ2V0RGVmYXVsdFJ1bm5lcigpO1xuICAgIGlmIChvcHRpb25zPy5zdHJlYW0pIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJ1bm5lci5ydW4oYWdlbnQsIGlucHV0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBydW5uZXIucnVuKGFnZW50LCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVuLm1qcy5tYXAiLCJpbXBvcnQgeyBBZ2VudEhvb2tzIH0gZnJvbSBcIi4vbGlmZWN5Y2xlLm1qc1wiO1xuaW1wb3J0IHsgZ2V0QWxsTWNwVG9vbHMgfSBmcm9tIFwiLi9tY3AubWpzXCI7XG5pbXBvcnQgeyB0b29sLCB9IGZyb20gXCIuL3Rvb2wubWpzXCI7XG5pbXBvcnQgeyBSdW5uZXIgfSBmcm9tIFwiLi9ydW4ubWpzXCI7XG5pbXBvcnQgeyB0b0Z1bmN0aW9uVG9vbE5hbWUgfSBmcm9tIFwiLi91dGlscy90b29scy5tanNcIjtcbmltcG9ydCB7IGdldE91dHB1dFRleHQgfSBmcm9tIFwiLi91dGlscy9tZXNzYWdlcy5tanNcIjtcbmltcG9ydCB7IGlzQWdlbnRUb29sSW5wdXQgfSBmcm9tIFwiLi91dGlscy90eXBlR3VhcmRzLm1qc1wiO1xuaW1wb3J0IHsgaXNab2RPYmplY3QgfSBmcm9tIFwiLi91dGlscy90eXBlR3VhcmRzLm1qc1wiO1xuaW1wb3J0IHsgTW9kZWxCZWhhdmlvckVycm9yLCBVc2VyRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbi8qKlxuICogVGhlIGNsYXNzIHJlcHJlc2VudGluZyBhbiBBSSBhZ2VudCBjb25maWd1cmVkIHdpdGggaW5zdHJ1Y3Rpb25zLCB0b29scywgZ3VhcmRyYWlscywgaGFuZG9mZnMgYW5kIG1vcmUuXG4gKlxuICogV2Ugc3Ryb25nbHkgcmVjb21tZW5kIHBhc3NpbmcgYGluc3RydWN0aW9uc2AsIHdoaWNoIGlzIHRoZSBcInN5c3RlbSBwcm9tcHRcIiBmb3IgdGhlIGFnZW50LiBJblxuICogYWRkaXRpb24sIHlvdSBjYW4gcGFzcyBgaGFuZG9mZkRlc2NyaXB0aW9uYCwgd2hpY2ggaXMgYSBodW1hbi1yZWFkYWJsZSBkZXNjcmlwdGlvbiBvZiB0aGVcbiAqIGFnZW50LCB1c2VkIHdoZW4gdGhlIGFnZW50IGlzIHVzZWQgaW5zaWRlIHRvb2xzL2hhbmRvZmZzLlxuICpcbiAqIEFnZW50cyBhcmUgZ2VuZXJpYyBvbiB0aGUgY29udGV4dCB0eXBlLiBUaGUgY29udGV4dCBpcyBhIChtdXRhYmxlKSBvYmplY3QgeW91IGNyZWF0ZS4gSXQgaXNcbiAqIHBhc3NlZCB0byB0b29sIGZ1bmN0aW9ucywgaGFuZG9mZnMsIGd1YXJkcmFpbHMsIGV0Yy5cbiAqL1xuZXhwb3J0IGNsYXNzIEFnZW50IGV4dGVuZHMgQWdlbnRIb29rcyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIEFnZW50IHdpdGggaGFuZG9mZnMgYW5kIGF1dG9tYXRpY2FsbHkgaW5mZXIgdGhlIHVuaW9uIHR5cGUgZm9yIFRPdXRwdXQgZnJvbSB0aGUgaGFuZG9mZiBhZ2VudHMnIG91dHB1dCB0eXBlcy5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gbmV3IEFnZW50KHtcbiAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICAgIGhhbmRvZmZzOiBjb25maWcuaGFuZG9mZnMsXG4gICAgICAgICAgICBvdXRwdXRUeXBlOiBjb25maWcub3V0cHV0VHlwZSxcbiAgICAgICAgICAgIGhhbmRvZmZPdXRwdXRUeXBlV2FybmluZ0VuYWJsZWQ6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmFtZTtcbiAgICBpbnN0cnVjdGlvbnM7XG4gICAgaGFuZG9mZkRlc2NyaXB0aW9uO1xuICAgIGhhbmRvZmZzO1xuICAgIG1vZGVsO1xuICAgIG1vZGVsU2V0dGluZ3M7XG4gICAgdG9vbHM7XG4gICAgbWNwU2VydmVycztcbiAgICBpbnB1dEd1YXJkcmFpbHM7XG4gICAgb3V0cHV0R3VhcmRyYWlscztcbiAgICBvdXRwdXRUeXBlID0gJ3RleHQnO1xuICAgIHRvb2xVc2VCZWhhdmlvcjtcbiAgICByZXNldFRvb2xDaG9pY2U7XG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGlmICh0eXBlb2YgY29uZmlnLm5hbWUgIT09ICdzdHJpbmcnIHx8IGNvbmZpZy5uYW1lLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVc2VyRXJyb3IoJ0FnZW50IG11c3QgaGF2ZSBhIG5hbWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uYW1lID0gY29uZmlnLm5hbWU7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gY29uZmlnLmluc3RydWN0aW9ucyA/PyAnJztcbiAgICAgICAgdGhpcy5oYW5kb2ZmRGVzY3JpcHRpb24gPSBjb25maWcuaGFuZG9mZkRlc2NyaXB0aW9uID8/ICcnO1xuICAgICAgICB0aGlzLmhhbmRvZmZzID0gY29uZmlnLmhhbmRvZmZzID8/IFtdO1xuICAgICAgICB0aGlzLm1vZGVsID0gY29uZmlnLm1vZGVsID8/ICcnO1xuICAgICAgICB0aGlzLm1vZGVsU2V0dGluZ3MgPSBjb25maWcubW9kZWxTZXR0aW5ncyA/PyB7fTtcbiAgICAgICAgdGhpcy50b29scyA9IGNvbmZpZy50b29scyA/PyBbXTtcbiAgICAgICAgdGhpcy5tY3BTZXJ2ZXJzID0gY29uZmlnLm1jcFNlcnZlcnMgPz8gW107XG4gICAgICAgIHRoaXMuaW5wdXRHdWFyZHJhaWxzID0gY29uZmlnLmlucHV0R3VhcmRyYWlscyA/PyBbXTtcbiAgICAgICAgdGhpcy5vdXRwdXRHdWFyZHJhaWxzID0gY29uZmlnLm91dHB1dEd1YXJkcmFpbHMgPz8gW107XG4gICAgICAgIGlmIChjb25maWcub3V0cHV0VHlwZSkge1xuICAgICAgICAgICAgdGhpcy5vdXRwdXRUeXBlID0gY29uZmlnLm91dHB1dFR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b29sVXNlQmVoYXZpb3IgPSBjb25maWcudG9vbFVzZUJlaGF2aW9yID8/ICdydW5fbGxtX2FnYWluJztcbiAgICAgICAgdGhpcy5yZXNldFRvb2xDaG9pY2UgPSBjb25maWcucmVzZXRUb29sQ2hvaWNlID8/IHRydWU7XG4gICAgICAgIC8vIC0tLSBSdW50aW1lIHdhcm5pbmcgZm9yIGhhbmRvZmYgb3V0cHV0IHR5cGUgY29tcGF0aWJpbGl0eSAtLS1cbiAgICAgICAgaWYgKGNvbmZpZy5oYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgICAgIGNvbmZpZy5oYW5kb2ZmT3V0cHV0VHlwZVdhcm5pbmdFbmFibGVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5oYW5kb2ZmcyAmJiB0aGlzLm91dHB1dFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXRUeXBlcyA9IG5ldyBTZXQoW0pTT04uc3RyaW5naWZ5KHRoaXMub3V0cHV0VHlwZSldKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGggb2YgdGhpcy5oYW5kb2Zmcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJ291dHB1dFR5cGUnIGluIGggJiYgaC5vdXRwdXRUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRUeXBlcy5hZGQoSlNPTi5zdHJpbmdpZnkoaC5vdXRwdXRUeXBlKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoJ2FnZW50JyBpbiBoICYmIGguYWdlbnQub3V0cHV0VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VHlwZXMuYWRkKEpTT04uc3RyaW5naWZ5KGguYWdlbnQub3V0cHV0VHlwZSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvdXRwdXRUeXBlcy5zaXplID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBsb2dnZXIud2FybihgW0FnZW50XSBXYXJuaW5nOiBIYW5kb2ZmIGFnZW50cyBoYXZlIGRpZmZlcmVudCBvdXRwdXQgdHlwZXM6ICR7QXJyYXkuZnJvbShvdXRwdXRUeXBlcykuam9pbignLCAnKX0uIFlvdSBjYW4gbWFrZSBpdCB0eXBlLXNhZmUgYnkgdXNpbmcgQWdlbnQuY3JlYXRlKHsgLi4uIH0pIG1ldGhvZCBpbnN0ZWFkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBPdXB1dCBzY2hlbWEgbmFtZVxuICAgICAqL1xuICAgIGdldCBvdXRwdXRTY2hlbWFOYW1lKCkge1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRUeXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgIHJldHVybiAndGV4dCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNab2RPYmplY3QodGhpcy5vdXRwdXRUeXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuICdab2RPdXRwdXQnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB0aGlzLm91dHB1dFR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vdXRwdXRUeXBlLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIG91dHB1dCB0eXBlOiAke3RoaXMub3V0cHV0VHlwZX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFrZXMgYSBjb3B5IG9mIHRoZSBhZ2VudCwgd2l0aCB0aGUgZ2l2ZW4gYXJndW1lbnRzIGNoYW5nZWQuIEZvciBleGFtcGxlLCB5b3UgY291bGQgZG86XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiBjb25zdCBuZXdBZ2VudCA9IGFnZW50LmNsb25lKHsgaW5zdHJ1Y3Rpb25zOiAnTmV3IGluc3RydWN0aW9ucycgfSlcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb25maWcgLSBBIHBhcnRpYWwgY29uZmlndXJhdGlvbiB0byBjaGFuZ2UuXG4gICAgICogQHJldHVybnMgQSBuZXcgYWdlbnQgd2l0aCB0aGUgZ2l2ZW4gY2hhbmdlcy5cbiAgICAgKi9cbiAgICBjbG9uZShjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZ2VudCh7XG4gICAgICAgICAgICAuLi50aGlzLFxuICAgICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIHRoaXMgYWdlbnQgaW50byBhIHRvb2wsIGNhbGxhYmxlIGJ5IG90aGVyIGFnZW50cy5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgZGlmZmVyZW50IGZyb20gaGFuZG9mZnMgaW4gdHdvIHdheXM6XG4gICAgICogMS4gSW4gaGFuZG9mZnMsIHRoZSBuZXcgYWdlbnQgcmVjZWl2ZXMgdGhlIGNvbnZlcnNhdGlvbiBoaXN0b3J5LiBJbiB0aGlzIHRvb2wsIHRoZSBuZXcgYWdlbnRcbiAgICAgKiAgICByZWNlaXZlcyBnZW5lcmF0ZWQgaW5wdXQuXG4gICAgICogMi4gSW4gaGFuZG9mZnMsIHRoZSBuZXcgYWdlbnQgdGFrZXMgb3ZlciB0aGUgY29udmVyc2F0aW9uLiBJbiB0aGlzIHRvb2wsIHRoZSBuZXcgYWdlbnQgaXNcbiAgICAgKiAgICBjYWxsZWQgYXMgYSB0b29sLCBhbmQgdGhlIGNvbnZlcnNhdGlvbiBpcyBjb250aW51ZWQgYnkgdGhlIG9yaWdpbmFsIGFnZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25zIGZvciB0aGUgdG9vbC5cbiAgICAgKiBAcmV0dXJucyBBIHRvb2wgdGhhdCBydW5zIHRoZSBhZ2VudCBhbmQgcmV0dXJucyB0aGUgb3V0cHV0IHRleHQuXG4gICAgICovXG4gICAgYXNUb29sKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgeyB0b29sTmFtZSwgdG9vbERlc2NyaXB0aW9uLCBjdXN0b21PdXRwdXRFeHRyYWN0b3IgfSA9IG9wdGlvbnM7XG4gICAgICAgIHJldHVybiB0b29sKHtcbiAgICAgICAgICAgIG5hbWU6IHRvb2xOYW1lID8/IHRvRnVuY3Rpb25Ub29sTmFtZSh0aGlzLm5hbWUpLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IHRvb2xEZXNjcmlwdGlvbiA/PyAnJyxcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBbJ2lucHV0J10sXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IGZhbHNlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0cmljdDogdHJ1ZSxcbiAgICAgICAgICAgIGV4ZWN1dGU6IGFzeW5jIChkYXRhLCBjb250ZXh0KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0FnZW50VG9vbElucHV0KGRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoJ0FnZW50IHRvb2wgY2FsbGVkIHdpdGggaW52YWxpZCBpbnB1dCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBydW5uZXIgPSBuZXcgUnVubmVyKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcnVubmVyLnJ1bih0aGlzLCBkYXRhLmlucHV0LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQ/LmNvbnRleHQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXN0b21PdXRwdXRFeHRyYWN0b3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1c3RvbU91dHB1dEV4dHJhY3RvcihyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0T3V0cHV0VGV4dChyZXN1bHQucmF3UmVzcG9uc2VzW3Jlc3VsdC5yYXdSZXNwb25zZXMubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHN5c3RlbSBwcm9tcHQgZm9yIHRoZSBhZ2VudC5cbiAgICAgKlxuICAgICAqIElmIHRoZSBhZ2VudCBoYXMgYSBmdW5jdGlvbiBhcyBpdHMgaW5zdHJ1Y3Rpb25zLCB0aGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlXG4gICAgICogcnVuQ29udGV4dCBhbmQgdGhlIGFnZW50IGluc3RhbmNlLlxuICAgICAqL1xuICAgIGFzeW5jIGdldFN5c3RlbVByb21wdChydW5Db250ZXh0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5pbnN0cnVjdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmluc3RydWN0aW9ucyhydW5Db250ZXh0LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0cnVjdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIGF2YWlsYWJsZSB0b29scyBmcm9tIHRoZSBNQ1Agc2VydmVycy5cbiAgICAgKiBAcmV0dXJucyB0aGUgTUNQIHBvd2VyZWQgdG9vbHNcbiAgICAgKi9cbiAgICBhc3luYyBnZXRNY3BUb29scygpIHtcbiAgICAgICAgaWYgKHRoaXMubWNwU2VydmVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0QWxsTWNwVG9vbHModGhpcy5tY3BTZXJ2ZXJzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFMbCBhZ2VudCB0b29scywgaW5jbHVkaW5nIHRoZSBNQ1BsIGFuZCBmdW5jdGlvbiB0b29scy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGFsbCBjb25maWd1cmVkIHRvb2xzXG4gICAgICovXG4gICAgYXN5bmMgZ2V0QWxsVG9vbHMoKSB7XG4gICAgICAgIHJldHVybiBbLi4uKGF3YWl0IHRoaXMuZ2V0TWNwVG9vbHMoKSksIC4uLnRoaXMudG9vbHNdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzZXMgdGhlIGZpbmFsIG91dHB1dCBvZiB0aGUgYWdlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3V0cHV0IC0gVGhlIG91dHB1dCBvZiB0aGUgYWdlbnQuXG4gICAgICogQHJldHVybnMgVGhlIHBhcnNlZCBvdXQuXG4gICAgICovXG4gICAgcHJvY2Vzc0ZpbmFsT3V0cHV0KG91dHB1dCkge1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRUeXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm91dHB1dFR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKG91dHB1dCk7XG4gICAgICAgICAgICBpZiAoaXNab2RPYmplY3QodGhpcy5vdXRwdXRUeXBlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm91dHB1dFR5cGUucGFyc2UocGFyc2VkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIG91dHB1dCB0eXBlOiAke3RoaXMub3V0cHV0VHlwZX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIGFnZW50LCB3aGljaCBpcyBzZXJpYWxpemFibGUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIEpTT04gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGFnZW50J3MgbmFtZS5cbiAgICAgKi9cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgIH07XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWdlbnQubWpzLm1hcCIsImltcG9ydCB7IGFkZFRyYWNlUHJvY2Vzc29yIH0gZnJvbSBcIi4vdHJhY2luZy9pbmRleC5tanNcIjtcbmltcG9ydCB7IGRlZmF1bHRQcm9jZXNzb3IgfSBmcm9tIFwiLi90cmFjaW5nL3Byb2Nlc3Nvci5tanNcIjtcbmV4cG9ydCB7IFJ1bnRpbWVFdmVudEVtaXR0ZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5leHBvcnQgeyBBZ2VudCwgfSBmcm9tIFwiLi9hZ2VudC5tanNcIjtcbmV4cG9ydCB7IEFnZW50c0Vycm9yLCBHdWFyZHJhaWxFeGVjdXRpb25FcnJvciwgSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCwgTWF4VHVybnNFeGNlZWRlZEVycm9yLCBNb2RlbEJlaGF2aW9yRXJyb3IsIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBUb29sQ2FsbEVycm9yLCBVc2VyRXJyb3IsIFN5c3RlbUVycm9yLCB9IGZyb20gXCIuL2Vycm9ycy5tanNcIjtcbmV4cG9ydCB7IFJ1bkFnZW50VXBkYXRlZFN0cmVhbUV2ZW50LCBSdW5SYXdNb2RlbFN0cmVhbUV2ZW50LCBSdW5JdGVtU3RyZWFtRXZlbnQsIH0gZnJvbSBcIi4vZXZlbnRzLm1qc1wiO1xuZXhwb3J0IHsgZGVmaW5lT3V0cHV0R3VhcmRyYWlsLCB9IGZyb20gXCIuL2d1YXJkcmFpbC5tanNcIjtcbmV4cG9ydCB7IGdldEhhbmRvZmYsIGdldFRyYW5zZmVyTWVzc2FnZSwgSGFuZG9mZiwgaGFuZG9mZiwgfSBmcm9tIFwiLi9oYW5kb2ZmLm1qc1wiO1xuZXhwb3J0IHsgYXNzaXN0YW50LCBzeXN0ZW0sIHVzZXIgfSBmcm9tIFwiLi9oZWxwZXJzL21lc3NhZ2UubWpzXCI7XG5leHBvcnQgeyBleHRyYWN0QWxsVGV4dE91dHB1dCwgUnVuSGFuZG9mZkNhbGxJdGVtLCBSdW5NZXNzYWdlT3V0cHV0SXRlbSwgUnVuUmVhc29uaW5nSXRlbSwgUnVuVG9vbEFwcHJvdmFsSXRlbSwgUnVuVG9vbENhbGxJdGVtLCBSdW5Ub29sQ2FsbE91dHB1dEl0ZW0sIH0gZnJvbSBcIi4vaXRlbXMubWpzXCI7XG5leHBvcnQgeyBBZ2VudEhvb2tzIH0gZnJvbSBcIi4vbGlmZWN5Y2xlLm1qc1wiO1xuZXhwb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuZXhwb3J0IHsgZ2V0QWxsTWNwVG9vbHMsIGludmFsaWRhdGVTZXJ2ZXJUb29sc0NhY2hlLCBNQ1BTZXJ2ZXJTdGRpbywgTUNQU2VydmVyU3RyZWFtYWJsZUh0dHAsIH0gZnJvbSBcIi4vbWNwLm1qc1wiO1xuZXhwb3J0IHsgc2V0RGVmYXVsdE1vZGVsUHJvdmlkZXIgfSBmcm9tIFwiLi9wcm92aWRlcnMubWpzXCI7XG5leHBvcnQgeyBSdW5SZXN1bHQsIFN0cmVhbWVkUnVuUmVzdWx0IH0gZnJvbSBcIi4vcmVzdWx0Lm1qc1wiO1xuZXhwb3J0IHsgcnVuLCBSdW5uZXIsIH0gZnJvbSBcIi4vcnVuLm1qc1wiO1xuZXhwb3J0IHsgUnVuQ29udGV4dCB9IGZyb20gXCIuL3J1bkNvbnRleHQubWpzXCI7XG5leHBvcnQgeyBSdW5TdGF0ZSB9IGZyb20gXCIuL3J1blN0YXRlLm1qc1wiO1xuZXhwb3J0IHsgY29tcHV0ZXJUb29sLCBob3N0ZWRNY3BUb29sLCB0b29sLCB9IGZyb20gXCIuL3Rvb2wubWpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90cmFjaW5nL2luZGV4Lm1qc1wiO1xuZXhwb3J0IHsgZ2V0R2xvYmFsVHJhY2VQcm92aWRlciwgVHJhY2VQcm92aWRlciB9IGZyb20gXCIuL3RyYWNpbmcvcHJvdmlkZXIubWpzXCI7XG5leHBvcnQgeyBVc2FnZSB9IGZyb20gXCIuL3VzYWdlLm1qc1wiO1xuZXhwb3J0ICogYXMgcHJvdG9jb2wgZnJvbSBcIi4vdHlwZXMvcHJvdG9jb2wubWpzXCI7XG4vKipcbiAqIEFkZCB0aGUgZGVmYXVsdCBwcm9jZXNzb3IsIHdoaWNoIGV4cG9ydHMgdHJhY2VzIGFuZCBzcGFucyB0byB0aGUgYmFja2VuZCBpbiBiYXRjaGVzLiBZb3UgY2FuXG4gKiBjaGFuZ2UgdGhlIGRlZmF1bHQgYmVoYXZpb3IgYnkgZWl0aGVyOlxuICogMS4gY2FsbGluZyBhZGRUcmFjZVByb2Nlc3Nvciwgd2hpY2ggYWRkcyBhZGRpdGlvbmFsIHByb2Nlc3NvcnMsIG9yXG4gKiAyLiBjYWxsaW5nIHNldFRyYWNlUHJvY2Vzc29ycywgd2hpY2ggc2V0cyB0aGUgcHJvY2Vzc29ycyBhbmQgZGlzY2FyZHMgdGhlIGRlZmF1bHQgb25lXG4gKi9cbmFkZFRyYWNlUHJvY2Vzc29yKGRlZmF1bHRQcm9jZXNzb3IoKSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIiwiaW1wb3J0IHsgQWdlbnQsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgYWdlbnQgaW5zdGFuY2UgdGhhdCBpcyBtZWFudCB0byBiZSB1c2VkIHdpdGhpbiBhIGBSZWFsdGltZVNlc3Npb25gIHRvIGJ1aWxkXG4gKiB2b2ljZSBhZ2VudHMuIER1ZSB0byB0aGUgbmF0dXJlIG9mIHRoaXMgYWdlbnQsIHNvbWUgY29uZmlndXJhdGlvbiBvcHRpb25zIGFyZSBub3Qgc3VwcG9ydGVkXG4gKiB0aGF0IGFyZSBzdXBwb3J0ZWQgYnkgcmVndWxhciBgQWdlbnRgIGluc3RhbmNlcy4gRm9yIGV4YW1wbGU6XG4gKiAtIGBtb2RlbGAgY2hvaWNlIGlzIG5vdCBzdXBwb3J0ZWQgYXMgYWxsIFJlYWx0aW1lQWdlbnRzIHdpbGwgYmUgaGFuZGxlZCBieSB0aGUgc2FtZSBtb2RlbCB3aXRoaW5cbiAqICAgYSBgUmVhbHRpbWVTZXNzaW9uYFxuICogLSBgbW9kZWxTZXR0aW5nc2AgaXMgbm90IHN1cHBvcnRlZCBhcyBhbGwgUmVhbHRpbWVBZ2VudHMgd2lsbCBiZSBoYW5kbGVkIGJ5IHRoZSBzYW1lIG1vZGVsIHdpdGhpblxuICogICBhIGBSZWFsdGltZVNlc3Npb25gXG4gKiAtIGBvdXRwdXRUeXBlYCBpcyBub3Qgc3VwcG9ydGVkIGFzIFJlYWx0aW1lQWdlbnRzIGRvIG5vdCBzdXBwb3J0IHN0cnVjdHVyZWQgb3V0cHV0c1xuICogLSBgdG9vbFVzZUJlaGF2aW9yYCBpcyBub3Qgc3VwcG9ydGVkIGFzIGFsbCBSZWFsdGltZUFnZW50cyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIHNhbWUgbW9kZWwgd2l0aGluXG4gKiAgIGEgYFJlYWx0aW1lU2Vzc2lvbmBcbiAqIC0gYHZvaWNlYCBjYW4gYmUgY29uZmlndXJlZCBvbiBhbiBgQWdlbnRgIGxldmVsIGhvd2V2ZXIgaXQgY2Fubm90IGJlIGNoYW5nZWQgYWZ0ZXIgdGhlIGZpcnN0XG4gKiAgICBhZ2VudCB3aXRoaW4gYSBgUmVhbHRpbWVTZXNzaW9uYCBzcG9rZVxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogY29uc3QgYWdlbnQgPSBuZXcgUmVhbHRpbWVBZ2VudCh7XG4gKiAgIG5hbWU6ICdteS1hZ2VudCcsXG4gKiAgIGluc3RydWN0aW9uczogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGNhbiBhbnN3ZXIgcXVlc3Rpb25zIGFuZCBoZWxwIHdpdGggdGFza3MuJyxcbiAqIH0pXG4gKlxuICogY29uc3Qgc2Vzc2lvbiA9IG5ldyBSZWFsdGltZVNlc3Npb24oYWdlbnQpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSZWFsdGltZUFnZW50IGV4dGVuZHMgQWdlbnQge1xuICAgIC8qKlxuICAgICAqIFRoZSB2b2ljZSBpbnRlbmRlZCB0byBiZSB1c2VkIGJ5IHRoZSBhZ2VudC4gSWYgYW5vdGhlciBhZ2VudCBhbHJlYWR5IHNwb2tlIGR1cmluZyB0aGVcbiAgICAgKiBSZWFsdGltZVNlc3Npb24sIGNoYW5naW5nIHRoZSB2b2ljZSBkdXJpbmcgYSBoYW5kb2ZmIHdpbGwgZmFpbC5cbiAgICAgKi9cbiAgICB2b2ljZTtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgc3VwZXIoY29uZmlnKTtcbiAgICAgICAgdGhpcy52b2ljZSA9IGNvbmZpZy52b2ljZSA/PyAnYXNoJztcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFsdGltZUFnZW50Lm1qcy5tYXAiLCJpbXBvcnQgeyBkZWZpbmVPdXRwdXRHdWFyZHJhaWwsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncyhzZXR0aW5ncykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGRlYm91bmNlVGV4dExlbmd0aDogc2V0dGluZ3MuZGVib3VuY2VUZXh0TGVuZ3RoID8/IDEwMCxcbiAgICB9O1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZVJlYWx0aW1lT3V0cHV0R3VhcmRyYWlsKHsgcG9saWN5SGludDogcG9saWN5SGludElucHV0LCAuLi5vcHRpb25zIH0pIHtcbiAgICBjb25zdCBiYXNlR3VhcmRyYWlsID0gZGVmaW5lT3V0cHV0R3VhcmRyYWlsKG9wdGlvbnMpO1xuICAgIGNvbnN0IHBvbGljeUhpbnQgPSBwb2xpY3lIaW50SW5wdXQgPz8gYmFzZUd1YXJkcmFpbC5uYW1lO1xuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmJhc2VHdWFyZHJhaWwsXG4gICAgICAgIHBvbGljeUhpbnQsXG4gICAgICAgIHJ1bjogYXN5bmMgKGFyZ3MpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGJhc2VHdWFyZHJhaWwucnVuKGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5yZXN1bHQsXG4gICAgICAgICAgICAgICAgZ3VhcmRyYWlsOiB7IC4uLnJlc3VsdC5ndWFyZHJhaWwsIHBvbGljeUhpbnQgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgfTtcbn1cbi8qKlxuICogR2VuZXJhdGVzIGEgbWVzc2FnZSB0aGF0IGluZm9ybXMgdGhlIG1vZGVsIGFib3V0IHdoeSB0aGUgZ3VhcmRyYWlsIHdhcyB0cmlnZ2VyZWQgYW5kIHRvXG4gKiBjb3JyZWN0IHRoZSBiZWhhdmlvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlKHJlc3VsdCkge1xuICAgIHJldHVybiBgXG7imqDvuI8gWW91ciBsYXN0IGFuc3dlciB3YXMgYmxvY2tlZC4gXG5GYWlsZWQgR3VhcmRyYWlsIFJlYXNvbjogJHtyZXN1bHQuZ3VhcmRyYWlsLnBvbGljeUhpbnR9LiBcbkZhaWx1cmUgRGV0YWlsczogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQub3V0cHV0Lm91dHB1dEluZm8gPz8ge30pfS4gXG5QbGVhc2UgcmVzcG9uZCBhZ2FpbiBmb2xsb3dpbmcgcG9saWN5LiBBcG9sb2dpemUgZm9yIG5vdCBiZWluZyBhYmxlIHRvIGFuc3dlciB0aGUgcXVlc3Rpb24gKHdoaWxlIGF2b2lkaW5nIHRoZSBzcGVjaWZpYyByZWFzb24pIGFuZCBkaXZlcnQgZGlzY3Vzc2lvbiBiYWNrIHRvIGFuIGFwcHJvdmVkIHRvcGljIGltbWVkaWF0ZWx5IGFuZCBub3QgaW52aXRlIG1vcmUgZGlzY3Vzc2lvbi5cbmAudHJpbSgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3VhcmRyYWlsLm1qcy5tYXAiLCJpbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmNvbnN0IGxvZ2dlciA9IGdldExvZ2dlcignb3BlbmFpLWFnZW50czpyZWFsdGltZScpO1xuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bG9nZ2VyLm1qcy5tYXAiLCJpbXBvcnQgeyB6IH0gZnJvbSAnQG9wZW5haS96b2QvdjMnO1xuZXhwb3J0IGNvbnN0IGJhc2VJdGVtU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEgPSB6LmRpc2NyaW1pbmF0ZWRVbmlvbigncm9sZScsIFtcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCdzeXN0ZW0nKSxcbiAgICAgICAgY29udGVudDogei5hcnJheSh6Lm9iamVjdCh7IHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfdGV4dCcpLCB0ZXh0OiB6LnN0cmluZygpIH0pKSxcbiAgICB9KSxcbiAgICB6Lm9iamVjdCh7XG4gICAgICAgIGl0ZW1JZDogei5zdHJpbmcoKSxcbiAgICAgICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmxpdGVyYWwoJ21lc3NhZ2UnKSxcbiAgICAgICAgcm9sZTogei5saXRlcmFsKCd1c2VyJyksXG4gICAgICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJ10pLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCdpbnB1dF90ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkub3Ioei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpbycpLFxuICAgICAgICAgICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgICAgICB9KSkpLFxuICAgIH0pLFxuICAgIHoub2JqZWN0KHtcbiAgICAgICAgaXRlbUlkOiB6LnN0cmluZygpLFxuICAgICAgICBwcmV2aW91c0l0ZW1JZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgnbWVzc2FnZScpLFxuICAgICAgICByb2xlOiB6LmxpdGVyYWwoJ2Fzc2lzdGFudCcpLFxuICAgICAgICBzdGF0dXM6IHouZW51bShbJ2luX3Byb2dyZXNzJywgJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJ10pLFxuICAgICAgICBjb250ZW50OiB6LmFycmF5KHoub2JqZWN0KHsgdHlwZTogei5saXRlcmFsKCd0ZXh0JyksIHRleHQ6IHouc3RyaW5nKCkgfSkub3Ioei5vYmplY3Qoe1xuICAgICAgICAgICAgdHlwZTogei5saXRlcmFsKCdhdWRpbycpLFxuICAgICAgICAgICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIH0pKSksXG4gICAgfSksXG5dKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZVRvb2xDYWxsSXRlbSA9IHoub2JqZWN0KHtcbiAgICBpdGVtSWQ6IHouc3RyaW5nKCksXG4gICAgcHJldmlvdXNJdGVtSWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHoubGl0ZXJhbCgnZnVuY3Rpb25fY2FsbCcpLFxuICAgIHN0YXR1czogei5lbnVtKFsnaW5fcHJvZ3Jlc3MnLCAnY29tcGxldGVkJ10pLFxuICAgIGFyZ3VtZW50czogei5zdHJpbmcoKSxcbiAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgIG91dHB1dDogei5zdHJpbmcoKS5udWxsYWJsZSgpLFxufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pdGVtcy5tanMubWFwIiwiaW1wb3J0IHsgeiB9IGZyb20gJ0BvcGVuYWkvem9kL3YzJztcbi8vIEV2ZW50IHNjaGVtYXMgbWlycm9yaW5nIHRoZSBzdHJ1Y3R1cmVzIGRlZmluZWQgaW4gdGhlIE9wZW5BSSBTREsgdHlwaW5ncy5cbi8vIE1vc3QgZmllbGRzIGZyb20gdGhlIGludGVyZmFjZXMgaW4gYHJlYWx0aW1lLmQudHNgIGFyZSBjYXB0dXJlZCBoZXJlIHRvXG4vLyBwcm92aWRlIGJldHRlciBydW50aW1lIHZhbGlkYXRpb24gd2hlbiBwYXJzaW5nIGV2ZW50cyBmcm9tIHRoZSBzZXJ2ZXIuXG5leHBvcnQgY29uc3QgcmVhbHRpbWVSZXNwb25zZSA9IHoub2JqZWN0KHtcbiAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgY29udmVyc2F0aW9uX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBtYXhfb3V0cHV0X3Rva2Vuczogei5udW1iZXIoKS5vcih6LmxpdGVyYWwoJ2luZicpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgbWV0YWRhdGE6IHoucmVjb3JkKHouc3RyaW5nKCksIHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBtb2RhbGl0aWVzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBvYmplY3Q6IHoubGl0ZXJhbCgncmVhbHRpbWUucmVzcG9uc2UnKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgb3V0cHV0OiB6LmFycmF5KHouYW55KCkpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBvdXRwdXRfYXVkaW9fZm9ybWF0OiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBzdGF0dXM6IHpcbiAgICAgICAgLmVudW0oWydjb21wbGV0ZWQnLCAnaW5jb21wbGV0ZScsICdmYWlsZWQnLCAnY2FuY2VsbGVkJywgJ2luX3Byb2dyZXNzJ10pXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHN0YXR1c19kZXRhaWxzOiB6LnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgdXNhZ2U6IHpcbiAgICAgICAgLm9iamVjdCh7XG4gICAgICAgIGlucHV0X3Rva2Vuczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICBpbnB1dF90b2tlbnNfZGV0YWlsczogei5yZWNvcmQoei5zdHJpbmcoKSwgei5hbnkoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgICAgICBvdXRwdXRfdG9rZW5zOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIG91dHB1dF90b2tlbnNfZGV0YWlsczogelxuICAgICAgICAgICAgLnJlY29yZCh6LnN0cmluZygpLCB6LmFueSgpKVxuICAgICAgICAgICAgLm9wdGlvbmFsKClcbiAgICAgICAgICAgIC5udWxsYWJsZSgpLFxuICAgIH0pXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIHZvaWNlOiB6LnN0cmluZygpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbn0pO1xuLy8gQmFzaWMgY29udGVudCBzY2hlbWEgdXNlZCBieSBDb252ZXJzYXRpb25JdGVtLlxuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1Db250ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgYXVkaW86IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHRleHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxuICAgIHR5cGU6IHoudW5pb24oW1xuICAgICAgICB6LmxpdGVyYWwoJ2lucHV0X3RleHQnKSxcbiAgICAgICAgei5saXRlcmFsKCdpbnB1dF9hdWRpbycpLFxuICAgICAgICB6LmxpdGVyYWwoJ2l0ZW1fcmVmZXJlbmNlJyksXG4gICAgICAgIHoubGl0ZXJhbCgndGV4dCcpLFxuICAgICAgICB6LmxpdGVyYWwoJ2F1ZGlvJyksXG4gICAgXSksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIGlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgY2FsbF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIGNvbnRlbnQ6IHouYXJyYXkoY29udmVyc2F0aW9uSXRlbUNvbnRlbnRTY2hlbWEpLm9wdGlvbmFsKCksXG4gICAgbmFtZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIG9iamVjdDogei5saXRlcmFsKCdyZWFsdGltZS5pdGVtJykub3B0aW9uYWwoKSxcbiAgICBvdXRwdXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByb2xlOiB6LmVudW0oWyd1c2VyJywgJ2Fzc2lzdGFudCcsICdzeXN0ZW0nXSkub3B0aW9uYWwoKSxcbiAgICBzdGF0dXM6IHouZW51bShbJ2NvbXBsZXRlZCcsICdpbmNvbXBsZXRlJywgJ2luX3Byb2dyZXNzJ10pLm9wdGlvbmFsKCksXG4gICAgdHlwZTogei5lbnVtKFsnbWVzc2FnZScsICdmdW5jdGlvbl9jYWxsJywgJ2Z1bmN0aW9uX2NhbGxfb3V0cHV0J10pLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25DcmVhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnZlcnNhdGlvbjogei5vYmplY3Qoe1xuICAgICAgICBpZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICBvYmplY3Q6IHoubGl0ZXJhbCgncmVhbHRpbWUuY29udmVyc2F0aW9uJykub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbiAgICBwcmV2aW91c19pdGVtX2lkOiB6LnN0cmluZygpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5kZWxldGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkNvbXBsZXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5jb21wbGV0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKSxcbiAgICBsb2dwcm9iczogei5hcnJheSh6LmFueSgpKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25EZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0uaW5wdXRfYXVkaW9fdHJhbnNjcmlwdGlvbi5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIGRlbHRhOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgbG9ncHJvYnM6IHouYXJyYXkoei5hbnkoKSkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbUlucHV0QXVkaW9UcmFuc2NyaXB0aW9uRmFpbGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmZhaWxlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBlcnJvcjogei5vYmplY3Qoe1xuICAgICAgICBjb2RlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIG1lc3NhZ2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgcGFyYW06IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHlwZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIH0pLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVJldHJpZXZlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbTogY29udmVyc2F0aW9uSXRlbVNjaGVtYSxcbn0pO1xuZXhwb3J0IGNvbnN0IGNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnRydW5jYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fZW5kX21zOiB6Lm51bWJlcigpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtQ3JlYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnKSxcbiAgICBpdGVtOiBjb252ZXJzYXRpb25JdGVtU2NoZW1hLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgcHJldmlvdXNfaXRlbV9pZDogei5zdHJpbmcoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtRGVsZXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS5kZWxldGUnKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlJyksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgY29udmVyc2F0aW9uSXRlbVRydW5jYXRlRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZScpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fZW5kX21zOiB6Lm51bWJlcigpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGVycm9yRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdlcnJvcicpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgZXJyb3I6IHouYW55KCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY2xlYXJlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlckFwcGVuZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLmFwcGVuZCcpLFxuICAgIGF1ZGlvOiB6LnN0cmluZygpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5jbGVhcicpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyQ29tbWl0RXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdpbnB1dF9hdWRpb19idWZmZXIuY29tbWl0JyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IGlucHV0QXVkaW9CdWZmZXJDb21taXR0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5jb21taXR0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIHByZXZpb3VzX2l0ZW1faWQ6IHouc3RyaW5nKCkubnVsbGFibGUoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3QgaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0YXJ0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ2lucHV0X2F1ZGlvX2J1ZmZlci5zcGVlY2hfc3RhcnRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgYXVkaW9fc3RhcnRfbXM6IHoubnVtYmVyKCksXG59KTtcbmV4cG9ydCBjb25zdCBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RvcHBlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnaW5wdXRfYXVkaW9fYnVmZmVyLnNwZWVjaF9zdG9wcGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBhdWRpb19lbmRfbXM6IHoubnVtYmVyKCksXG59KTtcbmV4cG9ydCBjb25zdCBvdXRwdXRBdWRpb0J1ZmZlclN0YXJ0ZWRFdmVudFNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpb19idWZmZXIuc3RhcnRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCBvdXRwdXRBdWRpb0J1ZmZlclN0b3BwZWRFdmVudFNjaGVtYSA9IHpcbiAgICAub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpb19idWZmZXIuc3RvcHBlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCBvdXRwdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ291dHB1dF9hdWRpb19idWZmZXIuY2xlYXJlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmF0ZUxpbWl0c1VwZGF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3JhdGVfbGltaXRzLnVwZGF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICByYXRlX2xpbWl0czogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIGxpbWl0OiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgIG5hbWU6IHouZW51bShbJ3JlcXVlc3RzJywgJ3Rva2VucyddKS5vcHRpb25hbCgpLFxuICAgICAgICByZW1haW5pbmc6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgcmVzZXRfc2Vjb25kczogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgIH0pKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQXVkaW9EZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuYXVkaW8uZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb0RvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmF1ZGlvLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VBdWRpb1RyYW5zY3JpcHREZWx0YUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuYXVkaW9fdHJhbnNjcmlwdC5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmF1ZGlvX3RyYW5zY3JpcHQuZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY29udGVudF9pbmRleDogei5udW1iZXIoKSxcbiAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ29udGVudFBhcnRBZGRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY29udGVudF9wYXJ0LmFkZGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbiAgICBwYXJ0OiB6Lm9iamVjdCh7XG4gICAgICAgIGF1ZGlvOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHRleHQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdHJhbnNjcmlwdDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0eXBlOiB6LmVudW0oWyd0ZXh0JywgJ2F1ZGlvJ10pLm9wdGlvbmFsKCksXG4gICAgfSksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNvbnRlbnRQYXJ0RG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY29udGVudF9wYXJ0LmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxuICAgIHBhcnQ6IHoub2JqZWN0KHtcbiAgICAgICAgYXVkaW86IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgdGV4dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICB0cmFuc2NyaXB0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIHR5cGU6IHouZW51bShbJ3RleHQnLCAnYXVkaW8nXSkub3B0aW9uYWwoKSxcbiAgICB9KSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHJlc3BvbnNlOiByZWFsdGltZVJlc3BvbnNlLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgcmVzcG9uc2U6IHJlYWx0aW1lUmVzcG9uc2UsXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW1faWQ6IHouc3RyaW5nKCksXG4gICAgY2FsbF9pZDogei5zdHJpbmcoKSxcbiAgICBkZWx0YTogei5zdHJpbmcoKSxcbiAgICBvdXRwdXRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgcmVzcG9uc2VfaWQ6IHouc3RyaW5nKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLmZ1bmN0aW9uX2NhbGxfYXJndW1lbnRzLmRvbmUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNhbGxfaWQ6IHouc3RyaW5nKCksXG4gICAgYXJndW1lbnRzOiB6LnN0cmluZygpLFxuICAgIG91dHB1dF9pbmRleDogei5udW1iZXIoKSxcbiAgICByZXNwb25zZV9pZDogei5zdHJpbmcoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlT3V0cHV0SXRlbUFkZGVkRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VPdXRwdXRJdGVtRG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2Uub3V0cHV0X2l0ZW0uZG9uZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIGl0ZW06IGNvbnZlcnNhdGlvbkl0ZW1TY2hlbWEsXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VUZXh0RGVsdGFFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Jlc3BvbnNlLnRleHQuZGVsdGEnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBpdGVtX2lkOiB6LnN0cmluZygpLFxuICAgIGNvbnRlbnRfaW5kZXg6IHoubnVtYmVyKCksXG4gICAgZGVsdGE6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3QgcmVzcG9uc2VUZXh0RG9uZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UudGV4dC5kb25lJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgaXRlbV9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHRleHQ6IHouc3RyaW5nKCksXG4gICAgb3V0cHV0X2luZGV4OiB6Lm51bWJlcigpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLFxufSk7XG5leHBvcnQgY29uc3Qgc2Vzc2lvbkNyZWF0ZWRFdmVudFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICB0eXBlOiB6LmxpdGVyYWwoJ3Nlc3Npb24uY3JlYXRlZCcpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbmV4cG9ydCBjb25zdCBzZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2Vzc2lvbi51cGRhdGVkJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCksXG4gICAgc2Vzc2lvbjogei5hbnkoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHJlc3BvbnNlQ2FuY2VsRXZlbnRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdHlwZTogei5saXRlcmFsKCdyZXNwb25zZS5jYW5jZWwnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHJlc3BvbnNlX2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KTtcbmV4cG9ydCBjb25zdCByZXNwb25zZUNyZWF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgncmVzcG9uc2UuY3JlYXRlJyksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICByZXNwb25zZTogei5hbnkoKS5vcHRpb25hbCgpLFxufSk7XG5leHBvcnQgY29uc3Qgc2Vzc2lvblVwZGF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgnc2Vzc2lvbi51cGRhdGUnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgIHNlc3Npb246IHouYW55KCksXG59KTtcbmV4cG9ydCBjb25zdCB0cmFuc2NyaXB0aW9uU2Vzc2lvblVwZGF0ZUV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndHJhbnNjcmlwdGlvbl9zZXNzaW9uLnVwZGF0ZScpLFxuICAgIGV2ZW50X2lkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgc2Vzc2lvbjogei5hbnkoKSxcbn0pO1xuZXhwb3J0IGNvbnN0IHRyYW5zY3JpcHRpb25TZXNzaW9uVXBkYXRlZEV2ZW50U2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHR5cGU6IHoubGl0ZXJhbCgndHJhbnNjcmlwdGlvbl9zZXNzaW9uLnVwZGF0ZWQnKSxcbiAgICBldmVudF9pZDogei5zdHJpbmcoKSxcbiAgICBzZXNzaW9uOiB6LmFueSgpLFxufSk7XG4vKipcbiAqIFRoaXMgc2NoZW1hIGlzIHVzZWQgaWYgYW4gZXZlbnQgaXMgdW5rbm93biB0byB0aGUgY2xpZW50LiBUaGUgUmVhbHRpbWUgQVBJIG1pZ2h0IGludHJvZHVjZVxuICogbmV3IGV2ZW50cyBhdCBzb21lIHBvaW50IGFuZCB3ZSBzaG91bGQgaGFuZGxlIHRoZW0gZ3JhY2VmdWxseSBieSB0cmVhdGluZyB0aGVtIGFzIGdlbmVyaWMgZXZlbnRzXG4gKiBvbmx5IHJlcXVpcmluZyBhIHR5cGUgYW5kIGFuIG9wdGlvbmFsIGV2ZW50X2lkLlxuICovXG5leHBvcnQgY29uc3QgZ2VuZXJpY0V2ZW50U2NoZW1hID0gelxuICAgIC5vYmplY3Qoe1xuICAgIHR5cGU6IHouc3RyaW5nKCksXG4gICAgZXZlbnRfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZVNlcnZlckV2ZW50U2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgY29udmVyc2F0aW9uQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVkRXZlbnRTY2hlbWEsXG4gICAgY29udmVyc2F0aW9uSXRlbURlbGV0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25Db21wbGV0ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25EZWx0YUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkZhaWxlZEV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZWRFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVkRXZlbnRTY2hlbWEsXG4gICAgZXJyb3JFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQ2xlYXJlZEV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJDb21taXR0ZWRFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyU3BlZWNoU3RhcnRlZEV2ZW50U2NoZW1hLFxuICAgIGlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdG9wcGVkRXZlbnRTY2hlbWEsXG4gICAgb3V0cHV0QXVkaW9CdWZmZXJTdGFydGVkRXZlbnRTY2hlbWEsXG4gICAgb3V0cHV0QXVkaW9CdWZmZXJTdG9wcGVkRXZlbnRTY2hlbWEsXG4gICAgb3V0cHV0QXVkaW9CdWZmZXJDbGVhcmVkRXZlbnRTY2hlbWEsXG4gICAgcmF0ZUxpbWl0c1VwZGF0ZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvRGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQXVkaW9UcmFuc2NyaXB0RGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNvbnRlbnRQYXJ0QWRkZWRFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUNvbnRlbnRQYXJ0RG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlRG9uZUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlRnVuY3Rpb25DYWxsQXJndW1lbnRzRGVsdGFFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZU91dHB1dEl0ZW1BZGRlZEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlT3V0cHV0SXRlbURvbmVFdmVudFNjaGVtYSxcbiAgICByZXNwb25zZVRleHREZWx0YUV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlVGV4dERvbmVFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uQ3JlYXRlZEV2ZW50U2NoZW1hLFxuICAgIHNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEsXG4gICAgdHJhbnNjcmlwdGlvblNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEsXG5dKTtcbmV4cG9ydCBjb25zdCByZWFsdGltZUNsaWVudEV2ZW50U2NoZW1hID0gei5kaXNjcmltaW5hdGVkVW5pb24oJ3R5cGUnLCBbXG4gICAgY29udmVyc2F0aW9uSXRlbUNyZWF0ZUV2ZW50U2NoZW1hLFxuICAgIGNvbnZlcnNhdGlvbkl0ZW1EZWxldGVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtUmV0cmlldmVFdmVudFNjaGVtYSxcbiAgICBjb252ZXJzYXRpb25JdGVtVHJ1bmNhdGVFdmVudFNjaGVtYSxcbiAgICBpbnB1dEF1ZGlvQnVmZmVyQXBwZW5kRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNsZWFyRXZlbnRTY2hlbWEsXG4gICAgaW5wdXRBdWRpb0J1ZmZlckNvbW1pdEV2ZW50U2NoZW1hLFxuICAgIHJlc3BvbnNlQ2FuY2VsRXZlbnRTY2hlbWEsXG4gICAgcmVzcG9uc2VDcmVhdGVFdmVudFNjaGVtYSxcbiAgICBzZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEsXG4gICAgdHJhbnNjcmlwdGlvblNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSxcbl0pO1xuLyoqXG4gKiBQYXJzZXMgYSByZWFsdGltZSBldmVudCBmcm9tIHRoZSBzZXJ2ZXIuIElmIHRoZSBldmVudCBpcyB1bmtub3duIHRvIHRoZSBjbGllbnQsIGl0IHdpbGwgYmUgdHJlYXRlZCBhcyBhIGdlbmVyaWMgZXZlbnQuXG4gKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gcGFyc2UuXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIGV2ZW50IG9yIG51bGwgaWYgdGhlIGV2ZW50IGlzIHVua25vd24gdG8gdGhlIGNsaWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUmVhbHRpbWVFdmVudChldmVudCkge1xuICAgIGNvbnN0IHJhdyA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YS50b1N0cmluZygpKTtcbiAgICBjb25zdCBwYXJzZWQgPSByZWFsdGltZVNlcnZlckV2ZW50U2NoZW1hLnNhZmVQYXJzZShyYXcpO1xuICAgIGlmICghcGFyc2VkLnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc3QgZ2VuZXJpY1BhcnNlZCA9IGdlbmVyaWNFdmVudFNjaGVtYS5zYWZlUGFyc2UocmF3KTtcbiAgICAgICAgaWYgKGdlbmVyaWNQYXJzZWQuc3VjY2Vzcykge1xuICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogZ2VuZXJpY1BhcnNlZC5kYXRhLCBpc0dlbmVyaWM6IHRydWUgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBkYXRhOiBudWxsLCBpc0dlbmVyaWM6IHRydWUgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgZGF0YTogcGFyc2VkLmRhdGEsIGlzR2VuZXJpYzogZmFsc2UgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lRXZlbnRzLm1qcy5tYXAiLCJpbXBvcnQgeyBSdW50aW1lRXZlbnRFbWl0dGVyLCBVc2FnZSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IHsgcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYSwgcmVhbHRpbWVUb29sQ2FsbEl0ZW0sIH0gZnJvbSBcIi4vaXRlbXMubWpzXCI7XG5pbXBvcnQgbG9nZ2VyIGZyb20gXCIuL2xvZ2dlci5tanNcIjtcbmltcG9ydCB7IHBhcnNlUmVhbHRpbWVFdmVudCwgcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVFdmVudHMubWpzXCI7XG5pbXBvcnQgeyBhcnJheUJ1ZmZlclRvQmFzZTY0LCBkaWZmUmVhbHRpbWVIaXN0b3J5IH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvdXRpbHMnO1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBtb2RlbCB0aGF0IGlzIHVzZWQgZHVyaW5nIHRoZSBjb25uZWN0aW9uIGlmIG5vIG1vZGVsIGlzIHByb3ZpZGVkLlxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfTU9ERUwgPSAnZ3B0LTRvLXJlYWx0aW1lLXByZXZpZXcnO1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBzZXNzaW9uIGNvbmZpZyB0aGF0IGdldHMgc2VuZCBvdmVyIGR1cmluZyBzZXNzaW9uIGNvbm5lY3Rpb24gdW5sZXNzIG92ZXJyaWRlblxuICogYnkgdGhlIHVzZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRyA9IHtcbiAgICB2b2ljZTogJ2FzaCcsXG4gICAgbW9kYWxpdGllczogWyd0ZXh0JywgJ2F1ZGlvJ10sXG4gICAgaW5wdXRBdWRpb0Zvcm1hdDogJ3BjbTE2JyxcbiAgICBvdXRwdXRBdWRpb0Zvcm1hdDogJ3BjbTE2JyxcbiAgICBpbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbjoge1xuICAgICAgICBtb2RlbDogJ2dwdC00by1taW5pLXRyYW5zY3JpYmUnLFxuICAgIH0sXG4gICAgdHVybkRldGVjdGlvbjoge1xuICAgICAgICB0eXBlOiAnc2VtYW50aWNfdmFkJyxcbiAgICB9LFxufTtcbmV4cG9ydCBjbGFzcyBPcGVuQUlSZWFsdGltZUJhc2UgZXh0ZW5kcyBFdmVudEVtaXR0ZXJEZWxlZ2F0ZSB7XG4gICAgI21vZGVsO1xuICAgICNhcGlLZXk7XG4gICAgI3RyYWNpbmdDb25maWcgPSBudWxsO1xuICAgIGV2ZW50RW1pdHRlciA9IG5ldyBSdW50aW1lRXZlbnRFbWl0dGVyKCk7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuI21vZGVsID0gb3B0aW9ucy5tb2RlbCA/PyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9NT0RFTDtcbiAgICAgICAgdGhpcy4jYXBpS2V5ID0gb3B0aW9ucy5hcGlLZXk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IG1vZGVsIHRoYXQgaXMgYmVpbmcgdXNlZCBieSB0aGUgdHJhbnNwb3J0IGxheWVyLlxuICAgICAqL1xuICAgIGdldCBjdXJyZW50TW9kZWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtb2RlbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgbW9kZWwgdGhhdCBpcyBiZWluZyB1c2VkIGJ5IHRoZSB0cmFuc3BvcnQgbGF5ZXIuXG4gICAgICogKipOb3RlKio6IFRoZSBtb2RlbCBjYW5ub3QgYmUgY2hhbmdlZCBtaWQgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIHNldCBjdXJyZW50TW9kZWwobW9kZWwpIHtcbiAgICAgICAgdGhpcy4jbW9kZWwgPSBtb2RlbDtcbiAgICB9XG4gICAgYXN5bmMgX2dldEFwaUtleShvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGFwaUtleSA9IG9wdGlvbnMuYXBpS2V5ID8/IHRoaXMuI2FwaUtleTtcbiAgICAgICAgaWYgKHR5cGVvZiBhcGlLZXkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBhcGlLZXkoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXBpS2V5O1xuICAgIH1cbiAgICBfb25NZXNzYWdlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogcGFyc2VkLCBpc0dlbmVyaWMgfSA9IHBhcnNlUmVhbHRpbWVFdmVudChldmVudCk7XG4gICAgICAgIGlmIChwYXJzZWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXQoJyonLCBwYXJzZWQpO1xuICAgICAgICBpZiAoaXNHZW5lcmljKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgeyB0eXBlOiAnZXJyb3InLCBlcnJvcjogcGFyc2VkIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbWl0KHBhcnNlZC50eXBlLCBwYXJzZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3R1cm5fc3RhcnRlZCcsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVzcG9uc2Vfc3RhcnRlZCcsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJEYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnBhcnNlZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuZG9uZScpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gcmVzcG9uc2VEb25lRXZlbnRTY2hlbWEuc2FmZVBhcnNlKHBhcnNlZCk7XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgcmVzcG9uc2UgZG9uZSBldmVudCcsIHJlc3BvbnNlLmVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpbnB1dFRva2VucyA9IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/LmlucHV0X3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0VG9rZW5zID0gcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8ub3V0cHV0X3Rva2VucyA/PyAwO1xuICAgICAgICAgICAgY29uc3QgdG90YWxUb2tlbnMgPSBpbnB1dFRva2VucyArIG91dHB1dFRva2VucztcbiAgICAgICAgICAgIGNvbnN0IHVzYWdlID0gbmV3IFVzYWdlKHtcbiAgICAgICAgICAgICAgICBpbnB1dFRva2VucyxcbiAgICAgICAgICAgICAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/LmlucHV0X3Rva2Vuc19kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgIG91dHB1dFRva2VucyxcbiAgICAgICAgICAgICAgICBvdXRwdXRUb2tlbnNEZXRhaWxzOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLnVzYWdlPy5vdXRwdXRfdG9rZW5zX2RldGFpbHMgPz8ge30sXG4gICAgICAgICAgICAgICAgdG90YWxUb2tlbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndXNhZ2VfdXBkYXRlJywgdXNhZ2UpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCd0dXJuX2RvbmUnLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlX2RvbmUnLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiByZXNwb25zZS5kYXRhLnJlc3BvbnNlLmlkID8/ICcnLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2Uub3V0cHV0ID8/IFtdLFxuICAgICAgICAgICAgICAgICAgICB1c2FnZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFRva2Vuc0RldGFpbHM6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UudXNhZ2U/LmlucHV0X3Rva2Vuc19kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0VG9rZW5zRGV0YWlsczogcmVzcG9uc2UuZGF0YS5yZXNwb25zZS51c2FnZT8ub3V0cHV0X3Rva2Vuc19kZXRhaWxzID8/IHt9LFxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxUb2tlbnMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmF1ZGlvLmRvbmUnKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX2RvbmUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5kZWxldGVkJykge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX2RlbGV0ZWQnLCB7XG4gICAgICAgICAgICAgICAgaXRlbUlkOiBwYXJzZWQuaXRlbV9pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb24uY29tcGxldGVkJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZWQnKSB7XG4gICAgICAgICAgICAvLyByaWdodCBub3cgcmF0aGVyIHRoYW4ga2VlcGluZyB0cmFjayBvZiBwYXJ0aWFscyBhbmQgcmVidWlsZGluZyB0aGUgaXRlbSB3ZVxuICAgICAgICAgICAgLy8gd2lsbCByZXRyaWV2ZSBpdCBpbnN0ZWFkIHdoaWNoIHRyaWdnZXJzIHRoZSBgY29udmVyc2F0aW9uLml0ZW0ucmV0cmlldmVkYCBldmVudCBiZWxvd1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5yZXRyaWV2ZScsXG4gICAgICAgICAgICAgICAgaXRlbV9pZDogcGFyc2VkLml0ZW1faWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdjb252ZXJzYXRpb24uaXRlbS5pbnB1dF9hdWRpb190cmFuc2NyaXB0aW9uLmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS50ZXh0LmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5hdWRpb190cmFuc2NyaXB0LmRlbHRhJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5mdW5jdGlvbl9jYWxsX2FyZ3VtZW50cy5kZWx0YScpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmF1ZGlvX3RyYW5zY3JpcHQuZGVsdGEnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb190cmFuc2NyaXB0X2RlbHRhJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndHJhbnNjcmlwdF9kZWx0YScsXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhOiBwYXJzZWQuZGVsdGEsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW1faWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHBhcnNlZC5yZXNwb25zZV9pZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG5vIHN1cHBvcnQgZm9yIHBhcnRpYWwgdHJhbnNjcmlwdHMgeWV0LlxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZWQnIHx8XG4gICAgICAgICAgICBwYXJzZWQudHlwZSA9PT0gJ2NvbnZlcnNhdGlvbi5pdGVtLnJldHJpZXZlZCcpIHtcbiAgICAgICAgICAgIGlmIChwYXJzZWQuaXRlbS50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2aW91c0l0ZW1JZCA9IHBhcnNlZC50eXBlID09PSAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlZCdcbiAgICAgICAgICAgICAgICAgICAgPyBwYXJzZWQucHJldmlvdXNfaXRlbV9pZFxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHJlYWx0aW1lTWVzc2FnZUl0ZW1TY2hlbWEucGFyc2Uoe1xuICAgICAgICAgICAgICAgICAgICBpdGVtSWQ6IHBhcnNlZC5pdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0l0ZW1JZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VkLml0ZW0udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogcGFyc2VkLml0ZW0ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogcGFyc2VkLml0ZW0uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBwYXJzZWQuaXRlbS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIGl0ZW0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfaXRlbS5kb25lJyB8fFxuICAgICAgICAgICAgcGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5vdXRwdXRfaXRlbS5hZGRlZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwYXJzZWQuaXRlbTtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJyAmJiBpdGVtLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29sQ2FsbCA9IHJlYWx0aW1lVG9vbENhbGxJdGVtLnBhcnNlKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUlkOiBpdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBpdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2luX3Byb2dyZXNzJywgLy8gd2Ugc2V0IGl0IHRvIGluX3Byb2dyZXNzIGZvciB0aGUgVUkgYXMgaXQgd2lsbCBvbmx5IGJlIGNvbXBsZXRlZCB3aXRoIHRoZSBvdXRwdXRcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzOiBpdGVtLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIHRvb2xDYWxsKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Z1bmN0aW9uX2NhbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBpdGVtLmlkLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbCcsXG4gICAgICAgICAgICAgICAgICAgIGNhbGxJZDogaXRlbS5jYWxsX2lkID8/ICcnLFxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IGl0ZW0uYXJndW1lbnRzID8/ICcnLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUgPz8gJycsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ21lc3NhZ2UnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhbHRpbWVJdGVtID0gcmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYS5wYXJzZSh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1JZDogcGFyc2VkLml0ZW0uaWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlZC5pdGVtLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IHBhcnNlZC5pdGVtLnJvbGUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHBhcnNlZC5pdGVtLmNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogJ2luX3Byb2dyZXNzJyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2l0ZW1fdXBkYXRlJywgcmVhbHRpbWVJdGVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX29uRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgICAgICBlcnJvcixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9vbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGVkJyk7XG4gICAgfVxuICAgIF9vbkNsb3NlKCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2Rpc2Nvbm5lY3RlZCcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgbWVzc2FnZSB0byB0aGUgUmVhbHRpbWUgQVBJLiBUaGlzIHdpbGwgY3JlYXRlIGEgbmV3IGl0ZW0gaW4gdGhlIGNvbnZlcnNhdGlvbiBhbmRcbiAgICAgKiB0cmlnZ2VyIGEgcmVzcG9uc2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG90aGVyRXZlbnREYXRhIC0gQWRkaXRpb25hbCBldmVudCBkYXRhIHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEpIHtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ2NvbnZlcnNhdGlvbi5pdGVtLmNyZWF0ZScsXG4gICAgICAgICAgICBpdGVtOiB0eXBlb2YgbWVzc2FnZSA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21lc3NhZ2UnLFxuICAgICAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5wdXRfdGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogbWVzc2FnZSxcbiAgICAgICAgICAgIC4uLm90aGVyRXZlbnREYXRhLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNyZWF0ZScsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfZ2V0TWVyZ2VkU2Vzc2lvbkNvbmZpZyhjb25maWcpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6IGNvbmZpZy5pbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICBtb2RlbDogY29uZmlnLm1vZGVsID8/XG4gICAgICAgICAgICAgICAgdGhpcy4jbW9kZWwgPz9cbiAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5tb2RlbCxcbiAgICAgICAgICAgIHZvaWNlOiBjb25maWcudm9pY2UgPz8gREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcudm9pY2UsXG4gICAgICAgICAgICBtb2RhbGl0aWVzOiBjb25maWcubW9kYWxpdGllcyA/PyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5tb2RhbGl0aWVzLFxuICAgICAgICAgICAgaW5wdXRfYXVkaW9fZm9ybWF0OiBjb25maWcuaW5wdXRBdWRpb0Zvcm1hdCA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmlucHV0QXVkaW9Gb3JtYXQsXG4gICAgICAgICAgICBvdXRwdXRfYXVkaW9fZm9ybWF0OiBjb25maWcub3V0cHV0QXVkaW9Gb3JtYXQgPz9cbiAgICAgICAgICAgICAgICBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy5vdXRwdXRBdWRpb0Zvcm1hdCxcbiAgICAgICAgICAgIGlucHV0X2F1ZGlvX3RyYW5zY3JpcHRpb246IGNvbmZpZy5pbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbiA/P1xuICAgICAgICAgICAgICAgIERFRkFVTFRfT1BFTkFJX1JFQUxUSU1FX1NFU1NJT05fQ09ORklHLmlucHV0QXVkaW9UcmFuc2NyaXB0aW9uLFxuICAgICAgICAgICAgdHVybl9kZXRlY3Rpb246IGNvbmZpZy50dXJuRGV0ZWN0aW9uID8/XG4gICAgICAgICAgICAgICAgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcudHVybkRldGVjdGlvbixcbiAgICAgICAgICAgIHRvb2xfY2hvaWNlOiBjb25maWcudG9vbENob2ljZSA/PyBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRy50b29sQ2hvaWNlLFxuICAgICAgICAgICAgdG9vbHM6IGNvbmZpZy50b29scz8ubWFwKCh0b29sKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRvb2wsXG4gICAgICAgICAgICAgICAgc3RyaWN0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAvLyBXZSBkb24ndCBzZXQgdHJhY2luZyBoZXJlIHRvIG1ha2Ugc3VyZSB0aGF0IHdlIGRvbid0IHRyeSB0byBvdmVycmlkZSBpdCBvbiBldmVyeVxuICAgICAgICAgICAgLy8gc2Vzc2lvbi51cGRhdGUgYXMgaXQgbWlnaHQgbGVhZCB0byBlcnJvcnNcbiAgICAgICAgICAgIC4uLihjb25maWcucHJvdmlkZXJEYXRhID8/IHt9KSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHNlc3Npb25EYXRhO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBpbnRlcm5hbCB0cmFjaW5nIGNvbmZpZy4gVGhpcyBpcyB1c2VkIHRvIHRyYWNrIHRoZSB0cmFjaW5nIGNvbmZpZyB0aGF0IGhhcyBiZWVuIHNldFxuICAgICAqIGR1cmluZyB0aGUgc2Vzc2lvbi5jcmVhdGUgZXZlbnQuXG4gICAgICovXG4gICAgc2V0IF90cmFjaW5nQ29uZmlnKHRyYWNpbmdDb25maWcpIHtcbiAgICAgICAgdGhpcy4jdHJhY2luZ0NvbmZpZyA9IHRyYWNpbmdDb25maWc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHRyYWNpbmcgY29uZmlnIGZvciB0aGUgc2Vzc2lvbi4gVGhpcyB3aWxsIHNlbmQgdGhlIHRyYWNpbmcgY29uZmlnIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhY2luZ0NvbmZpZyAtIFRoZSB0cmFjaW5nIGNvbmZpZyB0byBzZXQuIFdlIGRvbid0IHN1cHBvcnQgJ2F1dG8nIGhlcmUgYXMgdGhlIFNESyB3aWxsIGFsd2F5cyBjb25maWd1cmUgYSBXb3JrZmxvdyBOYW1lIHVubGVzcyBpdCBleGlzdHNcbiAgICAgKi9cbiAgICBfdXBkYXRlVHJhY2luZ0NvbmZpZyh0cmFjaW5nQ29uZmlnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy4jdHJhY2luZ0NvbmZpZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIC8vIHRyZWF0aW5nIGl0IGFzIGRlZmF1bHQgdmFsdWVcbiAgICAgICAgICAgIHRoaXMuI3RyYWNpbmdDb25maWcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmFjaW5nQ29uZmlnID09PSAnYXV0bycpIHtcbiAgICAgICAgICAgIC8vIHR1cm4gb24gdHJhY2luZyBpbiBhdXRvIG1vZGVcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgICAgIHNlc3Npb246IHtcbiAgICAgICAgICAgICAgICAgICAgdHJhY2luZzogJ2F1dG8nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuI3RyYWNpbmdDb25maWcgIT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICB0eXBlb2YgdHJhY2luZ0NvbmZpZyAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8vIHRyYWNpbmcgaXMgYWxyZWFkeSBzZXQsIHdlIGNhbid0IGNoYW5nZSBpdFxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ1RyYWNpbmcgY29uZmlnIGlzIGFscmVhZHkgc2V0LCBza2lwcGluZyBzZXR0aW5nIGl0IGFnYWluLiBUaGlzIGxpa2VseSBoYXBwZW5zIHdoZW4geW91IGFscmVhZHkgc2V0IGEgdHJhY2luZyBjb25maWcgb24gc2Vzc2lvbiBjcmVhdGlvbi4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKCdEaXNhYmxpbmcgdHJhY2luZyBmb3IgdGhpcyBzZXNzaW9uLiBJdCBjYW5ub3QgYmUgdHVybmVkIG9uIGZvciB0aGlzIHNlc3Npb24gZnJvbSB0aGlzIHBvaW50IG9uLicpO1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiBudWxsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jdHJhY2luZ0NvbmZpZyA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuI3RyYWNpbmdDb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvLyB0cmFjaW5nIGlzIGN1cnJlbnRseSBub3Qgc2V0IHNvIHdlIGNhbiBzZXQgaXQgdG8gdGhlIG5ldyB2YWx1ZVxuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzZXNzaW9uLnVwZGF0ZScsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgICAgICB0cmFjaW5nOiB0cmFjaW5nQ29uZmlnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZz8uZ3JvdXBfaWQgIT09IHRoaXMuI3RyYWNpbmdDb25maWc/Lmdyb3VwX2lkIHx8XG4gICAgICAgICAgICB0cmFjaW5nQ29uZmlnPy5tZXRhZGF0YSAhPT0gdGhpcy4jdHJhY2luZ0NvbmZpZz8ubWV0YWRhdGEgfHxcbiAgICAgICAgICAgIHRyYWNpbmdDb25maWc/LndvcmtmbG93X25hbWUgIT09IHRoaXMuI3RyYWNpbmdDb25maWc/LndvcmtmbG93X25hbWUpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdNaXNtYXRjaCBpbiB0cmFjaW5nIGNvbmZpZy4gSWdub3JpbmcgdGhlIG5ldyB0cmFjaW5nIGNvbmZpZy4gVGhpcyBsaWtlbHkgaGFwcGVucyB3aGVuIHlvdSBhbHJlYWR5IHNldCBhIHRyYWNpbmcgY29uZmlnIG9uIHNlc3Npb24gY3JlYXRpb24uIEN1cnJlbnQgdHJhY2luZyBjb25maWc6ICVzLCBuZXcgdHJhY2luZyBjb25maWc6ICVzJywgSlNPTi5zdHJpbmdpZnkodGhpcy4jdHJhY2luZ0NvbmZpZyksIEpTT04uc3RyaW5naWZ5KHRyYWNpbmdDb25maWcpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgc2Vzc2lvbjoge1xuICAgICAgICAgICAgICAgIHRyYWNpbmc6IHRyYWNpbmdDb25maWcsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgc2Vzc2lvbiBjb25maWcuIFRoaXMgd2lsbCBtZXJnZSBpdCB3aXRoIHRoZSBjdXJyZW50IHNlc3Npb24gY29uZmlnIHdpdGggdGhlIGRlZmF1bHRcbiAgICAgKiB2YWx1ZXMgYW5kIHNlbmQgaXQgdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjb25maWcgLSBUaGUgc2Vzc2lvbiBjb25maWcgdG8gdXBkYXRlLlxuICAgICAqL1xuICAgIHVwZGF0ZVNlc3Npb25Db25maWcoY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb25EYXRhID0gdGhpcy5fZ2V0TWVyZ2VkU2Vzc2lvbkNvbmZpZyhjb25maWcpO1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnc2Vzc2lvbi51cGRhdGUnLFxuICAgICAgICAgICAgc2Vzc2lvbjogc2Vzc2lvbkRhdGEsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIHRoZSBvdXRwdXQgb2YgYSBmdW5jdGlvbiBjYWxsIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdG9vbENhbGwgLSBUaGUgdG9vbCBjYWxsIHRvIHNlbmQgdGhlIG91dHB1dCBmb3IuXG4gICAgICogQHBhcmFtIG91dHB1dCAtIFRoZSBvdXRwdXQgb2YgdGhlIGZ1bmN0aW9uIGNhbGwuXG4gICAgICogQHBhcmFtIHN0YXJ0UmVzcG9uc2UgLSBXaGV0aGVyIHRvIHN0YXJ0IGEgbmV3IHJlc3BvbnNlIGFmdGVyIHNlbmRpbmcgdGhlIG91dHB1dC5cbiAgICAgKi9cbiAgICBzZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCBvdXRwdXQsIHN0YXJ0UmVzcG9uc2UgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5jcmVhdGUnLFxuICAgICAgICAgICAgaXRlbToge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdmdW5jdGlvbl9jYWxsX291dHB1dCcsXG4gICAgICAgICAgICAgICAgb3V0cHV0LFxuICAgICAgICAgICAgICAgIGNhbGxfaWQ6IHRvb2xDYWxsLmNhbGxJZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHJlYWx0aW1lVG9vbENhbGxJdGVtLnBhcnNlKHtcbiAgICAgICAgICAgICAgICBpdGVtSWQ6IHRvb2xDYWxsLmlkLFxuICAgICAgICAgICAgICAgIHByZXZpb3VzSXRlbUlkOiB0b29sQ2FsbC5wcmV2aW91c0l0ZW1JZCxcbiAgICAgICAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25fY2FsbCcsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgICAgICAgICBhcmd1bWVudHM6IHRvb2xDYWxsLmFyZ3VtZW50cyxcbiAgICAgICAgICAgICAgICBuYW1lOiB0b29sQ2FsbC5uYW1lLFxuICAgICAgICAgICAgICAgIG91dHB1dCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdpdGVtX3VwZGF0ZScsIGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbG9nZ2VyLmVycm9yKCdFcnJvciBwYXJzaW5nIHRvb2wgY2FsbCBpdGVtJywgZXJyb3IsIHRvb2xDYWxsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhcnRSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZS5jcmVhdGUnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBhdWRpbyBidWZmZXIgdG8gdGhlIFJlYWx0aW1lIEFQSS4gSWYgYHsgY29tbWl0OiB0cnVlIH1gIGlzIHBhc3NlZCwgdGhlIGF1ZGlvIGJ1ZmZlclxuICAgICAqIHdpbGwgYmUgY29tbWl0dGVkIGFuZCB0aGUgbW9kZWwgd2lsbCBzdGFydCBwcm9jZXNzaW5nIGl0LiBUaGlzIGlzIG5lY2Vzc2FyeSBpZiB5b3UgaGF2ZVxuICAgICAqIGRpc2FibGVkIHR1cm4gZGV0ZWN0aW9uIC8gdm9pY2UgYWN0aXZpdHkgZGV0ZWN0aW9uIChWQUQpLlxuICAgICAqXG4gICAgICogQHBhcmFtIGF1ZGlvIC0gVGhlIGF1ZGlvIGJ1ZmZlciB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gVGhlIG9wdGlvbnMgZm9yIHRoZSBhdWRpbyBidWZmZXIuXG4gICAgICovXG4gICAgc2VuZEF1ZGlvKGF1ZGlvLCB7IGNvbW1pdCA9IGZhbHNlIH0gPSB7fSkge1xuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnaW5wdXRfYXVkaW9fYnVmZmVyLmFwcGVuZCcsXG4gICAgICAgICAgICBhdWRpbzogYXJyYXlCdWZmZXJUb0Jhc2U2NChhdWRpbyksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY29tbWl0KSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2lucHV0X2F1ZGlvX2J1ZmZlci5jb21taXQnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIGhpc3Rvcnkgb2YgdGhlIGNvbnZlcnNhdGlvbi4gVGhpcyB3aWxsIGNyZWF0ZSBhIGRpZmYgYmV0d2VlbiB0aGUgb2xkIGFuZCBuZXcgaGlzdG9yeVxuICAgICAqIGFuZCBzZW5kIHRoZSBuZWNlc3NhcnkgZXZlbnRzIHRvIHRoZSBSZWFsdGltZSBBUEkgdG8gdXBkYXRlIHRoZSBoaXN0b3J5LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9sZEhpc3RvcnkgLSBUaGUgb2xkIGhpc3Rvcnkgb2YgdGhlIGNvbnZlcnNhdGlvbi5cbiAgICAgKiBAcGFyYW0gbmV3SGlzdG9yeSAtIFRoZSBuZXcgaGlzdG9yeSBvZiB0aGUgY29udmVyc2F0aW9uLlxuICAgICAqL1xuICAgIHJlc2V0SGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KSB7XG4gICAgICAgIGNvbnN0IHsgcmVtb3ZhbHMsIGFkZGl0aW9ucywgdXBkYXRlcyB9ID0gZGlmZlJlYWx0aW1lSGlzdG9yeShvbGRIaXN0b3J5LCBuZXdIaXN0b3J5KTtcbiAgICAgICAgY29uc3QgcmVtb3ZhbElkcyA9IG5ldyBTZXQocmVtb3ZhbHMubWFwKChpdGVtKSA9PiBpdGVtLml0ZW1JZCkpO1xuICAgICAgICAvLyB3ZSBkb24ndCBoYXZlIGFuIHVwZGF0ZSBldmVudCBmb3IgaXRlbXMgc28gd2Ugd2lsbCByZW1vdmUgYW5kIHJlLWFkZCB3aGF0J3MgdGhlcmVcbiAgICAgICAgZm9yIChjb25zdCB1cGRhdGUgb2YgdXBkYXRlcykge1xuICAgICAgICAgICAgcmVtb3ZhbElkcy5hZGQodXBkYXRlLml0ZW1JZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlbW92YWxJZHMuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbUlkIG9mIHJlbW92YWxJZHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS5kZWxldGUnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtX2lkOiBpdGVtSWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWRkaXRpb25zQW5kVXBkYXRlcyA9IFsuLi5hZGRpdGlvbnMsIC4uLnVwZGF0ZXNdO1xuICAgICAgICBmb3IgKGNvbnN0IGFkZGl0aW9uIG9mIGFkZGl0aW9uc0FuZFVwZGF0ZXMpIHtcbiAgICAgICAgICAgIGlmIChhZGRpdGlvbi50eXBlID09PSAnbWVzc2FnZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtZXNzYWdlJyxcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogYWRkaXRpb24ucm9sZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogYWRkaXRpb24uY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGFkZGl0aW9uLml0ZW1JZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChhZGRpdGlvbi5yb2xlICE9PSAnc3lzdGVtJyAmJiBhZGRpdGlvbi5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbUVudHJ5LnN0YXR1cyA9IGFkZGl0aW9uLnN0YXR1cztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29udmVyc2F0aW9uLml0ZW0uY3JlYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbTogaXRlbUVudHJ5LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYWRkaXRpb24udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0Z1bmN0aW9uIGNhbGxzIGNhbm5vdCBiZSBtYW51YWxseSBhZGRlZCBvciB1cGRhdGVkIGF0IHRoZSBtb21lbnQuIElnbm9yaW5nLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3BlbmFpUmVhbHRpbWVCYXNlLm1qcy5tYXAiLCIvLy8gPHJlZmVyZW5jZSBsaWI9XCJkb21cIiAvPlxuaW1wb3J0IHsgaXNCcm93c2VyRW52aXJvbm1lbnQgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlL19zaGltcyc7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVCYXNlLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lQmFzZS5tanNcIjtcbmltcG9ydCB7IHBhcnNlUmVhbHRpbWVFdmVudCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qc1wiO1xuaW1wb3J0IHsgSEVBREVSUyB9IGZyb20gXCIuL3V0aWxzLm1qc1wiO1xuLyoqXG4gKiBUcmFuc3BvcnQgbGF5ZXIgdGhhdCdzIGhhbmRsaW5nIHRoZSBjb25uZWN0aW9uIGJldHdlZW4gdGhlIGNsaWVudCBhbmQgT3BlbkFJJ3MgUmVhbHRpbWUgQVBJXG4gKiB2aWEgV2ViUlRDLiBXaGlsZSB0aGlzIHRyYW5zcG9ydCBsYXllciBpcyBkZXNpZ25lZCB0byBiZSB1c2VkIHdpdGhpbiBhIFJlYWx0aW1lU2Vzc2lvbiwgaXQgY2FuXG4gKiBhbHNvIGJlIHVzZWQgc3RhbmRhbG9uZSBpZiB5b3Ugd2FudCB0byBoYXZlIGEgZGlyZWN0IGNvbm5lY3Rpb24gdG8gdGhlIFJlYWx0aW1lIEFQSS5cbiAqXG4gKiBVbmxlc3MgeW91IHNwZWNpZnkgYSBgbWVkaWFTdHJlYW1gIG9yIGBhdWRpb0VsZW1lbnRgIG9wdGlvbiwgdGhlIHRyYW5zcG9ydCBsYXllciB3aWxsXG4gKiBhdXRvbWF0aWNhbGx5IGNvbmZpZ3VyZSB0aGUgbWljcm9waG9uZSBhbmQgYXVkaW8gb3V0cHV0IHRvIGJlIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBPcGVuQUlSZWFsdGltZVdlYlJUQyBleHRlbmRzIE9wZW5BSVJlYWx0aW1lQmFzZSB7XG4gICAgb3B0aW9ucztcbiAgICAjdXJsO1xuICAgICNzdGF0ZSA9IHtcbiAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgcGVlckNvbm5lY3Rpb246IHVuZGVmaW5lZCxcbiAgICAgICAgZGF0YUNoYW5uZWw6IHVuZGVmaW5lZCxcbiAgICB9O1xuICAgICN1c2VJbnNlY3VyZUFwaUtleTtcbiAgICAjb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgI211dGVkID0gZmFsc2U7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGlmICh0eXBlb2YgUlRDUGVlckNvbm5lY3Rpb24gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlJUQyBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy4jdXJsID0gb3B0aW9ucy5iYXNlVXJsID8/IGBodHRwczovL2FwaS5vcGVuYWkuY29tL3YxL3JlYWx0aW1lYDtcbiAgICAgICAgdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkgPSBvcHRpb25zLnVzZUluc2VjdXJlQXBpS2V5ID8/IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBzdGF0dXMgb2YgdGhlIFdlYlJUQyBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGdldCBzdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNzdGF0ZS5zdGF0dXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGNvbm5lY3Rpb24gc3RhdGUgb2YgdGhlIFdlYlJUQyBjb25uZWN0aW9uIGluY2x1ZGluZyB0aGUgcGVlciBjb25uZWN0aW9uIGFuZCBkYXRhXG4gICAgICogY2hhbm5lbC5cbiAgICAgKi9cbiAgICBnZXQgY29ubmVjdGlvblN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIHNlc3Npb24gaXMgbXV0ZWQuXG4gICAgICovXG4gICAgZ2V0IG11dGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jbXV0ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyB3aWxsIGVzdGFibGlzaCB0aGUgY29ubmVjdGlvbiB0byB0aGUgT3BlbkFJIFJlYWx0aW1lIEFQSVxuICAgICAqIHZpYSBXZWJSVEMuXG4gICAgICpcbiAgICAgKiBJZiB5b3UgYXJlIHVzaW5nIGEgYnJvd3NlciwgdGhlIHRyYW5zcG9ydCBsYXllciB3aWxsIGFsc28gYXV0b21hdGljYWxseSBjb25maWd1cmUgdGhlXG4gICAgICogbWljcm9waG9uZSBhbmQgYXVkaW8gb3V0cHV0IHRvIGJlIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4jc3RhdGUuc3RhdHVzID09PSAnY29ubmVjdGluZycpIHtcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKCdSZWFsdGltZSBjb25uZWN0aW9uIGFscmVhZHkgaW4gcHJvZ3Jlc3MuIFBsZWFzZSBhd2FpdCBvcmlnaW5hbCBwcm9taXNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbW9kZWwgPSBvcHRpb25zLm1vZGVsID8/IHRoaXMuY3VycmVudE1vZGVsO1xuICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IG1vZGVsO1xuICAgICAgICBjb25zdCBiYXNlVXJsID0gb3B0aW9ucy51cmwgPz8gdGhpcy4jdXJsO1xuICAgICAgICBjb25zdCBhcGlLZXkgPSBhd2FpdCB0aGlzLl9nZXRBcGlLZXkob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGlzQ2xpZW50S2V5ID0gdHlwZW9mIGFwaUtleSA9PT0gJ3N0cmluZycgJiYgYXBpS2V5LnN0YXJ0c1dpdGgoJ2VrXycpO1xuICAgICAgICBpZiAoaXNCcm93c2VyRW52aXJvbm1lbnQoKSAmJiAhdGhpcy4jdXNlSW5zZWN1cmVBcGlLZXkgJiYgIWlzQ2xpZW50S2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVXNlckVycm9yKCdVc2luZyB0aGUgV2ViUlRDIGNvbm5lY3Rpb24gaW4gYSBicm93c2VyIGVudmlyb25tZW50IHJlcXVpcmVzIGFuIGluc2VjdXJlIEFQSSBrZXkuIFBsZWFzZSB1c2UgYSBXZWJTb2NrZXQgY29ubmVjdGlvbiBpbnN0ZWFkIG9yIHNldCB0aGUgdXNlSW5zZWN1cmVBcGlLZXkgb3B0aW9uIHRvIHRydWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWFzeW5jLXByb21pc2UtZXhlY3V0b3JcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlclNlc3Npb25Db25maWcgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLihvcHRpb25zLmluaXRpYWxTZXNzaW9uQ29uZmlnIHx8IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHRoaXMuY3VycmVudE1vZGVsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGlvblVybCA9IG5ldyBVUkwoYmFzZVVybCk7XG4gICAgICAgICAgICAgICAgbGV0IHBlZXJDb25uZWN0aW9uID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YUNoYW5uZWwgPSBwZWVyQ29ubmVjdGlvbi5jcmVhdGVEYXRhQ2hhbm5lbCgnb2FpLWV2ZW50cycpO1xuICAgICAgICAgICAgICAgIHRoaXMuI3N0YXRlID0ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0aW5nJyxcbiAgICAgICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0aW9uX2NoYW5nZScsIHRoaXMuI3N0YXRlLnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhQ2hhbm5lbCxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2VuZGluZyB0aGUgc2Vzc2lvbiBjb25maWcgYWdhaW4gaGVyZSBvbmNlIHRoZSBjaGFubmVsIGlzIGNvbm5lY3RlZCB0byBlbnN1cmVcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhhdCB0aGUgc2Vzc2lvbiBjb25maWcgaXMgc2VudCB0byB0aGUgc2VydmVyIGJlZm9yZSB0aGUgZmlyc3QgcmVzcG9uc2UgaXMgcmVjZWl2ZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0dGluZyBpdCBvbiBjb25uZWN0aW9uIHNob3VsZCB3b3JrIGJ1dCB0aGUgY29uZmlnIGlzIG5vdCBiZWluZyB2YWxpZGF0ZWQgb24gdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIHNlcnZlci4gVGhpcyB0cmlnZ2VycyBhIHZhbGlkYXRpb24gZXJyb3IgaWYgdGhlIGNvbmZpZyBpcyBub3QgdmFsaWQuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2Vzc2lvbkNvbmZpZyh1c2VyU2Vzc2lvbkNvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbk9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRhdGFDaGFubmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25FcnJvcihldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChldmVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWwuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbk1lc3NhZ2UoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGRhdGE6IHBhcnNlZCwgaXNHZW5lcmljIH0gPSBwYXJzZVJlYWx0aW1lRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcnNlZCB8fCBpc0dlbmVyaWMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmRvbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkLnR5cGUgPT09ICdzZXNzaW9uLmNyZWF0ZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90cmFjaW5nQ29uZmlnID0gcGFyc2VkLnNlc3Npb24udHJhY2luZztcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeWluZyB0byB0dXJuIG9uIHRyYWNpbmcgYWZ0ZXIgdGhlIHNlc3Npb24gaXMgY3JlYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlVHJhY2luZ0NvbmZpZyh1c2VyU2Vzc2lvbkNvbmZpZy50cmFjaW5nID8/ICdhdXRvJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBzZXQgdXAgYXVkaW8gcGxheWJhY2tcbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpb0VsZW1lbnQgPSB0aGlzLm9wdGlvbnMuYXVkaW9FbGVtZW50ID8/IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG4gICAgICAgICAgICAgICAgYXVkaW9FbGVtZW50LmF1dG9wbGF5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5vbnRyYWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvRWxlbWVudC5zcmNPYmplY3QgPSBldmVudC5zdHJlYW1zWzBdO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gZ2V0IG1pY3JvcGhvbmUgc3RyZWFtXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5vcHRpb25zLm1lZGlhU3RyZWFtID8/XG4gICAgICAgICAgICAgICAgICAgIChhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdWRpbzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmFkZFRyYWNrKHN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNoYW5nZVBlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub3B0aW9ucy5jaGFuZ2VQZWVyQ29ubmVjdGlvbihwZWVyQ29ubmVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuI3N0YXRlID0geyAuLi50aGlzLiNzdGF0ZSwgcGVlckNvbm5lY3Rpb24gfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgb2ZmZXIgPSBhd2FpdCBwZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcigpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24ob2ZmZXIpO1xuICAgICAgICAgICAgICAgIGlmICghb2ZmZXIuc2RwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBvZmZlcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzZXNzaW9uQ29uZmlnID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLl9nZXRNZXJnZWRTZXNzaW9uQ29uZmlnKHVzZXJTZXNzaW9uQ29uZmlnKSxcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHRoaXMuY3VycmVudE1vZGVsLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgICAgICAgIGRhdGEuYXBwZW5kKCdzZHAnLCBvZmZlci5zZHApO1xuICAgICAgICAgICAgICAgIGRhdGEuYXBwZW5kKCdzZXNzaW9uJywgSlNPTi5zdHJpbmdpZnkoc2Vzc2lvbkNvbmZpZykpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNkcFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goY29ubmVjdGlvblVybCwge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgYm9keTogZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FwaUtleX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1gtT3BlbkFJLUFnZW50cy1TREsnOiBIRUFERVJTWydYLU9wZW5BSS1BZ2VudHMtU0RLJ10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYW5zd2VyID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYW5zd2VyJyxcbiAgICAgICAgICAgICAgICAgICAgc2RwOiBhd2FpdCBzZHBSZXNwb25zZS50ZXh0KCksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhd2FpdCBwZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihhbnN3ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGV2ZW50IHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgd2lsbCBzdHJpbmdpZnkgdGhlIGV2ZW50IGFuZCBzZW5kIGl0IGRpcmVjdGx5IHRvIHRoZVxuICAgICAqIEFQSS4gVGhpcyBjYW4gYmUgdXNlZCBpZiB5b3Ugd2FudCB0byB0YWtlIGNvbnRyb2wgb3ZlciB0aGUgY29ubmVjdGlvbiBhbmQgc2VuZCBldmVudHMgbWFudWFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gc2VuZC5cbiAgICAgKi9cbiAgICBzZW5kRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbCB8fFxuICAgICAgICAgICAgdGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwucmVhZHlTdGF0ZSAhPT0gJ29wZW4nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYlJUQyBkYXRhIGNoYW5uZWwgaXMgbm90IGNvbm5lY3RlZC4gTWFrZSBzdXJlIHlvdSBjYWxsIGBjb25uZWN0KClgIGJlZm9yZSBzZW5kaW5nIGV2ZW50cy4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiNzdGF0ZS5kYXRhQ2hhbm5lbC5zZW5kKEpTT04uc3RyaW5naWZ5KGV2ZW50KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE11dGUgb3IgdW5tdXRlIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBtdXRlZCAtIFdoZXRoZXIgdG8gbXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBtdXRlKG11dGVkKSB7XG4gICAgICAgIHRoaXMuI211dGVkID0gbXV0ZWQ7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5wZWVyQ29ubmVjdGlvbikge1xuICAgICAgICAgICAgY29uc3QgcGVlckNvbm5lY3Rpb24gPSB0aGlzLiNzdGF0ZS5wZWVyQ29ubmVjdGlvbjtcbiAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMoKS5mb3JFYWNoKChzZW5kZXIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc2VuZGVyLnRyYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbmRlci50cmFjay5lbmFibGVkID0gIW11dGVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlIHRoZSBjb25uZWN0aW9uIHRvIHRoZSBSZWFsdGltZSBBUEkgYW5kIGRpc2Nvbm5lY3RzIHRoZSB1bmRlcmx5aW5nIFdlYlJUQyBjb25uZWN0aW9uLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUuZGF0YUNoYW5uZWwpIHtcbiAgICAgICAgICAgIHRoaXMuI3N0YXRlLmRhdGFDaGFubmVsLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBwZWVyQ29ubmVjdGlvbiA9IHRoaXMuI3N0YXRlLnBlZXJDb25uZWN0aW9uO1xuICAgICAgICAgICAgcGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZvckVhY2goKHNlbmRlcikgPT4ge1xuICAgICAgICAgICAgICAgIHNlbmRlci50cmFjaz8uc3RvcCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwZWVyQ29ubmVjdGlvbi5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS5zdGF0dXMgIT09ICdkaXNjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHBlZXJDb25uZWN0aW9uOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgZGF0YUNoYW5uZWw6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Nvbm5lY3Rpb25fY2hhbmdlJywgdGhpcy4jc3RhdGUuc3RhdHVzKTtcbiAgICAgICAgICAgIHRoaXMuX29uQ2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnRlcnJ1cHQgdGhlIGN1cnJlbnQgcmVzcG9uc2UgaWYgb25lIGlzIG9uZ29pbmcgYW5kIGNsZWFyIHRoZSBhdWRpbyBidWZmZXIgc28gdGhhdCB0aGUgYWdlbnRcbiAgICAgKiBzdG9wcyB0YWxraW5nLlxuICAgICAqL1xuICAgIGludGVycnVwdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuI29uZ29pbmdSZXNwb25zZSkge1xuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdyZXNwb25zZS5jYW5jZWwnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLiNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnb3V0cHV0X2F1ZGlvX2J1ZmZlci5jbGVhcicsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9wZW5haVJlYWx0aW1lV2ViUnRjLm1qcy5tYXAiLCIvLy8gPHJlZmVyZW5jZSBsaWI9XCJkb21cIiAvPlxuZXhwb3J0IGNvbnN0IFdlYlNvY2tldCA9IGdsb2JhbFRoaXMuV2ViU29ja2V0O1xuZXhwb3J0IGZ1bmN0aW9uIGlzQnJvd3NlckVudmlyb25tZW50KCkge1xuICAgIHJldHVybiB0cnVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2hpbXMtYnJvd3Nlci5tanMubWFwIiwiaW1wb3J0IHsgaXNCcm93c2VyRW52aXJvbm1lbnQsIFdlYlNvY2tldCwgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1yZWFsdGltZS9fc2hpbXMnO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVCYXNlLCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lQmFzZS5tanNcIjtcbmltcG9ydCB7IGJhc2U2NFRvQXJyYXlCdWZmZXIsIEhFQURFUlMsIFdFQlNPQ0tFVF9NRVRBIH0gZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tICdAb3BlbmFpL2FnZW50cy1jb3JlJztcbmltcG9ydCB7IHBhcnNlUmVhbHRpbWVFdmVudCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lRXZlbnRzLm1qc1wiO1xuLyoqXG4gKiBUcmFuc3BvcnQgbGF5ZXIgdGhhdCdzIGhhbmRsaW5nIHRoZSBjb25uZWN0aW9uIGJldHdlZW4gdGhlIGNsaWVudCBhbmQgT3BlbkFJJ3MgUmVhbHRpbWUgQVBJXG4gKiB2aWEgV2ViU29ja2V0cy4gV2hpbGUgdGhpcyB0cmFuc3BvcnQgbGF5ZXIgaXMgZGVzaWduZWQgdG8gYmUgdXNlZCB3aXRoaW4gYSBSZWFsdGltZVNlc3Npb24sIGl0XG4gKiBjYW4gYWxzbyBiZSB1c2VkIHN0YW5kYWxvbmUgaWYgeW91IHdhbnQgdG8gaGF2ZSBhIGRpcmVjdCBjb25uZWN0aW9uIHRvIHRoZSBSZWFsdGltZSBBUEkuXG4gKi9cbmV4cG9ydCBjbGFzcyBPcGVuQUlSZWFsdGltZVdlYlNvY2tldCBleHRlbmRzIE9wZW5BSVJlYWx0aW1lQmFzZSB7XG4gICAgI2FwaUtleTtcbiAgICAjdXJsO1xuICAgICNzdGF0ZSA9IHtcbiAgICAgICAgc3RhdHVzOiAnZGlzY29ubmVjdGVkJyxcbiAgICAgICAgd2Vic29ja2V0OiB1bmRlZmluZWQsXG4gICAgfTtcbiAgICAjdXNlSW5zZWN1cmVBcGlLZXk7XG4gICAgI2N1cnJlbnRJdGVtSWQ7XG4gICAgI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleDtcbiAgICAvKipcbiAgICAgKiBUaW1lc3RhbXAgbWFpbnRhaW5lZCBieSB0aGUgdHJhbnNwb3J0IGxheWVyIHRvIGFpZCB3aXRoIHRoZSBjYWxjdWxhdGlvbiBvZiB0aGUgZWxhcHNlZCB0aW1lXG4gICAgICogc2luY2UgdGhlIHJlc3BvbnNlIHN0YXJ0ZWQgdG8gY29tcHV0ZSB0aGUgcmlnaHQgaW50ZXJydXB0aW9uIHRpbWUuXG4gICAgICpcbiAgICAgKiBNb3N0bHkgaW50ZXJuYWwgYnV0IG1pZ2h0IGJlIHVzZWQgYnkgZXh0ZW5kZWQgdHJhbnNwb3J0IGxheWVycyBmb3IgdGhlaXIgaW50ZXJydXB0aW9uXG4gICAgICogY2FsY3VsYXRpb24uXG4gICAgICovXG4gICAgX2ZpcnN0QXVkaW9UaW1lc3RhbXA7XG4gICAgX2F1ZGlvTGVuZ3RoTXMgPSAwO1xuICAgICNvbmdvaW5nUmVzcG9uc2UgPSBmYWxzZTtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuI3VybCA9IGB3c3M6Ly9hcGkub3BlbmFpLmNvbS92MS9yZWFsdGltZT9tb2RlbD0ke3RoaXMuY3VycmVudE1vZGVsfWA7XG4gICAgICAgIHRoaXMuI3VzZUluc2VjdXJlQXBpS2V5ID0gb3B0aW9ucy51c2VJbnNlY3VyZUFwaUtleSA/PyBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgc3RhdHVzIG9mIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgc3RhdHVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhdGUuc3RhdHVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY3VycmVudCBjb25uZWN0aW9uIHN0YXRlIG9mIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBnZXQgY29ubmVjdGlvblN0YXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFsd2F5cyByZXR1cm5zIGBudWxsYCBhcyB0aGUgV2ViU29ja2V0IHRyYW5zcG9ydCBsYXllciBkb2VzIG5vdCBoYW5kbGUgbXV0aW5nLiBJbnN0ZWFkLFxuICAgICAqIHRoaXMgc2hvdWxkIGJlIGhhbmRsZWQgYnkgdGhlIGNsaWVudCBieSBub3QgdHJpZ2dlcmluZyB0aGUgYHNlbmRBdWRpb2AgbWV0aG9kLlxuICAgICAqL1xuICAgIGdldCBtdXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW50IGl0ZW0gSUQgb2YgdGhlIG9uZ29pbmcgcmVzcG9uc2UuXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRJdGVtSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiNjdXJyZW50SXRlbUlkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VycyB0aGUgYGF1ZGlvYCBldmVudCB0aGF0IGEgY2xpZW50IG1pZ2h0IGxpc3RlbiB0byB0byByZWNlaXZlIHRoZSBhdWRpbyBidWZmZXIuXG4gICAgICogUHJvdGVjdGVkIGZvciB5b3UgdG8gYmUgYWJsZSB0byBvdmVycmlkZSBhbmQgZGlzYWJsZSBlbWl0dGluZyB0aGlzIGV2ZW50IGluIGNhc2UgeW91ciBleHRlbmRlZFxuICAgICAqIHRyYW5zcG9ydCBsYXllciBoYW5kbGVzIGF1ZGlvIGludGVybmFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXVkaW9FdmVudCAtIFRoZSBhdWRpbyBldmVudCB0byBlbWl0LlxuICAgICAqL1xuICAgIF9vbkF1ZGlvKGF1ZGlvRXZlbnQpIHtcbiAgICAgICAgdGhpcy5lbWl0KCdhdWRpbycsIGF1ZGlvRXZlbnQpO1xuICAgIH1cbiAgICAjc2V0dXBXZWJTb2NrZXQocmVzb2x2ZSwgcmVqZWN0LCBzZXNzaW9uQ29uZmlnKSB7XG4gICAgICAgIGlmICh0aGlzLiNzdGF0ZS53ZWJzb2NrZXQpIHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuI2FwaUtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignQVBJIGtleSBpcyBub3Qgc2V0LiBQbGVhc2UgY2FsbCBgY29ubmVjdCgpYCB3aXRoIGFuIEFQSSBrZXkgZmlyc3QuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQnJvd3NlckVudmlyb25tZW50KCkgJiZcbiAgICAgICAgICAgICF0aGlzLiNhcGlLZXkuc3RhcnRzV2l0aCgnZWtfJykgJiZcbiAgICAgICAgICAgICF0aGlzLiN1c2VJbnNlY3VyZUFwaUtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVzZXJFcnJvcignVXNpbmcgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uIGluIGEgYnJvd3NlciBlbnZpcm9ubWVudCByZXF1aXJlcyBhbiBlcGhlbWVyYWwgY2xpZW50IGtleS4gSWYgeW91IGhhdmUgdG8gdXNlIGEgcmVndWxhciBBUEkga2V5LCBzZXQgdGhlIGB1c2VJbnNlY3VyZUFwaUtleWAgb3B0aW9uIHRvIHRydWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd2Vic29ja2V0QXJndW1lbnRzID0gaXNCcm93c2VyRW52aXJvbm1lbnQoKVxuICAgICAgICAgICAgPyBbXG4gICAgICAgICAgICAgICAgJ3JlYWx0aW1lJyxcbiAgICAgICAgICAgICAgICAvLyBBdXRoXG4gICAgICAgICAgICAgICAgJ29wZW5haS1pbnNlY3VyZS1hcGkta2V5LicgKyB0aGlzLiNhcGlLZXksXG4gICAgICAgICAgICAgICAgLy8gQmV0YSBwcm90b2NvbCwgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICAnb3BlbmFpLWJldGEucmVhbHRpbWUtdjEnLFxuICAgICAgICAgICAgICAgIC8vIFZlcnNpb24gaGVhZGVyXG4gICAgICAgICAgICAgICAgV0VCU09DS0VUX01FVEEsXG4gICAgICAgICAgICBdXG4gICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLiNhcGlLZXl9YCxcbiAgICAgICAgICAgICAgICAgICAgJ09wZW5BSS1CZXRhJzogJ3JlYWx0aW1lPXYxJyxcbiAgICAgICAgICAgICAgICAgICAgLi4uSEVBREVSUyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgd3MgPSBuZXcgV2ViU29ja2V0KHRoaXMuI3VybCwgd2Vic29ja2V0QXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICBzdGF0dXM6ICdjb25uZWN0aW5nJyxcbiAgICAgICAgICAgIHdlYnNvY2tldDogd3MsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdvcGVuJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jc3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnY29ubmVjdGVkJyxcbiAgICAgICAgICAgICAgICB3ZWJzb2NrZXQ6IHdzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgdGhpcy5fb25PcGVuKCk7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5fb25FcnJvcihlcnJvcik7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHdlYnNvY2tldDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAobWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fb25NZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBwYXJzZWQsIGlzR2VuZXJpYyB9ID0gcGFyc2VSZWFsdGltZUV2ZW50KG1lc3NhZ2UpO1xuICAgICAgICAgICAgaWYgKCFwYXJzZWQgfHwgaXNHZW5lcmljKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcnNlZC50eXBlID09PSAncmVzcG9uc2UuYXVkaW8uZGVsdGEnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jY3VycmVudEF1ZGlvQ29udGVudEluZGV4ID0gcGFyc2VkLmNvbnRlbnRfaW5kZXg7XG4gICAgICAgICAgICAgICAgdGhpcy4jY3VycmVudEl0ZW1JZCA9IHBhcnNlZC5pdGVtX2lkO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlc3BvbnNlIHN0YXJ0IHRpbWVzdGFtcCBpcyBub3Qgc2V0LCB3ZSBzZXQgaXQgdG8gdGhlIGN1cnJlbnQgdGltZS5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgZWxhcHNlZCB0aW1lIGZvciBpbnRlcnJ1cHRpb24uXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0xlbmd0aE1zID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYnVmZiA9IGJhc2U2NFRvQXJyYXlCdWZmZXIocGFyc2VkLmRlbHRhKTtcbiAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIGF1ZGlvIGxlbmd0aCBpbiBtaWxsaXNlY29uZHMgYXNzdW1pbmcgMjRrSHogcGNtMTZsZVxuICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgKz0gYnVmZi5ieXRlTGVuZ3RoIC8gMjQgLyAyOyAvLyAyNGtIeiAqIDIgYnl0ZXMgcGVyIHNhbXBsZVxuICAgICAgICAgICAgICAgIGNvbnN0IGF1ZGlvRXZlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhdWRpbycsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGJ1ZmYsXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlSWQ6IHBhcnNlZC5yZXNwb25zZV9pZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuX29uQXVkaW8oYXVkaW9FdmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ2lucHV0X2F1ZGlvX2J1ZmZlci5zcGVlY2hfc3RhcnRlZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmludGVycnVwdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VkLnR5cGUgPT09ICdyZXNwb25zZS5jcmVhdGVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Jlc3BvbnNlLmRvbmUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jb25nb2luZ1Jlc3BvbnNlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJzZWQudHlwZSA9PT0gJ3Nlc3Npb24uY3JlYXRlZCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90cmFjaW5nQ29uZmlnID0gcGFyc2VkLnNlc3Npb24udHJhY2luZztcbiAgICAgICAgICAgICAgICAvLyBUcnlpbmcgdG8gdHVybiBvbiB0cmFjaW5nIGFmdGVyIHRoZSBzZXNzaW9uIGlzIGNyZWF0ZWRcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVUcmFjaW5nQ29uZmlnKHNlc3Npb25Db25maWcudHJhY2luZyA/PyAnYXV0bycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLiNzdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6ICdkaXNjb25uZWN0ZWQnLFxuICAgICAgICAgICAgICAgIHdlYnNvY2tldDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGlvbl9jaGFuZ2UnLCB0aGlzLiNzdGF0ZS5zdGF0dXMpO1xuICAgICAgICAgICAgdGhpcy5fb25DbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgY29ubmVjdChvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IG1vZGVsID0gb3B0aW9ucy5tb2RlbCA/PyB0aGlzLmN1cnJlbnRNb2RlbDtcbiAgICAgICAgdGhpcy5jdXJyZW50TW9kZWwgPSBtb2RlbDtcbiAgICAgICAgdGhpcy4jYXBpS2V5ID0gYXdhaXQgdGhpcy5fZ2V0QXBpS2V5KG9wdGlvbnMpO1xuICAgICAgICB0aGlzLiN1cmwgPVxuICAgICAgICAgICAgb3B0aW9ucy51cmwgPz9cbiAgICAgICAgICAgICAgICBgd3NzOi8vYXBpLm9wZW5haS5jb20vdjEvcmVhbHRpbWU/bW9kZWw9JHt0aGlzLmN1cnJlbnRNb2RlbH1gO1xuICAgICAgICBjb25zdCBzZXNzaW9uQ29uZmlnID0ge1xuICAgICAgICAgICAgLi4uKG9wdGlvbnMuaW5pdGlhbFNlc3Npb25Db25maWcgfHwge30pLFxuICAgICAgICAgICAgbW9kZWw6IHRoaXMuY3VycmVudE1vZGVsLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuI3NldHVwV2ViU29ja2V0KHJlc29sdmUsIHJlamVjdCwgc2Vzc2lvbkNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVTZXNzaW9uQ29uZmlnKHNlc3Npb25Db25maWcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGFuIGV2ZW50IHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgd2lsbCBzdHJpbmdpZnkgdGhlIGV2ZW50IGFuZCBzZW5kIGl0IGRpcmVjdGx5IHRvIHRoZVxuICAgICAqIEFQSS4gVGhpcyBjYW4gYmUgdXNlZCBpZiB5b3Ugd2FudCB0byB0YWtlIGNvbnRyb2wgb3ZlciB0aGUgY29ubmVjdGlvbiBhbmQgc2VuZCBldmVudHMgbWFudWFsbHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gc2VuZC5cbiAgICAgKi9cbiAgICBzZW5kRXZlbnQoZXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLiNzdGF0ZS53ZWJzb2NrZXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2ViU29ja2V0IGlzIG5vdCBjb25uZWN0ZWQuIE1ha2Ugc3VyZSB5b3UgY2FsbCBgY29ubmVjdCgpYCBiZWZvcmUgc2VuZGluZyBldmVudHMuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jc3RhdGUud2Vic29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoZXZlbnQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIFdlYlNvY2tldCBjb25uZWN0aW9uLlxuICAgICAqXG4gICAgICogVGhpcyB3aWxsIGFsc28gcmVzZXQgYW55IGludGVybmFsIGNvbm5lY3Rpb24gdHJhY2tpbmcgdXNlZCBmb3IgaW50ZXJydXB0aW9uIGhhbmRsaW5nLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLiNzdGF0ZS53ZWJzb2NrZXQ/LmNsb3NlKCk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRJdGVtSWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2ZpcnN0QXVkaW9UaW1lc3RhbXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2F1ZGlvTGVuZ3RoTXMgPSAwO1xuICAgICAgICB0aGlzLiNjdXJyZW50QXVkaW9Db250ZW50SW5kZXggPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdpbGwgdGhyb3cgYW4gZXJyb3IgYXMgdGhlIFdlYlNvY2tldCB0cmFuc3BvcnQgbGF5ZXIgZG9lcyBub3Qgc3VwcG9ydCBtdXRpbmcuXG4gICAgICovXG4gICAgbXV0ZShfbXV0ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXRlIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoZSBXZWJTb2NrZXQgdHJhbnNwb3J0LiBZb3UgaGF2ZSB0byBtdXRlIHRoZSBhdWRpbyBpbnB1dCB5b3Vyc2VsZi4nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZCBhbiBhdWRpbyBidWZmZXIgdG8gdGhlIFJlYWx0aW1lIEFQSS4gVGhpcyBpcyB1c2VkIGZvciB5b3VyIGNsaWVudCB0byBzZW5kIGF1ZGlvIHRvIHRoZVxuICAgICAqIG1vZGVsIHRvIHJlc3BvbmQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXVkaW8gLSBUaGUgYXVkaW8gYnVmZmVyIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBUaGUgb3B0aW9ucyBmb3IgdGhlIGF1ZGlvIGJ1ZmZlci5cbiAgICAgKi9cbiAgICBzZW5kQXVkaW8oYXVkaW8sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy4jc3RhdGUuc3RhdHVzID09PSAnY29ubmVjdGVkJykge1xuICAgICAgICAgICAgc3VwZXIuc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgY2FuY2VsIHJlc3BvbnNlIGV2ZW50IHRvIHRoZSBSZWFsdGltZSBBUEkuIFRoaXMgaXMgdXNlZCB0byBjYW5jZWwgYW4gb25nb2luZ1xuICAgICAqICByZXNwb25zZSB0aGF0IHRoZSBtb2RlbCBpcyBjdXJyZW50bHkgZ2VuZXJhdGluZy5cbiAgICAgKi9cbiAgICBfY2FuY2VsUmVzcG9uc2UoKSB7XG4gICAgICAgIC8vIGNhbmNlbCB0aGUgb25nb2luZyByZXNwb25zZVxuICAgICAgICBpZiAodGhpcy4jb25nb2luZ1Jlc3BvbnNlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3Jlc3BvbnNlLmNhbmNlbCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuI29uZ29pbmdSZXNwb25zZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERvIE5PVCBjYWxsIHRoaXMgbWV0aG9kIGRpcmVjdGx5LiBDYWxsIGBpbnRlcnJ1cHQoKWAgaW5zdGVhZCBmb3IgcHJvcGVyIGludGVycnVwdGlvbiBoYW5kbGluZy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2VuZCB0aGUgcmlnaHQgZXZlbnRzIHRvIHRoZSBBUEkgdG8gaW5mb3JtIHRoZSBtb2RlbCB0aGF0IHRoZSB1c2VyIGhhc1xuICAgICAqIGludGVycnVwdGVkIHRoZSByZXNwb25zZS4gSXQgbWlnaHQgYmUgb3ZlcnJpZGRlbi9leHRlbmRlZCBieSBhbiBleHRlbmRlZCB0cmFuc3BvcnQgbGF5ZXIuIFNlZVxuICAgICAqIHRoZSBgVHdpbGlvUmVhbHRpbWVUcmFuc3BvcnRMYXllcmAgZm9yIGFuIGV4YW1wbGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxhcHNlZFRpbWUgLSBUaGUgZWxhcHNlZCB0aW1lIHNpbmNlIHRoZSByZXNwb25zZSBzdGFydGVkLlxuICAgICAqL1xuICAgIF9pbnRlcnJ1cHQoZWxhcHNlZFRpbWUpIHtcbiAgICAgICAgLy8gaW1tZWRpYXRlbHkgZW1pdCB0aGlzIGV2ZW50IHNvIHRoZSBjbGllbnQgY2FuIHN0b3AgcGxheWluZyBhdWRpb1xuICAgICAgICB0aGlzLmVtaXQoJ2F1ZGlvX2ludGVycnVwdGVkJyk7XG4gICAgICAgIHRoaXMuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgIHR5cGU6ICdjb252ZXJzYXRpb24uaXRlbS50cnVuY2F0ZScsXG4gICAgICAgICAgICBpdGVtX2lkOiB0aGlzLiNjdXJyZW50SXRlbUlkLFxuICAgICAgICAgICAgY29udGVudF9pbmRleDogdGhpcy4jY3VycmVudEF1ZGlvQ29udGVudEluZGV4LFxuICAgICAgICAgICAgYXVkaW9fZW5kX21zOiBlbGFwc2VkVGltZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludGVycnVwdCB0aGUgb25nb2luZyByZXNwb25zZS4gVGhpcyBtZXRob2QgaXMgdHJpZ2dlcmVkIGF1dG9tYXRpY2FsbHkgYnkgdGhlIGNsaWVudCB3aGVuXG4gICAgICogdm9pY2UgYWN0aXZpdHkgZGV0ZWN0aW9uIChWQUQpIGlzIGVuYWJsZWQgKGRlZmF1bHQpIGFzIHdlbGwgYXMgd2hlbiBhbiBvdXRwdXQgZ3VhcmRyYWlsIGdvdFxuICAgICAqIHRyaWdnZXJlZC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gYWxzbyBjYWxsIHRoaXMgbWV0aG9kIGRpcmVjdGx5IGlmIHlvdSB3YW50IHRvIGludGVycnVwdCB0aGUgY29udmVyc2F0aW9uIGZvciBleGFtcGxlXG4gICAgICogYmFzZWQgb24gYW4gZXZlbnQgaW4gdGhlIGNsaWVudC5cbiAgICAgKi9cbiAgICBpbnRlcnJ1cHQoKSB7XG4gICAgICAgIGlmICghdGhpcy4jY3VycmVudEl0ZW1JZCB8fCB0eXBlb2YgdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jYW5jZWxSZXNwb25zZSgpO1xuICAgICAgICBjb25zdCBlbGFwc2VkVGltZSA9IERhdGUubm93KCkgLSB0aGlzLl9maXJzdEF1ZGlvVGltZXN0YW1wO1xuICAgICAgICBpZiAoZWxhcHNlZFRpbWUgPj0gMCAmJiBlbGFwc2VkVGltZSA8IHRoaXMuX2F1ZGlvTGVuZ3RoTXMpIHtcbiAgICAgICAgICAgIHRoaXMuX2ludGVycnVwdChlbGFwc2VkVGltZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4jY3VycmVudEl0ZW1JZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fZmlyc3RBdWRpb1RpbWVzdGFtcCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5fYXVkaW9MZW5ndGhNcyA9IDA7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCA9IHVuZGVmaW5lZDtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcGVuYWlSZWFsdGltZVdlYnNvY2tldC5tanMubWFwIiwiaW1wb3J0IHsgZ2V0SGFuZG9mZiwgZ2V0VHJhbnNmZXJNZXNzYWdlLCBNb2RlbEJlaGF2aW9yRXJyb3IsIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCBSdW5Db250ZXh0LCBSdW5Ub29sQXBwcm92YWxJdGVtLCB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUnO1xuaW1wb3J0IHsgUnVudGltZUV2ZW50RW1pdHRlciB9IGZyb20gJ0BvcGVuYWkvYWdlbnRzLWNvcmUvX3NoaW1zJztcbmltcG9ydCB7IGlzWm9kT2JqZWN0LCB0b1NtYXJ0U3RyaW5nIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZS91dGlscyc7XG5pbXBvcnQgeyBkZWZpbmVSZWFsdGltZU91dHB1dEd1YXJkcmFpbCwgZ2V0UmVhbHRpbWVHdWFyZHJhaWxGZWVkYmFja01lc3NhZ2UsIGdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3MsIH0gZnJvbSBcIi4vZ3VhcmRyYWlsLm1qc1wiO1xuaW1wb3J0IHsgT3BlbkFJUmVhbHRpbWVXZWJSVEMgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanNcIjtcbmltcG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0IH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVXZWJzb2NrZXQubWpzXCI7XG5pbXBvcnQgeyBnZXRMYXN0VGV4dEZyb21BdWRpb091dHB1dE1lc3NhZ2UsIGhhc1dlYlJUQ1N1cHBvcnQsIHVwZGF0ZVJlYWx0aW1lSGlzdG9yeSwgfSBmcm9tIFwiLi91dGlscy5tanNcIjtcbmltcG9ydCBsb2dnZXIgZnJvbSBcIi4vbG9nZ2VyLm1qc1wiO1xuLyoqXG4gKiBBIGBSZWFsdGltZVNlc3Npb25gIGlzIHRoZSBjb3JuZXIgcGllY2Ugb2YgYnVpbGRpbmcgVm9pY2UgQWdlbnRzLiBJdCdzIHRoZSBlcXVpdmFsZW50IG9mIGFcbiAqIFJ1bm5lciBpbiB0ZXh0LWJhc2VkIGFnZW50cyBleGNlcHQgdGhhdCBpdCBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgbXVsdGlwbGUgdHVybnMgYnkgbWFpbnRhaW5pbmcgYVxuICogY29ubmVjdGlvbiB3aXRoIHRoZSB1bmRlcmx5aW5nIHRyYW5zcG9ydCBsYXllci5cbiAqXG4gKiBUaGUgc2Vzc2lvbiBoYW5kbGVzIG1hbmFnaW5nIHRoZSBsb2NhbCBoaXN0b3J5IGNvcHksIGV4ZWN1dGVzIHRvb2xzLCBydW5zIG91dHB1dCBndWFyZHJhaWxzLCBhbmRcbiAqIGZhY2lsaXRpZXMgaGFuZG9mZnMuXG4gKlxuICogVGhlIGFjdHVhbCBhdWRpbyBoYW5kbGluZyBhbmQgZ2VuZXJhdGlvbiBvZiBtb2RlbCByZXNwb25zZXMgaXMgaGFuZGxlZCBieSB0aGUgdW5kZXJseWluZ1xuICogdHJhbnNwb3J0IGxheWVyLiBCeSBkZWZhdWx0IGlmIHlvdSBhcmUgdXNpbmcgYSBicm93c2VyIHdpdGggV2ViUlRDIHN1cHBvcnQsIHRoZSBzZXNzaW9uIHdpbGxcbiAqIGF1dG9tYXRpY2FsbHkgdXNlIHRoZSBXZWJSVEMgdmVyc2lvbiBvZiB0aGUgT3BlbkFJIFJlYWx0aW1lIEFQSS4gT24gdGhlIHNlcnZlciBvciBpZiB5b3UgcGFzc1xuICogYHdlYnNvY2tldGAgYXMgdGhlIHRyYW5zcG9ydCBsYXllciwgdGhlIHNlc3Npb24gd2lsbCBlc3RhYmxpc2ggYSBjb25uZWN0aW9uIHVzaW5nIFdlYlNvY2tldHMuXG4gKlxuICogSW4gdGhlIGNhc2Ugb2YgV2ViUlRDLCBpbiB0aGUgYnJvd3NlciwgdGhlIHRyYW5zcG9ydCBsYXllciB3aWxsIGFsc28gYXV0b21hdGljYWxseSBjb25maWd1cmUgdGhlXG4gKiBtaWNyb3Bob25lIGFuZCBhdWRpbyBvdXRwdXQgdG8gYmUgdXNlZCBieSB0aGUgc2Vzc2lvbi5cbiAqXG4gKiBZb3UgY2FuIGFsc28gY3JlYXRlIGEgdHJhbnNwb3J0IGxheWVyIGluc3RhbmNlIHlvdXJzZWxmIGFuZCBwYXNzIGl0IGluIHRvIGhhdmUgbW9yZSBjb250cm9sIG92ZXJcbiAqIHRoZSBjb25maWd1cmF0aW9uIG9yIGV2ZW4gZXh0ZW5kIHRoZSBleGlzdGluZyBvbmVzLiBDaGVjayBvdXQgdGhlIGBUd2lsaW9SZWFsdGltZVRyYW5zcG9ydExheWVyYFxuICogZm9yIGFuIGV4YW1wbGUgb2YgaG93IHRvIGNyZWF0ZSBhIGN1c3RvbSB0cmFuc3BvcnQgbGF5ZXIuXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjb25zdCBhZ2VudCA9IG5ldyBSZWFsdGltZUFnZW50KHtcbiAqICAgbmFtZTogJ215LWFnZW50JyxcbiAqICAgaW5zdHJ1Y3Rpb25zOiAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50IHRoYXQgY2FuIGFuc3dlciBxdWVzdGlvbnMgYW5kIGhlbHAgd2l0aCB0YXNrcy4nLFxuICogfSlcbiAqXG4gKiBjb25zdCBzZXNzaW9uID0gbmV3IFJlYWx0aW1lU2Vzc2lvbihhZ2VudCk7XG4gKiBzZXNzaW9uLmNvbm5lY3Qoe1xuICogICBhcGlLZXk6ICd5b3VyLWFwaS1rZXknLFxuICogfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFJlYWx0aW1lU2Vzc2lvbiBleHRlbmRzIFJ1bnRpbWVFdmVudEVtaXR0ZXIge1xuICAgIGluaXRpYWxBZ2VudDtcbiAgICBvcHRpb25zO1xuICAgICN0cmFuc3BvcnQ7XG4gICAgI2N1cnJlbnRBZ2VudDtcbiAgICAjY3VycmVudFRvb2xzID0gW107XG4gICAgI2NvbnRleHQ7XG4gICAgI291dHB1dEd1YXJkcmFpbHMgPSBbXTtcbiAgICAjb3V0cHV0R3VhcmRyYWlsU2V0dGluZ3M7XG4gICAgI3RyYW5zY3JpYmVkVGV4dERlbHRhcyA9IHt9O1xuICAgICNoaXN0b3J5ID0gW107XG4gICAgI3Nob3VsZEluY2x1ZGVBdWRpb0RhdGE7XG4gICAgI2ludGVycnVwdGVkQnlHdWFyZHJhaWwgPSB7fTtcbiAgICBjb25zdHJ1Y3Rvcihpbml0aWFsQWdlbnQsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmluaXRpYWxBZ2VudCA9IGluaXRpYWxBZ2VudDtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgaWYgKCh0eXBlb2Ygb3B0aW9ucy50cmFuc3BvcnQgPT09ICd1bmRlZmluZWQnICYmIGhhc1dlYlJUQ1N1cHBvcnQoKSkgfHxcbiAgICAgICAgICAgIG9wdGlvbnMudHJhbnNwb3J0ID09PSAnd2VicnRjJykge1xuICAgICAgICAgICAgdGhpcy4jdHJhbnNwb3J0ID0gbmV3IE9wZW5BSVJlYWx0aW1lV2ViUlRDKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy50cmFuc3BvcnQgPT09ICd3ZWJzb2NrZXQnIHx8XG4gICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy50cmFuc3BvcnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQgPSBuZXcgT3BlbkFJUmVhbHRpbWVXZWJTb2NrZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuI3RyYW5zcG9ydCA9IG9wdGlvbnMudHJhbnNwb3J0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudCA9IGluaXRpYWxBZ2VudDtcbiAgICAgICAgdGhpcy4jY29udGV4dCA9IG5ldyBSdW5Db250ZXh0KHtcbiAgICAgICAgICAgIC4uLihvcHRpb25zLmNvbnRleHQgPz8ge30pLFxuICAgICAgICAgICAgaGlzdG9yeTogdGhpcy4jaGlzdG9yeSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI291dHB1dEd1YXJkcmFpbHMgPSAob3B0aW9ucy5vdXRwdXRHdWFyZHJhaWxzID8/IFtdKS5tYXAoZGVmaW5lUmVhbHRpbWVPdXRwdXRHdWFyZHJhaWwpO1xuICAgICAgICB0aGlzLiNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncyA9IGdldFJlYWx0aW1lR3VhcmRyYWlsU2V0dGluZ3Mob3B0aW9ucy5vdXRwdXRHdWFyZHJhaWxTZXR0aW5ncyA/PyB7fSk7XG4gICAgICAgIHRoaXMuI3Nob3VsZEluY2x1ZGVBdWRpb0RhdGEgPSBvcHRpb25zLmhpc3RvcnlTdG9yZUF1ZGlvID8/IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgdHJhbnNwb3J0IGxheWVyIHVzZWQgYnkgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IHRyYW5zcG9ydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI3RyYW5zcG9ydDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgYWdlbnQgaW4gdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IGN1cnJlbnRBZ2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRBZ2VudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgdXNhZ2Ugb2YgdGhlIHNlc3Npb24uXG4gICAgICovXG4gICAgZ2V0IHVzYWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jY29udGV4dC51c2FnZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGN1cnJlbnQgY29udGV4dCBvZiB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBnZXQgY29udGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2NvbnRleHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhlIHNlc3Npb24gaXMgbXV0ZWQuIE1pZ2h0IGJlIGBudWxsYCBpZiB0aGUgdW5kZXJseWluZyB0cmFuc3BvcnQgbGF5ZXIgZG9lcyBub3RcbiAgICAgKiBzdXBwb3J0IG11dGluZy5cbiAgICAgKi9cbiAgICBnZXQgbXV0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiN0cmFuc3BvcnQubXV0ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBoaXN0b3J5IG9mIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGdldCBoaXN0b3J5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy4jaGlzdG9yeTtcbiAgICB9XG4gICAgYXN5bmMgI3NldEN1cnJlbnRBZ2VudChhZ2VudCkge1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQgPSBhZ2VudDtcbiAgICAgICAgY29uc3QgaGFuZG9mZnMgPSB0aGlzLiNjdXJyZW50QWdlbnQuaGFuZG9mZnMubWFwKGdldEhhbmRvZmYpO1xuICAgICAgICBjb25zdCBoYW5kb2ZmVG9vbHMgPSBoYW5kb2Zmcy5tYXAoKGhhbmRvZmYpID0+IGhhbmRvZmYuZ2V0SGFuZG9mZkFzRnVuY3Rpb25Ub29sKCkpO1xuICAgICAgICB0aGlzLiNjdXJyZW50VG9vbHMgPSBbXG4gICAgICAgICAgICAuLi4oYXdhaXQgdGhpcy4jY3VycmVudEFnZW50LmdldEFsbFRvb2xzKCkpLmZpbHRlcigodG9vbCkgPT4gdG9vbC50eXBlID09PSAnZnVuY3Rpb24nKSxcbiAgICAgICAgICAgIC4uLmhhbmRvZmZUb29scyxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgYXN5bmMgI2dldFNlc3Npb25Db25maWcoYWRkaXRpb25hbENvbmZpZyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGluc3RydWN0aW9ucyA9IGF3YWl0IHRoaXMuI2N1cnJlbnRBZ2VudC5nZXRTeXN0ZW1Qcm9tcHQodGhpcy4jY29udGV4dCk7XG4gICAgICAgIGNvbnN0IHRyYWNpbmdDb25maWcgPSB0aGlzLm9wdGlvbnNcbiAgICAgICAgICAgIC50cmFjaW5nRGlzYWJsZWRcbiAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgOiB0aGlzLm9wdGlvbnMud29ya2Zsb3dOYW1lXG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIHdvcmtmbG93X25hbWU6IHRoaXMub3B0aW9ucy53b3JrZmxvd05hbWUsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIDogJ2F1dG8nO1xuICAgICAgICBpZiAodHJhY2luZ0NvbmZpZyAhPT0gbnVsbCAmJiB0cmFjaW5nQ29uZmlnICE9PSAnYXV0bycpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZ3JvdXBJZCkge1xuICAgICAgICAgICAgICAgIHRyYWNpbmdDb25maWcuZ3JvdXBfaWQgPSB0aGlzLm9wdGlvbnMuZ3JvdXBJZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHJhY2VNZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgIHRyYWNpbmdDb25maWcubWV0YWRhdGEgPSB0aGlzLm9wdGlvbnMudHJhY2VNZXRhZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLm9wdGlvbnMuZ3JvdXBJZCB8fCB0aGlzLm9wdGlvbnMudHJhY2VNZXRhZGF0YSkge1xuICAgICAgICAgICAgbG9nZ2VyLndhcm4oJ0luIG9yZGVyIHRvIHNldCB0cmFjZU1ldGFkYXRhIG9yIGEgZ3JvdXBJZCB5b3UgbmVlZCB0byBzcGVjaWZ5IGEgd29ya2Zsb3dOYW1lLicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMsXG4gICAgICAgICAgICB2b2ljZTogdGhpcy4jY3VycmVudEFnZW50LnZvaWNlLFxuICAgICAgICAgICAgbW9kZWw6IHRoaXMub3B0aW9ucy5tb2RlbCxcbiAgICAgICAgICAgIHRvb2xzOiB0aGlzLiNjdXJyZW50VG9vbHMsXG4gICAgICAgICAgICB0cmFjaW5nOiB0cmFjaW5nQ29uZmlnLFxuICAgICAgICAgICAgLi4uYWRkaXRpb25hbENvbmZpZyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgdXBkYXRlQWdlbnQobmV3QWdlbnQpIHtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X2hhbmRvZmYnLCB0aGlzLiNjb250ZXh0LCBuZXdBZ2VudCk7XG4gICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCwgbmV3QWdlbnQpO1xuICAgICAgICBhd2FpdCB0aGlzLiNzZXRDdXJyZW50QWdlbnQobmV3QWdlbnQpO1xuICAgICAgICBhd2FpdCB0aGlzLiN0cmFuc3BvcnQudXBkYXRlU2Vzc2lvbkNvbmZpZyhhd2FpdCB0aGlzLiNnZXRTZXNzaW9uQ29uZmlnKCkpO1xuICAgICAgICByZXR1cm4gbmV3QWdlbnQ7XG4gICAgfVxuICAgIGFzeW5jICNoYW5kbGVIYW5kb2ZmKHRvb2xDYWxsLCBoYW5kb2ZmKSB7XG4gICAgICAgIGNvbnN0IG5ld0FnZW50ID0gKGF3YWl0IGhhbmRvZmYub25JbnZva2VIYW5kb2ZmKHRoaXMuI2NvbnRleHQsIHRvb2xDYWxsLmFyZ3VtZW50cykpO1xuICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfaGFuZG9mZicsIHRoaXMuI2NvbnRleHQsIG5ld0FnZW50KTtcbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9oYW5kb2ZmJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCBuZXdBZ2VudCk7XG4gICAgICAgIC8vIHVwZGF0ZSBzZXNzaW9uIHdpdGggbmV3IGFnZW50XG4gICAgICAgIGF3YWl0IHRoaXMuI3NldEN1cnJlbnRBZ2VudChuZXdBZ2VudCk7XG4gICAgICAgIGF3YWl0IHRoaXMuI3RyYW5zcG9ydC51cGRhdGVTZXNzaW9uQ29uZmlnKGF3YWl0IHRoaXMuI2dldFNlc3Npb25Db25maWcoKSk7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGdldFRyYW5zZmVyTWVzc2FnZShuZXdBZ2VudCk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5zZW5kRnVuY3Rpb25DYWxsT3V0cHV0KHRvb2xDYWxsLCBvdXRwdXQsIHRydWUpO1xuICAgICAgICByZXR1cm4gbmV3QWdlbnQ7XG4gICAgfVxuICAgIGFzeW5jICNoYW5kbGVGdW5jdGlvblRvb2xDYWxsKHRvb2xDYWxsLCB0b29sKSB7XG4gICAgICAgIHRoaXMuI2NvbnRleHQuY29udGV4dC5oaXN0b3J5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLiNoaXN0b3J5KSk7IC8vIGRlZXAgY29weSBvZiB0aGUgaGlzdG9yeVxuICAgICAgICBsZXQgcGFyc2VkQXJncyA9IHRvb2xDYWxsLmFyZ3VtZW50cztcbiAgICAgICAgaWYgKHRvb2wucGFyYW1ldGVycykge1xuICAgICAgICAgICAgaWYgKGlzWm9kT2JqZWN0KHRvb2wucGFyYW1ldGVycykpIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRBcmdzID0gdG9vbC5wYXJhbWV0ZXJzLnBhcnNlKHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkQXJncyA9IEpTT04ucGFyc2UocGFyc2VkQXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmVlZHNBcHByb3ZhbCA9IGF3YWl0IHRvb2wubmVlZHNBcHByb3ZhbCh0aGlzLiNjb250ZXh0LCBwYXJzZWRBcmdzLCB0b29sQ2FsbC5jYWxsSWQpO1xuICAgICAgICBpZiAobmVlZHNBcHByb3ZhbCkge1xuICAgICAgICAgICAgY29uc3QgYXBwcm92YWwgPSB0aGlzLmNvbnRleHQuaXNUb29sQXBwcm92ZWQoe1xuICAgICAgICAgICAgICAgIHRvb2xOYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgICAgICAgY2FsbElkOiB0b29sQ2FsbC5jYWxsSWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChhcHByb3ZhbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRvb2wpO1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdG9vbCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gJ1Rvb2wgZXhlY3V0aW9uIHdhcyBub3QgYXBwcm92ZWQuJztcbiAgICAgICAgICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEZ1bmN0aW9uQ2FsbE91dHB1dCh0b29sQ2FsbCwgcmVzdWx0LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2FnZW50X3Rvb2xfZW5kJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHRoaXMuI2NvbnRleHQsIHRvb2wsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFwcHJvdmFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgndG9vbF9hcHByb3ZhbF9yZXF1ZXN0ZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Z1bmN0aW9uX2FwcHJvdmFsJyxcbiAgICAgICAgICAgICAgICAgICAgdG9vbCxcbiAgICAgICAgICAgICAgICAgICAgYXBwcm92YWxJdGVtOiBuZXcgUnVuVG9vbEFwcHJvdmFsSXRlbSh0b29sQ2FsbCwgdGhpcy4jY3VycmVudEFnZW50KSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF90b29sX3N0YXJ0JywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0b29sKTtcbiAgICAgICAgdGhpcy4jY3VycmVudEFnZW50LmVtaXQoJ2FnZW50X3Rvb2xfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0b29sKTtcbiAgICAgICAgdGhpcy4jY29udGV4dC5jb250ZXh0Lmhpc3RvcnkgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuI2hpc3RvcnkpKTsgLy8gZGVlcCBjb3B5IG9mIHRoZSBoaXN0b3J5XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvb2wuaW52b2tlKHRoaXMuI2NvbnRleHQsIHRvb2xDYWxsLmFyZ3VtZW50cyk7XG4gICAgICAgIGNvbnN0IHN0cmluZ1Jlc3VsdCA9IHRvU21hcnRTdHJpbmcocmVzdWx0KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0LnNlbmRGdW5jdGlvbkNhbGxPdXRwdXQodG9vbENhbGwsIHN0cmluZ1Jlc3VsdCwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfdG9vbF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQsIHRvb2wsIHN0cmluZ1Jlc3VsdCk7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF90b29sX2VuZCcsIHRoaXMuI2NvbnRleHQsIHRvb2wsIHN0cmluZ1Jlc3VsdCk7XG4gICAgfVxuICAgIGFzeW5jICNoYW5kbGVGdW5jdGlvbkNhbGwodG9vbENhbGwpIHtcbiAgICAgICAgY29uc3QgaGFuZG9mZk1hcCA9IG5ldyBNYXAodGhpcy4jY3VycmVudEFnZW50LmhhbmRvZmZzXG4gICAgICAgICAgICAubWFwKGdldEhhbmRvZmYpXG4gICAgICAgICAgICAubWFwKChoYW5kb2ZmKSA9PiBbaGFuZG9mZi50b29sTmFtZSwgaGFuZG9mZl0pKTtcbiAgICAgICAgY29uc3QgZnVuY3Rpb25Ub29sTWFwID0gbmV3IE1hcCgoYXdhaXQgdGhpcy4jY3VycmVudEFnZW50LmdldEFsbFRvb2xzKCkpLm1hcCgodG9vbCkgPT4gW3Rvb2wubmFtZSwgdG9vbF0pKTtcbiAgICAgICAgY29uc3QgcG9zc2libGVIYW5kb2ZmID0gaGFuZG9mZk1hcC5nZXQodG9vbENhbGwubmFtZSk7XG4gICAgICAgIGlmIChwb3NzaWJsZUhhbmRvZmYpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUhhbmRvZmYodG9vbENhbGwsIHBvc3NpYmxlSGFuZG9mZik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBmdW5jdGlvblRvb2wgPSBmdW5jdGlvblRvb2xNYXAuZ2V0KHRvb2xDYWxsLm5hbWUpO1xuICAgICAgICAgICAgaWYgKGZ1bmN0aW9uVG9vbCAmJiBmdW5jdGlvblRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uVG9vbENhbGwodG9vbENhbGwsIGZ1bmN0aW9uVG9vbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7dG9vbENhbGwubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgI3J1bk91dHB1dEd1YXJkcmFpbHMob3V0cHV0LCByZXNwb25zZUlkKSB7XG4gICAgICAgIGlmICh0aGlzLiNvdXRwdXRHdWFyZHJhaWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGd1YXJkcmFpbEFyZ3MgPSB7XG4gICAgICAgICAgICBhZ2VudDogdGhpcy4jY3VycmVudEFnZW50LFxuICAgICAgICAgICAgYWdlbnRPdXRwdXQ6IG91dHB1dCxcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuI2NvbnRleHQsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLiNvdXRwdXRHdWFyZHJhaWxzLm1hcCgoZ3VhcmRyYWlsKSA9PiBndWFyZHJhaWwucnVuKGd1YXJkcmFpbEFyZ3MpKSk7XG4gICAgICAgIGNvbnN0IGZpcnN0VHJpcHdpcmVUcmlnZ2VyZWQgPSByZXN1bHRzLmZpbmQoKHJlc3VsdCkgPT4gcmVzdWx0Lm91dHB1dC50cmlwd2lyZVRyaWdnZXJlZCk7XG4gICAgICAgIGlmIChmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkKSB7XG4gICAgICAgICAgICAvLyB0aGlzIGVuc3VyZXMgdGhhdCBpZiBvbmUgZ3VhcmRyYWlsIGFscmVhZHkgdHJpcHMgYW5kIHdlIGFyZSBpbiB0aGUgbWlkZGxlIG9mIGFub3RoZXJcbiAgICAgICAgICAgIC8vIGd1YXJkcmFpbCBydW4sIHdlIGRvbid0IHRyaXAgYWdhaW5cbiAgICAgICAgICAgIGlmICh0aGlzLiNpbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsW3Jlc3BvbnNlSWRdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4jaW50ZXJydXB0ZWRCeUd1YXJkcmFpbFtyZXNwb25zZUlkXSA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBPdXRwdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZChgT3V0cHV0IGd1YXJkcmFpbCB0cmlnZ2VyZWQ6ICR7SlNPTi5zdHJpbmdpZnkoZmlyc3RUcmlwd2lyZVRyaWdnZXJlZC5vdXRwdXQub3V0cHV0SW5mbyl9YCwgZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCk7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2d1YXJkcmFpbF90cmlwcGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCBlcnJvcik7XG4gICAgICAgICAgICB0aGlzLmludGVycnVwdCgpO1xuICAgICAgICAgICAgY29uc3QgZmVlZGJhY2tUZXh0ID0gZ2V0UmVhbHRpbWVHdWFyZHJhaWxGZWVkYmFja01lc3NhZ2UoZmlyc3RUcmlwd2lyZVRyaWdnZXJlZCk7XG4gICAgICAgICAgICB0aGlzLnNlbmRNZXNzYWdlKGZlZWRiYWNrVGV4dCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgI3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJyonLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgndHJhbnNwb3J0X2V2ZW50JywgZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpbycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpbycsIGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbigndHVybl9zdGFydGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhZ2VudF9zdGFydCcsIHRoaXMuI2NvbnRleHQsIHRoaXMuI2N1cnJlbnRBZ2VudCk7XG4gICAgICAgICAgICB0aGlzLiNjdXJyZW50QWdlbnQuZW1pdCgnYWdlbnRfc3RhcnQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCd0dXJuX2RvbmUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBldmVudC5yZXNwb25zZS5vdXRwdXRbZXZlbnQucmVzcG9uc2Uub3V0cHV0Lmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgY29uc3QgdGV4dE91dHB1dCA9IGdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZShpdGVtKSA/PyAnJztcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYWdlbnRfZW5kJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50LCB0ZXh0T3V0cHV0KTtcbiAgICAgICAgICAgIHRoaXMuI2N1cnJlbnRBZ2VudC5lbWl0KCdhZ2VudF9lbmQnLCB0aGlzLiNjb250ZXh0LCB0ZXh0T3V0cHV0KTtcbiAgICAgICAgICAgIHRoaXMuI3J1bk91dHB1dEd1YXJkcmFpbHModGV4dE91dHB1dCwgZXZlbnQucmVzcG9uc2UuaWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpb19kb25lJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdhdWRpb19zdG9wcGVkJywgdGhpcy4jY29udGV4dCwgdGhpcy4jY3VycmVudEFnZW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBsYXN0UnVuSW5kZXggPSAwO1xuICAgICAgICBsZXQgbGFzdEl0ZW1JZDtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpb190cmFuc2NyaXB0X2RlbHRhJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gZXZlbnQuZGVsdGE7XG4gICAgICAgICAgICAgICAgY29uc3QgaXRlbUlkID0gZXZlbnQuaXRlbUlkO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlSWQgPSBldmVudC5yZXNwb25zZUlkO1xuICAgICAgICAgICAgICAgIGlmIChsYXN0SXRlbUlkICE9PSBpdGVtSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdEl0ZW1JZCA9IGl0ZW1JZDtcbiAgICAgICAgICAgICAgICAgICAgbGFzdFJ1bkluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFRleHQgPSB0aGlzLiN0cmFuc2NyaWJlZFRleHREZWx0YXNbaXRlbUlkXSA/PyAnJztcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUZXh0ID0gY3VycmVudFRleHQgKyBkZWx0YTtcbiAgICAgICAgICAgICAgICB0aGlzLiN0cmFuc2NyaWJlZFRleHREZWx0YXNbaXRlbUlkXSA9IG5ld1RleHQ7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuI291dHB1dEd1YXJkcmFpbFNldHRpbmdzLmRlYm91bmNlVGV4dExlbmd0aCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBuZXdSdW5JbmRleCA9IE1hdGguZmxvb3IobmV3VGV4dC5sZW5ndGggLyB0aGlzLiNvdXRwdXRHdWFyZHJhaWxTZXR0aW5ncy5kZWJvdW5jZVRleHRMZW5ndGgpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdSdW5JbmRleCA+IGxhc3RSdW5JbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBsYXN0UnVuSW5kZXggPSBuZXdSdW5JbmRleDtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgZG9uJ3QgY2FuY2VsIGV4aXN0aW5nIHJ1bnMgYmVjYXVzZSB3ZSB3YW50IHRoZSBmaXJzdCBvbmUgdG8gZmFpbCB0byBmYWlsXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSB0cmFuc3BvcnQgbGF5ZXIgc2hvdWxkIHVwb24gZmFpbHVyZSBoYW5kbGUgdGhlIGludGVycnVwdGlvbiBhbmQgc3RvcCB0aGUgbW9kZWxcbiAgICAgICAgICAgICAgICAgICAgLy8gZnJvbSBnZW5lcmF0aW5nIGZ1cnRoZXJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4jcnVuT3V0cHV0R3VhcmRyYWlscyhuZXdUZXh0LCByZXNwb25zZUlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVycixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5vbignaXRlbV91cGRhdGUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNOZXcgPSAhdGhpcy4jaGlzdG9yeS5zb21lKChpdGVtKSA9PiBpdGVtLml0ZW1JZCA9PT0gZXZlbnQuaXRlbUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNoaXN0b3J5ID0gdXBkYXRlUmVhbHRpbWVIaXN0b3J5KHRoaXMuI2hpc3RvcnksIGV2ZW50LCB0aGlzLiNzaG91bGRJbmNsdWRlQXVkaW9EYXRhKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IHRoaXMuI2hpc3Rvcnk7XG4gICAgICAgICAgICAgICAgaWYgKGlzTmV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFkZGVkSXRlbSA9IHRoaXMuI2hpc3RvcnkuZmluZCgoaXRlbSkgPT4gaXRlbS5pdGVtSWQgPT09IGV2ZW50Lml0ZW1JZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhZGRlZEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnaGlzdG9yeV9hZGRlZCcsIGFkZGVkSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdpdGVtX2RlbGV0ZWQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy4jaGlzdG9yeSA9IHRoaXMuI2hpc3RvcnkuZmlsdGVyKChpdGVtKSA9PiBpdGVtLml0ZW1JZCAhPT0gZXZlbnQuaXRlbUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLiNjb250ZXh0LmNvbnRleHQuaGlzdG9yeSA9IHRoaXMuI2hpc3Rvcnk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdoaXN0b3J5X3VwZGF0ZWQnLCB0aGlzLiNoaXN0b3J5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdmdW5jdGlvbl9jYWxsJywgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZUZ1bmN0aW9uQ2FsbChldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGhhbmRsaW5nIGZ1bmN0aW9uIGNhbGwnLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQub24oJ3VzYWdlX3VwZGF0ZScsICh1c2FnZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy4jY29udGV4dC51c2FnZS5hZGQodXNhZ2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdhdWRpb19pbnRlcnJ1cHRlZCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnYXVkaW9faW50ZXJydXB0ZWQnLCB0aGlzLiNjb250ZXh0LCB0aGlzLiNjdXJyZW50QWdlbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jdHJhbnNwb3J0Lm9uKCdlcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbm5lY3QgdG8gdGhlIHNlc3Npb24uIFRoaXMgd2lsbCBlc3RhYmxpc2ggdGhlIGNvbm5lY3Rpb24gdG8gdGhlIHVuZGVybHlpbmcgdHJhbnNwb3J0IGxheWVyXG4gICAgICogYW5kIHN0YXJ0IHRoZSBzZXNzaW9uLlxuICAgICAqXG4gICAgICogQWZ0ZXIgY29ubmVjdGluZywgdGhlIHNlc3Npb24gd2lsbCBhbHNvIGVtaXQgYSBgaGlzdG9yeV91cGRhdGVkYCBldmVudCB3aXRoIGFuIGVtcHR5IGhpc3RvcnkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFRoZSBvcHRpb25zIGZvciB0aGUgY29ubmVjdGlvbi5cbiAgICAgKi9cbiAgICBhc3luYyBjb25uZWN0KG9wdGlvbnMpIHtcbiAgICAgICAgLy8gbWFrZXMgc3VyZSB0aGUgY3VycmVudCBhZ2VudCBpcyBjb3JyZWN0bHkgc2V0IGFuZCBsb2FkcyB0aGUgdG9vbHNcbiAgICAgICAgYXdhaXQgdGhpcy4jc2V0Q3VycmVudEFnZW50KHRoaXMuaW5pdGlhbEFnZW50KTtcbiAgICAgICAgdGhpcy4jc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgYXdhaXQgdGhpcy4jdHJhbnNwb3J0LmNvbm5lY3Qoe1xuICAgICAgICAgICAgYXBpS2V5OiBvcHRpb25zLmFwaUtleSA/PyB0aGlzLm9wdGlvbnMuYXBpS2V5LFxuICAgICAgICAgICAgbW9kZWw6IHRoaXMub3B0aW9ucy5tb2RlbCxcbiAgICAgICAgICAgIGluaXRpYWxTZXNzaW9uQ29uZmlnOiBhd2FpdCB0aGlzLiNnZXRTZXNzaW9uQ29uZmlnKHRoaXMub3B0aW9ucy5jb25maWcpLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4jaGlzdG9yeSA9IFtdO1xuICAgICAgICB0aGlzLmVtaXQoJ2hpc3RvcnlfdXBkYXRlZCcsIHRoaXMuI2hpc3RvcnkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGhpc3Rvcnkgb2YgdGhlIHNlc3Npb24uXG4gICAgICogQHBhcmFtIG5ld0hpc3RvcnkgLSBUaGUgbmV3IGhpc3RvcnkgdG8gc2V0LlxuICAgICAqL1xuICAgIHVwZGF0ZUhpc3RvcnkobmV3SGlzdG9yeSkge1xuICAgICAgICBsZXQgdXBkYXRlZEhpc3Rvcnk7XG4gICAgICAgIGlmICh0eXBlb2YgbmV3SGlzdG9yeSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdXBkYXRlZEhpc3RvcnkgPSBuZXdIaXN0b3J5KHRoaXMuI2hpc3RvcnkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdXBkYXRlZEhpc3RvcnkgPSBuZXdIaXN0b3J5O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5yZXNldEhpc3RvcnkodGhpcy4jaGlzdG9yeSwgdXBkYXRlZEhpc3RvcnkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGEgbWVzc2FnZSB0byB0aGUgc2Vzc2lvbi5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIHNlbmQuXG4gICAgICogQHBhcmFtIG90aGVyRXZlbnREYXRhIC0gQWRkaXRpb25hbCBldmVudCBkYXRhIHRvIHNlbmQuXG4gICAgICovXG4gICAgc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEgPSB7fSkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZE1lc3NhZ2UobWVzc2FnZSwgb3RoZXJFdmVudERhdGEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNdXRlIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBtdXRlZCAtIFdoZXRoZXIgdG8gbXV0ZSB0aGUgc2Vzc2lvbi5cbiAgICAgKi9cbiAgICBtdXRlKG11dGVkKSB7XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5tdXRlKG11dGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzY29ubmVjdCBmcm9tIHRoZSBzZXNzaW9uLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLiNpbnRlcnJ1cHRlZEJ5R3VhcmRyYWlsID0ge307XG4gICAgICAgIHRoaXMuI3RyYW5zcG9ydC5jbG9zZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kIGF1ZGlvIHRvIHRoZSBzZXNzaW9uLlxuICAgICAqIEBwYXJhbSBhdWRpbyAtIFRoZSBhdWRpbyB0byBzZW5kLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQWRkaXRpb25hbCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBvcHRpb25zLmNvbW1pdCAtIFdoZXRoZXIgdG8gZmluaXNoIHRoZSB0dXJuIHdpdGggdGhpcyBhdWRpby5cbiAgICAgKi9cbiAgICBzZW5kQXVkaW8oYXVkaW8sIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuc2VuZEF1ZGlvKGF1ZGlvLCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJydXB0IHRoZSBzZXNzaW9uIGFydGlmaWNpYWxseSBmb3IgZXhhbXBsZSBpZiB5b3Ugd2FudCB0byBidWlsZCBhIFwic3RvcCB0YWxraW5nXCJcbiAgICAgKiBidXR0b24uXG4gICAgICovXG4gICAgaW50ZXJydXB0KCkge1xuICAgICAgICB0aGlzLiN0cmFuc3BvcnQuaW50ZXJydXB0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcHJvdmUgYSB0b29sIGNhbGwuIFRoaXMgd2lsbCBhbHNvIHRyaWdnZXIgdGhlIHRvb2wgY2FsbCB0byB0aGUgYWdlbnQuXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSBhcHByb3ZhbCBpdGVtIHRvIGFwcHJvdmUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMuYWx3YXlzQXBwcm92ZSAtIFdoZXRoZXIgdG8gYWx3YXlzIGFwcHJvdmUgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBhc3luYyBhcHByb3ZlKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyA9IHsgYWx3YXlzQXBwcm92ZTogZmFsc2UgfSkge1xuICAgICAgICB0aGlzLiNjb250ZXh0LmFwcHJvdmVUb29sKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHRvb2wgPSB0aGlzLiNjdXJyZW50QWdlbnQudG9vbHMuZmluZCgodG9vbCkgPT4gdG9vbC5uYW1lID09PSBhcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lKTtcbiAgICAgICAgaWYgKHRvb2wgJiZcbiAgICAgICAgICAgIHRvb2wudHlwZSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgYXBwcm92YWxJdGVtLnJhd0l0ZW0udHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVGdW5jdGlvblRvb2xDYWxsKGFwcHJvdmFsSXRlbS5yYXdJdGVtLCB0b29sKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBNb2RlbEJlaGF2aW9yRXJyb3IoYFRvb2wgJHthcHByb3ZhbEl0ZW0ucmF3SXRlbS5uYW1lfSBub3QgZm91bmRgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWplY3QgYSB0b29sIGNhbGwuIFRoaXMgd2lsbCBhbHNvIHRyaWdnZXIgdGhlIHRvb2wgY2FsbCB0byB0aGUgYWdlbnQuXG4gICAgICogQHBhcmFtIGFwcHJvdmFsSXRlbSAtIFRoZSBhcHByb3ZhbCBpdGVtIHRvIHJlamVjdC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFkZGl0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5hbHdheXNSZWplY3QgLSBXaGV0aGVyIHRvIGFsd2F5cyByZWplY3QgdGhlIHRvb2wgY2FsbC5cbiAgICAgKi9cbiAgICBhc3luYyByZWplY3QoYXBwcm92YWxJdGVtLCBvcHRpb25zID0geyBhbHdheXNSZWplY3Q6IGZhbHNlIH0pIHtcbiAgICAgICAgdGhpcy4jY29udGV4dC5yZWplY3RUb29sKGFwcHJvdmFsSXRlbSwgb3B0aW9ucyk7XG4gICAgICAgIC8vIHdlIHN0aWxsIG5lZWQgdG8gc2ltdWxhdGUgYSB0b29sIGNhbGwgdG8gdGhlIGFnZW50IHRvIGxldCB0aGUgYWdlbnQga25vd1xuICAgICAgICBjb25zdCB0b29sID0gdGhpcy4jY3VycmVudEFnZW50LnRvb2xzLmZpbmQoKHRvb2wpID0+IHRvb2wubmFtZSA9PT0gYXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZSk7XG4gICAgICAgIGlmICh0b29sICYmXG4gICAgICAgICAgICB0b29sLnR5cGUgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgICAgICAgIGFwcHJvdmFsSXRlbS5yYXdJdGVtLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlRnVuY3Rpb25Ub29sQ2FsbChhcHByb3ZhbEl0ZW0ucmF3SXRlbSwgdG9vbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgTW9kZWxCZWhhdmlvckVycm9yKGBUb29sICR7YXBwcm92YWxJdGVtLnJhd0l0ZW0ubmFtZX0gbm90IGZvdW5kYCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFsdGltZVNlc3Npb24ubWpzLm1hcCIsImltcG9ydCAqIGFzIHV0aWxJbXBvcnQgZnJvbSBcIi4vdXRpbHMubWpzXCI7XG5leHBvcnQgeyBSZWFsdGltZUFnZW50IH0gZnJvbSBcIi4vcmVhbHRpbWVBZ2VudC5tanNcIjtcbmV4cG9ydCB7IFJlYWx0aW1lU2Vzc2lvbiwgfSBmcm9tIFwiLi9yZWFsdGltZVNlc3Npb24ubWpzXCI7XG5leHBvcnQgeyBPcGVuQUlSZWFsdGltZVdlYlJUQywgfSBmcm9tIFwiLi9vcGVuYWlSZWFsdGltZVdlYlJ0Yy5tanNcIjtcbmV4cG9ydCB7IE9wZW5BSVJlYWx0aW1lV2ViU29ja2V0LCB9IGZyb20gXCIuL29wZW5haVJlYWx0aW1lV2Vic29ja2V0Lm1qc1wiO1xuZXhwb3J0IHsgT3BlbkFJUmVhbHRpbWVCYXNlLCBERUZBVUxUX09QRU5BSV9SRUFMVElNRV9NT0RFTCwgREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfU0VTU0lPTl9DT05GSUcsIH0gZnJvbSBcIi4vb3BlbmFpUmVhbHRpbWVCYXNlLm1qc1wiO1xuZXhwb3J0IGNvbnN0IHV0aWxzID0ge1xuICAgIGJhc2U2NFRvQXJyYXlCdWZmZXI6IHV0aWxJbXBvcnQuYmFzZTY0VG9BcnJheUJ1ZmZlcixcbiAgICBhcnJheUJ1ZmZlclRvQmFzZTY0OiB1dGlsSW1wb3J0LmFycmF5QnVmZmVyVG9CYXNlNjQsXG4gICAgZ2V0TGFzdFRleHRGcm9tQXVkaW9PdXRwdXRNZXNzYWdlOiB1dGlsSW1wb3J0LmdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZSxcbn07XG5leHBvcnQgeyBNb2RlbEJlaGF2aW9yRXJyb3IsIE91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkLCB0b29sLCBVc2VyRXJyb3IsIH0gZnJvbSAnQG9wZW5haS9hZ2VudHMtY29yZSc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwIl0sIm5hbWVzIjpbIk1FVEFEQVRBIiwiYmFzZTY0VG9BcnJheUJ1ZmZlciIsImJhc2U2NCIsImJpbmFyeVN0cmluZyIsImxlbiIsImJ5dGVzIiwiaSIsImFycmF5QnVmZmVyVG9CYXNlNjQiLCJhcnJheUJ1ZmZlciIsImdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZSIsIml0ZW0iLCJsYXN0Q29udGVudEl0ZW0iLCJkaWZmUmVhbHRpbWVIaXN0b3J5Iiwib2xkSGlzdG9yeSIsIm5ld0hpc3RvcnkiLCJyZW1vdmFscyIsIm5ld0l0ZW0iLCJhZGRpdGlvbnMiLCJvbGRJdGVtIiwidXBkYXRlcyIsImhhc1dlYlJUQ1N1cHBvcnQiLCJyZW1vdmVBdWRpb0Zyb21Db250ZW50IiwiZW50cnkiLCJ1cGRhdGVSZWFsdGltZUhpc3RvcnkiLCJoaXN0b3J5IiwiZXZlbnQiLCJzaG91bGRJbmNsdWRlQXVkaW9EYXRhIiwibmV3RXZlbnQiLCJleGlzdGluZ0luZGV4IiwiaWR4IiwicHJldkluZGV4IiwiSEVBREVSUyIsIldFQlNPQ0tFVF9NRVRBIiwic2FmZUV4ZWN1dGUiLCJmbiIsImVycm9yIiwibWFrZVBhcnNlYWJsZVRleHRGb3JtYXQiLCJyZXNwb25zZV9mb3JtYXQiLCJwYXJzZXIiLCJvYmoiLCJpZ25vcmVPdmVycmlkZSIsImRlZmF1bHRPcHRpb25zIiwiZ2V0RGVmYXVsdE9wdGlvbnMiLCJvcHRpb25zIiwiem9kRGVmIiwiem9kU2NoZW1hIiwiaXNFbXB0eU9iaiIsIl9rIiwiZ2V0UmVmcyIsIl9vcHRpb25zIiwiY3VycmVudFBhdGgiLCJuYW1lIiwiZGVmIiwiYWRkRXJyb3JNZXNzYWdlIiwicmVzIiwia2V5IiwiZXJyb3JNZXNzYWdlIiwicmVmcyIsInNldFJlc3BvbnNlVmFsdWVBbmRFcnJvcnMiLCJ2YWx1ZSIsInV0aWwiLCJfIiwiYXNzZXJ0SXMiLCJfYXJnIiwiYXNzZXJ0TmV2ZXIiLCJfeCIsIml0ZW1zIiwidmFsaWRLZXlzIiwiayIsImZpbHRlcmVkIiwiZSIsIm9iamVjdCIsImtleXMiLCJhcnIiLCJjaGVja2VyIiwidmFsIiwiam9pblZhbHVlcyIsImFycmF5Iiwic2VwYXJhdG9yIiwib2JqZWN0VXRpbCIsImZpcnN0Iiwic2Vjb25kIiwiWm9kRXJyb3IiLCJpc3N1ZXMiLCJzdWIiLCJzdWJzIiwiYWN0dWFsUHJvdG8iLCJfbWFwcGVyIiwibWFwcGVyIiwiaXNzdWUiLCJmaWVsZEVycm9ycyIsInByb2Nlc3NFcnJvciIsImN1cnIiLCJlbCIsImZvcm1FcnJvcnMiLCJlcnJvclV0aWwiLCJtZXNzYWdlIiwiWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIiwicGFyc2VBbnlEZWYiLCJwYXJzZUFycmF5RGVmIiwiX2IiLCJfYSIsInBhcnNlRGVmIiwicGFyc2VCaWdpbnREZWYiLCJjaGVjayIsInBhcnNlQm9vbGVhbkRlZiIsInBhcnNlQnJhbmRlZERlZiIsIl9kZWYiLCJwYXJzZUNhdGNoRGVmIiwicGFyc2VEYXRlRGVmIiwib3ZlcnJpZGVEYXRlU3RyYXRlZ3kiLCJzdHJhdGVneSIsImludGVnZXJEYXRlUGFyc2VyIiwicGFyc2VEZWZhdWx0RGVmIiwicGFyc2VFZmZlY3RzRGVmIiwiZm9yY2VSZXNvbHV0aW9uIiwicGFyc2VFbnVtRGVmIiwiaXNKc29uU2NoZW1hN0FsbE9mVHlwZSIsInR5cGUiLCJwYXJzZUludGVyc2VjdGlvbkRlZiIsImFsbE9mIiwieCIsInVuZXZhbHVhdGVkUHJvcGVydGllcyIsIm1lcmdlZEFsbE9mIiwic2NoZW1hIiwibmVzdGVkU2NoZW1hIiwiYWRkaXRpb25hbFByb3BlcnRpZXMiLCJyZXN0IiwicGFyc2VMaXRlcmFsRGVmIiwicGFyc2VkVHlwZSIsImVtb2ppUmVnZXgiLCJ6b2RQYXR0ZXJucyIsInBhcnNlU3RyaW5nRGVmIiwicHJvY2Vzc1BhdHRlcm4iLCJlc2NhcGVOb25BbHBoYU51bWVyaWMiLCJhZGRGb3JtYXQiLCJhZGRQYXR0ZXJuIiwiYyIsInJlZ2V4IiwicHJvY2Vzc1JlZ0V4cCIsInJlZ2V4T3JGdW5jdGlvbiIsImZsYWdzIiwic291cmNlIiwicGF0dGVybiIsImlzRXNjYXBlZCIsImluQ2hhckdyb3VwIiwiaW5DaGFyUmFuZ2UiLCJyZWdleFRlc3QiLCJwYXJzZVJlY29yZERlZiIsImFjYyIsIl9jIiwia2V5VHlwZSIsIl9kIiwicGFyc2VNYXBEZWYiLCJ2YWx1ZXMiLCJwYXJzZU5hdGl2ZUVudW1EZWYiLCJhY3R1YWxWYWx1ZXMiLCJwYXJzZWRUeXBlcyIsInBhcnNlTmV2ZXJEZWYiLCJwYXJzZU51bGxEZWYiLCJwcmltaXRpdmVNYXBwaW5ncyIsInBhcnNlVW5pb25EZWYiLCJhc0FueU9mIiwidHlwZXMiLCJ1bmlxdWVUeXBlcyIsImEiLCJhbnlPZiIsInBhcnNlTnVsbGFibGVEZWYiLCJiYXNlIiwicGFyc2VOdW1iZXJEZWYiLCJkZWNpZGVBZGRpdGlvbmFsUHJvcGVydGllcyIsInBhcnNlT2JqZWN0RGVmIiwicmVzdWx0IiwicHJvcE5hbWUiLCJwcm9wRGVmIiwicHJvcGVydHlQYXRoIiwicGFyc2VkRGVmIiwicGFyc2VPcHRpb25hbERlZiIsImlubmVyU2NoZW1hIiwicGFyc2VQaXBlbGluZURlZiIsImIiLCJwYXJzZVByb21pc2VEZWYiLCJwYXJzZVNldERlZiIsInBhcnNlVHVwbGVEZWYiLCJwYXJzZVVuZGVmaW5lZERlZiIsInBhcnNlVW5rbm93bkRlZiIsInBhcnNlUmVhZG9ubHlEZWYiLCJzZWVuSXRlbSIsIm92ZXJyaWRlUmVzdWx0Iiwic2VlblNjaGVtYSIsImdldCRyZWYiLCJqc29uU2NoZW1hIiwic2VsZWN0UGFyc2VyIiwiYWRkTWV0YSIsImdldFJlbGF0aXZlUGF0aCIsImluZGV4IiwicGF0aEEiLCJwYXRoQiIsInR5cGVOYW1lIiwiem9kVG9Kc29uU2NoZW1hIiwibWFpbiIsInRpdGxlIiwiZGVmaW5pdGlvbnMiLCJwcm9jZXNzZWREZWZpbml0aW9ucyIsIm5ld0RlZmluaXRpb25zIiwiY29tYmluZWQiLCJtYWtlUGFyc2VhYmxlUmVzcG9uc2VUb29sIiwidG9vbCIsImNhbGxiYWNrIiwiX3pvZFRvSnNvblNjaGVtYSIsInpvZFRleHRGb3JtYXQiLCJ6b2RPYmplY3QiLCJwcm9wcyIsImNvbnRlbnQiLCJ6b2RSZXNwb25zZXNGdW5jdGlvbiIsImFyZ3MiLCJBZ2VudHNFcnJvciIsInN0YXRlIiwiX19wdWJsaWNGaWVsZCIsIlN5c3RlbUVycm9yIiwiTWF4VHVybnNFeGNlZWRlZEVycm9yIiwiTW9kZWxCZWhhdmlvckVycm9yIiwiVXNlckVycm9yIiwiR3VhcmRyYWlsRXhlY3V0aW9uRXJyb3IiLCJUb29sQ2FsbEVycm9yIiwiSW5wdXRHdWFyZHJhaWxUcmlwd2lyZVRyaWdnZXJlZCIsIk91dHB1dEd1YXJkcmFpbFRyaXB3aXJlVHJpZ2dlcmVkIiwiaXNab2RPYmplY3QiLCJpbnB1dCIsImlzQWdlbnRUb29sSW5wdXQiLCJ0b0Z1bmN0aW9uVG9vbE5hbWUiLCJnZXRTY2hlbWFBbmRQYXJzZXJGcm9tSW5wdXRUeXBlIiwiaW5wdXRUeXBlIiwiZm9ybWF0dGVkRnVuY3Rpb24iLCJjb252ZXJ0QWdlbnRPdXRwdXRUeXBlVG9TZXJpYWxpemFibGUiLCJvdXRwdXRUeXBlIiwib3V0cHV0IiwicyIsIm0iLCJoIiwiZCIsInciLCJ5IiwibXMiLCJwYXJzZSIsImZtdExvbmciLCJmbXRTaG9ydCIsInN0ciIsIm1hdGNoIiwibiIsIm1zQWJzIiwicGx1cmFsIiwiaXNQbHVyYWwiLCJzZXR1cCIsImVudiIsImNyZWF0ZURlYnVnIiwiY29lcmNlIiwiZGlzYWJsZSIsImVuYWJsZSIsImVuYWJsZWQiLCJyZXF1aXJlJCQwIiwiZGVzdHJveSIsInNlbGVjdENvbG9yIiwibmFtZXNwYWNlIiwiaGFzaCIsInByZXZUaW1lIiwiZW5hYmxlT3ZlcnJpZGUiLCJuYW1lc3BhY2VzQ2FjaGUiLCJlbmFibGVkQ2FjaGUiLCJkZWJ1ZyIsInNlbGYiLCJmb3JtYXQiLCJmb3JtYXR0ZXIiLCJleHRlbmQiLCJ2IiwiZGVsaW1pdGVyIiwibmV3RGVidWciLCJuYW1lc3BhY2VzIiwic3BsaXQiLCJucyIsIm1hdGNoZXNUZW1wbGF0ZSIsInNlYXJjaCIsInRlbXBsYXRlIiwic2VhcmNoSW5kZXgiLCJ0ZW1wbGF0ZUluZGV4Iiwic3RhckluZGV4IiwibWF0Y2hJbmRleCIsInNraXAiLCJjb21tb24iLCJleHBvcnRzIiwiZm9ybWF0QXJncyIsInNhdmUiLCJsb2FkIiwidXNlQ29sb3JzIiwibG9jYWxzdG9yYWdlIiwid2FybmVkIiwibW9kdWxlIiwibGFzdEMiLCJyIiwiZm9ybWF0dGVycyIsImxvYWRFbnYiLCJfbG9hZEVudiIsImlzRW5hYmxlZCIsImZsYWdOYW1lIiwidHJhY2luZyIsImxvZ2dpbmciLCJkb250TG9nTW9kZWxEYXRhIiwiZG9udExvZ1Rvb2xEYXRhIiwiZ2V0TG9nZ2VyIiwibG9nZ2VyIiwidG9TbWFydFN0cmluZyIsImRlZmF1bHRUb29sRXJyb3JGdW5jdGlvbiIsImNvbnRleHQiLCJ0b29sRXJyb3JGdW5jdGlvbiIsInN0cmljdE1vZGUiLCJwYXJhbWV0ZXJzIiwiX2ludm9rZSIsInJ1bkNvbnRleHQiLCJwYXJzZWQiLCJzdHJpbmdSZXN1bHQiLCJpbnZva2UiLCJjdXJyZW50U3BhbiIsImdldEN1cnJlbnRTcGFuIiwibmVlZHNBcHByb3ZhbCIsIlpvZFBhcnNlZFR5cGUiLCJnZXRQYXJzZWRUeXBlIiwiZGF0YSIsIlpvZElzc3VlQ29kZSIsImVycm9yTWFwIiwiX2N0eCIsIm92ZXJyaWRlRXJyb3JNYXAiLCJkZWZhdWx0RXJyb3JNYXAiLCJnZXRFcnJvck1hcCIsIm1ha2VJc3N1ZSIsInBhcmFtcyIsInBhdGgiLCJlcnJvck1hcHMiLCJpc3N1ZURhdGEiLCJmdWxsUGF0aCIsImZ1bGxJc3N1ZSIsIm1hcHMiLCJtYXAiLCJhZGRJc3N1ZVRvQ29udGV4dCIsImN0eCIsIm92ZXJyaWRlTWFwIiwiUGFyc2VTdGF0dXMiLCJzdGF0dXMiLCJyZXN1bHRzIiwiYXJyYXlWYWx1ZSIsIklOVkFMSUQiLCJwYWlycyIsInN5bmNQYWlycyIsInBhaXIiLCJmaW5hbE9iamVjdCIsIkRJUlRZIiwiT0siLCJpc0Fib3J0ZWQiLCJpc0RpcnR5IiwiaXNWYWxpZCIsImlzQXN5bmMiLCJQYXJzZUlucHV0TGF6eVBhdGgiLCJwYXJlbnQiLCJoYW5kbGVSZXN1bHQiLCJwcm9jZXNzQ3JlYXRlUGFyYW1zIiwiaW52YWxpZF90eXBlX2Vycm9yIiwicmVxdWlyZWRfZXJyb3IiLCJkZXNjcmlwdGlvbiIsImlzcyIsIlpvZFR5cGUiLCJlcnIiLCJtYXliZUFzeW5jUmVzdWx0IiwiZ2V0SXNzdWVQcm9wZXJ0aWVzIiwic2V0RXJyb3IiLCJyZWZpbmVtZW50RGF0YSIsInJlZmluZW1lbnQiLCJab2RFZmZlY3RzIiwiWm9kT3B0aW9uYWwiLCJab2ROdWxsYWJsZSIsIlpvZEFycmF5IiwiWm9kUHJvbWlzZSIsIm9wdGlvbiIsIlpvZFVuaW9uIiwiaW5jb21pbmciLCJab2RJbnRlcnNlY3Rpb24iLCJ0cmFuc2Zvcm0iLCJkZWZhdWx0VmFsdWVGdW5jIiwiWm9kRGVmYXVsdCIsIlpvZEJyYW5kZWQiLCJjYXRjaFZhbHVlRnVuYyIsIlpvZENhdGNoIiwiVGhpcyIsInRhcmdldCIsIlpvZFBpcGVsaW5lIiwiWm9kUmVhZG9ubHkiLCJjdWlkUmVnZXgiLCJjdWlkMlJlZ2V4IiwidWxpZFJlZ2V4IiwidXVpZFJlZ2V4IiwibmFub2lkUmVnZXgiLCJqd3RSZWdleCIsImR1cmF0aW9uUmVnZXgiLCJlbWFpbFJlZ2V4IiwiX2Vtb2ppUmVnZXgiLCJpcHY0UmVnZXgiLCJpcHY0Q2lkclJlZ2V4IiwiaXB2NlJlZ2V4IiwiaXB2NkNpZHJSZWdleCIsImJhc2U2NFJlZ2V4IiwiYmFzZTY0dXJsUmVnZXgiLCJkYXRlUmVnZXhTb3VyY2UiLCJkYXRlUmVnZXgiLCJ0aW1lUmVnZXhTb3VyY2UiLCJzZWNvbmRzUmVnZXhTb3VyY2UiLCJzZWNvbmRzUXVhbnRpZmllciIsInRpbWVSZWdleCIsImRhdGV0aW1lUmVnZXgiLCJvcHRzIiwiaXNWYWxpZElQIiwiaXAiLCJ2ZXJzaW9uIiwiaXNWYWxpZEpXVCIsImp3dCIsImFsZyIsImhlYWRlciIsImRlY29kZWQiLCJpc1ZhbGlkQ2lkciIsIlpvZFN0cmluZyIsInRvb0JpZyIsInRvb1NtYWxsIiwidmFsaWRhdGlvbiIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsImNoIiwibWluIiwibWF4IiwiZmxvYXRTYWZlUmVtYWluZGVyIiwic3RlcCIsInZhbERlY0NvdW50Iiwic3RlcERlY0NvdW50IiwiZGVjQ291bnQiLCJ2YWxJbnQiLCJzdGVwSW50IiwiWm9kTnVtYmVyIiwia2luZCIsImluY2x1c2l2ZSIsIlpvZEJpZ0ludCIsIlpvZEJvb2xlYW4iLCJab2REYXRlIiwibWluRGF0ZSIsIm1heERhdGUiLCJab2RTeW1ib2wiLCJab2RVbmRlZmluZWQiLCJab2ROdWxsIiwiWm9kQW55IiwiWm9kVW5rbm93biIsIlpvZE5ldmVyIiwiWm9kVm9pZCIsImRlZXBQYXJ0aWFsaWZ5IiwiWm9kT2JqZWN0IiwibmV3U2hhcGUiLCJmaWVsZFNjaGVtYSIsIlpvZFR1cGxlIiwic2hhcGUiLCJzaGFwZUtleXMiLCJleHRyYUtleXMiLCJrZXlWYWxpZGF0b3IiLCJ1bmtub3duS2V5cyIsImNhdGNoYWxsIiwiZGVmYXVsdEVycm9yIiwiYXVnbWVudGF0aW9uIiwibWVyZ2luZyIsIm1hc2siLCJuZXdGaWVsZCIsImNyZWF0ZVpvZEVudW0iLCJoYW5kbGVSZXN1bHRzIiwidW5pb25FcnJvcnMiLCJjaGlsZEN0eCIsImRpcnR5IiwiZ2V0RGlzY3JpbWluYXRvciIsIlpvZExhenkiLCJab2RMaXRlcmFsIiwiWm9kRW51bSIsIlpvZE5hdGl2ZUVudW0iLCJab2REaXNjcmltaW5hdGVkVW5pb24iLCJkaXNjcmltaW5hdG9yIiwiZGlzY3JpbWluYXRvclZhbHVlIiwib3B0aW9uc01hcCIsImRpc2NyaW1pbmF0b3JWYWx1ZXMiLCJtZXJnZVZhbHVlcyIsImFUeXBlIiwiYlR5cGUiLCJiS2V5cyIsInNoYXJlZEtleXMiLCJuZXdPYmoiLCJzaGFyZWRWYWx1ZSIsIm5ld0FycmF5IiwiaXRlbUEiLCJpdGVtQiIsImhhbmRsZVBhcnNlZCIsInBhcnNlZExlZnQiLCJwYXJzZWRSaWdodCIsIm1lcmdlZCIsImxlZnQiLCJyaWdodCIsIml0ZW1JbmRleCIsInNjaGVtYXMiLCJab2RSZWNvcmQiLCJ2YWx1ZVR5cGUiLCJ0aGlyZCIsIlpvZE1hcCIsImZpbmFsTWFwIiwiWm9kU2V0IiwiZmluYWxpemVTZXQiLCJlbGVtZW50cyIsInBhcnNlZFNldCIsImVsZW1lbnQiLCJtaW5TaXplIiwibWF4U2l6ZSIsInNpemUiLCJnZXR0ZXIiLCJleHBlY3RlZFZhbHVlcyIsImVudW1WYWx1ZXMiLCJuZXdEZWYiLCJvcHQiLCJuYXRpdmVFbnVtVmFsdWVzIiwicHJvbWlzaWZpZWQiLCJlZmZlY3QiLCJjaGVja0N0eCIsImFyZyIsInByb2Nlc3NlZCIsImV4ZWN1dGVSZWZpbmVtZW50IiwiaW5uZXIiLCJwcmVwcm9jZXNzIiwibmV3Q3R4IiwiWm9kTmFOIiwiaW5SZXN1bHQiLCJmcmVlemUiLCJzdHJpbmdUeXBlIiwibnVtYmVyVHlwZSIsImJvb2xlYW5UeXBlIiwiYW55VHlwZSIsImFycmF5VHlwZSIsIm9iamVjdFR5cGUiLCJ1bmlvblR5cGUiLCJkaXNjcmltaW5hdGVkVW5pb25UeXBlIiwicmVjb3JkVHlwZSIsImxhenlUeXBlIiwibGl0ZXJhbFR5cGUiLCJlbnVtVHlwZSIsInoub2JqZWN0Iiwiei5zdHJpbmciLCJ6LmxpdGVyYWwiLCJ6LnJlY29yZCIsInouYW55Iiwiei5hcnJheSIsInouYm9vbGVhbiIsImdldEFsbE1jcEZ1bmN0aW9uVG9vbHMiLCJtY3BTZXJ2ZXJzIiwiY29udmVydFNjaGVtYXNUb1N0cmljdCIsImFsbFRvb2xzIiwidG9vbE5hbWVzIiwic2VydmVyIiwic2VydmVyVG9vbHMiLCJnZXRGdW5jdGlvblRvb2xzRnJvbVNlcnZlciIsImludGVyc2VjdGlvbiIsInQiLCJfY2FjaGVkVG9vbHMiLCJ3aXRoTUNQTGlzdFRvb2xzU3BhbiIsInNwYW4iLCJtY3BUb29scyIsInRvb2xzIiwibWNwVG9GdW5jdGlvblRvb2wiLCJnZXRBbGxNY3BUb29scyIsIm1jcFRvb2wiLCJfY29udGV4dCIsInN0cmljdFNjaGVtYSIsImVuc3VyZVN0cmljdEpzb25TY2hlbWEiLCJnbG9iYWxMb2dnZXIiLCJub25TdHJpY3RTY2hlbWEiLCJvdXQiLCJCcm93c2VyRXZlbnRFbWl0dGVyIiwiX19wcml2YXRlQWRkIiwiX3RhcmdldCIsImxpc3RlbmVyIiwiX19wcml2YXRlR2V0IiwiaGFuZGxlciIsInJhbmRvbVVVSUQiLCJSZWFkYWJsZSIsIl9kZXN0aW5hdGlvbiIsIl90cmFuc2Zvcm0iLCJSZWFkYWJsZVN0cmVhbSIsIlRyYW5zZm9ybVN0cmVhbSIsIkFzeW5jTG9jYWxTdG9yYWdlIiwiQnJvd3NlclRpbWVyIiwidGltZW91dCIsInRpbWVvdXRJZCIsInRpbWVyIiwiX2NvbnRleHRBc3luY0xvY2FsU3RvcmFnZSIsImdldENvbnRleHRBc3luY0xvY2FsU3RvcmFnZSIsImdldEN1cnJlbnRUcmFjZSIsImN1cnJlbnRUcmFjZSIsIl93cmFwRnVuY3Rpb25XaXRoVHJhY2VMaWZlY3ljbGUiLCJ0cmFjZSIsIndpdGhUcmFjZSIsIm5ld1RyYWNlIiwiZ2V0R2xvYmFsVHJhY2VQcm92aWRlciIsImdldE9yQ3JlYXRlVHJhY2UiLCJzZXRDdXJyZW50U3BhbiIsInJlc2V0Q3VycmVudFNwYW4iLCJhZGRFcnJvclRvQ3VycmVudFNwYW4iLCJzcGFuRXJyb3IiLCJjbG9uZUN1cnJlbnRDb250ZXh0Iiwid2l0aE5ld1NwYW5Db250ZXh0IiwiY3VycmVudENvbnRleHQiLCJjb3B5T2ZDb250ZXh0IiwiQ29uc29sZVNwYW5FeHBvcnRlciIsIkJhdGNoVHJhY2VQcm9jZXNzb3IiLCJleHBvcnRlciIsIm1heFF1ZXVlU2l6ZSIsIm1heEJhdGNoU2l6ZSIsInNjaGVkdWxlRGVsYXkiLCJleHBvcnRUcmlnZ2VyUmF0aW8iLCJfQmF0Y2hUcmFjZVByb2Nlc3Nvcl9pbnN0YW5jZXMiLCJfbWF4UXVldWVTaXplIiwiX21heEJhdGNoU2l6ZSIsIl9zY2hlZHVsZURlbGF5IiwiX2V4cG9ydFRyaWdnZXJTaXplIiwiX2V4cG9ydGVyIiwiX2J1ZmZlciIsIl90aW1lciIsIl90aW1lb3V0IiwiX2V4cG9ydEluUHJvZ3Jlc3MiLCJfdGltZW91dEFib3J0Q29udHJvbGxlciIsIl9fcHJpdmF0ZVNldCIsIl9fcHJpdmF0ZU1ldGhvZCIsInJ1bkV4cG9ydExvb3BfZm4iLCJzYWZlQWRkSXRlbV9mbiIsIl90cmFjZSIsIl9zcGFuIiwiZXhwb3J0QmF0Y2hlc19mbiIsInJlc29sdmUiLCJmb3JjZSIsInRvRXhwb3J0IiwiYmF0Y2giLCJNdWx0aVRyYWNpbmdQcm9jZXNzb3IiLCJfcHJvY2Vzc29ycyIsInByb2Nlc3NvciIsInByb2Nlc3NvcnMiLCJfZGVmYXVsdEV4cG9ydGVyIiwiX2RlZmF1bHRQcm9jZXNzb3IiLCJkZWZhdWx0RXhwb3J0ZXIiLCJkZWZhdWx0UHJvY2Vzc29yIiwidGltZUlzbyIsImdlbmVyYXRlVHJhY2VJZCIsImdlbmVyYXRlU3BhbklkIiwicmVtb3ZlUHJpdmF0ZUZpZWxkcyIsIl9TcGFuIiwiX2RhdGEiLCJfdHJhY2VJZCIsIl9zcGFuSWQiLCJfcGFyZW50SWQiLCJfcHJvY2Vzc29yIiwiX3N0YXJ0ZWRBdCIsIl9lbmRlZEF0IiwiX2Vycm9yIiwiX3ByZXZpb3VzU3BhbiIsIlNwYW4iLCJOb29wU3BhbiIsIl9UcmFjZSIsIl9zdGFydGVkIiwiVHJhY2UiLCJOb29wVHJhY2UiLCJUcmFjZVByb3ZpZGVyIiwiX1RyYWNlUHJvdmlkZXJfaW5zdGFuY2VzIiwiX211bHRpUHJvY2Vzc29yIiwiX2Rpc2FibGVkIiwiYWRkQ2xlYW51cExpc3RlbmVyc19mbiIsImRpc2FibGVkIiwidHJhY2VPcHRpb25zIiwidHJhY2VJZCIsInNwYW5PcHRpb25zIiwicGFyZW50SWQiLCJjbGVhbnVwIiwicmVhc29uIiwicHJvbWlzZSIsIkdMT0JBTF9UUkFDRV9QUk9WSURFUiIsIl93aXRoU3BhbkZhY3RvcnkiLCJjcmVhdGVTcGFuIiwiY3JlYXRlQWdlbnRTcGFuIiwiY3JlYXRlRnVuY3Rpb25TcGFuIiwid2l0aEZ1bmN0aW9uU3BhbiIsImNyZWF0ZUhhbmRvZmZTcGFuIiwid2l0aEhhbmRvZmZTcGFuIiwiY3JlYXRlR3VhcmRyYWlsU3BhbiIsIndpdGhHdWFyZHJhaWxTcGFuIiwiY3JlYXRlTUNQTGlzdFRvb2xzU3BhbiIsImFkZFRyYWNlUHJvY2Vzc29yIiwiRXZlbnRFbWl0dGVyRGVsZWdhdGUiLCJBZ2VudEhvb2tzIiwiUnVudGltZUV2ZW50RW1pdHRlciIsIlJ1bkhvb2tzIiwiZGVmaW5lSW5wdXRHdWFyZHJhaWwiLCJleGVjdXRlIiwiZGVmaW5lT3V0cHV0R3VhcmRyYWlsIiwiZ2V0VHJhbnNmZXJNZXNzYWdlIiwiYWdlbnQiLCJkZWZhdWx0SGFuZG9mZlRvb2xOYW1lIiwiZGVmYXVsdEhhbmRvZmZUb29sRGVzY3JpcHRpb24iLCJIYW5kb2ZmIiwib25JbnZva2VIYW5kb2ZmIiwiaGFuZG9mZiIsImNvbmZpZyIsImhhc09uSGFuZG9mZiIsImhhc0lucHV0VHlwZSIsImlucHV0SnNvblN0cmluZyIsImdldEhhbmRvZmYiLCJnZXREZWZhdWx0TW9kZWxQcm92aWRlciIsIlNoYXJlZEJhc2UiLCJJdGVtQmFzZSIsIlJlZnVzYWwiLCJPdXRwdXRUZXh0IiwiSW5wdXRUZXh0IiwiSW5wdXRJbWFnZSIsInpcbiAgICAgICAgLnN0cmluZyIsIklucHV0RmlsZSIsIkF1ZGlvQ29udGVudCIsIkltYWdlQ29udGVudCIsIlRvb2xPdXRwdXRUZXh0IiwiVG9vbE91dHB1dEltYWdlIiwiQ29tcHV0ZXJUb29sT3V0cHV0IiwiY29tcHV0ZXJBY3Rpb25zIiwiei5kaXNjcmltaW5hdGVkVW5pb24iLCJ6Lm51bWJlciIsInouZW51bSIsIkFzc2lzdGFudENvbnRlbnQiLCJNZXNzYWdlQmFzZSIsIkFzc2lzdGFudE1lc3NhZ2VJdGVtIiwiVXNlckNvbnRlbnQiLCJVc2VyTWVzc2FnZUl0ZW0iLCJTeXN0ZW1NZXNzYWdlSXRlbSIsIkhvc3RlZFRvb2xDYWxsSXRlbSIsIkZ1bmN0aW9uQ2FsbEl0ZW0iLCJGdW5jdGlvbkNhbGxSZXN1bHRJdGVtIiwiQ29tcHV0ZXJVc2VDYWxsSXRlbSIsIkNvbXB1dGVyQ2FsbFJlc3VsdEl0ZW0iLCJUb29sQ2FsbEl0ZW0iLCJSZWFzb25pbmdJdGVtIiwiVW5rbm93bkl0ZW0iLCJPdXRwdXRNb2RlbEl0ZW0iLCJNb2RlbEl0ZW0iLCJ6LnVuaW9uIiwiVXNhZ2VEYXRhIiwiU3RyZWFtRXZlbnRUZXh0U3RyZWFtIiwiU3RyZWFtRXZlbnRSZXNwb25zZVN0YXJ0ZWQiLCJTdHJlYW1FdmVudFJlc3BvbnNlQ29tcGxldGVkIiwiU3RyZWFtRXZlbnRHZW5lcmljSXRlbSIsIlVzYWdlIiwibmV3VXNhZ2UiLCJSdW5Db250ZXh0IiwiX2FwcHJvdmFscyIsImFwcHJvdmFscyIsInRvb2xOYW1lIiwiY2FsbElkIiwiYXBwcm92YWxFbnRyeSIsImluZGl2aWR1YWxDYWxsQXBwcm92YWwiLCJpbmRpdmlkdWFsQ2FsbFJlamVjdGlvbiIsImFwcHJvdmFsSXRlbSIsImFsd2F5c0FwcHJvdmUiLCJhbHdheXNSZWplY3QiLCJSdW5SZXN1bHRCYXNlIiwiZ2V0VHVybklucHV0IiwicmVzcG9uc2VzIiwiUnVuUmVzdWx0IiwiU3RyZWFtZWRSdW5SZXN1bHQiLCJfc2lnbmFsIiwiX3JlYWRhYmxlQ29udHJvbGxlciIsIl9yZWFkYWJsZVN0cmVhbSIsIl9jb21wbGV0ZWRQcm9taXNlIiwiX2NvbXBsZXRlZFByb21pc2VSZXNvbHZlIiwiX2NvbXBsZXRlZFByb21pc2VSZWplY3QiLCJfY2FuY2VsbGVkIiwiX1JlYWRhYmxlU3RyZWFtIiwiY29udHJvbGxlciIsInJlamVjdCIsInN0cmVhbSIsInNlcmlhbGl6ZVRvb2wiLCJzZXJpYWxpemVIYW5kb2ZmIiwiUnVuSXRlbUJhc2UiLCJSdW5NZXNzYWdlT3V0cHV0SXRlbSIsInJhd0l0ZW0iLCJwYXJ0IiwiUnVuVG9vbENhbGxJdGVtIiwiUnVuVG9vbENhbGxPdXRwdXRJdGVtIiwiUnVuUmVhc29uaW5nSXRlbSIsIlJ1bkhhbmRvZmZDYWxsSXRlbSIsIlJ1bkhhbmRvZmZPdXRwdXRJdGVtIiwic291cmNlQWdlbnQiLCJ0YXJnZXRBZ2VudCIsIlJ1blRvb2xBcHByb3ZhbEl0ZW0iLCJnZXRMYXN0VGV4dEZyb21PdXRwdXRNZXNzYWdlIiwib3V0cHV0TWVzc2FnZSIsImxhc3RJdGVtIiwiZ2V0T3V0cHV0VGV4dCIsIlJ1blJhd01vZGVsU3RyZWFtRXZlbnQiLCJSdW5JdGVtU3RyZWFtRXZlbnQiLCJSdW5BZ2VudFVwZGF0ZWRTdHJlYW1FdmVudCIsInByb2Nlc3NNb2RlbFJlc3BvbnNlIiwibW9kZWxSZXNwb25zZSIsImhhbmRvZmZzIiwicnVuSGFuZG9mZnMiLCJydW5GdW5jdGlvbnMiLCJydW5Db21wdXRlckFjdGlvbnMiLCJydW5NQ1BBcHByb3ZhbFJlcXVlc3RzIiwidG9vbHNVc2VkIiwiaGFuZG9mZk1hcCIsImZ1bmN0aW9uTWFwIiwiY29tcHV0ZXJUb29sIiwibWNwVG9vbE1hcCIsInByb3ZpZGVyRGF0YSIsIm1jcFNlcnZlckxhYmVsIiwibWNwU2VydmVyVG9vbCIsImZ1bmN0aW9uVG9vbCIsIm5leHRTdGVwU2NoZW1hIiwiU2luZ2xlU3RlcFJlc3VsdCIsIm9yaWdpbmFsSW5wdXQiLCJwcmVTdGVwSXRlbXMiLCJuZXdTdGVwSXRlbXMiLCJuZXh0U3RlcCIsIm1heWJlUmVzZXRUb29sQ2hvaWNlIiwidG9vbFVzZVRyYWNrZXIiLCJtb2RlbFNldHRpbmdzIiwiZXhlY3V0ZUludGVycnVwdGVkVG9vbHNBbmRTaWRlRWZmZWN0cyIsIm9yaWdpbmFsUHJlU3RlcEl0ZW1zIiwibmV3UmVzcG9uc2UiLCJwcm9jZXNzZWRSZXNwb25zZSIsInJ1bm5lciIsImZ1bmN0aW9uQ2FsbElkcyIsImZ1bmN0aW9uVG9vbFJ1bnMiLCJydW4iLCJmdW5jdGlvblJlc3VsdHMiLCJleGVjdXRlRnVuY3Rpb25Ub29sQ2FsbHMiLCJuZXdJdGVtcyIsIm1jcEFwcHJvdmFsUnVucyIsImFwcHJvdmFsUmVxdWVzdElkIiwiYXBwcm92ZWQiLCJjaGVja1Rvb2xPdXRwdXQiLCJjaGVja0ZvckZpbmFsT3V0cHV0RnJvbVRvb2xzIiwiZXhlY3V0ZVRvb2xzQW5kU2lkZUVmZmVjdHMiLCJjb21wdXRlclJlc3VsdHMiLCJleGVjdXRlQ29tcHV0ZXJBY3Rpb25zIiwiYXBwcm92YWxSZXF1ZXN0IiwidG9vbERhdGEiLCJyZXF1ZXN0RGF0YSIsImFwcHJvdmFsUmVzdWx0IiwiYXBwcm92YWxSZXNwb25zZURhdGEiLCJleGVjdXRlSGFuZG9mZkNhbGxzIiwibWVzc2FnZUl0ZW1zIiwicG90ZW50aWFsRmluYWxPdXRwdXQiLCJnZXRUb29sQ2FsbE91dHB1dEl0ZW0iLCJ0b29sQ2FsbCIsInRvb2xSdW5zIiwicnVuU2luZ2xlVG9vbCIsInRvb2xSdW4iLCJwYXJzZWRBcmdzIiwiYXBwcm92YWwiLCJyZXNwb25zZSIsIl9ydW5Db21wdXRlckFjdGlvbkFuZFNjcmVlbnNob3QiLCJjb21wdXRlciIsImFjdGlvbiIsInNjcmVlbnNob3QiLCJwIiwiYWN0aW9ucyIsImN1c3RvbUxvZ2dlciIsIl9sb2dnZXIiLCJpbWFnZVVybCIsImFjdHVhbEhhbmRvZmYiLCJoYW5kb2ZmU3BhbiIsIm5ld0FnZW50IiwicmVxdWVzdGVkQWdlbnRzIiwiaW5wdXRGaWx0ZXIiLCJoYW5kb2ZmSW5wdXREYXRhIiwiTk9UX0ZJTkFMX09VVFBVVCIsInRvb2xSZXN1bHRzIiwiaW50ZXJydXB0aW9ucyIsImZpcnN0VG9vbFJlc3VsdCIsInRvb2xVc2VCZWhhdmlvciIsInN0b3BwaW5nVG9vbCIsImFkZFN0ZXBUb1J1blJlc3VsdCIsIml0ZW1OYW1lIiwiQWdlbnRUb29sVXNlVHJhY2tlciIsIl9hZ2VudFRvVG9vbHMiLCJDVVJSRU5UX1NDSEVNQV9WRVJTSU9OIiwiJHNjaGVtYVZlcnNpb24iLCJzZXJpYWxpemVkQWdlbnRTY2hlbWEiLCJzZXJpYWxpemVkU3BhbkJhc2UiLCJ6XG4gICAgICAgIC5vYmplY3QiLCJTZXJpYWxpemVkU3BhbiIsInoubGF6eSIsInVzYWdlU2NoZW1hIiwibW9kZWxSZXNwb25zZVNjaGVtYSIsInByb3RvY29sLk91dHB1dE1vZGVsSXRlbSIsIml0ZW1TY2hlbWEiLCJwcm90b2NvbC5Bc3Npc3RhbnRNZXNzYWdlSXRlbSIsInByb3RvY29sLlRvb2xDYWxsSXRlbSIsInByb3RvY29sLkhvc3RlZFRvb2xDYWxsSXRlbSIsInByb3RvY29sLkZ1bmN0aW9uQ2FsbFJlc3VsdEl0ZW0iLCJwcm90b2NvbC5SZWFzb25pbmdJdGVtIiwicHJvdG9jb2wuRnVuY3Rpb25DYWxsSXRlbSIsInNlcmlhbGl6ZWRUcmFjZVNjaGVtYSIsInNlcmlhbGl6ZWRQcm9jZXNzZWRSZXNwb25zZVNjaGVtYSIsInpcbiAgICAgICAgLmFycmF5IiwiZ3VhcmRyYWlsRnVuY3Rpb25PdXRwdXRTY2hlbWEiLCJpbnB1dEd1YXJkcmFpbFJlc3VsdFNjaGVtYSIsIm91dHB1dEd1YXJkcmFpbFJlc3VsdFNjaGVtYSIsIlNlcmlhbGl6ZWRSdW5TdGF0ZSIsInByb3RvY29sLk1vZGVsSXRlbSIsIlJ1blN0YXRlIiwic3RhcnRpbmdBZ2VudCIsIm1heFR1cm5zIiwiaW5pdGlhbEFnZW50IiwicGFyc2luZ0Vycm9yIiwianNvblJlc3VsdCIsImN1cnJlbnRTY2hlbWFWZXJzaW9uIiwic3RhdGVKc29uIiwiYWdlbnRNYXAiLCJidWlsZEFnZW50TWFwIiwiY3VycmVudEFnZW50IiwiYWdlbnROYW1lIiwiZGVzZXJpYWxpemVTcGFuIiwiZGVzZXJpYWxpemVNb2RlbFJlc3BvbnNlIiwiZGVzZXJpYWxpemVJdGVtIiwiZGVzZXJpYWxpemVQcm9jZXNzZWRSZXNwb25zZSIsIl9lIiwicXVldWUiLCJBZ2VudCIsInNlcmlhbGl6ZWRTcGFuIiwic3BhbkRhdGEiLCJwcmV2aW91c1NwYW4iLCJzZXJpYWxpemVkTW9kZWxSZXNwb25zZSIsInVzYWdlIiwic2VyaWFsaXplZEl0ZW0iLCJzZXJpYWxpemVkUHJvY2Vzc2VkUmVzcG9uc2UiLCJjb21wdXRlclRvb2xzIiwiZnVuY3Rpb25DYWxsIiwiY29tcHV0ZXJBY3Rpb24iLCJERUZBVUxUX01BWF9UVVJOUyIsImdldFRyYWNpbmciLCJ0cmFjaW5nRGlzYWJsZWQiLCJ0cmFjZUluY2x1ZGVTZW5zaXRpdmVEYXRhIiwiZ2VuZXJhdGVkSXRlbXMiLCJyYXdJdGVtcyIsIlJ1bm5lciIsIl9SdW5uZXJfaW5zdGFuY2VzIiwicnVuSW5kaXZpZHVhbFN0cmVhbV9mbiIsInJ1bkluZGl2aWR1YWxOb25TdHJlYW1fZm4iLCJtb2RlbCIsInR1cm5SZXN1bHQiLCJoYW5kb2ZmTmFtZXMiLCJzZXJpYWxpemVkVG9vbHMiLCJzZXJpYWxpemVkSGFuZG9mZnMiLCJydW5JbnB1dEd1YXJkcmFpbHNfZm4iLCJ0dXJuSW5wdXQiLCJydW5PdXRwdXRHdWFyZHJhaWxzX2ZuIiwiZ3VhcmRyYWlscyIsImd1YXJkcmFpbEFyZ3MiLCJndWFyZHJhaWwiLCJhZ2VudE91dHB1dCIsInJ1blN0cmVhbUxvb3BfZm4iLCJmaW5hbFJlc3BvbnNlIiwib3V0cHV0VHlwZXMiLCJ0b29sRGVzY3JpcHRpb24iLCJjdXN0b21PdXRwdXRFeHRyYWN0b3IiLCJSZWFsdGltZUFnZW50IiwiZ2V0UmVhbHRpbWVHdWFyZHJhaWxTZXR0aW5ncyIsInNldHRpbmdzIiwiZGVmaW5lUmVhbHRpbWVPdXRwdXRHdWFyZHJhaWwiLCJwb2xpY3lIaW50SW5wdXQiLCJiYXNlR3VhcmRyYWlsIiwicG9saWN5SGludCIsImdldFJlYWx0aW1lR3VhcmRyYWlsRmVlZGJhY2tNZXNzYWdlIiwicmVhbHRpbWVNZXNzYWdlSXRlbVNjaGVtYSIsInJlYWx0aW1lVG9vbENhbGxJdGVtIiwicmVhbHRpbWVSZXNwb25zZSIsInpcbiAgICAgICAgLmVudW0iLCJ6XG4gICAgICAgICAgICAucmVjb3JkIiwiY29udmVyc2F0aW9uSXRlbUNvbnRlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtU2NoZW1hIiwiY29udmVyc2F0aW9uQ3JlYXRlZEV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbUNyZWF0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1EZWxldGVkRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25Db21wbGV0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1JbnB1dEF1ZGlvVHJhbnNjcmlwdGlvbkRlbHRhRXZlbnRTY2hlbWEiLCJjb252ZXJzYXRpb25JdGVtSW5wdXRBdWRpb1RyYW5zY3JpcHRpb25GYWlsZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1UcnVuY2F0ZWRFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1DcmVhdGVFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1EZWxldGVFdmVudFNjaGVtYSIsImNvbnZlcnNhdGlvbkl0ZW1SZXRyaWV2ZUV2ZW50U2NoZW1hIiwiY29udmVyc2F0aW9uSXRlbVRydW5jYXRlRXZlbnRTY2hlbWEiLCJlcnJvckV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJBcHBlbmRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJDbGVhckV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckNvbW1pdEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlckNvbW1pdHRlZEV2ZW50U2NoZW1hIiwiaW5wdXRBdWRpb0J1ZmZlclNwZWVjaFN0YXJ0ZWRFdmVudFNjaGVtYSIsImlucHV0QXVkaW9CdWZmZXJTcGVlY2hTdG9wcGVkRXZlbnRTY2hlbWEiLCJvdXRwdXRBdWRpb0J1ZmZlclN0YXJ0ZWRFdmVudFNjaGVtYSIsInpcbiAgICAub2JqZWN0Iiwib3V0cHV0QXVkaW9CdWZmZXJTdG9wcGVkRXZlbnRTY2hlbWEiLCJvdXRwdXRBdWRpb0J1ZmZlckNsZWFyZWRFdmVudFNjaGVtYSIsInJhdGVMaW1pdHNVcGRhdGVkRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvRGVsdGFFdmVudFNjaGVtYSIsInJlc3BvbnNlQXVkaW9Eb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZUF1ZGlvVHJhbnNjcmlwdERvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlQ29udGVudFBhcnRBZGRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VDb250ZW50UGFydERvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlQ3JlYXRlZEV2ZW50U2NoZW1hIiwicmVzcG9uc2VEb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RlbHRhRXZlbnRTY2hlbWEiLCJyZXNwb25zZUZ1bmN0aW9uQ2FsbEFyZ3VtZW50c0RvbmVFdmVudFNjaGVtYSIsInJlc3BvbnNlT3V0cHV0SXRlbUFkZGVkRXZlbnRTY2hlbWEiLCJyZXNwb25zZU91dHB1dEl0ZW1Eb25lRXZlbnRTY2hlbWEiLCJyZXNwb25zZVRleHREZWx0YUV2ZW50U2NoZW1hIiwicmVzcG9uc2VUZXh0RG9uZUV2ZW50U2NoZW1hIiwic2Vzc2lvbkNyZWF0ZWRFdmVudFNjaGVtYSIsInNlc3Npb25VcGRhdGVkRXZlbnRTY2hlbWEiLCJyZXNwb25zZUNhbmNlbEV2ZW50U2NoZW1hIiwicmVzcG9uc2VDcmVhdGVFdmVudFNjaGVtYSIsInNlc3Npb25VcGRhdGVFdmVudFNjaGVtYSIsInRyYW5zY3JpcHRpb25TZXNzaW9uVXBkYXRlRXZlbnRTY2hlbWEiLCJ0cmFuc2NyaXB0aW9uU2Vzc2lvblVwZGF0ZWRFdmVudFNjaGVtYSIsImdlbmVyaWNFdmVudFNjaGVtYSIsInJlYWx0aW1lU2VydmVyRXZlbnRTY2hlbWEiLCJwYXJzZVJlYWx0aW1lRXZlbnQiLCJyYXciLCJnZW5lcmljUGFyc2VkIiwiREVGQVVMVF9PUEVOQUlfUkVBTFRJTUVfTU9ERUwiLCJERUZBVUxUX09QRU5BSV9SRUFMVElNRV9TRVNTSU9OX0NPTkZJRyIsIk9wZW5BSVJlYWx0aW1lQmFzZSIsIl9tb2RlbCIsIl9hcGlLZXkiLCJfdHJhY2luZ0NvbmZpZyIsImFwaUtleSIsImlzR2VuZXJpYyIsImlucHV0VG9rZW5zIiwib3V0cHV0VG9rZW5zIiwidG90YWxUb2tlbnMiLCJfZiIsInByZXZpb3VzSXRlbUlkIiwicmVhbHRpbWVJdGVtIiwib3RoZXJFdmVudERhdGEiLCJ0cmFjaW5nQ29uZmlnIiwic2Vzc2lvbkRhdGEiLCJzdGFydFJlc3BvbnNlIiwiYXVkaW8iLCJjb21taXQiLCJyZW1vdmFsSWRzIiwidXBkYXRlIiwiaXRlbUlkIiwiYWRkaXRpb25zQW5kVXBkYXRlcyIsImFkZGl0aW9uIiwiaXRlbUVudHJ5IiwiT3BlbkFJUmVhbHRpbWVXZWJSVEMiLCJfdXJsIiwiX3N0YXRlIiwiX3VzZUluc2VjdXJlQXBpS2V5IiwiX29uZ29pbmdSZXNwb25zZSIsIl9tdXRlZCIsImJhc2VVcmwiLCJpc0NsaWVudEtleSIsInVzZXJTZXNzaW9uQ29uZmlnIiwiY29ubmVjdGlvblVybCIsInBlZXJDb25uZWN0aW9uIiwiZGF0YUNoYW5uZWwiLCJhdWRpb0VsZW1lbnQiLCJvZmZlciIsInNlc3Npb25Db25maWciLCJhbnN3ZXIiLCJtdXRlZCIsInNlbmRlciIsIldlYlNvY2tldCIsIk9wZW5BSVJlYWx0aW1lV2ViU29ja2V0IiwiX09wZW5BSVJlYWx0aW1lV2ViU29ja2V0X2luc3RhbmNlcyIsIl9jdXJyZW50SXRlbUlkIiwiX2N1cnJlbnRBdWRpb0NvbnRlbnRJbmRleCIsImF1ZGlvRXZlbnQiLCJzZXR1cFdlYlNvY2tldF9mbiIsImVsYXBzZWRUaW1lIiwid2Vic29ja2V0QXJndW1lbnRzIiwid3MiLCJidWZmIiwiUmVhbHRpbWVTZXNzaW9uIiwiX1JlYWx0aW1lU2Vzc2lvbl9pbnN0YW5jZXMiLCJfdHJhbnNwb3J0IiwiX2N1cnJlbnRBZ2VudCIsIl9jdXJyZW50VG9vbHMiLCJfb3V0cHV0R3VhcmRyYWlscyIsIl9vdXRwdXRHdWFyZHJhaWxTZXR0aW5ncyIsIl90cmFuc2NyaWJlZFRleHREZWx0YXMiLCJfaGlzdG9yeSIsIl9zaG91bGRJbmNsdWRlQXVkaW9EYXRhIiwiX2ludGVycnVwdGVkQnlHdWFyZHJhaWwiLCJzZXRDdXJyZW50QWdlbnRfZm4iLCJnZXRTZXNzaW9uQ29uZmlnX2ZuIiwic2V0RXZlbnRMaXN0ZW5lcnNfZm4iLCJ1cGRhdGVkSGlzdG9yeSIsImhhbmRsZUZ1bmN0aW9uVG9vbENhbGxfZm4iLCJoYW5kb2ZmVG9vbHMiLCJhZGRpdGlvbmFsQ29uZmlnIiwiaW5zdHJ1Y3Rpb25zIiwiaGFuZGxlSGFuZG9mZl9mbiIsImhhbmRsZUZ1bmN0aW9uQ2FsbF9mbiIsImZ1bmN0aW9uVG9vbE1hcCIsInBvc3NpYmxlSGFuZG9mZiIsInJlc3BvbnNlSWQiLCJmaXJzdFRyaXB3aXJlVHJpZ2dlcmVkIiwiZmVlZGJhY2tUZXh0IiwidGV4dE91dHB1dCIsImxhc3RSdW5JbmRleCIsImxhc3RJdGVtSWQiLCJkZWx0YSIsIm5ld1RleHQiLCJuZXdSdW5JbmRleCIsImlzTmV3IiwiYWRkZWRJdGVtIiwidXRpbHMiLCJ1dGlsSW1wb3J0LmJhc2U2NFRvQXJyYXlCdWZmZXIiLCJ1dGlsSW1wb3J0LmFycmF5QnVmZmVyVG9CYXNlNjQiLCJ1dGlsSW1wb3J0LmdldExhc3RUZXh0RnJvbUF1ZGlvT3V0cHV0TWVzc2FnZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNPLE1BQU1BLEtBQVc7QUFBQSxFQUVwQixTQUFXO0FBTWY7QUNITyxTQUFTQyxHQUFvQkMsR0FBUTtBQUN4QyxRQUFNQyxJQUFlLEtBQUtELENBQU0sR0FDMUJFLElBQU1ELEVBQWEsUUFDbkJFLElBQVEsSUFBSSxXQUFXRCxDQUFHO0FBQ2hDLFdBQVNFLElBQUksR0FBR0EsSUFBSUYsR0FBS0U7QUFDckIsSUFBQUQsRUFBTUMsQ0FBQyxJQUFJSCxFQUFhLFdBQVdHLENBQUM7QUFFeEMsU0FBT0QsRUFBTTtBQUNqQjtBQU1PLFNBQVNFLEdBQW9CQyxHQUFhO0FBQzdDLFFBQU1MLElBQWUsT0FBTyxhQUFhLEdBQUcsSUFBSSxXQUFXSyxDQUFXLENBQUM7QUFDdkUsU0FBTyxLQUFLTCxDQUFZO0FBQzVCO0FBTU8sU0FBU00sR0FBa0NDLEdBQU07QUFZcEQsTUFYSSxPQUFPQSxJQUFTLE9BQ2hCQSxNQUFTLFFBQ1QsT0FBT0EsS0FBUyxZQUNoQixFQUFFLFVBQVVBLE1BQ1osT0FBT0EsRUFBSyxRQUFTLFlBQ3JCLENBQUNBLEVBQUssUUFHTkEsRUFBSyxTQUFTLGFBR2QsRUFBRSxhQUFhQSxNQUNmLENBQUMsTUFBTSxRQUFRQSxFQUFLLE9BQU8sS0FDM0JBLEVBQUssUUFBUSxTQUFTO0FBQ3RCO0FBRUosUUFBTUMsSUFBa0JELEVBQUssUUFBUUEsRUFBSyxRQUFRLFNBQVMsQ0FBQztBQUM1RCxNQUFJLElBQUUsVUFBVUMsTUFDWixPQUFPQSxFQUFnQixRQUFTLFdBR3BDO0FBQUEsUUFBSUEsRUFBZ0IsU0FBUztBQUN6QixhQUFPLE9BQU9BLEVBQWdCLFFBQVMsV0FDakNBLEVBQWdCLE9BQ2hCO0FBRVYsUUFBSUEsRUFBZ0IsU0FBUztBQUN6QixhQUFPLE9BQU9BLEVBQWdCLGNBQWUsV0FDdkNBLEVBQWdCLGFBQ2hCO0FBQUE7QUFHZDtBQU9PLFNBQVNDLEdBQW9CQyxHQUFZQyxHQUFZO0FBQ3hELFFBQU1DLElBQVdGLEVBQVcsT0FBTyxDQUFDSCxNQUFTLENBQUNJLEVBQVcsS0FBSyxDQUFDRSxNQUFZQSxFQUFRLFdBQVdOLEVBQUssTUFBTSxDQUFDLEdBQ3BHTyxJQUFZSCxFQUFXLE9BQU8sQ0FBQ0osTUFBUyxDQUFDRyxFQUFXLEtBQUssQ0FBQ0ssTUFBWUEsRUFBUSxXQUFXUixFQUFLLE1BQU0sQ0FBQyxHQUNyR1MsSUFBVUwsRUFBVyxPQUFPLENBQUNKLE1BQVNHLEVBQVcsS0FBSyxDQUFDSyxNQUFZQSxFQUFRLFdBQVdSLEVBQUssVUFDN0YsS0FBSyxVQUFVUSxDQUFPLE1BQU0sS0FBSyxVQUFVUixDQUFJLENBQUMsQ0FBQztBQUNyRCxTQUFPO0FBQUEsSUFDSCxVQUFBSztBQUFBLElBQ0EsV0FBQUU7QUFBQSxJQUNBLFNBQUFFO0FBQUEsRUFDSDtBQUNMO0FBS08sU0FBU0MsS0FBbUI7QUFDL0IsU0FBSSxPQUFPLFNBQVcsTUFDWCxLQUVKLE9BQU8sT0FBTyxvQkFBeUI7QUFDbEQ7QUFNTyxTQUFTQyxHQUF1QlgsR0FBTTtBQUN6QyxTQUFJQSxFQUFLLFNBQVMsV0FDUEEsSUFFUEEsRUFBSyxTQUFTLGNBQ1A7QUFBQSxJQUNILEdBQUdBO0FBQUEsSUFDSCxTQUFTQSxFQUFLLFFBQVEsSUFBSSxDQUFDWSxNQUNuQkEsRUFBTSxTQUFTLFVBQ1I7QUFBQSxNQUNILEdBQUdBO0FBQUEsTUFDSCxPQUFPO0FBQUEsSUFDVixJQUVFQSxDQUNWO0FBQUEsRUFDSixJQUVEWixFQUFLLFNBQVMsU0FDUDtBQUFBLElBQ0gsR0FBR0E7QUFBQSxJQUNILFNBQVNBLEVBQUssUUFBUSxJQUFJLENBQUNZLE1BQ25CQSxFQUFNLFNBQVMsZ0JBQ1I7QUFBQSxNQUNILEdBQUdBO0FBQUEsTUFDSCxPQUFPO0FBQUEsSUFDVixJQUVFQSxDQUNWO0FBQUEsRUFDSixJQUVFWjtBQUNYO0FBUU8sU0FBU2EsR0FBc0JDLEdBQVNDLEdBQU9DLEdBQXdCO0FBQzFFLFFBQU1DLElBQVcsQ0FBQ0QsS0FBMEJELEVBQU0sU0FBUyxZQUNyREosR0FBdUJJLENBQUssSUFDNUJBLEdBQ0FHLElBQWdCSixFQUFRLFVBQVUsQ0FBQ2QsTUFBU0EsRUFBSyxXQUFXZSxFQUFNLE1BQU07QUFDOUUsTUFBSUcsTUFBa0I7QUFFbEIsV0FBT0osRUFBUSxJQUFJLENBQUNkLEdBQU1tQixNQUNsQkEsTUFBUUQsSUFDREQsSUFFUCxDQUFDRCxLQUEwQmhCLEVBQUssU0FBUyxZQUNsQ1csR0FBdUJYLENBQUksSUFFL0JBLENBQ1Y7QUFFQSxNQUFJZSxFQUFNLGdCQUFnQjtBQUUzQixVQUFNSyxJQUFZTixFQUFRLFVBQVUsQ0FBQ2QsTUFBU0EsRUFBSyxXQUFXZSxFQUFNLGNBQWM7QUFDbEYsV0FBSUssTUFBYyxLQUNQO0FBQUEsTUFDSCxHQUFHTixFQUFRLE1BQU0sR0FBR00sSUFBWSxDQUFDO0FBQUEsTUFDakNIO0FBQUEsTUFDQSxHQUFHSCxFQUFRLE1BQU1NLElBQVksQ0FBQztBQUFBLElBQ2pDLElBR00sQ0FBQyxHQUFHTixHQUFTRyxDQUFRO0FBQUEsRUFFeEM7QUFFUSxXQUFPLENBQUMsR0FBR0gsR0FBU0csQ0FBUTtBQUVwQztBQUlPLE1BQU1JLEtBQVU7QUFBQSxFQUNuQixjQUFjLHFCQUFxQi9CLEdBQVMsT0FBTztBQUFBLEVBQ25ELHVCQUF1QixxQkFBcUJBLEdBQVMsT0FBTztBQUNoRSxHQUlhZ0MsS0FBaUIscUJBQXFCaEMsR0FBUyxPQUFPO0FDckw1RCxlQUFlaUMsR0FBWUMsR0FBSTtBQUNsQyxNQUFJO0FBQ0EsV0FBTyxDQUFDLE1BQU0sTUFBTUEsR0FBSTtBQUFBLEVBQ2hDLFNBQ1dDLEdBQU87QUFDVixXQUFPLENBQUNBLEdBQU8sSUFBSTtBQUFBLEVBQzNCO0FBQ0E7QUNRTyxTQUFTQyxHQUF3QkMsR0FBaUJDLEdBQVE7QUFDN0QsUUFBTUMsSUFBTSxFQUFFLEdBQUdGLEVBQWlCO0FBQ2xDLGdCQUFPLGlCQUFpQkUsR0FBSztBQUFBLElBQ3pCLFFBQVE7QUFBQSxNQUNKLE9BQU87QUFBQSxNQUNQLFlBQVk7QUFBQSxJQUNmO0FBQUEsSUFDRCxXQUFXO0FBQUEsTUFDUCxPQUFPRDtBQUFBLE1BQ1AsWUFBWTtBQUFBLElBQ2Y7QUFBQSxFQUNULENBQUssR0FDTUM7QUFDWDtBQzVCTyxNQUFNQyxLQUFpQixPQUFPLG1EQUFtRCxHQUNsRkMsS0FBaUI7QUFBQSxFQUNuQixNQUFNO0FBQUEsRUFDTixjQUFjO0FBQUEsRUFDZCxnQkFBZ0I7QUFBQSxFQUNoQixjQUFjO0FBQUEsRUFDZCxjQUFjO0FBQUEsRUFDZCxhQUFhO0FBQUEsRUFDYixrQkFBa0I7QUFBQSxFQUNsQiwwQkFBMEI7QUFBQSxFQUMxQixnQkFBZ0I7QUFBQSxFQUNoQixRQUFRO0FBQUEsRUFDUixjQUFjO0FBQUEsRUFDZCxlQUFlO0FBQUEsRUFDZixxQkFBcUI7QUFBQSxFQUNyQixpQkFBaUI7QUFBQSxFQUNqQixpQkFBaUI7QUFBQSxFQUNqQixlQUFlO0FBQUEsRUFDZixnQkFBZ0I7QUFBQSxFQUNoQixjQUFjO0FBQ2xCLEdBQ2FDLEtBQW9CLENBQUNDLE1BRXRCLE9BQU9BLEtBQVksV0FDdkI7QUFBQSxFQUNJLEdBQUdGO0FBQUEsRUFDSCxVQUFVLENBQUMsR0FBRztBQUFBLEVBQ2QsYUFBYSxDQUFFO0FBQUEsRUFDZixNQUFNRTtBQUNsQixJQUNVO0FBQUEsRUFDRSxHQUFHRjtBQUFBLEVBQ0gsVUFBVSxDQUFDLEdBQUc7QUFBQSxFQUNkLGFBQWEsQ0FBRTtBQUFBLEVBQ2YsR0FBR0U7QUFDTixHQ25DSUMsS0FBUyxDQUFDQyxNQUNaLFVBQVVBLElBQVlBLEVBQVUsT0FBT0E7QUFFM0MsU0FBU0MsR0FBV1AsR0FBSztBQUM1QixNQUFJLENBQUNBO0FBQ0QsV0FBTztBQUNYLGFBQVdRLEtBQU1SO0FBQ2IsV0FBTztBQUNYLFNBQU87QUFDWDtBQ1BPLE1BQU1TLEtBQVUsQ0FBQ0wsTUFBWTtBQUNoQyxRQUFNTSxJQUFXUCxHQUFrQkMsQ0FBTyxHQUNwQ08sSUFBY0QsRUFBUyxTQUFTLFNBQ2xDLENBQUMsR0FBR0EsRUFBUyxVQUFVQSxFQUFTLGdCQUFnQkEsRUFBUyxJQUFJLElBQzNEQSxFQUFTO0FBQ2YsU0FBTztBQUFBLElBQ0gsR0FBR0E7QUFBQSxJQUNILGFBQWFDO0FBQUEsSUFDYixjQUFjO0FBQUEsSUFDZCxVQUFVLG9CQUFJLElBQUs7QUFBQSxJQUNuQixNQUFNLElBQUksSUFBSSxPQUFPLFFBQVFELEVBQVMsV0FBVyxFQUFFLElBQUksQ0FBQyxDQUFDRSxHQUFNQyxDQUFHLE1BQU07QUFBQSxNQUNwRVIsR0FBT1EsQ0FBRztBQUFBLE1BQ1Y7QUFBQSxRQUNJLEtBQUtSLEdBQU9RLENBQUc7QUFBQSxRQUNmLE1BQU0sQ0FBQyxHQUFHSCxFQUFTLFVBQVVBLEVBQVMsZ0JBQWdCRSxDQUFJO0FBQUE7QUFBQSxRQUUxRCxZQUFZO0FBQUEsTUFDZjtBQUFBLElBQ2IsQ0FBUyxDQUFDO0FBQUEsRUFDTDtBQUNMO0FDdEJPLFNBQVNFLEdBQWdCQyxHQUFLQyxHQUFLQyxHQUFjQyxHQUFNO0FBQzFELEVBQUtBLEtBQUEsUUFBQUEsRUFBTSxpQkFFUEQsTUFDQUYsRUFBSSxlQUFlO0FBQUEsSUFDZixHQUFHQSxFQUFJO0FBQUEsSUFDUCxDQUFDQyxDQUFHLEdBQUdDO0FBQUEsRUFDVjtBQUVUO0FBQ08sU0FBU0UsRUFBMEJKLEdBQUtDLEdBQUtJLEdBQU9ILEdBQWNDLEdBQU07QUFDM0UsRUFBQUgsRUFBSUMsQ0FBRyxJQUFJSSxHQUNYTixHQUFnQkMsR0FBS0MsR0FBS0MsR0FBY0MsQ0FBSTtBQUNoRDtBQ2JPLElBQUlHO0FBQUFBLENBQ1YsU0FBVUEsR0FBTTtBQUNiLEVBQUFBLEVBQUssY0FBYyxDQUFDQyxNQUFNO0FBQUEsRUFBRztBQUM3QixXQUFTQyxFQUFTQyxHQUFNO0FBQUEsRUFBQTtBQUN4QixFQUFBSCxFQUFLLFdBQVdFO0FBQ2hCLFdBQVNFLEVBQVlDLEdBQUk7QUFDckIsVUFBTSxJQUFJLE1BQU87QUFBQSxFQUN6QjtBQUNJLEVBQUFMLEVBQUssY0FBY0ksR0FDbkJKLEVBQUssY0FBYyxDQUFDTSxNQUFVO0FBQzFCLFVBQU0zQixJQUFNLENBQUU7QUFDZCxlQUFXN0IsS0FBUXdEO0FBQ2YsTUFBQTNCLEVBQUk3QixDQUFJLElBQUlBO0FBRWhCLFdBQU82QjtBQUFBLEVBQ1YsR0FDRHFCLEVBQUsscUJBQXFCLENBQUNyQixNQUFRO0FBQy9CLFVBQU00QixJQUFZUCxFQUFLLFdBQVdyQixDQUFHLEVBQUUsT0FBTyxDQUFDNkIsTUFBTSxPQUFPN0IsRUFBSUEsRUFBSTZCLENBQUMsQ0FBQyxLQUFNLFFBQVEsR0FDOUVDLElBQVcsQ0FBRTtBQUNuQixlQUFXRCxLQUFLRDtBQUNaLE1BQUFFLEVBQVNELENBQUMsSUFBSTdCLEVBQUk2QixDQUFDO0FBRXZCLFdBQU9SLEVBQUssYUFBYVMsQ0FBUTtBQUFBLEVBQ3BDLEdBQ0RULEVBQUssZUFBZSxDQUFDckIsTUFDVnFCLEVBQUssV0FBV3JCLENBQUcsRUFBRSxJQUFJLFNBQVUrQixHQUFHO0FBQ3pDLFdBQU8vQixFQUFJK0IsQ0FBQztBQUFBLEVBQ3hCLENBQVMsR0FFTFYsRUFBSyxhQUFhLE9BQU8sT0FBTyxRQUFTLGFBQ25DLENBQUNyQixNQUFRLE9BQU8sS0FBS0EsQ0FBRyxJQUN4QixDQUFDZ0MsTUFBVztBQUNWLFVBQU1DLElBQU8sQ0FBRTtBQUNmLGVBQVdqQixLQUFPZ0I7QUFDZCxNQUFJLE9BQU8sVUFBVSxlQUFlLEtBQUtBLEdBQVFoQixDQUFHLEtBQ2hEaUIsRUFBSyxLQUFLakIsQ0FBRztBQUdyQixXQUFPaUI7QUFBQSxFQUNWLEdBQ0xaLEVBQUssT0FBTyxDQUFDYSxHQUFLQyxNQUFZO0FBQzFCLGVBQVdoRSxLQUFRK0Q7QUFDZixVQUFJQyxFQUFRaEUsQ0FBSTtBQUNaLGVBQU9BO0FBQUEsRUFHbEIsR0FDRGtELEVBQUssWUFBWSxPQUFPLE9BQU8sYUFBYyxhQUN2QyxDQUFDZSxNQUFRLE9BQU8sVUFBVUEsQ0FBRyxJQUM3QixDQUFDQSxNQUFRLE9BQU9BLEtBQVEsWUFBWSxPQUFPLFNBQVNBLENBQUcsS0FBSyxLQUFLLE1BQU1BLENBQUcsTUFBTUE7QUFDdEYsV0FBU0MsRUFBV0MsR0FBT0MsSUFBWSxPQUFPO0FBQzFDLFdBQU9ELEVBQU0sSUFBSSxDQUFDRixNQUFTLE9BQU9BLEtBQVEsV0FBVyxJQUFJQSxDQUFHLE1BQU1BLENBQUksRUFBRSxLQUFLRyxDQUFTO0FBQUEsRUFDOUY7QUFDSSxFQUFBbEIsRUFBSyxhQUFhZ0IsR0FDbEJoQixFQUFLLHdCQUF3QixDQUFDQyxHQUFHRixNQUN6QixPQUFPQSxLQUFVLFdBQ1ZBLEVBQU0sU0FBVSxJQUVwQkE7QUFFZixHQUFHQyxPQUFTQSxLQUFPLENBQUEsRUFBRztBQUNmLElBQUltQjtBQUFBQSxDQUNWLFNBQVVBLEdBQVk7QUFDbkIsRUFBQUEsRUFBVyxjQUFjLENBQUNDLEdBQU9DLE9BQ3RCO0FBQUEsSUFDSCxHQUFHRDtBQUFBLElBQ0gsR0FBR0M7QUFBQTtBQUFBLEVBQ047QUFFVCxHQUFHRixPQUFlQSxLQUFhLENBQUEsRUFBRztBQUNMbkIsR0FBSyxZQUFZO0FBQUEsRUFDMUM7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0osQ0FBQztBQzFGMkJBLEdBQUssWUFBWTtBQUFBLEVBQ3pDO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0osQ0FBQztTQUtNLE1BQU1zQixXQUFpQixNQUFNO0FBQUEsRUFDaEMsSUFBSSxTQUFTO0FBQ1QsV0FBTyxLQUFLO0FBQUEsRUFDcEI7QUFBQSxFQUNJLFlBQVlDLEdBQVE7QUFDaEIsVUFBTyxHQUNQLEtBQUssU0FBUyxDQUFFLEdBQ2hCLEtBQUssV0FBVyxDQUFDQyxNQUFRO0FBQ3JCLFdBQUssU0FBUyxDQUFDLEdBQUcsS0FBSyxRQUFRQSxDQUFHO0FBQUEsSUFDckMsR0FDRCxLQUFLLFlBQVksQ0FBQ0MsSUFBTyxPQUFPO0FBQzVCLFdBQUssU0FBUyxDQUFDLEdBQUcsS0FBSyxRQUFRLEdBQUdBLENBQUk7QUFBQSxJQUN6QztBQUNELFVBQU1DLElBQWMsV0FBVztBQUMvQixJQUFJLE9BQU8saUJBRVAsT0FBTyxlQUFlLE1BQU1BLENBQVcsSUFHdkMsS0FBSyxZQUFZQSxHQUVyQixLQUFLLE9BQU8sWUFDWixLQUFLLFNBQVNIO0FBQUEsRUFDdEI7QUFBQSxFQUNJLE9BQU9JLEdBQVM7QUFDWixVQUFNQyxJQUFTRCxLQUNYLFNBQVVFLEdBQU87QUFDYixhQUFPQSxFQUFNO0FBQUEsSUFDaEIsR0FDQ0MsSUFBYyxFQUFFLFNBQVMsR0FBSSxHQUM3QkMsSUFBZSxDQUFDeEQsTUFBVTtBQUM1QixpQkFBV3NELEtBQVN0RCxFQUFNO0FBQ3RCLFlBQUlzRCxFQUFNLFNBQVM7QUFDZixVQUFBQSxFQUFNLFlBQVksSUFBSUUsQ0FBWTtBQUFBLGlCQUU3QkYsRUFBTSxTQUFTO0FBQ3BCLFVBQUFFLEVBQWFGLEVBQU0sZUFBZTtBQUFBLGlCQUU3QkEsRUFBTSxTQUFTO0FBQ3BCLFVBQUFFLEVBQWFGLEVBQU0sY0FBYztBQUFBLGlCQUU1QkEsRUFBTSxLQUFLLFdBQVc7QUFDM0IsVUFBQUMsRUFBWSxRQUFRLEtBQUtGLEVBQU9DLENBQUssQ0FBQztBQUFBLGFBRXJDO0FBQ0QsY0FBSUcsSUFBT0YsR0FDUHBGLElBQUk7QUFDUixpQkFBT0EsSUFBSW1GLEVBQU0sS0FBSyxVQUFRO0FBQzFCLGtCQUFNSSxJQUFLSixFQUFNLEtBQUtuRixDQUFDO0FBRXZCLFlBRGlCQSxNQUFNbUYsRUFBTSxLQUFLLFNBQVMsS0FZdkNHLEVBQUtDLENBQUUsSUFBSUQsRUFBS0MsQ0FBRSxLQUFLLEVBQUUsU0FBUyxHQUFJLEdBQ3RDRCxFQUFLQyxDQUFFLEVBQUUsUUFBUSxLQUFLTCxFQUFPQyxDQUFLLENBQUMsS0FYbkNHLEVBQUtDLENBQUUsSUFBSUQsRUFBS0MsQ0FBRSxLQUFLLEVBQUUsU0FBUyxHQUFJLEdBYTFDRCxJQUFPQSxFQUFLQyxDQUFFLEdBQ2R2RjtBQUFBLFVBQ3hCO0FBQUEsUUFDQTtBQUFBLElBRVM7QUFDRCxXQUFBcUYsRUFBYSxJQUFJLEdBQ1ZEO0FBQUEsRUFDZjtBQUFBLEVBQ0ksT0FBTyxPQUFPL0IsR0FBTztBQUNqQixRQUFJLEVBQUVBLGFBQWlCdUI7QUFDbkIsWUFBTSxJQUFJLE1BQU0sbUJBQW1CdkIsQ0FBSyxFQUFFO0FBQUEsRUFFdEQ7QUFBQSxFQUNJLFdBQVc7QUFDUCxXQUFPLEtBQUs7QUFBQSxFQUNwQjtBQUFBLEVBQ0ksSUFBSSxVQUFVO0FBQ1YsV0FBTyxLQUFLLFVBQVUsS0FBSyxRQUFRQyxHQUFLLHVCQUF1QixDQUFDO0FBQUEsRUFDeEU7QUFBQSxFQUNJLElBQUksVUFBVTtBQUNWLFdBQU8sS0FBSyxPQUFPLFdBQVc7QUFBQSxFQUN0QztBQUFBLEVBQ0ksUUFBUTRCLElBQVMsQ0FBQ0MsTUFBVUEsRUFBTSxTQUFTO0FBQ3ZDLFVBQU1DLElBQWMsQ0FBRSxHQUNoQkksSUFBYSxDQUFFO0FBQ3JCLGVBQVdWLEtBQU8sS0FBSztBQUNuQixNQUFJQSxFQUFJLEtBQUssU0FBUyxLQUNsQk0sRUFBWU4sRUFBSSxLQUFLLENBQUMsQ0FBQyxJQUFJTSxFQUFZTixFQUFJLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBRSxHQUN6RE0sRUFBWU4sRUFBSSxLQUFLLENBQUMsQ0FBQyxFQUFFLEtBQUtJLEVBQU9KLENBQUcsQ0FBQyxLQUd6Q1UsRUFBVyxLQUFLTixFQUFPSixDQUFHLENBQUM7QUFHbkMsV0FBTyxFQUFFLFlBQUFVLEdBQVksYUFBQUosRUFBYTtBQUFBLEVBQzFDO0FBQUEsRUFDSSxJQUFJLGFBQWE7QUFDYixXQUFPLEtBQUssUUFBUztBQUFBLEVBQzdCO0FBQ0E7QUFDQVIsR0FBUyxTQUFTLENBQUNDLE1BQ0QsSUFBSUQsR0FBU0MsQ0FBTTtBQ2pJOUIsSUFBSVk7QUFBQUEsQ0FDVixTQUFVQSxHQUFXO0FBQ2xCLEVBQUFBLEVBQVUsV0FBVyxDQUFDQyxNQUFZLE9BQU9BLEtBQVksV0FBVyxFQUFFLFNBQUFBLE1BQVlBLEtBQVcsQ0FBRSxHQUUzRkQsRUFBVSxXQUFXLENBQUNDLE1BQVksT0FBT0EsS0FBWSxXQUFXQSxJQUFVQSxLQUFBLGdCQUFBQSxFQUFTO0FBQ3ZGLEdBQUdELE9BQWNBLEtBQVksQ0FBQSxFQUFHO0FDcWdIekIsSUFBSUU7QUFBQUEsQ0FDVixTQUFVQSxHQUF1QjtBQUM5QixFQUFBQSxFQUFzQixZQUFlLGFBQ3JDQSxFQUFzQixZQUFlLGFBQ3JDQSxFQUFzQixTQUFZLFVBQ2xDQSxFQUFzQixZQUFlLGFBQ3JDQSxFQUFzQixhQUFnQixjQUN0Q0EsRUFBc0IsVUFBYSxXQUNuQ0EsRUFBc0IsWUFBZSxhQUNyQ0EsRUFBc0IsZUFBa0IsZ0JBQ3hDQSxFQUFzQixVQUFhLFdBQ25DQSxFQUFzQixTQUFZLFVBQ2xDQSxFQUFzQixhQUFnQixjQUN0Q0EsRUFBc0IsV0FBYyxZQUNwQ0EsRUFBc0IsVUFBYSxXQUNuQ0EsRUFBc0IsV0FBYyxZQUNwQ0EsRUFBc0IsWUFBZSxhQUNyQ0EsRUFBc0IsV0FBYyxZQUNwQ0EsRUFBc0Isd0JBQTJCLHlCQUNqREEsRUFBc0Isa0JBQXFCLG1CQUMzQ0EsRUFBc0IsV0FBYyxZQUNwQ0EsRUFBc0IsWUFBZSxhQUNyQ0EsRUFBc0IsU0FBWSxVQUNsQ0EsRUFBc0IsU0FBWSxVQUNsQ0EsRUFBc0IsY0FBaUIsZUFDdkNBLEVBQXNCLFVBQWEsV0FDbkNBLEVBQXNCLGFBQWdCLGNBQ3RDQSxFQUFzQixVQUFhLFdBQ25DQSxFQUFzQixhQUFnQixjQUN0Q0EsRUFBc0IsZ0JBQW1CLGlCQUN6Q0EsRUFBc0IsY0FBaUIsZUFDdkNBLEVBQXNCLGNBQWlCLGVBQ3ZDQSxFQUFzQixhQUFnQixjQUN0Q0EsRUFBc0IsV0FBYyxZQUNwQ0EsRUFBc0IsYUFBZ0IsY0FDdENBLEVBQXNCLGFBQWdCLGNBQ3RDQSxFQUFzQixjQUFpQixlQUN2Q0EsRUFBc0IsY0FBaUI7QUFDM0MsR0FBR0EsTUFBMEJBLElBQXdCLENBQUEsRUFBRztBQ2hqSGpELFNBQVNDLEtBQWM7QUFDMUIsU0FBTyxDQUFFO0FBQ2I7QUNDTyxTQUFTQyxHQUFjL0MsR0FBS0ssR0FBTTs7QUFDckMsUUFBTUgsSUFBTTtBQUFBLElBQ1IsTUFBTTtBQUFBLEVBQ1Q7QUFDRCxXQUFJOEMsS0FBQUMsSUFBQWpELEVBQUksU0FBSixnQkFBQWlELEVBQVUsU0FBVixnQkFBQUQsRUFBZ0IsY0FBYUgsRUFBc0IsV0FDbkQzQyxFQUFJLFFBQVFnRCxFQUFTbEQsRUFBSSxLQUFLLE1BQU07QUFBQSxJQUNoQyxHQUFHSztBQUFBLElBQ0gsYUFBYSxDQUFDLEdBQUdBLEVBQUssYUFBYSxPQUFPO0FBQUEsRUFDdEQsQ0FBUyxJQUVETCxFQUFJLGFBQ0pNLEVBQTBCSixHQUFLLFlBQVlGLEVBQUksVUFBVSxPQUFPQSxFQUFJLFVBQVUsU0FBU0ssQ0FBSSxHQUUzRkwsRUFBSSxhQUNKTSxFQUEwQkosR0FBSyxZQUFZRixFQUFJLFVBQVUsT0FBT0EsRUFBSSxVQUFVLFNBQVNLLENBQUksR0FFM0ZMLEVBQUksZ0JBQ0pNLEVBQTBCSixHQUFLLFlBQVlGLEVBQUksWUFBWSxPQUFPQSxFQUFJLFlBQVksU0FBU0ssQ0FBSSxHQUMvRkMsRUFBMEJKLEdBQUssWUFBWUYsRUFBSSxZQUFZLE9BQU9BLEVBQUksWUFBWSxTQUFTSyxDQUFJLElBRTVGSDtBQUNYO0FDdkJPLFNBQVNpRCxHQUFlbkQsR0FBS0ssR0FBTTtBQUN0QyxRQUFNSCxJQUFNO0FBQUEsSUFDUixNQUFNO0FBQUEsSUFDTixRQUFRO0FBQUEsRUFDWDtBQUNELE1BQUksQ0FBQ0YsRUFBSTtBQUNMLFdBQU9FO0FBQ1gsYUFBV2tELEtBQVNwRCxFQUFJO0FBQ3BCLFlBQVFvRCxFQUFNLE1BQUk7QUFBQSxNQUNkLEtBQUs7QUFDRCxRQUFJL0MsRUFBSyxXQUFXLGdCQUNaK0MsRUFBTSxZQUNOOUMsRUFBMEJKLEdBQUssV0FBV2tELEVBQU0sT0FBT0EsRUFBTSxTQUFTL0MsQ0FBSSxJQUcxRUMsRUFBMEJKLEdBQUssb0JBQW9Ca0QsRUFBTSxPQUFPQSxFQUFNLFNBQVMvQyxDQUFJLEtBSWxGK0MsRUFBTSxjQUNQbEQsRUFBSSxtQkFBbUIsS0FFM0JJLEVBQTBCSixHQUFLLFdBQVdrRCxFQUFNLE9BQU9BLEVBQU0sU0FBUy9DLENBQUk7QUFFOUU7QUFBQSxNQUNKLEtBQUs7QUFDRCxRQUFJQSxFQUFLLFdBQVcsZ0JBQ1orQyxFQUFNLFlBQ045QyxFQUEwQkosR0FBSyxXQUFXa0QsRUFBTSxPQUFPQSxFQUFNLFNBQVMvQyxDQUFJLElBRzFFQyxFQUEwQkosR0FBSyxvQkFBb0JrRCxFQUFNLE9BQU9BLEVBQU0sU0FBUy9DLENBQUksS0FJbEYrQyxFQUFNLGNBQ1BsRCxFQUFJLG1CQUFtQixLQUUzQkksRUFBMEJKLEdBQUssV0FBV2tELEVBQU0sT0FBT0EsRUFBTSxTQUFTL0MsQ0FBSTtBQUU5RTtBQUFBLE1BQ0osS0FBSztBQUNELFFBQUFDLEVBQTBCSixHQUFLLGNBQWNrRCxFQUFNLE9BQU9BLEVBQU0sU0FBUy9DLENBQUk7QUFDN0U7QUFBQSxJQUNoQjtBQUVJLFNBQU9IO0FBQ1g7QUNoRE8sU0FBU21ELEtBQWtCO0FBQzlCLFNBQU87QUFBQSxJQUNILE1BQU07QUFBQSxFQUNUO0FBQ0w7QUNITyxTQUFTQyxHQUFnQkMsR0FBTWxELEdBQU07QUFDeEMsU0FBTzZDLEVBQVNLLEVBQUssS0FBSyxNQUFNbEQsQ0FBSTtBQUN4QztBQ0ZPLE1BQU1tRCxLQUFnQixDQUFDeEQsR0FBS0ssTUFDeEI2QyxFQUFTbEQsRUFBSSxVQUFVLE1BQU1LLENBQUk7QUNEckMsU0FBU29ELEdBQWF6RCxHQUFLSyxHQUFNcUQsR0FBc0I7QUFDMUQsUUFBTUMsSUFBV0QsS0FBd0JyRCxFQUFLO0FBQzlDLE1BQUksTUFBTSxRQUFRc0QsQ0FBUTtBQUN0QixXQUFPO0FBQUEsTUFDSCxPQUFPQSxFQUFTLElBQUksQ0FBQ3JHLEdBQU1KLE1BQU11RyxHQUFhekQsR0FBS0ssR0FBTS9DLENBQUksQ0FBQztBQUFBLElBQ2pFO0FBRUwsVUFBUXFHLEdBQVE7QUFBQSxJQUNaLEtBQUs7QUFBQSxJQUNMLEtBQUs7QUFDRCxhQUFPO0FBQUEsUUFDSCxNQUFNO0FBQUEsUUFDTixRQUFRO0FBQUEsTUFDWDtBQUFBLElBQ0wsS0FBSztBQUNELGFBQU87QUFBQSxRQUNILE1BQU07QUFBQSxRQUNOLFFBQVE7QUFBQSxNQUNYO0FBQUEsSUFDTCxLQUFLO0FBQ0QsYUFBT0MsR0FBa0I1RCxHQUFLSyxDQUFJO0FBQUEsRUFDOUM7QUFDQTtBQUNBLE1BQU11RCxLQUFvQixDQUFDNUQsR0FBS0ssTUFBUztBQUNyQyxRQUFNSCxJQUFNO0FBQUEsSUFDUixNQUFNO0FBQUEsSUFDTixRQUFRO0FBQUEsRUFDWDtBQUNELE1BQUlHLEVBQUssV0FBVztBQUNoQixXQUFPSDtBQUVYLGFBQVdrRCxLQUFTcEQsRUFBSTtBQUNwQixZQUFRb0QsRUFBTSxNQUFJO0FBQUEsTUFDZCxLQUFLO0FBQ0QsUUFBQTlDO0FBQUEsVUFBMEJKO0FBQUEsVUFBSztBQUFBLFVBQVdrRCxFQUFNO0FBQUE7QUFBQSxVQUNoREEsRUFBTTtBQUFBLFVBQVMvQztBQUFBLFFBQUk7QUFDbkI7QUFBQSxNQUNKLEtBQUs7QUFDRCxRQUFBQztBQUFBLFVBQTBCSjtBQUFBLFVBQUs7QUFBQSxVQUFXa0QsRUFBTTtBQUFBO0FBQUEsVUFDaERBLEVBQU07QUFBQSxVQUFTL0M7QUFBQSxRQUFJO0FBQ25CO0FBQUEsSUFDaEI7QUFFSSxTQUFPSDtBQUNYO0FDNUNPLFNBQVMyRCxHQUFnQk4sR0FBTWxELEdBQU07QUFDeEMsU0FBTztBQUFBLElBQ0gsR0FBRzZDLEVBQVNLLEVBQUssVUFBVSxNQUFNbEQsQ0FBSTtBQUFBLElBQ3JDLFNBQVNrRCxFQUFLLGFBQWM7QUFBQSxFQUMvQjtBQUNMO0FDTE8sU0FBU08sR0FBZ0JQLEdBQU1sRCxHQUFNMEQsR0FBaUI7QUFDekQsU0FBTzFELEVBQUssbUJBQW1CLFVBQVU2QyxFQUFTSyxFQUFLLE9BQU8sTUFBTWxELEdBQU0wRCxDQUFlLElBQUksQ0FBRTtBQUNuRztBQ0hPLFNBQVNDLEdBQWFoRSxHQUFLO0FBQzlCLFNBQU87QUFBQSxJQUNILE1BQU07QUFBQSxJQUNOLE1BQU0sQ0FBQyxHQUFHQSxFQUFJLE1BQU07QUFBQSxFQUN2QjtBQUNMO0FDSkEsTUFBTWlFLEtBQXlCLENBQUNDLE1BQ3hCLFVBQVVBLEtBQVFBLEVBQUssU0FBUyxXQUN6QixLQUNKLFdBQVdBO0FBRWYsU0FBU0MsR0FBcUJuRSxHQUFLSyxHQUFNO0FBQzVDLFFBQU0rRCxJQUFRO0FBQUEsSUFDVmxCLEVBQVNsRCxFQUFJLEtBQUssTUFBTTtBQUFBLE1BQ3BCLEdBQUdLO0FBQUEsTUFDSCxhQUFhLENBQUMsR0FBR0EsRUFBSyxhQUFhLFNBQVMsR0FBRztBQUFBLElBQzNELENBQVM7QUFBQSxJQUNENkMsRUFBU2xELEVBQUksTUFBTSxNQUFNO0FBQUEsTUFDckIsR0FBR0s7QUFBQSxNQUNILGFBQWEsQ0FBQyxHQUFHQSxFQUFLLGFBQWEsU0FBUyxHQUFHO0FBQUEsSUFDM0QsQ0FBUztBQUFBLEVBQ0osRUFBQyxPQUFPLENBQUNnRSxNQUFNLENBQUMsQ0FBQ0EsQ0FBQztBQUNuQixNQUFJQyxJQUF3QmpFLEVBQUssV0FBVyxzQkFBc0IsRUFBRSx1QkFBdUIsR0FBSyxJQUFLO0FBQ3JHLFFBQU1rRSxJQUFjLENBQUU7QUFFdEIsU0FBQUgsRUFBTSxRQUFRLENBQUNJLE1BQVc7QUFDdEIsUUFBSVAsR0FBdUJPLENBQU07QUFDN0IsTUFBQUQsRUFBWSxLQUFLLEdBQUdDLEVBQU8sS0FBSyxHQUM1QkEsRUFBTywwQkFBMEIsV0FHakNGLElBQXdCO0FBQUEsU0FHM0I7QUFDRCxVQUFJRyxJQUFlRDtBQUNuQixVQUFJLDBCQUEwQkEsS0FBVUEsRUFBTyx5QkFBeUIsSUFBTztBQUMzRSxjQUFNLEVBQUUsc0JBQUFFLEdBQXNCLEdBQUdDLEVBQUksSUFBS0g7QUFDMUMsUUFBQUMsSUFBZUU7QUFBQSxNQUMvQjtBQUdnQixRQUFBTCxJQUF3QjtBQUU1QixNQUFBQyxFQUFZLEtBQUtFLENBQVk7QUFBQSxJQUN6QztBQUFBLEVBQ0EsQ0FBSyxHQUNNRixFQUFZLFNBQ2Y7QUFBQSxJQUNJLE9BQU9BO0FBQUEsSUFDUCxHQUFHRDtBQUFBLEVBQ2YsSUFDVTtBQUNWO0FDaERPLFNBQVNNLEdBQWdCNUUsR0FBS0ssR0FBTTtBQUN2QyxRQUFNd0UsSUFBYSxPQUFPN0UsRUFBSTtBQUM5QixTQUFJNkUsTUFBZSxZQUNmQSxNQUFlLFlBQ2ZBLE1BQWUsYUFDZkEsTUFBZSxXQUNSO0FBQUEsSUFDSCxNQUFNLE1BQU0sUUFBUTdFLEVBQUksS0FBSyxJQUFJLFVBQVU7QUFBQSxFQUM5QyxJQUVESyxFQUFLLFdBQVcsYUFDVDtBQUFBLElBQ0gsTUFBTXdFLE1BQWUsV0FBVyxZQUFZQTtBQUFBLElBQzVDLE1BQU0sQ0FBQzdFLEVBQUksS0FBSztBQUFBLEVBQ25CLElBRUU7QUFBQSxJQUNILE1BQU02RSxNQUFlLFdBQVcsWUFBWUE7QUFBQSxJQUM1QyxPQUFPN0UsRUFBSTtBQUFBLEVBQ2Q7QUFDTDtBQ25CQSxJQUFJOEU7QUFPRyxNQUFNQyxLQUFjO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJdkIsTUFBTTtBQUFBLEVBQ04sT0FBTztBQUFBLEVBQ1AsTUFBTTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSU4sT0FBTztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVlQLE9BQU8sT0FDQ0QsT0FBZSxXQUNmQSxLQUFhLE9BQU8sd0RBQXdELEdBQUcsSUFFNUVBO0FBQUFBLEVBY1gsUUFBUTtBQUFBLEVBQ1IsUUFBUTtBQUNaO0FBQ08sU0FBU0UsR0FBZWhGLEdBQUtLLEdBQU07QUFDdEMsUUFBTUgsSUFBTTtBQUFBLElBQ1IsTUFBTTtBQUFBLEVBQ1Q7QUFDRCxXQUFTK0UsRUFBZTFFLEdBQU87QUFDM0IsV0FBT0YsRUFBSyxvQkFBb0IsV0FBVzZFLEdBQXNCM0UsQ0FBSyxJQUFJQTtBQUFBLEVBQ2xGO0FBQ0ksTUFBSVAsRUFBSTtBQUNKLGVBQVdvRCxLQUFTcEQsRUFBSTtBQUNwQixjQUFRb0QsRUFBTSxNQUFJO0FBQUEsUUFDZCxLQUFLO0FBQ0QsVUFBQTlDLEVBQTBCSixHQUFLLGFBQWEsT0FBT0EsRUFBSSxhQUFjLFdBQVcsS0FBSyxJQUFJQSxFQUFJLFdBQVdrRCxFQUFNLEtBQUssSUFBSUEsRUFBTSxPQUFPQSxFQUFNLFNBQVMvQyxDQUFJO0FBQ3ZKO0FBQUEsUUFDSixLQUFLO0FBQ0QsVUFBQUMsRUFBMEJKLEdBQUssYUFBYSxPQUFPQSxFQUFJLGFBQWMsV0FBVyxLQUFLLElBQUlBLEVBQUksV0FBV2tELEVBQU0sS0FBSyxJQUFJQSxFQUFNLE9BQU9BLEVBQU0sU0FBUy9DLENBQUk7QUFDdko7QUFBQSxRQUNKLEtBQUs7QUFDRCxrQkFBUUEsRUFBSyxlQUFhO0FBQUEsWUFDdEIsS0FBSztBQUNELGNBQUE4RSxHQUFVakYsR0FBSyxTQUFTa0QsRUFBTSxTQUFTL0MsQ0FBSTtBQUMzQztBQUFBLFlBQ0osS0FBSztBQUNELGNBQUE4RSxHQUFVakYsR0FBSyxhQUFha0QsRUFBTSxTQUFTL0MsQ0FBSTtBQUMvQztBQUFBLFlBQ0osS0FBSztBQUNELGNBQUErRSxHQUFXbEYsR0FBSzZFLEdBQVksT0FBTzNCLEVBQU0sU0FBUy9DLENBQUk7QUFDdEQ7QUFBQSxVQUM1QjtBQUNvQjtBQUFBLFFBQ0osS0FBSztBQUNELFVBQUE4RSxHQUFVakYsR0FBSyxPQUFPa0QsRUFBTSxTQUFTL0MsQ0FBSTtBQUN6QztBQUFBLFFBQ0osS0FBSztBQUNELFVBQUE4RSxHQUFVakYsR0FBSyxRQUFRa0QsRUFBTSxTQUFTL0MsQ0FBSTtBQUMxQztBQUFBLFFBQ0osS0FBSztBQUNELFVBQUErRSxHQUFXbEYsR0FBS2tELEVBQU0sT0FBT0EsRUFBTSxTQUFTL0MsQ0FBSTtBQUNoRDtBQUFBLFFBQ0osS0FBSztBQUNELFVBQUErRSxHQUFXbEYsR0FBSzZFLEdBQVksTUFBTTNCLEVBQU0sU0FBUy9DLENBQUk7QUFDckQ7QUFBQSxRQUNKLEtBQUs7QUFDRCxVQUFBK0UsR0FBV2xGLEdBQUs2RSxHQUFZLE9BQU8zQixFQUFNLFNBQVMvQyxDQUFJO0FBQ3REO0FBQUEsUUFDSixLQUFLO0FBQ0QsVUFBQStFLEdBQVdsRixHQUFLLE9BQU8sSUFBSStFLEVBQWU3QixFQUFNLEtBQUssQ0FBQyxFQUFFLEdBQUdBLEVBQU0sU0FBUy9DLENBQUk7QUFDOUU7QUFBQSxRQUNKLEtBQUs7QUFDRCxVQUFBK0UsR0FBV2xGLEdBQUssT0FBTyxHQUFHK0UsRUFBZTdCLEVBQU0sS0FBSyxDQUFDLEdBQUcsR0FBR0EsRUFBTSxTQUFTL0MsQ0FBSTtBQUM5RTtBQUFBLFFBQ0osS0FBSztBQUNELFVBQUE4RSxHQUFVakYsR0FBSyxhQUFha0QsRUFBTSxTQUFTL0MsQ0FBSTtBQUMvQztBQUFBLFFBQ0osS0FBSztBQUNELFVBQUE4RSxHQUFVakYsR0FBSyxRQUFRa0QsRUFBTSxTQUFTL0MsQ0FBSTtBQUMxQztBQUFBLFFBQ0osS0FBSztBQUNELFVBQUE4RSxHQUFVakYsR0FBSyxRQUFRa0QsRUFBTSxTQUFTL0MsQ0FBSTtBQUMxQztBQUFBLFFBQ0osS0FBSztBQUNELFVBQUE4RSxHQUFVakYsR0FBSyxZQUFZa0QsRUFBTSxTQUFTL0MsQ0FBSTtBQUM5QztBQUFBLFFBQ0osS0FBSztBQUNELFVBQUFDLEVBQTBCSixHQUFLLGFBQWEsT0FBT0EsRUFBSSxhQUFjLFdBQVcsS0FBSyxJQUFJQSxFQUFJLFdBQVdrRCxFQUFNLEtBQUssSUFBSUEsRUFBTSxPQUFPQSxFQUFNLFNBQVMvQyxDQUFJLEdBQ3ZKQyxFQUEwQkosR0FBSyxhQUFhLE9BQU9BLEVBQUksYUFBYyxXQUFXLEtBQUssSUFBSUEsRUFBSSxXQUFXa0QsRUFBTSxLQUFLLElBQUlBLEVBQU0sT0FBT0EsRUFBTSxTQUFTL0MsQ0FBSTtBQUN2SjtBQUFBLFFBQ0osS0FBSyxZQUFZO0FBQ2IsVUFBQStFLEdBQVdsRixHQUFLLE9BQU8rRSxFQUFlN0IsRUFBTSxLQUFLLENBQUMsR0FBR0EsRUFBTSxTQUFTL0MsQ0FBSTtBQUN4RTtBQUFBLFFBQ3BCO0FBQUEsUUFDZ0IsS0FBSyxNQUFNO0FBQ1AsVUFBSStDLEVBQU0sWUFBWSxRQUNsQitCLEdBQVVqRixHQUFLLFFBQVFrRCxFQUFNLFNBQVMvQyxDQUFJLEdBRTFDK0MsRUFBTSxZQUFZLFFBQ2xCK0IsR0FBVWpGLEdBQUssUUFBUWtELEVBQU0sU0FBUy9DLENBQUk7QUFFOUM7QUFBQSxRQUNwQjtBQUFBLFFBQ2dCLEtBQUs7QUFDRCxVQUFBK0UsR0FBV2xGLEdBQUs2RSxHQUFZLE9BQU8zQixFQUFNLFNBQVMvQyxDQUFJO0FBQ3REO0FBQUEsUUFDSixLQUFLLFFBQVE7QUFDVCxVQUFBK0UsR0FBV2xGLEdBQUs2RSxHQUFZLE1BQU0zQixFQUFNLFNBQVMvQyxDQUFJO0FBQ3JEO0FBQUEsUUFDcEI7QUFBQSxRQUNnQixLQUFLLFVBQVU7QUFDWCxrQkFBUUEsRUFBSyxnQkFBYztBQUFBLFlBQ3ZCLEtBQUssaUJBQWlCO0FBQ2xCLGNBQUE4RSxHQUFVakYsR0FBSyxVQUFVa0QsRUFBTSxTQUFTL0MsQ0FBSTtBQUM1QztBQUFBLFlBQzVCO0FBQUEsWUFDd0IsS0FBSywwQkFBMEI7QUFDM0IsY0FBQUMsRUFBMEJKLEdBQUssbUJBQW1CLFVBQVVrRCxFQUFNLFNBQVMvQyxDQUFJO0FBQy9FO0FBQUEsWUFDNUI7QUFBQSxZQUN3QixLQUFLLGVBQWU7QUFDaEIsY0FBQStFLEdBQVdsRixHQUFLNkUsR0FBWSxRQUFRM0IsRUFBTSxTQUFTL0MsQ0FBSTtBQUN2RDtBQUFBLFlBQzVCO0FBQUEsVUFDQTtBQUNvQjtBQUFBLFFBQ3BCO0FBQUEsUUFDZ0IsS0FBSztBQUNELFVBQUErRSxHQUFXbEYsR0FBSzZFLEdBQVksUUFBUTNCLEVBQU0sU0FBUy9DLENBQUk7QUFBQSxNQVEzRTtBQUdJLFNBQU9IO0FBQ1g7QUFDQSxNQUFNZ0YsS0FBd0IsQ0FBQzNFLE1BQVUsTUFBTSxLQUFLQSxDQUFLLEVBQ3BELElBQUksQ0FBQzhFLE1BQU8sY0FBYyxLQUFLQSxDQUFDLElBQUlBLElBQUksS0FBS0EsQ0FBQyxFQUFHLEVBQ2pELEtBQUssRUFBRSxHQUNORixLQUFZLENBQUNYLEdBQVFqRSxHQUFPcUMsR0FBU3ZDLE1BQVM7O0FBQ2hELEVBQUltRSxFQUFPLFdBQVV2QixJQUFBdUIsRUFBTyxVQUFQLFFBQUF2QixFQUFjLEtBQUssQ0FBQ29CLE1BQU1BLEVBQUUsV0FDeENHLEVBQU8sVUFDUkEsRUFBTyxRQUFRLENBQUUsSUFFakJBLEVBQU8sV0FDUEEsRUFBTyxNQUFNLEtBQUs7QUFBQSxJQUNkLFFBQVFBLEVBQU87QUFBQSxJQUNmLEdBQUlBLEVBQU8sZ0JBQ1BuRSxFQUFLLGlCQUFpQjtBQUFBLE1BQ3RCLGNBQWMsRUFBRSxRQUFRbUUsRUFBTyxhQUFhLE9BQVE7QUFBQSxJQUN4RTtBQUFBLEVBQ0EsQ0FBYSxHQUNELE9BQU9BLEVBQU8sUUFDVkEsRUFBTyxpQkFDUCxPQUFPQSxFQUFPLGFBQWEsUUFDdkIsT0FBTyxLQUFLQSxFQUFPLFlBQVksRUFBRSxXQUFXLEtBQzVDLE9BQU9BLEVBQU8sZ0JBSTFCQSxFQUFPLE1BQU0sS0FBSztBQUFBLElBQ2QsUUFBUWpFO0FBQUEsSUFDUixHQUFJcUMsS0FBV3ZDLEVBQUssaUJBQWlCLEVBQUUsY0FBYyxFQUFFLFFBQVF1QyxFQUFPO0VBQ2xGLENBQVMsS0FHRHRDLEVBQTBCa0UsR0FBUSxVQUFVakUsR0FBT3FDLEdBQVN2QyxDQUFJO0FBRXhFLEdBQ00rRSxLQUFhLENBQUNaLEdBQVFjLEdBQU8xQyxHQUFTdkMsTUFBUzs7QUFDakQsRUFBSW1FLEVBQU8sWUFBV3ZCLElBQUF1QixFQUFPLFVBQVAsUUFBQXZCLEVBQWMsS0FBSyxDQUFDb0IsTUFBTUEsRUFBRSxZQUN6Q0csRUFBTyxVQUNSQSxFQUFPLFFBQVEsQ0FBRSxJQUVqQkEsRUFBTyxZQUNQQSxFQUFPLE1BQU0sS0FBSztBQUFBLElBQ2QsU0FBU0EsRUFBTztBQUFBLElBQ2hCLEdBQUlBLEVBQU8sZ0JBQ1BuRSxFQUFLLGlCQUFpQjtBQUFBLE1BQ3RCLGNBQWMsRUFBRSxTQUFTbUUsRUFBTyxhQUFhLFFBQVM7QUFBQSxJQUMxRTtBQUFBLEVBQ0EsQ0FBYSxHQUNELE9BQU9BLEVBQU8sU0FDVkEsRUFBTyxpQkFDUCxPQUFPQSxFQUFPLGFBQWEsU0FDdkIsT0FBTyxLQUFLQSxFQUFPLFlBQVksRUFBRSxXQUFXLEtBQzVDLE9BQU9BLEVBQU8sZ0JBSTFCQSxFQUFPLE1BQU0sS0FBSztBQUFBLElBQ2QsU0FBU2UsR0FBY0QsR0FBT2pGLENBQUk7QUFBQSxJQUNsQyxHQUFJdUMsS0FBV3ZDLEVBQUssaUJBQWlCLEVBQUUsY0FBYyxFQUFFLFNBQVN1QyxFQUFPO0VBQ25GLENBQVMsS0FHRHRDLEVBQTBCa0UsR0FBUSxXQUFXZSxHQUFjRCxHQUFPakYsQ0FBSSxHQUFHdUMsR0FBU3ZDLENBQUk7QUFFOUYsR0FFTWtGLEtBQWdCLENBQUNDLEdBQWlCbkYsTUFBUzs7QUFDN0MsUUFBTWlGLElBQVEsT0FBT0UsS0FBb0IsYUFBYUEsRUFBaUIsSUFBR0E7QUFDMUUsTUFBSSxDQUFDbkYsRUFBSyxtQkFBbUIsQ0FBQ2lGLEVBQU07QUFDaEMsV0FBT0EsRUFBTTtBQUVqQixRQUFNRyxJQUFRO0FBQUEsSUFDVixHQUFHSCxFQUFNLE1BQU0sU0FBUyxHQUFHO0FBQUE7QUFBQSxJQUMzQixHQUFHQSxFQUFNLE1BQU0sU0FBUyxHQUFHO0FBQUE7QUFBQSxJQUMzQixHQUFHQSxFQUFNLE1BQU0sU0FBUyxHQUFHO0FBQUE7QUFBQSxFQUM5QixHQUVLSSxJQUFTRCxFQUFNLElBQUlILEVBQU0sT0FBTyxZQUFXLElBQUtBLEVBQU07QUFDNUQsTUFBSUssSUFBVSxJQUNWQyxJQUFZLElBQ1pDLElBQWMsSUFDZEMsSUFBYztBQUNsQixXQUFTNUksSUFBSSxHQUFHQSxJQUFJd0ksRUFBTyxRQUFReEksS0FBSztBQUNwQyxRQUFJMEksR0FBVztBQUNYLE1BQUFELEtBQVdELEVBQU94SSxDQUFDLEdBQ25CMEksSUFBWTtBQUNaO0FBQUEsSUFDWjtBQUNRLFFBQUlILEVBQU07QUFDTixVQUFJSTtBQUNBLFlBQUlILEVBQU94SSxDQUFDLEVBQUUsTUFBTSxPQUFPLEdBQUc7QUFDMUIsVUFBSTRJLEtBQ0FILEtBQVdELEVBQU94SSxDQUFDLEdBQ25CeUksS0FBVyxHQUFHRCxFQUFPeEksSUFBSSxDQUFDLENBQUMsSUFBSXdJLEVBQU94SSxDQUFDLENBQUMsR0FBRyxZQUFhLEdBQ3hENEksSUFBYyxNQUVUSixFQUFPeEksSUFBSSxDQUFDLE1BQU0sU0FBTytGLElBQUF5QyxFQUFPeEksSUFBSSxDQUFDLE1BQVosUUFBQStGLEVBQWUsTUFBTSxhQUNuRDBDLEtBQVdELEVBQU94SSxDQUFDLEdBQ25CNEksSUFBYyxNQUdkSCxLQUFXLEdBQUdELEVBQU94SSxDQUFDLENBQUMsR0FBR3dJLEVBQU94SSxDQUFDLEVBQUUsWUFBVyxDQUFFO0FBRXJEO0FBQUEsUUFDcEI7QUFBQSxpQkFFcUJ3SSxFQUFPeEksQ0FBQyxFQUFFLE1BQU0sT0FBTyxHQUFHO0FBQy9CLFFBQUF5SSxLQUFXLElBQUlELEVBQU94SSxDQUFDLENBQUMsR0FBR3dJLEVBQU94SSxDQUFDLEVBQUUsWUFBYSxDQUFBO0FBQ2xEO0FBQUEsTUFDaEI7QUFBQTtBQUVRLFFBQUl1SSxFQUFNO0FBQ04sVUFBSUMsRUFBT3hJLENBQUMsTUFBTSxLQUFLO0FBQ25CLFFBQUF5SSxLQUFXO0FBQUE7QUFDWDtBQUFBLE1BQ2hCLFdBQ3FCRCxFQUFPeEksQ0FBQyxNQUFNLEtBQUs7QUFDeEIsUUFBQXlJLEtBQVc7QUFBQTtBQUNYO0FBQUEsTUFDaEI7QUFBQTtBQUVRLFFBQUlGLEVBQU0sS0FBS0MsRUFBT3hJLENBQUMsTUFBTSxLQUFLO0FBQzlCLE1BQUF5SSxLQUFXRSxJQUFjLEdBQUdILEVBQU94SSxDQUFDLENBQUM7QUFBQSxJQUFTLElBQUl3SSxFQUFPeEksQ0FBQyxDQUFDO0FBQUE7QUFDM0Q7QUFBQSxJQUNaO0FBQ1EsSUFBQXlJLEtBQVdELEVBQU94SSxDQUFDLEdBQ2Z3SSxFQUFPeEksQ0FBQyxNQUFNLE9BQ2QwSSxJQUFZLEtBRVBDLEtBQWVILEVBQU94SSxDQUFDLE1BQU0sTUFDbEMySSxJQUFjLEtBRVQsQ0FBQ0EsS0FBZUgsRUFBT3hJLENBQUMsTUFBTSxRQUNuQzJJLElBQWM7QUFBQSxFQUUxQjtBQUNJLE1BQUk7QUFDQSxVQUFNRSxJQUFZLElBQUksT0FBT0osQ0FBTztBQUFBLEVBQzVDLFFBQ1U7QUFDRixtQkFBUSxLQUFLLHNDQUFzQ3RGLEVBQUssWUFBWSxLQUFLLEdBQUcsQ0FBQyx1RUFBdUUsR0FDN0lpRixFQUFNO0FBQUEsRUFDckI7QUFDSSxTQUFPSztBQUNYO0FDblRPLFNBQVNLLEdBQWVoRyxHQUFLSyxHQUFNOztBQUN0QyxNQUFJQSxFQUFLLFdBQVcsZ0JBQWM0QyxJQUFBakQsRUFBSSxZQUFKLGdCQUFBaUQsRUFBYSxLQUFLLGNBQWFKLEVBQXNCO0FBQ25GLFdBQU87QUFBQSxNQUNILE1BQU07QUFBQSxNQUNOLFVBQVU3QyxFQUFJLFFBQVEsS0FBSztBQUFBLE1BQzNCLFlBQVlBLEVBQUksUUFBUSxLQUFLLE9BQU8sT0FBTyxDQUFDaUcsR0FBSzlGLE9BQVM7QUFBQSxRQUN0RCxHQUFHOEY7QUFBQSxRQUNILENBQUM5RixDQUFHLEdBQUcrQyxFQUFTbEQsRUFBSSxVQUFVLE1BQU07QUFBQSxVQUNoQyxHQUFHSztBQUFBLFVBQ0gsYUFBYSxDQUFDLEdBQUdBLEVBQUssYUFBYSxjQUFjRixDQUFHO0FBQUEsUUFDdkQsQ0FBQSxLQUFLLENBQUU7QUFBQSxNQUNYLElBQUcsQ0FBQSxDQUFFO0FBQUEsTUFDTixzQkFBc0I7QUFBQSxJQUN6QjtBQUVMLFFBQU1xRSxJQUFTO0FBQUEsSUFDWCxNQUFNO0FBQUEsSUFDTixzQkFBc0J0QixFQUFTbEQsRUFBSSxVQUFVLE1BQU07QUFBQSxNQUMvQyxHQUFHSztBQUFBLE1BQ0gsYUFBYSxDQUFDLEdBQUdBLEVBQUssYUFBYSxzQkFBc0I7QUFBQSxJQUM1RCxDQUFBLEtBQUssQ0FBRTtBQUFBLEVBQ1g7QUFDRCxNQUFJQSxFQUFLLFdBQVc7QUFDaEIsV0FBT21FO0FBRVgsUUFBSXhCLElBQUFoRCxFQUFJLFlBQUosZ0JBQUFnRCxFQUFhLEtBQUssY0FBYUgsRUFBc0IsZUFBYXFELElBQUFsRyxFQUFJLFFBQVEsS0FBSyxXQUFqQixRQUFBa0csRUFBeUIsU0FBUTtBQUNuRyxVQUFNQyxJQUFVLE9BQU8sUUFBUW5CLEdBQWVoRixFQUFJLFFBQVEsTUFBTUssQ0FBSSxDQUFDLEVBQUUsT0FBTyxDQUFDNEYsR0FBSyxDQUFDOUYsR0FBS0ksQ0FBSyxNQUFPSixNQUFRLFNBQVM4RixJQUFNLEVBQUUsR0FBR0EsR0FBSyxDQUFDOUYsQ0FBRyxHQUFHSSxFQUFPLEdBQUcsQ0FBQSxDQUFFO0FBQzFKLFdBQU87QUFBQSxNQUNILEdBQUdpRTtBQUFBLE1BQ0gsZUFBZTJCO0FBQUEsSUFDbEI7QUFBQSxFQUNULGFBQ2FDLElBQUFwRyxFQUFJLFlBQUosZ0JBQUFvRyxFQUFhLEtBQUssY0FBYXZELEVBQXNCO0FBQzFELFdBQU87QUFBQSxNQUNILEdBQUcyQjtBQUFBLE1BQ0gsZUFBZTtBQUFBLFFBQ1gsTUFBTXhFLEVBQUksUUFBUSxLQUFLO0FBQUEsTUFDMUI7QUFBQSxJQUNKO0FBRUwsU0FBT3dFO0FBQ1g7QUMxQ08sU0FBUzZCLEdBQVlyRyxHQUFLSyxHQUFNO0FBQ25DLE1BQUlBLEVBQUssZ0JBQWdCO0FBQ3JCLFdBQU8yRixHQUFlaEcsR0FBS0ssQ0FBSTtBQUVuQyxRQUFNZSxJQUFPOEIsRUFBU2xELEVBQUksUUFBUSxNQUFNO0FBQUEsSUFDcEMsR0FBR0s7QUFBQSxJQUNILGFBQWEsQ0FBQyxHQUFHQSxFQUFLLGFBQWEsU0FBUyxTQUFTLEdBQUc7QUFBQSxFQUMzRCxDQUFBLEtBQUssQ0FBRSxHQUNGaUcsSUFBU3BELEVBQVNsRCxFQUFJLFVBQVUsTUFBTTtBQUFBLElBQ3hDLEdBQUdLO0FBQUEsSUFDSCxhQUFhLENBQUMsR0FBR0EsRUFBSyxhQUFhLFNBQVMsU0FBUyxHQUFHO0FBQUEsRUFDM0QsQ0FBQSxLQUFLLENBQUU7QUFDUixTQUFPO0FBQUEsSUFDSCxNQUFNO0FBQUEsSUFDTixVQUFVO0FBQUEsSUFDVixPQUFPO0FBQUEsTUFDSCxNQUFNO0FBQUEsTUFDTixPQUFPLENBQUNlLEdBQU1rRixDQUFNO0FBQUEsTUFDcEIsVUFBVTtBQUFBLE1BQ1YsVUFBVTtBQUFBLElBQ2I7QUFBQSxFQUNKO0FBQ0w7QUN4Qk8sU0FBU0MsR0FBbUJ2RyxHQUFLO0FBQ3BDLFFBQU1tQixJQUFTbkIsRUFBSSxRQUlid0csSUFIYSxPQUFPLEtBQUt4RyxFQUFJLE1BQU0sRUFBRSxPQUFPLENBQUNHLE1BQ3hDLE9BQU9nQixFQUFPQSxFQUFPaEIsQ0FBRyxDQUFDLEtBQU0sUUFDekMsRUFDK0IsSUFBSSxDQUFDQSxNQUFRZ0IsRUFBT2hCLENBQUcsQ0FBQyxHQUNsRHNHLElBQWMsTUFBTSxLQUFLLElBQUksSUFBSUQsRUFBYSxJQUFJLENBQUNGLE1BQVcsT0FBT0EsQ0FBTSxDQUFDLENBQUM7QUFDbkYsU0FBTztBQUFBLElBQ0gsTUFBTUcsRUFBWSxXQUFXLElBQ3pCQSxFQUFZLENBQUMsTUFBTSxXQUNmLFdBQ0UsV0FDSixDQUFDLFVBQVUsUUFBUTtBQUFBLElBQ3pCLE1BQU1EO0FBQUEsRUFDVDtBQUNMO0FDZk8sU0FBU0UsS0FBZ0I7QUFDNUIsU0FBTztBQUFBLElBQ0gsS0FBSyxDQUFFO0FBQUEsRUFDVjtBQUNMO0FDSk8sU0FBU0MsR0FBYXRHLEdBQU07QUFDL0IsU0FBT0EsRUFBSyxXQUFXLGFBQ25CO0FBQUEsSUFDSSxNQUFNLENBQUMsTUFBTTtBQUFBLElBQ2IsVUFBVTtBQUFBLEVBQ3RCLElBQ1U7QUFBQSxJQUNFLE1BQU07QUFBQSxFQUNUO0FBQ1Q7QUNSTyxNQUFNdUcsS0FBb0I7QUFBQSxFQUM3QixXQUFXO0FBQUEsRUFDWCxXQUFXO0FBQUEsRUFDWCxXQUFXO0FBQUEsRUFDWCxZQUFZO0FBQUEsRUFDWixTQUFTO0FBQ2I7QUFDTyxTQUFTQyxHQUFjN0csR0FBS0ssR0FBTTtBQUNyQyxNQUFJQSxFQUFLLFdBQVc7QUFDaEIsV0FBT3lHLEdBQVE5RyxHQUFLSyxDQUFJO0FBQzVCLFFBQU1kLElBQVVTLEVBQUksbUJBQW1CLE1BQU0sTUFBTSxLQUFLQSxFQUFJLFFBQVEsUUFBUSxJQUFJQSxFQUFJO0FBRXBGLE1BQUlULEVBQVEsTUFBTSxDQUFDOEUsTUFBTUEsRUFBRSxLQUFLLFlBQVl1QyxPQUFzQixDQUFDdkMsRUFBRSxLQUFLLFVBQVUsQ0FBQ0EsRUFBRSxLQUFLLE9BQU8sT0FBTyxHQUFHO0FBRXpHLFVBQU0wQyxJQUFReEgsRUFBUSxPQUFPLENBQUN3SCxHQUFPMUMsTUFBTTtBQUN2QyxZQUFNSCxJQUFPMEMsR0FBa0J2QyxFQUFFLEtBQUssUUFBUTtBQUM5QyxhQUFPSCxLQUFRLENBQUM2QyxFQUFNLFNBQVM3QyxDQUFJLElBQUksQ0FBQyxHQUFHNkMsR0FBTzdDLENBQUksSUFBSTZDO0FBQUEsSUFDN0QsR0FBRSxFQUFFO0FBQ0wsV0FBTztBQUFBLE1BQ0gsTUFBTUEsRUFBTSxTQUFTLElBQUlBLElBQVFBLEVBQU0sQ0FBQztBQUFBLElBQzNDO0FBQUEsRUFDVCxXQUNheEgsRUFBUSxNQUFNLENBQUM4RSxNQUFNQSxFQUFFLEtBQUssYUFBYSxnQkFBZ0IsQ0FBQ0EsRUFBRSxXQUFXLEdBQUc7QUFFL0UsVUFBTTBDLElBQVF4SCxFQUFRLE9BQU8sQ0FBQzBHLEdBQUs1QixNQUFNO0FBQ3JDLFlBQU1ILElBQU8sT0FBT0csRUFBRSxLQUFLO0FBQzNCLGNBQVFILEdBQUk7QUFBQSxRQUNSLEtBQUs7QUFBQSxRQUNMLEtBQUs7QUFBQSxRQUNMLEtBQUs7QUFDRCxpQkFBTyxDQUFDLEdBQUcrQixHQUFLL0IsQ0FBSTtBQUFBLFFBQ3hCLEtBQUs7QUFDRCxpQkFBTyxDQUFDLEdBQUcrQixHQUFLLFNBQVM7QUFBQSxRQUM3QixLQUFLO0FBQ0QsY0FBSTVCLEVBQUUsS0FBSyxVQUFVO0FBQ2pCLG1CQUFPLENBQUMsR0FBRzRCLEdBQUssTUFBTTtBQUFBLFFBQzlCLEtBQUs7QUFBQSxRQUNMLEtBQUs7QUFBQSxRQUNMLEtBQUs7QUFBQSxRQUNMO0FBQ0ksaUJBQU9BO0FBQUEsTUFDM0I7QUFBQSxJQUNTLEdBQUUsRUFBRTtBQUNMLFFBQUljLEVBQU0sV0FBV3hILEVBQVEsUUFBUTtBQUVqQyxZQUFNeUgsSUFBY0QsRUFBTSxPQUFPLENBQUMxQyxHQUFHLEdBQUc0QyxNQUFNQSxFQUFFLFFBQVE1QyxDQUFDLE1BQU0sQ0FBQztBQUNoRSxhQUFPO0FBQUEsUUFDSCxNQUFNMkMsRUFBWSxTQUFTLElBQUlBLElBQWNBLEVBQVksQ0FBQztBQUFBLFFBQzFELE1BQU16SCxFQUFRLE9BQU8sQ0FBQzBHLEdBQUs1QixNQUNoQjRCLEVBQUksU0FBUzVCLEVBQUUsS0FBSyxLQUFLLElBQUk0QixJQUFNLENBQUMsR0FBR0EsR0FBSzVCLEVBQUUsS0FBSyxLQUFLLEdBQ2hFLEVBQUU7QUFBQSxNQUNSO0FBQUEsSUFDYjtBQUFBLEVBQ0EsV0FDYTlFLEVBQVEsTUFBTSxDQUFDOEUsTUFBTUEsRUFBRSxLQUFLLGFBQWEsU0FBUztBQUN2RCxXQUFPO0FBQUEsTUFDSCxNQUFNO0FBQUEsTUFDTixNQUFNOUUsRUFBUSxPQUFPLENBQUMwRyxHQUFLNUIsTUFBTSxDQUFDLEdBQUc0QixHQUFLLEdBQUc1QixFQUFFLEtBQUssT0FBTyxPQUFPLENBQUNBLE1BQU0sQ0FBQzRCLEVBQUksU0FBUzVCLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRTtBQUFBLElBQ2xHO0FBRUwsU0FBT3lDLEdBQVE5RyxHQUFLSyxDQUFJO0FBQzVCO0FBQ0EsTUFBTXlHLEtBQVUsQ0FBQzlHLEdBQUtLLE1BQVM7QUFDM0IsUUFBTTZHLEtBQVNsSCxFQUFJLG1CQUFtQixNQUFNLE1BQU0sS0FBS0EsRUFBSSxRQUFRLFFBQVEsSUFBSUEsRUFBSSxTQUM5RSxJQUFJLENBQUNxRSxHQUFHbkgsTUFBTWdHLEVBQVNtQixFQUFFLE1BQU07QUFBQSxJQUNoQyxHQUFHaEU7QUFBQSxJQUNILGFBQWEsQ0FBQyxHQUFHQSxFQUFLLGFBQWEsU0FBUyxHQUFHbkQsQ0FBQyxFQUFFO0FBQUEsRUFDMUQsQ0FBSyxDQUFDLEVBQ0csT0FBTyxDQUFDbUgsTUFBTSxDQUFDLENBQUNBLE1BQU0sQ0FBQ2hFLEVBQUssZ0JBQWlCLE9BQU9nRSxLQUFNLFlBQVksT0FBTyxLQUFLQSxDQUFDLEVBQUUsU0FBUyxFQUFHO0FBQ3RHLFNBQU82QyxFQUFNLFNBQVMsRUFBRSxPQUFBQSxFQUFPLElBQUc7QUFDdEM7QUNyRU8sU0FBU0MsR0FBaUJuSCxHQUFLSyxHQUFNO0FBQ3hDLE1BQUksQ0FBQyxhQUFhLGFBQWEsYUFBYSxjQUFjLFNBQVMsRUFBRSxTQUFTTCxFQUFJLFVBQVUsS0FBSyxRQUFRLE1BQ3BHLENBQUNBLEVBQUksVUFBVSxLQUFLLFVBQVUsQ0FBQ0EsRUFBSSxVQUFVLEtBQUssT0FBTztBQUMxRCxXQUFJSyxFQUFLLFdBQVcsY0FBY0EsRUFBSyxxQkFBcUIsYUFDakQ7QUFBQSxNQUNILE1BQU11RyxHQUFrQjVHLEVBQUksVUFBVSxLQUFLLFFBQVE7QUFBQSxNQUNuRCxVQUFVO0FBQUEsSUFDYixJQUVFO0FBQUEsTUFDSCxNQUFNLENBQUM0RyxHQUFrQjVHLEVBQUksVUFBVSxLQUFLLFFBQVEsR0FBRyxNQUFNO0FBQUEsSUFDaEU7QUFFTCxNQUFJSyxFQUFLLFdBQVcsWUFBWTtBQUM1QixVQUFNK0csSUFBT2xFLEVBQVNsRCxFQUFJLFVBQVUsTUFBTTtBQUFBLE1BQ3RDLEdBQUdLO0FBQUEsTUFDSCxhQUFhLENBQUMsR0FBR0EsRUFBSyxXQUFXO0FBQUEsSUFDN0MsQ0FBUztBQUNELFdBQUkrRyxLQUFRLFVBQVVBLElBQ1gsRUFBRSxPQUFPLENBQUNBLENBQUksR0FBRyxVQUFVLEdBQU0sSUFDckNBLEtBQVEsRUFBRSxHQUFHQSxHQUFNLFVBQVUsR0FBTTtBQUFBLEVBQ2xEO0FBQ0ksUUFBTUEsSUFBT2xFLEVBQVNsRCxFQUFJLFVBQVUsTUFBTTtBQUFBLElBQ3RDLEdBQUdLO0FBQUEsSUFDSCxhQUFhLENBQUMsR0FBR0EsRUFBSyxhQUFhLFNBQVMsR0FBRztBQUFBLEVBQ3ZELENBQUs7QUFDRCxTQUFPK0csS0FBUSxFQUFFLE9BQU8sQ0FBQ0EsR0FBTSxFQUFFLE1BQU0sT0FBTSxDQUFFLEVBQUc7QUFDdEQ7QUM1Qk8sU0FBU0MsR0FBZXJILEdBQUtLLEdBQU07QUFDdEMsUUFBTUgsSUFBTTtBQUFBLElBQ1IsTUFBTTtBQUFBLEVBQ1Q7QUFDRCxNQUFJLENBQUNGLEVBQUk7QUFDTCxXQUFPRTtBQUNYLGFBQVdrRCxLQUFTcEQsRUFBSTtBQUNwQixZQUFRb0QsRUFBTSxNQUFJO0FBQUEsTUFDZCxLQUFLO0FBQ0QsUUFBQWxELEVBQUksT0FBTyxXQUNYRCxHQUFnQkMsR0FBSyxRQUFRa0QsRUFBTSxTQUFTL0MsQ0FBSTtBQUNoRDtBQUFBLE1BQ0osS0FBSztBQUNELFFBQUlBLEVBQUssV0FBVyxnQkFDWitDLEVBQU0sWUFDTjlDLEVBQTBCSixHQUFLLFdBQVdrRCxFQUFNLE9BQU9BLEVBQU0sU0FBUy9DLENBQUksSUFHMUVDLEVBQTBCSixHQUFLLG9CQUFvQmtELEVBQU0sT0FBT0EsRUFBTSxTQUFTL0MsQ0FBSSxLQUlsRitDLEVBQU0sY0FDUGxELEVBQUksbUJBQW1CLEtBRTNCSSxFQUEwQkosR0FBSyxXQUFXa0QsRUFBTSxPQUFPQSxFQUFNLFNBQVMvQyxDQUFJO0FBRTlFO0FBQUEsTUFDSixLQUFLO0FBQ0QsUUFBSUEsRUFBSyxXQUFXLGdCQUNaK0MsRUFBTSxZQUNOOUMsRUFBMEJKLEdBQUssV0FBV2tELEVBQU0sT0FBT0EsRUFBTSxTQUFTL0MsQ0FBSSxJQUcxRUMsRUFBMEJKLEdBQUssb0JBQW9Ca0QsRUFBTSxPQUFPQSxFQUFNLFNBQVMvQyxDQUFJLEtBSWxGK0MsRUFBTSxjQUNQbEQsRUFBSSxtQkFBbUIsS0FFM0JJLEVBQTBCSixHQUFLLFdBQVdrRCxFQUFNLE9BQU9BLEVBQU0sU0FBUy9DLENBQUk7QUFFOUU7QUFBQSxNQUNKLEtBQUs7QUFDRCxRQUFBQyxFQUEwQkosR0FBSyxjQUFja0QsRUFBTSxPQUFPQSxFQUFNLFNBQVMvQyxDQUFJO0FBQzdFO0FBQUEsSUFDaEI7QUFFSSxTQUFPSDtBQUNYO0FDbERBLFNBQVNvSCxHQUEyQnRILEdBQUtLLEdBQU07QUFDM0MsU0FBSUEsRUFBSyw2QkFBNkIsV0FDM0JMLEVBQUksU0FBUyxLQUFLLGFBQWEsYUFDbENBLEVBQUksZ0JBQWdCLFdBQ2xCa0QsRUFBU2xELEVBQUksU0FBUyxNQUFNO0FBQUEsSUFDMUIsR0FBR0s7QUFBQSxJQUNILGFBQWEsQ0FBQyxHQUFHQSxFQUFLLGFBQWEsc0JBQXNCO0FBQUEsRUFDNUQsQ0FBQSxLQUFLLEtBR0hMLEVBQUksU0FBUyxLQUFLLGFBQWEsYUFDbENBLEVBQUksZ0JBQWdCLGdCQUNsQmtELEVBQVNsRCxFQUFJLFNBQVMsTUFBTTtBQUFBLElBQzFCLEdBQUdLO0FBQUEsSUFDSCxhQUFhLENBQUMsR0FBR0EsRUFBSyxhQUFhLHNCQUFzQjtBQUFBLEVBQzVELENBQUEsS0FBSztBQUVsQjtBQUNPLFNBQVNrSCxHQUFldkgsR0FBS0ssR0FBTTtBQUN0QyxRQUFNbUgsSUFBUztBQUFBLElBQ1gsTUFBTTtBQUFBLElBQ04sR0FBRyxPQUFPLFFBQVF4SCxFQUFJLE1BQU8sQ0FBQSxFQUFFLE9BQU8sQ0FBQ2lHLEdBQUssQ0FBQ3dCLEdBQVVDLENBQU8sTUFBTTs7QUFDaEUsVUFBSUEsTUFBWSxVQUFhQSxFQUFRLFNBQVM7QUFDMUMsZUFBT3pCO0FBQ1gsWUFBTTBCLElBQWUsQ0FBQyxHQUFHdEgsRUFBSyxhQUFhLGNBQWNvSCxDQUFRLEdBQzNERyxJQUFZMUUsRUFBU3dFLEVBQVEsTUFBTTtBQUFBLFFBQ3JDLEdBQUdySDtBQUFBLFFBQ0gsYUFBYXNIO0FBQUEsUUFDYixjQUFBQTtBQUFBLE1BQ2hCLENBQWE7QUFDRCxVQUFJQyxNQUFjO0FBQ2QsZUFBTzNCO0FBQ1gsVUFBSTVGLEVBQUssb0JBQ0xxSCxFQUFRLFdBQVksS0FDcEIsQ0FBQ0EsRUFBUSxXQUFZLEtBQ3JCLFNBQU96RSxJQUFBeUUsRUFBUSxTQUFSLGdCQUFBekUsRUFBYyxnQkFBaUI7QUFDdEMsY0FBTSxJQUFJLE1BQU0sa0JBQWtCMEUsRUFBYSxLQUFLLEdBQUcsQ0FBQyxtTUFBbU07QUFFL1AsYUFBTztBQUFBLFFBQ0gsWUFBWTtBQUFBLFVBQ1IsR0FBRzFCLEVBQUk7QUFBQSxVQUNQLENBQUN3QixDQUFRLEdBQUdHO0FBQUEsUUFDZjtBQUFBLFFBQ0QsVUFBVUYsRUFBUSxXQUFZLEtBQUksQ0FBQ3JILEVBQUssbUJBQW1CNEYsRUFBSSxXQUFXLENBQUMsR0FBR0EsRUFBSSxVQUFVd0IsQ0FBUTtBQUFBLE1BQ3ZHO0FBQUEsSUFDSixHQUFFLEVBQUUsWUFBWSxDQUFBLEdBQUksVUFBVSxDQUFFLEVBQUEsQ0FBRTtBQUFBLElBQ25DLHNCQUFzQkgsR0FBMkJ0SCxHQUFLSyxDQUFJO0FBQUEsRUFDN0Q7QUFDRCxTQUFLbUgsRUFBTyxTQUFTLFVBQ2pCLE9BQU9BLEVBQU8sVUFDWEE7QUFDWDtBQ25ETyxNQUFNSyxLQUFtQixDQUFDN0gsR0FBS0ssTUFBUzs7QUFDM0MsTUFBSUEsRUFBSyxZQUFZLFNBQVEsUUFBTzRDLElBQUE1QyxFQUFLLGlCQUFMLGdCQUFBNEMsRUFBbUI7QUFDbkQsV0FBT0MsRUFBU2xELEVBQUksVUFBVSxNQUFNSyxDQUFJO0FBRTVDLFFBQU15SCxJQUFjNUUsRUFBU2xELEVBQUksVUFBVSxNQUFNO0FBQUEsSUFDN0MsR0FBR0s7QUFBQSxJQUNILGFBQWEsQ0FBQyxHQUFHQSxFQUFLLGFBQWEsU0FBUyxHQUFHO0FBQUEsRUFDdkQsQ0FBSztBQUNELFNBQU95SCxJQUNIO0FBQUEsSUFDSSxPQUFPO0FBQUEsTUFDSDtBQUFBLFFBQ0ksS0FBSyxDQUFFO0FBQUEsTUFDVjtBQUFBLE1BQ0RBO0FBQUEsSUFDSDtBQUFBLEVBQ2IsSUFDVSxDQUFFO0FBQ1osR0NsQmFDLEtBQW1CLENBQUMvSCxHQUFLSyxNQUFTO0FBQzNDLE1BQUlBLEVBQUssaUJBQWlCO0FBQ3RCLFdBQU82QyxFQUFTbEQsRUFBSSxHQUFHLE1BQU1LLENBQUk7QUFFaEMsTUFBSUEsRUFBSyxpQkFBaUI7QUFDM0IsV0FBTzZDLEVBQVNsRCxFQUFJLElBQUksTUFBTUssQ0FBSTtBQUV0QyxRQUFNNEcsSUFBSS9ELEVBQVNsRCxFQUFJLEdBQUcsTUFBTTtBQUFBLElBQzVCLEdBQUdLO0FBQUEsSUFDSCxhQUFhLENBQUMsR0FBR0EsRUFBSyxhQUFhLFNBQVMsR0FBRztBQUFBLEVBQ3ZELENBQUssR0FDSzJILElBQUk5RSxFQUFTbEQsRUFBSSxJQUFJLE1BQU07QUFBQSxJQUM3QixHQUFHSztBQUFBLElBQ0gsYUFBYSxDQUFDLEdBQUdBLEVBQUssYUFBYSxTQUFTNEcsSUFBSSxNQUFNLEdBQUc7QUFBQSxFQUNqRSxDQUFLO0FBQ0QsU0FBTztBQUFBLElBQ0gsT0FBTyxDQUFDQSxHQUFHZSxDQUFDLEVBQUUsT0FBTyxDQUFDM0QsTUFBTUEsTUFBTSxNQUFTO0FBQUEsRUFDOUM7QUFDTDtBQ2xCTyxTQUFTNEQsR0FBZ0JqSSxHQUFLSyxHQUFNO0FBQ3ZDLFNBQU82QyxFQUFTbEQsRUFBSSxLQUFLLE1BQU1LLENBQUk7QUFDdkM7QUNETyxTQUFTNkgsR0FBWWxJLEdBQUtLLEdBQU07QUFLbkMsUUFBTW1FLElBQVM7QUFBQSxJQUNYLE1BQU07QUFBQSxJQUNOLGFBQWE7QUFBQSxJQUNiLE9BUFV0QixFQUFTbEQsRUFBSSxVQUFVLE1BQU07QUFBQSxNQUN2QyxHQUFHSztBQUFBLE1BQ0gsYUFBYSxDQUFDLEdBQUdBLEVBQUssYUFBYSxPQUFPO0FBQUEsSUFDbEQsQ0FBSztBQUFBLEVBS0E7QUFDRCxTQUFJTCxFQUFJLFdBQ0pNLEVBQTBCa0UsR0FBUSxZQUFZeEUsRUFBSSxRQUFRLE9BQU9BLEVBQUksUUFBUSxTQUFTSyxDQUFJLEdBRTFGTCxFQUFJLFdBQ0pNLEVBQTBCa0UsR0FBUSxZQUFZeEUsRUFBSSxRQUFRLE9BQU9BLEVBQUksUUFBUSxTQUFTSyxDQUFJLEdBRXZGbUU7QUFDWDtBQ2xCTyxTQUFTMkQsR0FBY25JLEdBQUtLLEdBQU07QUFDckMsU0FBSUwsRUFBSSxPQUNHO0FBQUEsSUFDSCxNQUFNO0FBQUEsSUFDTixVQUFVQSxFQUFJLE1BQU07QUFBQSxJQUNwQixPQUFPQSxFQUFJLE1BQ04sSUFBSSxDQUFDcUUsR0FBR25ILE1BQU1nRyxFQUFTbUIsRUFBRSxNQUFNO0FBQUEsTUFDaEMsR0FBR2hFO0FBQUEsTUFDSCxhQUFhLENBQUMsR0FBR0EsRUFBSyxhQUFhLFNBQVMsR0FBR25ELENBQUMsRUFBRTtBQUFBLElBQ2xFLENBQWEsQ0FBQyxFQUNHLE9BQU8sQ0FBQytJLEdBQUs1QixNQUFPQSxNQUFNLFNBQVk0QixJQUFNLENBQUMsR0FBR0EsR0FBSzVCLENBQUMsR0FBSSxDQUFBLENBQUU7QUFBQSxJQUNqRSxpQkFBaUJuQixFQUFTbEQsRUFBSSxLQUFLLE1BQU07QUFBQSxNQUNyQyxHQUFHSztBQUFBLE1BQ0gsYUFBYSxDQUFDLEdBQUdBLEVBQUssYUFBYSxpQkFBaUI7QUFBQSxJQUNwRSxDQUFhO0FBQUEsRUFDSixJQUdNO0FBQUEsSUFDSCxNQUFNO0FBQUEsSUFDTixVQUFVTCxFQUFJLE1BQU07QUFBQSxJQUNwQixVQUFVQSxFQUFJLE1BQU07QUFBQSxJQUNwQixPQUFPQSxFQUFJLE1BQ04sSUFBSSxDQUFDcUUsR0FBR25ILE1BQU1nRyxFQUFTbUIsRUFBRSxNQUFNO0FBQUEsTUFDaEMsR0FBR2hFO0FBQUEsTUFDSCxhQUFhLENBQUMsR0FBR0EsRUFBSyxhQUFhLFNBQVMsR0FBR25ELENBQUMsRUFBRTtBQUFBLElBQ2xFLENBQWEsQ0FBQyxFQUNHLE9BQU8sQ0FBQytJLEdBQUs1QixNQUFPQSxNQUFNLFNBQVk0QixJQUFNLENBQUMsR0FBR0EsR0FBSzVCLENBQUMsR0FBSSxDQUFBLENBQUU7QUFBQSxFQUNwRTtBQUVUO0FDL0JPLFNBQVMrRCxLQUFvQjtBQUNoQyxTQUFPO0FBQUEsSUFDSCxLQUFLLENBQUU7QUFBQSxFQUNWO0FBQ0w7QUNKTyxTQUFTQyxLQUFrQjtBQUM5QixTQUFPLENBQUU7QUFDYjtBQ0RPLE1BQU1DLEtBQW1CLENBQUN0SSxHQUFLSyxNQUMzQjZDLEVBQVNsRCxFQUFJLFVBQVUsTUFBTUssQ0FBSTtBQzhCckMsU0FBUzZDLEVBQVNsRCxHQUFLSyxHQUFNMEQsSUFBa0IsSUFBTzs7QUFDekQsUUFBTXdFLElBQVdsSSxFQUFLLEtBQUssSUFBSUwsQ0FBRztBQUNsQyxNQUFJSyxFQUFLLFVBQVU7QUFDZixVQUFNbUksS0FBaUJ2RixJQUFBNUMsRUFBSyxhQUFMLGdCQUFBNEMsRUFBQSxLQUFBNUMsR0FBZ0JMLEdBQUtLLEdBQU1rSSxHQUFVeEU7QUFDNUQsUUFBSXlFLE1BQW1CcEo7QUFDbkIsYUFBT29KO0FBQUEsRUFFbkI7QUFDSSxNQUFJRCxLQUFZLENBQUN4RSxHQUFpQjtBQUM5QixVQUFNMEUsSUFBYUMsR0FBUUgsR0FBVWxJLENBQUk7QUFDekMsUUFBSW9JLE1BQWU7QUFDZixhQUFJLFVBQVVBLEtBQ1ZwSSxFQUFLLFNBQVMsSUFBSW9JLEVBQVcsSUFBSSxHQUU5QkE7QUFBQSxFQUVuQjtBQUNJLFFBQU03SyxJQUFVLEVBQUUsS0FBQW9DLEdBQUssTUFBTUssRUFBSyxhQUFhLFlBQVksT0FBVztBQUN0RSxFQUFBQSxFQUFLLEtBQUssSUFBSUwsR0FBS3BDLENBQU87QUFDMUIsUUFBTStLLElBQWFDLEdBQWE1SSxHQUFLQSxFQUFJLFVBQVVLLEdBQU0wRCxDQUFlO0FBQ3hFLFNBQUk0RSxLQUNBRSxHQUFRN0ksR0FBS0ssR0FBTXNJLENBQVUsR0FFakMvSyxFQUFRLGFBQWErSyxHQUNkQTtBQUNYO0FBQ0EsTUFBTUQsS0FBVSxDQUFDcEwsR0FBTStDLE1BQVM7QUFDNUIsVUFBUUEsRUFBSyxjQUFZO0FBQUEsSUFDckIsS0FBSztBQUNELGFBQU8sRUFBRSxNQUFNL0MsRUFBSyxLQUFLLEtBQUssR0FBRyxFQUFHO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBU3hDLEtBQUs7QUFDRCxZQUFNeUMsSUFBT3pDLEVBQUssS0FBSyxNQUFNK0MsRUFBSyxTQUFTLFNBQVMsQ0FBQyxFQUFFLEtBQUssR0FBRztBQUcvRCxhQUFJTixNQUFTTSxFQUFLLFFBQVFBLEVBQUssaUJBQWlCLG9CQUM1Q0EsRUFBSyxZQUFZTixDQUFJLElBQUl6QyxFQUFLLE1BRTNCLEVBQUUsTUFBTSxDQUFDLEdBQUcrQyxFQUFLLFVBQVVBLEVBQUssZ0JBQWdCTixDQUFJLEVBQUUsS0FBSyxHQUFHLEVBQUc7QUFBQSxJQUM1RSxLQUFLO0FBQ0QsYUFBTyxFQUFFLE1BQU0rSSxHQUFnQnpJLEVBQUssYUFBYS9DLEVBQUssSUFBSSxFQUFHO0FBQUEsSUFDakUsS0FBSztBQUFBLElBQ0wsS0FBSztBQUNELGFBQUlBLEVBQUssS0FBSyxTQUFTK0MsRUFBSyxZQUFZLFVBQ3BDL0MsRUFBSyxLQUFLLE1BQU0sQ0FBQ2lELEdBQU93SSxNQUFVMUksRUFBSyxZQUFZMEksQ0FBSyxNQUFNeEksQ0FBSyxLQUNuRSxRQUFRLEtBQUssbUNBQW1DRixFQUFLLFlBQVksS0FBSyxHQUFHLENBQUMscUJBQXFCLEdBQ3hGLENBQUUsS0FFTkEsRUFBSyxpQkFBaUIsU0FBUyxDQUFFLElBQUc7QUFBQSxFQUV2RDtBQUNBLEdBQ015SSxLQUFrQixDQUFDRSxHQUFPQyxNQUFVO0FBQ3RDLE1BQUkvTCxJQUFJO0FBQ1IsU0FBT0EsSUFBSThMLEVBQU0sVUFBVTlMLElBQUkrTCxFQUFNLFVBQzdCRCxFQUFNOUwsQ0FBQyxNQUFNK0wsRUFBTS9MLENBQUMsR0FEaUJBO0FBQ3pDO0FBR0osU0FBTyxFQUFFOEwsRUFBTSxTQUFTOUwsR0FBRyxTQUFVLEdBQUUsR0FBRytMLEVBQU0sTUFBTS9MLENBQUMsQ0FBQyxFQUFFLEtBQUssR0FBRztBQUN0RSxHQUNNMEwsS0FBZSxDQUFDNUksR0FBS2tKLEdBQVU3SSxHQUFNMEQsTUFBb0I7QUFDM0QsVUFBUW1GLEdBQVE7QUFBQSxJQUNaLEtBQUtyRyxFQUFzQjtBQUN2QixhQUFPbUMsR0FBZWhGLEdBQUtLLENBQUk7QUFBQSxJQUNuQyxLQUFLd0MsRUFBc0I7QUFDdkIsYUFBT3dFLEdBQWVySCxHQUFLSyxDQUFJO0FBQUEsSUFDbkMsS0FBS3dDLEVBQXNCO0FBQ3ZCLGFBQU8wRSxHQUFldkgsR0FBS0ssQ0FBSTtBQUFBLElBQ25DLEtBQUt3QyxFQUFzQjtBQUN2QixhQUFPTSxHQUFlbkQsR0FBS0ssQ0FBSTtBQUFBLElBQ25DLEtBQUt3QyxFQUFzQjtBQUN2QixhQUFPUSxHQUFpQjtBQUFBLElBQzVCLEtBQUtSLEVBQXNCO0FBQ3ZCLGFBQU9ZLEdBQWF6RCxHQUFLSyxDQUFJO0FBQUEsSUFDakMsS0FBS3dDLEVBQXNCO0FBQ3ZCLGFBQU91RixHQUFtQjtBQUFBLElBQzlCLEtBQUt2RixFQUFzQjtBQUN2QixhQUFPOEQsR0FBYXRHLENBQUk7QUFBQSxJQUM1QixLQUFLd0MsRUFBc0I7QUFDdkIsYUFBT0UsR0FBYy9DLEdBQUtLLENBQUk7QUFBQSxJQUNsQyxLQUFLd0MsRUFBc0I7QUFBQSxJQUMzQixLQUFLQSxFQUFzQjtBQUN2QixhQUFPZ0UsR0FBYzdHLEdBQUtLLENBQUk7QUFBQSxJQUNsQyxLQUFLd0MsRUFBc0I7QUFDdkIsYUFBT3NCLEdBQXFCbkUsR0FBS0ssQ0FBSTtBQUFBLElBQ3pDLEtBQUt3QyxFQUFzQjtBQUN2QixhQUFPc0YsR0FBY25JLEdBQUtLLENBQUk7QUFBQSxJQUNsQyxLQUFLd0MsRUFBc0I7QUFDdkIsYUFBT21ELEdBQWVoRyxHQUFLSyxDQUFJO0FBQUEsSUFDbkMsS0FBS3dDLEVBQXNCO0FBQ3ZCLGFBQU8rQixHQUFnQjVFLEdBQUtLLENBQUk7QUFBQSxJQUNwQyxLQUFLd0MsRUFBc0I7QUFDdkIsYUFBT21CLEdBQWFoRSxDQUFHO0FBQUEsSUFDM0IsS0FBSzZDLEVBQXNCO0FBQ3ZCLGFBQU8wRCxHQUFtQnZHLENBQUc7QUFBQSxJQUNqQyxLQUFLNkMsRUFBc0I7QUFDdkIsYUFBT3NFLEdBQWlCbkgsR0FBS0ssQ0FBSTtBQUFBLElBQ3JDLEtBQUt3QyxFQUFzQjtBQUN2QixhQUFPZ0YsR0FBaUI3SCxHQUFLSyxDQUFJO0FBQUEsSUFDckMsS0FBS3dDLEVBQXNCO0FBQ3ZCLGFBQU93RCxHQUFZckcsR0FBS0ssQ0FBSTtBQUFBLElBQ2hDLEtBQUt3QyxFQUFzQjtBQUN2QixhQUFPcUYsR0FBWWxJLEdBQUtLLENBQUk7QUFBQSxJQUNoQyxLQUFLd0MsRUFBc0I7QUFDdkIsYUFBT0ssRUFBU2xELEVBQUksT0FBTSxFQUFHLE1BQU1LLENBQUk7QUFBQSxJQUMzQyxLQUFLd0MsRUFBc0I7QUFDdkIsYUFBT29GLEdBQWdCakksR0FBS0ssQ0FBSTtBQUFBLElBQ3BDLEtBQUt3QyxFQUFzQjtBQUFBLElBQzNCLEtBQUtBLEVBQXNCO0FBQ3ZCLGFBQU82RCxHQUFlO0FBQUEsSUFDMUIsS0FBSzdELEVBQXNCO0FBQ3ZCLGFBQU9pQixHQUFnQjlELEdBQUtLLEdBQU0wRCxDQUFlO0FBQUEsSUFDckQsS0FBS2xCLEVBQXNCO0FBQ3ZCLGFBQU9DLEdBQWE7QUFBQSxJQUN4QixLQUFLRCxFQUFzQjtBQUN2QixhQUFPd0YsR0FBaUI7QUFBQSxJQUM1QixLQUFLeEYsRUFBc0I7QUFDdkIsYUFBT2dCLEdBQWdCN0QsR0FBS0ssQ0FBSTtBQUFBLElBQ3BDLEtBQUt3QyxFQUFzQjtBQUN2QixhQUFPUyxHQUFnQnRELEdBQUtLLENBQUk7QUFBQSxJQUNwQyxLQUFLd0MsRUFBc0I7QUFDdkIsYUFBT3lGLEdBQWlCdEksR0FBS0ssQ0FBSTtBQUFBLElBQ3JDLEtBQUt3QyxFQUFzQjtBQUN2QixhQUFPVyxHQUFjeEQsR0FBS0ssQ0FBSTtBQUFBLElBQ2xDLEtBQUt3QyxFQUFzQjtBQUN2QixhQUFPa0YsR0FBaUIvSCxHQUFLSyxDQUFJO0FBQUEsSUFDckMsS0FBS3dDLEVBQXNCO0FBQUEsSUFDM0IsS0FBS0EsRUFBc0I7QUFBQSxJQUMzQixLQUFLQSxFQUFzQjtBQUN2QjtBQUFBLElBQ0o7QUFDSSxhQUFRLGtCQUFDcEMsTUFBTTtBQUFBLFNBQW1CO0FBQUEsRUFDOUM7QUFDQSxHQUNNb0ksS0FBVSxDQUFDN0ksR0FBS0ssR0FBTXNJLE9BQ3BCM0ksRUFBSSxnQkFDSjJJLEVBQVcsY0FBYzNJLEVBQUksYUFDekJLLEVBQUssd0JBQ0xzSSxFQUFXLHNCQUFzQjNJLEVBQUksZUFHdEMySSxJQ2pMTFEsS0FBa0IsQ0FBQzNFLEdBQVFqRixNQUFZO0FBQ3pDLFFBQU1jLElBQU9ULEdBQVFMLENBQU8sR0FDdEJRLElBQU8sT0FBT1IsS0FBWSxXQUFXQSxLQUNyQ0EsS0FBQSxnQkFBQUEsRUFBUyxrQkFBaUIsV0FDdEJBLEtBQUEsT0FEZ0MsU0FDaENBLEVBQVMsTUFDYjZKLElBQU9sRyxFQUFTc0IsRUFBTyxNQUFNekUsTUFBUyxTQUFZTSxJQUFRO0FBQUEsSUFDNUQsR0FBR0E7QUFBQSxJQUNILGFBQWEsQ0FBQyxHQUFHQSxFQUFLLFVBQVVBLEVBQUssZ0JBQWdCTixDQUFJO0FBQUEsRUFDakUsR0FBUSxFQUFLLEtBQUssQ0FBRSxHQUNWc0osSUFBUSxPQUFPOUosS0FBWSxZQUFZQSxFQUFRLFNBQVMsVUFBYUEsRUFBUSxpQkFBaUIsVUFDaEdBLEVBQVEsT0FDTjtBQUNOLEVBQUk4SixNQUFVLFdBQ1ZELEVBQUssUUFBUUM7QUFFakIsUUFBTUMsS0FBZSxNQUFNO0FBQ3ZCLFFBQUk1SixHQUFXVyxFQUFLLFdBQVc7QUFDM0I7QUFFSixVQUFNaUosSUFBYyxDQUFFLEdBQ2hCQyxJQUF1QixvQkFBSSxJQUFLO0FBTXRDLGFBQVNyTSxJQUFJLEdBQUdBLElBQUksS0FBS0EsS0FBSztBQUMxQixZQUFNc00sSUFBaUIsT0FBTyxRQUFRbkosRUFBSyxXQUFXLEVBQUUsT0FBTyxDQUFDLENBQUNGLENBQUcsTUFBTSxDQUFDb0osRUFBcUIsSUFBSXBKLENBQUcsQ0FBQztBQUN4RyxVQUFJcUosRUFBZSxXQUFXO0FBQzFCO0FBQ0osaUJBQVcsQ0FBQ3JKLEdBQUtxRSxDQUFNLEtBQUtnRjtBQUN4QixRQUFBRixFQUFZbkosQ0FBRyxJQUNYK0MsRUFBUzFELEdBQU9nRixDQUFNLEdBQUcsRUFBRSxHQUFHbkUsR0FBTSxhQUFhLENBQUMsR0FBR0EsRUFBSyxVQUFVQSxFQUFLLGdCQUFnQkYsQ0FBRyxFQUFHLEdBQUUsRUFBSSxLQUFLLENBQUUsR0FDaEhvSixFQUFxQixJQUFJcEosQ0FBRztBQUFBLElBRTVDO0FBQ1EsV0FBT21KO0FBQUEsRUFDZixHQUFRLEdBQ0VHLElBQVcxSixNQUFTLFNBQ3RCdUosSUFDSTtBQUFBLElBQ0ksR0FBR0Y7QUFBQSxJQUNILENBQUMvSSxFQUFLLGNBQWMsR0FBR2lKO0FBQUEsRUFDdkMsSUFDY0YsSUFDSi9JLEVBQUssaUJBQWlCLGtCQUNwQjtBQUFBLElBQ0ksR0FBRytJO0FBQUEsSUFDSCxHQUFJRSxLQUFlakosRUFBSyxTQUFTLE9BQzdCO0FBQUEsTUFDSSxDQUFDQSxFQUFLLGNBQWMsR0FBRztBQUFBLFFBQ25CLEdBQUdpSjtBQUFBO0FBQUE7QUFBQSxRQUdILEdBQUlqSixFQUFLLFNBQVMsT0FBTyxFQUFFLENBQUNOLENBQUksR0FBR3FKLEVBQU0sSUFBRztBQUFBLE1BQy9DO0FBQUEsSUFDekIsSUFDc0I7QUFBQSxFQUN0QixJQUNjO0FBQUEsSUFDRSxNQUFNLENBQUMsR0FBSS9JLEVBQUssaUJBQWlCLGFBQWEsQ0FBQSxJQUFLQSxFQUFLLFVBQVdBLEVBQUssZ0JBQWdCTixDQUFJLEVBQUUsS0FBSyxHQUFHO0FBQUEsSUFDdEcsQ0FBQ00sRUFBSyxjQUFjLEdBQUc7QUFBQSxNQUNuQixHQUFHaUo7QUFBQSxNQUNILENBQUN2SixDQUFJLEdBQUdxSjtBQUFBLElBQ1g7QUFBQSxFQUNKO0FBQ1QsU0FBSS9JLEVBQUssV0FBVyxnQkFDaEJvSixFQUFTLFVBQVUsNENBRWRwSixFQUFLLFdBQVcsd0JBQ3JCb0osRUFBUyxVQUFVLGtEQUVoQkE7QUFDWDtBQ2tCTyxTQUFTQyxHQUEwQkMsR0FBTSxFQUFFLFFBQUF6SyxHQUFRLFVBQUEwSyxFQUFRLEdBQUs7QUFDbkUsUUFBTXpLLElBQU0sRUFBRSxHQUFHd0ssRUFBTTtBQUN2QixnQkFBTyxpQkFBaUJ4SyxHQUFLO0FBQUEsSUFDekIsUUFBUTtBQUFBLE1BQ0osT0FBTztBQUFBLE1BQ1AsWUFBWTtBQUFBLElBQ2Y7QUFBQSxJQUNELFdBQVc7QUFBQSxNQUNQLE9BQU9EO0FBQUEsTUFDUCxZQUFZO0FBQUEsSUFDZjtBQUFBLElBQ0QsV0FBVztBQUFBLE1BQ1AsT0FBTzBLO0FBQUEsTUFDUCxZQUFZO0FBQUEsSUFDZjtBQUFBLEVBQ1QsQ0FBSyxHQUNNeks7QUFDWDtBQzVHQSxTQUFTZ0ssR0FBZ0IzRSxHQUFRakYsR0FBUztBQUN0QyxTQUFPc0ssR0FBaUJyRixHQUFRO0FBQUEsSUFDNUIsa0JBQWtCO0FBQUEsSUFDbEIsTUFBTWpGLEVBQVE7QUFBQSxJQUNkLGNBQWM7QUFBQSxJQUNkLGNBQWM7QUFBQSxJQUNkLGtCQUFrQjtBQUFBLEVBQzFCLENBQUs7QUFDTDtBQWlETyxTQUFTdUssR0FBY0MsR0FBV2hLLEdBQU1pSyxHQUFPO0FBQ2xELFNBQU9oTCxHQUF3QjtBQUFBLElBQzNCLE1BQU07QUFBQSxJQUNOLEdBQUdnTDtBQUFBLElBQ0gsTUFBQWpLO0FBQUEsSUFDQSxRQUFRO0FBQUEsSUFDUixRQUFRb0osR0FBZ0JZLEdBQVcsRUFBRSxNQUFBaEssRUFBSSxDQUFFO0FBQUEsRUFDbkQsR0FBTyxDQUFDa0ssTUFBWUYsRUFBVSxNQUFNLEtBQUssTUFBTUUsQ0FBTyxDQUFDLENBQUM7QUFDeEQ7QUFxQk8sU0FBU0MsR0FBcUIzSyxHQUFTO0FBQzFDLFNBQU9tSyxHQUEwQjtBQUFBLElBQzdCLE1BQU07QUFBQSxJQUNOLE1BQU1uSyxFQUFRO0FBQUEsSUFDZCxZQUFZNEosR0FBZ0I1SixFQUFRLFlBQVksRUFBRSxNQUFNQSxFQUFRLE1BQU07QUFBQSxJQUN0RSxRQUFRO0FBQUEsRUFFaEIsR0FBTztBQUFBLElBQ0MsVUFBVUEsRUFBUTtBQUFBLElBQ2xCLFFBQVEsQ0FBQzRLLE1BQVM1SyxFQUFRLFdBQVcsTUFBTSxLQUFLLE1BQU00SyxDQUFJLENBQUM7QUFBQSxFQUNuRSxDQUFLO0FBQ0w7QUNqR08sTUFBTUMsV0FBb0IsTUFBTTtBQUFBLEVBRW5DLFlBQVl4SCxHQUFTeUgsR0FBTztBQUN4QixVQUFNekgsQ0FBTztBQUZqQixJQUFBMEgsRUFBQTtBQUdJLFNBQUssUUFBUUQ7QUFBQSxFQUNyQjtBQUNBO0FBS08sTUFBTUUsV0FBb0JILEdBQVk7QUFDN0M7QUFJTyxNQUFNSSxXQUE4QkosR0FBWTtBQUN2RDtBQUlPLE1BQU1LLFdBQTJCTCxHQUFZO0FBQ3BEO0FBSU8sTUFBTU0sVUFBa0JOLEdBQVk7QUFDM0M7QUFJTyxNQUFNTyxXQUFnQ1AsR0FBWTtBQUFBLEVBRXJELFlBQVl4SCxHQUFTN0QsR0FBT3NMLEdBQU87QUFDL0IsVUFBTXpILEdBQVN5SCxDQUFLO0FBRnhCLElBQUFDLEVBQUE7QUFHSSxTQUFLLFFBQVF2TDtBQUFBLEVBQ3JCO0FBQ0E7QUFJTyxNQUFNNkwsV0FBc0JSLEdBQVk7QUFBQSxFQUUzQyxZQUFZeEgsR0FBUzdELEdBQU9zTCxHQUFPO0FBQy9CLFVBQU16SCxHQUFTeUgsQ0FBSztBQUZ4QixJQUFBQyxFQUFBO0FBR0ksU0FBSyxRQUFRdkw7QUFBQSxFQUNyQjtBQUNBO0FBSU8sTUFBTThMLFdBQXdDVCxHQUFZO0FBQUEsRUFFN0QsWUFBWXhILEdBQVM0RSxHQUFRNkMsR0FBTztBQUNoQyxVQUFNekgsR0FBU3lILENBQUs7QUFGeEIsSUFBQUMsRUFBQTtBQUdJLFNBQUssU0FBUzlDO0FBQUEsRUFDdEI7QUFDQTtBQUlPLE1BQU1zRCxXQUF5Q1YsR0FBWTtBQUFBLEVBRTlELFlBQVl4SCxHQUFTNEUsR0FBUTZDLEdBQU87QUFDaEMsVUFBTXpILEdBQVN5SCxDQUFLO0FBRnhCLElBQUFDLEVBQUE7QUFHSSxTQUFLLFNBQVM5QztBQUFBLEVBQ3RCO0FBQ0E7QUNoRU8sU0FBU3VELEdBQVlDLEdBQU87QUFDL0IsU0FBUSxPQUFPQSxLQUFVLFlBQ3JCQSxNQUFVLFFBQ1YsVUFBVUEsS0FDVixPQUFPQSxFQUFNLFFBQVMsWUFDdEJBLEVBQU0sU0FBUyxRQUNmLGNBQWNBLEVBQU0sUUFDcEJBLEVBQU0sS0FBSyxhQUFhO0FBQ2hDO0FBTU8sU0FBU0MsR0FBaUJELEdBQU87QUFDcEMsU0FBUSxPQUFPQSxLQUFVLFlBQ3JCQSxNQUFVLFFBQ1YsV0FBV0EsS0FDWCxPQUFPQSxFQUFNLFNBQVU7QUFDL0I7QUNoQk8sU0FBU0UsR0FBbUJuTCxHQUFNO0FBTXJDLE1BSkFBLElBQU9BLEVBQUssUUFBUSxPQUFPLEdBQUcsR0FFOUJBLElBQU9BLEVBQUssUUFBUSxpQkFBaUIsR0FBRyxHQUVwQ0EsRUFBSyxXQUFXO0FBQ2hCLFVBQU0sSUFBSSxNQUFNLDJCQUEyQjtBQUUvQyxTQUFPQTtBQUNYO0FBU08sU0FBU29MLEdBQWdDQyxHQUFXckwsR0FBTTtBQUM3RCxRQUFNYixJQUFTLENBQUM4TCxNQUFVLEtBQUssTUFBTUEsQ0FBSztBQUMxQyxNQUFJRCxHQUFZSyxDQUFTLEdBQUc7QUFDeEIsVUFBTUMsSUFBb0JuQixHQUFxQjtBQUFBLE1BQzNDLE1BQUFuSztBQUFBLE1BQ0EsWUFBWXFMO0FBQUEsTUFDWixVQUFVLE1BQU07QUFBQSxNQUFBO0FBQUEsSUFFcEIsQ0FBQztBQUNELFdBQU87QUFBQSxNQUNILFFBQVFDLEVBQWtCO0FBQUEsTUFDMUIsUUFBUUEsRUFBa0I7QUFBQSxJQUM3QjtBQUFBLEVBQ1QsV0FDYSxPQUFPRCxLQUFjLFlBQVlBLE1BQWM7QUFDcEQsV0FBTztBQUFBLE1BQ0gsUUFBUUE7QUFBQSxNQUNSLFFBQUFsTTtBQUFBLElBQ0g7QUFFTCxRQUFNLElBQUl3TCxFQUFVLHNEQUFzRDtBQUM5RTtBQUlPLFNBQVNZLEdBQXFDQyxHQUFZO0FBQzdELE1BQUlBLE1BQWU7QUFDZixXQUFPO0FBRVgsTUFBSVIsR0FBWVEsQ0FBVSxHQUFHO0FBQ3pCLFVBQU1DLElBQVMxQixHQUFjeUIsR0FBWSxRQUFRO0FBQ2pELFdBQU87QUFBQSxNQUNILE1BQU1DLEVBQU87QUFBQSxNQUNiLE1BQU1BLEVBQU87QUFBQSxNQUNiLFFBQVFBLEVBQU8sVUFBVTtBQUFBLE1BQ3pCLFFBQVFBLEVBQU87QUFBQSxJQUNsQjtBQUFBLEVBQ1Q7QUFDSSxTQUFPRDtBQUNYOzs7Ozs7OztBQy9EQSxNQUFJRSxJQUFJLEtBQ0pDLElBQUlELElBQUksSUFDUkUsSUFBSUQsSUFBSSxJQUNSRSxJQUFJRCxJQUFJLElBQ1JFLElBQUlELElBQUksR0FDUkUsSUFBSUYsSUFBSTtBQWdCWixFQUFBRyxLQUFpQixTQUFVeEssR0FBS2hDLEdBQVM7QUFDdkMsSUFBQUEsSUFBVUEsS0FBVyxDQUFFO0FBQ3ZCLFFBQUkyRSxJQUFPLE9BQU8zQztBQUNsQixRQUFJMkMsTUFBUyxZQUFZM0MsRUFBSSxTQUFTO0FBQ3BDLGFBQU95SyxFQUFNekssQ0FBRztBQUNYLFFBQUkyQyxNQUFTLFlBQVksU0FBUzNDLENBQUc7QUFDMUMsYUFBT2hDLEVBQVEsT0FBTzBNLEVBQVExSyxDQUFHLElBQUkySyxFQUFTM0ssQ0FBRztBQUVuRCxVQUFNLElBQUk7QUFBQSxNQUNSLDBEQUNFLEtBQUssVUFBVUEsQ0FBRztBQUFBLElBQ3JCO0FBQUEsRUFDRjtBQVVELFdBQVN5SyxFQUFNRyxHQUFLO0FBRWxCLFFBREFBLElBQU0sT0FBT0EsQ0FBRyxHQUNaLEVBQUFBLEVBQUksU0FBUyxNQUdqQjtBQUFBLFVBQUlDLElBQVEsbUlBQW1JO0FBQUEsUUFDN0lEO0FBQUEsTUFDRDtBQUNELFVBQUtDLEdBR0w7QUFBQSxZQUFJQyxJQUFJLFdBQVdELEVBQU0sQ0FBQyxDQUFDLEdBQ3ZCbEksS0FBUWtJLEVBQU0sQ0FBQyxLQUFLLE1BQU0sWUFBYTtBQUMzQyxnQkFBUWxJLEdBQUk7QUFBQSxVQUNWLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFDSCxtQkFBT21JLElBQUlQO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQ0gsbUJBQU9PLElBQUlSO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQ0gsbUJBQU9RLElBQUlUO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQ0gsbUJBQU9TLElBQUlWO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQ0gsbUJBQU9VLElBQUlYO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQ0gsbUJBQU9XLElBQUlaO0FBQUEsVUFDYixLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQUEsVUFDTCxLQUFLO0FBQ0gsbUJBQU9ZO0FBQUEsVUFDVDtBQUNFO0FBQUEsUUFDTjtBQUFBO0FBQUE7QUFBQSxFQUNBO0FBVUEsV0FBU0gsRUFBU0gsR0FBSTtBQUNwQixRQUFJTyxJQUFRLEtBQUssSUFBSVAsQ0FBRTtBQUN2QixXQUFJTyxLQUFTVixJQUNKLEtBQUssTUFBTUcsSUFBS0gsQ0FBQyxJQUFJLE1BRTFCVSxLQUFTWCxJQUNKLEtBQUssTUFBTUksSUFBS0osQ0FBQyxJQUFJLE1BRTFCVyxLQUFTWixJQUNKLEtBQUssTUFBTUssSUFBS0wsQ0FBQyxJQUFJLE1BRTFCWSxLQUFTYixJQUNKLEtBQUssTUFBTU0sSUFBS04sQ0FBQyxJQUFJLE1BRXZCTSxJQUFLO0FBQUEsRUFDZDtBQVVBLFdBQVNFLEVBQVFGLEdBQUk7QUFDbkIsUUFBSU8sSUFBUSxLQUFLLElBQUlQLENBQUU7QUFDdkIsV0FBSU8sS0FBU1YsSUFDSlcsRUFBT1IsR0FBSU8sR0FBT1YsR0FBRyxLQUFLLElBRS9CVSxLQUFTWCxJQUNKWSxFQUFPUixHQUFJTyxHQUFPWCxHQUFHLE1BQU0sSUFFaENXLEtBQVNaLElBQ0phLEVBQU9SLEdBQUlPLEdBQU9aLEdBQUcsUUFBUSxJQUVsQ1ksS0FBU2IsSUFDSmMsRUFBT1IsR0FBSU8sR0FBT2IsR0FBRyxRQUFRLElBRS9CTSxJQUFLO0FBQUEsRUFDZDtBQU1BLFdBQVNRLEVBQU9SLEdBQUlPLEdBQU9ELEdBQUd0TSxHQUFNO0FBQ2xDLFFBQUl5TSxJQUFXRixLQUFTRCxJQUFJO0FBQzVCLFdBQU8sS0FBSyxNQUFNTixJQUFLTSxDQUFDLElBQUksTUFBTXRNLEtBQVF5TSxJQUFXLE1BQU07QUFBQSxFQUM3RDs7Ozs7OztBQzNKQSxXQUFTQyxFQUFNQyxHQUFLO0FBQ25CLElBQUFDLEVBQVksUUFBUUEsR0FDcEJBLEVBQVksVUFBVUEsR0FDdEJBLEVBQVksU0FBU0MsR0FDckJELEVBQVksVUFBVUUsR0FDdEJGLEVBQVksU0FBU0csR0FDckJILEVBQVksVUFBVUksR0FDdEJKLEVBQVksV0FBV0ssR0FBYSxHQUNwQ0wsRUFBWSxVQUFVTSxHQUV0QixPQUFPLEtBQUtQLENBQUcsRUFBRSxRQUFRLENBQUF2TSxNQUFPO0FBQy9CLE1BQUF3TSxFQUFZeE0sQ0FBRyxJQUFJdU0sRUFBSXZNLENBQUc7QUFBQSxJQUM1QixDQUFFLEdBTUR3TSxFQUFZLFFBQVEsQ0FBRSxHQUN0QkEsRUFBWSxRQUFRLENBQUUsR0FPdEJBLEVBQVksYUFBYSxDQUFFO0FBUTNCLGFBQVNPLEVBQVlDLEdBQVc7QUFDL0IsVUFBSUMsSUFBTztBQUVYLGVBQVNsUSxJQUFJLEdBQUdBLElBQUlpUSxFQUFVLFFBQVFqUTtBQUNyQyxRQUFBa1EsS0FBU0EsS0FBUSxLQUFLQSxJQUFRRCxFQUFVLFdBQVdqUSxDQUFDLEdBQ3BEa1EsS0FBUTtBQUdULGFBQU9ULEVBQVksT0FBTyxLQUFLLElBQUlTLENBQUksSUFBSVQsRUFBWSxPQUFPLE1BQU07QUFBQSxJQUN0RTtBQUNDLElBQUFBLEVBQVksY0FBY087QUFTMUIsYUFBU1AsRUFBWVEsR0FBVztBQUMvQixVQUFJRSxHQUNBQyxJQUFpQixNQUNqQkMsR0FDQUM7QUFFSixlQUFTQyxLQUFTdEQsR0FBTTtBQUV2QixZQUFJLENBQUNzRCxFQUFNO0FBQ1Y7QUFHRCxjQUFNQyxJQUFPRCxHQUdQakwsSUFBTyxPQUFPLG9CQUFJLE1BQU0sR0FDeEJ1SixLQUFLdkosS0FBUTZLLEtBQVk3SztBQUMvQixRQUFBa0wsRUFBSyxPQUFPM0IsSUFDWjJCLEVBQUssT0FBT0wsR0FDWkssRUFBSyxPQUFPbEwsR0FDWjZLLElBQVc3SyxHQUVYMkgsRUFBSyxDQUFDLElBQUl3QyxFQUFZLE9BQU94QyxFQUFLLENBQUMsQ0FBQyxHQUVoQyxPQUFPQSxFQUFLLENBQUMsS0FBTSxZQUV0QkEsRUFBSyxRQUFRLElBQUk7QUFJbEIsWUFBSXBCLEtBQVE7QUFDWixRQUFBb0IsRUFBSyxDQUFDLElBQUlBLEVBQUssQ0FBQyxFQUFFLFFBQVEsaUJBQWlCLENBQUNpQyxJQUFPdUIsT0FBVztBQUU3RCxjQUFJdkIsT0FBVTtBQUNiLG1CQUFPO0FBRVIsVUFBQXJEO0FBQ0EsZ0JBQU02RSxLQUFZakIsRUFBWSxXQUFXZ0IsRUFBTTtBQUMvQyxjQUFJLE9BQU9DLE1BQWMsWUFBWTtBQUNwQyxrQkFBTXJNLEtBQU00SSxFQUFLcEIsRUFBSztBQUN0QixZQUFBcUQsS0FBUXdCLEdBQVUsS0FBS0YsR0FBTW5NLEVBQUcsR0FHaEM0SSxFQUFLLE9BQU9wQixJQUFPLENBQUMsR0FDcEJBO0FBQUEsVUFDTDtBQUNJLGlCQUFPcUQ7QUFBQSxRQUNYLENBQUksR0FHRE8sRUFBWSxXQUFXLEtBQUtlLEdBQU12RCxDQUFJLElBRXhCdUQsRUFBSyxPQUFPZixFQUFZLEtBQ2hDLE1BQU1lLEdBQU12RCxDQUFJO0FBQUEsTUFDekI7QUFFRSxhQUFBc0QsRUFBTSxZQUFZTixHQUNsQk0sRUFBTSxZQUFZZCxFQUFZLFVBQVcsR0FDekNjLEVBQU0sUUFBUWQsRUFBWSxZQUFZUSxDQUFTLEdBQy9DTSxFQUFNLFNBQVNJLEdBQ2ZKLEVBQU0sVUFBVWQsRUFBWSxTQUU1QixPQUFPLGVBQWVjLEdBQU8sV0FBVztBQUFBLFFBQ3ZDLFlBQVk7QUFBQSxRQUNaLGNBQWM7QUFBQSxRQUNkLEtBQUssTUFDQUgsTUFBbUIsT0FDZkEsS0FFSkMsTUFBb0JaLEVBQVksZUFDbkNZLElBQWtCWixFQUFZLFlBQzlCYSxJQUFlYixFQUFZLFFBQVFRLENBQVMsSUFHdENLO0FBQUEsUUFFUixLQUFLLENBQUFNLE1BQUs7QUFDVCxVQUFBUixJQUFpQlE7QUFBQSxRQUNyQjtBQUFBLE1BQ0EsQ0FBRyxHQUdHLE9BQU9uQixFQUFZLFFBQVMsY0FDL0JBLEVBQVksS0FBS2MsQ0FBSyxHQUdoQkE7QUFBQSxJQUNUO0FBRUMsYUFBU0ksRUFBT1YsR0FBV1ksR0FBVztBQUNyQyxZQUFNQyxJQUFXckIsRUFBWSxLQUFLLGFBQWEsT0FBT29CLElBQWMsTUFBYyxNQUFNQSxLQUFhWixDQUFTO0FBQzlHLGFBQUFhLEVBQVMsTUFBTSxLQUFLLEtBQ2JBO0FBQUEsSUFDVDtBQVNDLGFBQVNsQixFQUFPbUIsR0FBWTtBQUMzQixNQUFBdEIsRUFBWSxLQUFLc0IsQ0FBVSxHQUMzQnRCLEVBQVksYUFBYXNCLEdBRXpCdEIsRUFBWSxRQUFRLENBQUUsR0FDdEJBLEVBQVksUUFBUSxDQUFFO0FBRXRCLFlBQU11QixLQUFTLE9BQU9ELEtBQWUsV0FBV0EsSUFBYSxJQUMzRCxLQUFJLEVBQ0osUUFBUSxLQUFLLEdBQUcsRUFDaEIsTUFBTSxHQUFHLEVBQ1QsT0FBTyxPQUFPO0FBRWhCLGlCQUFXRSxLQUFNRDtBQUNoQixRQUFJQyxFQUFHLENBQUMsTUFBTSxNQUNieEIsRUFBWSxNQUFNLEtBQUt3QixFQUFHLE1BQU0sQ0FBQyxDQUFDLElBRWxDeEIsRUFBWSxNQUFNLEtBQUt3QixDQUFFO0FBQUEsSUFHN0I7QUFVQyxhQUFTQyxFQUFnQkMsR0FBUUMsR0FBVTtBQUMxQyxVQUFJQyxJQUFjLEdBQ2RDLElBQWdCLEdBQ2hCQyxJQUFZLElBQ1pDLElBQWE7QUFFakIsYUFBT0gsSUFBY0YsRUFBTztBQUMzQixZQUFJRyxJQUFnQkYsRUFBUyxXQUFXQSxFQUFTRSxDQUFhLE1BQU1ILEVBQU9FLENBQVcsS0FBS0QsRUFBU0UsQ0FBYSxNQUFNO0FBRXRILFVBQUlGLEVBQVNFLENBQWEsTUFBTSxPQUMvQkMsSUFBWUQsR0FDWkUsSUFBYUgsR0FDYkMsUUFFQUQsS0FDQUM7QUFBQSxpQkFFU0MsTUFBYztBQUV4QixVQUFBRCxJQUFnQkMsSUFBWSxHQUM1QkMsS0FDQUgsSUFBY0c7QUFBQTtBQUVkLGlCQUFPO0FBS1QsYUFBT0YsSUFBZ0JGLEVBQVMsVUFBVUEsRUFBU0UsQ0FBYSxNQUFNO0FBQ3JFLFFBQUFBO0FBR0QsYUFBT0EsTUFBa0JGLEVBQVM7QUFBQSxJQUNwQztBQVFDLGFBQVN6QixJQUFVO0FBQ2xCLFlBQU1vQixJQUFhO0FBQUEsUUFDbEIsR0FBR3RCLEVBQVk7QUFBQSxRQUNmLEdBQUdBLEVBQVksTUFBTSxJQUFJLENBQUFRLE1BQWEsTUFBTUEsQ0FBUztBQUFBLE1BQ3hELEVBQUksS0FBSyxHQUFHO0FBQ1YsYUFBQVIsRUFBWSxPQUFPLEVBQUUsR0FDZHNCO0FBQUEsSUFDVDtBQVNDLGFBQVNsQixFQUFRaE4sR0FBTTtBQUN0QixpQkFBVzRPLEtBQVFoQyxFQUFZO0FBQzlCLFlBQUl5QixFQUFnQnJPLEdBQU00TyxDQUFJO0FBQzdCLGlCQUFPO0FBSVQsaUJBQVdSLEtBQU14QixFQUFZO0FBQzVCLFlBQUl5QixFQUFnQnJPLEdBQU1vTyxDQUFFO0FBQzNCLGlCQUFPO0FBSVQsYUFBTztBQUFBLElBQ1Q7QUFTQyxhQUFTdkIsRUFBT3JMLEdBQUs7QUFDcEIsYUFBSUEsYUFBZSxRQUNYQSxFQUFJLFNBQVNBLEVBQUksVUFFbEJBO0FBQUEsSUFDVDtBQU1DLGFBQVMwTCxJQUFVO0FBQ2xCLGNBQVEsS0FBSyx1SUFBdUk7QUFBQSxJQUN0SjtBQUVDLFdBQUFOLEVBQVksT0FBT0EsRUFBWSxNQUFNLEdBRTlCQTtBQUFBLEVBQ1I7QUFFQSxTQUFBaUMsS0FBaUJuQzs7Ozs7QUM3UmpCLElBQUFvQyxFQUFBLGFBQXFCQyxHQUNyQkQsRUFBQSxPQUFlRSxHQUNmRixFQUFBLE9BQWVHLEdBQ2ZILEVBQUEsWUFBb0JJLEdBQ3BCSixFQUFBLFVBQWtCSyxFQUFjLEdBQ2hDTCxFQUFBLFVBQW1CLHVCQUFNO0FBQ3hCLFVBQUlNLElBQVM7QUFFYixhQUFPLE1BQU07QUFDWixRQUFLQSxNQUNKQSxJQUFTLElBQ1QsUUFBUSxLQUFLLHVJQUF1STtBQUFBLE1BRXJKO0FBQUEsSUFDRixHQUFJLEdBTUpOLEVBQWlCLFNBQUE7QUFBQSxNQUNoQjtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBO0FBQUEsTUFDQTtBQUFBLElBQ0E7QUFXRCxhQUFTSSxJQUFZO0FBSXBCLFVBQUksT0FBTyxTQUFXLE9BQWUsT0FBTyxZQUFZLE9BQU8sUUFBUSxTQUFTLGNBQWMsT0FBTyxRQUFRO0FBQzVHLGVBQU87QUFJUixVQUFJLE9BQU8sWUFBYyxPQUFlLFVBQVUsYUFBYSxVQUFVLFVBQVUsWUFBVyxFQUFHLE1BQU0sdUJBQXVCO0FBQzdILGVBQU87QUFHUixVQUFJdkQ7QUFLSixhQUFRLE9BQU8sV0FBYSxPQUFlLFNBQVMsbUJBQW1CLFNBQVMsZ0JBQWdCLFNBQVMsU0FBUyxnQkFBZ0IsTUFBTTtBQUFBLE1BRXRJLE9BQU8sU0FBVyxPQUFlLE9BQU8sWUFBWSxPQUFPLFFBQVEsV0FBWSxPQUFPLFFBQVEsYUFBYSxPQUFPLFFBQVE7QUFBQTtBQUFBLE1BRzFILE9BQU8sWUFBYyxPQUFlLFVBQVUsY0FBY0EsSUFBSSxVQUFVLFVBQVUsWUFBVyxFQUFHLE1BQU0sZ0JBQWdCLE1BQU0sU0FBU0EsRUFBRSxDQUFDLEdBQUcsRUFBRSxLQUFLO0FBQUEsTUFFcEosT0FBTyxZQUFjLE9BQWUsVUFBVSxhQUFhLFVBQVUsVUFBVSxZQUFhLEVBQUMsTUFBTSxvQkFBb0I7QUFBQSxJQUMxSDtBQVFBLGFBQVNvRCxFQUFXM0UsR0FBTTtBQVF6QixVQVBBQSxFQUFLLENBQUMsS0FBSyxLQUFLLFlBQVksT0FBTyxNQUNsQyxLQUFLLGFBQ0osS0FBSyxZQUFZLFFBQVEsT0FDMUJBLEVBQUssQ0FBQyxLQUNMLEtBQUssWUFBWSxRQUFRLE9BQzFCLE1BQU1pRixFQUFPLFFBQVEsU0FBUyxLQUFLLElBQUksR0FFcEMsQ0FBQyxLQUFLO0FBQ1Q7QUFHRCxZQUFNL0osSUFBSSxZQUFZLEtBQUs7QUFDM0IsTUFBQThFLEVBQUssT0FBTyxHQUFHLEdBQUc5RSxHQUFHLGdCQUFnQjtBQUtyQyxVQUFJMEQsSUFBUSxHQUNSc0csSUFBUTtBQUNaLE1BQUFsRixFQUFLLENBQUMsRUFBRSxRQUFRLGVBQWUsQ0FBQWlDLE1BQVM7QUFDdkMsUUFBSUEsTUFBVSxTQUdkckQsS0FDSXFELE1BQVUsU0FHYmlELElBQVF0RztBQUFBLE1BRVgsQ0FBRSxHQUVEb0IsRUFBSyxPQUFPa0YsR0FBTyxHQUFHaEssQ0FBQztBQUFBLElBQ3hCO0FBVUEsSUFBQXdKLEVBQWMsTUFBQSxRQUFRLFNBQVMsUUFBUSxRQUFRLE1BQU07QUFBQTtBQVFyRCxhQUFTRSxFQUFLZCxHQUFZO0FBQ3pCLFVBQUk7QUFDSCxRQUFJQSxJQUNIWSxFQUFRLFFBQVEsUUFBUSxTQUFTWixDQUFVLElBRTNDWSxFQUFRLFFBQVEsV0FBVyxPQUFPO0FBQUEsTUFFbkMsUUFBZTtBQUFBLE1BR2pCO0FBQUEsSUFDQTtBQVFBLGFBQVNHLElBQU87QUFDZixVQUFJTTtBQUNKLFVBQUk7QUFDSCxRQUFBQSxJQUFJVCxFQUFRLFFBQVEsUUFBUSxPQUFPO0FBQUEsTUFDbkMsUUFBZTtBQUFBLE1BR2pCO0FBR0MsYUFBSSxDQUFDUyxLQUFLLE9BQU8sVUFBWSxPQUFlLFNBQVMsWUFDcERBLElBQUksUUFBUSxJQUFJLFFBR1ZBO0FBQUEsSUFDUjtBQWFBLGFBQVNKLElBQWU7QUFDdkIsVUFBSTtBQUdILGVBQU87QUFBQSxNQUNQLFFBQWU7QUFBQSxNQUdqQjtBQUFBLElBQ0E7QUFFQSxJQUFBRSxFQUFpQixVQUFBcEMsR0FBbUIsRUFBQzZCLENBQU87QUFFNUMsVUFBTSxFQUFDLFlBQUFVLEVBQVUsSUFBSUgsRUFBTztBQU01QixJQUFBRyxFQUFXLElBQUksU0FBVXpCLEdBQUc7QUFDM0IsVUFBSTtBQUNILGVBQU8sS0FBSyxVQUFVQSxDQUFDO0FBQUEsTUFDdkIsU0FBUS9PLEdBQU87QUFDZixlQUFPLGlDQUFpQ0EsRUFBTTtBQUFBLE1BQ2hEO0FBQUE7Ozs7O0FDeFFPLFNBQVN5USxLQUFVO0FBQ3RCLFNBQU9DLEdBQVU7QUFDckI7QUFPQSxTQUFTQyxHQUFVQyxHQUFVO0FBQ3pCLFFBQU1qRCxJQUFNOEMsR0FBUztBQUNyQixTQUFRLE9BQU85QyxJQUFRLFFBQ2xCQSxFQUFJaUQsQ0FBUSxNQUFNLFVBQVVqRCxFQUFJaUQsQ0FBUSxNQUFNO0FBQ3ZEO0FBSU8sTUFBTUMsS0FBVTtBQUFBLEVBQ25CLElBQUksV0FBVztBQUVQLFdBQU87QUFBQSxFQU9kO0FBQ0wsR0FJYUMsS0FBVTtBQUFBLEVBQ25CLElBQUksbUJBQW1CO0FBQ25CLFdBQU9ILEdBQVUsbUNBQW1DO0FBQUEsRUFDdkQ7QUFBQSxFQUNELElBQUksa0JBQWtCO0FBQ2xCLFdBQU9BLEdBQVUsa0NBQWtDO0FBQUEsRUFDdEQ7QUFDTCxHQ3ZDTUksS0FBbUJELEdBQVEsa0JBSzNCRSxLQUFrQkYsR0FBUTtBQU96QixTQUFTRyxHQUFVN0MsSUFBWSxpQkFBaUI7QUFDbkQsU0FBTztBQUFBLElBQ0gsV0FBQUE7QUFBQSxJQUNBLE9BQU9NLEdBQU1OLENBQVM7QUFBQSxJQUN0QixPQUFPLFFBQVE7QUFBQSxJQUNmLE1BQU0sUUFBUTtBQUFBLElBQ2Qsa0JBQUEyQztBQUFBLElBQ0EsaUJBQUFDO0FBQUEsRUFDSDtBQUNMO0FBQ08sTUFBTUUsSUFBU0QsR0FBVSxvQkFBb0I7QUM1QjdDLFNBQVNFLEdBQWMzUCxHQUFPO0FBQ2pDLE1BQUlBLEtBQVU7QUFDVixXQUFPLE9BQU9BLENBQUs7QUFFbEIsTUFBSSxPQUFPQSxLQUFVO0FBQ3RCLFdBQU9BO0FBRU4sTUFBSSxPQUFPQSxLQUFVO0FBQ3RCLFFBQUk7QUFDQSxhQUFPLEtBQUssVUFBVUEsQ0FBSztBQUFBLElBQ3ZDLFFBQ21CO0FBQ1AsYUFBTztBQUFBLElBQ25CO0FBRUksU0FBTyxPQUFPQSxDQUFLO0FBQ3ZCO0FDZ0RBLFNBQVM0UCxHQUF5QkMsR0FBU3JSLEdBQU87QUFFOUMsU0FBTyxzRUFEU0EsYUFBaUIsUUFBUUEsRUFBTSxTQUFVLElBQUcsT0FBT0EsQ0FBSyxDQUNZO0FBQ3hGO0FBT08sU0FBUzRLLEdBQUtwSyxHQUFTO0FBQzFCLFFBQU1RLElBQU9SLEVBQVEsT0FDZjJMLEdBQW1CM0wsRUFBUSxJQUFJLElBQy9CMkwsR0FBbUIzTCxFQUFRLFFBQVEsSUFBSSxHQUN2QzhRLElBQW9CLE9BQU85USxFQUFRLGdCQUFrQixNQUNyRDRRLEtBQ0E1USxFQUFRO0FBQ2QsTUFBSSxDQUFDUTtBQUNELFVBQU0sSUFBSSxNQUFNLHdGQUF3RjtBQUU1RyxRQUFNdVEsSUFBYS9RLEVBQVEsVUFBVTtBQUNyQyxNQUFJLENBQUMrUSxLQUFjdkYsR0FBWXhMLEVBQVEsVUFBVTtBQUM3QyxVQUFNLElBQUltTCxFQUFVLDRDQUE0QztBQUVwRSxRQUFNLEVBQUUsUUFBQXhMLEdBQVEsUUFBUXFSLEVBQVUsSUFBS3BGLEdBQWdDNUwsRUFBUSxZQUFZUSxDQUFJO0FBQy9GLGlCQUFleVEsRUFBUUMsR0FBWXpGLEdBQU87QUFDdEMsVUFBTSxDQUFDak0sR0FBTzJSLENBQU0sSUFBSSxNQUFNN1IsR0FBWSxNQUFNSyxFQUFPOEwsQ0FBSyxDQUFDO0FBQzdELFFBQUlqTSxNQUFVO0FBQ1YsWUFBSWtSLEVBQU8sa0JBQ1BBLEVBQU8sTUFBTSwrQkFBK0JsUSxDQUFJLEVBQUUsSUFHbERrUSxFQUFPLE1BQU0sK0JBQStCbFEsQ0FBSSxLQUFLaUwsQ0FBSyxFQUFFLEdBRTFELElBQUlQLEdBQW1CLDZCQUE2QjtBQUU5RCxJQUFJd0YsRUFBTyxrQkFDUEEsRUFBTyxNQUFNLGlCQUFpQmxRLENBQUksRUFBRSxJQUdwQ2tRLEVBQU8sTUFBTSxpQkFBaUJsUSxDQUFJLGVBQWVpTCxDQUFLLEVBQUU7QUFFNUQsVUFBTXhELElBQVMsTUFBTWpJLEVBQVEsUUFBUW1SLEdBQVFELENBQVUsR0FDakRFLElBQWVULEdBQWMxSSxDQUFNO0FBQ3pDLFdBQUl5SSxFQUFPLGtCQUNQQSxFQUFPLE1BQU0sUUFBUWxRLENBQUksWUFBWSxJQUdyQ2tRLEVBQU8sTUFBTSxRQUFRbFEsQ0FBSSxjQUFjNFEsQ0FBWSxFQUFFLEdBRWxEbko7QUFBQSxFQUNmO0FBQ0ksaUJBQWVvSixFQUFPSCxHQUFZekYsR0FBTztBQUNyQyxXQUFPd0YsRUFBUUMsR0FBWXpGLENBQUssRUFBRSxNQUFNLENBQUNqTSxNQUFVO0FBQy9DLFVBQUlzUixHQUFtQjtBQUNuQixjQUFNUSxJQUFjQyxHQUFnQjtBQUNwQyxlQUFBRCxLQUFBLFFBQUFBLEVBQWEsU0FBUztBQUFBLFVBQ2xCLFNBQVM7QUFBQSxVQUNULE1BQU07QUFBQSxZQUNGLFdBQVc5UTtBQUFBLFlBQ1gsT0FBT2hCLEVBQU0sU0FBVTtBQUFBLFVBQzFCO0FBQUEsUUFDckIsSUFDdUJzUixFQUFrQkksR0FBWTFSLENBQUs7QUFBQSxNQUMxRDtBQUNZLFlBQU1BO0FBQUEsSUFDbEIsQ0FBUztBQUFBLEVBQ1Q7QUFDSSxRQUFNZ1MsSUFBZ0IsT0FBT3hSLEVBQVEsaUJBQWtCLGFBQ2pEQSxFQUFRLGdCQUNSLFlBQVksT0FBT0EsRUFBUSxpQkFBa0IsWUFDekNBLEVBQVEsZ0JBQ1I7QUFDVixTQUFPO0FBQUEsSUFDSCxNQUFNO0FBQUEsSUFDTixNQUFBUTtBQUFBLElBQ0EsYUFBYVIsRUFBUTtBQUFBLElBQ3JCLFlBQUFnUjtBQUFBLElBQ0EsUUFBUUQ7QUFBQSxJQUNSLFFBQUFNO0FBQUEsSUFDQSxlQUFBRztBQUFBLEVBQ0g7QUFDTDtBQ2xKTyxJQUFJdlE7QUFBQSxDQUNWLFNBQVVBLEdBQU07QUFDYixFQUFBQSxFQUFLLGNBQWMsQ0FBQ0MsTUFBTTtBQUFBLEVBQUc7QUFDN0IsV0FBU0MsRUFBU0MsR0FBTTtBQUFBLEVBQUE7QUFDeEIsRUFBQUgsRUFBSyxXQUFXRTtBQUNoQixXQUFTRSxFQUFZQyxHQUFJO0FBQ3JCLFVBQU0sSUFBSSxNQUFPO0FBQUEsRUFDekI7QUFDSSxFQUFBTCxFQUFLLGNBQWNJLEdBQ25CSixFQUFLLGNBQWMsQ0FBQ00sTUFBVTtBQUMxQixVQUFNM0IsSUFBTSxDQUFFO0FBQ2QsZUFBVzdCLEtBQVF3RDtBQUNmLE1BQUEzQixFQUFJN0IsQ0FBSSxJQUFJQTtBQUVoQixXQUFPNkI7QUFBQSxFQUNWLEdBQ0RxQixFQUFLLHFCQUFxQixDQUFDckIsTUFBUTtBQUMvQixVQUFNNEIsSUFBWVAsRUFBSyxXQUFXckIsQ0FBRyxFQUFFLE9BQU8sQ0FBQzZCLE1BQU0sT0FBTzdCLEVBQUlBLEVBQUk2QixDQUFDLENBQUMsS0FBTSxRQUFRLEdBQzlFQyxJQUFXLENBQUU7QUFDbkIsZUFBV0QsS0FBS0Q7QUFDWixNQUFBRSxFQUFTRCxDQUFDLElBQUk3QixFQUFJNkIsQ0FBQztBQUV2QixXQUFPUixFQUFLLGFBQWFTLENBQVE7QUFBQSxFQUNwQyxHQUNEVCxFQUFLLGVBQWUsQ0FBQ3JCLE1BQ1ZxQixFQUFLLFdBQVdyQixDQUFHLEVBQUUsSUFBSSxTQUFVK0IsR0FBRztBQUN6QyxXQUFPL0IsRUFBSStCLENBQUM7QUFBQSxFQUN4QixDQUFTLEdBRUxWLEVBQUssYUFBYSxPQUFPLE9BQU8sUUFBUyxhQUNuQyxDQUFDckIsTUFBUSxPQUFPLEtBQUtBLENBQUcsSUFDeEIsQ0FBQ2dDLE1BQVc7QUFDVixVQUFNQyxJQUFPLENBQUU7QUFDZixlQUFXakIsS0FBT2dCO0FBQ2QsTUFBSSxPQUFPLFVBQVUsZUFBZSxLQUFLQSxHQUFRaEIsQ0FBRyxLQUNoRGlCLEVBQUssS0FBS2pCLENBQUc7QUFHckIsV0FBT2lCO0FBQUEsRUFDVixHQUNMWixFQUFLLE9BQU8sQ0FBQ2EsR0FBS0MsTUFBWTtBQUMxQixlQUFXaEUsS0FBUStEO0FBQ2YsVUFBSUMsRUFBUWhFLENBQUk7QUFDWixlQUFPQTtBQUFBLEVBR2xCLEdBQ0RrRCxFQUFLLFlBQVksT0FBTyxPQUFPLGFBQWMsYUFDdkMsQ0FBQ2UsTUFBUSxPQUFPLFVBQVVBLENBQUcsSUFDN0IsQ0FBQ0EsTUFBUSxPQUFPQSxLQUFRLFlBQVksT0FBTyxTQUFTQSxDQUFHLEtBQUssS0FBSyxNQUFNQSxDQUFHLE1BQU1BO0FBQ3RGLFdBQVNDLEVBQVdDLEdBQU9DLElBQVksT0FBTztBQUMxQyxXQUFPRCxFQUFNLElBQUksQ0FBQ0YsTUFBUyxPQUFPQSxLQUFRLFdBQVcsSUFBSUEsQ0FBRyxNQUFNQSxDQUFJLEVBQUUsS0FBS0csQ0FBUztBQUFBLEVBQzlGO0FBQ0ksRUFBQWxCLEVBQUssYUFBYWdCLEdBQ2xCaEIsRUFBSyx3QkFBd0IsQ0FBQ0MsR0FBR0YsTUFDekIsT0FBT0EsS0FBVSxXQUNWQSxFQUFNLFNBQVUsSUFFcEJBO0FBRWYsR0FBR0MsTUFBU0EsSUFBTyxDQUFBLEVBQUc7QUFDZixJQUFJbUI7QUFBQSxDQUNWLFNBQVVBLEdBQVk7QUFDbkIsRUFBQUEsRUFBVyxjQUFjLENBQUNDLEdBQU9DLE9BQ3RCO0FBQUEsSUFDSCxHQUFHRDtBQUFBLElBQ0gsR0FBR0M7QUFBQTtBQUFBLEVBQ047QUFFVCxHQUFHRixPQUFlQSxLQUFhLENBQUEsRUFBRztBQUMzQixNQUFNcVAsSUFBZ0J4USxFQUFLLFlBQVk7QUFBQSxFQUMxQztBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFDSixDQUFDLEdBQ1l5USxLQUFnQixDQUFDQyxNQUFTO0FBRW5DLFVBRFUsT0FBT0EsR0FDUjtBQUFBLElBQ0wsS0FBSztBQUNELGFBQU9GLEVBQWM7QUFBQSxJQUN6QixLQUFLO0FBQ0QsYUFBT0EsRUFBYztBQUFBLElBQ3pCLEtBQUs7QUFDRCxhQUFPLE9BQU8sTUFBTUUsQ0FBSSxJQUFJRixFQUFjLE1BQU1BLEVBQWM7QUFBQSxJQUNsRSxLQUFLO0FBQ0QsYUFBT0EsRUFBYztBQUFBLElBQ3pCLEtBQUs7QUFDRCxhQUFPQSxFQUFjO0FBQUEsSUFDekIsS0FBSztBQUNELGFBQU9BLEVBQWM7QUFBQSxJQUN6QixLQUFLO0FBQ0QsYUFBT0EsRUFBYztBQUFBLElBQ3pCLEtBQUs7QUFDRCxhQUFJLE1BQU0sUUFBUUUsQ0FBSSxJQUNYRixFQUFjLFFBRXJCRSxNQUFTLE9BQ0ZGLEVBQWMsT0FFckJFLEVBQUssUUFBUSxPQUFPQSxFQUFLLFFBQVMsY0FBY0EsRUFBSyxTQUFTLE9BQU9BLEVBQUssU0FBVSxhQUM3RUYsRUFBYyxVQUVyQixPQUFPLE1BQVEsT0FBZUUsYUFBZ0IsTUFDdkNGLEVBQWMsTUFFckIsT0FBTyxNQUFRLE9BQWVFLGFBQWdCLE1BQ3ZDRixFQUFjLE1BRXJCLE9BQU8sT0FBUyxPQUFlRSxhQUFnQixPQUN4Q0YsRUFBYyxPQUVsQkEsRUFBYztBQUFBLElBQ3pCO0FBQ0ksYUFBT0EsRUFBYztBQUFBLEVBQ2pDO0FBQ0EsR0NuSWFHLElBQWUzUSxFQUFLLFlBQVk7QUFBQSxFQUN6QztBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUNKLENBQUM7QUFLTSxNQUFNc0IsV0FBaUIsTUFBTTtBQUFBLEVBQ2hDLElBQUksU0FBUztBQUNULFdBQU8sS0FBSztBQUFBLEVBQ3BCO0FBQUEsRUFDSSxZQUFZQyxHQUFRO0FBQ2hCLFVBQU8sR0FDUCxLQUFLLFNBQVMsQ0FBRSxHQUNoQixLQUFLLFdBQVcsQ0FBQ0MsTUFBUTtBQUNyQixXQUFLLFNBQVMsQ0FBQyxHQUFHLEtBQUssUUFBUUEsQ0FBRztBQUFBLElBQ3JDLEdBQ0QsS0FBSyxZQUFZLENBQUNDLElBQU8sT0FBTztBQUM1QixXQUFLLFNBQVMsQ0FBQyxHQUFHLEtBQUssUUFBUSxHQUFHQSxDQUFJO0FBQUEsSUFDekM7QUFDRCxVQUFNQyxJQUFjLFdBQVc7QUFDL0IsSUFBSSxPQUFPLGlCQUVQLE9BQU8sZUFBZSxNQUFNQSxDQUFXLElBR3ZDLEtBQUssWUFBWUEsR0FFckIsS0FBSyxPQUFPLFlBQ1osS0FBSyxTQUFTSDtBQUFBLEVBQ3RCO0FBQUEsRUFDSSxPQUFPSSxHQUFTO0FBQ1osVUFBTUMsSUFBU0QsS0FDWCxTQUFVRSxHQUFPO0FBQ2IsYUFBT0EsRUFBTTtBQUFBLElBQ2hCLEdBQ0NDLElBQWMsRUFBRSxTQUFTLEdBQUksR0FDN0JDLElBQWUsQ0FBQ3hELE1BQVU7QUFDNUIsaUJBQVdzRCxLQUFTdEQsRUFBTTtBQUN0QixZQUFJc0QsRUFBTSxTQUFTO0FBQ2YsVUFBQUEsRUFBTSxZQUFZLElBQUlFLENBQVk7QUFBQSxpQkFFN0JGLEVBQU0sU0FBUztBQUNwQixVQUFBRSxFQUFhRixFQUFNLGVBQWU7QUFBQSxpQkFFN0JBLEVBQU0sU0FBUztBQUNwQixVQUFBRSxFQUFhRixFQUFNLGNBQWM7QUFBQSxpQkFFNUJBLEVBQU0sS0FBSyxXQUFXO0FBQzNCLFVBQUFDLEVBQVksUUFBUSxLQUFLRixFQUFPQyxDQUFLLENBQUM7QUFBQSxhQUVyQztBQUNELGNBQUlHLElBQU9GLEdBQ1BwRixJQUFJO0FBQ1IsaUJBQU9BLElBQUltRixFQUFNLEtBQUssVUFBUTtBQUMxQixrQkFBTUksSUFBS0osRUFBTSxLQUFLbkYsQ0FBQztBQUV2QixZQURpQkEsTUFBTW1GLEVBQU0sS0FBSyxTQUFTLEtBWXZDRyxFQUFLQyxDQUFFLElBQUlELEVBQUtDLENBQUUsS0FBSyxFQUFFLFNBQVMsR0FBSSxHQUN0Q0QsRUFBS0MsQ0FBRSxFQUFFLFFBQVEsS0FBS0wsRUFBT0MsQ0FBSyxDQUFDLEtBWG5DRyxFQUFLQyxDQUFFLElBQUlELEVBQUtDLENBQUUsS0FBSyxFQUFFLFNBQVMsR0FBSSxHQWExQ0QsSUFBT0EsRUFBS0MsQ0FBRSxHQUNkdkY7QUFBQSxVQUN4QjtBQUFBLFFBQ0E7QUFBQSxJQUVTO0FBQ0QsV0FBQXFGLEVBQWEsSUFBSSxHQUNWRDtBQUFBLEVBQ2Y7QUFBQSxFQUNJLE9BQU8sT0FBTy9CLEdBQU87QUFDakIsUUFBSSxFQUFFQSxhQUFpQnVCO0FBQ25CLFlBQU0sSUFBSSxNQUFNLG1CQUFtQnZCLENBQUssRUFBRTtBQUFBLEVBRXREO0FBQUEsRUFDSSxXQUFXO0FBQ1AsV0FBTyxLQUFLO0FBQUEsRUFDcEI7QUFBQSxFQUNJLElBQUksVUFBVTtBQUNWLFdBQU8sS0FBSyxVQUFVLEtBQUssUUFBUUMsRUFBSyx1QkFBdUIsQ0FBQztBQUFBLEVBQ3hFO0FBQUEsRUFDSSxJQUFJLFVBQVU7QUFDVixXQUFPLEtBQUssT0FBTyxXQUFXO0FBQUEsRUFDdEM7QUFBQSxFQUNJLFFBQVE0QixJQUFTLENBQUNDLE1BQVVBLEVBQU0sU0FBUztBQUN2QyxVQUFNQyxJQUFjLENBQUUsR0FDaEJJLElBQWEsQ0FBRTtBQUNyQixlQUFXVixLQUFPLEtBQUs7QUFDbkIsTUFBSUEsRUFBSSxLQUFLLFNBQVMsS0FDbEJNLEVBQVlOLEVBQUksS0FBSyxDQUFDLENBQUMsSUFBSU0sRUFBWU4sRUFBSSxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUUsR0FDekRNLEVBQVlOLEVBQUksS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLSSxFQUFPSixDQUFHLENBQUMsS0FHekNVLEVBQVcsS0FBS04sRUFBT0osQ0FBRyxDQUFDO0FBR25DLFdBQU8sRUFBRSxZQUFBVSxHQUFZLGFBQUFKLEVBQWE7QUFBQSxFQUMxQztBQUFBLEVBQ0ksSUFBSSxhQUFhO0FBQ2IsV0FBTyxLQUFLLFFBQVM7QUFBQSxFQUM3QjtBQUNBO0FBQ0FSLEdBQVMsU0FBUyxDQUFDQyxNQUNELElBQUlELEdBQVNDLENBQU07QUMvSHJDLE1BQU1xUCxLQUFXLENBQUMvTyxHQUFPZ1AsTUFBUztBQUM5QixNQUFJek87QUFDSixVQUFRUCxFQUFNLE1BQUk7QUFBQSxJQUNkLEtBQUs4TyxFQUFhO0FBQ2QsTUFBSTlPLEVBQU0sYUFBYTJPLEVBQWMsWUFDakNwTyxJQUFVLGFBR1ZBLElBQVUsWUFBWVAsRUFBTSxRQUFRLGNBQWNBLEVBQU0sUUFBUTtBQUVwRTtBQUFBLElBQ0osS0FBSzhPLEVBQWE7QUFDZCxNQUFBdk8sSUFBVSxtQ0FBbUMsS0FBSyxVQUFVUCxFQUFNLFVBQVU3QixFQUFLLHFCQUFxQixDQUFDO0FBQ3ZHO0FBQUEsSUFDSixLQUFLMlEsRUFBYTtBQUNkLE1BQUF2TyxJQUFVLGtDQUFrQ3BDLEVBQUssV0FBVzZCLEVBQU0sTUFBTSxJQUFJLENBQUM7QUFDN0U7QUFBQSxJQUNKLEtBQUs4TyxFQUFhO0FBQ2QsTUFBQXZPLElBQVU7QUFDVjtBQUFBLElBQ0osS0FBS3VPLEVBQWE7QUFDZCxNQUFBdk8sSUFBVSx5Q0FBeUNwQyxFQUFLLFdBQVc2QixFQUFNLE9BQU8sQ0FBQztBQUNqRjtBQUFBLElBQ0osS0FBSzhPLEVBQWE7QUFDZCxNQUFBdk8sSUFBVSxnQ0FBZ0NwQyxFQUFLLFdBQVc2QixFQUFNLE9BQU8sQ0FBQyxlQUFlQSxFQUFNLFFBQVE7QUFDckc7QUFBQSxJQUNKLEtBQUs4TyxFQUFhO0FBQ2QsTUFBQXZPLElBQVU7QUFDVjtBQUFBLElBQ0osS0FBS3VPLEVBQWE7QUFDZCxNQUFBdk8sSUFBVTtBQUNWO0FBQUEsSUFDSixLQUFLdU8sRUFBYTtBQUNkLE1BQUF2TyxJQUFVO0FBQ1Y7QUFBQSxJQUNKLEtBQUt1TyxFQUFhO0FBQ2QsTUFBSSxPQUFPOU8sRUFBTSxjQUFlLFdBQ3hCLGNBQWNBLEVBQU0sY0FDcEJPLElBQVUsZ0NBQWdDUCxFQUFNLFdBQVcsUUFBUSxLQUMvRCxPQUFPQSxFQUFNLFdBQVcsWUFBYSxhQUNyQ08sSUFBVSxHQUFHQSxDQUFPLHNEQUFzRFAsRUFBTSxXQUFXLFFBQVEsT0FHbEcsZ0JBQWdCQSxFQUFNLGFBQzNCTyxJQUFVLG1DQUFtQ1AsRUFBTSxXQUFXLFVBQVUsTUFFbkUsY0FBY0EsRUFBTSxhQUN6Qk8sSUFBVSxpQ0FBaUNQLEVBQU0sV0FBVyxRQUFRLE1BR3BFN0IsRUFBSyxZQUFZNkIsRUFBTSxVQUFVLElBR2hDQSxFQUFNLGVBQWUsVUFDMUJPLElBQVUsV0FBV1AsRUFBTSxVQUFVLEtBR3JDTyxJQUFVO0FBRWQ7QUFBQSxJQUNKLEtBQUt1TyxFQUFhO0FBQ2QsTUFBSTlPLEVBQU0sU0FBUyxVQUNmTyxJQUFVLHNCQUFzQlAsRUFBTSxRQUFRLFlBQVlBLEVBQU0sWUFBWSxhQUFhLFdBQVcsSUFBSUEsRUFBTSxPQUFPLGdCQUNoSEEsRUFBTSxTQUFTLFdBQ3BCTyxJQUFVLHVCQUF1QlAsRUFBTSxRQUFRLFlBQVlBLEVBQU0sWUFBWSxhQUFhLE1BQU0sSUFBSUEsRUFBTSxPQUFPLGtCQUM1R0EsRUFBTSxTQUFTLFdBQ3BCTyxJQUFVLGtCQUFrQlAsRUFBTSxRQUFRLHNCQUFzQkEsRUFBTSxZQUFZLDhCQUE4QixlQUFlLEdBQUdBLEVBQU0sT0FBTyxLQUMxSUEsRUFBTSxTQUFTLFNBQ3BCTyxJQUFVLGdCQUFnQlAsRUFBTSxRQUFRLHNCQUFzQkEsRUFBTSxZQUFZLDhCQUE4QixlQUFlLEdBQUcsSUFBSSxLQUFLLE9BQU9BLEVBQU0sT0FBTyxDQUFDLENBQUMsS0FFL0pPLElBQVU7QUFDZDtBQUFBLElBQ0osS0FBS3VPLEVBQWE7QUFDZCxNQUFJOU8sRUFBTSxTQUFTLFVBQ2ZPLElBQVUsc0JBQXNCUCxFQUFNLFFBQVEsWUFBWUEsRUFBTSxZQUFZLFlBQVksV0FBVyxJQUFJQSxFQUFNLE9BQU8sZ0JBQy9HQSxFQUFNLFNBQVMsV0FDcEJPLElBQVUsdUJBQXVCUCxFQUFNLFFBQVEsWUFBWUEsRUFBTSxZQUFZLFlBQVksT0FBTyxJQUFJQSxFQUFNLE9BQU8sa0JBQzVHQSxFQUFNLFNBQVMsV0FDcEJPLElBQVUsa0JBQWtCUCxFQUFNLFFBQVEsWUFBWUEsRUFBTSxZQUFZLDBCQUEwQixXQUFXLElBQUlBLEVBQU0sT0FBTyxLQUN6SEEsRUFBTSxTQUFTLFdBQ3BCTyxJQUFVLGtCQUFrQlAsRUFBTSxRQUFRLFlBQVlBLEVBQU0sWUFBWSwwQkFBMEIsV0FBVyxJQUFJQSxFQUFNLE9BQU8sS0FDekhBLEVBQU0sU0FBUyxTQUNwQk8sSUFBVSxnQkFBZ0JQLEVBQU0sUUFBUSxZQUFZQSxFQUFNLFlBQVksNkJBQTZCLGNBQWMsSUFBSSxJQUFJLEtBQUssT0FBT0EsRUFBTSxPQUFPLENBQUMsQ0FBQyxLQUVwSk8sSUFBVTtBQUNkO0FBQUEsSUFDSixLQUFLdU8sRUFBYTtBQUNkLE1BQUF2TyxJQUFVO0FBQ1Y7QUFBQSxJQUNKLEtBQUt1TyxFQUFhO0FBQ2QsTUFBQXZPLElBQVU7QUFDVjtBQUFBLElBQ0osS0FBS3VPLEVBQWE7QUFDZCxNQUFBdk8sSUFBVSxnQ0FBZ0NQLEVBQU0sVUFBVTtBQUMxRDtBQUFBLElBQ0osS0FBSzhPLEVBQWE7QUFDZCxNQUFBdk8sSUFBVTtBQUNWO0FBQUEsSUFDSjtBQUNJLE1BQUFBLElBQVV5TyxFQUFLLGNBQ2Y3USxFQUFLLFlBQVk2QixDQUFLO0FBQUEsRUFDbEM7QUFDSSxTQUFPLEVBQUUsU0FBQU8sRUFBUztBQUN0QjtBQ3hHQSxJQUFJME8sS0FBbUJDO0FBS2hCLFNBQVNDLEtBQWM7QUFDMUIsU0FBT0Y7QUFDWDtBQ05PLE1BQU1HLEtBQVksQ0FBQ0MsTUFBVztBQUNqQyxRQUFNLEVBQUUsTUFBQVIsR0FBTSxNQUFBUyxHQUFNLFdBQUFDLEdBQVcsV0FBQUMsRUFBVyxJQUFHSCxHQUN2Q0ksSUFBVyxDQUFDLEdBQUdILEdBQU0sR0FBSUUsRUFBVSxRQUFRLENBQUEsQ0FBRyxHQUM5Q0UsSUFBWTtBQUFBLElBQ2QsR0FBR0Y7QUFBQSxJQUNILE1BQU1DO0FBQUEsRUFDVDtBQUNELE1BQUlELEVBQVUsWUFBWTtBQUN0QixXQUFPO0FBQUEsTUFDSCxHQUFHQTtBQUFBLE1BQ0gsTUFBTUM7QUFBQSxNQUNOLFNBQVNELEVBQVU7QUFBQSxJQUN0QjtBQUVMLE1BQUl6UixJQUFlO0FBQ25CLFFBQU00UixJQUFPSixFQUNSLE9BQU8sQ0FBQ2xHLE1BQU0sQ0FBQyxDQUFDQSxDQUFDLEVBQ2pCLE1BQUssRUFDTCxRQUFTO0FBQ2QsYUFBV3VHLEtBQU9EO0FBQ2QsSUFBQTVSLElBQWU2UixFQUFJRixHQUFXLEVBQUUsTUFBQWIsR0FBTSxjQUFjOVEsRUFBYyxDQUFBLEVBQUU7QUFFeEUsU0FBTztBQUFBLElBQ0gsR0FBR3lSO0FBQUEsSUFDSCxNQUFNQztBQUFBLElBQ04sU0FBUzFSO0FBQUEsRUFDWjtBQUNMO0FBRU8sU0FBUzhSLEVBQWtCQyxHQUFLTixHQUFXO0FBQzlDLFFBQU1PLElBQWNaLEdBQWEsR0FDM0JuUCxJQUFRb1AsR0FBVTtBQUFBLElBQ3BCLFdBQVdJO0FBQUEsSUFDWCxNQUFNTSxFQUFJO0FBQUEsSUFDVixNQUFNQSxFQUFJO0FBQUEsSUFDVixXQUFXO0FBQUEsTUFDUEEsRUFBSSxPQUFPO0FBQUE7QUFBQSxNQUNYQSxFQUFJO0FBQUE7QUFBQSxNQUNKQztBQUFBO0FBQUEsTUFDQUEsTUFBZ0JiLEtBQWtCLFNBQVlBO0FBQUFBO0FBQUFBLElBQ2pELEVBQUMsT0FBTyxDQUFDbE4sTUFBTSxDQUFDLENBQUNBLENBQUM7QUFBQSxFQUMzQixDQUFLO0FBQ0QsRUFBQThOLEVBQUksT0FBTyxPQUFPLEtBQUs5UCxDQUFLO0FBQ2hDO0FBQ08sTUFBTWdRLEdBQVk7QUFBQSxFQUNyQixjQUFjO0FBQ1YsU0FBSyxRQUFRO0FBQUEsRUFDckI7QUFBQSxFQUNJLFFBQVE7QUFDSixJQUFJLEtBQUssVUFBVSxZQUNmLEtBQUssUUFBUTtBQUFBLEVBQ3pCO0FBQUEsRUFDSSxRQUFRO0FBQ0osSUFBSSxLQUFLLFVBQVUsY0FDZixLQUFLLFFBQVE7QUFBQSxFQUN6QjtBQUFBLEVBQ0ksT0FBTyxXQUFXQyxHQUFRQyxHQUFTO0FBQy9CLFVBQU1DLElBQWEsQ0FBRTtBQUNyQixlQUFXLEtBQUtELEdBQVM7QUFDckIsVUFBSSxFQUFFLFdBQVc7QUFDYixlQUFPRTtBQUNYLE1BQUksRUFBRSxXQUFXLFdBQ2JILEVBQU8sTUFBTyxHQUNsQkUsRUFBVyxLQUFLLEVBQUUsS0FBSztBQUFBLElBQ25DO0FBQ1EsV0FBTyxFQUFFLFFBQVFGLEVBQU8sT0FBTyxPQUFPRSxFQUFZO0FBQUEsRUFDMUQ7QUFBQSxFQUNJLGFBQWEsaUJBQWlCRixHQUFRSSxHQUFPO0FBQ3pDLFVBQU1DLElBQVksQ0FBRTtBQUNwQixlQUFXQyxLQUFRRixHQUFPO0FBQ3RCLFlBQU12UyxJQUFNLE1BQU15UyxFQUFLLEtBQ2pCclMsSUFBUSxNQUFNcVMsRUFBSztBQUN6QixNQUFBRCxFQUFVLEtBQUs7QUFBQSxRQUNYLEtBQUF4UztBQUFBLFFBQ0EsT0FBQUk7QUFBQSxNQUNoQixDQUFhO0FBQUEsSUFDYjtBQUNRLFdBQU84UixHQUFZLGdCQUFnQkMsR0FBUUssQ0FBUztBQUFBLEVBQzVEO0FBQUEsRUFDSSxPQUFPLGdCQUFnQkwsR0FBUUksR0FBTztBQUNsQyxVQUFNRyxJQUFjLENBQUU7QUFDdEIsZUFBV0QsS0FBUUYsR0FBTztBQUN0QixZQUFNLEVBQUUsS0FBQXZTLEdBQUssT0FBQUksRUFBSyxJQUFLcVM7QUFHdkIsVUFGSXpTLEVBQUksV0FBVyxhQUVmSSxFQUFNLFdBQVc7QUFDakIsZUFBT2tTO0FBQ1gsTUFBSXRTLEVBQUksV0FBVyxXQUNmbVMsRUFBTyxNQUFPLEdBQ2QvUixFQUFNLFdBQVcsV0FDakIrUixFQUFPLE1BQU8sR0FDZG5TLEVBQUksVUFBVSxnQkFBZ0IsT0FBT0ksRUFBTSxRQUFVLE9BQWVxUyxFQUFLLGVBQ3pFQyxFQUFZMVMsRUFBSSxLQUFLLElBQUlJLEVBQU07QUFBQSxJQUUvQztBQUNRLFdBQU8sRUFBRSxRQUFRK1IsRUFBTyxPQUFPLE9BQU9PLEVBQWE7QUFBQSxFQUMzRDtBQUNBO0FBQ08sTUFBTUosSUFBVSxPQUFPLE9BQU87QUFBQSxFQUNqQyxRQUFRO0FBQ1osQ0FBQyxHQUNZSyxLQUFRLENBQUN2UyxPQUFXLEVBQUUsUUFBUSxTQUFTLE9BQUFBLEVBQUssSUFDNUN3UyxLQUFLLENBQUN4UyxPQUFXLEVBQUUsUUFBUSxTQUFTLE9BQUFBLEVBQUssSUFDekN5UyxLQUFZLENBQUMzTyxNQUFNQSxFQUFFLFdBQVcsV0FDaEM0TyxLQUFVLENBQUM1TyxNQUFNQSxFQUFFLFdBQVcsU0FDOUI2TyxLQUFVLENBQUM3TyxNQUFNQSxFQUFFLFdBQVcsU0FDOUI4TyxLQUFVLENBQUM5TyxNQUFNLE9BQU8sVUFBWSxPQUFlQSxhQUFhO0FDNUd0RSxJQUFJMUI7QUFBQSxDQUNWLFNBQVVBLEdBQVc7QUFDbEIsRUFBQUEsRUFBVSxXQUFXLENBQUNDLE1BQVksT0FBT0EsS0FBWSxXQUFXLEVBQUUsU0FBQUEsTUFBWUEsS0FBVyxDQUFFLEdBRTNGRCxFQUFVLFdBQVcsQ0FBQ0MsTUFBWSxPQUFPQSxLQUFZLFdBQVdBLElBQVVBLEtBQUEsZ0JBQUFBLEVBQVM7QUFDdkYsR0FBR0QsTUFBY0EsSUFBWSxDQUFBLEVBQUc7QUNBaEMsTUFBTXlRLEdBQW1CO0FBQUEsRUFDckIsWUFBWUMsR0FBUTlTLEdBQU9vUixHQUFNeFIsR0FBSztBQUNsQyxTQUFLLGNBQWMsQ0FBRSxHQUNyQixLQUFLLFNBQVNrVCxHQUNkLEtBQUssT0FBTzlTLEdBQ1osS0FBSyxRQUFRb1IsR0FDYixLQUFLLE9BQU94UjtBQUFBLEVBQ3BCO0FBQUEsRUFDSSxJQUFJLE9BQU87QUFDUCxXQUFLLEtBQUssWUFBWSxXQUNkLE1BQU0sUUFBUSxLQUFLLElBQUksSUFDdkIsS0FBSyxZQUFZLEtBQUssR0FBRyxLQUFLLE9BQU8sR0FBRyxLQUFLLElBQUksSUFHakQsS0FBSyxZQUFZLEtBQUssR0FBRyxLQUFLLE9BQU8sS0FBSyxJQUFJLElBRy9DLEtBQUs7QUFBQSxFQUNwQjtBQUNBO0FBQ0EsTUFBTW1ULEtBQWUsQ0FBQ25CLEdBQUszSyxNQUFXO0FBQ2xDLE1BQUkwTCxHQUFRMUwsQ0FBTTtBQUNkLFdBQU8sRUFBRSxTQUFTLElBQU0sTUFBTUEsRUFBTyxNQUFPO0FBRzVDLE1BQUksQ0FBQzJLLEVBQUksT0FBTyxPQUFPO0FBQ25CLFVBQU0sSUFBSSxNQUFNLDJDQUEyQztBQUUvRCxTQUFPO0FBQUEsSUFDSCxTQUFTO0FBQUEsSUFDVCxJQUFJLFFBQVE7QUFDUixVQUFJLEtBQUs7QUFDTCxlQUFPLEtBQUs7QUFDaEIsWUFBTXBULElBQVEsSUFBSStDLEdBQVNxUSxFQUFJLE9BQU8sTUFBTTtBQUM1QyxrQkFBSyxTQUFTcFQsR0FDUCxLQUFLO0FBQUEsSUFDZjtBQUFBLEVBQ0o7QUFFVDtBQUNBLFNBQVN3VSxFQUFvQjdCLEdBQVE7QUFDakMsTUFBSSxDQUFDQTtBQUNELFdBQU8sQ0FBRTtBQUNiLFFBQU0sRUFBRSxVQUFBTixHQUFVLG9CQUFBb0MsR0FBb0IsZ0JBQUFDLEdBQWdCLGFBQUFDLEVBQWEsSUFBR2hDO0FBQ3RFLE1BQUlOLE1BQWFvQyxLQUFzQkM7QUFDbkMsVUFBTSxJQUFJLE1BQU0sMEZBQTBGO0FBRTlHLFNBQUlyQyxJQUNPLEVBQUUsVUFBVUEsR0FBVSxhQUFBc0MsRUFBYSxJQWF2QyxFQUFFLFVBWlMsQ0FBQ0MsR0FBS3hCLE1BQVE7QUFDNUIsVUFBTSxFQUFFLFNBQUF2UCxFQUFPLElBQUs4TztBQUNwQixXQUFJaUMsRUFBSSxTQUFTLHVCQUNOLEVBQUUsU0FBUy9RLEtBQVd1UCxFQUFJLGFBQWMsSUFFL0MsT0FBT0EsRUFBSSxPQUFTLE1BQ2IsRUFBRSxTQUFTdlAsS0FBVzZRLEtBQWtCdEIsRUFBSSxhQUFjLElBRWpFd0IsRUFBSSxTQUFTLGlCQUNOLEVBQUUsU0FBU3hCLEVBQUksYUFBYyxJQUNqQyxFQUFFLFNBQVN2UCxLQUFXNFEsS0FBc0JyQixFQUFJLGFBQWM7QUFBQSxFQUN4RSxHQUM2QixhQUFBdUIsRUFBYTtBQUMvQztBQUNPLE1BQU1FLEVBQVE7QUFBQSxFQUNqQixJQUFJLGNBQWM7QUFDZCxXQUFPLEtBQUssS0FBSztBQUFBLEVBQ3pCO0FBQUEsRUFDSSxTQUFTNUksR0FBTztBQUNaLFdBQU9pRyxHQUFjakcsRUFBTSxJQUFJO0FBQUEsRUFDdkM7QUFBQSxFQUNJLGdCQUFnQkEsR0FBT21ILEdBQUs7QUFDeEIsV0FBUUEsS0FBTztBQUFBLE1BQ1gsUUFBUW5ILEVBQU0sT0FBTztBQUFBLE1BQ3JCLE1BQU1BLEVBQU07QUFBQSxNQUNaLFlBQVlpRyxHQUFjakcsRUFBTSxJQUFJO0FBQUEsTUFDcEMsZ0JBQWdCLEtBQUssS0FBSztBQUFBLE1BQzFCLE1BQU1BLEVBQU07QUFBQSxNQUNaLFFBQVFBLEVBQU07QUFBQSxJQUNqQjtBQUFBLEVBQ1Q7QUFBQSxFQUNJLG9CQUFvQkEsR0FBTztBQUN2QixXQUFPO0FBQUEsTUFDSCxRQUFRLElBQUlxSCxHQUFhO0FBQUEsTUFDekIsS0FBSztBQUFBLFFBQ0QsUUFBUXJILEVBQU0sT0FBTztBQUFBLFFBQ3JCLE1BQU1BLEVBQU07QUFBQSxRQUNaLFlBQVlpRyxHQUFjakcsRUFBTSxJQUFJO0FBQUEsUUFDcEMsZ0JBQWdCLEtBQUssS0FBSztBQUFBLFFBQzFCLE1BQU1BLEVBQU07QUFBQSxRQUNaLFFBQVFBLEVBQU07QUFBQSxNQUNqQjtBQUFBLElBQ0o7QUFBQSxFQUNUO0FBQUEsRUFDSSxXQUFXQSxHQUFPO0FBQ2QsVUFBTXhELElBQVMsS0FBSyxPQUFPd0QsQ0FBSztBQUNoQyxRQUFJbUksR0FBUTNMLENBQU07QUFDZCxZQUFNLElBQUksTUFBTSx3Q0FBd0M7QUFFNUQsV0FBT0E7QUFBQSxFQUNmO0FBQUEsRUFDSSxZQUFZd0QsR0FBTztBQUNmLFVBQU14RCxJQUFTLEtBQUssT0FBT3dELENBQUs7QUFDaEMsV0FBTyxRQUFRLFFBQVF4RCxDQUFNO0FBQUEsRUFDckM7QUFBQSxFQUNJLE1BQU0wSixHQUFNUSxHQUFRO0FBQ2hCLFVBQU1sSyxJQUFTLEtBQUssVUFBVTBKLEdBQU1RLENBQU07QUFDMUMsUUFBSWxLLEVBQU87QUFDUCxhQUFPQSxFQUFPO0FBQ2xCLFVBQU1BLEVBQU87QUFBQSxFQUNyQjtBQUFBLEVBQ0ksVUFBVTBKLEdBQU1RLEdBQVE7QUFDcEIsVUFBTVMsSUFBTTtBQUFBLE1BQ1IsUUFBUTtBQUFBLFFBQ0osUUFBUSxDQUFFO0FBQUEsUUFDVixRQUFPVCxLQUFBLGdCQUFBQSxFQUFRLFVBQVM7QUFBQSxRQUN4QixvQkFBb0JBLEtBQUEsZ0JBQUFBLEVBQVE7QUFBQSxNQUMvQjtBQUFBLE1BQ0QsT0FBTUEsS0FBQSxnQkFBQUEsRUFBUSxTQUFRLENBQUU7QUFBQSxNQUN4QixnQkFBZ0IsS0FBSyxLQUFLO0FBQUEsTUFDMUIsUUFBUTtBQUFBLE1BQ1IsTUFBQVI7QUFBQSxNQUNBLFlBQVlELEdBQWNDLENBQUk7QUFBQSxJQUNqQyxHQUNLMUosSUFBUyxLQUFLLFdBQVcsRUFBRSxNQUFBMEosR0FBTSxNQUFNaUIsRUFBSSxNQUFNLFFBQVFBLEdBQUs7QUFDcEUsV0FBT21CLEdBQWFuQixHQUFLM0ssQ0FBTTtBQUFBLEVBQ3ZDO0FBQUEsRUFDSSxZQUFZMEosR0FBTTs7QUFDZCxVQUFNaUIsSUFBTTtBQUFBLE1BQ1IsUUFBUTtBQUFBLFFBQ0osUUFBUSxDQUFFO0FBQUEsUUFDVixPQUFPLENBQUMsQ0FBQyxLQUFLLFdBQVcsRUFBRTtBQUFBLE1BQzlCO0FBQUEsTUFDRCxNQUFNLENBQUU7QUFBQSxNQUNSLGdCQUFnQixLQUFLLEtBQUs7QUFBQSxNQUMxQixRQUFRO0FBQUEsTUFDUixNQUFBakI7QUFBQSxNQUNBLFlBQVlELEdBQWNDLENBQUk7QUFBQSxJQUNqQztBQUNELFFBQUksQ0FBQyxLQUFLLFdBQVcsRUFBRTtBQUNuQixVQUFJO0FBQ0EsY0FBTTFKLElBQVMsS0FBSyxXQUFXLEVBQUUsTUFBQTBKLEdBQU0sTUFBTSxDQUFFLEdBQUUsUUFBUWlCLEdBQUs7QUFDOUQsZUFBT2UsR0FBUTFMLENBQU0sSUFDZjtBQUFBLFVBQ0UsT0FBT0EsRUFBTztBQUFBLFFBQ3RDLElBQ3NCO0FBQUEsVUFDRSxRQUFRMkssRUFBSSxPQUFPO0FBQUEsUUFDdEI7QUFBQSxNQUNyQixTQUNtQjBCLEdBQUs7QUFDUixTQUFJN1EsS0FBQUMsSUFBQTRRLEtBQUEsZ0JBQUFBLEVBQUssWUFBTCxnQkFBQTVRLEVBQWMsa0JBQWQsUUFBQUQsRUFBNkIsU0FBUyxtQkFDdEMsS0FBSyxXQUFXLEVBQUUsUUFBUSxLQUU5Qm1QLEVBQUksU0FBUztBQUFBLFVBQ1QsUUFBUSxDQUFFO0FBQUEsVUFDVixPQUFPO0FBQUEsUUFDVjtBQUFBLE1BQ2pCO0FBRVEsV0FBTyxLQUFLLFlBQVksRUFBRSxNQUFBakIsR0FBTSxNQUFNLENBQUUsR0FBRSxRQUFRaUIsRUFBSyxDQUFBLEVBQUUsS0FBSyxDQUFDM0ssTUFBVzBMLEdBQVExTCxDQUFNLElBQ2xGO0FBQUEsTUFDRSxPQUFPQSxFQUFPO0FBQUEsSUFDOUIsSUFDYztBQUFBLE1BQ0UsUUFBUTJLLEVBQUksT0FBTztBQUFBLElBQ25DLENBQWE7QUFBQSxFQUNiO0FBQUEsRUFDSSxNQUFNLFdBQVdqQixHQUFNUSxHQUFRO0FBQzNCLFVBQU1sSyxJQUFTLE1BQU0sS0FBSyxlQUFlMEosR0FBTVEsQ0FBTTtBQUNyRCxRQUFJbEssRUFBTztBQUNQLGFBQU9BLEVBQU87QUFDbEIsVUFBTUEsRUFBTztBQUFBLEVBQ3JCO0FBQUEsRUFDSSxNQUFNLGVBQWUwSixHQUFNUSxHQUFRO0FBQy9CLFVBQU1TLElBQU07QUFBQSxNQUNSLFFBQVE7QUFBQSxRQUNKLFFBQVEsQ0FBRTtBQUFBLFFBQ1Ysb0JBQW9CVCxLQUFBLGdCQUFBQSxFQUFRO0FBQUEsUUFDNUIsT0FBTztBQUFBLE1BQ1Y7QUFBQSxNQUNELE9BQU1BLEtBQUEsZ0JBQUFBLEVBQVEsU0FBUSxDQUFFO0FBQUEsTUFDeEIsZ0JBQWdCLEtBQUssS0FBSztBQUFBLE1BQzFCLFFBQVE7QUFBQSxNQUNSLE1BQUFSO0FBQUEsTUFDQSxZQUFZRCxHQUFjQyxDQUFJO0FBQUEsSUFDakMsR0FDSzRDLElBQW1CLEtBQUssT0FBTyxFQUFFLE1BQUE1QyxHQUFNLE1BQU1pQixFQUFJLE1BQU0sUUFBUUEsR0FBSyxHQUNwRTNLLElBQVMsT0FBTzJMLEdBQVFXLENBQWdCLElBQUlBLElBQW1CLFFBQVEsUUFBUUEsQ0FBZ0I7QUFDckcsV0FBT1IsR0FBYW5CLEdBQUszSyxDQUFNO0FBQUEsRUFDdkM7QUFBQSxFQUNJLE9BQU9wRSxHQUFPUixHQUFTO0FBQ25CLFVBQU1tUixJQUFxQixDQUFDeFMsTUFDcEIsT0FBT3FCLEtBQVksWUFBWSxPQUFPQSxJQUFZLE1BQzNDLEVBQUUsU0FBQUEsRUFBUyxJQUViLE9BQU9BLEtBQVksYUFDakJBLEVBQVFyQixDQUFHLElBR1hxQjtBQUdmLFdBQU8sS0FBSyxZQUFZLENBQUNyQixHQUFLNFEsTUFBUTtBQUNsQyxZQUFNM0ssSUFBU3BFLEVBQU03QixDQUFHLEdBQ2xCeVMsSUFBVyxNQUFNN0IsRUFBSSxTQUFTO0FBQUEsUUFDaEMsTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixHQUFHNEMsRUFBbUJ4UyxDQUFHO0FBQUEsTUFDekMsQ0FBYTtBQUNELGFBQUksT0FBTyxVQUFZLE9BQWVpRyxhQUFrQixVQUM3Q0EsRUFBTyxLQUFLLENBQUMwSixNQUNYQSxJQUtNLE1BSlA4QyxFQUFVLEdBQ0gsR0FLZCxJQUVBeE0sSUFLTSxNQUpQd00sRUFBVSxHQUNIO0FBQUEsSUFLdkIsQ0FBUztBQUFBLEVBQ1Q7QUFBQSxFQUNJLFdBQVc1USxHQUFPNlEsR0FBZ0I7QUFDOUIsV0FBTyxLQUFLLFlBQVksQ0FBQzFTLEdBQUs0USxNQUNyQi9PLEVBQU03QixDQUFHLElBS0gsTUFKUDRRLEVBQUksU0FBUyxPQUFPOEIsS0FBbUIsYUFBYUEsRUFBZTFTLEdBQUs0USxDQUFHLElBQUk4QixDQUFjLEdBQ3RGLEdBS2Q7QUFBQSxFQUNUO0FBQUEsRUFDSSxZQUFZQyxHQUFZO0FBQ3BCLFdBQU8sSUFBSUMsR0FBVztBQUFBLE1BQ2xCLFFBQVE7QUFBQSxNQUNSLFVBQVV0UixFQUFzQjtBQUFBLE1BQ2hDLFFBQVEsRUFBRSxNQUFNLGNBQWMsWUFBQXFSLEVBQVk7QUFBQSxJQUN0RCxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksWUFBWUEsR0FBWTtBQUNwQixXQUFPLEtBQUssWUFBWUEsQ0FBVTtBQUFBLEVBQzFDO0FBQUEsRUFDSSxZQUFZbFUsR0FBSztBQUViLFNBQUssTUFBTSxLQUFLLGdCQUNoQixLQUFLLE9BQU9BLEdBQ1osS0FBSyxRQUFRLEtBQUssTUFBTSxLQUFLLElBQUksR0FDakMsS0FBSyxZQUFZLEtBQUssVUFBVSxLQUFLLElBQUksR0FDekMsS0FBSyxhQUFhLEtBQUssV0FBVyxLQUFLLElBQUksR0FDM0MsS0FBSyxpQkFBaUIsS0FBSyxlQUFlLEtBQUssSUFBSSxHQUNuRCxLQUFLLE1BQU0sS0FBSyxJQUFJLEtBQUssSUFBSSxHQUM3QixLQUFLLFNBQVMsS0FBSyxPQUFPLEtBQUssSUFBSSxHQUNuQyxLQUFLLGFBQWEsS0FBSyxXQUFXLEtBQUssSUFBSSxHQUMzQyxLQUFLLGNBQWMsS0FBSyxZQUFZLEtBQUssSUFBSSxHQUM3QyxLQUFLLFdBQVcsS0FBSyxTQUFTLEtBQUssSUFBSSxHQUN2QyxLQUFLLFdBQVcsS0FBSyxTQUFTLEtBQUssSUFBSSxHQUN2QyxLQUFLLFVBQVUsS0FBSyxRQUFRLEtBQUssSUFBSSxHQUNyQyxLQUFLLFFBQVEsS0FBSyxNQUFNLEtBQUssSUFBSSxHQUNqQyxLQUFLLFVBQVUsS0FBSyxRQUFRLEtBQUssSUFBSSxHQUNyQyxLQUFLLEtBQUssS0FBSyxHQUFHLEtBQUssSUFBSSxHQUMzQixLQUFLLE1BQU0sS0FBSyxJQUFJLEtBQUssSUFBSSxHQUM3QixLQUFLLFlBQVksS0FBSyxVQUFVLEtBQUssSUFBSSxHQUN6QyxLQUFLLFFBQVEsS0FBSyxNQUFNLEtBQUssSUFBSSxHQUNqQyxLQUFLLFVBQVUsS0FBSyxRQUFRLEtBQUssSUFBSSxHQUNyQyxLQUFLLFFBQVEsS0FBSyxNQUFNLEtBQUssSUFBSSxHQUNqQyxLQUFLLFdBQVcsS0FBSyxTQUFTLEtBQUssSUFBSSxHQUN2QyxLQUFLLE9BQU8sS0FBSyxLQUFLLEtBQUssSUFBSSxHQUMvQixLQUFLLFdBQVcsS0FBSyxTQUFTLEtBQUssSUFBSSxHQUN2QyxLQUFLLGFBQWEsS0FBSyxXQUFXLEtBQUssSUFBSSxHQUMzQyxLQUFLLGFBQWEsS0FBSyxXQUFXLEtBQUssSUFBSSxHQUMzQyxLQUFLLFdBQVcsSUFBSTtBQUFBLE1BQ2hCLFNBQVM7QUFBQSxNQUNULFFBQVE7QUFBQSxNQUNSLFVBQVUsQ0FBQ2tSLE1BQVMsS0FBSyxXQUFXLEVBQUVBLENBQUk7QUFBQSxJQUM3QztBQUFBLEVBQ1Q7QUFBQSxFQUNJLFdBQVc7QUFDUCxXQUFPa0QsR0FBWSxPQUFPLE1BQU0sS0FBSyxJQUFJO0FBQUEsRUFDakQ7QUFBQSxFQUNJLFdBQVc7QUFDUCxXQUFPQyxHQUFZLE9BQU8sTUFBTSxLQUFLLElBQUk7QUFBQSxFQUNqRDtBQUFBLEVBQ0ksVUFBVTtBQUNOLFdBQU8sS0FBSyxTQUFVLEVBQUMsU0FBVTtBQUFBLEVBQ3pDO0FBQUEsRUFDSSxRQUFRO0FBQ0osV0FBT0MsR0FBUyxPQUFPLElBQUk7QUFBQSxFQUNuQztBQUFBLEVBQ0ksVUFBVTtBQUNOLFdBQU9DLEdBQVcsT0FBTyxNQUFNLEtBQUssSUFBSTtBQUFBLEVBQ2hEO0FBQUEsRUFDSSxHQUFHQyxHQUFRO0FBQ1AsV0FBT0MsR0FBUyxPQUFPLENBQUMsTUFBTUQsQ0FBTSxHQUFHLEtBQUssSUFBSTtBQUFBLEVBQ3hEO0FBQUEsRUFDSSxJQUFJRSxHQUFVO0FBQ1YsV0FBT0MsR0FBZ0IsT0FBTyxNQUFNRCxHQUFVLEtBQUssSUFBSTtBQUFBLEVBQy9EO0FBQUEsRUFDSSxVQUFVRSxHQUFXO0FBQ2pCLFdBQU8sSUFBSVQsR0FBVztBQUFBLE1BQ2xCLEdBQUdaLEVBQW9CLEtBQUssSUFBSTtBQUFBLE1BQ2hDLFFBQVE7QUFBQSxNQUNSLFVBQVUxUSxFQUFzQjtBQUFBLE1BQ2hDLFFBQVEsRUFBRSxNQUFNLGFBQWEsV0FBQStSLEVBQVc7QUFBQSxJQUNwRCxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksUUFBUTVVLEdBQUs7QUFDVCxVQUFNNlUsSUFBbUIsT0FBTzdVLEtBQVEsYUFBYUEsSUFBTSxNQUFNQTtBQUNqRSxXQUFPLElBQUk4VSxHQUFXO0FBQUEsTUFDbEIsR0FBR3ZCLEVBQW9CLEtBQUssSUFBSTtBQUFBLE1BQ2hDLFdBQVc7QUFBQSxNQUNYLGNBQWNzQjtBQUFBLE1BQ2QsVUFBVWhTLEVBQXNCO0FBQUEsSUFDNUMsQ0FBUztBQUFBLEVBQ1Q7QUFBQSxFQUNJLFFBQVE7QUFDSixXQUFPLElBQUlrUyxHQUFXO0FBQUEsTUFDbEIsVUFBVWxTLEVBQXNCO0FBQUEsTUFDaEMsTUFBTTtBQUFBLE1BQ04sR0FBRzBRLEVBQW9CLEtBQUssSUFBSTtBQUFBLElBQzVDLENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSxNQUFNdlQsR0FBSztBQUNQLFVBQU1nVixJQUFpQixPQUFPaFYsS0FBUSxhQUFhQSxJQUFNLE1BQU1BO0FBQy9ELFdBQU8sSUFBSWlWLEdBQVM7QUFBQSxNQUNoQixHQUFHMUIsRUFBb0IsS0FBSyxJQUFJO0FBQUEsTUFDaEMsV0FBVztBQUFBLE1BQ1gsWUFBWXlCO0FBQUEsTUFDWixVQUFVblMsRUFBc0I7QUFBQSxJQUM1QyxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksU0FBUzZRLEdBQWE7QUFDbEIsVUFBTXdCLElBQU8sS0FBSztBQUNsQixXQUFPLElBQUlBLEVBQUs7QUFBQSxNQUNaLEdBQUcsS0FBSztBQUFBLE1BQ1IsYUFBQXhCO0FBQUEsSUFDWixDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksS0FBS3lCLEdBQVE7QUFDVCxXQUFPQyxHQUFZLE9BQU8sTUFBTUQsQ0FBTTtBQUFBLEVBQzlDO0FBQUEsRUFDSSxXQUFXO0FBQ1AsV0FBT0UsR0FBWSxPQUFPLElBQUk7QUFBQSxFQUN0QztBQUFBLEVBQ0ksYUFBYTtBQUNULFdBQU8sS0FBSyxVQUFVLE1BQVMsRUFBRTtBQUFBLEVBQ3pDO0FBQUEsRUFDSSxhQUFhO0FBQ1QsV0FBTyxLQUFLLFVBQVUsSUFBSSxFQUFFO0FBQUEsRUFDcEM7QUFDQTtBQUNBLE1BQU1DLEtBQVksa0JBQ1pDLEtBQWEsZUFDYkMsS0FBWSw2QkFHWkMsS0FBWSwwRkFDWkMsS0FBYyxxQkFDZEMsS0FBVyxvREFDWEMsS0FBZ0IsNFNBYWhCQyxLQUFhLHNGQUliQyxLQUFjO0FBQ3BCLElBQUloUjtBQUVKLE1BQU1pUixLQUFZLHVIQUNaQyxLQUFnQiw0SUFHaEJDLEtBQVkseXBCQUNaQyxLQUFnQiwyckJBRWhCQyxLQUFjLG9FQUVkQyxLQUFpQiwwRUFNakJDLEtBQWtCLHFNQUNsQkMsS0FBWSxJQUFJLE9BQU8sSUFBSUQsRUFBZSxHQUFHO0FBQ25ELFNBQVNFLEdBQWdCcE0sR0FBTTtBQUMzQixNQUFJcU0sSUFBcUI7QUFDekIsRUFBSXJNLEVBQUssWUFDTHFNLElBQXFCLEdBQUdBLENBQWtCLFVBQVVyTSxFQUFLLFNBQVMsTUFFN0RBLEVBQUssYUFBYSxTQUN2QnFNLElBQXFCLEdBQUdBLENBQWtCO0FBRTlDLFFBQU1DLElBQW9CdE0sRUFBSyxZQUFZLE1BQU07QUFDakQsU0FBTyw4QkFBOEJxTSxDQUFrQixJQUFJQyxDQUFpQjtBQUNoRjtBQUNBLFNBQVNDLEdBQVV2TSxHQUFNO0FBQ3JCLFNBQU8sSUFBSSxPQUFPLElBQUlvTSxHQUFnQnBNLENBQUksQ0FBQyxHQUFHO0FBQ2xEO0FBRU8sU0FBU3dNLEdBQWN4TSxHQUFNO0FBQ2hDLE1BQUk3RSxJQUFRLEdBQUcrUSxFQUFlLElBQUlFLEdBQWdCcE0sQ0FBSSxDQUFDO0FBQ3ZELFFBQU15TSxJQUFPLENBQUU7QUFDZixTQUFBQSxFQUFLLEtBQUt6TSxFQUFLLFFBQVEsT0FBTyxHQUFHLEdBQzdCQSxFQUFLLFVBQ0x5TSxFQUFLLEtBQUssc0JBQXNCLEdBQ3BDdFIsSUFBUSxHQUFHQSxDQUFLLElBQUlzUixFQUFLLEtBQUssR0FBRyxDQUFDLEtBQzNCLElBQUksT0FBTyxJQUFJdFIsQ0FBSyxHQUFHO0FBQ2xDO0FBQ0EsU0FBU3VSLEdBQVVDLEdBQUlDLEdBQVM7QUFJNUIsU0FISyxJQUFBQSxNQUFZLFFBQVEsQ0FBQ0EsTUFBWWhCLEdBQVUsS0FBS2UsQ0FBRSxNQUdsREMsTUFBWSxRQUFRLENBQUNBLE1BQVlkLEdBQVUsS0FBS2EsQ0FBRTtBQUkzRDtBQUNBLFNBQVNFLEdBQVdDLEdBQUtDLEdBQUs7QUFDMUIsTUFBSSxDQUFDdkIsR0FBUyxLQUFLc0IsQ0FBRztBQUNsQixXQUFPO0FBQ1gsTUFBSTtBQUNBLFVBQU0sQ0FBQ0UsQ0FBTSxJQUFJRixFQUFJLE1BQU0sR0FBRyxHQUV4Qm5hLElBQVNxYSxFQUNWLFFBQVEsTUFBTSxHQUFHLEVBQ2pCLFFBQVEsTUFBTSxHQUFHLEVBQ2pCLE9BQU9BLEVBQU8sVUFBVyxJQUFLQSxFQUFPLFNBQVMsS0FBTSxHQUFJLEdBQUcsR0FDMURDLElBQVUsS0FBSyxNQUFNLEtBQUt0YSxDQUFNLENBQUM7QUFPdkMsV0FOSSxTQUFPc2EsS0FBWSxZQUFZQSxNQUFZLFFBRTNDLFNBQVNBLE1BQVdBLEtBQUEsZ0JBQUFBLEVBQVMsU0FBUSxTQUVyQyxDQUFDQSxFQUFRLE9BRVRGLEtBQU9FLEVBQVEsUUFBUUY7QUFBQSxFQUduQyxRQUNVO0FBQ0YsV0FBTztBQUFBLEVBQ2Y7QUFDQTtBQUNBLFNBQVNHLEdBQVlQLEdBQUlDLEdBQVM7QUFJOUIsU0FISyxJQUFBQSxNQUFZLFFBQVEsQ0FBQ0EsTUFBWWYsR0FBYyxLQUFLYyxDQUFFLE1BR3REQyxNQUFZLFFBQVEsQ0FBQ0EsTUFBWWIsR0FBYyxLQUFLWSxDQUFFO0FBSS9EO0FBQ08sTUFBTVEsV0FBa0IxRCxFQUFRO0FBQUEsRUFDbkMsT0FBTzVJLEdBQU87QUFLVixRQUpJLEtBQUssS0FBSyxXQUNWQSxFQUFNLE9BQU8sT0FBT0EsRUFBTSxJQUFJLElBRWYsS0FBSyxTQUFTQSxDQUFLLE1BQ25CZ0csRUFBYyxRQUFRO0FBQ3JDLFlBQU1tQixJQUFNLEtBQUssZ0JBQWdCbkgsQ0FBSztBQUN0QyxhQUFBa0gsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixNQUFNaEIsRUFBYTtBQUFBLFFBQ25CLFVBQVVILEVBQWM7QUFBQSxRQUN4QixVQUFVbUIsRUFBSTtBQUFBLE1BQzlCLENBQWEsR0FDTU07QUFBQSxJQUNuQjtBQUNRLFVBQU1ILElBQVMsSUFBSUQsR0FBYTtBQUNoQyxRQUFJRjtBQUNKLGVBQVcvTyxLQUFTLEtBQUssS0FBSztBQUMxQixVQUFJQSxFQUFNLFNBQVM7QUFDZixRQUFJNEgsRUFBTSxLQUFLLFNBQVM1SCxFQUFNLFVBQzFCK08sSUFBTSxLQUFLLGdCQUFnQm5ILEdBQU9tSCxDQUFHLEdBQ3JDRCxFQUFrQkMsR0FBSztBQUFBLFVBQ25CLE1BQU1oQixFQUFhO0FBQUEsVUFDbkIsU0FBUy9OLEVBQU07QUFBQSxVQUNmLE1BQU07QUFBQSxVQUNOLFdBQVc7QUFBQSxVQUNYLE9BQU87QUFBQSxVQUNQLFNBQVNBLEVBQU07QUFBQSxRQUN2QyxDQUFxQixHQUNEa1AsRUFBTyxNQUFPO0FBQUEsZUFHYmxQLEVBQU0sU0FBUztBQUNwQixRQUFJNEgsRUFBTSxLQUFLLFNBQVM1SCxFQUFNLFVBQzFCK08sSUFBTSxLQUFLLGdCQUFnQm5ILEdBQU9tSCxDQUFHLEdBQ3JDRCxFQUFrQkMsR0FBSztBQUFBLFVBQ25CLE1BQU1oQixFQUFhO0FBQUEsVUFDbkIsU0FBUy9OLEVBQU07QUFBQSxVQUNmLE1BQU07QUFBQSxVQUNOLFdBQVc7QUFBQSxVQUNYLE9BQU87QUFBQSxVQUNQLFNBQVNBLEVBQU07QUFBQSxRQUN2QyxDQUFxQixHQUNEa1AsRUFBTyxNQUFPO0FBQUEsZUFHYmxQLEVBQU0sU0FBUyxVQUFVO0FBQzlCLGNBQU1tVSxJQUFTdk0sRUFBTSxLQUFLLFNBQVM1SCxFQUFNLE9BQ25Db1UsSUFBV3hNLEVBQU0sS0FBSyxTQUFTNUgsRUFBTTtBQUMzQyxTQUFJbVUsS0FBVUMsT0FDVnJGLElBQU0sS0FBSyxnQkFBZ0JuSCxHQUFPbUgsQ0FBRyxHQUNqQ29GLElBQ0FyRixFQUFrQkMsR0FBSztBQUFBLFVBQ25CLE1BQU1oQixFQUFhO0FBQUEsVUFDbkIsU0FBUy9OLEVBQU07QUFBQSxVQUNmLE1BQU07QUFBQSxVQUNOLFdBQVc7QUFBQSxVQUNYLE9BQU87QUFBQSxVQUNQLFNBQVNBLEVBQU07QUFBQSxRQUMzQyxDQUF5QixJQUVJb1UsS0FDTHRGLEVBQWtCQyxHQUFLO0FBQUEsVUFDbkIsTUFBTWhCLEVBQWE7QUFBQSxVQUNuQixTQUFTL04sRUFBTTtBQUFBLFVBQ2YsTUFBTTtBQUFBLFVBQ04sV0FBVztBQUFBLFVBQ1gsT0FBTztBQUFBLFVBQ1AsU0FBU0EsRUFBTTtBQUFBLFFBQzNDLENBQXlCLEdBRUxrUCxFQUFPLE1BQU87QUFBQSxNQUVsQyxXQUNxQmxQLEVBQU0sU0FBUztBQUNwQixRQUFLeVMsR0FBVyxLQUFLN0ssRUFBTSxJQUFJLE1BQzNCbUgsSUFBTSxLQUFLLGdCQUFnQm5ILEdBQU9tSCxDQUFHLEdBQ3JDRCxFQUFrQkMsR0FBSztBQUFBLFVBQ25CLFlBQVk7QUFBQSxVQUNaLE1BQU1oQixFQUFhO0FBQUEsVUFDbkIsU0FBUy9OLEVBQU07QUFBQSxRQUN2QyxDQUFxQixHQUNEa1AsRUFBTyxNQUFPO0FBQUEsZUFHYmxQLEVBQU0sU0FBUztBQUNwQixRQUFLMEIsT0FDREEsS0FBYSxJQUFJLE9BQU9nUixJQUFhLEdBQUcsSUFFdkNoUixHQUFXLEtBQUtrRyxFQUFNLElBQUksTUFDM0JtSCxJQUFNLEtBQUssZ0JBQWdCbkgsR0FBT21ILENBQUcsR0FDckNELEVBQWtCQyxHQUFLO0FBQUEsVUFDbkIsWUFBWTtBQUFBLFVBQ1osTUFBTWhCLEVBQWE7QUFBQSxVQUNuQixTQUFTL04sRUFBTTtBQUFBLFFBQ3ZDLENBQXFCLEdBQ0RrUCxFQUFPLE1BQU87QUFBQSxlQUdibFAsRUFBTSxTQUFTO0FBQ3BCLFFBQUtxUyxHQUFVLEtBQUt6SyxFQUFNLElBQUksTUFDMUJtSCxJQUFNLEtBQUssZ0JBQWdCbkgsR0FBT21ILENBQUcsR0FDckNELEVBQWtCQyxHQUFLO0FBQUEsVUFDbkIsWUFBWTtBQUFBLFVBQ1osTUFBTWhCLEVBQWE7QUFBQSxVQUNuQixTQUFTL04sRUFBTTtBQUFBLFFBQ3ZDLENBQXFCLEdBQ0RrUCxFQUFPLE1BQU87QUFBQSxlQUdibFAsRUFBTSxTQUFTO0FBQ3BCLFFBQUtzUyxHQUFZLEtBQUsxSyxFQUFNLElBQUksTUFDNUJtSCxJQUFNLEtBQUssZ0JBQWdCbkgsR0FBT21ILENBQUcsR0FDckNELEVBQWtCQyxHQUFLO0FBQUEsVUFDbkIsWUFBWTtBQUFBLFVBQ1osTUFBTWhCLEVBQWE7QUFBQSxVQUNuQixTQUFTL04sRUFBTTtBQUFBLFFBQ3ZDLENBQXFCLEdBQ0RrUCxFQUFPLE1BQU87QUFBQSxlQUdibFAsRUFBTSxTQUFTO0FBQ3BCLFFBQUtrUyxHQUFVLEtBQUt0SyxFQUFNLElBQUksTUFDMUJtSCxJQUFNLEtBQUssZ0JBQWdCbkgsR0FBT21ILENBQUcsR0FDckNELEVBQWtCQyxHQUFLO0FBQUEsVUFDbkIsWUFBWTtBQUFBLFVBQ1osTUFBTWhCLEVBQWE7QUFBQSxVQUNuQixTQUFTL04sRUFBTTtBQUFBLFFBQ3ZDLENBQXFCLEdBQ0RrUCxFQUFPLE1BQU87QUFBQSxlQUdibFAsRUFBTSxTQUFTO0FBQ3BCLFFBQUttUyxHQUFXLEtBQUt2SyxFQUFNLElBQUksTUFDM0JtSCxJQUFNLEtBQUssZ0JBQWdCbkgsR0FBT21ILENBQUcsR0FDckNELEVBQWtCQyxHQUFLO0FBQUEsVUFDbkIsWUFBWTtBQUFBLFVBQ1osTUFBTWhCLEVBQWE7QUFBQSxVQUNuQixTQUFTL04sRUFBTTtBQUFBLFFBQ3ZDLENBQXFCLEdBQ0RrUCxFQUFPLE1BQU87QUFBQSxlQUdibFAsRUFBTSxTQUFTO0FBQ3BCLFFBQUtvUyxHQUFVLEtBQUt4SyxFQUFNLElBQUksTUFDMUJtSCxJQUFNLEtBQUssZ0JBQWdCbkgsR0FBT21ILENBQUcsR0FDckNELEVBQWtCQyxHQUFLO0FBQUEsVUFDbkIsWUFBWTtBQUFBLFVBQ1osTUFBTWhCLEVBQWE7QUFBQSxVQUNuQixTQUFTL04sRUFBTTtBQUFBLFFBQ3ZDLENBQXFCLEdBQ0RrUCxFQUFPLE1BQU87QUFBQSxlQUdibFAsRUFBTSxTQUFTO0FBQ3BCLFlBQUk7QUFDQSxjQUFJLElBQUk0SCxFQUFNLElBQUk7QUFBQSxRQUN0QyxRQUNzQjtBQUNGLFVBQUFtSCxJQUFNLEtBQUssZ0JBQWdCbkgsR0FBT21ILENBQUcsR0FDckNELEVBQWtCQyxHQUFLO0FBQUEsWUFDbkIsWUFBWTtBQUFBLFlBQ1osTUFBTWhCLEVBQWE7QUFBQSxZQUNuQixTQUFTL04sRUFBTTtBQUFBLFVBQ3ZDLENBQXFCLEdBQ0RrUCxFQUFPLE1BQU87QUFBQSxRQUNsQztBQUFBLFVBRWlCLENBQUlsUCxFQUFNLFNBQVMsV0FDcEJBLEVBQU0sTUFBTSxZQUFZLEdBQ0xBLEVBQU0sTUFBTSxLQUFLNEgsRUFBTSxJQUFJLE1BRTFDbUgsSUFBTSxLQUFLLGdCQUFnQm5ILEdBQU9tSCxDQUFHLEdBQ3JDRCxFQUFrQkMsR0FBSztBQUFBLFFBQ25CLFlBQVk7QUFBQSxRQUNaLE1BQU1oQixFQUFhO0FBQUEsUUFDbkIsU0FBUy9OLEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEa1AsRUFBTyxNQUFPLE1BR2JsUCxFQUFNLFNBQVMsU0FDcEI0SCxFQUFNLE9BQU9BLEVBQU0sS0FBSyxLQUFNLElBRXpCNUgsRUFBTSxTQUFTLGFBQ2Y0SCxFQUFNLEtBQUssU0FBUzVILEVBQU0sT0FBT0EsRUFBTSxRQUFRLE1BQ2hEK08sSUFBTSxLQUFLLGdCQUFnQm5ILEdBQU9tSCxDQUFHLEdBQ3JDRCxFQUFrQkMsR0FBSztBQUFBLFFBQ25CLE1BQU1oQixFQUFhO0FBQUEsUUFDbkIsWUFBWSxFQUFFLFVBQVUvTixFQUFNLE9BQU8sVUFBVUEsRUFBTSxTQUFVO0FBQUEsUUFDL0QsU0FBU0EsRUFBTTtBQUFBLE1BQ3ZDLENBQXFCLEdBQ0RrUCxFQUFPLE1BQU8sS0FHYmxQLEVBQU0sU0FBUyxnQkFDcEI0SCxFQUFNLE9BQU9BLEVBQU0sS0FBSyxZQUFhLElBRWhDNUgsRUFBTSxTQUFTLGdCQUNwQjRILEVBQU0sT0FBT0EsRUFBTSxLQUFLLFlBQWEsSUFFaEM1SCxFQUFNLFNBQVMsZUFDZjRILEVBQU0sS0FBSyxXQUFXNUgsRUFBTSxLQUFLLE1BQ2xDK08sSUFBTSxLQUFLLGdCQUFnQm5ILEdBQU9tSCxDQUFHLEdBQ3JDRCxFQUFrQkMsR0FBSztBQUFBLFFBQ25CLE1BQU1oQixFQUFhO0FBQUEsUUFDbkIsWUFBWSxFQUFFLFlBQVkvTixFQUFNLE1BQU87QUFBQSxRQUN2QyxTQUFTQSxFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRGtQLEVBQU8sTUFBTyxLQUdibFAsRUFBTSxTQUFTLGFBQ2Y0SCxFQUFNLEtBQUssU0FBUzVILEVBQU0sS0FBSyxNQUNoQytPLElBQU0sS0FBSyxnQkFBZ0JuSCxHQUFPbUgsQ0FBRyxHQUNyQ0QsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixNQUFNaEIsRUFBYTtBQUFBLFFBQ25CLFlBQVksRUFBRSxVQUFVL04sRUFBTSxNQUFPO0FBQUEsUUFDckMsU0FBU0EsRUFBTTtBQUFBLE1BQ3ZDLENBQXFCLEdBQ0RrUCxFQUFPLE1BQU8sS0FHYmxQLEVBQU0sU0FBUyxhQUNOdVQsR0FBY3ZULENBQUssRUFDdEIsS0FBSzRILEVBQU0sSUFBSSxNQUN0Qm1ILElBQU0sS0FBSyxnQkFBZ0JuSCxHQUFPbUgsQ0FBRyxHQUNyQ0QsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixNQUFNaEIsRUFBYTtBQUFBLFFBQ25CLFlBQVk7QUFBQSxRQUNaLFNBQVMvTixFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRGtQLEVBQU8sTUFBTyxLQUdibFAsRUFBTSxTQUFTLFNBQ05rVCxHQUNILEtBQUt0TCxFQUFNLElBQUksTUFDdEJtSCxJQUFNLEtBQUssZ0JBQWdCbkgsR0FBT21ILENBQUcsR0FDckNELEVBQWtCQyxHQUFLO0FBQUEsUUFDbkIsTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixZQUFZO0FBQUEsUUFDWixTQUFTL04sRUFBTTtBQUFBLE1BQ3ZDLENBQXFCLEdBQ0RrUCxFQUFPLE1BQU8sS0FHYmxQLEVBQU0sU0FBUyxTQUNOc1QsR0FBVXRULENBQUssRUFDbEIsS0FBSzRILEVBQU0sSUFBSSxNQUN0Qm1ILElBQU0sS0FBSyxnQkFBZ0JuSCxHQUFPbUgsQ0FBRyxHQUNyQ0QsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixNQUFNaEIsRUFBYTtBQUFBLFFBQ25CLFlBQVk7QUFBQSxRQUNaLFNBQVMvTixFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRGtQLEVBQU8sTUFBTyxLQUdibFAsRUFBTSxTQUFTLGFBQ2Z3UyxHQUFjLEtBQUs1SyxFQUFNLElBQUksTUFDOUJtSCxJQUFNLEtBQUssZ0JBQWdCbkgsR0FBT21ILENBQUcsR0FDckNELEVBQWtCQyxHQUFLO0FBQUEsUUFDbkIsWUFBWTtBQUFBLFFBQ1osTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixTQUFTL04sRUFBTTtBQUFBLE1BQ3ZDLENBQXFCLEdBQ0RrUCxFQUFPLE1BQU8sS0FHYmxQLEVBQU0sU0FBUyxPQUNmeVQsR0FBVTdMLEVBQU0sTUFBTTVILEVBQU0sT0FBTyxNQUNwQytPLElBQU0sS0FBSyxnQkFBZ0JuSCxHQUFPbUgsQ0FBRyxHQUNyQ0QsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixZQUFZO0FBQUEsUUFDWixNQUFNaEIsRUFBYTtBQUFBLFFBQ25CLFNBQVMvTixFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRGtQLEVBQU8sTUFBTyxLQUdibFAsRUFBTSxTQUFTLFFBQ2Y0VCxHQUFXaE0sRUFBTSxNQUFNNUgsRUFBTSxHQUFHLE1BQ2pDK08sSUFBTSxLQUFLLGdCQUFnQm5ILEdBQU9tSCxDQUFHLEdBQ3JDRCxFQUFrQkMsR0FBSztBQUFBLFFBQ25CLFlBQVk7QUFBQSxRQUNaLE1BQU1oQixFQUFhO0FBQUEsUUFDbkIsU0FBUy9OLEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEa1AsRUFBTyxNQUFPLEtBR2JsUCxFQUFNLFNBQVMsU0FDZmlVLEdBQVlyTSxFQUFNLE1BQU01SCxFQUFNLE9BQU8sTUFDdEMrTyxJQUFNLEtBQUssZ0JBQWdCbkgsR0FBT21ILENBQUcsR0FDckNELEVBQWtCQyxHQUFLO0FBQUEsUUFDbkIsWUFBWTtBQUFBLFFBQ1osTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixTQUFTL04sRUFBTTtBQUFBLE1BQ3ZDLENBQXFCLEdBQ0RrUCxFQUFPLE1BQU8sS0FHYmxQLEVBQU0sU0FBUyxXQUNmK1MsR0FBWSxLQUFLbkwsRUFBTSxJQUFJLE1BQzVCbUgsSUFBTSxLQUFLLGdCQUFnQm5ILEdBQU9tSCxDQUFHLEdBQ3JDRCxFQUFrQkMsR0FBSztBQUFBLFFBQ25CLFlBQVk7QUFBQSxRQUNaLE1BQU1oQixFQUFhO0FBQUEsUUFDbkIsU0FBUy9OLEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEa1AsRUFBTyxNQUFPLEtBR2JsUCxFQUFNLFNBQVMsY0FDZmdULEdBQWUsS0FBS3BMLEVBQU0sSUFBSSxNQUMvQm1ILElBQU0sS0FBSyxnQkFBZ0JuSCxHQUFPbUgsQ0FBRyxHQUNyQ0QsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixZQUFZO0FBQUEsUUFDWixNQUFNaEIsRUFBYTtBQUFBLFFBQ25CLFNBQVMvTixFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRGtQLEVBQU8sTUFBTyxLQUlsQjlSLEVBQUssWUFBWTRDLENBQUs7QUFHOUIsV0FBTyxFQUFFLFFBQVFrUCxFQUFPLE9BQU8sT0FBT3RILEVBQU0sS0FBTTtBQUFBLEVBQzFEO0FBQUEsRUFDSSxPQUFPMUYsR0FBT21TLEdBQVk3VSxHQUFTO0FBQy9CLFdBQU8sS0FBSyxXQUFXLENBQUNzTyxNQUFTNUwsRUFBTSxLQUFLNEwsQ0FBSSxHQUFHO0FBQUEsTUFDL0MsWUFBQXVHO0FBQUEsTUFDQSxNQUFNdEcsRUFBYTtBQUFBLE1BQ25CLEdBQUd4TyxFQUFVLFNBQVNDLENBQU87QUFBQSxJQUN6QyxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksVUFBVVEsR0FBTztBQUNiLFdBQU8sSUFBSWtVLEdBQVU7QUFBQSxNQUNqQixHQUFHLEtBQUs7QUFBQSxNQUNSLFFBQVEsQ0FBQyxHQUFHLEtBQUssS0FBSyxRQUFRbFUsQ0FBSztBQUFBLElBQy9DLENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSxNQUFNUixHQUFTO0FBQ1gsV0FBTyxLQUFLLFVBQVUsRUFBRSxNQUFNLFNBQVMsR0FBR0QsRUFBVSxTQUFTQyxDQUFPLEdBQUc7QUFBQSxFQUMvRTtBQUFBLEVBQ0ksSUFBSUEsR0FBUztBQUNULFdBQU8sS0FBSyxVQUFVLEVBQUUsTUFBTSxPQUFPLEdBQUdELEVBQVUsU0FBU0MsQ0FBTyxHQUFHO0FBQUEsRUFDN0U7QUFBQSxFQUNJLE1BQU1BLEdBQVM7QUFDWCxXQUFPLEtBQUssVUFBVSxFQUFFLE1BQU0sU0FBUyxHQUFHRCxFQUFVLFNBQVNDLENBQU8sR0FBRztBQUFBLEVBQy9FO0FBQUEsRUFDSSxLQUFLQSxHQUFTO0FBQ1YsV0FBTyxLQUFLLFVBQVUsRUFBRSxNQUFNLFFBQVEsR0FBR0QsRUFBVSxTQUFTQyxDQUFPLEdBQUc7QUFBQSxFQUM5RTtBQUFBLEVBQ0ksT0FBT0EsR0FBUztBQUNaLFdBQU8sS0FBSyxVQUFVLEVBQUUsTUFBTSxVQUFVLEdBQUdELEVBQVUsU0FBU0MsQ0FBTyxHQUFHO0FBQUEsRUFDaEY7QUFBQSxFQUNJLEtBQUtBLEdBQVM7QUFDVixXQUFPLEtBQUssVUFBVSxFQUFFLE1BQU0sUUFBUSxHQUFHRCxFQUFVLFNBQVNDLENBQU8sR0FBRztBQUFBLEVBQzlFO0FBQUEsRUFDSSxNQUFNQSxHQUFTO0FBQ1gsV0FBTyxLQUFLLFVBQVUsRUFBRSxNQUFNLFNBQVMsR0FBR0QsRUFBVSxTQUFTQyxDQUFPLEdBQUc7QUFBQSxFQUMvRTtBQUFBLEVBQ0ksS0FBS0EsR0FBUztBQUNWLFdBQU8sS0FBSyxVQUFVLEVBQUUsTUFBTSxRQUFRLEdBQUdELEVBQVUsU0FBU0MsQ0FBTyxHQUFHO0FBQUEsRUFDOUU7QUFBQSxFQUNJLE9BQU9BLEdBQVM7QUFDWixXQUFPLEtBQUssVUFBVSxFQUFFLE1BQU0sVUFBVSxHQUFHRCxFQUFVLFNBQVNDLENBQU8sR0FBRztBQUFBLEVBQ2hGO0FBQUEsRUFDSSxVQUFVQSxHQUFTO0FBRWYsV0FBTyxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixHQUFHRCxFQUFVLFNBQVNDLENBQU87QUFBQSxJQUN6QyxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksSUFBSXJELEdBQVM7QUFDVCxXQUFPLEtBQUssVUFBVSxFQUFFLE1BQU0sT0FBTyxHQUFHb0QsRUFBVSxTQUFTcEQsQ0FBTyxHQUFHO0FBQUEsRUFDN0U7QUFBQSxFQUNJLEdBQUdBLEdBQVM7QUFDUixXQUFPLEtBQUssVUFBVSxFQUFFLE1BQU0sTUFBTSxHQUFHb0QsRUFBVSxTQUFTcEQsQ0FBTyxHQUFHO0FBQUEsRUFDNUU7QUFBQSxFQUNJLEtBQUtBLEdBQVM7QUFDVixXQUFPLEtBQUssVUFBVSxFQUFFLE1BQU0sUUFBUSxHQUFHb0QsRUFBVSxTQUFTcEQsQ0FBTyxHQUFHO0FBQUEsRUFDOUU7QUFBQSxFQUNJLFNBQVNBLEdBQVM7QUFDZCxXQUFJLE9BQU9BLEtBQVksV0FDWixLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixXQUFXO0FBQUEsTUFDWCxRQUFRO0FBQUEsTUFDUixPQUFPO0FBQUEsTUFDUCxTQUFTQTtBQUFBLElBQ3pCLENBQWEsSUFFRSxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixXQUFXLFFBQU9BLEtBQUEsZ0JBQUFBLEVBQVMsYUFBYyxNQUFjLE9BQU9BLEtBQUEsZ0JBQUFBLEVBQVM7QUFBQSxNQUN2RSxTQUFRQSxLQUFBLGdCQUFBQSxFQUFTLFdBQVU7QUFBQSxNQUMzQixRQUFPQSxLQUFBLGdCQUFBQSxFQUFTLFVBQVM7QUFBQSxNQUN6QixHQUFHb0QsRUFBVSxTQUFTcEQsS0FBQSxnQkFBQUEsRUFBUyxPQUFPO0FBQUEsSUFDbEQsQ0FBUztBQUFBLEVBQ1Q7QUFBQSxFQUNJLEtBQUtxRCxHQUFTO0FBQ1YsV0FBTyxLQUFLLFVBQVUsRUFBRSxNQUFNLFFBQVEsU0FBQUEsRUFBTyxDQUFFO0FBQUEsRUFDdkQ7QUFBQSxFQUNJLEtBQUtyRCxHQUFTO0FBQ1YsV0FBSSxPQUFPQSxLQUFZLFdBQ1osS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sV0FBVztBQUFBLE1BQ1gsU0FBU0E7QUFBQSxJQUN6QixDQUFhLElBRUUsS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sV0FBVyxRQUFPQSxLQUFBLGdCQUFBQSxFQUFTLGFBQWMsTUFBYyxPQUFPQSxLQUFBLGdCQUFBQSxFQUFTO0FBQUEsTUFDdkUsR0FBR29ELEVBQVUsU0FBU3BELEtBQUEsZ0JBQUFBLEVBQVMsT0FBTztBQUFBLElBQ2xELENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSxTQUFTcUQsR0FBUztBQUNkLFdBQU8sS0FBSyxVQUFVLEVBQUUsTUFBTSxZQUFZLEdBQUdELEVBQVUsU0FBU0MsQ0FBTyxHQUFHO0FBQUEsRUFDbEY7QUFBQSxFQUNJLE1BQU0wQyxHQUFPMUMsR0FBUztBQUNsQixXQUFPLEtBQUssVUFBVTtBQUFBLE1BQ2xCLE1BQU07QUFBQSxNQUNOLE9BQU8wQztBQUFBLE1BQ1AsR0FBRzNDLEVBQVUsU0FBU0MsQ0FBTztBQUFBLElBQ3pDLENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSxTQUFTckMsR0FBT2hCLEdBQVM7QUFDckIsV0FBTyxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixPQUFPZ0I7QUFBQSxNQUNQLFVBQVVoQixLQUFBLGdCQUFBQSxFQUFTO0FBQUEsTUFDbkIsR0FBR29ELEVBQVUsU0FBU3BELEtBQUEsZ0JBQUFBLEVBQVMsT0FBTztBQUFBLElBQ2xELENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSxXQUFXZ0IsR0FBT3FDLEdBQVM7QUFDdkIsV0FBTyxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixPQUFPckM7QUFBQSxNQUNQLEdBQUdvQyxFQUFVLFNBQVNDLENBQU87QUFBQSxJQUN6QyxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksU0FBU3JDLEdBQU9xQyxHQUFTO0FBQ3JCLFdBQU8sS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sT0FBT3JDO0FBQUEsTUFDUCxHQUFHb0MsRUFBVSxTQUFTQyxDQUFPO0FBQUEsSUFDekMsQ0FBUztBQUFBLEVBQ1Q7QUFBQSxFQUNJLElBQUk4VSxHQUFXOVUsR0FBUztBQUNwQixXQUFPLEtBQUssVUFBVTtBQUFBLE1BQ2xCLE1BQU07QUFBQSxNQUNOLE9BQU84VTtBQUFBLE1BQ1AsR0FBRy9VLEVBQVUsU0FBU0MsQ0FBTztBQUFBLElBQ3pDLENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSxJQUFJK1UsR0FBVy9VLEdBQVM7QUFDcEIsV0FBTyxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixPQUFPK1U7QUFBQSxNQUNQLEdBQUdoVixFQUFVLFNBQVNDLENBQU87QUFBQSxJQUN6QyxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksT0FBTzVGLEdBQUs0RixHQUFTO0FBQ2pCLFdBQU8sS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sT0FBTzVGO0FBQUEsTUFDUCxHQUFHMkYsRUFBVSxTQUFTQyxDQUFPO0FBQUEsSUFDekMsQ0FBUztBQUFBLEVBQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlJLFNBQVNBLEdBQVM7QUFDZCxXQUFPLEtBQUssSUFBSSxHQUFHRCxFQUFVLFNBQVNDLENBQU8sQ0FBQztBQUFBLEVBQ3REO0FBQUEsRUFDSSxPQUFPO0FBQ0gsV0FBTyxJQUFJMFUsR0FBVTtBQUFBLE1BQ2pCLEdBQUcsS0FBSztBQUFBLE1BQ1IsUUFBUSxDQUFDLEdBQUcsS0FBSyxLQUFLLFFBQVEsRUFBRSxNQUFNLFFBQVE7QUFBQSxJQUMxRCxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksY0FBYztBQUNWLFdBQU8sSUFBSUEsR0FBVTtBQUFBLE1BQ2pCLEdBQUcsS0FBSztBQUFBLE1BQ1IsUUFBUSxDQUFDLEdBQUcsS0FBSyxLQUFLLFFBQVEsRUFBRSxNQUFNLGVBQWU7QUFBQSxJQUNqRSxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksY0FBYztBQUNWLFdBQU8sSUFBSUEsR0FBVTtBQUFBLE1BQ2pCLEdBQUcsS0FBSztBQUFBLE1BQ1IsUUFBUSxDQUFDLEdBQUcsS0FBSyxLQUFLLFFBQVEsRUFBRSxNQUFNLGVBQWU7QUFBQSxJQUNqRSxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksSUFBSSxhQUFhO0FBQ2IsV0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBSyxDQUFDTSxNQUFPQSxFQUFHLFNBQVMsVUFBVTtBQUFBLEVBQ3JFO0FBQUEsRUFDSSxJQUFJLFNBQVM7QUFDVCxXQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFLLENBQUNBLE1BQU9BLEVBQUcsU0FBUyxNQUFNO0FBQUEsRUFDakU7QUFBQSxFQUNJLElBQUksU0FBUztBQUNULFdBQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQUssQ0FBQ0EsTUFBT0EsRUFBRyxTQUFTLE1BQU07QUFBQSxFQUNqRTtBQUFBLEVBQ0ksSUFBSSxhQUFhO0FBQ2IsV0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBSyxDQUFDQSxNQUFPQSxFQUFHLFNBQVMsVUFBVTtBQUFBLEVBQ3JFO0FBQUEsRUFDSSxJQUFJLFVBQVU7QUFDVixXQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFLLENBQUNBLE1BQU9BLEVBQUcsU0FBUyxPQUFPO0FBQUEsRUFDbEU7QUFBQSxFQUNJLElBQUksUUFBUTtBQUNSLFdBQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQUssQ0FBQ0EsTUFBT0EsRUFBRyxTQUFTLEtBQUs7QUFBQSxFQUNoRTtBQUFBLEVBQ0ksSUFBSSxVQUFVO0FBQ1YsV0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBSyxDQUFDQSxNQUFPQSxFQUFHLFNBQVMsT0FBTztBQUFBLEVBQ2xFO0FBQUEsRUFDSSxJQUFJLFNBQVM7QUFDVCxXQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFLLENBQUNBLE1BQU9BLEVBQUcsU0FBUyxNQUFNO0FBQUEsRUFDakU7QUFBQSxFQUNJLElBQUksV0FBVztBQUNYLFdBQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQUssQ0FBQ0EsTUFBT0EsRUFBRyxTQUFTLFFBQVE7QUFBQSxFQUNuRTtBQUFBLEVBQ0ksSUFBSSxTQUFTO0FBQ1QsV0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBSyxDQUFDQSxNQUFPQSxFQUFHLFNBQVMsTUFBTTtBQUFBLEVBQ2pFO0FBQUEsRUFDSSxJQUFJLFVBQVU7QUFDVixXQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFLLENBQUNBLE1BQU9BLEVBQUcsU0FBUyxPQUFPO0FBQUEsRUFDbEU7QUFBQSxFQUNJLElBQUksU0FBUztBQUNULFdBQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQUssQ0FBQ0EsTUFBT0EsRUFBRyxTQUFTLE1BQU07QUFBQSxFQUNqRTtBQUFBLEVBQ0ksSUFBSSxPQUFPO0FBQ1AsV0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBSyxDQUFDQSxNQUFPQSxFQUFHLFNBQVMsSUFBSTtBQUFBLEVBQy9EO0FBQUEsRUFDSSxJQUFJLFNBQVM7QUFDVCxXQUFPLENBQUMsQ0FBQyxLQUFLLEtBQUssT0FBTyxLQUFLLENBQUNBLE1BQU9BLEVBQUcsU0FBUyxNQUFNO0FBQUEsRUFDakU7QUFBQSxFQUNJLElBQUksV0FBVztBQUNYLFdBQU8sQ0FBQyxDQUFDLEtBQUssS0FBSyxPQUFPLEtBQUssQ0FBQ0EsTUFBT0EsRUFBRyxTQUFTLFFBQVE7QUFBQSxFQUNuRTtBQUFBLEVBQ0ksSUFBSSxjQUFjO0FBRWQsV0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBSyxDQUFDQSxNQUFPQSxFQUFHLFNBQVMsV0FBVztBQUFBLEVBQ3RFO0FBQUEsRUFDSSxJQUFJLFlBQVk7QUFDWixRQUFJQyxJQUFNO0FBQ1YsZUFBV0QsS0FBTSxLQUFLLEtBQUs7QUFDdkIsTUFBSUEsRUFBRyxTQUFTLFVBQ1JDLE1BQVEsUUFBUUQsRUFBRyxRQUFRQyxPQUMzQkEsSUFBTUQsRUFBRztBQUdyQixXQUFPQztBQUFBLEVBQ2Y7QUFBQSxFQUNJLElBQUksWUFBWTtBQUNaLFFBQUlDLElBQU07QUFDVixlQUFXRixLQUFNLEtBQUssS0FBSztBQUN2QixNQUFJQSxFQUFHLFNBQVMsVUFDUkUsTUFBUSxRQUFRRixFQUFHLFFBQVFFLE9BQzNCQSxJQUFNRixFQUFHO0FBR3JCLFdBQU9FO0FBQUEsRUFDZjtBQUNBO0FBQ0FSLEdBQVUsU0FBUyxDQUFDNUYsTUFDVCxJQUFJNEYsR0FBVTtBQUFBLEVBQ2pCLFFBQVEsQ0FBRTtBQUFBLEVBQ1YsVUFBVXpVLEVBQXNCO0FBQUEsRUFDaEMsU0FBUTZPLEtBQUEsZ0JBQUFBLEVBQVEsV0FBVTtBQUFBLEVBQzFCLEdBQUc2QixFQUFvQjdCLENBQU07QUFDckMsQ0FBSztBQUdMLFNBQVNxRyxHQUFtQnhXLEdBQUt5VyxHQUFNO0FBQ25DLFFBQU1DLEtBQWUxVyxFQUFJLFNBQVUsRUFBQyxNQUFNLEdBQUcsRUFBRSxDQUFDLEtBQUssSUFBSSxRQUNuRDJXLEtBQWdCRixFQUFLLFNBQVUsRUFBQyxNQUFNLEdBQUcsRUFBRSxDQUFDLEtBQUssSUFBSSxRQUNyREcsSUFBV0YsSUFBY0MsSUFBZUQsSUFBY0MsR0FDdERFLElBQVMsT0FBTyxTQUFTN1csRUFBSSxRQUFRNFcsQ0FBUSxFQUFFLFFBQVEsS0FBSyxFQUFFLENBQUMsR0FDL0RFLElBQVUsT0FBTyxTQUFTTCxFQUFLLFFBQVFHLENBQVEsRUFBRSxRQUFRLEtBQUssRUFBRSxDQUFDO0FBQ3ZFLFNBQVFDLElBQVNDLElBQVcsTUFBTUY7QUFDdEM7QUFDTyxNQUFNRyxXQUFrQjFFLEVBQVE7QUFBQSxFQUNuQyxjQUFjO0FBQ1YsVUFBTSxHQUFHLFNBQVMsR0FDbEIsS0FBSyxNQUFNLEtBQUssS0FDaEIsS0FBSyxNQUFNLEtBQUssS0FDaEIsS0FBSyxPQUFPLEtBQUs7QUFBQSxFQUN6QjtBQUFBLEVBQ0ksT0FBTzVJLEdBQU87QUFLVixRQUpJLEtBQUssS0FBSyxXQUNWQSxFQUFNLE9BQU8sT0FBT0EsRUFBTSxJQUFJLElBRWYsS0FBSyxTQUFTQSxDQUFLLE1BQ25CZ0csRUFBYyxRQUFRO0FBQ3JDLFlBQU1tQixJQUFNLEtBQUssZ0JBQWdCbkgsQ0FBSztBQUN0QyxhQUFBa0gsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixNQUFNaEIsRUFBYTtBQUFBLFFBQ25CLFVBQVVILEVBQWM7QUFBQSxRQUN4QixVQUFVbUIsRUFBSTtBQUFBLE1BQzlCLENBQWEsR0FDTU07QUFBQSxJQUNuQjtBQUNRLFFBQUlOO0FBQ0osVUFBTUcsSUFBUyxJQUFJRCxHQUFhO0FBQ2hDLGVBQVdqUCxLQUFTLEtBQUssS0FBSztBQUMxQixNQUFJQSxFQUFNLFNBQVMsUUFDVjVDLEVBQUssVUFBVXdLLEVBQU0sSUFBSSxNQUMxQm1ILElBQU0sS0FBSyxnQkFBZ0JuSCxHQUFPbUgsQ0FBRyxHQUNyQ0QsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixNQUFNaEIsRUFBYTtBQUFBLFFBQ25CLFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLFNBQVMvTixFQUFNO0FBQUEsTUFDdkMsQ0FBcUIsR0FDRGtQLEVBQU8sTUFBTyxLQUdibFAsRUFBTSxTQUFTLFNBQ0hBLEVBQU0sWUFBWTRILEVBQU0sT0FBTzVILEVBQU0sUUFBUTRILEVBQU0sUUFBUTVILEVBQU0sV0FFOUUrTyxJQUFNLEtBQUssZ0JBQWdCbkgsR0FBT21ILENBQUcsR0FDckNELEVBQWtCQyxHQUFLO0FBQUEsUUFDbkIsTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixTQUFTL04sRUFBTTtBQUFBLFFBQ2YsTUFBTTtBQUFBLFFBQ04sV0FBV0EsRUFBTTtBQUFBLFFBQ2pCLE9BQU87QUFBQSxRQUNQLFNBQVNBLEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEa1AsRUFBTyxNQUFPLEtBR2JsUCxFQUFNLFNBQVMsU0FDTEEsRUFBTSxZQUFZNEgsRUFBTSxPQUFPNUgsRUFBTSxRQUFRNEgsRUFBTSxRQUFRNUgsRUFBTSxXQUU1RStPLElBQU0sS0FBSyxnQkFBZ0JuSCxHQUFPbUgsQ0FBRyxHQUNyQ0QsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixNQUFNaEIsRUFBYTtBQUFBLFFBQ25CLFNBQVMvTixFQUFNO0FBQUEsUUFDZixNQUFNO0FBQUEsUUFDTixXQUFXQSxFQUFNO0FBQUEsUUFDakIsT0FBTztBQUFBLFFBQ1AsU0FBU0EsRUFBTTtBQUFBLE1BQ3ZDLENBQXFCLEdBQ0RrUCxFQUFPLE1BQU8sS0FHYmxQLEVBQU0sU0FBUyxlQUNoQjJVLEdBQW1CL00sRUFBTSxNQUFNNUgsRUFBTSxLQUFLLE1BQU0sTUFDaEQrTyxJQUFNLEtBQUssZ0JBQWdCbkgsR0FBT21ILENBQUcsR0FDckNELEVBQWtCQyxHQUFLO0FBQUEsUUFDbkIsTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixZQUFZL04sRUFBTTtBQUFBLFFBQ2xCLFNBQVNBLEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEa1AsRUFBTyxNQUFPLEtBR2JsUCxFQUFNLFNBQVMsV0FDZixPQUFPLFNBQVM0SCxFQUFNLElBQUksTUFDM0JtSCxJQUFNLEtBQUssZ0JBQWdCbkgsR0FBT21ILENBQUcsR0FDckNELEVBQWtCQyxHQUFLO0FBQUEsUUFDbkIsTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixTQUFTL04sRUFBTTtBQUFBLE1BQ3ZDLENBQXFCLEdBQ0RrUCxFQUFPLE1BQU8sS0FJbEI5UixFQUFLLFlBQVk0QyxDQUFLO0FBRzlCLFdBQU8sRUFBRSxRQUFRa1AsRUFBTyxPQUFPLE9BQU90SCxFQUFNLEtBQU07QUFBQSxFQUMxRDtBQUFBLEVBQ0ksSUFBSXpLLEdBQU9xQyxHQUFTO0FBQ2hCLFdBQU8sS0FBSyxTQUFTLE9BQU9yQyxHQUFPLElBQU1vQyxFQUFVLFNBQVNDLENBQU8sQ0FBQztBQUFBLEVBQzVFO0FBQUEsRUFDSSxHQUFHckMsR0FBT3FDLEdBQVM7QUFDZixXQUFPLEtBQUssU0FBUyxPQUFPckMsR0FBTyxJQUFPb0MsRUFBVSxTQUFTQyxDQUFPLENBQUM7QUFBQSxFQUM3RTtBQUFBLEVBQ0ksSUFBSXJDLEdBQU9xQyxHQUFTO0FBQ2hCLFdBQU8sS0FBSyxTQUFTLE9BQU9yQyxHQUFPLElBQU1vQyxFQUFVLFNBQVNDLENBQU8sQ0FBQztBQUFBLEVBQzVFO0FBQUEsRUFDSSxHQUFHckMsR0FBT3FDLEdBQVM7QUFDZixXQUFPLEtBQUssU0FBUyxPQUFPckMsR0FBTyxJQUFPb0MsRUFBVSxTQUFTQyxDQUFPLENBQUM7QUFBQSxFQUM3RTtBQUFBLEVBQ0ksU0FBUzJWLEdBQU1oWSxHQUFPaVksR0FBVzVWLEdBQVM7QUFDdEMsV0FBTyxJQUFJMFYsR0FBVTtBQUFBLE1BQ2pCLEdBQUcsS0FBSztBQUFBLE1BQ1IsUUFBUTtBQUFBLFFBQ0osR0FBRyxLQUFLLEtBQUs7QUFBQSxRQUNiO0FBQUEsVUFDSSxNQUFBQztBQUFBLFVBQ0EsT0FBQWhZO0FBQUEsVUFDQSxXQUFBaVk7QUFBQSxVQUNBLFNBQVM3VixFQUFVLFNBQVNDLENBQU87QUFBQSxRQUN0QztBQUFBLE1BQ0o7QUFBQSxJQUNiLENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSxVQUFVUSxHQUFPO0FBQ2IsV0FBTyxJQUFJa1YsR0FBVTtBQUFBLE1BQ2pCLEdBQUcsS0FBSztBQUFBLE1BQ1IsUUFBUSxDQUFDLEdBQUcsS0FBSyxLQUFLLFFBQVFsVixDQUFLO0FBQUEsSUFDL0MsQ0FBUztBQUFBLEVBQ1Q7QUFBQSxFQUNJLElBQUlSLEdBQVM7QUFDVCxXQUFPLEtBQUssVUFBVTtBQUFBLE1BQ2xCLE1BQU07QUFBQSxNQUNOLFNBQVNELEVBQVUsU0FBU0MsQ0FBTztBQUFBLElBQy9DLENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSxTQUFTQSxHQUFTO0FBQ2QsV0FBTyxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixPQUFPO0FBQUEsTUFDUCxXQUFXO0FBQUEsTUFDWCxTQUFTRCxFQUFVLFNBQVNDLENBQU87QUFBQSxJQUMvQyxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksU0FBU0EsR0FBUztBQUNkLFdBQU8sS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sT0FBTztBQUFBLE1BQ1AsV0FBVztBQUFBLE1BQ1gsU0FBU0QsRUFBVSxTQUFTQyxDQUFPO0FBQUEsSUFDL0MsQ0FBUztBQUFBLEVBQ1Q7QUFBQSxFQUNJLFlBQVlBLEdBQVM7QUFDakIsV0FBTyxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixPQUFPO0FBQUEsTUFDUCxXQUFXO0FBQUEsTUFDWCxTQUFTRCxFQUFVLFNBQVNDLENBQU87QUFBQSxJQUMvQyxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksWUFBWUEsR0FBUztBQUNqQixXQUFPLEtBQUssVUFBVTtBQUFBLE1BQ2xCLE1BQU07QUFBQSxNQUNOLE9BQU87QUFBQSxNQUNQLFdBQVc7QUFBQSxNQUNYLFNBQVNELEVBQVUsU0FBU0MsQ0FBTztBQUFBLElBQy9DLENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSxXQUFXckMsR0FBT3FDLEdBQVM7QUFDdkIsV0FBTyxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixPQUFPckM7QUFBQSxNQUNQLFNBQVNvQyxFQUFVLFNBQVNDLENBQU87QUFBQSxJQUMvQyxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksT0FBT0EsR0FBUztBQUNaLFdBQU8sS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sU0FBU0QsRUFBVSxTQUFTQyxDQUFPO0FBQUEsSUFDL0MsQ0FBUztBQUFBLEVBQ1Q7QUFBQSxFQUNJLEtBQUtBLEdBQVM7QUFDVixXQUFPLEtBQUssVUFBVTtBQUFBLE1BQ2xCLE1BQU07QUFBQSxNQUNOLFdBQVc7QUFBQSxNQUNYLE9BQU8sT0FBTztBQUFBLE1BQ2QsU0FBU0QsRUFBVSxTQUFTQyxDQUFPO0FBQUEsSUFDdEMsQ0FBQSxFQUFFLFVBQVU7QUFBQSxNQUNULE1BQU07QUFBQSxNQUNOLFdBQVc7QUFBQSxNQUNYLE9BQU8sT0FBTztBQUFBLE1BQ2QsU0FBU0QsRUFBVSxTQUFTQyxDQUFPO0FBQUEsSUFDL0MsQ0FBUztBQUFBLEVBQ1Q7QUFBQSxFQUNJLElBQUksV0FBVztBQUNYLFFBQUlpVixJQUFNO0FBQ1YsZUFBV0QsS0FBTSxLQUFLLEtBQUs7QUFDdkIsTUFBSUEsRUFBRyxTQUFTLFVBQ1JDLE1BQVEsUUFBUUQsRUFBRyxRQUFRQyxPQUMzQkEsSUFBTUQsRUFBRztBQUdyQixXQUFPQztBQUFBLEVBQ2Y7QUFBQSxFQUNJLElBQUksV0FBVztBQUNYLFFBQUlDLElBQU07QUFDVixlQUFXRixLQUFNLEtBQUssS0FBSztBQUN2QixNQUFJQSxFQUFHLFNBQVMsVUFDUkUsTUFBUSxRQUFRRixFQUFHLFFBQVFFLE9BQzNCQSxJQUFNRixFQUFHO0FBR3JCLFdBQU9FO0FBQUEsRUFDZjtBQUFBLEVBQ0ksSUFBSSxRQUFRO0FBQ1IsV0FBTyxDQUFDLENBQUMsS0FBSyxLQUFLLE9BQU8sS0FBSyxDQUFDRixNQUFPQSxFQUFHLFNBQVMsU0FBVUEsRUFBRyxTQUFTLGdCQUFnQnBYLEVBQUssVUFBVW9YLEVBQUcsS0FBSyxDQUFFO0FBQUEsRUFDMUg7QUFBQSxFQUNJLElBQUksV0FBVztBQUNYLFFBQUlFLElBQU0sTUFDTkQsSUFBTTtBQUNWLGVBQVdELEtBQU0sS0FBSyxLQUFLLFFBQVE7QUFDL0IsVUFBSUEsRUFBRyxTQUFTLFlBQVlBLEVBQUcsU0FBUyxTQUFTQSxFQUFHLFNBQVM7QUFDekQsZUFBTztBQUVOLE1BQUlBLEVBQUcsU0FBUyxTQUNiQyxNQUFRLFFBQVFELEVBQUcsUUFBUUMsT0FDM0JBLElBQU1ELEVBQUcsU0FFUkEsRUFBRyxTQUFTLFVBQ2JFLE1BQVEsUUFBUUYsRUFBRyxRQUFRRSxPQUMzQkEsSUFBTUYsRUFBRztBQUFBLElBRTdCO0FBQ1EsV0FBTyxPQUFPLFNBQVNDLENBQUcsS0FBSyxPQUFPLFNBQVNDLENBQUc7QUFBQSxFQUMxRDtBQUNBO0FBQ0FRLEdBQVUsU0FBUyxDQUFDNUcsTUFDVCxJQUFJNEcsR0FBVTtBQUFBLEVBQ2pCLFFBQVEsQ0FBRTtBQUFBLEVBQ1YsVUFBVXpWLEVBQXNCO0FBQUEsRUFDaEMsU0FBUTZPLEtBQUEsZ0JBQUFBLEVBQVEsV0FBVTtBQUFBLEVBQzFCLEdBQUc2QixFQUFvQjdCLENBQU07QUFDckMsQ0FBSztBQUVFLE1BQU0rRyxXQUFrQjdFLEVBQVE7QUFBQSxFQUNuQyxjQUFjO0FBQ1YsVUFBTSxHQUFHLFNBQVMsR0FDbEIsS0FBSyxNQUFNLEtBQUssS0FDaEIsS0FBSyxNQUFNLEtBQUs7QUFBQSxFQUN4QjtBQUFBLEVBQ0ksT0FBTzVJLEdBQU87QUFDVixRQUFJLEtBQUssS0FBSztBQUNWLFVBQUk7QUFDQSxRQUFBQSxFQUFNLE9BQU8sT0FBT0EsRUFBTSxJQUFJO0FBQUEsTUFDOUMsUUFDa0I7QUFDRixlQUFPLEtBQUssaUJBQWlCQSxDQUFLO0FBQUEsTUFDbEQ7QUFHUSxRQURtQixLQUFLLFNBQVNBLENBQUssTUFDbkJnRyxFQUFjO0FBQzdCLGFBQU8sS0FBSyxpQkFBaUJoRyxDQUFLO0FBRXRDLFFBQUltSDtBQUNKLFVBQU1HLElBQVMsSUFBSUQsR0FBYTtBQUNoQyxlQUFXalAsS0FBUyxLQUFLLEtBQUs7QUFDMUIsTUFBSUEsRUFBTSxTQUFTLFNBQ0VBLEVBQU0sWUFBWTRILEVBQU0sT0FBTzVILEVBQU0sUUFBUTRILEVBQU0sUUFBUTVILEVBQU0sV0FFOUUrTyxJQUFNLEtBQUssZ0JBQWdCbkgsR0FBT21ILENBQUcsR0FDckNELEVBQWtCQyxHQUFLO0FBQUEsUUFDbkIsTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixNQUFNO0FBQUEsUUFDTixTQUFTL04sRUFBTTtBQUFBLFFBQ2YsV0FBV0EsRUFBTTtBQUFBLFFBQ2pCLFNBQVNBLEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEa1AsRUFBTyxNQUFPLEtBR2JsUCxFQUFNLFNBQVMsU0FDTEEsRUFBTSxZQUFZNEgsRUFBTSxPQUFPNUgsRUFBTSxRQUFRNEgsRUFBTSxRQUFRNUgsRUFBTSxXQUU1RStPLElBQU0sS0FBSyxnQkFBZ0JuSCxHQUFPbUgsQ0FBRyxHQUNyQ0QsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixNQUFNaEIsRUFBYTtBQUFBLFFBQ25CLE1BQU07QUFBQSxRQUNOLFNBQVMvTixFQUFNO0FBQUEsUUFDZixXQUFXQSxFQUFNO0FBQUEsUUFDakIsU0FBU0EsRUFBTTtBQUFBLE1BQ3ZDLENBQXFCLEdBQ0RrUCxFQUFPLE1BQU8sS0FHYmxQLEVBQU0sU0FBUyxlQUNoQjRILEVBQU0sT0FBTzVILEVBQU0sVUFBVSxPQUFPLENBQUMsTUFDckMrTyxJQUFNLEtBQUssZ0JBQWdCbkgsR0FBT21ILENBQUcsR0FDckNELEVBQWtCQyxHQUFLO0FBQUEsUUFDbkIsTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixZQUFZL04sRUFBTTtBQUFBLFFBQ2xCLFNBQVNBLEVBQU07QUFBQSxNQUN2QyxDQUFxQixHQUNEa1AsRUFBTyxNQUFPLEtBSWxCOVIsRUFBSyxZQUFZNEMsQ0FBSztBQUc5QixXQUFPLEVBQUUsUUFBUWtQLEVBQU8sT0FBTyxPQUFPdEgsRUFBTSxLQUFNO0FBQUEsRUFDMUQ7QUFBQSxFQUNJLGlCQUFpQkEsR0FBTztBQUNwQixVQUFNbUgsSUFBTSxLQUFLLGdCQUFnQm5ILENBQUs7QUFDdEMsV0FBQWtILEVBQWtCQyxHQUFLO0FBQUEsTUFDbkIsTUFBTWhCLEVBQWE7QUFBQSxNQUNuQixVQUFVSCxFQUFjO0FBQUEsTUFDeEIsVUFBVW1CLEVBQUk7QUFBQSxJQUMxQixDQUFTLEdBQ01NO0FBQUEsRUFDZjtBQUFBLEVBQ0ksSUFBSWxTLEdBQU9xQyxHQUFTO0FBQ2hCLFdBQU8sS0FBSyxTQUFTLE9BQU9yQyxHQUFPLElBQU1vQyxFQUFVLFNBQVNDLENBQU8sQ0FBQztBQUFBLEVBQzVFO0FBQUEsRUFDSSxHQUFHckMsR0FBT3FDLEdBQVM7QUFDZixXQUFPLEtBQUssU0FBUyxPQUFPckMsR0FBTyxJQUFPb0MsRUFBVSxTQUFTQyxDQUFPLENBQUM7QUFBQSxFQUM3RTtBQUFBLEVBQ0ksSUFBSXJDLEdBQU9xQyxHQUFTO0FBQ2hCLFdBQU8sS0FBSyxTQUFTLE9BQU9yQyxHQUFPLElBQU1vQyxFQUFVLFNBQVNDLENBQU8sQ0FBQztBQUFBLEVBQzVFO0FBQUEsRUFDSSxHQUFHckMsR0FBT3FDLEdBQVM7QUFDZixXQUFPLEtBQUssU0FBUyxPQUFPckMsR0FBTyxJQUFPb0MsRUFBVSxTQUFTQyxDQUFPLENBQUM7QUFBQSxFQUM3RTtBQUFBLEVBQ0ksU0FBUzJWLEdBQU1oWSxHQUFPaVksR0FBVzVWLEdBQVM7QUFDdEMsV0FBTyxJQUFJNlYsR0FBVTtBQUFBLE1BQ2pCLEdBQUcsS0FBSztBQUFBLE1BQ1IsUUFBUTtBQUFBLFFBQ0osR0FBRyxLQUFLLEtBQUs7QUFBQSxRQUNiO0FBQUEsVUFDSSxNQUFBRjtBQUFBLFVBQ0EsT0FBQWhZO0FBQUEsVUFDQSxXQUFBaVk7QUFBQSxVQUNBLFNBQVM3VixFQUFVLFNBQVNDLENBQU87QUFBQSxRQUN0QztBQUFBLE1BQ0o7QUFBQSxJQUNiLENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSxVQUFVUSxHQUFPO0FBQ2IsV0FBTyxJQUFJcVYsR0FBVTtBQUFBLE1BQ2pCLEdBQUcsS0FBSztBQUFBLE1BQ1IsUUFBUSxDQUFDLEdBQUcsS0FBSyxLQUFLLFFBQVFyVixDQUFLO0FBQUEsSUFDL0MsQ0FBUztBQUFBLEVBQ1Q7QUFBQSxFQUNJLFNBQVNSLEdBQVM7QUFDZCxXQUFPLEtBQUssVUFBVTtBQUFBLE1BQ2xCLE1BQU07QUFBQSxNQUNOLE9BQU8sT0FBTyxDQUFDO0FBQUEsTUFDZixXQUFXO0FBQUEsTUFDWCxTQUFTRCxFQUFVLFNBQVNDLENBQU87QUFBQSxJQUMvQyxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksU0FBU0EsR0FBUztBQUNkLFdBQU8sS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sT0FBTyxPQUFPLENBQUM7QUFBQSxNQUNmLFdBQVc7QUFBQSxNQUNYLFNBQVNELEVBQVUsU0FBU0MsQ0FBTztBQUFBLElBQy9DLENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSxZQUFZQSxHQUFTO0FBQ2pCLFdBQU8sS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sT0FBTyxPQUFPLENBQUM7QUFBQSxNQUNmLFdBQVc7QUFBQSxNQUNYLFNBQVNELEVBQVUsU0FBU0MsQ0FBTztBQUFBLElBQy9DLENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSxZQUFZQSxHQUFTO0FBQ2pCLFdBQU8sS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sT0FBTyxPQUFPLENBQUM7QUFBQSxNQUNmLFdBQVc7QUFBQSxNQUNYLFNBQVNELEVBQVUsU0FBU0MsQ0FBTztBQUFBLElBQy9DLENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSxXQUFXckMsR0FBT3FDLEdBQVM7QUFDdkIsV0FBTyxLQUFLLFVBQVU7QUFBQSxNQUNsQixNQUFNO0FBQUEsTUFDTixPQUFBckM7QUFBQSxNQUNBLFNBQVNvQyxFQUFVLFNBQVNDLENBQU87QUFBQSxJQUMvQyxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksSUFBSSxXQUFXO0FBQ1gsUUFBSWlWLElBQU07QUFDVixlQUFXRCxLQUFNLEtBQUssS0FBSztBQUN2QixNQUFJQSxFQUFHLFNBQVMsVUFDUkMsTUFBUSxRQUFRRCxFQUFHLFFBQVFDLE9BQzNCQSxJQUFNRCxFQUFHO0FBR3JCLFdBQU9DO0FBQUEsRUFDZjtBQUFBLEVBQ0ksSUFBSSxXQUFXO0FBQ1gsUUFBSUMsSUFBTTtBQUNWLGVBQVdGLEtBQU0sS0FBSyxLQUFLO0FBQ3ZCLE1BQUlBLEVBQUcsU0FBUyxVQUNSRSxNQUFRLFFBQVFGLEVBQUcsUUFBUUUsT0FDM0JBLElBQU1GLEVBQUc7QUFHckIsV0FBT0U7QUFBQSxFQUNmO0FBQ0E7QUFDQVcsR0FBVSxTQUFTLENBQUMvRyxNQUNULElBQUkrRyxHQUFVO0FBQUEsRUFDakIsUUFBUSxDQUFFO0FBQUEsRUFDVixVQUFVNVYsRUFBc0I7QUFBQSxFQUNoQyxTQUFRNk8sS0FBQSxnQkFBQUEsRUFBUSxXQUFVO0FBQUEsRUFDMUIsR0FBRzZCLEVBQW9CN0IsQ0FBTTtBQUNyQyxDQUFLO0FBRUUsTUFBTWdILFdBQW1COUUsRUFBUTtBQUFBLEVBQ3BDLE9BQU81SSxHQUFPO0FBS1YsUUFKSSxLQUFLLEtBQUssV0FDVkEsRUFBTSxPQUFPLEVBQVFBLEVBQU0sT0FFWixLQUFLLFNBQVNBLENBQUssTUFDbkJnRyxFQUFjLFNBQVM7QUFDdEMsWUFBTW1CLElBQU0sS0FBSyxnQkFBZ0JuSCxDQUFLO0FBQ3RDLGFBQUFrSCxFQUFrQkMsR0FBSztBQUFBLFFBQ25CLE1BQU1oQixFQUFhO0FBQUEsUUFDbkIsVUFBVUgsRUFBYztBQUFBLFFBQ3hCLFVBQVVtQixFQUFJO0FBQUEsTUFDOUIsQ0FBYSxHQUNNTTtBQUFBLElBQ25CO0FBQ1EsV0FBT00sR0FBRy9ILEVBQU0sSUFBSTtBQUFBLEVBQzVCO0FBQ0E7QUFDQTBOLEdBQVcsU0FBUyxDQUFDaEgsTUFDVixJQUFJZ0gsR0FBVztBQUFBLEVBQ2xCLFVBQVU3VixFQUFzQjtBQUFBLEVBQ2hDLFNBQVE2TyxLQUFBLGdCQUFBQSxFQUFRLFdBQVU7QUFBQSxFQUMxQixHQUFHNkIsRUFBb0I3QixDQUFNO0FBQ3JDLENBQUs7QUFFRSxNQUFNaUgsV0FBZ0IvRSxFQUFRO0FBQUEsRUFDakMsT0FBTzVJLEdBQU87QUFLVixRQUpJLEtBQUssS0FBSyxXQUNWQSxFQUFNLE9BQU8sSUFBSSxLQUFLQSxFQUFNLElBQUksSUFFakIsS0FBSyxTQUFTQSxDQUFLLE1BQ25CZ0csRUFBYyxNQUFNO0FBQ25DLFlBQU1tQixJQUFNLEtBQUssZ0JBQWdCbkgsQ0FBSztBQUN0QyxhQUFBa0gsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixNQUFNaEIsRUFBYTtBQUFBLFFBQ25CLFVBQVVILEVBQWM7QUFBQSxRQUN4QixVQUFVbUIsRUFBSTtBQUFBLE1BQzlCLENBQWEsR0FDTU07QUFBQSxJQUNuQjtBQUNRLFFBQUksT0FBTyxNQUFNekgsRUFBTSxLQUFLLFFBQVMsQ0FBQSxHQUFHO0FBQ3BDLFlBQU1tSCxJQUFNLEtBQUssZ0JBQWdCbkgsQ0FBSztBQUN0QyxhQUFBa0gsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixNQUFNaEIsRUFBYTtBQUFBLE1BQ25DLENBQWEsR0FDTXNCO0FBQUEsSUFDbkI7QUFDUSxVQUFNSCxJQUFTLElBQUlELEdBQWE7QUFDaEMsUUFBSUY7QUFDSixlQUFXL08sS0FBUyxLQUFLLEtBQUs7QUFDMUIsTUFBSUEsRUFBTSxTQUFTLFFBQ1g0SCxFQUFNLEtBQUssUUFBTyxJQUFLNUgsRUFBTSxVQUM3QitPLElBQU0sS0FBSyxnQkFBZ0JuSCxHQUFPbUgsQ0FBRyxHQUNyQ0QsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixNQUFNaEIsRUFBYTtBQUFBLFFBQ25CLFNBQVMvTixFQUFNO0FBQUEsUUFDZixXQUFXO0FBQUEsUUFDWCxPQUFPO0FBQUEsUUFDUCxTQUFTQSxFQUFNO0FBQUEsUUFDZixNQUFNO0FBQUEsTUFDOUIsQ0FBcUIsR0FDRGtQLEVBQU8sTUFBTyxLQUdibFAsRUFBTSxTQUFTLFFBQ2hCNEgsRUFBTSxLQUFLLFFBQU8sSUFBSzVILEVBQU0sVUFDN0IrTyxJQUFNLEtBQUssZ0JBQWdCbkgsR0FBT21ILENBQUcsR0FDckNELEVBQWtCQyxHQUFLO0FBQUEsUUFDbkIsTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixTQUFTL04sRUFBTTtBQUFBLFFBQ2YsV0FBVztBQUFBLFFBQ1gsT0FBTztBQUFBLFFBQ1AsU0FBU0EsRUFBTTtBQUFBLFFBQ2YsTUFBTTtBQUFBLE1BQzlCLENBQXFCLEdBQ0RrUCxFQUFPLE1BQU8sS0FJbEI5UixFQUFLLFlBQVk0QyxDQUFLO0FBRzlCLFdBQU87QUFBQSxNQUNILFFBQVFrUCxFQUFPO0FBQUEsTUFDZixPQUFPLElBQUksS0FBS3RILEVBQU0sS0FBSyxRQUFPLENBQUU7QUFBQSxJQUN2QztBQUFBLEVBQ1Q7QUFBQSxFQUNJLFVBQVU1SCxHQUFPO0FBQ2IsV0FBTyxJQUFJdVYsR0FBUTtBQUFBLE1BQ2YsR0FBRyxLQUFLO0FBQUEsTUFDUixRQUFRLENBQUMsR0FBRyxLQUFLLEtBQUssUUFBUXZWLENBQUs7QUFBQSxJQUMvQyxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksSUFBSXdWLEdBQVNoVyxHQUFTO0FBQ2xCLFdBQU8sS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sT0FBT2dXLEVBQVEsUUFBUztBQUFBLE1BQ3hCLFNBQVNqVyxFQUFVLFNBQVNDLENBQU87QUFBQSxJQUMvQyxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksSUFBSWlXLEdBQVNqVyxHQUFTO0FBQ2xCLFdBQU8sS0FBSyxVQUFVO0FBQUEsTUFDbEIsTUFBTTtBQUFBLE1BQ04sT0FBT2lXLEVBQVEsUUFBUztBQUFBLE1BQ3hCLFNBQVNsVyxFQUFVLFNBQVNDLENBQU87QUFBQSxJQUMvQyxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksSUFBSSxVQUFVO0FBQ1YsUUFBSWlWLElBQU07QUFDVixlQUFXRCxLQUFNLEtBQUssS0FBSztBQUN2QixNQUFJQSxFQUFHLFNBQVMsVUFDUkMsTUFBUSxRQUFRRCxFQUFHLFFBQVFDLE9BQzNCQSxJQUFNRCxFQUFHO0FBR3JCLFdBQU9DLEtBQU8sT0FBTyxJQUFJLEtBQUtBLENBQUcsSUFBSTtBQUFBLEVBQzdDO0FBQUEsRUFDSSxJQUFJLFVBQVU7QUFDVixRQUFJQyxJQUFNO0FBQ1YsZUFBV0YsS0FBTSxLQUFLLEtBQUs7QUFDdkIsTUFBSUEsRUFBRyxTQUFTLFVBQ1JFLE1BQVEsUUFBUUYsRUFBRyxRQUFRRSxPQUMzQkEsSUFBTUYsRUFBRztBQUdyQixXQUFPRSxLQUFPLE9BQU8sSUFBSSxLQUFLQSxDQUFHLElBQUk7QUFBQSxFQUM3QztBQUNBO0FBQ0FhLEdBQVEsU0FBUyxDQUFDakgsTUFDUCxJQUFJaUgsR0FBUTtBQUFBLEVBQ2YsUUFBUSxDQUFFO0FBQUEsRUFDVixTQUFRakgsS0FBQSxnQkFBQUEsRUFBUSxXQUFVO0FBQUEsRUFDMUIsVUFBVTdPLEVBQXNCO0FBQUEsRUFDaEMsR0FBRzBRLEVBQW9CN0IsQ0FBTTtBQUNyQyxDQUFLO0FBRUUsTUFBTW9ILFdBQWtCbEYsRUFBUTtBQUFBLEVBQ25DLE9BQU81SSxHQUFPO0FBRVYsUUFEbUIsS0FBSyxTQUFTQSxDQUFLLE1BQ25CZ0csRUFBYyxRQUFRO0FBQ3JDLFlBQU1tQixJQUFNLEtBQUssZ0JBQWdCbkgsQ0FBSztBQUN0QyxhQUFBa0gsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixNQUFNaEIsRUFBYTtBQUFBLFFBQ25CLFVBQVVILEVBQWM7QUFBQSxRQUN4QixVQUFVbUIsRUFBSTtBQUFBLE1BQzlCLENBQWEsR0FDTU07QUFBQSxJQUNuQjtBQUNRLFdBQU9NLEdBQUcvSCxFQUFNLElBQUk7QUFBQSxFQUM1QjtBQUNBO0FBQ0E4TixHQUFVLFNBQVMsQ0FBQ3BILE1BQ1QsSUFBSW9ILEdBQVU7QUFBQSxFQUNqQixVQUFValcsRUFBc0I7QUFBQSxFQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNO0FBQ3JDLENBQUs7QUFFRSxNQUFNcUgsV0FBcUJuRixFQUFRO0FBQUEsRUFDdEMsT0FBTzVJLEdBQU87QUFFVixRQURtQixLQUFLLFNBQVNBLENBQUssTUFDbkJnRyxFQUFjLFdBQVc7QUFDeEMsWUFBTW1CLElBQU0sS0FBSyxnQkFBZ0JuSCxDQUFLO0FBQ3RDLGFBQUFrSCxFQUFrQkMsR0FBSztBQUFBLFFBQ25CLE1BQU1oQixFQUFhO0FBQUEsUUFDbkIsVUFBVUgsRUFBYztBQUFBLFFBQ3hCLFVBQVVtQixFQUFJO0FBQUEsTUFDOUIsQ0FBYSxHQUNNTTtBQUFBLElBQ25CO0FBQ1EsV0FBT00sR0FBRy9ILEVBQU0sSUFBSTtBQUFBLEVBQzVCO0FBQ0E7QUFDQStOLEdBQWEsU0FBUyxDQUFDckgsTUFDWixJQUFJcUgsR0FBYTtBQUFBLEVBQ3BCLFVBQVVsVyxFQUFzQjtBQUFBLEVBQ2hDLEdBQUcwUSxFQUFvQjdCLENBQU07QUFDckMsQ0FBSztBQUVFLE1BQU1zSCxXQUFnQnBGLEVBQVE7QUFBQSxFQUNqQyxPQUFPNUksR0FBTztBQUVWLFFBRG1CLEtBQUssU0FBU0EsQ0FBSyxNQUNuQmdHLEVBQWMsTUFBTTtBQUNuQyxZQUFNbUIsSUFBTSxLQUFLLGdCQUFnQm5ILENBQUs7QUFDdEMsYUFBQWtILEVBQWtCQyxHQUFLO0FBQUEsUUFDbkIsTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixVQUFVSCxFQUFjO0FBQUEsUUFDeEIsVUFBVW1CLEVBQUk7QUFBQSxNQUM5QixDQUFhLEdBQ01NO0FBQUEsSUFDbkI7QUFDUSxXQUFPTSxHQUFHL0gsRUFBTSxJQUFJO0FBQUEsRUFDNUI7QUFDQTtBQUNBZ08sR0FBUSxTQUFTLENBQUN0SCxNQUNQLElBQUlzSCxHQUFRO0FBQUEsRUFDZixVQUFVblcsRUFBc0I7QUFBQSxFQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNO0FBQ3JDLENBQUs7QUFFRSxNQUFNdUgsV0FBZXJGLEVBQVE7QUFBQSxFQUNoQyxjQUFjO0FBQ1YsVUFBTSxHQUFHLFNBQVMsR0FFbEIsS0FBSyxPQUFPO0FBQUEsRUFDcEI7QUFBQSxFQUNJLE9BQU81SSxHQUFPO0FBQ1YsV0FBTytILEdBQUcvSCxFQUFNLElBQUk7QUFBQSxFQUM1QjtBQUNBO0FBQ0FpTyxHQUFPLFNBQVMsQ0FBQ3ZILE1BQ04sSUFBSXVILEdBQU87QUFBQSxFQUNkLFVBQVVwVyxFQUFzQjtBQUFBLEVBQ2hDLEdBQUcwUSxFQUFvQjdCLENBQU07QUFDckMsQ0FBSztBQUVFLE1BQU13SCxXQUFtQnRGLEVBQVE7QUFBQSxFQUNwQyxjQUFjO0FBQ1YsVUFBTSxHQUFHLFNBQVMsR0FFbEIsS0FBSyxXQUFXO0FBQUEsRUFDeEI7QUFBQSxFQUNJLE9BQU81SSxHQUFPO0FBQ1YsV0FBTytILEdBQUcvSCxFQUFNLElBQUk7QUFBQSxFQUM1QjtBQUNBO0FBQ0FrTyxHQUFXLFNBQVMsQ0FBQ3hILE1BQ1YsSUFBSXdILEdBQVc7QUFBQSxFQUNsQixVQUFVclcsRUFBc0I7QUFBQSxFQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNO0FBQ3JDLENBQUs7QUFFRSxNQUFNeUgsV0FBaUJ2RixFQUFRO0FBQUEsRUFDbEMsT0FBTzVJLEdBQU87QUFDVixVQUFNbUgsSUFBTSxLQUFLLGdCQUFnQm5ILENBQUs7QUFDdEMsV0FBQWtILEVBQWtCQyxHQUFLO0FBQUEsTUFDbkIsTUFBTWhCLEVBQWE7QUFBQSxNQUNuQixVQUFVSCxFQUFjO0FBQUEsTUFDeEIsVUFBVW1CLEVBQUk7QUFBQSxJQUMxQixDQUFTLEdBQ01NO0FBQUEsRUFDZjtBQUNBO0FBQ0EwRyxHQUFTLFNBQVMsQ0FBQ3pILE1BQ1IsSUFBSXlILEdBQVM7QUFBQSxFQUNoQixVQUFVdFcsRUFBc0I7QUFBQSxFQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNO0FBQ3JDLENBQUs7QUFFRSxNQUFNMEgsV0FBZ0J4RixFQUFRO0FBQUEsRUFDakMsT0FBTzVJLEdBQU87QUFFVixRQURtQixLQUFLLFNBQVNBLENBQUssTUFDbkJnRyxFQUFjLFdBQVc7QUFDeEMsWUFBTW1CLElBQU0sS0FBSyxnQkFBZ0JuSCxDQUFLO0FBQ3RDLGFBQUFrSCxFQUFrQkMsR0FBSztBQUFBLFFBQ25CLE1BQU1oQixFQUFhO0FBQUEsUUFDbkIsVUFBVUgsRUFBYztBQUFBLFFBQ3hCLFVBQVVtQixFQUFJO0FBQUEsTUFDOUIsQ0FBYSxHQUNNTTtBQUFBLElBQ25CO0FBQ1EsV0FBT00sR0FBRy9ILEVBQU0sSUFBSTtBQUFBLEVBQzVCO0FBQ0E7QUFDQW9PLEdBQVEsU0FBUyxDQUFDMUgsTUFDUCxJQUFJMEgsR0FBUTtBQUFBLEVBQ2YsVUFBVXZXLEVBQXNCO0FBQUEsRUFDaEMsR0FBRzBRLEVBQW9CN0IsQ0FBTTtBQUNyQyxDQUFLO0FBRUUsTUFBTTRDLFdBQWlCVixFQUFRO0FBQUEsRUFDbEMsT0FBTzVJLEdBQU87QUFDVixVQUFNLEVBQUUsS0FBQW1ILEdBQUssUUFBQUcsRUFBTSxJQUFLLEtBQUssb0JBQW9CdEgsQ0FBSyxHQUNoRGhMLElBQU0sS0FBSztBQUNqQixRQUFJbVMsRUFBSSxlQUFlbkIsRUFBYztBQUNqQyxhQUFBa0IsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixNQUFNaEIsRUFBYTtBQUFBLFFBQ25CLFVBQVVILEVBQWM7QUFBQSxRQUN4QixVQUFVbUIsRUFBSTtBQUFBLE1BQzlCLENBQWEsR0FDTU07QUFFWCxRQUFJelMsRUFBSSxnQkFBZ0IsTUFBTTtBQUMxQixZQUFNdVgsSUFBU3BGLEVBQUksS0FBSyxTQUFTblMsRUFBSSxZQUFZLE9BQzNDd1gsSUFBV3JGLEVBQUksS0FBSyxTQUFTblMsRUFBSSxZQUFZO0FBQ25ELE9BQUl1WCxLQUFVQyxPQUNWdEYsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixNQUFNb0YsSUFBU3BHLEVBQWEsVUFBVUEsRUFBYTtBQUFBLFFBQ25ELFNBQVVxRyxJQUFXeFgsRUFBSSxZQUFZLFFBQVE7QUFBQSxRQUM3QyxTQUFVdVgsSUFBU3ZYLEVBQUksWUFBWSxRQUFRO0FBQUEsUUFDM0MsTUFBTTtBQUFBLFFBQ04sV0FBVztBQUFBLFFBQ1gsT0FBTztBQUFBLFFBQ1AsU0FBU0EsRUFBSSxZQUFZO0FBQUEsTUFDN0MsQ0FBaUIsR0FDRHNTLEVBQU8sTUFBTztBQUFBLElBRTlCO0FBMkJRLFFBMUJJdFMsRUFBSSxjQUFjLFFBQ2RtUyxFQUFJLEtBQUssU0FBU25TLEVBQUksVUFBVSxVQUNoQ2tTLEVBQWtCQyxHQUFLO0FBQUEsTUFDbkIsTUFBTWhCLEVBQWE7QUFBQSxNQUNuQixTQUFTblIsRUFBSSxVQUFVO0FBQUEsTUFDdkIsTUFBTTtBQUFBLE1BQ04sV0FBVztBQUFBLE1BQ1gsT0FBTztBQUFBLE1BQ1AsU0FBU0EsRUFBSSxVQUFVO0FBQUEsSUFDM0MsQ0FBaUIsR0FDRHNTLEVBQU8sTUFBTyxJQUdsQnRTLEVBQUksY0FBYyxRQUNkbVMsRUFBSSxLQUFLLFNBQVNuUyxFQUFJLFVBQVUsVUFDaENrUyxFQUFrQkMsR0FBSztBQUFBLE1BQ25CLE1BQU1oQixFQUFhO0FBQUEsTUFDbkIsU0FBU25SLEVBQUksVUFBVTtBQUFBLE1BQ3ZCLE1BQU07QUFBQSxNQUNOLFdBQVc7QUFBQSxNQUNYLE9BQU87QUFBQSxNQUNQLFNBQVNBLEVBQUksVUFBVTtBQUFBLElBQzNDLENBQWlCLEdBQ0RzUyxFQUFPLE1BQU8sSUFHbEJILEVBQUksT0FBTztBQUNYLGFBQU8sUUFBUSxJQUFJLENBQUMsR0FBR0EsRUFBSSxJQUFJLEVBQUUsSUFBSSxDQUFDN1UsR0FBTUosTUFDakM4QyxFQUFJLEtBQUssWUFBWSxJQUFJb1QsR0FBbUJqQixHQUFLN1UsR0FBTTZVLEVBQUksTUFBTWpWLENBQUMsQ0FBQyxDQUM3RSxDQUFDLEVBQUUsS0FBSyxDQUFDc0ssTUFDQzZLLEdBQVksV0FBV0MsR0FBUTlLLENBQU0sQ0FDL0M7QUFFTCxVQUFNQSxJQUFTLENBQUMsR0FBRzJLLEVBQUksSUFBSSxFQUFFLElBQUksQ0FBQzdVLEdBQU1KLE1BQzdCOEMsRUFBSSxLQUFLLFdBQVcsSUFBSW9ULEdBQW1CakIsR0FBSzdVLEdBQU02VSxFQUFJLE1BQU1qVixDQUFDLENBQUMsQ0FDNUU7QUFDRCxXQUFPbVYsR0FBWSxXQUFXQyxHQUFROUssQ0FBTTtBQUFBLEVBQ3BEO0FBQUEsRUFDSSxJQUFJLFVBQVU7QUFDVixXQUFPLEtBQUssS0FBSztBQUFBLEVBQ3pCO0FBQUEsRUFDSSxJQUFJa1EsR0FBVzlVLEdBQVM7QUFDcEIsV0FBTyxJQUFJMFIsR0FBUztBQUFBLE1BQ2hCLEdBQUcsS0FBSztBQUFBLE1BQ1IsV0FBVyxFQUFFLE9BQU9vRCxHQUFXLFNBQVMvVSxFQUFVLFNBQVNDLENBQU8sRUFBRztBQUFBLElBQ2pGLENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSxJQUFJK1UsR0FBVy9VLEdBQVM7QUFDcEIsV0FBTyxJQUFJMFIsR0FBUztBQUFBLE1BQ2hCLEdBQUcsS0FBSztBQUFBLE1BQ1IsV0FBVyxFQUFFLE9BQU9xRCxHQUFXLFNBQVNoVixFQUFVLFNBQVNDLENBQU8sRUFBRztBQUFBLElBQ2pGLENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSxPQUFPNUYsR0FBSzRGLEdBQVM7QUFDakIsV0FBTyxJQUFJMFIsR0FBUztBQUFBLE1BQ2hCLEdBQUcsS0FBSztBQUFBLE1BQ1IsYUFBYSxFQUFFLE9BQU90WCxHQUFLLFNBQVMyRixFQUFVLFNBQVNDLENBQU8sRUFBRztBQUFBLElBQzdFLENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSxTQUFTQSxHQUFTO0FBQ2QsV0FBTyxLQUFLLElBQUksR0FBR0EsQ0FBTztBQUFBLEVBQ2xDO0FBQ0E7QUFDQTBSLEdBQVMsU0FBUyxDQUFDOVAsR0FBUWtOLE1BQ2hCLElBQUk0QyxHQUFTO0FBQUEsRUFDaEIsTUFBTTlQO0FBQUEsRUFDTixXQUFXO0FBQUEsRUFDWCxXQUFXO0FBQUEsRUFDWCxhQUFhO0FBQUEsRUFDYixVQUFVM0IsRUFBc0I7QUFBQSxFQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNO0FBQ3JDLENBQUs7QUFFTCxTQUFTMkgsR0FBZTdVLEdBQVE7QUFDNUIsTUFBSUEsYUFBa0I4VSxHQUFXO0FBQzdCLFVBQU1DLElBQVcsQ0FBRTtBQUNuQixlQUFXcFosS0FBT3FFLEVBQU8sT0FBTztBQUM1QixZQUFNZ1YsSUFBY2hWLEVBQU8sTUFBTXJFLENBQUc7QUFDcEMsTUFBQW9aLEVBQVNwWixDQUFHLElBQUlpVSxHQUFZLE9BQU9pRixHQUFlRyxDQUFXLENBQUM7QUFBQSxJQUMxRTtBQUNRLFdBQU8sSUFBSUYsRUFBVTtBQUFBLE1BQ2pCLEdBQUc5VSxFQUFPO0FBQUEsTUFDVixPQUFPLE1BQU0rVTtBQUFBLElBQ3pCLENBQVM7QUFBQSxFQUNULE1BQ1MsUUFBSS9VLGFBQWtCOFAsS0FDaEIsSUFBSUEsR0FBUztBQUFBLElBQ2hCLEdBQUc5UCxFQUFPO0FBQUEsSUFDVixNQUFNNlUsR0FBZTdVLEVBQU8sT0FBTztBQUFBLEVBQy9DLENBQVMsSUFFSUEsYUFBa0I0UCxLQUNoQkEsR0FBWSxPQUFPaUYsR0FBZTdVLEVBQU8sT0FBUSxDQUFBLENBQUMsSUFFcERBLGFBQWtCNlAsS0FDaEJBLEdBQVksT0FBT2dGLEdBQWU3VSxFQUFPLE9BQVEsQ0FBQSxDQUFDLElBRXBEQSxhQUFrQmlWLEtBQ2hCQSxHQUFTLE9BQU9qVixFQUFPLE1BQU0sSUFBSSxDQUFDbEgsTUFBUytiLEdBQWUvYixDQUFJLENBQUMsQ0FBQyxJQUdoRWtIO0FBRWY7QUFDTyxNQUFNOFUsVUFBa0IxRixFQUFRO0FBQUEsRUFDbkMsY0FBYztBQUNWLFVBQU0sR0FBRyxTQUFTLEdBQ2xCLEtBQUssVUFBVSxNQUtmLEtBQUssWUFBWSxLQUFLLGFBcUN0QixLQUFLLFVBQVUsS0FBSztBQUFBLEVBQzVCO0FBQUEsRUFDSSxhQUFhO0FBQ1QsUUFBSSxLQUFLLFlBQVk7QUFDakIsYUFBTyxLQUFLO0FBQ2hCLFVBQU04RixJQUFRLEtBQUssS0FBSyxNQUFPLEdBQ3pCdFksSUFBT1osRUFBSyxXQUFXa1osQ0FBSztBQUNsQyxnQkFBSyxVQUFVLEVBQUUsT0FBQUEsR0FBTyxNQUFBdFksRUFBTSxHQUN2QixLQUFLO0FBQUEsRUFDcEI7QUFBQSxFQUNJLE9BQU80SixHQUFPO0FBRVYsUUFEbUIsS0FBSyxTQUFTQSxDQUFLLE1BQ25CZ0csRUFBYyxRQUFRO0FBQ3JDLFlBQU1tQixJQUFNLEtBQUssZ0JBQWdCbkgsQ0FBSztBQUN0QyxhQUFBa0gsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixNQUFNaEIsRUFBYTtBQUFBLFFBQ25CLFVBQVVILEVBQWM7QUFBQSxRQUN4QixVQUFVbUIsRUFBSTtBQUFBLE1BQzlCLENBQWEsR0FDTU07QUFBQSxJQUNuQjtBQUNRLFVBQU0sRUFBRSxRQUFBSCxHQUFRLEtBQUFILEVBQUcsSUFBSyxLQUFLLG9CQUFvQm5ILENBQUssR0FDaEQsRUFBRSxPQUFBME8sR0FBTyxNQUFNQyxFQUFTLElBQUssS0FBSyxXQUFZLEdBQzlDQyxJQUFZLENBQUU7QUFDcEIsUUFBSSxFQUFFLEtBQUssS0FBSyxvQkFBb0JULE1BQVksS0FBSyxLQUFLLGdCQUFnQjtBQUN0RSxpQkFBV2haLEtBQU9nUyxFQUFJO0FBQ2xCLFFBQUt3SCxFQUFVLFNBQVN4WixDQUFHLEtBQ3ZCeVosRUFBVSxLQUFLelosQ0FBRztBQUk5QixVQUFNdVMsSUFBUSxDQUFFO0FBQ2hCLGVBQVd2UyxLQUFPd1osR0FBVztBQUN6QixZQUFNRSxJQUFlSCxFQUFNdlosQ0FBRyxHQUN4QkksSUFBUTRSLEVBQUksS0FBS2hTLENBQUc7QUFDMUIsTUFBQXVTLEVBQU0sS0FBSztBQUFBLFFBQ1AsS0FBSyxFQUFFLFFBQVEsU0FBUyxPQUFPdlMsRUFBSztBQUFBLFFBQ3BDLE9BQU8wWixFQUFhLE9BQU8sSUFBSXpHLEdBQW1CakIsR0FBSzVSLEdBQU80UixFQUFJLE1BQU1oUyxDQUFHLENBQUM7QUFBQSxRQUM1RSxXQUFXQSxLQUFPZ1MsRUFBSTtBQUFBLE1BQ3RDLENBQWE7QUFBQSxJQUNiO0FBQ1EsUUFBSSxLQUFLLEtBQUssb0JBQW9CZ0gsSUFBVTtBQUN4QyxZQUFNVyxJQUFjLEtBQUssS0FBSztBQUM5QixVQUFJQSxNQUFnQjtBQUNoQixtQkFBVzNaLEtBQU95WjtBQUNkLFVBQUFsSCxFQUFNLEtBQUs7QUFBQSxZQUNQLEtBQUssRUFBRSxRQUFRLFNBQVMsT0FBT3ZTLEVBQUs7QUFBQSxZQUNwQyxPQUFPLEVBQUUsUUFBUSxTQUFTLE9BQU9nUyxFQUFJLEtBQUtoUyxDQUFHLEVBQUc7QUFBQSxVQUN4RSxDQUFxQjtBQUFBLGVBR0EyWixNQUFnQjtBQUNyQixRQUFJRixFQUFVLFNBQVMsTUFDbkIxSCxFQUFrQkMsR0FBSztBQUFBLFVBQ25CLE1BQU1oQixFQUFhO0FBQUEsVUFDbkIsTUFBTXlJO0FBQUEsUUFDOUIsQ0FBcUIsR0FDRHRILEVBQU8sTUFBTztBQUFBLGVBR2J3SCxNQUFnQixRQUdyQixPQUFNLElBQUksTUFBTSxzREFBc0Q7QUFBQSxJQUV0RixPQUNhO0FBRUQsWUFBTUMsSUFBVyxLQUFLLEtBQUs7QUFDM0IsaUJBQVc1WixLQUFPeVosR0FBVztBQUN6QixjQUFNclosSUFBUTRSLEVBQUksS0FBS2hTLENBQUc7QUFDMUIsUUFBQXVTLEVBQU0sS0FBSztBQUFBLFVBQ1AsS0FBSyxFQUFFLFFBQVEsU0FBUyxPQUFPdlMsRUFBSztBQUFBLFVBQ3BDLE9BQU80WixFQUFTO0FBQUEsWUFBTyxJQUFJM0csR0FBbUJqQixHQUFLNVIsR0FBTzRSLEVBQUksTUFBTWhTLENBQUc7QUFBQTtBQUFBLFVBQ3RFO0FBQUEsVUFDRCxXQUFXQSxLQUFPZ1MsRUFBSTtBQUFBLFFBQzFDLENBQWlCO0FBQUEsTUFDakI7QUFBQSxJQUNBO0FBQ1EsV0FBSUEsRUFBSSxPQUFPLFFBQ0osUUFBUSxRQUFPLEVBQ2pCLEtBQUssWUFBWTtBQUNsQixZQUFNUSxJQUFZLENBQUU7QUFDcEIsaUJBQVdDLEtBQVFGLEdBQU87QUFDdEIsY0FBTXZTLElBQU0sTUFBTXlTLEVBQUssS0FDakJyUyxJQUFRLE1BQU1xUyxFQUFLO0FBQ3pCLFFBQUFELEVBQVUsS0FBSztBQUFBLFVBQ1gsS0FBQXhTO0FBQUEsVUFDQSxPQUFBSTtBQUFBLFVBQ0EsV0FBV3FTLEVBQUs7QUFBQSxRQUN4QyxDQUFxQjtBQUFBLE1BQ3JCO0FBQ2dCLGFBQU9EO0FBQUEsSUFDVixDQUFBLEVBQ0ksS0FBSyxDQUFDQSxNQUNBTixHQUFZLGdCQUFnQkMsR0FBUUssQ0FBUyxDQUN2RCxJQUdNTixHQUFZLGdCQUFnQkMsR0FBUUksQ0FBSztBQUFBLEVBRTVEO0FBQUEsRUFDSSxJQUFJLFFBQVE7QUFDUixXQUFPLEtBQUssS0FBSyxNQUFPO0FBQUEsRUFDaEM7QUFBQSxFQUNJLE9BQU85UCxHQUFTO0FBQ1osV0FBQUQsRUFBVSxVQUNILElBQUkyVyxFQUFVO0FBQUEsTUFDakIsR0FBRyxLQUFLO0FBQUEsTUFDUixhQUFhO0FBQUEsTUFDYixHQUFJMVcsTUFBWSxTQUNWO0FBQUEsUUFDRSxVQUFVLENBQUNQLEdBQU84UCxNQUFROztBQUN0QixnQkFBTTZILE1BQWVoWCxLQUFBQyxJQUFBLEtBQUssTUFBSyxhQUFWLGdCQUFBRCxFQUFBLEtBQUFDLEdBQXFCWixHQUFPOFAsR0FBSyxZQUFXQSxFQUFJO0FBQ3JFLGlCQUFJOVAsRUFBTSxTQUFTLHNCQUNSO0FBQUEsWUFDSCxTQUFTTSxFQUFVLFNBQVNDLENBQU8sRUFBRSxXQUFXb1g7QUFBQSxVQUNuRCxJQUNFO0FBQUEsWUFDSCxTQUFTQTtBQUFBLFVBQ1o7QUFBQSxRQUNKO0FBQUEsTUFDckIsSUFDa0I7SUFDbEIsQ0FBUztBQUFBLEVBQ1Q7QUFBQSxFQUNJLFFBQVE7QUFDSixXQUFPLElBQUlWLEVBQVU7QUFBQSxNQUNqQixHQUFHLEtBQUs7QUFBQSxNQUNSLGFBQWE7QUFBQSxJQUN6QixDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksY0FBYztBQUNWLFdBQU8sSUFBSUEsRUFBVTtBQUFBLE1BQ2pCLEdBQUcsS0FBSztBQUFBLE1BQ1IsYUFBYTtBQUFBLElBQ3pCLENBQVM7QUFBQSxFQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBa0JJLE9BQU9XLEdBQWM7QUFDakIsV0FBTyxJQUFJWCxFQUFVO0FBQUEsTUFDakIsR0FBRyxLQUFLO0FBQUEsTUFDUixPQUFPLE9BQU87QUFBQSxRQUNWLEdBQUcsS0FBSyxLQUFLLE1BQU87QUFBQSxRQUNwQixHQUFHVztBQUFBLE1BQ25CO0FBQUEsSUFDQSxDQUFTO0FBQUEsRUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1JLE1BQU1DLEdBQVM7QUFVWCxXQVRlLElBQUlaLEVBQVU7QUFBQSxNQUN6QixhQUFhWSxFQUFRLEtBQUs7QUFBQSxNQUMxQixVQUFVQSxFQUFRLEtBQUs7QUFBQSxNQUN2QixPQUFPLE9BQU87QUFBQSxRQUNWLEdBQUcsS0FBSyxLQUFLLE1BQU87QUFBQSxRQUNwQixHQUFHQSxFQUFRLEtBQUssTUFBTztBQUFBLE1BQ3ZDO0FBQUEsTUFDWSxVQUFVclgsRUFBc0I7QUFBQSxJQUM1QyxDQUFTO0FBQUEsRUFFVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQW9DSSxPQUFPMUMsR0FBS3FFLEdBQVE7QUFDaEIsV0FBTyxLQUFLLFFBQVEsRUFBRSxDQUFDckUsQ0FBRyxHQUFHcUUsRUFBTSxDQUFFO0FBQUEsRUFDN0M7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQXNCSSxTQUFTdUUsR0FBTztBQUNaLFdBQU8sSUFBSXVRLEVBQVU7QUFBQSxNQUNqQixHQUFHLEtBQUs7QUFBQSxNQUNSLFVBQVV2UTtBQUFBLElBQ3RCLENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSxLQUFLb1IsR0FBTTtBQUNQLFVBQU1ULElBQVEsQ0FBRTtBQUNoQixlQUFXdlosS0FBT0ssRUFBSyxXQUFXMlosQ0FBSTtBQUNsQyxNQUFJQSxFQUFLaGEsQ0FBRyxLQUFLLEtBQUssTUFBTUEsQ0FBRyxNQUMzQnVaLEVBQU12WixDQUFHLElBQUksS0FBSyxNQUFNQSxDQUFHO0FBR25DLFdBQU8sSUFBSW1aLEVBQVU7QUFBQSxNQUNqQixHQUFHLEtBQUs7QUFBQSxNQUNSLE9BQU8sTUFBTUk7QUFBQSxJQUN6QixDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksS0FBS1MsR0FBTTtBQUNQLFVBQU1ULElBQVEsQ0FBRTtBQUNoQixlQUFXdlosS0FBT0ssRUFBSyxXQUFXLEtBQUssS0FBSztBQUN4QyxNQUFLMlosRUFBS2hhLENBQUcsTUFDVHVaLEVBQU12WixDQUFHLElBQUksS0FBSyxNQUFNQSxDQUFHO0FBR25DLFdBQU8sSUFBSW1aLEVBQVU7QUFBQSxNQUNqQixHQUFHLEtBQUs7QUFBQSxNQUNSLE9BQU8sTUFBTUk7QUFBQSxJQUN6QixDQUFTO0FBQUEsRUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUksY0FBYztBQUNWLFdBQU9MLEdBQWUsSUFBSTtBQUFBLEVBQ2xDO0FBQUEsRUFDSSxRQUFRYyxHQUFNO0FBQ1YsVUFBTVosSUFBVyxDQUFFO0FBQ25CLGVBQVdwWixLQUFPSyxFQUFLLFdBQVcsS0FBSyxLQUFLLEdBQUc7QUFDM0MsWUFBTWdaLElBQWMsS0FBSyxNQUFNclosQ0FBRztBQUNsQyxNQUFJZ2EsS0FBUSxDQUFDQSxFQUFLaGEsQ0FBRyxJQUNqQm9aLEVBQVNwWixDQUFHLElBQUlxWixJQUdoQkQsRUFBU3BaLENBQUcsSUFBSXFaLEVBQVksU0FBVTtBQUFBLElBRXREO0FBQ1EsV0FBTyxJQUFJRixFQUFVO0FBQUEsTUFDakIsR0FBRyxLQUFLO0FBQUEsTUFDUixPQUFPLE1BQU1DO0FBQUEsSUFDekIsQ0FBUztBQUFBLEVBQ1Q7QUFBQSxFQUNJLFNBQVNZLEdBQU07QUFDWCxVQUFNWixJQUFXLENBQUU7QUFDbkIsZUFBV3BaLEtBQU9LLEVBQUssV0FBVyxLQUFLLEtBQUs7QUFDeEMsVUFBSTJaLEtBQVEsQ0FBQ0EsRUFBS2hhLENBQUc7QUFDakIsUUFBQW9aLEVBQVNwWixDQUFHLElBQUksS0FBSyxNQUFNQSxDQUFHO0FBQUEsV0FFN0I7QUFFRCxZQUFJaWEsSUFEZ0IsS0FBSyxNQUFNamEsQ0FBRztBQUVsQyxlQUFPaWEsYUFBb0JoRztBQUN2QixVQUFBZ0csSUFBV0EsRUFBUyxLQUFLO0FBRTdCLFFBQUFiLEVBQVNwWixDQUFHLElBQUlpYTtBQUFBLE1BQ2hDO0FBRVEsV0FBTyxJQUFJZCxFQUFVO0FBQUEsTUFDakIsR0FBRyxLQUFLO0FBQUEsTUFDUixPQUFPLE1BQU1DO0FBQUEsSUFDekIsQ0FBUztBQUFBLEVBQ1Q7QUFBQSxFQUNJLFFBQVE7QUFDSixXQUFPYyxHQUFjN1osRUFBSyxXQUFXLEtBQUssS0FBSyxDQUFDO0FBQUEsRUFDeEQ7QUFDQTtBQUNBOFksRUFBVSxTQUFTLENBQUNJLEdBQU9oSSxNQUNoQixJQUFJNEgsRUFBVTtBQUFBLEVBQ2pCLE9BQU8sTUFBTUk7QUFBQSxFQUNiLGFBQWE7QUFBQSxFQUNiLFVBQVVQLEdBQVMsT0FBUTtBQUFBLEVBQzNCLFVBQVV0VyxFQUFzQjtBQUFBLEVBQ2hDLEdBQUcwUSxFQUFvQjdCLENBQU07QUFDckMsQ0FBSztBQUVMNEgsRUFBVSxlQUFlLENBQUNJLEdBQU9oSSxNQUN0QixJQUFJNEgsRUFBVTtBQUFBLEVBQ2pCLE9BQU8sTUFBTUk7QUFBQSxFQUNiLGFBQWE7QUFBQSxFQUNiLFVBQVVQLEdBQVMsT0FBUTtBQUFBLEVBQzNCLFVBQVV0VyxFQUFzQjtBQUFBLEVBQ2hDLEdBQUcwUSxFQUFvQjdCLENBQU07QUFDckMsQ0FBSztBQUVMNEgsRUFBVSxhQUFhLENBQUNJLEdBQU9oSSxNQUNwQixJQUFJNEgsRUFBVTtBQUFBLEVBQ2pCLE9BQUFJO0FBQUEsRUFDQSxhQUFhO0FBQUEsRUFDYixVQUFVUCxHQUFTLE9BQVE7QUFBQSxFQUMzQixVQUFVdFcsRUFBc0I7QUFBQSxFQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNO0FBQ3JDLENBQUs7QUFFRSxNQUFNK0MsV0FBaUJiLEVBQVE7QUFBQSxFQUNsQyxPQUFPNUksR0FBTztBQUNWLFVBQU0sRUFBRSxLQUFBbUgsRUFBSyxJQUFHLEtBQUssb0JBQW9CbkgsQ0FBSyxHQUN4Q3pMLElBQVUsS0FBSyxLQUFLO0FBQzFCLGFBQVMrYSxFQUFjL0gsR0FBUztBQUU1QixpQkFBVy9LLEtBQVUrSztBQUNqQixZQUFJL0ssRUFBTyxPQUFPLFdBQVc7QUFDekIsaUJBQU9BLEVBQU87QUFHdEIsaUJBQVdBLEtBQVUrSztBQUNqQixZQUFJL0ssRUFBTyxPQUFPLFdBQVc7QUFFekIsaUJBQUEySyxFQUFJLE9BQU8sT0FBTyxLQUFLLEdBQUczSyxFQUFPLElBQUksT0FBTyxNQUFNLEdBQzNDQSxFQUFPO0FBSXRCLFlBQU0rUyxJQUFjaEksRUFBUSxJQUFJLENBQUMvSyxNQUFXLElBQUkxRixHQUFTMEYsRUFBTyxJQUFJLE9BQU8sTUFBTSxDQUFDO0FBQ2xGLGFBQUEwSyxFQUFrQkMsR0FBSztBQUFBLFFBQ25CLE1BQU1oQixFQUFhO0FBQUEsUUFDbkIsYUFBQW9KO0FBQUEsTUFDaEIsQ0FBYSxHQUNNOUg7QUFBQSxJQUNuQjtBQUNRLFFBQUlOLEVBQUksT0FBTztBQUNYLGFBQU8sUUFBUSxJQUFJNVMsRUFBUSxJQUFJLE9BQU9pVixNQUFXO0FBQzdDLGNBQU1nRyxJQUFXO0FBQUEsVUFDYixHQUFHckk7QUFBQSxVQUNILFFBQVE7QUFBQSxZQUNKLEdBQUdBLEVBQUk7QUFBQSxZQUNQLFFBQVEsQ0FBRTtBQUFBLFVBQ2I7QUFBQSxVQUNELFFBQVE7QUFBQSxRQUNYO0FBQ0QsZUFBTztBQUFBLFVBQ0gsUUFBUSxNQUFNcUMsRUFBTyxZQUFZO0FBQUEsWUFDN0IsTUFBTXJDLEVBQUk7QUFBQSxZQUNWLE1BQU1BLEVBQUk7QUFBQSxZQUNWLFFBQVFxSTtBQUFBLFVBQ2hDLENBQXFCO0FBQUEsVUFDRCxLQUFLQTtBQUFBLFFBQ1I7QUFBQSxNQUNqQixDQUFhLENBQUMsRUFBRSxLQUFLRixDQUFhO0FBRXJCO0FBQ0QsVUFBSUc7QUFDSixZQUFNMVksSUFBUyxDQUFFO0FBQ2pCLGlCQUFXeVMsS0FBVWpWLEdBQVM7QUFDMUIsY0FBTWliLElBQVc7QUFBQSxVQUNiLEdBQUdySTtBQUFBLFVBQ0gsUUFBUTtBQUFBLFlBQ0osR0FBR0EsRUFBSTtBQUFBLFlBQ1AsUUFBUSxDQUFFO0FBQUEsVUFDYjtBQUFBLFVBQ0QsUUFBUTtBQUFBLFFBQ1gsR0FDSzNLLElBQVNnTixFQUFPLFdBQVc7QUFBQSxVQUM3QixNQUFNckMsRUFBSTtBQUFBLFVBQ1YsTUFBTUEsRUFBSTtBQUFBLFVBQ1YsUUFBUXFJO0FBQUEsUUFDNUIsQ0FBaUI7QUFDRCxZQUFJaFQsRUFBTyxXQUFXO0FBQ2xCLGlCQUFPQTtBQUVOLFFBQUlBLEVBQU8sV0FBVyxXQUFXLENBQUNpVCxNQUNuQ0EsSUFBUSxFQUFFLFFBQUFqVCxHQUFRLEtBQUtnVCxFQUFVLElBRWpDQSxFQUFTLE9BQU8sT0FBTyxVQUN2QnpZLEVBQU8sS0FBS3lZLEVBQVMsT0FBTyxNQUFNO0FBQUEsTUFFdEQ7QUFDWSxVQUFJQztBQUNBLGVBQUF0SSxFQUFJLE9BQU8sT0FBTyxLQUFLLEdBQUdzSSxFQUFNLElBQUksT0FBTyxNQUFNLEdBQzFDQSxFQUFNO0FBRWpCLFlBQU1GLElBQWN4WSxFQUFPLElBQUksQ0FBQ0EsTUFBVyxJQUFJRCxHQUFTQyxDQUFNLENBQUM7QUFDL0QsYUFBQW1RLEVBQWtCQyxHQUFLO0FBQUEsUUFDbkIsTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixhQUFBb0o7QUFBQSxNQUNoQixDQUFhLEdBQ005SDtBQUFBLElBQ25CO0FBQUEsRUFDQTtBQUFBLEVBQ0ksSUFBSSxVQUFVO0FBQ1YsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUN6QjtBQUNBO0FBQ0FnQyxHQUFTLFNBQVMsQ0FBQzFOLEdBQU8ySyxNQUNmLElBQUkrQyxHQUFTO0FBQUEsRUFDaEIsU0FBUzFOO0FBQUEsRUFDVCxVQUFVbEUsRUFBc0I7QUFBQSxFQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNO0FBQ3JDLENBQUs7QUFTTCxNQUFNZ0osS0FBbUIsQ0FBQ3hXLE1BQ2xCQSxhQUFnQnlXLEtBQ1RELEdBQWlCeFcsRUFBSyxNQUFNLElBRTlCQSxhQUFnQmlRLEtBQ2R1RyxHQUFpQnhXLEVBQUssV0FBVyxJQUVuQ0EsYUFBZ0IwVyxLQUNkLENBQUMxVyxFQUFLLEtBQUssSUFFYkEsYUFBZ0IyVyxLQUNkM1csRUFBSyxVQUVQQSxhQUFnQjRXLEtBRWR0YSxFQUFLLGFBQWEwRCxFQUFLLElBQUksSUFFN0JBLGFBQWdCNFEsS0FDZDRGLEdBQWlCeFcsRUFBSyxLQUFLLFNBQVMsSUFFdENBLGFBQWdCNlUsS0FDZCxDQUFDLE1BQVMsSUFFWjdVLGFBQWdCOFUsS0FDZCxDQUFDLElBQUksSUFFUDlVLGFBQWdCa1EsS0FDZCxDQUFDLFFBQVcsR0FBR3NHLEdBQWlCeFcsRUFBSyxPQUFRLENBQUEsQ0FBQyxJQUVoREEsYUFBZ0JtUSxLQUNkLENBQUMsTUFBTSxHQUFHcUcsR0FBaUJ4VyxFQUFLLE9BQVEsQ0FBQSxDQUFDLElBRTNDQSxhQUFnQjZRLE1BR2hCN1EsYUFBZ0JtUixLQUZkcUYsR0FBaUJ4VyxFQUFLLFFBQVEsSUFLaENBLGFBQWdCK1EsS0FDZHlGLEdBQWlCeFcsRUFBSyxLQUFLLFNBQVMsSUFHcEMsQ0FBRTtBQUdWLE1BQU02VyxXQUE4Qm5ILEVBQVE7QUFBQSxFQUMvQyxPQUFPNUksR0FBTztBQUNWLFVBQU0sRUFBRSxLQUFBbUgsRUFBSyxJQUFHLEtBQUssb0JBQW9CbkgsQ0FBSztBQUM5QyxRQUFJbUgsRUFBSSxlQUFlbkIsRUFBYztBQUNqQyxhQUFBa0IsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixNQUFNaEIsRUFBYTtBQUFBLFFBQ25CLFVBQVVILEVBQWM7QUFBQSxRQUN4QixVQUFVbUIsRUFBSTtBQUFBLE1BQzlCLENBQWEsR0FDTU07QUFFWCxVQUFNdUksSUFBZ0IsS0FBSyxlQUNyQkMsSUFBcUI5SSxFQUFJLEtBQUs2SSxDQUFhLEdBQzNDeEcsSUFBUyxLQUFLLFdBQVcsSUFBSXlHLENBQWtCO0FBQ3JELFdBQUt6RyxJQVFEckMsRUFBSSxPQUFPLFFBQ0pxQyxFQUFPLFlBQVk7QUFBQSxNQUN0QixNQUFNckMsRUFBSTtBQUFBLE1BQ1YsTUFBTUEsRUFBSTtBQUFBLE1BQ1YsUUFBUUE7QUFBQSxJQUN4QixDQUFhLElBR01xQyxFQUFPLFdBQVc7QUFBQSxNQUNyQixNQUFNckMsRUFBSTtBQUFBLE1BQ1YsTUFBTUEsRUFBSTtBQUFBLE1BQ1YsUUFBUUE7QUFBQSxJQUN4QixDQUFhLEtBbkJERCxFQUFrQkMsR0FBSztBQUFBLE1BQ25CLE1BQU1oQixFQUFhO0FBQUEsTUFDbkIsU0FBUyxNQUFNLEtBQUssS0FBSyxXQUFXLEtBQUksQ0FBRTtBQUFBLE1BQzFDLE1BQU0sQ0FBQzZKLENBQWE7QUFBQSxJQUNwQyxDQUFhLEdBQ012STtBQUFBLEVBZ0JuQjtBQUFBLEVBQ0ksSUFBSSxnQkFBZ0I7QUFDaEIsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUN6QjtBQUFBLEVBQ0ksSUFBSSxVQUFVO0FBQ1YsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUN6QjtBQUFBLEVBQ0ksSUFBSSxhQUFhO0FBQ2IsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUN6QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVNJLE9BQU8sT0FBT3VJLEdBQWV6YixHQUFTbVMsR0FBUTtBQUUxQyxVQUFNd0osSUFBYSxvQkFBSSxJQUFLO0FBRTVCLGVBQVdoWCxLQUFRM0UsR0FBUztBQUN4QixZQUFNNGIsSUFBc0JULEdBQWlCeFcsRUFBSyxNQUFNOFcsQ0FBYSxDQUFDO0FBQ3RFLFVBQUksQ0FBQ0csRUFBb0I7QUFDckIsY0FBTSxJQUFJLE1BQU0sbUNBQW1DSCxDQUFhLG1EQUFtRDtBQUV2SCxpQkFBV3phLEtBQVM0YSxHQUFxQjtBQUNyQyxZQUFJRCxFQUFXLElBQUkzYSxDQUFLO0FBQ3BCLGdCQUFNLElBQUksTUFBTSwwQkFBMEIsT0FBT3lhLENBQWEsQ0FBQyx3QkFBd0IsT0FBT3phLENBQUssQ0FBQyxFQUFFO0FBRTFHLFFBQUEyYSxFQUFXLElBQUkzYSxHQUFPMkQsQ0FBSTtBQUFBLE1BQzFDO0FBQUEsSUFDQTtBQUNRLFdBQU8sSUFBSTZXLEdBQXNCO0FBQUEsTUFDN0IsVUFBVWxZLEVBQXNCO0FBQUEsTUFDaEMsZUFBQW1ZO0FBQUEsTUFDQSxTQUFBemI7QUFBQSxNQUNBLFlBQUEyYjtBQUFBLE1BQ0EsR0FBRzNILEVBQW9CN0IsQ0FBTTtBQUFBLElBQ3pDLENBQVM7QUFBQSxFQUNUO0FBQ0E7QUFDQSxTQUFTMEosR0FBWW5VLEdBQUdlLEdBQUc7QUFDdkIsUUFBTXFULElBQVFwSyxHQUFjaEssQ0FBQyxHQUN2QnFVLElBQVFySyxHQUFjakosQ0FBQztBQUM3QixNQUFJZixNQUFNZTtBQUNOLFdBQU8sRUFBRSxPQUFPLElBQU0sTUFBTWYsRUFBRztBQUU5QixNQUFJb1UsTUFBVXJLLEVBQWMsVUFBVXNLLE1BQVV0SyxFQUFjLFFBQVE7QUFDdkUsVUFBTXVLLElBQVEvYSxFQUFLLFdBQVd3SCxDQUFDLEdBQ3pCd1QsSUFBYWhiLEVBQUssV0FBV3lHLENBQUMsRUFBRSxPQUFPLENBQUM5RyxNQUFRb2IsRUFBTSxRQUFRcGIsQ0FBRyxNQUFNLEVBQUUsR0FDekVzYixJQUFTLEVBQUUsR0FBR3hVLEdBQUcsR0FBR2UsRUFBRztBQUM3QixlQUFXN0gsS0FBT3FiLEdBQVk7QUFDMUIsWUFBTUUsSUFBY04sR0FBWW5VLEVBQUU5RyxDQUFHLEdBQUc2SCxFQUFFN0gsQ0FBRyxDQUFDO0FBQzlDLFVBQUksQ0FBQ3ViLEVBQVk7QUFDYixlQUFPLEVBQUUsT0FBTyxHQUFPO0FBRTNCLE1BQUFELEVBQU90YixDQUFHLElBQUl1YixFQUFZO0FBQUEsSUFDdEM7QUFDUSxXQUFPLEVBQUUsT0FBTyxJQUFNLE1BQU1ELEVBQVE7QUFBQSxFQUM1QyxXQUNhSixNQUFVckssRUFBYyxTQUFTc0ssTUFBVXRLLEVBQWMsT0FBTztBQUNyRSxRQUFJL0osRUFBRSxXQUFXZSxFQUFFO0FBQ2YsYUFBTyxFQUFFLE9BQU8sR0FBTztBQUUzQixVQUFNMlQsSUFBVyxDQUFFO0FBQ25CLGFBQVM1UyxJQUFRLEdBQUdBLElBQVE5QixFQUFFLFFBQVE4QixLQUFTO0FBQzNDLFlBQU02UyxJQUFRM1UsRUFBRThCLENBQUssR0FDZjhTLElBQVE3VCxFQUFFZSxDQUFLLEdBQ2YyUyxJQUFjTixHQUFZUSxHQUFPQyxDQUFLO0FBQzVDLFVBQUksQ0FBQ0gsRUFBWTtBQUNiLGVBQU8sRUFBRSxPQUFPLEdBQU87QUFFM0IsTUFBQUMsRUFBUyxLQUFLRCxFQUFZLElBQUk7QUFBQSxJQUMxQztBQUNRLFdBQU8sRUFBRSxPQUFPLElBQU0sTUFBTUMsRUFBVTtBQUFBLEVBQzlDLE1BQ1MsUUFBSU4sTUFBVXJLLEVBQWMsUUFBUXNLLE1BQVV0SyxFQUFjLFFBQVEsQ0FBQy9KLEtBQU0sQ0FBQ2UsSUFDdEUsRUFBRSxPQUFPLElBQU0sTUFBTWYsRUFBRyxJQUd4QixFQUFFLE9BQU8sR0FBTztBQUUvQjtBQUNPLE1BQU0wTixXQUF3QmYsRUFBUTtBQUFBLEVBQ3pDLE9BQU81SSxHQUFPO0FBQ1YsVUFBTSxFQUFFLFFBQUFzSCxHQUFRLEtBQUFILEVBQUcsSUFBSyxLQUFLLG9CQUFvQm5ILENBQUssR0FDaEQ4USxJQUFlLENBQUNDLEdBQVlDLE1BQWdCO0FBQzlDLFVBQUloSixHQUFVK0ksQ0FBVSxLQUFLL0ksR0FBVWdKLENBQVc7QUFDOUMsZUFBT3ZKO0FBRVgsWUFBTXdKLElBQVNiLEdBQVlXLEVBQVcsT0FBT0MsRUFBWSxLQUFLO0FBQzlELGFBQUtDLEVBQU8sVUFNUmhKLEdBQVE4SSxDQUFVLEtBQUs5SSxHQUFRK0ksQ0FBVyxNQUMxQzFKLEVBQU8sTUFBTyxHQUVYLEVBQUUsUUFBUUEsRUFBTyxPQUFPLE9BQU8ySixFQUFPLEtBQU0sTUFSL0MvSixFQUFrQkMsR0FBSztBQUFBLFFBQ25CLE1BQU1oQixFQUFhO0FBQUEsTUFDdkMsQ0FBaUIsR0FDTXNCO0FBQUEsSUFNZDtBQUNELFdBQUlOLEVBQUksT0FBTyxRQUNKLFFBQVEsSUFBSTtBQUFBLE1BQ2YsS0FBSyxLQUFLLEtBQUssWUFBWTtBQUFBLFFBQ3ZCLE1BQU1BLEVBQUk7QUFBQSxRQUNWLE1BQU1BLEVBQUk7QUFBQSxRQUNWLFFBQVFBO0FBQUEsTUFDNUIsQ0FBaUI7QUFBQSxNQUNELEtBQUssS0FBSyxNQUFNLFlBQVk7QUFBQSxRQUN4QixNQUFNQSxFQUFJO0FBQUEsUUFDVixNQUFNQSxFQUFJO0FBQUEsUUFDVixRQUFRQTtBQUFBLE1BQzVCLENBQWlCO0FBQUEsSUFDakIsQ0FBYSxFQUFFLEtBQUssQ0FBQyxDQUFDK0osR0FBTUMsQ0FBSyxNQUFNTCxFQUFhSSxHQUFNQyxDQUFLLENBQUMsSUFHN0NMLEVBQWEsS0FBSyxLQUFLLEtBQUssV0FBVztBQUFBLE1BQzFDLE1BQU0zSixFQUFJO0FBQUEsTUFDVixNQUFNQSxFQUFJO0FBQUEsTUFDVixRQUFRQTtBQUFBLElBQ1gsQ0FBQSxHQUFHLEtBQUssS0FBSyxNQUFNLFdBQVc7QUFBQSxNQUMzQixNQUFNQSxFQUFJO0FBQUEsTUFDVixNQUFNQSxFQUFJO0FBQUEsTUFDVixRQUFRQTtBQUFBLElBQ3hCLENBQWEsQ0FBQztBQUFBLEVBRWQ7QUFDQTtBQUNBd0MsR0FBZ0IsU0FBUyxDQUFDdUgsR0FBTUMsR0FBT3pLLE1BQzVCLElBQUlpRCxHQUFnQjtBQUFBLEVBQ3ZCLE1BQU11SDtBQUFBLEVBQ04sT0FBT0M7QUFBQSxFQUNQLFVBQVV0WixFQUFzQjtBQUFBLEVBQ2hDLEdBQUcwUSxFQUFvQjdCLENBQU07QUFDckMsQ0FBSztBQUdFLE1BQU0rSCxXQUFpQjdGLEVBQVE7QUFBQSxFQUNsQyxPQUFPNUksR0FBTztBQUNWLFVBQU0sRUFBRSxRQUFBc0gsR0FBUSxLQUFBSCxFQUFHLElBQUssS0FBSyxvQkFBb0JuSCxDQUFLO0FBQ3RELFFBQUltSCxFQUFJLGVBQWVuQixFQUFjO0FBQ2pDLGFBQUFrQixFQUFrQkMsR0FBSztBQUFBLFFBQ25CLE1BQU1oQixFQUFhO0FBQUEsUUFDbkIsVUFBVUgsRUFBYztBQUFBLFFBQ3hCLFVBQVVtQixFQUFJO0FBQUEsTUFDOUIsQ0FBYSxHQUNNTTtBQUVYLFFBQUlOLEVBQUksS0FBSyxTQUFTLEtBQUssS0FBSyxNQUFNO0FBQ2xDLGFBQUFELEVBQWtCQyxHQUFLO0FBQUEsUUFDbkIsTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixTQUFTLEtBQUssS0FBSyxNQUFNO0FBQUEsUUFDekIsV0FBVztBQUFBLFFBQ1gsT0FBTztBQUFBLFFBQ1AsTUFBTTtBQUFBLE1BQ3RCLENBQWEsR0FDTXNCO0FBR1gsSUFBSSxDQURTLEtBQUssS0FBSyxRQUNWTixFQUFJLEtBQUssU0FBUyxLQUFLLEtBQUssTUFBTSxXQUMzQ0QsRUFBa0JDLEdBQUs7QUFBQSxNQUNuQixNQUFNaEIsRUFBYTtBQUFBLE1BQ25CLFNBQVMsS0FBSyxLQUFLLE1BQU07QUFBQSxNQUN6QixXQUFXO0FBQUEsTUFDWCxPQUFPO0FBQUEsTUFDUCxNQUFNO0FBQUEsSUFDdEIsQ0FBYSxHQUNEbUIsRUFBTyxNQUFPO0FBRWxCLFVBQU14UixJQUFRLENBQUMsR0FBR3FSLEVBQUksSUFBSSxFQUNyQixJQUFJLENBQUM3VSxHQUFNOGUsTUFBYztBQUMxQixZQUFNNVgsSUFBUyxLQUFLLEtBQUssTUFBTTRYLENBQVMsS0FBSyxLQUFLLEtBQUs7QUFDdkQsYUFBSzVYLElBRUVBLEVBQU8sT0FBTyxJQUFJNE8sR0FBbUJqQixHQUFLN1UsR0FBTTZVLEVBQUksTUFBTWlLLENBQVMsQ0FBQyxJQURoRTtBQUFBLElBRWQsQ0FBQSxFQUNJLE9BQU8sQ0FBQy9YLE1BQU0sQ0FBQyxDQUFDQSxDQUFDO0FBQ3RCLFdBQUk4TixFQUFJLE9BQU8sUUFDSixRQUFRLElBQUlyUixDQUFLLEVBQUUsS0FBSyxDQUFDeVIsTUFDckJGLEdBQVksV0FBV0MsR0FBUUMsQ0FBTyxDQUNoRCxJQUdNRixHQUFZLFdBQVdDLEdBQVF4UixDQUFLO0FBQUEsRUFFdkQ7QUFBQSxFQUNJLElBQUksUUFBUTtBQUNSLFdBQU8sS0FBSyxLQUFLO0FBQUEsRUFDekI7QUFBQSxFQUNJLEtBQUs2RCxHQUFNO0FBQ1AsV0FBTyxJQUFJOFUsR0FBUztBQUFBLE1BQ2hCLEdBQUcsS0FBSztBQUFBLE1BQ1IsTUFBQTlVO0FBQUEsSUFDWixDQUFTO0FBQUEsRUFDVDtBQUNBO0FBQ0E4VSxHQUFTLFNBQVMsQ0FBQzRDLEdBQVMzSyxNQUFXO0FBQ25DLE1BQUksQ0FBQyxNQUFNLFFBQVEySyxDQUFPO0FBQ3RCLFVBQU0sSUFBSSxNQUFNLHVEQUF1RDtBQUUzRSxTQUFPLElBQUk1QyxHQUFTO0FBQUEsSUFDaEIsT0FBTzRDO0FBQUEsSUFDUCxVQUFVeFosRUFBc0I7QUFBQSxJQUNoQyxNQUFNO0FBQUEsSUFDTixHQUFHMFEsRUFBb0I3QixDQUFNO0FBQUEsRUFDckMsQ0FBSztBQUNMO0FBQ08sTUFBTTRLLFdBQWtCMUksRUFBUTtBQUFBLEVBQ25DLElBQUksWUFBWTtBQUNaLFdBQU8sS0FBSyxLQUFLO0FBQUEsRUFDekI7QUFBQSxFQUNJLElBQUksY0FBYztBQUNkLFdBQU8sS0FBSyxLQUFLO0FBQUEsRUFDekI7QUFBQSxFQUNJLE9BQU81SSxHQUFPO0FBQ1YsVUFBTSxFQUFFLFFBQUFzSCxHQUFRLEtBQUFILEVBQUcsSUFBSyxLQUFLLG9CQUFvQm5ILENBQUs7QUFDdEQsUUFBSW1ILEVBQUksZUFBZW5CLEVBQWM7QUFDakMsYUFBQWtCLEVBQWtCQyxHQUFLO0FBQUEsUUFDbkIsTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixVQUFVSCxFQUFjO0FBQUEsUUFDeEIsVUFBVW1CLEVBQUk7QUFBQSxNQUM5QixDQUFhLEdBQ01NO0FBRVgsVUFBTUMsSUFBUSxDQUFFLEdBQ1Z2TSxJQUFVLEtBQUssS0FBSyxTQUNwQm9XLElBQVksS0FBSyxLQUFLO0FBQzVCLGVBQVdwYyxLQUFPZ1MsRUFBSTtBQUNsQixNQUFBTyxFQUFNLEtBQUs7QUFBQSxRQUNQLEtBQUt2TSxFQUFRLE9BQU8sSUFBSWlOLEdBQW1CakIsR0FBS2hTLEdBQUtnUyxFQUFJLE1BQU1oUyxDQUFHLENBQUM7QUFBQSxRQUNuRSxPQUFPb2MsRUFBVSxPQUFPLElBQUluSixHQUFtQmpCLEdBQUtBLEVBQUksS0FBS2hTLENBQUcsR0FBR2dTLEVBQUksTUFBTWhTLENBQUcsQ0FBQztBQUFBLFFBQ2pGLFdBQVdBLEtBQU9nUyxFQUFJO0FBQUEsTUFDdEMsQ0FBYTtBQUVMLFdBQUlBLEVBQUksT0FBTyxRQUNKRSxHQUFZLGlCQUFpQkMsR0FBUUksQ0FBSyxJQUcxQ0wsR0FBWSxnQkFBZ0JDLEdBQVFJLENBQUs7QUFBQSxFQUU1RDtBQUFBLEVBQ0ksSUFBSSxVQUFVO0FBQ1YsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUN6QjtBQUFBLEVBQ0ksT0FBTyxPQUFPOVEsR0FBT0MsR0FBUTJhLEdBQU87QUFDaEMsV0FBSTNhLGFBQWtCK1IsSUFDWCxJQUFJMEksR0FBVTtBQUFBLE1BQ2pCLFNBQVMxYTtBQUFBLE1BQ1QsV0FBV0M7QUFBQSxNQUNYLFVBQVVnQixFQUFzQjtBQUFBLE1BQ2hDLEdBQUcwUSxFQUFvQmlKLENBQUs7QUFBQSxJQUM1QyxDQUFhLElBRUUsSUFBSUYsR0FBVTtBQUFBLE1BQ2pCLFNBQVNoRixHQUFVLE9BQVE7QUFBQSxNQUMzQixXQUFXMVY7QUFBQSxNQUNYLFVBQVVpQixFQUFzQjtBQUFBLE1BQ2hDLEdBQUcwUSxFQUFvQjFSLENBQU07QUFBQSxJQUN6QyxDQUFTO0FBQUEsRUFDVDtBQUNBO0FBQ08sTUFBTTRhLFdBQWU3SSxFQUFRO0FBQUEsRUFDaEMsSUFBSSxZQUFZO0FBQ1osV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUN6QjtBQUFBLEVBQ0ksSUFBSSxjQUFjO0FBQ2QsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUN6QjtBQUFBLEVBQ0ksT0FBTzVJLEdBQU87QUFDVixVQUFNLEVBQUUsUUFBQXNILEdBQVEsS0FBQUgsRUFBRyxJQUFLLEtBQUssb0JBQW9CbkgsQ0FBSztBQUN0RCxRQUFJbUgsRUFBSSxlQUFlbkIsRUFBYztBQUNqQyxhQUFBa0IsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixNQUFNaEIsRUFBYTtBQUFBLFFBQ25CLFVBQVVILEVBQWM7QUFBQSxRQUN4QixVQUFVbUIsRUFBSTtBQUFBLE1BQzlCLENBQWEsR0FDTU07QUFFWCxVQUFNdE0sSUFBVSxLQUFLLEtBQUssU0FDcEJvVyxJQUFZLEtBQUssS0FBSyxXQUN0QjdKLElBQVEsQ0FBQyxHQUFHUCxFQUFJLEtBQUssUUFBTyxDQUFFLEVBQUUsSUFBSSxDQUFDLENBQUNoUyxHQUFLSSxDQUFLLEdBQUd3SSxPQUM5QztBQUFBLE1BQ0gsS0FBSzVDLEVBQVEsT0FBTyxJQUFJaU4sR0FBbUJqQixHQUFLaFMsR0FBS2dTLEVBQUksTUFBTSxDQUFDcEosR0FBTyxLQUFLLENBQUMsQ0FBQztBQUFBLE1BQzlFLE9BQU93VCxFQUFVLE9BQU8sSUFBSW5KLEdBQW1CakIsR0FBSzVSLEdBQU80UixFQUFJLE1BQU0sQ0FBQ3BKLEdBQU8sT0FBTyxDQUFDLENBQUM7QUFBQSxJQUN6RixFQUNKO0FBQ0QsUUFBSW9KLEVBQUksT0FBTyxPQUFPO0FBQ2xCLFlBQU11SyxJQUFXLG9CQUFJLElBQUs7QUFDMUIsYUFBTyxRQUFRLFVBQVUsS0FBSyxZQUFZO0FBQ3RDLG1CQUFXOUosS0FBUUYsR0FBTztBQUN0QixnQkFBTXZTLElBQU0sTUFBTXlTLEVBQUssS0FDakJyUyxJQUFRLE1BQU1xUyxFQUFLO0FBQ3pCLGNBQUl6UyxFQUFJLFdBQVcsYUFBYUksRUFBTSxXQUFXO0FBQzdDLG1CQUFPa1M7QUFFWCxXQUFJdFMsRUFBSSxXQUFXLFdBQVdJLEVBQU0sV0FBVyxZQUMzQytSLEVBQU8sTUFBTyxHQUVsQm9LLEVBQVMsSUFBSXZjLEVBQUksT0FBT0ksRUFBTSxLQUFLO0FBQUEsUUFDdkQ7QUFDZ0IsZUFBTyxFQUFFLFFBQVErUixFQUFPLE9BQU8sT0FBT29LLEVBQVU7QUFBQSxNQUNoRSxDQUFhO0FBQUEsSUFDYixPQUNhO0FBQ0QsWUFBTUEsSUFBVyxvQkFBSSxJQUFLO0FBQzFCLGlCQUFXOUosS0FBUUYsR0FBTztBQUN0QixjQUFNdlMsSUFBTXlTLEVBQUssS0FDWHJTLElBQVFxUyxFQUFLO0FBQ25CLFlBQUl6UyxFQUFJLFdBQVcsYUFBYUksRUFBTSxXQUFXO0FBQzdDLGlCQUFPa1M7QUFFWCxTQUFJdFMsRUFBSSxXQUFXLFdBQVdJLEVBQU0sV0FBVyxZQUMzQytSLEVBQU8sTUFBTyxHQUVsQm9LLEVBQVMsSUFBSXZjLEVBQUksT0FBT0ksRUFBTSxLQUFLO0FBQUEsTUFDbkQ7QUFDWSxhQUFPLEVBQUUsUUFBUStSLEVBQU8sT0FBTyxPQUFPb0ssRUFBVTtBQUFBLElBQzVEO0FBQUEsRUFDQTtBQUNBO0FBQ0FELEdBQU8sU0FBUyxDQUFDdFcsR0FBU29XLEdBQVc3SyxNQUMxQixJQUFJK0ssR0FBTztBQUFBLEVBQ2QsV0FBQUY7QUFBQSxFQUNBLFNBQUFwVztBQUFBLEVBQ0EsVUFBVXRELEVBQXNCO0FBQUEsRUFDaEMsR0FBRzBRLEVBQW9CN0IsQ0FBTTtBQUNyQyxDQUFLO0FBRUUsTUFBTWlMLFdBQWUvSSxFQUFRO0FBQUEsRUFDaEMsT0FBTzVJLEdBQU87QUFDVixVQUFNLEVBQUUsUUFBQXNILEdBQVEsS0FBQUgsRUFBRyxJQUFLLEtBQUssb0JBQW9CbkgsQ0FBSztBQUN0RCxRQUFJbUgsRUFBSSxlQUFlbkIsRUFBYztBQUNqQyxhQUFBa0IsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixNQUFNaEIsRUFBYTtBQUFBLFFBQ25CLFVBQVVILEVBQWM7QUFBQSxRQUN4QixVQUFVbUIsRUFBSTtBQUFBLE1BQzlCLENBQWEsR0FDTU07QUFFWCxVQUFNelMsSUFBTSxLQUFLO0FBQ2pCLElBQUlBLEVBQUksWUFBWSxRQUNabVMsRUFBSSxLQUFLLE9BQU9uUyxFQUFJLFFBQVEsVUFDNUJrUyxFQUFrQkMsR0FBSztBQUFBLE1BQ25CLE1BQU1oQixFQUFhO0FBQUEsTUFDbkIsU0FBU25SLEVBQUksUUFBUTtBQUFBLE1BQ3JCLE1BQU07QUFBQSxNQUNOLFdBQVc7QUFBQSxNQUNYLE9BQU87QUFBQSxNQUNQLFNBQVNBLEVBQUksUUFBUTtBQUFBLElBQ3pDLENBQWlCLEdBQ0RzUyxFQUFPLE1BQU8sSUFHbEJ0UyxFQUFJLFlBQVksUUFDWm1TLEVBQUksS0FBSyxPQUFPblMsRUFBSSxRQUFRLFVBQzVCa1MsRUFBa0JDLEdBQUs7QUFBQSxNQUNuQixNQUFNaEIsRUFBYTtBQUFBLE1BQ25CLFNBQVNuUixFQUFJLFFBQVE7QUFBQSxNQUNyQixNQUFNO0FBQUEsTUFDTixXQUFXO0FBQUEsTUFDWCxPQUFPO0FBQUEsTUFDUCxTQUFTQSxFQUFJLFFBQVE7QUFBQSxJQUN6QyxDQUFpQixHQUNEc1MsRUFBTyxNQUFPO0FBR3RCLFVBQU1pSyxJQUFZLEtBQUssS0FBSztBQUM1QixhQUFTSyxFQUFZQyxHQUFVO0FBQzNCLFlBQU1DLElBQVksb0JBQUksSUFBSztBQUMzQixpQkFBV0MsS0FBV0YsR0FBVTtBQUM1QixZQUFJRSxFQUFRLFdBQVc7QUFDbkIsaUJBQU90SztBQUNYLFFBQUlzSyxFQUFRLFdBQVcsV0FDbkJ6SyxFQUFPLE1BQU8sR0FDbEJ3SyxFQUFVLElBQUlDLEVBQVEsS0FBSztBQUFBLE1BQzNDO0FBQ1ksYUFBTyxFQUFFLFFBQVF6SyxFQUFPLE9BQU8sT0FBT3dLLEVBQVc7QUFBQSxJQUM3RDtBQUNRLFVBQU1ELElBQVcsQ0FBQyxHQUFHMUssRUFBSSxLQUFLLFFBQVEsRUFBRSxJQUFJLENBQUM3VSxHQUFNSixNQUFNcWYsRUFBVSxPQUFPLElBQUluSixHQUFtQmpCLEdBQUs3VSxHQUFNNlUsRUFBSSxNQUFNalYsQ0FBQyxDQUFDLENBQUM7QUFDekgsV0FBSWlWLEVBQUksT0FBTyxRQUNKLFFBQVEsSUFBSTBLLENBQVEsRUFBRSxLQUFLLENBQUNBLE1BQWFELEVBQVlDLENBQVEsQ0FBQyxJQUc5REQsRUFBWUMsQ0FBUTtBQUFBLEVBRXZDO0FBQUEsRUFDSSxJQUFJRyxHQUFTcGEsR0FBUztBQUNsQixXQUFPLElBQUkrWixHQUFPO0FBQUEsTUFDZCxHQUFHLEtBQUs7QUFBQSxNQUNSLFNBQVMsRUFBRSxPQUFPSyxHQUFTLFNBQVNyYSxFQUFVLFNBQVNDLENBQU8sRUFBRztBQUFBLElBQzdFLENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSxJQUFJcWEsR0FBU3JhLEdBQVM7QUFDbEIsV0FBTyxJQUFJK1osR0FBTztBQUFBLE1BQ2QsR0FBRyxLQUFLO0FBQUEsTUFDUixTQUFTLEVBQUUsT0FBT00sR0FBUyxTQUFTdGEsRUFBVSxTQUFTQyxDQUFPLEVBQUc7QUFBQSxJQUM3RSxDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksS0FBS3NhLEdBQU10YSxHQUFTO0FBQ2hCLFdBQU8sS0FBSyxJQUFJc2EsR0FBTXRhLENBQU8sRUFBRSxJQUFJc2EsR0FBTXRhLENBQU87QUFBQSxFQUN4RDtBQUFBLEVBQ0ksU0FBU0EsR0FBUztBQUNkLFdBQU8sS0FBSyxJQUFJLEdBQUdBLENBQU87QUFBQSxFQUNsQztBQUNBO0FBQ0ErWixHQUFPLFNBQVMsQ0FBQ0osR0FBVzdLLE1BQ2pCLElBQUlpTCxHQUFPO0FBQUEsRUFDZCxXQUFBSjtBQUFBLEVBQ0EsU0FBUztBQUFBLEVBQ1QsU0FBUztBQUFBLEVBQ1QsVUFBVTFaLEVBQXNCO0FBQUEsRUFDaEMsR0FBRzBRLEVBQW9CN0IsQ0FBTTtBQUNyQyxDQUFLO0FBb0hFLE1BQU1pSixXQUFnQi9HLEVBQVE7QUFBQSxFQUNqQyxJQUFJLFNBQVM7QUFDVCxXQUFPLEtBQUssS0FBSyxPQUFRO0FBQUEsRUFDakM7QUFBQSxFQUNJLE9BQU81SSxHQUFPO0FBQ1YsVUFBTSxFQUFFLEtBQUFtSCxFQUFLLElBQUcsS0FBSyxvQkFBb0JuSCxDQUFLO0FBRTlDLFdBRG1CLEtBQUssS0FBSyxPQUFRLEVBQ25CLE9BQU8sRUFBRSxNQUFNbUgsRUFBSSxNQUFNLE1BQU1BLEVBQUksTUFBTSxRQUFRQSxFQUFHLENBQUU7QUFBQSxFQUNoRjtBQUNBO0FBQ0F3SSxHQUFRLFNBQVMsQ0FBQ3dDLEdBQVF6TCxNQUNmLElBQUlpSixHQUFRO0FBQUEsRUFDZixRQUFRd0M7QUFBQSxFQUNSLFVBQVV0YSxFQUFzQjtBQUFBLEVBQ2hDLEdBQUcwUSxFQUFvQjdCLENBQU07QUFDckMsQ0FBSztBQUVFLE1BQU1rSixXQUFtQmhILEVBQVE7QUFBQSxFQUNwQyxPQUFPNUksR0FBTztBQUNWLFFBQUlBLEVBQU0sU0FBUyxLQUFLLEtBQUssT0FBTztBQUNoQyxZQUFNbUgsSUFBTSxLQUFLLGdCQUFnQm5ILENBQUs7QUFDdEMsYUFBQWtILEVBQWtCQyxHQUFLO0FBQUEsUUFDbkIsVUFBVUEsRUFBSTtBQUFBLFFBQ2QsTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixVQUFVLEtBQUssS0FBSztBQUFBLE1BQ3BDLENBQWEsR0FDTXNCO0FBQUEsSUFDbkI7QUFDUSxXQUFPLEVBQUUsUUFBUSxTQUFTLE9BQU96SCxFQUFNLEtBQU07QUFBQSxFQUNyRDtBQUFBLEVBQ0ksSUFBSSxRQUFRO0FBQ1IsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUN6QjtBQUNBO0FBQ0E0UCxHQUFXLFNBQVMsQ0FBQ3JhLEdBQU9tUixNQUNqQixJQUFJa0osR0FBVztBQUFBLEVBQ2xCLE9BQU9yYTtBQUFBLEVBQ1AsVUFBVXNDLEVBQXNCO0FBQUEsRUFDaEMsR0FBRzBRLEVBQW9CN0IsQ0FBTTtBQUNyQyxDQUFLO0FBRUwsU0FBUzJJLEdBQWMvVCxHQUFRb0wsR0FBUTtBQUNuQyxTQUFPLElBQUltSixHQUFRO0FBQUEsSUFDZixRQUFBdlU7QUFBQSxJQUNBLFVBQVV6RCxFQUFzQjtBQUFBLElBQ2hDLEdBQUcwUSxFQUFvQjdCLENBQU07QUFBQSxFQUNyQyxDQUFLO0FBQ0w7QUFDTyxNQUFNbUosV0FBZ0JqSCxFQUFRO0FBQUEsRUFDakMsT0FBTzVJLEdBQU87QUFDVixRQUFJLE9BQU9BLEVBQU0sUUFBUyxVQUFVO0FBQ2hDLFlBQU1tSCxJQUFNLEtBQUssZ0JBQWdCbkgsQ0FBSyxHQUNoQ29TLElBQWlCLEtBQUssS0FBSztBQUNqQyxhQUFBbEwsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixVQUFVM1IsRUFBSyxXQUFXNGMsQ0FBYztBQUFBLFFBQ3hDLFVBQVVqTCxFQUFJO0FBQUEsUUFDZCxNQUFNaEIsRUFBYTtBQUFBLE1BQ25DLENBQWEsR0FDTXNCO0FBQUEsSUFDbkI7QUFJUSxRQUhLLEtBQUssV0FDTixLQUFLLFNBQVMsSUFBSSxJQUFJLEtBQUssS0FBSyxNQUFNLElBRXRDLENBQUMsS0FBSyxPQUFPLElBQUl6SCxFQUFNLElBQUksR0FBRztBQUM5QixZQUFNbUgsSUFBTSxLQUFLLGdCQUFnQm5ILENBQUssR0FDaENvUyxJQUFpQixLQUFLLEtBQUs7QUFDakMsYUFBQWxMLEVBQWtCQyxHQUFLO0FBQUEsUUFDbkIsVUFBVUEsRUFBSTtBQUFBLFFBQ2QsTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixTQUFTaU07QUFBQSxNQUN6QixDQUFhLEdBQ00zSztBQUFBLElBQ25CO0FBQ1EsV0FBT00sR0FBRy9ILEVBQU0sSUFBSTtBQUFBLEVBQzVCO0FBQUEsRUFDSSxJQUFJLFVBQVU7QUFDVixXQUFPLEtBQUssS0FBSztBQUFBLEVBQ3pCO0FBQUEsRUFDSSxJQUFJLE9BQU87QUFDUCxVQUFNcVMsSUFBYSxDQUFFO0FBQ3JCLGVBQVc5YixLQUFPLEtBQUssS0FBSztBQUN4QixNQUFBOGIsRUFBVzliLENBQUcsSUFBSUE7QUFFdEIsV0FBTzhiO0FBQUEsRUFDZjtBQUFBLEVBQ0ksSUFBSSxTQUFTO0FBQ1QsVUFBTUEsSUFBYSxDQUFFO0FBQ3JCLGVBQVc5YixLQUFPLEtBQUssS0FBSztBQUN4QixNQUFBOGIsRUFBVzliLENBQUcsSUFBSUE7QUFFdEIsV0FBTzhiO0FBQUEsRUFDZjtBQUFBLEVBQ0ksSUFBSSxPQUFPO0FBQ1AsVUFBTUEsSUFBYSxDQUFFO0FBQ3JCLGVBQVc5YixLQUFPLEtBQUssS0FBSztBQUN4QixNQUFBOGIsRUFBVzliLENBQUcsSUFBSUE7QUFFdEIsV0FBTzhiO0FBQUEsRUFDZjtBQUFBLEVBQ0ksUUFBUS9XLEdBQVFnWCxJQUFTLEtBQUssTUFBTTtBQUNoQyxXQUFPekMsR0FBUSxPQUFPdlUsR0FBUTtBQUFBLE1BQzFCLEdBQUcsS0FBSztBQUFBLE1BQ1IsR0FBR2dYO0FBQUEsSUFDZixDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksUUFBUWhYLEdBQVFnWCxJQUFTLEtBQUssTUFBTTtBQUNoQyxXQUFPekMsR0FBUSxPQUFPLEtBQUssUUFBUSxPQUFPLENBQUMwQyxNQUFRLENBQUNqWCxFQUFPLFNBQVNpWCxDQUFHLENBQUMsR0FBRztBQUFBLE1BQ3ZFLEdBQUcsS0FBSztBQUFBLE1BQ1IsR0FBR0Q7QUFBQSxJQUNmLENBQVM7QUFBQSxFQUNUO0FBQ0E7QUFDQXpDLEdBQVEsU0FBU1I7QUFDVixNQUFNUyxXQUFzQmxILEVBQVE7QUFBQSxFQUN2QyxPQUFPNUksR0FBTztBQUNWLFVBQU13UyxJQUFtQmhkLEVBQUssbUJBQW1CLEtBQUssS0FBSyxNQUFNLEdBQzNEMlIsSUFBTSxLQUFLLGdCQUFnQm5ILENBQUs7QUFDdEMsUUFBSW1ILEVBQUksZUFBZW5CLEVBQWMsVUFBVW1CLEVBQUksZUFBZW5CLEVBQWMsUUFBUTtBQUNwRixZQUFNb00sSUFBaUI1YyxFQUFLLGFBQWFnZCxDQUFnQjtBQUN6RCxhQUFBdEwsRUFBa0JDLEdBQUs7QUFBQSxRQUNuQixVQUFVM1IsRUFBSyxXQUFXNGMsQ0FBYztBQUFBLFFBQ3hDLFVBQVVqTCxFQUFJO0FBQUEsUUFDZCxNQUFNaEIsRUFBYTtBQUFBLE1BQ25DLENBQWEsR0FDTXNCO0FBQUEsSUFDbkI7QUFJUSxRQUhLLEtBQUssV0FDTixLQUFLLFNBQVMsSUFBSSxJQUFJalMsRUFBSyxtQkFBbUIsS0FBSyxLQUFLLE1BQU0sQ0FBQyxJQUUvRCxDQUFDLEtBQUssT0FBTyxJQUFJd0ssRUFBTSxJQUFJLEdBQUc7QUFDOUIsWUFBTW9TLElBQWlCNWMsRUFBSyxhQUFhZ2QsQ0FBZ0I7QUFDekQsYUFBQXRMLEVBQWtCQyxHQUFLO0FBQUEsUUFDbkIsVUFBVUEsRUFBSTtBQUFBLFFBQ2QsTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixTQUFTaU07QUFBQSxNQUN6QixDQUFhLEdBQ00zSztBQUFBLElBQ25CO0FBQ1EsV0FBT00sR0FBRy9ILEVBQU0sSUFBSTtBQUFBLEVBQzVCO0FBQUEsRUFDSSxJQUFJLE9BQU87QUFDUCxXQUFPLEtBQUssS0FBSztBQUFBLEVBQ3pCO0FBQ0E7QUFDQThQLEdBQWMsU0FBUyxDQUFDeFUsR0FBUW9MLE1BQ3JCLElBQUlvSixHQUFjO0FBQUEsRUFDckIsUUFBUXhVO0FBQUEsRUFDUixVQUFVekQsRUFBc0I7QUFBQSxFQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNO0FBQ3JDLENBQUs7QUFFRSxNQUFNNkMsV0FBbUJYLEVBQVE7QUFBQSxFQUNwQyxTQUFTO0FBQ0wsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUN6QjtBQUFBLEVBQ0ksT0FBTzVJLEdBQU87QUFDVixVQUFNLEVBQUUsS0FBQW1ILEVBQUssSUFBRyxLQUFLLG9CQUFvQm5ILENBQUs7QUFDOUMsUUFBSW1ILEVBQUksZUFBZW5CLEVBQWMsV0FBV21CLEVBQUksT0FBTyxVQUFVO0FBQ2pFLGFBQUFELEVBQWtCQyxHQUFLO0FBQUEsUUFDbkIsTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixVQUFVSCxFQUFjO0FBQUEsUUFDeEIsVUFBVW1CLEVBQUk7QUFBQSxNQUM5QixDQUFhLEdBQ01NO0FBRVgsVUFBTWdMLElBQWN0TCxFQUFJLGVBQWVuQixFQUFjLFVBQVVtQixFQUFJLE9BQU8sUUFBUSxRQUFRQSxFQUFJLElBQUk7QUFDbEcsV0FBT1ksR0FBRzBLLEVBQVksS0FBSyxDQUFDdk0sTUFDakIsS0FBSyxLQUFLLEtBQUssV0FBV0EsR0FBTTtBQUFBLE1BQ25DLE1BQU1pQixFQUFJO0FBQUEsTUFDVixVQUFVQSxFQUFJLE9BQU87QUFBQSxJQUNyQyxDQUFhLENBQ0osQ0FBQztBQUFBLEVBQ1Y7QUFDQTtBQUNBb0MsR0FBVyxTQUFTLENBQUMvUCxHQUFRa04sTUFDbEIsSUFBSTZDLEdBQVc7QUFBQSxFQUNsQixNQUFNL1A7QUFBQSxFQUNOLFVBQVUzQixFQUFzQjtBQUFBLEVBQ2hDLEdBQUcwUSxFQUFvQjdCLENBQU07QUFDckMsQ0FBSztBQUVFLE1BQU15QyxXQUFtQlAsRUFBUTtBQUFBLEVBQ3BDLFlBQVk7QUFDUixXQUFPLEtBQUssS0FBSztBQUFBLEVBQ3pCO0FBQUEsRUFDSSxhQUFhO0FBQ1QsV0FBTyxLQUFLLEtBQUssT0FBTyxLQUFLLGFBQWEvUSxFQUFzQixhQUMxRCxLQUFLLEtBQUssT0FBTyxXQUFVLElBQzNCLEtBQUssS0FBSztBQUFBLEVBQ3hCO0FBQUEsRUFDSSxPQUFPbUksR0FBTztBQUNWLFVBQU0sRUFBRSxRQUFBc0gsR0FBUSxLQUFBSCxFQUFHLElBQUssS0FBSyxvQkFBb0JuSCxDQUFLLEdBQ2hEMFMsSUFBUyxLQUFLLEtBQUssVUFBVSxNQUM3QkMsSUFBVztBQUFBLE1BQ2IsVUFBVSxDQUFDQyxNQUFRO0FBQ2YsUUFBQTFMLEVBQWtCQyxHQUFLeUwsQ0FBRyxHQUN0QkEsRUFBSSxRQUNKdEwsRUFBTyxNQUFPLElBR2RBLEVBQU8sTUFBTztBQUFBLE1BRXJCO0FBQUEsTUFDRCxJQUFJLE9BQU87QUFDUCxlQUFPSCxFQUFJO0FBQUEsTUFDZDtBQUFBLElBQ0o7QUFFRCxRQURBd0wsRUFBUyxXQUFXQSxFQUFTLFNBQVMsS0FBS0EsQ0FBUSxHQUMvQ0QsRUFBTyxTQUFTLGNBQWM7QUFDOUIsWUFBTUcsSUFBWUgsRUFBTyxVQUFVdkwsRUFBSSxNQUFNd0wsQ0FBUTtBQUNyRCxVQUFJeEwsRUFBSSxPQUFPO0FBQ1gsZUFBTyxRQUFRLFFBQVEwTCxDQUFTLEVBQUUsS0FBSyxPQUFPQSxNQUFjO0FBQ3hELGNBQUl2TCxFQUFPLFVBQVU7QUFDakIsbUJBQU9HO0FBQ1gsZ0JBQU1qTCxJQUFTLE1BQU0sS0FBSyxLQUFLLE9BQU8sWUFBWTtBQUFBLFlBQzlDLE1BQU1xVztBQUFBLFlBQ04sTUFBTTFMLEVBQUk7QUFBQSxZQUNWLFFBQVFBO0FBQUEsVUFDaEMsQ0FBcUI7QUFDRCxpQkFBSTNLLEVBQU8sV0FBVyxZQUNYaUwsSUFDUGpMLEVBQU8sV0FBVyxXQUVsQjhLLEVBQU8sVUFBVSxVQUNWUSxHQUFNdEwsRUFBTyxLQUFLLElBQ3RCQTtBQUFBLFFBQzNCLENBQWlCO0FBRUE7QUFDRCxZQUFJOEssRUFBTyxVQUFVO0FBQ2pCLGlCQUFPRztBQUNYLGNBQU1qTCxJQUFTLEtBQUssS0FBSyxPQUFPLFdBQVc7QUFBQSxVQUN2QyxNQUFNcVc7QUFBQSxVQUNOLE1BQU0xTCxFQUFJO0FBQUEsVUFDVixRQUFRQTtBQUFBLFFBQzVCLENBQWlCO0FBQ0QsZUFBSTNLLEVBQU8sV0FBVyxZQUNYaUwsSUFDUGpMLEVBQU8sV0FBVyxXQUVsQjhLLEVBQU8sVUFBVSxVQUNWUSxHQUFNdEwsRUFBTyxLQUFLLElBQ3RCQTtBQUFBLE1BQ3ZCO0FBQUEsSUFDQTtBQUNRLFFBQUlrVyxFQUFPLFNBQVMsY0FBYztBQUM5QixZQUFNSSxJQUFvQixDQUFDN1gsTUFBUTtBQUMvQixjQUFNdUIsSUFBU2tXLEVBQU8sV0FBV3pYLEdBQUswWCxDQUFRO0FBQzlDLFlBQUl4TCxFQUFJLE9BQU87QUFDWCxpQkFBTyxRQUFRLFFBQVEzSyxDQUFNO0FBRWpDLFlBQUlBLGFBQWtCO0FBQ2xCLGdCQUFNLElBQUksTUFBTSwyRkFBMkY7QUFFL0csZUFBT3ZCO0FBQUEsTUFDVjtBQUNELFVBQUlrTSxFQUFJLE9BQU8sVUFBVSxJQUFPO0FBQzVCLGNBQU00TCxJQUFRLEtBQUssS0FBSyxPQUFPLFdBQVc7QUFBQSxVQUN0QyxNQUFNNUwsRUFBSTtBQUFBLFVBQ1YsTUFBTUEsRUFBSTtBQUFBLFVBQ1YsUUFBUUE7QUFBQSxRQUM1QixDQUFpQjtBQUNELGVBQUk0TCxFQUFNLFdBQVcsWUFDVnRMLEtBQ1BzTCxFQUFNLFdBQVcsV0FDakJ6TCxFQUFPLE1BQU8sR0FFbEJ3TCxFQUFrQkMsRUFBTSxLQUFLLEdBQ3RCLEVBQUUsUUFBUXpMLEVBQU8sT0FBTyxPQUFPeUwsRUFBTSxNQUFPO0FBQUEsTUFDbkU7QUFFZ0IsZUFBTyxLQUFLLEtBQUssT0FBTyxZQUFZLEVBQUUsTUFBTTVMLEVBQUksTUFBTSxNQUFNQSxFQUFJLE1BQU0sUUFBUUEsRUFBSyxDQUFBLEVBQUUsS0FBSyxDQUFDNEwsTUFDbkZBLEVBQU0sV0FBVyxZQUNWdEwsS0FDUHNMLEVBQU0sV0FBVyxXQUNqQnpMLEVBQU8sTUFBTyxHQUNYd0wsRUFBa0JDLEVBQU0sS0FBSyxFQUFFLEtBQUssT0FDaEMsRUFBRSxRQUFRekwsRUFBTyxPQUFPLE9BQU95TCxFQUFNLE1BQU8sRUFDdEQsRUFDSjtBQUFBLElBRWpCO0FBQ1EsUUFBSUwsRUFBTyxTQUFTO0FBQ2hCLFVBQUl2TCxFQUFJLE9BQU8sVUFBVSxJQUFPO0FBQzVCLGNBQU0vSyxJQUFPLEtBQUssS0FBSyxPQUFPLFdBQVc7QUFBQSxVQUNyQyxNQUFNK0ssRUFBSTtBQUFBLFVBQ1YsTUFBTUEsRUFBSTtBQUFBLFVBQ1YsUUFBUUE7QUFBQSxRQUM1QixDQUFpQjtBQUNELFlBQUksQ0FBQ2UsR0FBUTlMLENBQUk7QUFDYixpQkFBT3FMO0FBQ1gsY0FBTWpMLElBQVNrVyxFQUFPLFVBQVV0VyxFQUFLLE9BQU91VyxDQUFRO0FBQ3BELFlBQUluVyxhQUFrQjtBQUNsQixnQkFBTSxJQUFJLE1BQU0saUdBQWlHO0FBRXJILGVBQU8sRUFBRSxRQUFROEssRUFBTyxPQUFPLE9BQU85SyxFQUFRO0FBQUEsTUFDOUQ7QUFFZ0IsZUFBTyxLQUFLLEtBQUssT0FBTyxZQUFZLEVBQUUsTUFBTTJLLEVBQUksTUFBTSxNQUFNQSxFQUFJLE1BQU0sUUFBUUEsRUFBSyxDQUFBLEVBQUUsS0FBSyxDQUFDL0ssTUFDbEY4TCxHQUFROUwsQ0FBSSxJQUVWLFFBQVEsUUFBUXNXLEVBQU8sVUFBVXRXLEVBQUssT0FBT3VXLENBQVEsQ0FBQyxFQUFFLEtBQUssQ0FBQ25XLE9BQVk7QUFBQSxVQUM3RSxRQUFROEssRUFBTztBQUFBLFVBQ2YsT0FBTzlLO0FBQUEsUUFDL0IsRUFBc0IsSUFKU2lMLENBS2Q7QUFHVCxJQUFBalMsRUFBSyxZQUFZa2QsQ0FBTTtBQUFBLEVBQy9CO0FBQ0E7QUFDQXZKLEdBQVcsU0FBUyxDQUFDM1AsR0FBUWtaLEdBQVFoTSxNQUMxQixJQUFJeUMsR0FBVztBQUFBLEVBQ2xCLFFBQUEzUDtBQUFBLEVBQ0EsVUFBVTNCLEVBQXNCO0FBQUEsRUFDaEMsUUFBQTZhO0FBQUEsRUFDQSxHQUFHbkssRUFBb0I3QixDQUFNO0FBQ3JDLENBQUs7QUFFTHlDLEdBQVcsdUJBQXVCLENBQUM2SixHQUFZeFosR0FBUWtOLE1BQzVDLElBQUl5QyxHQUFXO0FBQUEsRUFDbEIsUUFBQTNQO0FBQUEsRUFDQSxRQUFRLEVBQUUsTUFBTSxjQUFjLFdBQVd3WixFQUFZO0FBQUEsRUFDckQsVUFBVW5iLEVBQXNCO0FBQUEsRUFDaEMsR0FBRzBRLEVBQW9CN0IsQ0FBTTtBQUNyQyxDQUFLO0FBR0UsTUFBTTBDLFdBQW9CUixFQUFRO0FBQUEsRUFDckMsT0FBTzVJLEdBQU87QUFFVixXQURtQixLQUFLLFNBQVNBLENBQUssTUFDbkJnRyxFQUFjLFlBQ3RCK0IsR0FBRyxNQUFTLElBRWhCLEtBQUssS0FBSyxVQUFVLE9BQU8vSCxDQUFLO0FBQUEsRUFDL0M7QUFBQSxFQUNJLFNBQVM7QUFDTCxXQUFPLEtBQUssS0FBSztBQUFBLEVBQ3pCO0FBQ0E7QUFDQW9KLEdBQVksU0FBUyxDQUFDbFEsR0FBTXdOLE1BQ2pCLElBQUkwQyxHQUFZO0FBQUEsRUFDbkIsV0FBV2xRO0FBQUEsRUFDWCxVQUFVckIsRUFBc0I7QUFBQSxFQUNoQyxHQUFHMFEsRUFBb0I3QixDQUFNO0FBQ3JDLENBQUs7QUFFRSxNQUFNMkMsV0FBb0JULEVBQVE7QUFBQSxFQUNyQyxPQUFPNUksR0FBTztBQUVWLFdBRG1CLEtBQUssU0FBU0EsQ0FBSyxNQUNuQmdHLEVBQWMsT0FDdEIrQixHQUFHLElBQUksSUFFWCxLQUFLLEtBQUssVUFBVSxPQUFPL0gsQ0FBSztBQUFBLEVBQy9DO0FBQUEsRUFDSSxTQUFTO0FBQ0wsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUN6QjtBQUNBO0FBQ0FxSixHQUFZLFNBQVMsQ0FBQ25RLEdBQU13TixNQUNqQixJQUFJMkMsR0FBWTtBQUFBLEVBQ25CLFdBQVduUTtBQUFBLEVBQ1gsVUFBVXJCLEVBQXNCO0FBQUEsRUFDaEMsR0FBRzBRLEVBQW9CN0IsQ0FBTTtBQUNyQyxDQUFLO0FBRUUsTUFBTW9ELFdBQW1CbEIsRUFBUTtBQUFBLEVBQ3BDLE9BQU81SSxHQUFPO0FBQ1YsVUFBTSxFQUFFLEtBQUFtSCxFQUFLLElBQUcsS0FBSyxvQkFBb0JuSCxDQUFLO0FBQzlDLFFBQUlrRyxJQUFPaUIsRUFBSTtBQUNmLFdBQUlBLEVBQUksZUFBZW5CLEVBQWMsY0FDakNFLElBQU8sS0FBSyxLQUFLLGFBQWMsSUFFNUIsS0FBSyxLQUFLLFVBQVUsT0FBTztBQUFBLE1BQzlCLE1BQUFBO0FBQUEsTUFDQSxNQUFNaUIsRUFBSTtBQUFBLE1BQ1YsUUFBUUE7QUFBQSxJQUNwQixDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksZ0JBQWdCO0FBQ1osV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUN6QjtBQUNBO0FBQ0EyQyxHQUFXLFNBQVMsQ0FBQzVRLEdBQU13TixNQUNoQixJQUFJb0QsR0FBVztBQUFBLEVBQ2xCLFdBQVc1UTtBQUFBLEVBQ1gsVUFBVXJCLEVBQXNCO0FBQUEsRUFDaEMsY0FBYyxPQUFPNk8sRUFBTyxXQUFZLGFBQWFBLEVBQU8sVUFBVSxNQUFNQSxFQUFPO0FBQUEsRUFDbkYsR0FBRzZCLEVBQW9CN0IsQ0FBTTtBQUNyQyxDQUFLO0FBRUUsTUFBTXVELFdBQWlCckIsRUFBUTtBQUFBLEVBQ2xDLE9BQU81SSxHQUFPO0FBQ1YsVUFBTSxFQUFFLEtBQUFtSCxFQUFLLElBQUcsS0FBSyxvQkFBb0JuSCxDQUFLLEdBRXhDaVQsSUFBUztBQUFBLE1BQ1gsR0FBRzlMO0FBQUEsTUFDSCxRQUFRO0FBQUEsUUFDSixHQUFHQSxFQUFJO0FBQUEsUUFDUCxRQUFRLENBQUU7QUFBQSxNQUNiO0FBQUEsSUFDSixHQUNLM0ssSUFBUyxLQUFLLEtBQUssVUFBVSxPQUFPO0FBQUEsTUFDdEMsTUFBTXlXLEVBQU87QUFBQSxNQUNiLE1BQU1BLEVBQU87QUFBQSxNQUNiLFFBQVE7QUFBQSxRQUNKLEdBQUdBO0FBQUEsTUFDTjtBQUFBLElBQ2IsQ0FBUztBQUNELFdBQUk5SyxHQUFRM0wsQ0FBTSxJQUNQQSxFQUFPLEtBQUssQ0FBQ0EsT0FDVDtBQUFBLE1BQ0gsUUFBUTtBQUFBLE1BQ1IsT0FBT0EsRUFBTyxXQUFXLFVBQ25CQSxFQUFPLFFBQ1AsS0FBSyxLQUFLLFdBQVc7QUFBQSxRQUNuQixJQUFJLFFBQVE7QUFDUixpQkFBTyxJQUFJMUYsR0FBU21jLEVBQU8sT0FBTyxNQUFNO0FBQUEsUUFDM0M7QUFBQSxRQUNELE9BQU9BLEVBQU87QUFBQSxNQUMxQyxDQUF5QjtBQUFBLElBQ1IsRUFDSixJQUdNO0FBQUEsTUFDSCxRQUFRO0FBQUEsTUFDUixPQUFPelcsRUFBTyxXQUFXLFVBQ25CQSxFQUFPLFFBQ1AsS0FBSyxLQUFLLFdBQVc7QUFBQSxRQUNuQixJQUFJLFFBQVE7QUFDUixpQkFBTyxJQUFJMUYsR0FBU21jLEVBQU8sT0FBTyxNQUFNO0FBQUEsUUFDM0M7QUFBQSxRQUNELE9BQU9BLEVBQU87QUFBQSxNQUN0QyxDQUFxQjtBQUFBLElBQ1I7QUFBQSxFQUViO0FBQUEsRUFDSSxjQUFjO0FBQ1YsV0FBTyxLQUFLLEtBQUs7QUFBQSxFQUN6QjtBQUNBO0FBQ0FoSixHQUFTLFNBQVMsQ0FBQy9RLEdBQU13TixNQUNkLElBQUl1RCxHQUFTO0FBQUEsRUFDaEIsV0FBVy9RO0FBQUEsRUFDWCxVQUFVckIsRUFBc0I7QUFBQSxFQUNoQyxZQUFZLE9BQU82TyxFQUFPLFNBQVUsYUFBYUEsRUFBTyxRQUFRLE1BQU1BLEVBQU87QUFBQSxFQUM3RSxHQUFHNkIsRUFBb0I3QixDQUFNO0FBQ3JDLENBQUs7QUFFRSxNQUFNd00sV0FBZXRLLEVBQVE7QUFBQSxFQUNoQyxPQUFPNUksR0FBTztBQUVWLFFBRG1CLEtBQUssU0FBU0EsQ0FBSyxNQUNuQmdHLEVBQWMsS0FBSztBQUNsQyxZQUFNbUIsSUFBTSxLQUFLLGdCQUFnQm5ILENBQUs7QUFDdEMsYUFBQWtILEVBQWtCQyxHQUFLO0FBQUEsUUFDbkIsTUFBTWhCLEVBQWE7QUFBQSxRQUNuQixVQUFVSCxFQUFjO0FBQUEsUUFDeEIsVUFBVW1CLEVBQUk7QUFBQSxNQUM5QixDQUFhLEdBQ01NO0FBQUEsSUFDbkI7QUFDUSxXQUFPLEVBQUUsUUFBUSxTQUFTLE9BQU96SCxFQUFNLEtBQU07QUFBQSxFQUNyRDtBQUNBO0FBQ0FrVCxHQUFPLFNBQVMsQ0FBQ3hNLE1BQ04sSUFBSXdNLEdBQU87QUFBQSxFQUNkLFVBQVVyYixFQUFzQjtBQUFBLEVBQ2hDLEdBQUcwUSxFQUFvQjdCLENBQU07QUFDckMsQ0FBSztBQUdFLE1BQU1xRCxXQUFtQm5CLEVBQVE7QUFBQSxFQUNwQyxPQUFPNUksR0FBTztBQUNWLFVBQU0sRUFBRSxLQUFBbUgsRUFBSyxJQUFHLEtBQUssb0JBQW9CbkgsQ0FBSyxHQUN4Q2tHLElBQU9pQixFQUFJO0FBQ2pCLFdBQU8sS0FBSyxLQUFLLEtBQUssT0FBTztBQUFBLE1BQ3pCLE1BQUFqQjtBQUFBLE1BQ0EsTUFBTWlCLEVBQUk7QUFBQSxNQUNWLFFBQVFBO0FBQUEsSUFDcEIsQ0FBUztBQUFBLEVBQ1Q7QUFBQSxFQUNJLFNBQVM7QUFDTCxXQUFPLEtBQUssS0FBSztBQUFBLEVBQ3pCO0FBQ0E7QUFDTyxNQUFNaUQsV0FBb0J4QixFQUFRO0FBQUEsRUFDckMsT0FBTzVJLEdBQU87QUFDVixVQUFNLEVBQUUsUUFBQXNILEdBQVEsS0FBQUgsRUFBRyxJQUFLLEtBQUssb0JBQW9CbkgsQ0FBSztBQUN0RCxRQUFJbUgsRUFBSSxPQUFPO0FBcUJYLGNBcEJvQixZQUFZO0FBQzVCLGNBQU1nTSxJQUFXLE1BQU0sS0FBSyxLQUFLLEdBQUcsWUFBWTtBQUFBLFVBQzVDLE1BQU1oTSxFQUFJO0FBQUEsVUFDVixNQUFNQSxFQUFJO0FBQUEsVUFDVixRQUFRQTtBQUFBLFFBQzVCLENBQWlCO0FBQ0QsZUFBSWdNLEVBQVMsV0FBVyxZQUNiMUwsSUFDUDBMLEVBQVMsV0FBVyxXQUNwQjdMLEVBQU8sTUFBTyxHQUNQUSxHQUFNcUwsRUFBUyxLQUFLLEtBR3BCLEtBQUssS0FBSyxJQUFJLFlBQVk7QUFBQSxVQUM3QixNQUFNQSxFQUFTO0FBQUEsVUFDZixNQUFNaE0sRUFBSTtBQUFBLFVBQ1YsUUFBUUE7QUFBQSxRQUNoQyxDQUFxQjtBQUFBLE1BRVIsR0FDbUI7QUFFbkI7QUFDRCxZQUFNZ00sSUFBVyxLQUFLLEtBQUssR0FBRyxXQUFXO0FBQUEsUUFDckMsTUFBTWhNLEVBQUk7QUFBQSxRQUNWLE1BQU1BLEVBQUk7QUFBQSxRQUNWLFFBQVFBO0FBQUEsTUFDeEIsQ0FBYTtBQUNELGFBQUlnTSxFQUFTLFdBQVcsWUFDYjFMLElBQ1AwTCxFQUFTLFdBQVcsV0FDcEI3TCxFQUFPLE1BQU8sR0FDUDtBQUFBLFFBQ0gsUUFBUTtBQUFBLFFBQ1IsT0FBTzZMLEVBQVM7QUFBQSxNQUNuQixLQUdNLEtBQUssS0FBSyxJQUFJLFdBQVc7QUFBQSxRQUM1QixNQUFNQSxFQUFTO0FBQUEsUUFDZixNQUFNaE0sRUFBSTtBQUFBLFFBQ1YsUUFBUUE7QUFBQSxNQUM1QixDQUFpQjtBQUFBLElBRWpCO0FBQUEsRUFDQTtBQUFBLEVBQ0ksT0FBTyxPQUFPbEwsR0FBR2UsR0FBRztBQUNoQixXQUFPLElBQUlvTixHQUFZO0FBQUEsTUFDbkIsSUFBSW5PO0FBQUEsTUFDSixLQUFLZTtBQUFBLE1BQ0wsVUFBVW5GLEVBQXNCO0FBQUEsSUFDNUMsQ0FBUztBQUFBLEVBQ1Q7QUFDQTtBQUNPLE1BQU13UyxXQUFvQnpCLEVBQVE7QUFBQSxFQUNyQyxPQUFPNUksR0FBTztBQUNWLFVBQU14RCxJQUFTLEtBQUssS0FBSyxVQUFVLE9BQU93RCxDQUFLLEdBQ3pDb1QsSUFBUyxDQUFDbE4sT0FDUmdDLEdBQVFoQyxDQUFJLE1BQ1pBLEVBQUssUUFBUSxPQUFPLE9BQU9BLEVBQUssS0FBSyxJQUVsQ0E7QUFFWCxXQUFPaUMsR0FBUTNMLENBQU0sSUFBSUEsRUFBTyxLQUFLLENBQUMwSixNQUFTa04sRUFBT2xOLENBQUksQ0FBQyxJQUFJa04sRUFBTzVXLENBQU07QUFBQSxFQUNwRjtBQUFBLEVBQ0ksU0FBUztBQUNMLFdBQU8sS0FBSyxLQUFLO0FBQUEsRUFDekI7QUFDQTtBQUNBNk4sR0FBWSxTQUFTLENBQUNuUixHQUFNd04sTUFDakIsSUFBSTJELEdBQVk7QUFBQSxFQUNuQixXQUFXblI7QUFBQSxFQUNYLFVBQVVyQixFQUFzQjtBQUFBLEVBQ2hDLEdBQUcwUSxFQUFvQjdCLENBQU07QUFDckMsQ0FBSztBQW1ERSxJQUFJN087QUFBQSxDQUNWLFNBQVVBLEdBQXVCO0FBQzlCLEVBQUFBLEVBQXNCLFlBQWUsYUFDckNBLEVBQXNCLFlBQWUsYUFDckNBLEVBQXNCLFNBQVksVUFDbENBLEVBQXNCLFlBQWUsYUFDckNBLEVBQXNCLGFBQWdCLGNBQ3RDQSxFQUFzQixVQUFhLFdBQ25DQSxFQUFzQixZQUFlLGFBQ3JDQSxFQUFzQixlQUFrQixnQkFDeENBLEVBQXNCLFVBQWEsV0FDbkNBLEVBQXNCLFNBQVksVUFDbENBLEVBQXNCLGFBQWdCLGNBQ3RDQSxFQUFzQixXQUFjLFlBQ3BDQSxFQUFzQixVQUFhLFdBQ25DQSxFQUFzQixXQUFjLFlBQ3BDQSxFQUFzQixZQUFlLGFBQ3JDQSxFQUFzQixXQUFjLFlBQ3BDQSxFQUFzQix3QkFBMkIseUJBQ2pEQSxFQUFzQixrQkFBcUIsbUJBQzNDQSxFQUFzQixXQUFjLFlBQ3BDQSxFQUFzQixZQUFlLGFBQ3JDQSxFQUFzQixTQUFZLFVBQ2xDQSxFQUFzQixTQUFZLFVBQ2xDQSxFQUFzQixjQUFpQixlQUN2Q0EsRUFBc0IsVUFBYSxXQUNuQ0EsRUFBc0IsYUFBZ0IsY0FDdENBLEVBQXNCLFVBQWEsV0FDbkNBLEVBQXNCLGFBQWdCLGNBQ3RDQSxFQUFzQixnQkFBbUIsaUJBQ3pDQSxFQUFzQixjQUFpQixlQUN2Q0EsRUFBc0IsY0FBaUIsZUFDdkNBLEVBQXNCLGFBQWdCLGNBQ3RDQSxFQUFzQixXQUFjLFlBQ3BDQSxFQUFzQixhQUFnQixjQUN0Q0EsRUFBc0IsYUFBZ0IsY0FDdENBLEVBQXNCLGNBQWlCLGVBQ3ZDQSxFQUFzQixjQUFpQjtBQUMzQyxHQUFHQSxNQUEwQkEsSUFBd0IsQ0FBQSxFQUFHO0FBVXhELE1BQU13YixJQUFhL0csR0FBVSxRQUN2QmdILElBQWFoRyxHQUFVLFFBR3ZCaUcsS0FBYzdGLEdBQVcsUUFLekI4RixJQUFVdkYsR0FBTztBQUVMRSxHQUFTO0FBRTNCLE1BQU1zRixJQUFZbkssR0FBUyxRQUNyQm9LLElBQWFwRixFQUFVLFFBRXZCcUYsS0FBWWxLLEdBQVMsUUFDckJtSyxLQUF5QjdELEdBQXNCO0FBQzVCcEcsR0FBZ0I7QUFDdkI4RSxHQUFTO0FBQzNCLE1BQU1vRixLQUFhdkMsR0FBVSxRQUl2QndDLEtBQVduRSxHQUFRLFFBQ25Cb0UsSUFBY25FLEdBQVcsUUFDekJvRSxLQUFXbkUsR0FBUTtBQUVMdEcsR0FBVztBQUVWSCxHQUFZO0FBQ1pDLEdBQVk7QUNsaUhWNEssRUFBUztBQUFBLEVBQzVCLE1BQU1DLEVBQVU7QUFBQSxFQUNoQixhQUFhQSxFQUFVLEVBQUMsU0FBVTtBQUFBLEVBQ2xDLGFBQWFELEVBQVM7QUFBQSxJQUNsQixNQUFNRSxFQUFVLFFBQVE7QUFBQSxJQUN4QixZQUFZQyxHQUFTRixFQUFVLEdBQUVHLEVBQUssQ0FBRTtBQUFBLElBQ3hDLFVBQVVDLEVBQVFKLEdBQVU7QUFBQSxJQUM1QixzQkFBc0JLLEdBQVc7QUFBQSxFQUN6QyxDQUFLO0FBQ0wsQ0FBQztBQW1FTSxlQUFlQyxHQUF1QkMsR0FBWUMsSUFBeUIsSUFBTztBQUNyRixRQUFNQyxJQUFXLENBQUUsR0FDYkMsSUFBWSxvQkFBSSxJQUFLO0FBQzNCLGFBQVdDLEtBQVVKLEdBQVk7QUFDN0IsVUFBTUssSUFBYyxNQUFNQyxHQUEyQkYsR0FBUUgsQ0FBc0IsR0FFN0VNLElBQWUsQ0FBQyxHQURFLElBQUksSUFBSUYsRUFBWSxJQUFJLENBQUNHLE1BQU1BLEVBQUUsSUFBSSxDQUFDLENBQ3RCLEVBQUUsT0FBTyxDQUFDNVQsTUFBTXVULEVBQVUsSUFBSXZULENBQUMsQ0FBQztBQUN4RSxRQUFJMlQsRUFBYSxTQUFTO0FBQ3RCLFlBQU0sSUFBSXRWLEVBQVUsa0RBQWtEc1YsRUFBYSxLQUFLLElBQUksQ0FBQyxFQUFFO0FBRW5HLGVBQVdDLEtBQUtIO0FBQ1osTUFBQUYsRUFBVSxJQUFJSyxFQUFFLElBQUksR0FDcEJOLEVBQVMsS0FBS00sQ0FBQztBQUFBLEVBRTNCO0FBQ0ksU0FBT047QUFDWDtBQUNBLE1BQU1PLEtBQWUsQ0FBRTtBQVl2QixlQUFlSCxHQUEyQkYsR0FBUUgsR0FBd0I7QUFDdEUsU0FBSUcsRUFBTyxrQkFBa0JLLEdBQWFMLEVBQU8sSUFBSSxJQUMxQ0ssR0FBYUwsRUFBTyxJQUFJLElBRTVCTSxHQUFxQixPQUFPQyxNQUFTO0FBQ3hDLFVBQU1DLElBQVcsTUFBTVIsRUFBTyxVQUFXO0FBQ3pDLElBQUFPLEVBQUssU0FBUyxTQUFTQyxFQUFTLElBQUksQ0FBQ0osTUFBTUEsRUFBRSxJQUFJO0FBQ2pELFVBQU1LLElBQVFELEVBQVMsSUFBSSxDQUFDSixNQUFNTSxHQUFrQk4sR0FBR0osR0FBUUgsQ0FBc0IsQ0FBQztBQUN0RixXQUFJRyxFQUFPLG1CQUNQSyxHQUFhTCxFQUFPLElBQUksSUFBSVMsSUFFekJBO0FBQUEsRUFDZixHQUFPLEVBQUUsTUFBTSxFQUFFLFFBQVFULEVBQU8sS0FBTSxFQUFBLENBQUU7QUFDeEM7QUFJTyxlQUFlVyxHQUFlZixHQUFZQyxJQUF5QixJQUFPO0FBQzdFLFNBQU9GLEdBQXVCQyxHQUFZQyxDQUFzQjtBQUNwRTtBQUlPLFNBQVNhLEdBQWtCRSxHQUFTWixHQUFRSCxHQUF3Qjs7QUFDdkUsaUJBQWU5TyxFQUFPNUYsR0FBTzBWLEdBQVU7QUFDbkMsUUFBSXZXLElBQU8sQ0FBRTtBQUNiLElBQUksT0FBT2EsS0FBVSxZQUFZQSxJQUM3QmIsSUFBTyxLQUFLLE1BQU1hLENBQUssSUFFbEIsT0FBT0EsS0FBVSxZQUFZQSxLQUFTLFNBQzNDYixJQUFPYTtBQUVYLFVBQU02RixJQUFjQyxHQUFnQjtBQUNwQyxJQUFJRCxNQUNBQSxFQUFZLFNBQVMsV0FBYyxFQUFFLFFBQVFnUCxFQUFPLEtBQU07QUFFOUQsVUFBTTVWLElBQVUsTUFBTTRWLEVBQU8sU0FBU1ksRUFBUSxNQUFNdFcsQ0FBSTtBQUN4RCxXQUFPRixFQUFRLFdBQVcsSUFBSUEsRUFBUSxDQUFDLElBQUlBO0FBQUEsRUFDbkQ7QUFDSSxRQUFNekYsSUFBUztBQUFBLElBQ1gsUUFBTXZCLElBQUF3ZCxFQUFRLGdCQUFSLGdCQUFBeGQsRUFBcUIsU0FBUTtBQUFBLElBQ25DLGNBQVlELElBQUF5ZCxFQUFRLGdCQUFSLGdCQUFBemQsRUFBcUIsZUFBYyxDQUFFO0FBQUEsSUFDakQsWUFBVWtELElBQUF1YSxFQUFRLGdCQUFSLGdCQUFBdmEsRUFBcUIsYUFBWSxDQUFFO0FBQUEsSUFDN0Msd0JBQXNCRSxJQUFBcWEsRUFBUSxnQkFBUixnQkFBQXJhLEVBQXFCLHlCQUF3QjtBQUFBLEVBQ3RFO0FBQ0QsTUFBSXNaLEtBQTBCbGIsRUFBTyx5QkFBeUI7QUFDMUQsUUFBSTtBQUNBLFlBQU1tYyxJQUFlQyxHQUF1QnBjLENBQU07QUFDbEQsYUFBT21GLEdBQUs7QUFBQSxRQUNSLE1BQU04VyxFQUFRO0FBQUEsUUFDZCxhQUFhQSxFQUFRLGVBQWU7QUFBQSxRQUNwQyxZQUFZRTtBQUFBLFFBQ1osUUFBUTtBQUFBLFFBQ1IsU0FBUy9QO0FBQUEsTUFDekIsQ0FBYTtBQUFBLElBQ2IsU0FDZTFQLEdBQUc7QUFDTjJmLE1BQUFBLEVBQWEsS0FBSywrQ0FBK0MzZixDQUFDLEVBQUU7QUFBQSxJQUNoRjtBQUVJLFFBQU00ZixJQUFrQjtBQUFBLElBQ3BCLEdBQUd0YztBQUFBLElBQ0gsc0JBQXNCO0FBQUEsRUFDekI7QUFDRCxTQUFPbUYsR0FBSztBQUFBLElBQ1IsTUFBTThXLEVBQVE7QUFBQSxJQUNkLGFBQWFBLEVBQVEsZUFBZTtBQUFBLElBQ3BDLFlBQVlLO0FBQUEsSUFDWixRQUFRO0FBQUEsSUFDUixTQUFTbFE7QUFBQSxFQUNqQixDQUFLO0FBQ0w7QUFJQSxTQUFTZ1EsR0FBdUJwYyxHQUFRO0FBQ3BDLFFBQU11YyxJQUFNO0FBQUEsSUFDUixHQUFHdmM7QUFBQSxJQUNILHNCQUFzQjtBQUFBLEVBQ3pCO0FBQ0QsU0FBS3VjLEVBQUksYUFDTEEsRUFBSSxXQUFXLENBQUUsSUFDZEE7QUFDWDtBQ2hQTyxTQUFTdlIsS0FBVTtBQUN0QixTQUFPLENBQUU7QUFDYjs7QUFDTyxNQUFNd1IsR0FBb0I7QUFBQSxFQUExQjtBQUNILElBQUFDLEVBQUEsTUFBQUMsSUFBVSxJQUFJLFlBQWE7QUFBQTtBQUFBLEVBQzNCLEdBQUdoZCxHQUFNaWQsR0FBVTtBQUNmLFdBQUFDLEVBQUEsTUFBS0YsSUFBUSxpQkFBaUJoZCxHQUFPLENBQUM3RixNQUFVOGlCLEVBQVMsR0FBSTlpQixFQUFNLFVBQVUsQ0FBQSxDQUFHLENBQUcsR0FDNUU7QUFBQSxFQUNmO0FBQUEsRUFDSSxJQUFJNkYsR0FBTWlkLEdBQVU7QUFDaEIsV0FBQUMsRUFBQSxNQUFLRixJQUFRLG9CQUFvQmhkLEdBQU8sQ0FBQzdGLE1BQVU4aUIsRUFBUyxHQUFJOWlCLEVBQU0sVUFBVSxDQUFBLENBQUcsQ0FBRyxHQUMvRTtBQUFBLEVBQ2Y7QUFBQSxFQUNJLEtBQUs2RixNQUFTaUcsR0FBTTtBQUNoQixVQUFNOUwsSUFBUSxJQUFJLFlBQVk2RixHQUFNLEVBQUUsUUFBUWlHLEdBQU07QUFDcEQsV0FBT2lYLEVBQUEsTUFBS0YsSUFBUSxjQUFjN2lCLENBQUs7QUFBQSxFQUMvQztBQUFBLEVBQ0ksS0FBSzZGLEdBQU1pZCxHQUFVO0FBQ2pCLFVBQU1FLElBQVUsSUFBSWxYLE1BQVM7QUFDekIsV0FBSyxJQUFJakcsR0FBTW1kLENBQU8sR0FDdEJGLEVBQVMsR0FBR2hYLENBQUk7QUFBQSxJQUNuQjtBQUNELGdCQUFLLEdBQUdqRyxHQUFNbWQsQ0FBTyxHQUNkO0FBQUEsRUFDZjtBQUNBO0FBckJJSCxLQUFBO0FBdUJHLE1BQU1JLEtBQWEsT0FBTyxXQUFXLEtBQUssTUFBTSxHQUMxQ0MsS0FBVyxNQUFlO0FBQUEsRUFDbkMsY0FBYztBQUFBLEVBQUE7QUFBQSxFQUNkLE9BQU9DLEdBQWMzaEIsR0FBVTtBQUFBLEVBQUE7QUFBQSxFQUMvQixZQUFZNGhCLEdBQVk1aEIsR0FBVTtBQUFBLEVBQUE7QUFDdEMsR0FDYTZoQixLQUFpQixXQUFXLGdCQUU1QkMsS0FBa0IsV0FBVztBQUNuQyxNQUFNQyxHQUFrQjtBQUFBLEVBRTNCLGNBQWM7QUFEZCxJQUFBdFgsRUFBQSxpQkFBVTtBQUFBLEVBQ0k7QUFBQSxFQUNkLElBQUk4RixHQUFTdFIsR0FBSTtBQUNiLGdCQUFLLFVBQVVzUixHQUNSdFIsRUFBSTtBQUFBLEVBQ25CO0FBQUEsRUFDSSxXQUFXO0FBQ1AsV0FBTyxLQUFLO0FBQUEsRUFDcEI7QUFBQSxFQUNJLFVBQVVzUixHQUFTO0FBQ2YsU0FBSyxVQUFVQTtBQUFBLEVBQ3ZCO0FBQ0E7QUFRQSxNQUFNeVIsR0FBYTtBQUFBLEVBQ2YsY0FBYztBQUFBLEVBQUE7QUFBQSxFQUNkLFdBQVdqWSxHQUFVbUMsR0FBSTtBQUNyQixVQUFNK1YsSUFBVSxXQUFXbFksR0FBVW1DLENBQUU7QUFDdkMsV0FBQStWLEVBQVEsTUFDSixPQUFPQSxFQUFRLE9BQVEsYUFBYUEsRUFBUSxNQUFNLE1BQU1BLEdBQzVEQSxFQUFRLFFBQ0osT0FBT0EsRUFBUSxTQUFVLGFBQWFBLEVBQVEsUUFBUSxNQUFNQSxHQUNoRUEsRUFBUSxTQUNKLE9BQU9BLEVBQVEsVUFBVyxhQUFhQSxFQUFRLFNBQVMsTUFBTSxJQUNsRUEsRUFBUSxVQUNKLE9BQU9BLEVBQVEsV0FBWSxhQUFhQSxFQUFRLFVBQVUsTUFBTUEsR0FDN0RBO0FBQUEsRUFDZjtBQUFBLEVBQ0ksYUFBYUMsR0FBVztBQUNwQixXQUFPLGFBQWFBLENBQVM7QUFBQSxFQUNyQztBQUNBO0FBQ0EsTUFBTUMsS0FBUSxJQUFJSCxHQUFjO0FDNUVoQyxJQUFJSTtBQUNKLFNBQVNDLEtBQThCO0FBQ25DLFNBQUFELFlBQThCLElBQUlMLEdBQW1CLElBQzlDSztBQUNYO0FBTU8sU0FBU0UsS0FBa0I7QUFDOUIsUUFBTUMsSUFBZUYsR0FBNkIsRUFBQyxTQUFVO0FBQzdELFNBQUlFLEtBQUEsUUFBQUEsRUFBYyxRQUNQQSxFQUFhLFFBRWpCO0FBQ1g7QUFNTyxTQUFTdFIsS0FBaUI7QUFDN0IsUUFBTUQsSUFBY3FSLEdBQTZCLEVBQUMsU0FBVTtBQUM1RCxTQUFJclIsS0FBQSxRQUFBQSxFQUFhLE9BQ05BLEVBQVksT0FFaEI7QUFDWDtBQU9BLFNBQVN3UixHQUFnQ3ZqQixHQUFJO0FBQ3pDLFNBQU8sWUFBWTtBQUNmLFVBQU13akIsSUFBUUgsR0FBaUI7QUFDL0IsUUFBSSxDQUFDRztBQUNELFlBQU0sSUFBSSxNQUFNLGdCQUFnQjtBQUVwQyxVQUFNQSxFQUFNLE1BQU87QUFDbkIsVUFBTTlhLElBQVMsTUFBTTFJLEVBQUd3akIsQ0FBSztBQUM3QixpQkFBTUEsRUFBTSxJQUFLLEdBQ1Y5YTtBQUFBLEVBQ1Y7QUFDTDtBQVFPLGVBQWUrYSxHQUFVRCxHQUFPeGpCLEdBQUlTLElBQVUsQ0FBQSxHQUFJO0FBQ3JELFFBQU1pakIsSUFBVyxPQUFPRixLQUFVLFdBQzVCRyxHQUFzQixFQUFHLFlBQVk7QUFBQSxJQUNuQyxHQUFHbGpCO0FBQUEsSUFDSCxNQUFNK2lCO0FBQUEsRUFDVCxDQUFBLElBQ0NBO0FBQ04sU0FBT0osR0FBMkIsRUFBRyxJQUFJLEVBQUUsT0FBT00sS0FBWUgsR0FBZ0N2akIsQ0FBRSxDQUFDO0FBQ3JHO0FBU08sZUFBZTRqQixHQUFpQjVqQixHQUFJUyxJQUFVLElBQUk7QUFFckQsTUFEcUI0aUIsR0FBaUI7QUFHbEMsV0FBTyxNQUFNcmpCLEVBQUk7QUFFckIsUUFBTTBqQixJQUFXQyxLQUF5QixZQUFZbGpCLENBQU87QUFDN0QsU0FBTzJpQixHQUEyQixFQUFHLElBQUksRUFBRSxPQUFPTSxLQUFZSCxHQUFnQ3ZqQixDQUFFLENBQUM7QUFDckc7QUFNTyxTQUFTNmpCLEdBQWV2QyxHQUFNO0FBQ2pDLFFBQU1oUSxJQUFVOFIsR0FBNkIsRUFBQyxTQUFVO0FBQ3hELE1BQUksQ0FBQzlSO0FBQ0QsVUFBTSxJQUFJLE1BQU0seUJBQXlCO0FBRTdDLEVBQUlBLEVBQVEsU0FDUkEsRUFBUSxLQUFLLGVBQWVBLEVBQVEsY0FDcENBLEVBQVEsZUFBZUEsRUFBUSxPQUVuQ0EsRUFBUSxPQUFPZ1EsR0FDZjhCLEdBQTZCLEVBQUMsVUFBVTlSLENBQU87QUFDbkQ7QUFDTyxTQUFTd1MsS0FBbUI7O0FBQy9CLFFBQU14UyxJQUFVOFIsR0FBNkIsRUFBQyxTQUFVO0FBQ3hELEVBQUk5UixNQUNBQSxFQUFRLE9BQU9BLEVBQVEsY0FDdkJBLEVBQVEsZ0JBQWVuTixJQUFBbU4sRUFBUSxpQkFBUixnQkFBQW5OLEVBQXNCLGNBQzdDaWYsR0FBNkIsRUFBQyxVQUFVOVIsQ0FBTztBQUV2RDtBQU1PLFNBQVN5UyxHQUFzQkMsR0FBVztBQUM3QyxRQUFNalMsSUFBY0MsR0FBZ0I7QUFDcEMsRUFBSUQsS0FDQUEsRUFBWSxTQUFTaVMsQ0FBUztBQUV0QztBQVFPLFNBQVNDLEdBQW9CM1MsR0FBUzs7QUFDekMsU0FBTztBQUFBLElBQ0gsUUFBT25OLElBQUFtTixFQUFRLFVBQVIsZ0JBQUFuTixFQUFlO0FBQUEsSUFDdEIsT0FBTUQsSUFBQW9OLEVBQVEsU0FBUixnQkFBQXBOLEVBQWM7QUFBQSxJQUNwQixlQUFja0QsSUFBQWtLLEVBQVEsaUJBQVIsZ0JBQUFsSyxFQUFzQjtBQUFBLEVBQ3ZDO0FBQ0w7QUFNTyxTQUFTOGMsR0FBbUJsa0IsR0FBSTtBQUNuQyxRQUFNbWtCLElBQWlCZixHQUE2QixFQUFDLFNBQVU7QUFDL0QsTUFBSSxDQUFDZTtBQUNELFVBQU0sSUFBSSxNQUFNLHlCQUF5QjtBQUU3QyxRQUFNQyxJQUFnQkgsR0FBb0JFLENBQWM7QUFDeEQsU0FBT2YsR0FBNkIsRUFBQyxJQUFJZ0IsR0FBZXBrQixDQUFFO0FBQzlEO0FDMUlPLE1BQU1xa0IsR0FBb0I7QUFBQSxFQUM3QixNQUFNLE9BQU9yaUIsR0FBTztBQUNoQixRQUFJOE8sR0FBUSxVQUFVO0FBQ2xCSyxNQUFBQSxFQUFPLE1BQU0sc0NBQXNDO0FBQ25EO0FBQUEsSUFDWjtBQUNRLGVBQVczUyxLQUFRd0Q7QUFDZixNQUFJeEQsRUFBSyxTQUFTLFVBQ2QsUUFBUSxJQUFJLG1DQUFtQ0EsRUFBSyxPQUFPLFNBQVNBLEVBQUssSUFBSSxFQUFFLElBRy9FLFFBQVEsSUFBSSwyQkFBMkIsS0FBSyxVQUFVQSxDQUFJLENBQUMsRUFBRTtBQUFBLEVBRzdFO0FBQ0E7O0FBQ08sTUFBTThsQixHQUFvQjtBQUFBLEVBVzdCLFlBQVlDLEdBQVU7QUFBQSxJQUFFLGNBQUFDLElBQWU7QUFBQSxJQUFNLGNBQUFDLElBQWU7QUFBQSxJQUFLLGVBQUFDLElBQWdCO0FBQUE7QUFBQSxJQUNqRixvQkFBQUMsSUFBcUI7QUFBQSxFQUFNLElBQUcsSUFBSTtBQVovQixJQUFBeEMsRUFBQSxNQUFBeUM7QUFDSCxJQUFBekMsRUFBQSxNQUFBMEM7QUFDQSxJQUFBMUMsRUFBQSxNQUFBMkM7QUFDQSxJQUFBM0MsRUFBQSxNQUFBNEM7QUFDQSxJQUFBNUMsRUFBQSxNQUFBNkM7QUFDQSxJQUFBN0MsRUFBQSxNQUFBOEM7QUFDQSxJQUFBOUMsRUFBQSxNQUFBK0MsSUFBVSxDQUFFO0FBQ1osSUFBQS9DLEVBQUEsTUFBQWdEO0FBQ0EsSUFBQWhELEVBQUEsTUFBQWlELElBQVc7QUFDWCxJQUFBakQsRUFBQSxNQUFBa0QsSUFBb0I7QUFDcEIsSUFBQWxELEVBQUEsTUFBQW1ELElBQTBCO0FBR3RCLElBQUFDLEVBQUEsTUFBS1YsSUFBZ0JMLElBQ3JCZSxFQUFBLE1BQUtULElBQWdCTCxJQUNyQmMsRUFBQSxNQUFLUixJQUFpQkwsSUFDdEJhLEVBQUEsTUFBS1AsSUFBcUJSLElBQWVHLElBQ3pDWSxFQUFBLE1BQUtOLElBQVlWLElBQ2pCZ0IsRUFBQSxNQUFLSixJQUFTQSxLQUtWaFUsRUFBTyxNQUFNLHVKQUF1SjtBQUFBLEVBRWhMO0FBQUEsRUFDSSxRQUFRO0FBQ0osSUFBQW9VLEVBQUEsTUFBS0QsSUFBMEIsSUFBSSxnQkFBaUIsSUFDcERFLEVBQUEsTUFBS1osSUFBQWEsSUFBTDtBQUFBLEVBQ1I7QUFBQSxFQTRDSSxNQUFNLGFBQWFqQyxHQUFPO0FBQ3RCLFVBQU1nQyxFQUFBLE1BQUtaLElBQUFjLElBQUwsV0FBa0JsQztBQUFBLEVBQ2hDO0FBQUEsRUFDSSxNQUFNLFdBQVdtQyxHQUFRO0FBQUEsRUFFN0I7QUFBQSxFQUNJLE1BQU0sWUFBWUMsR0FBTztBQUFBLEVBRTdCO0FBQUEsRUFDSSxNQUFNLFVBQVV0RSxHQUFNO0FBQ2xCLFVBQU1rRSxFQUFBLE1BQUtaLElBQUFjLElBQUwsV0FBa0JwRTtBQUFBLEVBQ2hDO0FBQUEsRUFDSSxNQUFNLFNBQVMwQixHQUFTOztBQVFwQixTQVBJQSxLQUNBVixFQUFBLE1BQUs2QyxJQUFPLFdBQVcsTUFBTTs7QUFFekIsT0FBQWhoQixJQUFBbWUsRUFBQSxNQUFLZ0QsUUFBTCxRQUFBbmhCLEVBQThCO0FBQUEsSUFDakMsR0FBRTZlLENBQU8sR0FFZDdSLEVBQU8sTUFBTSwwQkFBMEIsR0FDaENtUixFQUFBLE1BQUs0QyxJQUFRLFNBQVMsS0FBRztBQU01QixVQUxBL1QsRUFBTyxNQUFNLDRDQUE0Q21SLEVBQUEsTUFBSzRDLElBQVEsTUFBTSxFQUFFLEdBQ3pFNUMsRUFBQSxNQUFLK0MsT0FFTixNQUFNRyxFQUFBLE1BQUtaLElBQUFpQixJQUFMLFdBQW9CLE1BRTFCMWhCLElBQUFtZSxFQUFBLE1BQUtnRCxRQUFMLFFBQUFuaEIsRUFBOEIsT0FBTyxTQUFTO0FBQzlDZ04sUUFBQUEsRUFBTyxNQUFNLGlDQUFpQyxHQUM5QyxNQUFNcVUsRUFBQSxNQUFLWixJQUFBaUIsSUFBTCxXQUFvQjtBQUMxQjtBQUFBLE1BQ2hCO0FBRVksWUFBTSxJQUFJLFFBQVEsQ0FBQ0MsTUFBWXhELEVBQUEsTUFBSzZDLElBQU8sV0FBV1csR0FBUyxHQUFHLENBQUM7QUFBQSxJQUMvRTtBQUNRM1UsSUFBQUEsRUFBTyxNQUFNLHVCQUF1QixHQUNoQ21SLEVBQUEsTUFBSzZDLE9BQVU3QyxFQUFBLE1BQUs4QyxPQUVwQjlDLEVBQUEsTUFBSzZDLElBQU8sYUFBYTdDLEVBQUEsTUFBSzhDLEdBQVE7QUFBQSxFQUVsRDtBQUFBLEVBQ0ksTUFBTSxhQUFhO0FBQ2YsSUFBSTlDLEVBQUEsTUFBSzRDLElBQVEsU0FBUyxLQUN0QixNQUFNTSxFQUFBLE1BQUtaLElBQUFpQixJQUFMLFdBQW9CO0FBQUEsRUFFdEM7QUFDQTtBQXJISWhCLEtBQUEsZUFDQUMsS0FBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUEsZUFDQUMsS0FBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUEsZUFDQUMsS0FBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUEsZUFWR1YsS0FBQSxlQThCR2MsS0FBWSxlQUFDbG5CLEdBQU07QUFDckIsTUFBSThqQixFQUFBLE1BQUs0QyxJQUFRLFNBQVMsSUFBSTVDLEVBQUEsTUFBS3VDLEtBQWU7QUFDOUMxVCxJQUFBQSxFQUFPLE1BQU0sdUNBQXVDO0FBQ3BEO0FBQUEsRUFDWjtBQUVRLEVBQUFtUixFQUFBLE1BQUs0QyxJQUFRLEtBQUsxbUIsQ0FBSSxHQUNsQjhqQixFQUFBLE1BQUs0QyxJQUFRLFNBQVM1QyxFQUFBLE1BQUswQyxPQUUzQixNQUFNUSxFQUFBLE1BQUtaLElBQUFpQixJQUFMO0FBRWxCLEdBQ0lKLEtBQWMsV0FBRztBQUNiLEVBQUFGLEVBQUEsTUFBS0gsSUFBVzlDLEVBQUEsTUFBSzZDLElBQU8sV0FBVyxZQUFZO0FBRS9DLFVBQU1LLEVBQUEsTUFBS1osSUFBQWlCLElBQUwsWUFDTkwsRUFBQSxNQUFLWixJQUFBYSxJQUFMO0FBQUEsRUFDWixHQUFXbkQsRUFBQSxNQUFLeUMsR0FBYyxJQUdsQixPQUFPekMsRUFBQSxNQUFLOEMsSUFBUyxTQUFVLGNBQy9COUMsRUFBQSxNQUFLOEMsSUFBUyxNQUFPO0FBRWpDLEdBQ1VTLEtBQWMsZUFBQ0UsSUFBUSxJQUFPO0FBQ2hDLE1BQUl6RCxFQUFBLE1BQUs0QyxJQUFRLFdBQVc7QUFJNUIsUUFEQS9ULEVBQU8sTUFBTSw2QkFBNkI0VSxDQUFLLGtCQUFrQnpELEVBQUEsTUFBSzRDLElBQVEsTUFBTSxFQUFFLEdBQ2xGYSxLQUFTekQsRUFBQSxNQUFLNEMsSUFBUSxTQUFTNUMsRUFBQSxNQUFLd0MsS0FBZTtBQUNuRCxZQUFNa0IsSUFBVyxDQUFDLEdBQUcxRCxFQUFBLE1BQUs0QyxHQUFPO0FBQ2pDLE1BQUFLLEVBQUEsTUFBS0wsSUFBVSxDQUFFLElBQ2pCSyxFQUFBLE1BQUtGLElBQW9CLEtBQ3pCLE1BQU0vQyxFQUFBLE1BQUsyQyxJQUFVLE9BQU9lLENBQVEsR0FDcENULEVBQUEsTUFBS0YsSUFBb0I7QUFBQSxJQUNyQyxXQUNpQi9DLEVBQUEsTUFBSzRDLElBQVEsU0FBUyxHQUFHO0FBQzlCLFlBQU1lLElBQVEzRCxFQUFBLE1BQUs0QyxJQUFRLE9BQU8sR0FBRzVDLEVBQUEsTUFBS3dDLEdBQWE7QUFDdkQsTUFBQVMsRUFBQSxNQUFLRixJQUFvQixLQUN6QixNQUFNL0MsRUFBQSxNQUFLMkMsSUFBVSxPQUFPZ0IsQ0FBSyxHQUNqQ1YsRUFBQSxNQUFLRixJQUFvQjtBQUFBLElBQ3JDO0FBQUE7QUFDQTs7QUErQ08sTUFBTWEsR0FBc0I7QUFBQSxFQUE1QjtBQUNILElBQUEvRCxFQUFBLE1BQUFnRSxJQUFjLENBQUU7QUFBQTtBQUFBLEVBQ2hCLFFBQVE7QUFDSixlQUFXQyxLQUFhOUQsRUFBQSxNQUFLNkQ7QUFDekIsTUFBSUMsRUFBVSxTQUNWQSxFQUFVLE1BQU87QUFBQSxFQUdqQztBQUFBLEVBQ0ksa0JBQWtCQSxHQUFXO0FBQ3pCLElBQUE5RCxFQUFBLE1BQUs2RCxJQUFZLEtBQUtDLENBQVM7QUFBQSxFQUN2QztBQUFBLEVBQ0ksY0FBY0MsR0FBWTtBQUN0QmxWLElBQUFBLEVBQU8sTUFBTSw4QkFBOEI7QUFDM0MsZUFBV2lWLEtBQWE5RCxFQUFBLE1BQUs2RDtBQUN6QixNQUFBQyxFQUFVLFNBQVU7QUFFeEIsSUFBQWIsRUFBQSxNQUFLWSxJQUFjRTtBQUFBLEVBQzNCO0FBQUEsRUFDSSxNQUFNLGFBQWE3QyxHQUFPO0FBQ3RCLGVBQVc0QyxLQUFhOUQsRUFBQSxNQUFLNkQ7QUFDekIsWUFBTUMsRUFBVSxhQUFhNUMsQ0FBSztBQUFBLEVBRTlDO0FBQUEsRUFDSSxNQUFNLFdBQVdBLEdBQU87QUFDcEIsZUFBVzRDLEtBQWE5RCxFQUFBLE1BQUs2RDtBQUN6QixZQUFNQyxFQUFVLFdBQVc1QyxDQUFLO0FBQUEsRUFFNUM7QUFBQSxFQUNJLE1BQU0sWUFBWWxDLEdBQU07QUFDcEIsZUFBVzhFLEtBQWE5RCxFQUFBLE1BQUs2RDtBQUN6QixZQUFNQyxFQUFVLFlBQVk5RSxDQUFJO0FBQUEsRUFFNUM7QUFBQSxFQUNJLE1BQU0sVUFBVUEsR0FBTTtBQUNsQixlQUFXOEUsS0FBYTlELEVBQUEsTUFBSzZEO0FBQ3pCLFlBQU1DLEVBQVUsVUFBVTlFLENBQUk7QUFBQSxFQUUxQztBQUFBLEVBQ0ksTUFBTSxTQUFTMEIsR0FBUztBQUNwQixlQUFXb0QsS0FBYTlELEVBQUEsTUFBSzZEO0FBQ3pCLFlBQU1DLEVBQVUsU0FBU3BELENBQU87QUFBQSxFQUU1QztBQUFBLEVBQ0ksTUFBTSxhQUFhO0FBQ2YsZUFBV29ELEtBQWE5RCxFQUFBLE1BQUs2RDtBQUN6QixZQUFNQyxFQUFVLFdBQVk7QUFBQSxFQUV4QztBQUNBO0FBaERJRCxLQUFBO0FBaURKLElBQUlHLEtBQW1CLE1BQ25CQyxLQUFvQjtBQUNqQixTQUFTQyxLQUFrQjtBQUM5QixTQUFLRixPQUNEQSxLQUFtQixJQUFJakMsR0FBcUIsSUFFekNpQztBQUNYO0FBQ08sU0FBU0csS0FBbUI7QUFDL0IsU0FBS0YsT0FDREEsS0FBb0IsSUFBSWpDLEdBQW9Ca0MsSUFBaUIsSUFFMUREO0FBQ1g7QUN2TU8sU0FBU0csS0FBVTtBQUN0QixVQUFPLG9CQUFJLEtBQU0sR0FBQyxZQUFhO0FBQ25DO0FBTU8sU0FBU0MsS0FBa0I7QUFDOUIsU0FBTyxTQUFTbkUsR0FBWSxFQUFDLFFBQVEsTUFBTSxFQUFFLENBQUM7QUFDbEQ7QUFNTyxTQUFTb0UsS0FBaUI7QUFDN0IsU0FBTyxRQUFRcEUsR0FBWSxFQUFDLFFBQVEsTUFBTSxFQUFFLEVBQUUsTUFBTSxHQUFHLEVBQUUsQ0FBQztBQUM5RDtBQWNPLFNBQVNxRSxHQUFvQnhtQixHQUFLO0FBQ3JDLFNBQU8sT0FBTyxZQUFZLE9BQU8sUUFBUUEsQ0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDZ0IsQ0FBRyxNQUFNLENBQUNBLEVBQUksV0FBVyxHQUFHLENBQUMsQ0FBQztBQUN6Rjs7QUNyQ08sTUFBTXlsQixLQUFOLE1BQU1BLEdBQUs7QUFBQSxFQVdkLFlBQVlybUIsR0FBUzJsQixHQUFXO0FBVmhDLElBQUE1YSxFQUFBLGNBQU87QUFDUCxJQUFBMlcsRUFBQSxNQUFBNEU7QUFDQSxJQUFBNUUsRUFBQSxNQUFBNkU7QUFDQSxJQUFBN0UsRUFBQSxNQUFBOEU7QUFDQSxJQUFBOUUsRUFBQSxNQUFBK0U7QUFDQSxJQUFBL0UsRUFBQSxNQUFBZ0Y7QUFDQSxJQUFBaEYsRUFBQSxNQUFBaUY7QUFDQSxJQUFBakYsRUFBQSxNQUFBa0Y7QUFDQSxJQUFBbEYsRUFBQSxNQUFBbUY7QUFDQSxJQUFBbkYsRUFBQSxNQUFBb0Y7QUFFSSxJQUFBaEMsRUFBQSxNQUFLeUIsSUFBV3ZtQixFQUFRLFVBQ3hCOGtCLEVBQUEsTUFBSzBCLElBQVV4bUIsRUFBUSxVQUFVbW1CLEdBQWdCLElBQ2pEckIsRUFBQSxNQUFLd0IsSUFBUXRtQixFQUFRLE9BQ3JCOGtCLEVBQUEsTUFBSzRCLElBQWFmLElBQ2xCYixFQUFBLE1BQUsyQixJQUFZem1CLEVBQVEsWUFBWSxPQUNyQzhrQixFQUFBLE1BQUsrQixJQUFTN21CLEVBQVEsU0FBUyxPQUMvQjhrQixFQUFBLE1BQUs2QixJQUFhM21CLEVBQVEsYUFBYSxPQUN2QzhrQixFQUFBLE1BQUs4QixJQUFXNW1CLEVBQVEsV0FBVztBQUFBLEVBQzNDO0FBQUEsRUFDSSxJQUFJLFVBQVU7QUFDVixXQUFPNmhCLEVBQUEsTUFBSzBFO0FBQUEsRUFDcEI7QUFBQSxFQUNJLElBQUksV0FBVztBQUNYLFdBQU8xRSxFQUFBLE1BQUt5RTtBQUFBLEVBQ3BCO0FBQUEsRUFDSSxJQUFJLFNBQVM7QUFDVCxXQUFPekUsRUFBQSxNQUFLMkU7QUFBQSxFQUNwQjtBQUFBLEVBQ0ksSUFBSSxXQUFXO0FBQ1gsV0FBTzNFLEVBQUEsTUFBSzRFO0FBQUEsRUFDcEI7QUFBQSxFQUNJLElBQUksZUFBZTtBQUNmLFdBQU81RSxFQUFBLE1BQUtpRjtBQUFBLEVBQ3BCO0FBQUEsRUFDSSxJQUFJLGFBQWFqRyxHQUFNO0FBQ25CLElBQUFpRSxFQUFBLE1BQUtnQyxJQUFnQmpHO0FBQUEsRUFDN0I7QUFBQSxFQUNJLFFBQVE7QUFDSixRQUFJZ0IsRUFBQSxNQUFLOEUsS0FBWTtBQUNqQmpXLE1BQUFBLEVBQU8sS0FBSyxzQkFBc0I7QUFDbEM7QUFBQSxJQUNaO0FBQ1EsSUFBQW9VLEVBQUEsTUFBSzZCLElBQWFWLEdBQVMsSUFDM0JwRSxFQUFBLE1BQUs2RSxJQUFXLFlBQVksSUFBSTtBQUFBLEVBQ3hDO0FBQUEsRUFDSSxNQUFNO0FBQ0YsUUFBSTdFLEVBQUEsTUFBSytFLEtBQVU7QUFDZmxXLE1BQUFBLEVBQU8sTUFBTSx5QkFBeUIsS0FBSyxRQUFRO0FBQ25EO0FBQUEsSUFDWjtBQUNRLElBQUFvVSxFQUFBLE1BQUs4QixJQUFXWCxHQUFTLElBQ3pCcEUsRUFBQSxNQUFLNkUsSUFBVyxVQUFVLElBQUk7QUFBQSxFQUN0QztBQUFBLEVBQ0ksU0FBU2xuQixHQUFPO0FBQ1osSUFBQXNsQixFQUFBLE1BQUsrQixJQUFTcm5CO0FBQUEsRUFDdEI7QUFBQSxFQUNJLElBQUksUUFBUTtBQUNSLFdBQU9xaUIsRUFBQSxNQUFLZ0Y7QUFBQSxFQUNwQjtBQUFBLEVBQ0ksSUFBSSxZQUFZO0FBQ1osV0FBT2hGLEVBQUEsTUFBSzhFO0FBQUEsRUFDcEI7QUFBQSxFQUNJLElBQUksVUFBVTtBQUNWLFdBQU85RSxFQUFBLE1BQUsrRTtBQUFBLEVBQ3BCO0FBQUEsRUFDSSxRQUFROztBQUNKLFVBQU0vRixJQUFPLElBQUl3RixHQUFLO0FBQUEsTUFDbEIsU0FBUyxLQUFLO0FBQUEsTUFDZCxRQUFRLEtBQUs7QUFBQSxNQUNiLFVBQVUsS0FBSyxZQUFZO0FBQUEsTUFDM0IsTUFBTSxLQUFLO0FBQUEsTUFDWCxXQUFXeEUsRUFBQSxNQUFLOEUsT0FBYztBQUFBLE1BQzlCLFNBQVM5RSxFQUFBLE1BQUsrRSxPQUFZO0FBQUEsTUFDMUIsT0FBTy9FLEVBQUEsTUFBS2dGLE9BQVU7QUFBQSxJQUNsQyxHQUFXaEYsRUFBQSxNQUFLNkUsR0FBVTtBQUNsQixXQUFBN0YsRUFBSyxnQkFBZW5kLElBQUEsS0FBSyxpQkFBTCxnQkFBQUEsRUFBbUIsU0FDaENtZDtBQUFBLEVBQ2Y7QUFBQSxFQUNJLFNBQVM7QUFDTCxXQUFPO0FBQUEsTUFDSCxRQUFRLEtBQUs7QUFBQSxNQUNiLElBQUksS0FBSztBQUFBLE1BQ1QsVUFBVSxLQUFLO0FBQUEsTUFDZixXQUFXLEtBQUs7QUFBQSxNQUNoQixZQUFZLEtBQUs7QUFBQSxNQUNqQixVQUFVLEtBQUs7QUFBQSxNQUNmLFdBQVd1RixHQUFvQixLQUFLLFFBQVE7QUFBQSxNQUM1QyxPQUFPLEtBQUs7QUFBQSxJQUNmO0FBQUEsRUFDVDtBQUNBO0FBMUZJRSxLQUFBLGVBQ0FDLEtBQUEsZUFDQUMsS0FBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUEsZUFDQUMsS0FBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUEsZUFDQUMsS0FBQTtBQVZHLElBQU1DLEtBQU5WO0FBNkZBLE1BQU1XLFdBQWlCRCxHQUFLO0FBQUEsRUFDL0IsWUFBWXBWLEdBQU1nVSxHQUFXO0FBQ3pCLFVBQU0sRUFBRSxTQUFTLFNBQVMsUUFBUSxTQUFTLE1BQUFoVSxFQUFNLEdBQUVnVSxDQUFTO0FBQUEsRUFDcEU7QUFBQSxFQUNJLFFBQVE7QUFBQSxFQUVaO0FBQUEsRUFDSSxNQUFNO0FBQUEsRUFFVjtBQUFBLEVBQ0ksV0FBVztBQUFBLEVBRWY7QUFBQSxFQUNJLFNBQVM7QUFDTCxXQUFPO0FBQUEsRUFDZjtBQUNBOztBQzdHTyxNQUFNc0IsS0FBTixNQUFNQSxHQUFNO0FBQUEsRUFRZixZQUFZam5CLEdBQVMybEIsR0FBVztBQVBoQyxJQUFBNWEsRUFBQSxjQUFPO0FBQ1AsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBLGlCQUFVO0FBQ1YsSUFBQUEsRUFBQTtBQUNBLElBQUEyVyxFQUFBLE1BQUFnRjtBQUNBLElBQUFoRixFQUFBLE1BQUF3RjtBQUVJLFNBQUssVUFBVWxuQixFQUFRLFdBQVdrbUIsR0FBaUIsR0FDbkQsS0FBSyxPQUFPbG1CLEVBQVEsUUFBUSxrQkFDNUIsS0FBSyxVQUFVQSxFQUFRLFdBQVcsTUFDbEMsS0FBSyxXQUFXQSxFQUFRLFlBQVksQ0FBRSxHQUN0QzhrQixFQUFBLE1BQUs0QixJQUFhZixLQUFhSyxHQUFrQixJQUNqRGxCLEVBQUEsTUFBS29DLElBQVdsbkIsRUFBUSxXQUFXO0FBQUEsRUFDM0M7QUFBQSxFQUNJLE1BQU0sUUFBUTtBQUNWLElBQUk2aEIsRUFBQSxNQUFLcUYsUUFHVHBDLEVBQUEsTUFBS29DLElBQVcsS0FDaEIsTUFBTXJGLEVBQUEsTUFBSzZFLElBQVcsYUFBYSxJQUFJO0FBQUEsRUFDL0M7QUFBQSxFQUNJLE1BQU0sTUFBTTtBQUNSLElBQUs3RSxFQUFBLE1BQUtxRixRQUdWcEMsRUFBQSxNQUFLb0MsSUFBVyxLQUNoQixNQUFNckYsRUFBQSxNQUFLNkUsSUFBVyxXQUFXLElBQUk7QUFBQSxFQUM3QztBQUFBLEVBQ0ksUUFBUTtBQUNKLFdBQU8sSUFBSU8sR0FBTTtBQUFBLE1BQ2IsU0FBUyxLQUFLO0FBQUEsTUFDZCxNQUFNLEtBQUs7QUFBQSxNQUNYLFNBQVMsS0FBSyxXQUFXO0FBQUEsTUFDekIsVUFBVSxLQUFLO0FBQUEsTUFDZixTQUFTcEYsRUFBQSxNQUFLcUY7QUFBQSxJQUMxQixDQUFTO0FBQUEsRUFDVDtBQUFBLEVBQ0ksU0FBUztBQUNMLFdBQU87QUFBQSxNQUNILFFBQVEsS0FBSztBQUFBLE1BQ2IsSUFBSSxLQUFLO0FBQUEsTUFDVCxlQUFlLEtBQUs7QUFBQSxNQUNwQixVQUFVLEtBQUs7QUFBQSxNQUNmLFVBQVUsS0FBSztBQUFBLElBQ2xCO0FBQUEsRUFDVDtBQUNBO0FBMUNJUixLQUFBLGVBQ0FRLEtBQUE7QUFQRyxJQUFNQyxLQUFORjtBQWlEQSxNQUFNRyxXQUFrQkQsR0FBTTtBQUFBLEVBQ2pDLGNBQWM7QUFDVixVQUFNLENBQUEsQ0FBRTtBQUFBLEVBQ2hCO0FBQUEsRUFDSSxNQUFNLFFBQVE7QUFBQSxFQUVsQjtBQUFBLEVBQ0ksTUFBTSxNQUFNO0FBQUEsRUFFaEI7QUFBQSxFQUNJLFNBQVM7QUFDTCxXQUFPO0FBQUEsRUFDZjtBQUNBOztBQ3pETyxNQUFNRSxHQUFjO0FBQUEsRUFHdkIsY0FBYztBQUhYLElBQUEzRixFQUFBLE1BQUE0RjtBQUNILElBQUE1RixFQUFBLE1BQUE2RjtBQUNBLElBQUE3RixFQUFBLE1BQUE4RjtBQUVJLElBQUExQyxFQUFBLE1BQUt5QyxHQUFrQixJQUFJOUIsR0FBdUIsSUFDbERYLEVBQUEsTUFBSzBDLElBQVluWCxHQUFRLFdBQ3pCMFUsRUFBQSxNQUFLdUMsSUFBQUcsSUFBTDtBQUFBLEVBQ1I7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNSSxrQkFBa0I5QixHQUFXO0FBQ3pCLElBQUE5RCxFQUFBLE1BQUswRixHQUFnQixrQkFBa0I1QixDQUFTO0FBQUEsRUFDeEQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNSSxjQUFjQyxHQUFZO0FBQ3RCLElBQUEvRCxFQUFBLE1BQUswRixHQUFnQixjQUFjM0IsQ0FBVTtBQUFBLEVBQ3JEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUksa0JBQWtCO0FBQ2QsV0FBT2hELEdBQWlCO0FBQUEsRUFDaEM7QUFBQSxFQUNJLGlCQUFpQjtBQUNiLFdBQU9yUixHQUFnQjtBQUFBLEVBQy9CO0FBQUEsRUFDSSxZQUFZbVcsR0FBVTtBQUNsQixJQUFBNUMsRUFBQSxNQUFLMEMsSUFBWUU7QUFBQSxFQUN6QjtBQUFBLEVBQ0ksa0JBQWtCO0FBQ2QsSUFBQTdGLEVBQUEsTUFBSzBGLEdBQWdCLE1BQU87QUFBQSxFQUNwQztBQUFBLEVBQ0ksWUFBWUksR0FBYztBQUN0QixRQUFJOUYsRUFBQSxNQUFLMkY7QUFDTDlXLGFBQUFBLEVBQU8sTUFBTSw4Q0FBOENpWCxDQUFZLEdBQ2hFLElBQUlQLEdBQVc7QUFFMUIsVUFBTVEsSUFBVUQsRUFBYSxXQUFXekIsR0FBaUIsR0FDbkQxbEIsSUFBT21uQixFQUFhLFFBQVE7QUFDbENqWCxXQUFBQSxFQUFPLE1BQU0sa0NBQWtDa1gsR0FBU3BuQixDQUFJLEdBQ3JELElBQUkybUIsR0FBTSxFQUFFLEdBQUdRLEdBQWMsTUFBQW5uQixHQUFNLFNBQUFvbkIsRUFBUyxHQUFFL0YsRUFBQSxNQUFLMEYsRUFBZTtBQUFBLEVBQ2pGO0FBQUEsRUFDSSxXQUFXTSxHQUFhL1QsR0FBUTtBQUM1QixRQUFJK04sRUFBQSxNQUFLMkYsT0FBYUssRUFBWTtBQUM5Qm5YLGFBQUFBLEVBQU8sTUFBTSw2Q0FBNkNtWCxDQUFXLEdBQzlELElBQUliLEdBQVNhLEVBQVksTUFBTWhHLEVBQUEsTUFBSzBGLEVBQWU7QUFFOUQsUUFBSU8sR0FDQUY7QUFDSixRQUFLOVQ7QUFxQkEsVUFBSUEsYUFBa0JxVCxJQUFPO0FBQzlCLFlBQUlyVCxhQUFrQnNUO0FBQ2xCMVcsaUJBQUFBLEVBQU8sTUFBTSwyQ0FBMkMsR0FDakQsSUFBSXNXLEdBQVNhLEVBQVksTUFBTWhHLEVBQUEsTUFBSzBGLEVBQWU7QUFFOUQsUUFBQUssSUFBVTlULEVBQU87QUFBQSxNQUM3QixXQUNpQkEsYUFBa0JpVCxJQUFNO0FBQzdCLFlBQUlqVCxhQUFrQmtUO0FBQ2xCdFcsaUJBQUFBLEVBQU8sTUFBTSwwQ0FBMEMsR0FDaEQsSUFBSXNXLEdBQVNhLEVBQVksTUFBTWhHLEVBQUEsTUFBSzBGLEVBQWU7QUFFOUQsUUFBQU8sSUFBV2hVLEVBQU8sUUFDbEI4VCxJQUFVOVQsRUFBTztBQUFBLE1BQzdCO0FBQUEsV0FuQ3FCO0FBQ1QsWUFBTStPLElBQWVELEdBQWlCLEdBQ2hDdFIsSUFBY0MsR0FBZ0I7QUFDcEMsVUFBSSxDQUFDc1I7QUFDRG5TLGVBQUFBLEVBQU8sTUFBTSwyRkFBMkYsR0FDakcsSUFBSXNXLEdBQVNhLEVBQVksTUFBTWhHLEVBQUEsTUFBSzBGLEVBQWU7QUFFOUQsVUFBSWpXLGFBQXVCMFYsTUFDdkJuRSxhQUF3QnVFO0FBQ3hCMVcsZUFBQUEsRUFBTyxNQUFNLFVBQVVZLENBQVcsT0FBT3VSLENBQVksK0JBQStCLEdBQzdFLElBQUltRSxHQUFTYSxFQUFZLE1BQU1oRyxFQUFBLE1BQUswRixFQUFlO0FBRTlELE1BQUFLLElBQVUvRSxFQUFhLFNBQ25CdlIsS0FDQVosRUFBTyxNQUFNLHdCQUF3QlksRUFBWSxNQUFNLEdBQ3ZEd1csSUFBV3hXLEVBQVksVUFHdkJaLEVBQU8sTUFBTSwwQ0FBMENtUyxFQUFhLE9BQU87QUFBQSxJQUUzRjtBQWdCUSxXQUFLK0UsS0FJTGxYLEVBQU8sTUFBTSxpQkFBaUIsS0FBSyxVQUFVbVgsRUFBWSxJQUFJLENBQUMsWUFBWUEsRUFBWSxVQUFVRCxDQUFPLEVBQUUsR0FDbEcsSUFBSWIsR0FBSztBQUFBLE1BQ1osR0FBR2M7QUFBQSxNQUNILFNBQUFEO0FBQUEsTUFDQSxVQUFBRTtBQUFBLElBQ1osR0FBV2pHLEVBQUEsTUFBSzBGLEVBQWUsTUFSbkI3VyxFQUFPLE1BQU0sNEZBQTRGLEdBQ2xHLElBQUlzVyxHQUFTYSxFQUFZLE1BQU1oRyxFQUFBLE1BQUswRixFQUFlO0FBQUEsRUFRdEU7QUFBQSxFQUNJLE1BQU0sU0FBU2hGLEdBQVM7QUFDcEIsUUFBSTtBQUNBN1IsTUFBQUEsRUFBTyxNQUFNLGdDQUFnQyxHQUM3QyxNQUFNbVIsRUFBQSxNQUFLMEYsR0FBZ0IsU0FBU2hGLENBQU87QUFBQSxJQUN2RCxTQUNlL2lCLEdBQU87QUFDVmtSLE1BQUFBLEVBQU8sTUFBTSwyQ0FBMkNsUixDQUFLO0FBQUEsSUFDekU7QUFBQSxFQUNBO0FBQUEsRUFvQ0ksTUFBTSxhQUFhO0FBQ2YsVUFBTXFpQixFQUFBLE1BQUswRixHQUFnQixXQUFZO0FBQUEsRUFDL0M7QUFDQTtBQXZKSUEsSUFBQSxlQUNBQyxLQUFBLGVBRkdGLEtBQUE7QUFtSEhHLEtBQW9CLFdBQUc7QUFDbkIsTUFBSSxPQUFPLFVBQVksT0FBZSxPQUFPLFFBQVEsTUFBTyxZQUFZO0FBRXBFLFVBQU1NLElBQVUsWUFBWTtBQUN4QixZQUFNeEYsSUFBVSxXQUFXLE1BQU07QUFDN0IsZ0JBQVEsS0FBSywrQkFBK0IsR0FDNUMsUUFBUSxLQUFLLENBQUM7QUFBQSxNQUNqQixHQUFFLEdBQUk7QUFDUCxVQUFJO0FBQ0EsY0FBTSxLQUFLLFNBQVU7QUFBQSxNQUN6QyxVQUN3QjtBQUNKLHFCQUFhQSxDQUFPO0FBQUEsTUFDeEM7QUFBQSxJQUNhO0FBRUQsWUFBUSxHQUFHLGNBQWN3RixDQUFPLEdBRWhDLFFBQVEsR0FBRyxVQUFVLFlBQVk7QUFDN0IsWUFBTUEsRUFBUyxHQUNmLFFBQVEsS0FBSyxHQUFHO0FBQUEsSUFDaEMsQ0FBYSxHQUVELFFBQVEsR0FBRyxXQUFXLFlBQVk7QUFDOUIsWUFBTUEsRUFBUyxHQUNmLFFBQVEsS0FBSyxDQUFDO0FBQUEsSUFDOUIsQ0FBYSxHQUNELFFBQVEsR0FBRyxzQkFBc0IsT0FBT0MsR0FBUUMsTUFBWTtBQUN4RHZYLE1BQUFBLEVBQU8sTUFBTSx1QkFBdUJzWCxHQUFRQyxDQUFPLEdBQ25ELE1BQU1GLEVBQVMsR0FDZixRQUFRLEtBQUssQ0FBQztBQUFBLElBQzlCLENBQWE7QUFBQSxFQUNiO0FBQ0E7QUFLQSxJQUFJRztBQUNHLFNBQVNoRixLQUF5QjtBQUNyQyxTQUFLZ0YsT0FDREEsS0FBd0IsSUFBSWIsR0FBZSxJQUV4Q2E7QUFDWDtBQ3BLQSxTQUFTQyxHQUFpQkMsR0FBWTtBQUNsQyxTQUFPLE9BQU83b0IsTUFBT3FMLE1BRVY2WSxHQUFtQixZQUFZO0FBQ2xDLFVBQU01QyxJQUFPdUgsRUFBVyxHQUFHeGQsQ0FBSTtBQUMvQixJQUFBd1ksR0FBZXZDLENBQUk7QUFDbkIsUUFBSTtBQUNBLGFBQUFBLEVBQUssTUFBTyxHQUNMLE1BQU10aEIsRUFBR3NoQixDQUFJO0FBQUEsSUFDcEMsU0FDbUJyaEIsR0FBTztBQUNWLFlBQUFxaEIsRUFBSyxTQUFTO0FBQUEsUUFDVixTQUFTcmhCLEVBQU07QUFBQSxRQUNmLE1BQU1BLEVBQU07QUFBQSxNQUNoQyxDQUFpQixHQUNLQTtBQUFBLElBQ3RCLFVBQ29CO0FBQ0osTUFBQXFoQixFQUFLLElBQUssR0FDVndDLEdBQWtCO0FBQUEsSUFDbEM7QUFBQSxFQUNBLENBQVM7QUFFVDtBQTJDTyxTQUFTZ0YsR0FBZ0Jyb0IsR0FBUzhULEdBQVE7O0FBQzdDLFNBQU9vUCxHQUF3QixFQUFDLFdBQVc7QUFBQSxJQUN2QyxHQUFHbGpCO0FBQUEsSUFDSCxNQUFNO0FBQUEsTUFDRixNQUFNO0FBQUEsTUFDTixRQUFNMEQsSUFBQTFELEtBQUEsZ0JBQUFBLEVBQVMsU0FBVCxnQkFBQTBELEVBQWUsU0FBUTtBQUFBLE1BQzdCLEdBQUcxRCxLQUFBLGdCQUFBQSxFQUFTO0FBQUEsSUFDZjtBQUFBLEVBQ0osR0FBRThULENBQU07QUFDYjtBQWVPLFNBQVN3VSxHQUFtQnRvQixHQUFTOFQsR0FBUTs7QUFDaEQsU0FBT29QLEdBQXdCLEVBQUMsV0FBVztBQUFBLElBQ3ZDLEdBQUdsakI7QUFBQSxJQUNILE1BQU07QUFBQSxNQUNGLE1BQU07QUFBQSxNQUNOLFNBQU8wRCxJQUFBMUQsS0FBQSxnQkFBQUEsRUFBUyxTQUFULGdCQUFBMEQsRUFBZSxVQUFTO0FBQUEsTUFDL0IsVUFBUUQsSUFBQXpELEtBQUEsZ0JBQUFBLEVBQVMsU0FBVCxnQkFBQXlELEVBQWUsV0FBVTtBQUFBLE1BQ2pDLEdBQUd6RCxLQUFBLGdCQUFBQSxFQUFTO0FBQUEsSUFDZjtBQUFBLEVBQ0osR0FBRThULENBQU07QUFDYjtBQUlPLE1BQU15VSxLQUFtQkosR0FBaUJHLEVBQWtCO0FBVzVELFNBQVNFLEdBQWtCeG9CLEdBQVM4VCxHQUFRO0FBQy9DLFNBQU9vUCxHQUF3QixFQUFDLFdBQVc7QUFBQSxJQUN2QyxHQUFHbGpCO0FBQUEsSUFDSCxNQUFNLEVBQUUsTUFBTSxXQUFXLEdBQUdBLEtBQUEsZ0JBQUFBLEVBQVMsS0FBTTtBQUFBLEVBQzlDLEdBQUU4VCxDQUFNO0FBQ2I7QUFJTyxNQUFNMlUsS0FBa0JOLEdBQWlCSyxFQUFpQjtBQXVDMUQsU0FBU0UsR0FBb0Ixb0IsR0FBUzhULEdBQVE7QUFDakQsU0FBT29QLEdBQXdCLEVBQUMsV0FBVztBQUFBLElBQ3ZDLEdBQUdsakI7QUFBQSxJQUNILE1BQU07QUFBQSxNQUNGLE1BQU07QUFBQSxNQUNOLFdBQVc7QUFBQSxNQUNYLEdBQUdBLEtBQUEsZ0JBQUFBLEVBQVM7QUFBQSxJQUNmO0FBQUEsRUFDSixHQUFFOFQsQ0FBTTtBQUNiO0FBQ08sTUFBTTZVLEtBQW9CUixHQUFpQk8sRUFBbUI7QUEyQzlELFNBQVNFLEdBQXVCNW9CLEdBQVM4VCxHQUFRO0FBQ3BELFNBQU9vUCxHQUF3QixFQUFDLFdBQVc7QUFBQSxJQUN2QyxHQUFHbGpCO0FBQUEsSUFDSCxNQUFNO0FBQUEsTUFDRixNQUFNO0FBQUEsTUFDTixHQUFHQSxLQUFBLGdCQUFBQSxFQUFTO0FBQUEsSUFDZjtBQUFBLEVBQ0osR0FBRThULENBQU07QUFDYjtBQUNPLE1BQU04TSxLQUF1QnVILEdBQWlCUyxFQUFzQjtBQ3ZOcEUsU0FBU0MsR0FBa0JsRCxHQUFXO0FBQ3pDLEVBQUF6QyxHQUF3QixFQUFDLGtCQUFrQnlDLENBQVM7QUFDeEQ7QUNiTyxNQUFNbUQsR0FBcUI7QUFBQSxFQUM5QixHQUFHbmtCLEdBQU1pZCxHQUFVO0FBQ2YsZ0JBQUssYUFBYSxHQUFHamQsR0FBTWlkLENBQVEsR0FDNUIsS0FBSztBQUFBLEVBQ3BCO0FBQUEsRUFDSSxJQUFJamQsR0FBTWlkLEdBQVU7QUFDaEIsZ0JBQUssYUFBYSxJQUFJamQsR0FBTWlkLENBQVEsR0FDN0IsS0FBSztBQUFBLEVBQ3BCO0FBQUEsRUFDSSxLQUFLamQsTUFBU2lHLEdBQU07QUFDaEIsV0FBTyxLQUFLLGFBQWEsS0FBS2pHLEdBQU0sR0FBR2lHLENBQUk7QUFBQSxFQUNuRDtBQUFBLEVBQ0ksS0FBS2pHLEdBQU1pZCxHQUFVO0FBQ2pCLGdCQUFLLGFBQWEsS0FBS2pkLEdBQU1pZCxDQUFRLEdBQzlCLEtBQUs7QUFBQSxFQUNwQjtBQUNBO0FBS08sTUFBTW1ILFdBQW1CRCxHQUFxQjtBQUFBLEVBQTlDO0FBQUE7QUFDSCxJQUFBL2QsRUFBQSxzQkFBZSxJQUFJaWUsR0FBcUI7QUFBQTtBQUM1QztBQUtPLE1BQU1DLFdBQWlCSCxHQUFxQjtBQUFBLEVBQTVDO0FBQUE7QUFDSCxJQUFBL2QsRUFBQSxzQkFBZSxJQUFJaWUsR0FBcUI7QUFBQTtBQUM1QztBQzVCTyxTQUFTRSxHQUFxQixFQUFFLE1BQUExb0IsR0FBTSxTQUFBMm9CLEtBQVk7QUFDckQsU0FBTztBQUFBLElBQ0gsTUFBTTtBQUFBLElBQ04sTUFBQTNvQjtBQUFBLElBQ0EsbUJBQW1CMm9CO0FBQUEsSUFDbkIsTUFBTSxJQUFJdmUsR0FBTTtBQUNaLGFBQU87QUFBQSxRQUNILFdBQVcsRUFBRSxNQUFNLFNBQVMsTUFBQXBLLEVBQU07QUFBQSxRQUNsQyxRQUFRLE1BQU0yb0IsRUFBUXZlLENBQUk7QUFBQSxNQUM3QjtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQ0w7QUFJTyxTQUFTd2UsR0FBc0IsRUFBRSxNQUFBNW9CLEdBQU0sU0FBQTJvQixLQUFZO0FBQ3RELFNBQU87QUFBQSxJQUNILE1BQU07QUFBQSxJQUNOLE1BQUEzb0I7QUFBQSxJQUNBLG1CQUFtQjJvQjtBQUFBLElBQ25CLE1BQU0sSUFBSXZlLEdBQU07QUFDWixhQUFPO0FBQUEsUUFDSCxXQUFXLEVBQUUsTUFBTSxVQUFVLE1BQUFwSyxFQUFNO0FBQUEsUUFDbkMsT0FBT29LLEVBQUs7QUFBQSxRQUNaLGFBQWFBLEVBQUs7QUFBQSxRQUNsQixRQUFRLE1BQU11ZSxFQUFRdmUsQ0FBSTtBQUFBLE1BQzdCO0FBQUEsSUFDSjtBQUFBLEVBQ0o7QUFDTDtBQ3RCTyxTQUFTeWUsR0FBbUJDLEdBQU87QUFDdEMsU0FBTyxLQUFLLFVBQVUsRUFBRSxXQUFXQSxFQUFNLEtBQUksQ0FBRTtBQUNuRDtBQU9BLFNBQVNDLEdBQXVCRCxHQUFPO0FBQ25DLFNBQU8sZUFBZTNkLEdBQW1CMmQsRUFBTSxJQUFJLENBQUM7QUFDeEQ7QUFPQSxTQUFTRSxHQUE4QkYsR0FBTztBQUMxQyxTQUFPLGtCQUFrQkEsRUFBTSxJQUFJLGlDQUFpQ0EsRUFBTSxzQkFBc0IsRUFBRTtBQUN0RztBQVVPLE1BQU1HLEdBQVE7QUFBQSxFQStEakIsWUFBWUgsR0FBT0ksR0FBaUI7QUEzRHBDO0FBQUE7QUFBQTtBQUFBLElBQUEzZSxFQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUEseUJBQWtCO0FBQUEsTUFDZCxNQUFNO0FBQUEsTUFDTixZQUFZLENBQUU7QUFBQSxNQUNkLFVBQVUsQ0FBRTtBQUFBLE1BQ1osc0JBQXNCO0FBQUEsSUFDekI7QUFLRDtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUEsMEJBQW1CO0FBUW5CO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUE7QUFZQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUE7QUFjSSxTQUFLLFlBQVl1ZSxFQUFNLE1BQ3ZCLEtBQUssa0JBQWtCSSxHQUN2QixLQUFLLFdBQVdILEdBQXVCRCxDQUFLLEdBQzVDLEtBQUssa0JBQWtCRSxHQUE4QkYsQ0FBSyxHQUMxRCxLQUFLLFFBQVFBO0FBQUEsRUFDckI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQWZJLDJCQUEyQjtBQUN2QixXQUFPO0FBQUEsTUFDSCxNQUFNO0FBQUEsTUFDTixNQUFNLEtBQUs7QUFBQSxNQUNYLGFBQWEsS0FBSztBQUFBLE1BQ2xCLFlBQVksS0FBSztBQUFBLE1BQ2pCLFFBQVEsS0FBSztBQUFBLElBQ2hCO0FBQUEsRUFDVDtBQVFBO0FBVU8sU0FBU0ssR0FBUUwsR0FBT00sSUFBUyxJQUFJO0FBQ3hDLE1BQUlqcUI7QUFDSixRQUFNa3FCLElBQWUsQ0FBQyxDQUFDRCxFQUFPLFdBQ3hCRSxJQUFlLENBQUMsQ0FBQ0YsRUFBTztBQUU5QixNQUFJLEVBRHdDQyxNQUFpQkM7QUFFekQsVUFBTSxJQUFJM2UsRUFBVSxzRUFBc0U7QUFFOUYsaUJBQWV1ZSxFQUFnQjdZLEdBQVNrWixHQUFpQjs7QUFDckQsUUFBSXBxQixHQUFRO0FBQ1IsVUFBSSxDQUFDb3FCO0FBQ0QsY0FBQXpHLEdBQXNCO0FBQUEsVUFDbEIsU0FBUyxzREFBc0R5RyxDQUFlO0FBQUEsVUFDOUUsTUFBTTtBQUFBLFlBQ0YsU0FBUztBQUFBLFVBQ1o7QUFBQSxRQUNyQixDQUFpQixHQUNLLElBQUk3ZSxHQUFtQiwyQ0FBMkM7QUFFNUUsVUFBSTtBQUVBLGNBQU1pRyxJQUFTLE1BQU14UixFQUFPb3FCLENBQWU7QUFDM0MsUUFBSUgsRUFBTyxhQUNQLE1BQU1BLEVBQU8sVUFBVS9ZLEdBQVNNLENBQU07QUFBQSxNQUUxRCxTQUNtQjNSLEdBQU87QUFDVixjQUFBOGpCLEdBQXNCO0FBQUEsVUFDbEIsU0FBUztBQUFBLFVBQ1QsTUFBTSxDQUFFO0FBQUEsUUFDNUIsQ0FBaUIsR0FDSTVTLEVBQU8sbUJBQ1JBLEVBQU8sTUFBTSw4QkFBOEJxWixDQUFlLFlBQVl2cUIsQ0FBSyxFQUFFLEdBRTNFLElBQUkwTCxHQUFtQix1QkFBdUI7QUFBQSxNQUNwRTtBQUFBLElBQ0E7QUFFWSxjQUFNeEgsSUFBQWttQixFQUFPLGNBQVAsZ0JBQUFsbUIsRUFBQSxLQUFBa21CLEdBQW1CL1k7QUFFN0IsV0FBT3lZO0FBQUEsRUFDZjtBQUNJLFFBQU1LLElBQVUsSUFBSUYsR0FBUUgsR0FBT0ksQ0FBZTtBQUNsRCxNQUFJRSxFQUFPLFdBQVc7QUFDbEIsVUFBTTNoQixJQUFTMkQsR0FBZ0NnZSxFQUFPLFdBQVdELEVBQVEsUUFBUTtBQUNqRixJQUFBQSxFQUFRLGtCQUFrQjFoQixFQUFPLFFBQ2pDMGhCLEVBQVEsbUJBQW1CLElBQzNCaHFCLElBQVNzSSxFQUFPO0FBQUEsRUFDeEI7QUFDSSxTQUFJMmhCLEVBQU8scUJBQ1BELEVBQVEsV0FBV0MsRUFBTyxtQkFFMUJBLEVBQU8sNEJBQ1BELEVBQVEsa0JBQWtCQyxFQUFPLDBCQUVqQ0EsRUFBTyxnQkFDUEQsRUFBUSxjQUFjQyxFQUFPLGNBRTFCRDtBQUNYO0FBUU8sU0FBU0ssR0FBV1YsR0FBTztBQUM5QixTQUFJQSxhQUFpQkcsS0FDVkgsSUFFSkssR0FBUUwsQ0FBSztBQUN4QjtBQ25MTyxTQUFTVyxLQUEwQjtBQUVsQyxRQUFNLElBQUksTUFBTSwrSkFBK0o7QUFHdkw7QUNYTyxNQUFNQyxLQUFheEssRUFBUztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLL0IsY0FBY0csR0FBU0YsRUFBUSxHQUFJRyxFQUFPLENBQUEsRUFBRSxTQUFVO0FBQzFELENBQUMsR0FJWXFLLEtBQVdELEdBQVcsT0FBTztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLdEMsSUFBSXZLLEVBQVUsRUFBQyxTQUFVO0FBQzdCLENBQUMsR0FJWXlLLEtBQVVGLEdBQVcsT0FBTztBQUFBLEVBQ3JDLE1BQU10SyxFQUFVLFNBQVM7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUl6QixTQUFTRCxFQUFVO0FBQ3ZCLENBQUMsR0FDWTBLLEtBQWFILEdBQVcsT0FBTztBQUFBLEVBQ3hDLE1BQU10SyxFQUFVLGFBQWE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUk3QixNQUFNRCxFQUFVO0FBQ3BCLENBQUMsR0FDWTJLLEtBQVlKLEdBQVcsT0FBTztBQUFBLEVBQ3ZDLE1BQU10SyxFQUFVLFlBQVk7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUk1QixNQUFNRCxFQUFVO0FBQ3BCLENBQUMsR0FDWTRLLEtBQWFMLEdBQVcsT0FBTztBQUFBLEVBQ3hDLE1BQU10SyxFQUFVLGFBQWE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUk3QixPQUFPNEssRUFDSSxFQUNOLEdBQUc5SyxFQUFTO0FBQUEsSUFDYixJQUFJQyxFQUFVO0FBQUEsRUFDdEIsQ0FBSyxDQUFDLEVBQ0csU0FBUyxxREFBcUQ7QUFDdkUsQ0FBQyxHQUNZOEssS0FBWVAsR0FBVyxPQUFPO0FBQUEsRUFDdkMsTUFBTXRLLEVBQVUsWUFBWTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSTVCLE1BQU00SyxFQUNLLEVBQ04sR0FBRzlLLEVBQVM7QUFBQSxJQUNiLElBQUlDLEVBQVU7QUFBQSxFQUN0QixDQUFLLENBQUMsRUFDRyxTQUFTLG1EQUFtRDtBQUNyRSxDQUFDLEdBQ1krSyxLQUFlUixHQUFXLE9BQU87QUFBQSxFQUMxQyxNQUFNdEssRUFBVSxPQUFPO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJdkIsT0FBTzRLLEVBQ0ksRUFDTixHQUFHOUssRUFBUztBQUFBLElBQ2IsSUFBSUMsRUFBVTtBQUFBLEVBQ3RCLENBQUssQ0FBQyxFQUNHLFNBQVMsc0NBQXNDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJcEQsUUFBUUEsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFVO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJeEMsWUFBWUEsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFVO0FBQ2hELENBQUMsR0FDWWdMLEtBQWVULEdBQVcsT0FBTztBQUFBLEVBQzFDLE1BQU10SyxFQUFVLE9BQU87QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUl2QixPQUFPRCxFQUFRLEVBQUcsU0FBUywyQkFBMkI7QUFDMUQsQ0FBQyxHQUNZaUwsS0FBaUJWLEdBQVcsT0FBTztBQUFBLEVBQzVDLE1BQU10SyxFQUFVLE1BQU07QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUl0QixNQUFNRCxFQUFVO0FBQ3BCLENBQUMsR0FDWWtMLEtBQWtCWCxHQUFXLE9BQU87QUFBQSxFQUM3QyxNQUFNdEssRUFBVSxPQUFPO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJdkIsTUFBTUQsRUFBUSxFQUFHLFNBQVMsMkJBQTJCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJckQsV0FBV0EsRUFBUSxFQUFHLFNBQVMsOEJBQThCO0FBQ2pFLENBQUMsR0FDWW1MLEtBQXFCWixHQUFXLE9BQU87QUFBQSxFQUNoRCxNQUFNdEssRUFBVSxxQkFBcUI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlyQyxNQUFNRCxFQUFRLEVBQUcsU0FBUyxrQ0FBa0M7QUFDaEUsQ0FBQyxHQUNZb0wsS0FBa0JDLEdBQXFCLFFBQVE7QUFBQSxFQUN4RHRMLEVBQVMsRUFBRSxNQUFNRSxFQUFVLFlBQVksRUFBQyxDQUFFO0FBQUEsRUFDMUNGLEVBQVM7QUFBQSxJQUNMLE1BQU1FLEVBQVUsT0FBTztBQUFBLElBQ3ZCLEdBQUdxTCxFQUFVO0FBQUEsSUFDYixHQUFHQSxFQUFVO0FBQUEsSUFDYixRQUFRQyxHQUFPLENBQUMsUUFBUSxTQUFTLFNBQVMsUUFBUSxTQUFTLENBQUM7QUFBQSxFQUNwRSxDQUFLO0FBQUEsRUFDRHhMLEVBQVM7QUFBQSxJQUNMLE1BQU1FLEVBQVUsY0FBYztBQUFBLElBQzlCLEdBQUdxTCxFQUFVO0FBQUEsSUFDYixHQUFHQSxFQUFVO0FBQUEsRUFDckIsQ0FBSztBQUFBLEVBQ0R2TCxFQUFTO0FBQUEsSUFDTCxNQUFNRSxFQUFVLFFBQVE7QUFBQSxJQUN4QixHQUFHcUwsRUFBVTtBQUFBLElBQ2IsR0FBR0EsRUFBVTtBQUFBLElBQ2IsVUFBVUEsRUFBVTtBQUFBLElBQ3BCLFVBQVVBLEVBQVU7QUFBQSxFQUM1QixDQUFLO0FBQUEsRUFDRHZMLEVBQVM7QUFBQSxJQUNMLE1BQU1FLEVBQVUsTUFBTTtBQUFBLElBQ3RCLE1BQU1ELEVBQVU7QUFBQSxFQUN4QixDQUFLO0FBQUEsRUFDREQsRUFBUyxFQUFFLE1BQU1FLEVBQVUsTUFBTSxFQUFDLENBQUU7QUFBQSxFQUNwQ0YsRUFBUztBQUFBLElBQ0wsTUFBTUUsRUFBVSxNQUFNO0FBQUEsSUFDdEIsR0FBR3FMLEVBQVU7QUFBQSxJQUNiLEdBQUdBLEVBQVU7QUFBQSxFQUNyQixDQUFLO0FBQUEsRUFDRHZMLEVBQVM7QUFBQSxJQUNMLE1BQU1FLEVBQVUsVUFBVTtBQUFBLElBQzFCLE1BQU1HLEVBQVFKLEdBQVU7QUFBQSxFQUNoQyxDQUFLO0FBQUEsRUFDREQsRUFBUztBQUFBLElBQ0wsTUFBTUUsRUFBVSxNQUFNO0FBQUEsSUFDdEIsTUFBTUcsRUFBUUwsRUFBUyxFQUFFLEdBQUd1TCxFQUFRLEdBQUksR0FBR0EsRUFBVSxFQUFBLENBQUUsQ0FBQztBQUFBLEVBQ2hFLENBQUs7QUFDTCxDQUFDLEdBSVlFLEtBQW1CSCxHQUFxQixRQUFRO0FBQUEsRUFDekRYO0FBQUEsRUFDQUQ7QUFBQSxFQUNBRTtBQUFBLEVBQ0FJO0FBQUEsRUFDQUM7QUFDSixDQUFDLEdBQ0tTLEtBQWNqQixHQUFTLE9BQU87QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUloQyxNQUFNdkssRUFBVSxTQUFTLEVBQUUsU0FBVTtBQUN6QyxDQUFDLEdBQ1l5TCxLQUF1QkQsR0FBWSxPQUFPO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJbkQsTUFBTXhMLEVBQVUsV0FBVztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSTNCLFFBQVFzTCxHQUFPLENBQUMsZUFBZSxhQUFhLFlBQVksQ0FBQztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSXpELFNBQVNuTCxFQUFRb0wsRUFBZ0I7QUFDckMsQ0FBQyxHQUNZRyxLQUFjTixHQUFxQixRQUFRO0FBQUEsRUFDcERWO0FBQUEsRUFDQUM7QUFBQSxFQUNBRTtBQUFBLEVBQ0FDO0FBQ0osQ0FBQyxHQUNZYSxLQUFrQkgsR0FBWSxPQUFPO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUs5QyxNQUFNeEwsRUFBVSxNQUFNO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJdEIsU0FBU0csRUFBUXVMLEVBQVcsRUFBRSxHQUFHM0wsRUFBUSxDQUFFO0FBQy9DLENBQUMsR0FDSzZMLEtBQW9CSixHQUFZLE9BQU87QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS3pDLE1BQU14TCxFQUFVLFFBQVE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUl4QixTQUFTRCxFQUFVO0FBQ3ZCLENBQUM7QUFDMEJxTCxHQUFxQixRQUFRO0FBQUEsRUFDcERRO0FBQUEsRUFDQUg7QUFBQSxFQUNBRTtBQUNKLENBQUM7QUFJTSxNQUFNRSxLQUFxQnRCLEdBQVMsT0FBTztBQUFBLEVBQzlDLE1BQU12SyxFQUFVLGtCQUFrQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSWxDLE1BQU1ELEVBQVEsRUFBRyxTQUFTLDZCQUE2QjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSXZELFdBQVc2SyxFQUNBLEVBQ04sU0FBUyx1Q0FBdUMsRUFDaEQsU0FBVTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSWYsUUFBUTdLLEVBQVUsRUFBQyxTQUFVO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJN0IsUUFBUUEsRUFBVSxFQUFDLFNBQVU7QUFDakMsQ0FBQyxHQUNZK0wsS0FBbUJ2QixHQUFTLE9BQU87QUFBQSxFQUM1QyxNQUFNdkssRUFBVSxlQUFlO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJL0IsUUFBUUQsRUFBUSxFQUFHLFNBQVMseUJBQXlCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJckQsTUFBTUEsRUFBUSxFQUFHLFNBQVMsMEJBQTBCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJcEQsUUFBUXVMLEdBQU8sQ0FBQyxlQUFlLGFBQWEsWUFBWSxDQUFDLEVBQUUsU0FBVTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSXJFLFdBQVd2TCxFQUFVO0FBQ3pCLENBQUMsR0FDWWdNLEtBQXlCeEIsR0FBUyxPQUFPO0FBQUEsRUFDbEQsTUFBTXZLLEVBQVUsc0JBQXNCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJdEMsTUFBTUQsRUFBUSxFQUFHLFNBQVMsc0JBQXNCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJaEQsUUFBUUEsRUFBUSxFQUFHLFNBQVMseUJBQXlCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJckQsUUFBUXVMLEdBQU8sQ0FBQyxlQUFlLGFBQWEsWUFBWSxDQUFDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJekQsUUFBUUYsR0FBcUIsUUFBUSxDQUFDSixJQUFnQkMsRUFBZSxDQUFDO0FBQzFFLENBQUMsR0FDWWUsS0FBc0J6QixHQUFTLE9BQU87QUFBQSxFQUMvQyxNQUFNdkssRUFBVSxlQUFlO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJL0IsUUFBUUQsRUFBUSxFQUFHLFNBQVMsNkJBQTZCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJekQsUUFBUXVMLEdBQU8sQ0FBQyxlQUFlLGFBQWEsWUFBWSxDQUFDO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJekQsUUFBUUg7QUFDWixDQUFDLEdBQ1ljLEtBQXlCMUIsR0FBUyxPQUFPO0FBQUEsRUFDbEQsTUFBTXZLLEVBQVUsc0JBQXNCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJdEMsUUFBUUQsRUFBUSxFQUFHLFNBQVMsNkJBQTZCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJekQsUUFBUW1MO0FBQ1osQ0FBQyxHQUNZZ0IsS0FBZWQsR0FBcUIsUUFBUTtBQUFBLEVBQ3JEWTtBQUFBLEVBQ0FGO0FBQUEsRUFDQUQ7QUFDSixDQUFDLEdBSVlNLEtBQWdCN0IsR0FBVyxPQUFPO0FBQUEsRUFDM0MsSUFBSXZLLEVBQVUsRUFBQyxTQUFVO0FBQUEsRUFDekIsTUFBTUMsRUFBVSxXQUFXO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJM0IsU0FBU0csRUFBUXVLLEVBQVM7QUFDOUIsQ0FBQyxHQVVZMEIsS0FBYzdCLEdBQVMsT0FBTztBQUFBLEVBQ3ZDLE1BQU12SyxFQUFVLFNBQVM7QUFDN0IsQ0FBQyxHQUlZcU0sS0FBa0JqQixHQUFxQixRQUFRO0FBQUEsRUFDeERLO0FBQUEsRUFDQUk7QUFBQSxFQUNBQztBQUFBLEVBQ0FFO0FBQUEsRUFDQUc7QUFBQSxFQUNBQztBQUNKLENBQUMsR0FDWUUsS0FBWUMsR0FBUTtBQUFBLEVBQzdCWjtBQUFBLEVBQ0FGO0FBQUEsRUFDQUc7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUU7QUFBQSxFQUNBRDtBQUFBLEVBQ0FFO0FBQUEsRUFDQUU7QUFBQSxFQUNBQztBQUNKLENBQUMsR0FJWUksS0FBWTFNLEVBQVM7QUFBQSxFQUM5QixVQUFVdUwsRUFBVSxFQUFDLFNBQVU7QUFBQSxFQUMvQixhQUFhQSxFQUFVO0FBQUEsRUFDdkIsY0FBY0EsRUFBVTtBQUFBLEVBQ3hCLGFBQWFBLEVBQVU7QUFBQSxFQUN2QixvQkFBb0JwTCxHQUFTRixFQUFRLEdBQUlzTCxFQUFVLENBQUEsRUFBRSxTQUFVO0FBQUEsRUFDL0QscUJBQXFCcEwsR0FBU0YsRUFBUSxHQUFJc0wsRUFBVSxDQUFBLEVBQUUsU0FBVTtBQUNwRSxDQUFDLEdBT1lvQixLQUF3Qm5DLEdBQVcsT0FBTztBQUFBLEVBQ25ELE1BQU10SyxFQUFVLG1CQUFtQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSW5DLE9BQU9ELEVBQVU7QUFDckIsQ0FBQyxHQUlZMk0sS0FBNkJwQyxHQUFXLE9BQU87QUFBQSxFQUN4RCxNQUFNdEssRUFBVSxrQkFBa0I7QUFDdEMsQ0FBQyxHQUlZMk0sS0FBK0JyQyxHQUFXLE9BQU87QUFBQSxFQUMxRCxNQUFNdEssRUFBVSxlQUFlO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJL0IsVUFBVXNLLEdBQVcsT0FBTztBQUFBO0FBQUE7QUFBQTtBQUFBLElBSXhCLElBQUl2SyxFQUFVO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFJZCxPQUFPeU07QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUlQLFFBQVFyTSxFQUFRa00sRUFBZTtBQUFBLEVBQ3ZDLENBQUs7QUFDTCxDQUFDLEdBS1lPLEtBQXlCdEMsR0FBVyxPQUFPO0FBQUEsRUFDcEQsTUFBTXRLLEVBQVUsT0FBTztBQUFBLEVBQ3ZCLE9BQU9FLEVBQUssRUFBRyxTQUFTLDBCQUEwQjtBQUN0RCxDQUFDO0FBQzBCa0wsR0FBcUIsUUFBUTtBQUFBLEVBQ3BEcUI7QUFBQSxFQUNBRTtBQUFBLEVBQ0FEO0FBQUEsRUFDQUU7QUFDSixDQUFDO0FDN2FNLE1BQU1DLEdBQU07QUFBQSxFQXlCZixZQUFZaGhCLEdBQU87QUFyQm5CO0FBQUE7QUFBQTtBQUFBLElBQUFWLEVBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxFQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxFQUFBLDRCQUFxQixDQUFFO0FBSXZCO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUEsNkJBQXNCLENBQUU7QUFFcEIsSUFBSSxPQUFPVSxJQUFVLE9BQ2pCLEtBQUssV0FBVyxHQUNoQixLQUFLLGNBQWMsR0FDbkIsS0FBSyxlQUFlLEdBQ3BCLEtBQUssY0FBYyxHQUNuQixLQUFLLHFCQUFxQixDQUFFLEdBQzVCLEtBQUssc0JBQXNCLENBQUUsTUFHN0IsS0FBSyxZQUFXQSxLQUFBLGdCQUFBQSxFQUFPLGFBQVksR0FDbkMsS0FBSyxlQUFjQSxLQUFBLGdCQUFBQSxFQUFPLGdCQUFlLEdBQ3pDLEtBQUssZ0JBQWVBLEtBQUEsZ0JBQUFBLEVBQU8saUJBQWdCLEdBQzNDLEtBQUssZUFBY0EsS0FBQSxnQkFBQUEsRUFBTyxnQkFBZSxHQUN6QyxLQUFLLHFCQUFxQkEsS0FBQSxRQUFBQSxFQUFPLHFCQUMzQixDQUFDQSxFQUFNLGtCQUFrQixJQUN6QixDQUFFLEdBQ1IsS0FBSyxzQkFBc0JBLEtBQUEsUUFBQUEsRUFBTyxzQkFDNUIsQ0FBQ0EsRUFBTSxtQkFBbUIsSUFDMUIsQ0FBRTtBQUFBLEVBRXBCO0FBQUEsRUFDSSxJQUFJaWhCLEdBQVU7QUFDVixTQUFLLFlBQVlBLEVBQVMsVUFDMUIsS0FBSyxlQUFlQSxFQUFTLGFBQzdCLEtBQUssZ0JBQWdCQSxFQUFTLGNBQzlCLEtBQUssZUFBZUEsRUFBUyxhQUM3QixLQUFLLG1CQUFtQixLQUFLLEdBQUdBLEVBQVMsa0JBQWtCLEdBQzNELEtBQUssb0JBQW9CLEtBQUssR0FBR0EsRUFBUyxtQkFBbUI7QUFBQSxFQUNyRTtBQUNBOztBQ3RETyxNQUFNQyxHQUFXO0FBQUEsRUFjcEIsWUFBWTliLElBQVUsSUFBSTtBQVYxQjtBQUFBO0FBQUE7QUFBQSxJQUFBOUYsRUFBQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUEyVyxFQUFBLE1BQUFrTDtBQUVJLFNBQUssVUFBVS9iLEdBQ2YsS0FBSyxRQUFRLElBQUk0YixHQUFPLEdBQ3hCM0gsRUFBQSxNQUFLOEgsSUFBYSxvQkFBSSxJQUFLO0FBQUEsRUFDbkM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9JLGtCQUFrQkMsR0FBVztBQUN6QixJQUFBL0gsRUFBQSxNQUFLOEgsSUFBYSxJQUFJLElBQUksT0FBTyxRQUFRQyxDQUFTLENBQUM7QUFBQSxFQUMzRDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFRSSxlQUFlLEVBQUUsVUFBQUMsR0FBVSxRQUFBQyxLQUFVO0FBQ2pDLFVBQU1DLElBQWdCbkwsRUFBQSxNQUFLK0ssSUFBVyxJQUFJRSxDQUFRO0FBQ2xELFNBQUlFLEtBQUEsZ0JBQUFBLEVBQWUsY0FBYSxNQUFRQSxFQUFjLGFBQWE7QUFDL0R0YyxhQUFBQSxFQUFPLEtBQUssdUZBQXVGLEdBQzVGO0FBRVgsU0FBSXNjLEtBQUEsZ0JBQUFBLEVBQWUsY0FBYTtBQUM1QixhQUFPO0FBRVgsU0FBSUEsS0FBQSxnQkFBQUEsRUFBZSxjQUFhO0FBQzVCLGFBQU87QUFFWCxVQUFNQyxJQUF5QixNQUFNLFFBQVFELEtBQUEsZ0JBQUFBLEVBQWUsUUFBUSxJQUM5REEsRUFBYyxTQUFTLFNBQVNELENBQU0sSUFDdEMsSUFDQUcsSUFBMEIsTUFBTSxRQUFRRixLQUFBLGdCQUFBQSxFQUFlLFFBQVEsSUFDL0RBLEVBQWMsU0FBUyxTQUFTRCxDQUFNLElBQ3RDO0FBQ04sUUFBSUUsS0FBMEJDO0FBQzFCeGMsYUFBQUEsRUFBTyxLQUFLLGFBQWFxYyxDQUFNLDRFQUE0RSxHQUNwRztBQUVYLFFBQUlFO0FBQ0EsYUFBTztBQUVYLFFBQUlDO0FBQ0EsYUFBTztBQUFBLEVBR25CO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPSSxZQUFZQyxHQUFjLEVBQUUsZUFBQUMsSUFBZ0IsR0FBSyxJQUFLLENBQUEsR0FBSTtBQUN0RCxVQUFNTixJQUFXSyxFQUFhLFFBQVE7QUFDdEMsUUFBSUMsR0FBZTtBQUNmLE1BQUF2TCxFQUFBLE1BQUsrSyxJQUFXLElBQUlFLEdBQVU7QUFBQSxRQUMxQixVQUFVO0FBQUEsUUFDVixVQUFVLENBQUU7QUFBQSxNQUM1QixDQUFhO0FBQ0Q7QUFBQSxJQUNaO0FBQ1EsVUFBTUUsSUFBZ0JuTCxFQUFBLE1BQUsrSyxJQUFXLElBQUlFLENBQVEsS0FBSztBQUFBLE1BQ25ELFVBQVUsQ0FBRTtBQUFBLE1BQ1osVUFBVSxDQUFFO0FBQUEsSUFDZjtBQUNELFFBQUksTUFBTSxRQUFRRSxFQUFjLFFBQVEsR0FBRztBQUV2QyxZQUFNRCxJQUFTLFlBQVlJLEVBQWEsVUFDbENBLEVBQWEsUUFBUSxTQUNyQkEsRUFBYSxRQUFRO0FBQzNCLE1BQUFILEVBQWMsU0FBUyxLQUFLRCxDQUFNO0FBQUEsSUFDOUM7QUFDUSxJQUFBbEwsRUFBQSxNQUFLK0ssSUFBVyxJQUFJRSxHQUFVRSxDQUFhO0FBQUEsRUFDbkQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNSSxXQUFXRyxHQUFjLEVBQUUsY0FBQUUsSUFBZSxHQUFLLElBQUssQ0FBQSxHQUFJO0FBQ3BELFVBQU1QLElBQVdLLEVBQWEsUUFBUTtBQUN0QyxRQUFJRSxHQUFjO0FBQ2QsTUFBQXhMLEVBQUEsTUFBSytLLElBQVcsSUFBSUUsR0FBVTtBQUFBLFFBQzFCLFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxNQUMxQixDQUFhO0FBQ0Q7QUFBQSxJQUNaO0FBQ1EsVUFBTUUsSUFBZ0JuTCxFQUFBLE1BQUsrSyxJQUFXLElBQUlFLENBQVEsS0FBSztBQUFBLE1BQ25ELFVBQVUsQ0FBRTtBQUFBLE1BQ1osVUFBVSxDQUFFO0FBQUEsSUFDZjtBQUNELFFBQUksTUFBTSxRQUFRRSxFQUFjLFFBQVEsR0FBRztBQUV2QyxZQUFNRCxJQUFTLFlBQVlJLEVBQWEsVUFDbENBLEVBQWEsUUFBUSxTQUNyQkEsRUFBYSxRQUFRO0FBQzNCLE1BQUFILEVBQWMsU0FBUyxLQUFLRCxDQUFNO0FBQUEsSUFDOUM7QUFDUSxJQUFBbEwsRUFBQSxNQUFLK0ssSUFBVyxJQUFJRSxHQUFVRSxDQUFhO0FBQUEsRUFDbkQ7QUFBQSxFQUNJLFNBQVM7QUFDTCxXQUFPO0FBQUEsTUFDSCxTQUFTLEtBQUs7QUFBQSxNQUNkLE9BQU8sS0FBSztBQUFBLE1BQ1osV0FBVyxPQUFPLFlBQVluTCxFQUFBLE1BQUsrSyxJQUFXLFFBQU8sQ0FBRTtBQUFBLElBQzFEO0FBQUEsRUFDVDtBQUNBO0FBbEhJQSxLQUFBO0FDZEosTUFBTVUsR0FBYztBQUFBLEVBRWhCLFlBQVl4aUIsR0FBTztBQURuQixJQUFBQyxFQUFBO0FBRUksU0FBSyxRQUFRRDtBQUFBLEVBQ3JCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPSSxJQUFJLFVBQVU7QUFDVixXQUFPeWlCLEdBQWEsS0FBSyxPQUFPLEtBQUssUUFBUTtBQUFBLEVBQ3JEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBU0ksSUFBSSxTQUFTO0FBQ1QsV0FBT0EsR0FBYSxDQUFBLEdBQUksS0FBSyxRQUFRO0FBQUEsRUFDN0M7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlJLElBQUksUUFBUTtBQUNSLFdBQU8sS0FBSyxNQUFNO0FBQUEsRUFDMUI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNSSxJQUFJLFdBQVc7QUFDWCxXQUFPLEtBQUssTUFBTTtBQUFBLEVBQzFCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJSSxJQUFJLGVBQWU7QUFDZixXQUFPLEtBQUssTUFBTTtBQUFBLEVBQzFCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJSSxJQUFJLGlCQUFpQjtBQUNqQixVQUFNQyxJQUFZLEtBQUs7QUFDdkIsV0FBT0EsS0FBYUEsRUFBVSxTQUFTLElBQ2pDQSxFQUFVQSxFQUFVLFNBQVMsQ0FBQyxFQUFFLGFBQ2hDO0FBQUEsRUFDZDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUksSUFBSSxZQUFZO0FBQ1osV0FBTyxLQUFLLE1BQU07QUFBQSxFQUMxQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUksSUFBSSx3QkFBd0I7QUFDeEIsV0FBTyxLQUFLLE1BQU07QUFBQSxFQUMxQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUksSUFBSSx5QkFBeUI7QUFDekIsV0FBTyxLQUFLLE1BQU07QUFBQSxFQUMxQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUksSUFBSSxnQkFBZ0I7O0FBQ2hCLGFBQUk5cEIsSUFBQSxLQUFLLE1BQU0saUJBQVgsZ0JBQUFBLEVBQXlCLFVBQVMsMkJBQzNCLEtBQUssTUFBTSxhQUFhLEtBQUssZ0JBRWpDLENBQUU7QUFBQSxFQUNqQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLSSxJQUFJLGNBQWM7O0FBQ2QsVUFBSUEsSUFBQSxLQUFLLE1BQU0saUJBQVgsZ0JBQUFBLEVBQXlCLFVBQVM7QUFDbEMsYUFBTyxLQUFLLE1BQU0sY0FBYyxtQkFBbUIsS0FBSyxNQUFNLGFBQWEsTUFBTTtBQUVyRmdOLElBQUFBLEVBQU8sS0FBSyxxREFBcUQ7QUFBQSxFQUV6RTtBQUNBO0FBSU8sTUFBTStjLFdBQWtCSCxHQUFjO0FBQUEsRUFDekMsWUFBWXhpQixHQUFPO0FBQ2YsVUFBTUEsQ0FBSztBQUFBLEVBQ25CO0FBQ0E7O0FBSU8sTUFBTTRpQixXQUEwQkosR0FBYztBQUFBLEVBdUJqRCxZQUFZcmxCLElBQVMsSUFBSTtBQUNyQixVQUFNQSxFQUFPLEtBQUs7QUFkdEI7QUFBQTtBQUFBO0FBQUEsSUFBQThDLEVBQUEscUJBQWM7QUFJZDtBQUFBO0FBQUE7QUFBQSxJQUFBQSxFQUFBO0FBQ0EsSUFBQTJXLEVBQUEsTUFBQW1GLElBQVM7QUFDVCxJQUFBbkYsRUFBQSxNQUFBaU07QUFDQSxJQUFBak0sRUFBQSxNQUFBa007QUFDQSxJQUFBbE0sRUFBQSxNQUFBbU07QUFDQSxJQUFBbk0sRUFBQSxNQUFBb007QUFDQSxJQUFBcE0sRUFBQSxNQUFBcU07QUFDQSxJQUFBck0sRUFBQSxNQUFBc007QUFDQSxJQUFBdE0sRUFBQSxNQUFBdU0sSUFBYTtBQUdULElBQUFuSixFQUFBLE1BQUs2SSxJQUFVMWxCLEVBQU8sU0FDbEI0WixFQUFBLE1BQUs4TCxPQUNMOUwsRUFBQSxNQUFLOEwsSUFBUSxpQkFBaUIsU0FBUyxZQUFZO0FBQy9DLFlBQU05TCxFQUFBLE1BQUtnTSxJQUFnQixPQUFRO0FBQUEsSUFDbkQsQ0FBYSxHQUVML0ksRUFBQSxNQUFLK0ksSUFBa0IsSUFBSUssR0FBZ0I7QUFBQSxNQUN2QyxPQUFPLENBQUNDLE1BQWU7QUFDbkIsUUFBQXJKLEVBQUEsTUFBSzhJLElBQXNCTztBQUFBLE1BQzlCO0FBQUEsTUFDRCxRQUFRLE1BQU07QUFDVixRQUFBckosRUFBQSxNQUFLbUosSUFBYTtBQUFBLE1BQ3JCO0FBQUEsSUFDYixDQUFTLElBQ0RuSixFQUFBLE1BQUtnSixJQUFvQixJQUFJLFFBQVEsQ0FBQ3pJLEdBQVMrSSxNQUFXO0FBQ3RELE1BQUF0SixFQUFBLE1BQUtpSixJQUEyQjFJLElBQ2hDUCxFQUFBLE1BQUtrSixJQUEwQkk7QUFBQSxJQUMzQyxDQUFTO0FBQUEsRUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBdkNJLElBQUksZUFBZTtBQUNmLFdBQU8sS0FBSztBQUFBLEVBQ3BCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQTBDSSxTQUFTcndCLEdBQU07O0FBQ1gsSUFBSyxLQUFLLGNBQ04yRixJQUFBbWUsRUFBQSxNQUFLK0wsUUFBTCxRQUFBbHFCLEVBQTBCLFFBQVEzRjtBQUFBLEVBRTlDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtJLFFBQVE7O0FBQ0osSUFBSSxDQUFDLEtBQUssYUFBYThqQixFQUFBLE1BQUsrTCxRQUN4Qi9MLEVBQUEsTUFBSytMLElBQW9CLE1BQU8sR0FDaEM5SSxFQUFBLE1BQUs4SSxJQUFzQixVQUMzQmxxQixJQUFBbWUsRUFBQSxNQUFLa00sUUFBTCxRQUFBcnFCLEVBQUE7QUFBQSxFQUVaO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtJLFlBQVk0USxHQUFLOztBQUNiLElBQUksQ0FBQyxLQUFLLGFBQWF1TixFQUFBLE1BQUsrTCxRQUN4Qi9MLEVBQUEsTUFBSytMLElBQW9CLE1BQU10WixDQUFHLEdBQ2xDd1EsRUFBQSxNQUFLOEksSUFBc0IsVUFFL0I5SSxFQUFBLE1BQUsrQixJQUFTdlMsS0FDZDVRLElBQUFtZSxFQUFBLE1BQUttTSxRQUFMLFFBQUF0cUIsRUFBQSxXQUErQjRRO0FBQUEsRUFDdkM7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlJLElBQUksWUFBWTtBQUNaLFdBQU91TixFQUFBLE1BQUtvTTtBQUFBLEVBQ3BCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtJLFdBQVc7QUFDUCxXQUFPcE0sRUFBQSxNQUFLZ007QUFBQSxFQUNwQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLSSxJQUFJLFlBQVk7QUFDWixXQUFPaE0sRUFBQSxNQUFLaU07QUFBQSxFQUNwQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUksSUFBSSxRQUFRO0FBQ1IsV0FBT2pNLEVBQUEsTUFBS2dGO0FBQUEsRUFDcEI7QUFBQSxFQUNJLGFBQWE3bUIsSUFBVSxJQUFJO0FBQ3ZCLFVBQU1xdUIsSUFBU3hNLEVBQUEsTUFBS2dNLElBQWdCLFlBQVksSUFBSXpMLEdBQWdCO0FBQUEsTUFDaEUsVUFBVXRqQixHQUFPcXZCLEdBQVk7QUFDekIsWUFBSXJ2QixFQUFNLFNBQVMsNEJBQ2ZBLEVBQU0sS0FBSyxTQUFTLHFCQUFxQjtBQUN6QyxnQkFBTWYsSUFBT3N1QixHQUFzQixNQUFNdnRCLEVBQU0sSUFBSTtBQUNuRCxVQUFBcXZCLEVBQVcsUUFBUXB3QixFQUFLLEtBQUs7QUFBQSxRQUNqRDtBQUFBLE1BQ2E7QUFBQSxJQUNiLENBQVMsQ0FBQztBQUNGLFdBQUlpQyxFQUFRLDRCQUNEZ2lCLEdBQVMsUUFBUXFNLENBQU0sSUFFM0JBO0FBQUEsRUFDZjtBQUFBLEVBQ0ksQ0FBQyxPQUFPLGFBQWEsSUFBSTtBQUNyQixXQUFPeE0sRUFBQSxNQUFLZ00sSUFBZ0IsT0FBTyxhQUFhLEVBQUc7QUFBQSxFQUMzRDtBQUNBO0FBekdJaEgsS0FBQSxlQUNBOEcsS0FBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUEsZUFDQUMsS0FBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUEsZUFDQUMsS0FBQTtBQ2xJRyxTQUFTSyxHQUFjbGtCLEdBQU07QUFDaEMsU0FBSUEsRUFBSyxTQUFTLGFBQ1A7QUFBQSxJQUNILE1BQU07QUFBQSxJQUNOLE1BQU1BLEVBQUs7QUFBQSxJQUNYLGFBQWFBLEVBQUs7QUFBQSxJQUNsQixZQUFZQSxFQUFLO0FBQUEsSUFDakIsUUFBUUEsRUFBSztBQUFBLEVBQ2hCLElBRURBLEVBQUssU0FBUyxhQUNQO0FBQUEsSUFDSCxNQUFNO0FBQUEsSUFDTixNQUFNQSxFQUFLO0FBQUEsSUFDWCxhQUFhQSxFQUFLLFNBQVM7QUFBQSxJQUMzQixZQUFZQSxFQUFLLFNBQVM7QUFBQSxFQUM3QixJQUVFO0FBQUEsSUFDSCxNQUFNO0FBQUEsSUFDTixNQUFNQSxFQUFLO0FBQUEsSUFDWCxjQUFjQSxFQUFLO0FBQUEsRUFDdEI7QUFDTDtBQUNPLFNBQVNta0IsR0FBaUJuaUIsR0FBRztBQUNoQyxTQUFPO0FBQUEsSUFDSCxVQUFVQSxFQUFFO0FBQUEsSUFDWixpQkFBaUJBLEVBQUU7QUFBQSxJQUNuQixpQkFBaUJBLEVBQUU7QUFBQSxJQUNuQixrQkFBa0JBLEVBQUU7QUFBQSxFQUN2QjtBQUNMO0FDOUJPLE1BQU1vaUIsR0FBWTtBQUFBLEVBQWxCO0FBQ0gsSUFBQXpqQixFQUFBLGNBQU87QUFDUCxJQUFBQSxFQUFBO0FBQUE7QUFBQSxFQUNBLFNBQVM7QUFDTCxXQUFPO0FBQUEsTUFDSCxNQUFNLEtBQUs7QUFBQSxNQUNYLFNBQVMsS0FBSztBQUFBLElBQ2pCO0FBQUEsRUFDVDtBQUNBO0FBQ08sTUFBTTBqQixXQUE2QkQsR0FBWTtBQUFBLEVBSWxELFlBQVlFLEdBQVNwRixHQUFPO0FBQ3hCLFVBQU87QUFKWCxJQUFBdmUsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBLGNBQU87QUFHSCxTQUFLLFVBQVUyakIsR0FDZixLQUFLLFFBQVFwRjtBQUFBLEVBQ3JCO0FBQUEsRUFDSSxTQUFTO0FBQ0wsV0FBTztBQUFBLE1BQ0gsR0FBRyxNQUFNLE9BQVE7QUFBQSxNQUNqQixPQUFPLEtBQUssTUFBTSxPQUFRO0FBQUEsSUFDN0I7QUFBQSxFQUNUO0FBQUEsRUFDSSxJQUFJLFVBQVU7QUFDVixRQUFJNWUsSUFBVTtBQUNkLGVBQVdpa0IsS0FBUSxLQUFLLFFBQVE7QUFDNUIsTUFBSUEsRUFBSyxTQUFTLGtCQUNkamtCLEtBQVdpa0IsRUFBSztBQUd4QixXQUFPamtCO0FBQUEsRUFDZjtBQUNBO0FBQ08sTUFBTWtrQixXQUF3QkosR0FBWTtBQUFBLEVBSTdDLFlBQVlFLEdBQVNwRixHQUFPO0FBQ3hCLFVBQU87QUFKWCxJQUFBdmUsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBLGNBQU87QUFHSCxTQUFLLFVBQVUyakIsR0FDZixLQUFLLFFBQVFwRjtBQUFBLEVBQ3JCO0FBQUEsRUFDSSxTQUFTO0FBQ0wsV0FBTztBQUFBLE1BQ0gsR0FBRyxNQUFNLE9BQVE7QUFBQSxNQUNqQixPQUFPLEtBQUssTUFBTSxPQUFRO0FBQUEsSUFDN0I7QUFBQSxFQUNUO0FBQ0E7QUFDTyxNQUFNdUYsV0FBOEJMLEdBQVk7QUFBQSxFQUtuRCxZQUFZRSxHQUFTcEYsR0FBT3JkLEdBQVE7QUFDaEMsVUFBTztBQUxYLElBQUFsQixFQUFBO0FBQ0EsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBLGNBQU87QUFHSCxTQUFLLFVBQVUyakIsR0FDZixLQUFLLFFBQVFwRixHQUNiLEtBQUssU0FBU3JkO0FBQUEsRUFDdEI7QUFBQSxFQUNJLFNBQVM7QUFDTCxXQUFPO0FBQUEsTUFDSCxHQUFHLE1BQU0sT0FBUTtBQUFBLE1BQ2pCLE9BQU8sS0FBSyxNQUFNLE9BQVE7QUFBQSxNQUMxQixRQUFRMEUsR0FBYyxLQUFLLE1BQU07QUFBQSxJQUNwQztBQUFBLEVBQ1Q7QUFDQTtBQUNPLE1BQU1tZSxXQUF5Qk4sR0FBWTtBQUFBLEVBSTlDLFlBQVlFLEdBQVNwRixHQUFPO0FBQ3hCLFVBQU87QUFKWCxJQUFBdmUsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBLGNBQU87QUFHSCxTQUFLLFVBQVUyakIsR0FDZixLQUFLLFFBQVFwRjtBQUFBLEVBQ3JCO0FBQUEsRUFDSSxTQUFTO0FBQ0wsV0FBTztBQUFBLE1BQ0gsR0FBRyxNQUFNLE9BQVE7QUFBQSxNQUNqQixPQUFPLEtBQUssTUFBTSxPQUFRO0FBQUEsSUFDN0I7QUFBQSxFQUNUO0FBQ0E7QUFDTyxNQUFNeUYsV0FBMkJQLEdBQVk7QUFBQSxFQUloRCxZQUFZRSxHQUFTcEYsR0FBTztBQUN4QixVQUFPO0FBSlgsSUFBQXZlLEVBQUE7QUFDQSxJQUFBQSxFQUFBO0FBQ0EsSUFBQUEsRUFBQSxjQUFPO0FBR0gsU0FBSyxVQUFVMmpCLEdBQ2YsS0FBSyxRQUFRcEY7QUFBQSxFQUNyQjtBQUFBLEVBQ0ksU0FBUztBQUNMLFdBQU87QUFBQSxNQUNILEdBQUcsTUFBTSxPQUFRO0FBQUEsTUFDakIsT0FBTyxLQUFLLE1BQU0sT0FBUTtBQUFBLElBQzdCO0FBQUEsRUFDVDtBQUNBO0FBQ08sTUFBTTBGLFdBQTZCUixHQUFZO0FBQUEsRUFLbEQsWUFBWUUsR0FBU08sR0FBYUMsR0FBYTtBQUMzQyxVQUFPO0FBTFgsSUFBQW5rQixFQUFBO0FBQ0EsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBLGNBQU87QUFHSCxTQUFLLFVBQVUyakIsR0FDZixLQUFLLGNBQWNPLEdBQ25CLEtBQUssY0FBY0M7QUFBQSxFQUMzQjtBQUFBLEVBQ0ksU0FBUztBQUNMLFdBQU87QUFBQSxNQUNILEdBQUcsTUFBTSxPQUFRO0FBQUEsTUFDakIsYUFBYSxLQUFLLFlBQVksT0FBUTtBQUFBLE1BQ3RDLGFBQWEsS0FBSyxZQUFZLE9BQVE7QUFBQSxJQUN6QztBQUFBLEVBQ1Q7QUFDQTtBQUNPLE1BQU1DLFdBQTRCWCxHQUFZO0FBQUEsRUFJakQsWUFBWUUsR0FBU3BGLEdBQU87QUFDeEIsVUFBTztBQUpYLElBQUF2ZSxFQUFBO0FBQ0EsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUEsY0FBTztBQUdILFNBQUssVUFBVTJqQixHQUNmLEtBQUssUUFBUXBGO0FBQUEsRUFDckI7QUFBQSxFQUNJLFNBQVM7QUFDTCxXQUFPO0FBQUEsTUFDSCxHQUFHLE1BQU0sT0FBUTtBQUFBLE1BQ2pCLE9BQU8sS0FBSyxNQUFNLE9BQVE7QUFBQSxJQUM3QjtBQUFBLEVBQ1Q7QUFDQTtBQ3BJTyxTQUFTOEYsR0FBNkJDLEdBQWU7QUFJeEQsTUFISUEsRUFBYyxTQUFTLGFBR3ZCQSxFQUFjLFNBQVM7QUFDdkI7QUFFSixRQUFNQyxJQUFXRCxFQUFjLFFBQVFBLEVBQWMsUUFBUSxTQUFTLENBQUM7QUFDdkUsTUFBSUMsRUFBUyxTQUFTO0FBR3RCLFdBQU9BLEVBQVM7QUFDcEI7QUFNTyxTQUFTQyxHQUFjdGpCLEdBQVE7QUFDbEMsU0FBSUEsRUFBTyxPQUFPLFdBQVcsSUFDbEIsS0FFSG1qQixHQUE2Qm5qQixFQUFPLE9BQU9BLEVBQU8sT0FBTyxTQUFTLENBQUMsQ0FBQyxLQUFLO0FBQ3JGO0FDeEJPLE1BQU11akIsR0FBdUI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVNoQyxZQUFZN2QsR0FBTTtBQVJsQixJQUFBNUcsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUEsY0FBTztBQUtILFNBQUssT0FBTzRHO0FBQUEsRUFDcEI7QUFDQTtBQUtPLE1BQU04ZCxHQUFtQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFRNUIsWUFBWWp2QixHQUFNekMsR0FBTTtBQVB4QixJQUFBZ04sRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBLGNBQU87QUFNSCxTQUFLLE9BQU92SyxHQUNaLEtBQUssT0FBT3pDO0FBQUEsRUFDcEI7QUFDQTtBQUlPLE1BQU0yeEIsR0FBMkI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1wQyxZQUFZcEcsR0FBTztBQUxuQixJQUFBdmUsRUFBQTtBQUNBLElBQUFBLEVBQUEsY0FBTztBQUtILFNBQUssUUFBUXVlO0FBQUEsRUFDckI7QUFDQTtBQzlCTyxTQUFTcUcsR0FBcUJDLEdBQWV0RyxHQUFPdkksR0FBTzhPLEdBQVU7O0FBQ3hFLFFBQU10dUIsSUFBUSxDQUFFLEdBQ1Z1dUIsSUFBYyxDQUFFLEdBQ2hCQyxJQUFlLENBQUUsR0FDakJDLElBQXFCLENBQUUsR0FDdkJDLElBQXlCLENBQUUsR0FDM0JDLElBQVksQ0FBRSxHQUNkQyxJQUFhLElBQUksSUFBSU4sRUFBUyxJQUFJLENBQUN6akIsTUFBTSxDQUFDQSxFQUFFLFVBQVVBLENBQUMsQ0FBQyxDQUFDLEdBQ3pEZ2tCLElBQWMsSUFBSSxJQUFJclAsRUFBTSxPQUFPLENBQUNMLE1BQU1BLEVBQUUsU0FBUyxVQUFVLEVBQUUsSUFBSSxDQUFDQSxNQUFNLENBQUNBLEVBQUUsTUFBTUEsQ0FBQyxDQUFDLENBQUMsR0FDeEYyUCxJQUFldFAsRUFBTSxLQUFLLENBQUNMLE1BQU1BLEVBQUUsU0FBUyxVQUFVLEdBQ3RENFAsSUFBYSxJQUFJLElBQUl2UCxFQUN0QixPQUFPLENBQUNMLE1BQUM7O0FBQUssV0FBQUEsRUFBRSxTQUFTLG1CQUFpQmhkLElBQUFnZCxFQUFFLGlCQUFGLGdCQUFBaGQsRUFBZ0IsVUFBUztBQUFBLEdBQUssRUFDeEUsSUFBSSxDQUFDZ2QsTUFBTUEsQ0FBQyxFQUNaLElBQUksQ0FBQ0EsTUFBTSxDQUFDQSxFQUFFLGFBQWEsY0FBY0EsQ0FBQyxDQUFDLENBQUM7QUFDakQsYUFBV3pVLEtBQVUyakIsRUFBYyxRQUFRO0FBQ3ZDLFFBQUkzakIsRUFBTyxTQUFTO0FBQ2hCLE1BQUlBLEVBQU8sU0FBUyxlQUNoQjFLLEVBQU0sS0FBSyxJQUFJa3RCLEdBQXFCeGlCLEdBQVFxZCxDQUFLLENBQUM7QUFBQSxhQUdqRHJkLEVBQU8sU0FBUyxvQkFBb0I7QUFDekMsTUFBQTFLLEVBQU0sS0FBSyxJQUFJcXRCLEdBQWdCM2lCLEdBQVFxZCxDQUFLLENBQUM7QUFDN0MsWUFBTXdELElBQVc3Z0IsRUFBTztBQUV4QixVQURBaWtCLEVBQVUsS0FBS3BELENBQVEsS0FDbkJwcEIsSUFBQXVJLEVBQU8saUJBQVAsZ0JBQUF2SSxFQUFxQixVQUFTLDBCQUM5QnVJLEVBQU8sU0FBUyx3QkFBd0I7QUFFeEMsY0FBTXNrQixJQUFldGtCLEVBQU8sY0FDdEJ1a0IsSUFBaUJELEVBQWEsY0FDOUJFLEtBQWdCSCxFQUFXLElBQUlFLENBQWM7QUFDbkQsWUFBSSxPQUFPQyxLQUFrQixLQUFhO0FBQ3RDLGdCQUFNcHRCLEtBQVUsZUFBZW10QixDQUFjLHlCQUF5QmxILEVBQU0sSUFBSTtBQUNoRixnQkFBQWhHLEdBQXNCO0FBQUEsWUFDbEIsU0FBQWpnQjtBQUFBLFlBQ0EsTUFBTSxFQUFFLGtCQUFrQm10QixFQUFnQjtBQUFBLFVBQ2xFLENBQXFCLEdBQ0ssSUFBSXRsQixHQUFtQjdILEVBQU87QUFBQSxRQUN4RDtBQUdnQixjQUFNOHBCLEtBQWUsSUFBSWdDLEdBQW9CO0FBQUEsVUFDekMsTUFBTTtBQUFBO0FBQUEsVUFFTixNQUFNb0IsRUFBYTtBQUFBLFVBQ25CLElBQUlBLEVBQWE7QUFBQSxVQUNqQixRQUFRO0FBQUEsVUFDUixjQUFBQTtBQUFBLFFBQ0gsR0FBRWpILENBQUs7QUFDUixRQUFBMkcsRUFBdUIsS0FBSztBQUFBLFVBQ3hCLGFBQWE5QztBQUFBLFVBQ2IsU0FBU3NEO0FBQUEsUUFDN0IsQ0FBaUIsR0FDSUEsR0FBYyxhQUFhLGVBRzVCbHZCLEVBQU0sS0FBSzRyQixFQUFZO0FBQUEsTUFFM0M7QUFBQSxJQUNBLFdBQ2lCbGhCLEVBQU8sU0FBUztBQUNyQixNQUFBMUssRUFBTSxLQUFLLElBQUl1dEIsR0FBaUI3aUIsR0FBUXFkLENBQUssQ0FBQztBQUFBLGFBRXpDcmQsRUFBTyxTQUFTLGlCQUFpQjtBQUd0QyxVQUZBMUssRUFBTSxLQUFLLElBQUlxdEIsR0FBZ0IzaUIsR0FBUXFkLENBQUssQ0FBQyxHQUM3QzRHLEVBQVUsS0FBSyxjQUFjLEdBQ3pCLENBQUNHO0FBQ0QsY0FBQS9NLEdBQXNCO0FBQUEsVUFDbEIsU0FBUztBQUFBLFVBQ1QsTUFBTTtBQUFBLFlBQ0YsWUFBWWdHLEVBQU07QUFBQSxVQUNyQjtBQUFBLFFBQ3JCLENBQWlCLEdBQ0ssSUFBSXBlLEdBQW1CLHlEQUF5RDtBQUUxRixNQUFBOGtCLEVBQW1CLEtBQUs7QUFBQSxRQUNwQixVQUFVL2pCO0FBQUEsUUFDVixVQUFVb2tCO0FBQUEsTUFDMUIsQ0FBYTtBQUFBLElBQ2I7QUFDUSxRQUFJcGtCLEVBQU8sU0FBUztBQUNoQjtBQUVKLElBQUFpa0IsRUFBVSxLQUFLamtCLEVBQU8sSUFBSTtBQUMxQixVQUFNMGQsSUFBVXdHLEVBQVcsSUFBSWxrQixFQUFPLElBQUk7QUFDMUMsUUFBSTBkO0FBQ0EsTUFBQXBvQixFQUFNLEtBQUssSUFBSXd0QixHQUFtQjlpQixHQUFRcWQsQ0FBSyxDQUFDLEdBQ2hEd0csRUFBWSxLQUFLO0FBQUEsUUFDYixVQUFVN2pCO0FBQUEsUUFDVixTQUFTMGQ7QUFBQSxNQUN6QixDQUFhO0FBQUEsU0FFQTtBQUNELFlBQU0rRyxJQUFlTixFQUFZLElBQUlua0IsRUFBTyxJQUFJO0FBQ2hELFVBQUksQ0FBQ3lrQjtBQUNELGNBQUFwTixHQUFzQjtBQUFBLFVBQ2xCLFNBQVMsUUFBUXJYLEVBQU8sSUFBSSx1QkFBdUJxZCxFQUFNLElBQUk7QUFBQSxVQUM3RCxNQUFNO0FBQUEsWUFDRixXQUFXcmQsRUFBTztBQUFBLFlBQ2xCLFlBQVlxZCxFQUFNO0FBQUEsVUFDckI7QUFBQSxRQUNyQixDQUFpQixHQUNLLElBQUlwZSxHQUFtQixRQUFRZSxFQUFPLElBQUksdUJBQXVCcWQsRUFBTSxJQUFJLEdBQUc7QUFFeEYsTUFBQS9uQixFQUFNLEtBQUssSUFBSXF0QixHQUFnQjNpQixHQUFRcWQsQ0FBSyxDQUFDLEdBQzdDeUcsRUFBYSxLQUFLO0FBQUEsUUFDZCxVQUFVOWpCO0FBQUEsUUFDVixNQUFNeWtCO0FBQUEsTUFDdEIsQ0FBYTtBQUFBLElBQ2I7QUFBQSxFQUNBO0FBQ0ksU0FBTztBQUFBLElBQ0gsVUFBVW52QjtBQUFBLElBQ1YsVUFBVXV1QjtBQUFBLElBQ1YsV0FBV0M7QUFBQSxJQUNYLGlCQUFpQkM7QUFBQSxJQUNqQixxQkFBcUJDO0FBQUEsSUFDckIsV0FBV0M7QUFBQSxJQUNYLDJCQUEyQjtBQUN2QixhQUFRSixFQUFZLFNBQVMsS0FDekJDLEVBQWEsU0FBUyxLQUN0QkUsRUFBdUIsU0FBUyxLQUNoQ0QsRUFBbUIsU0FBUztBQUFBLElBQ25DO0FBQUEsRUFDSjtBQUNMO0FBQ08sTUFBTVcsS0FBaUIzRixHQUFxQixRQUFRO0FBQUEsRUFDdkR0TCxFQUFTO0FBQUEsSUFDTCxNQUFNRSxFQUFVLG1CQUFtQjtBQUFBLElBQ25DLFVBQVVFLEVBQU87QUFBQSxFQUN6QixDQUFLO0FBQUEsRUFDREosRUFBUztBQUFBLElBQ0wsTUFBTUUsRUFBVSx3QkFBd0I7QUFBQSxJQUN4QyxRQUFRRCxFQUFVO0FBQUEsRUFDMUIsQ0FBSztBQUFBLEVBQ0RELEVBQVM7QUFBQSxJQUNMLE1BQU1FLEVBQVUscUJBQXFCO0FBQUEsRUFDN0MsQ0FBSztBQUFBLEVBQ0RGLEVBQVM7QUFBQSxJQUNMLE1BQU1FLEVBQVUsd0JBQXdCO0FBQUEsSUFDeEMsTUFBTUMsR0FBU0YsRUFBVSxHQUFFRyxFQUFLLENBQUU7QUFBQSxFQUMxQyxDQUFLO0FBQ0wsQ0FBQztBQUNELE1BQU04USxHQUFpQjtBQUFBLEVBTW5CLFlBSUFDLEdBSUFqQixHQUlBa0IsR0FJQUMsR0FJQUMsR0FBVTtBQXpCVixJQUFBam1CLEVBQUE7QUFDQSxJQUFBQSxFQUFBO0FBQ0EsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBO0FBc0JJLFNBQUssZ0JBQWdCOGxCLEdBQ3JCLEtBQUssZ0JBQWdCakIsR0FDckIsS0FBSyxlQUFla0IsR0FDcEIsS0FBSyxlQUFlQyxHQUNwQixLQUFLLFdBQVdDO0FBQUEsRUFDeEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlJLElBQUksaUJBQWlCO0FBQ2pCLFdBQU8sS0FBSyxhQUFhLE9BQU8sS0FBSyxZQUFZO0FBQUEsRUFDekQ7QUFDQTtBQUlPLFNBQVNDLEdBQXFCM0gsR0FBTzRILEdBQWdCQyxHQUFlO0FBQ3ZFLFNBQUk3SCxFQUFNLG1CQUFtQjRILEVBQWUsYUFBYTVILENBQUssSUFDbkQsRUFBRSxHQUFHNkgsR0FBZSxZQUFZLE9BQVcsSUFFL0NBO0FBQ1g7QUFJTyxlQUFlQyxHQUFzQzlILEdBQU91SCxHQUFlUSxHQUFzQkMsR0FBYUMsR0FBbUJDLEdBQVExbUIsR0FBTztBQUVuSixRQUFNMm1CLElBQWtCSixFQUNuQixPQUFPLENBQUN0ekIsTUFBU0EsYUFBZ0JveEIsTUFDbEMsWUFBWXB4QixFQUFLLFdBQ2pCQSxFQUFLLFFBQVEsU0FBUyxlQUFlLEVBQ3BDLElBQUksQ0FBQ0EsTUFBU0EsRUFBSyxRQUFRLE1BQU0sR0FFaEMyekIsSUFBbUJILEVBQWtCLFVBQVUsT0FBTyxDQUFDSSxNQUNsREYsRUFBZ0IsU0FBU0UsRUFBSSxTQUFTLE1BQU0sQ0FDdEQsR0FDS0MsSUFBa0IsTUFBTUMsR0FBeUJ2SSxHQUFPb0ksR0FBa0JGLEdBQVExbUIsQ0FBSyxHQUV2RmduQixJQUFXRixFQUFnQixJQUFJLENBQUM3aEIsTUFBTUEsRUFBRSxPQUFPLEdBRS9DZ2lCLElBQWtCUixFQUFrQixvQkFBb0IsT0FBTyxDQUFDSSxNQUFROztBQUMxRSxXQUFRQSxFQUFJLFlBQVksU0FBUyx3QkFDN0JBLEVBQUksWUFBWSxRQUFRLFNBQVMsd0JBQ2pDanVCLElBQUFpdUIsRUFBSSxZQUFZLFFBQVEsaUJBQXhCLGdCQUFBanVCLEVBQXNDLFVBQVM7QUFBQSxFQUMzRCxDQUFLO0FBQ0QsYUFBV2l1QixLQUFPSSxHQUFpQjtBQUUvQixVQUFNQyxJQUFvQkwsRUFBSSxZQUFZLFFBQVEsSUFDNUNNLElBQVdubkIsRUFBTSxTQUFTLGVBQWU7QUFBQTtBQUFBLE1BRTNDLFVBQVU2bUIsRUFBSSxZQUFZLFFBQVE7QUFBQSxNQUNsQyxRQUFRSztBQUFBLElBQ3BCLENBQVM7QUFDRCxRQUFJLE9BQU9DLElBQWEsS0FBYTtBQUNqQyxZQUFNMUIsSUFBZTtBQUFBLFFBQ2pCLFNBQVMwQjtBQUFBLFFBQ1QscUJBQXFCRDtBQUFBLFFBQ3JCLFFBQVE7QUFBQSxNQUNYO0FBRUQsTUFBQUYsRUFBUyxLQUFLLElBQUlsRCxHQUFnQjtBQUFBLFFBQzlCLE1BQU07QUFBQSxRQUNOLE1BQU07QUFBQSxRQUNOLGNBQUEyQjtBQUFBLE1BQ0gsR0FBRWpILENBQUssQ0FBQztBQUFBLElBQ3JCO0FBQUEsRUFDQTtBQUNJLFFBQU00SSxJQUFrQixNQUFNQyxHQUE2QjdJLEdBQU9zSSxHQUFpQjltQixDQUFLLEdBR2xGZ21CLElBQWVPLEVBQXFCLE9BQU8sQ0FBQ3R6QixNQUN2QyxFQUFFQSxhQUFnQm94QixHQUM1QjtBQUNELFNBQUkrQyxFQUFnQixpQkFDaEJWLEVBQU8sS0FBSyxhQUFhMW1CLEVBQU0sVUFBVXdlLEdBQU80SSxFQUFnQixXQUFXLEdBQzNFNUksRUFBTSxLQUFLLGFBQWF4ZSxFQUFNLFVBQVVvbkIsRUFBZ0IsV0FBVyxHQUM1RCxJQUFJdEIsR0FBaUJDLEdBQWVTLEdBQWFSLEdBQWNnQixHQUFVO0FBQUEsSUFDNUUsTUFBTTtBQUFBLElBQ04sUUFBUUksRUFBZ0I7QUFBQSxFQUNwQyxDQUFTLEtBRUlBLEVBQWdCLGdCQUNkLElBQUl0QixHQUFpQkMsR0FBZVMsR0FBYVIsR0FBY2dCLEdBQVU7QUFBQSxJQUM1RSxNQUFNO0FBQUEsSUFDTixNQUFNO0FBQUEsTUFDRixlQUFlSSxFQUFnQjtBQUFBLElBQ2xDO0FBQUEsRUFDYixDQUFTLElBR0UsSUFBSXRCLEdBQWlCQyxHQUFlUyxHQUFhUixHQUFjZ0IsR0FBVSxFQUFFLE1BQU0sdUJBQXVCO0FBQ25IO0FBSU8sZUFBZU0sR0FBMkI5SSxHQUFPdUgsR0FBZVEsR0FBc0JDLEdBQWFDLEdBQW1CQyxHQUFRMW1CLEdBQU87QUFDeEksUUFBTWdtQixJQUFlTztBQUNyQixNQUFJUyxJQUFXUCxFQUFrQjtBQUNqQyxRQUFNLENBQUNLLEdBQWlCUyxDQUFlLElBQUksTUFBTSxRQUFRLElBQUk7QUFBQSxJQUN6RFIsR0FBeUJ2SSxHQUFPaUksRUFBa0IsV0FBV0MsR0FBUTFtQixDQUFLO0FBQUEsSUFDMUV3bkIsR0FBdUJoSixHQUFPaUksRUFBa0IsaUJBQWlCQyxHQUFRMW1CLEVBQU0sUUFBUTtBQUFBLEVBQy9GLENBQUs7QUFJRCxNQUhBZ25CLElBQVdBLEVBQVMsT0FBT0YsRUFBZ0IsSUFBSSxDQUFDN2hCLE1BQU1BLEVBQUUsT0FBTyxDQUFDLEdBQ2hFK2hCLElBQVdBLEVBQVMsT0FBT08sQ0FBZSxHQUV0Q2QsRUFBa0Isb0JBQW9CLFNBQVM7QUFDL0MsZUFBV2dCLEtBQW1CaEIsRUFBa0IscUJBQXFCO0FBQ2pFLFlBQU1pQixJQUFXRCxFQUFnQixRQUM1QixjQUNDRSxJQUFjRixFQUFnQixZQUFZLFFBQzNDO0FBQ0wsVUFBSUMsRUFBUyxhQUFhO0FBRXRCLGNBQU1FLElBQWlCLE1BQU1GLEVBQVMsWUFBWTFuQixFQUFNLFVBQVV5bkIsRUFBZ0IsV0FBVyxHQUN2RkksSUFBdUI7QUFBQSxVQUN6QixTQUFTRCxFQUFlO0FBQUEsVUFDeEIscUJBQXFCRCxFQUFZO0FBQUEsVUFDakMsUUFBUUMsRUFBZTtBQUFBLFFBQzFCO0FBQ0QsUUFBQVosRUFBUyxLQUFLLElBQUlsRCxHQUFnQjtBQUFBLFVBQzlCLE1BQU07QUFBQSxVQUNOLE1BQU07QUFBQSxVQUNOLGNBQWMrRDtBQUFBLFFBQ2pCLEdBQUVySixDQUFLLENBQUM7QUFBQSxNQUN6QixPQUNpQjtBQUVELFFBQUF3SSxFQUFTLEtBQUtTLEVBQWdCLFdBQVc7QUFDekMsY0FBTXBGLElBQWU7QUFBQSxVQUNqQixNQUFNO0FBQUEsVUFDTixNQUFNb0YsRUFBZ0I7QUFBQSxVQUN0QixTQUFTLElBQUlwRCxHQUFvQjtBQUFBLFlBQzdCLE1BQU07QUFBQSxZQUNOLE1BQU1zRCxFQUFZO0FBQUEsWUFDbEIsSUFBSUEsRUFBWTtBQUFBLFlBQ2hCLFdBQVdBLEVBQVk7QUFBQSxZQUN2QixRQUFRO0FBQUEsWUFDUixjQUFjQTtBQUFBLFVBQ2pCLEdBQUVuSixDQUFLO0FBQUEsUUFDWDtBQUNELFFBQUFzSSxFQUFnQixLQUFLekUsQ0FBWTtBQUFBLE1BRWpEO0FBQUEsSUFDQTtBQUdJLE1BQUlvRSxFQUFrQixTQUFTLFNBQVM7QUFDcEMsV0FBTyxNQUFNcUIsR0FBb0J0SixHQUFPdUgsR0FBZUMsR0FBY2dCLEdBQVVSLEdBQWFDLEVBQWtCLFVBQVVDLEdBQVExbUIsRUFBTSxRQUFRO0FBRWxKLFFBQU1vbkIsSUFBa0IsTUFBTUMsR0FBNkI3SSxHQUFPc0ksR0FBaUI5bUIsQ0FBSztBQUN4RixNQUFJb25CLEVBQWdCO0FBQ2hCLFdBQUFWLEVBQU8sS0FBSyxhQUFhMW1CLEVBQU0sVUFBVXdlLEdBQU80SSxFQUFnQixXQUFXLEdBQzNFNUksRUFBTSxLQUFLLGFBQWF4ZSxFQUFNLFVBQVVvbkIsRUFBZ0IsV0FBVyxHQUM1RCxJQUFJdEIsR0FBaUJDLEdBQWVTLEdBQWFSLEdBQWNnQixHQUFVO0FBQUEsTUFDNUUsTUFBTTtBQUFBLE1BQ04sUUFBUUksRUFBZ0I7QUFBQSxJQUNwQyxDQUFTO0FBRUEsTUFBSUEsRUFBZ0I7QUFDckIsV0FBTyxJQUFJdEIsR0FBaUJDLEdBQWVTLEdBQWFSLEdBQWNnQixHQUFVO0FBQUEsTUFDNUUsTUFBTTtBQUFBLE1BQ04sTUFBTTtBQUFBLFFBQ0YsZUFBZUksRUFBZ0I7QUFBQSxNQUNsQztBQUFBLElBQ2IsQ0FBUztBQUdMLFFBQU1XLElBQWVmLEVBQVMsT0FBTyxDQUFDL3pCLE1BQVNBLGFBQWdCMHdCLEVBQW9CLEdBRTdFcUUsSUFBdUJELEVBQWEsU0FBUyxJQUM3Q3pELEdBQTZCeUQsRUFBYUEsRUFBYSxTQUFTLENBQUMsRUFBRSxPQUFPLElBQzFFO0FBRU4sTUFBSSxDQUFDQztBQUNELFdBQU8sSUFBSWxDLEdBQWlCQyxHQUFlUyxHQUFhUixHQUFjZ0IsR0FBVSxFQUFFLE1BQU0sdUJBQXVCO0FBRW5ILE1BQUl4SSxFQUFNLGVBQWUsVUFDckIsQ0FBQ2lJLEVBQWtCO0FBQ25CLFdBQU8sSUFBSVgsR0FBaUJDLEdBQWVTLEdBQWFSLEdBQWNnQixHQUFVO0FBQUEsTUFDNUUsTUFBTTtBQUFBLE1BQ04sUUFBUWdCO0FBQUEsSUFDcEIsQ0FBUztBQUVBLE1BQUl4SixFQUFNLGVBQWUsVUFBVXdKLEdBQXNCO0FBRTFELFVBQU0sRUFBRSxRQUFBbnpCLEVBQU0sSUFBS2lNLEdBQWdDMGQsRUFBTSxZQUFZLGNBQWMsR0FDN0UsQ0FBQzlwQixDQUFLLElBQUksTUFBTUYsR0FBWSxNQUFNSyxFQUFPbXpCLENBQW9CLENBQUM7QUFDcEUsUUFBSXR6QjtBQUNBLFlBQUE4akIsR0FBc0I7QUFBQSxRQUNsQixTQUFTO0FBQUEsUUFDVCxNQUFNO0FBQUEsVUFDRixPQUFPLE9BQU85akIsQ0FBSztBQUFBLFFBQ3RCO0FBQUEsTUFDakIsQ0FBYSxHQUNLLElBQUkwTCxHQUFtQixxQkFBcUI7QUFFdEQsV0FBTyxJQUFJMGxCLEdBQWlCQyxHQUFlUyxHQUFhUixHQUFjZ0IsR0FBVSxFQUFFLE1BQU0sMEJBQTBCLFFBQVFnQixFQUFvQixDQUFFO0FBQUEsRUFDeEo7QUFDSSxTQUFPLElBQUlsQyxHQUFpQkMsR0FBZVMsR0FBYVIsR0FBY2dCLEdBQVUsRUFBRSxNQUFNLHVCQUF1QjtBQUNuSDtBQUlPLFNBQVNpQixHQUFzQkMsR0FBVS9tQixHQUFRO0FBQ3BELFNBQU87QUFBQSxJQUNILE1BQU07QUFBQSxJQUNOLE1BQU0rbUIsRUFBUztBQUFBLElBQ2YsUUFBUUEsRUFBUztBQUFBLElBQ2pCLFFBQVE7QUFBQSxJQUNSLFFBQVE7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLE1BQU1yaUIsR0FBYzFFLENBQU07QUFBQSxJQUM3QjtBQUFBLEVBQ0o7QUFDTDtBQUlPLGVBQWU0bEIsR0FBeUJ2SSxHQUFPMkosR0FBVXpCLEdBQVExbUIsR0FBTztBQUMzRSxpQkFBZW9vQixFQUFjQyxHQUFTO0FBQ2xDLFFBQUlDLElBQWFELEVBQVEsU0FBUztBQVVsQyxRQVRJQSxFQUFRLEtBQUssZUFDVDNuQixHQUFZMm5CLEVBQVEsS0FBSyxVQUFVLElBQ25DQyxJQUFhRCxFQUFRLEtBQUssV0FBVyxNQUFNQyxDQUFVLElBR3JEQSxJQUFhLEtBQUssTUFBTUEsQ0FBVSxJQUdwQixNQUFNRCxFQUFRLEtBQUssY0FBY3JvQixFQUFNLFVBQVVzb0IsR0FBWUQsRUFBUSxTQUFTLE1BQU0sR0FDdkY7QUFDZixZQUFNRSxJQUFXdm9CLEVBQU0sU0FBUyxlQUFlO0FBQUEsUUFDM0MsVUFBVXFvQixFQUFRLEtBQUs7QUFBQSxRQUN2QixRQUFRQSxFQUFRLFNBQVM7QUFBQSxNQUN6QyxDQUFhO0FBQ0QsVUFBSUUsTUFBYTtBQUViLGVBQU85SyxHQUFpQixPQUFPMUgsTUFBUztBQUNwQyxnQkFBTXlTLElBQVc7QUFDakIsaUJBQUF6UyxFQUFLLFNBQVM7QUFBQSxZQUNWLFNBQVN5UztBQUFBLFlBQ1QsTUFBTTtBQUFBLGNBQ0YsV0FBV0gsRUFBUSxLQUFLO0FBQUEsY0FDeEIsT0FBTyxzQkFBc0JBLEVBQVEsU0FBUyxNQUFNO0FBQUEsWUFDdkQ7QUFBQSxVQUN6QixDQUFxQixHQUNEdFMsRUFBSyxTQUFTLFNBQVN5UyxHQUNoQjtBQUFBLFlBQ0gsTUFBTTtBQUFBLFlBQ04sTUFBTUgsRUFBUTtBQUFBLFlBQ2QsUUFBUUc7QUFBQSxZQUNSLFNBQVMsSUFBSXpFLEdBQXNCa0UsR0FBc0JJLEVBQVEsVUFBVUcsQ0FBUSxHQUFHaEssR0FBT2dLLENBQVE7QUFBQSxVQUN4RztBQUFBLFFBQ3JCLEdBQW1CO0FBQUEsVUFDQyxNQUFNO0FBQUEsWUFDRixNQUFNSCxFQUFRLEtBQUs7QUFBQSxVQUN0QjtBQUFBLFFBQ3JCLENBQWlCO0FBRUwsVUFBSUUsTUFBYTtBQUViLGVBQU87QUFBQSxVQUNILE1BQU07QUFBQSxVQUNOLE1BQU1GLEVBQVE7QUFBQSxVQUNkLFNBQVMsSUFBSWhFLEdBQW9CZ0UsRUFBUSxVQUFVN0osQ0FBSztBQUFBLFFBQzNEO0FBQUEsSUFFakI7QUFDUSxXQUFPZixHQUFpQixPQUFPMUgsTUFBUztBQUNwQyxNQUFJMlEsRUFBTyxPQUFPLDhCQUNkM1EsRUFBSyxTQUFTLFFBQVFzUyxFQUFRLFNBQVM7QUFFM0MsVUFBSTtBQUNBLFFBQUEzQixFQUFPLEtBQUssb0JBQW9CMW1CLEVBQU0sVUFBVXdlLEdBQU82SixFQUFRLElBQUksR0FDbkU3SixFQUFNLEtBQUssb0JBQW9CeGUsRUFBTSxVQUFVcW9CLEVBQVEsSUFBSTtBQUMzRCxjQUFNbHJCLElBQVMsTUFBTWtyQixFQUFRLEtBQUssT0FBT3JvQixFQUFNLFVBQVVxb0IsRUFBUSxTQUFTLFNBQVMsR0FFN0UvaEIsSUFBZVQsR0FBYzFJLENBQU07QUFDekMsZUFBQXVwQixFQUFPLEtBQUssa0JBQWtCMW1CLEVBQU0sVUFBVXdlLEdBQU82SixFQUFRLE1BQU0vaEIsQ0FBWSxHQUMvRWtZLEVBQU0sS0FBSyxrQkFBa0J4ZSxFQUFNLFVBQVVxb0IsRUFBUSxNQUFNL2hCLENBQVksR0FDbkVvZ0IsRUFBTyxPQUFPLDhCQUNkM1EsRUFBSyxTQUFTLFNBQVN6UCxJQUVwQjtBQUFBLFVBQ0gsTUFBTTtBQUFBLFVBQ04sTUFBTStoQixFQUFRO0FBQUEsVUFDZCxRQUFRbHJCO0FBQUEsVUFDUixTQUFTLElBQUk0bUIsR0FBc0JrRSxHQUFzQkksRUFBUSxVQUFVbHJCLENBQU0sR0FBR3FoQixHQUFPcmhCLENBQU07QUFBQSxRQUNwRztBQUFBLE1BQ2pCLFNBQ21CekksR0FBTztBQUNWLGNBQUFxaEIsRUFBSyxTQUFTO0FBQUEsVUFDVixTQUFTO0FBQUEsVUFDVCxNQUFNO0FBQUEsWUFDRixXQUFXc1MsRUFBUSxLQUFLO0FBQUEsWUFDeEIsT0FBTyxPQUFPM3pCLENBQUs7QUFBQSxVQUN0QjtBQUFBLFFBQ3JCLENBQWlCLEdBQ0tBO0FBQUEsTUFDdEI7QUFBQSxJQUNBLEdBQVc7QUFBQSxNQUNDLE1BQU07QUFBQSxRQUNGLE1BQU0yekIsRUFBUSxLQUFLO0FBQUEsTUFDdEI7QUFBQSxJQUNiLENBQVM7QUFBQSxFQUNUO0FBQ0ksTUFBSTtBQUVBLFdBRGdCLE1BQU0sUUFBUSxJQUFJRixFQUFTLElBQUlDLENBQWEsQ0FBQztBQUFBLEVBRXJFLFNBQ1d2eEIsR0FBRztBQUNOLFVBQU0sSUFBSTBKLEdBQWMsaUNBQWlDMUosQ0FBQyxJQUFJQSxHQUFHbUosQ0FBSztBQUFBLEVBQzlFO0FBQ0E7QUFLQSxlQUFleW9CLEdBQWdDQyxHQUFVUixHQUFVO0FBQy9ELFFBQU1TLElBQVNULEVBQVM7QUFDeEIsTUFBSVU7QUFFSixVQUFRRCxFQUFPLE1BQUk7QUFBQSxJQUNmLEtBQUs7QUFDRCxZQUFNRCxFQUFTLE1BQU1DLEVBQU8sR0FBR0EsRUFBTyxHQUFHQSxFQUFPLE1BQU07QUFDdEQ7QUFBQSxJQUNKLEtBQUs7QUFDRCxZQUFNRCxFQUFTLFlBQVlDLEVBQU8sR0FBR0EsRUFBTyxDQUFDO0FBQzdDO0FBQUEsSUFDSixLQUFLO0FBQ0QsWUFBTUQsRUFBUyxLQUFLQyxFQUFPLEtBQUssSUFBSSxDQUFDRSxNQUFNLENBQUNBLEVBQUUsR0FBR0EsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUN0RDtBQUFBLElBQ0osS0FBSztBQUNELFlBQU1ILEVBQVMsU0FBU0MsRUFBTyxJQUFJO0FBQ25DO0FBQUEsSUFDSixLQUFLO0FBQ0QsWUFBTUQsRUFBUyxLQUFLQyxFQUFPLEdBQUdBLEVBQU8sQ0FBQztBQUN0QztBQUFBLElBQ0osS0FBSztBQUNELE1BQUFDLElBQWEsTUFBTUYsRUFBUyxXQUFZO0FBQ3hDO0FBQUEsSUFDSixLQUFLO0FBQ0QsWUFBTUEsRUFBUyxPQUFPQyxFQUFPLEdBQUdBLEVBQU8sR0FBR0EsRUFBTyxVQUFVQSxFQUFPLFFBQVE7QUFDMUU7QUFBQSxJQUNKLEtBQUs7QUFDRCxZQUFNRCxFQUFTLEtBQUtDLEVBQU8sSUFBSTtBQUMvQjtBQUFBLElBQ0osS0FBSztBQUNELFlBQU1ELEVBQVMsS0FBTTtBQUNyQjtBQUFBLEVBS1o7QUFLSSxNQUpJLE9BQU9FLElBQWUsT0FJdEIsT0FBT0YsRUFBUyxjQUFlLGVBQy9CRSxJQUFhLE1BQU1GLEVBQVMsV0FBWSxHQUNwQyxPQUFPRSxJQUFlO0FBQ3RCLFdBQU9BO0FBR2YsUUFBTSxJQUFJLE1BQU0sMENBQTBDO0FBQzlEO0FBSU8sZUFBZXBCLEdBQXVCaEosR0FBT3NLLEdBQVNwQyxHQUFRdGdCLEdBQVkyaUIsSUFBZSxRQUFXO0FBQ3ZHLFFBQU1DLElBQVVELEtBQWdCbmpCLEdBQzFCc0MsSUFBVSxDQUFFO0FBQ2xCLGFBQVd5Z0IsS0FBVUcsR0FBUztBQUMxQixVQUFNSixJQUFXQyxFQUFPLFNBQVMsVUFDM0JULElBQVdTLEVBQU87QUFFeEIsSUFBQWpDLEVBQU8sS0FBSyxvQkFBb0J0Z0IsR0FBWW9ZLEdBQU9tSyxFQUFPLFFBQVEsR0FDOUQsT0FBT25LLEVBQU0sUUFBUyxjQUN0QkEsRUFBTSxLQUFLLG9CQUFvQnBZLEdBQVl1aUIsRUFBTyxRQUFRO0FBRzlELFFBQUl4bkI7QUFDSixRQUFJO0FBQ0EsTUFBQUEsSUFBUyxNQUFNc25CLEdBQWdDQyxHQUFVUixDQUFRO0FBQUEsSUFDN0UsU0FDZTFlLEdBQUs7QUFDUixNQUFBd2YsRUFBUSxNQUFNLHNDQUFzQ3hmLENBQUcsR0FDdkRySSxJQUFTO0FBQUEsSUFDckI7QUFFUSxJQUFBdWxCLEVBQU8sS0FBSyxrQkFBa0J0Z0IsR0FBWW9ZLEdBQU9tSyxFQUFPLFVBQVV4bkIsQ0FBTSxHQUNwRSxPQUFPcWQsRUFBTSxRQUFTLGNBQ3RCQSxFQUFNLEtBQUssa0JBQWtCcFksR0FBWXVpQixFQUFPLFVBQVV4bkIsQ0FBTTtBQUdwRSxVQUFNOG5CLElBQVc5bkIsSUFBUyx5QkFBeUJBLENBQU0sS0FBSyxJQUN4RHlpQixJQUFVO0FBQUEsTUFDWixNQUFNO0FBQUEsTUFDTixRQUFRc0UsRUFBUztBQUFBLE1BQ2pCLFFBQVEsRUFBRSxNQUFNLHVCQUF1QixNQUFNZSxFQUFVO0FBQUEsSUFDMUQ7QUFDRCxJQUFBL2dCLEVBQVEsS0FBSyxJQUFJNmIsR0FBc0JILEdBQVNwRixHQUFPeUssQ0FBUSxDQUFDO0FBQUEsRUFDeEU7QUFDSSxTQUFPL2dCO0FBQ1g7QUFJTyxlQUFlNGYsR0FBb0J0SixHQUFPdUgsR0FBZUMsR0FBY0MsR0FBY08sR0FBYXhCLEdBQWEwQixHQUFRdGdCLEdBQVk7QUFFdEksTUFEQTZmLElBQWUsQ0FBQyxHQUFHQSxDQUFZLEdBQzNCakIsRUFBWSxXQUFXO0FBQ3ZCcGYsV0FBQUEsRUFBTyxLQUFLLDZGQUE2RixHQUNsRyxJQUFJa2dCLEdBQWlCQyxHQUFlUyxHQUFhUixHQUFjQyxHQUFjLEVBQUUsTUFBTSx1QkFBdUI7QUFFdkgsTUFBSWpCLEVBQVksU0FBUyxHQUFHO0FBRXhCLFVBQU1ULElBQWdCO0FBQ3RCLGFBQVMxeEIsSUFBSSxHQUFHQSxJQUFJbXlCLEVBQVksUUFBUW55QjtBQUNwQyxNQUFBb3pCLEVBQWEsS0FBSyxJQUFJbEMsR0FBc0JrRSxHQUFzQmpELEVBQVlueUIsQ0FBQyxFQUFFLFVBQVUweEIsQ0FBYSxHQUFHL0YsR0FBTytGLENBQWEsQ0FBQztBQUFBLEVBRTVJO0FBQ0ksUUFBTTJFLElBQWdCbEUsRUFBWSxDQUFDO0FBQ25DLFNBQU9ySCxHQUFnQixPQUFPd0wsTUFBZ0I7QUFDMUMsVUFBTXRLLElBQVVxSyxFQUFjLFNBQ3hCRSxJQUFXLE1BQU12SyxFQUFRLGdCQUFnQnpZLEdBQVk4aUIsRUFBYyxTQUFTLFNBQVM7QUFFM0YsUUFEQUMsRUFBWSxTQUFTLFdBQVdDLEVBQVMsTUFDckNwRSxFQUFZLFNBQVMsR0FBRztBQUN4QixZQUFNcUUsSUFBa0JyRSxFQUFZLElBQUksQ0FBQzFqQixNQUFNQSxFQUFFLFFBQVEsU0FBUztBQUNsRSxNQUFBNm5CLEVBQVksU0FBUztBQUFBLFFBQ2pCLFNBQVM7QUFBQSxRQUNULE1BQU07QUFBQSxVQUNGLGtCQUFrQkU7QUFBQSxRQUNyQjtBQUFBLE1BQ2pCLENBQWE7QUFBQSxJQUNiO0FBQ1EsSUFBQXBELEVBQWEsS0FBSyxJQUFJL0IsR0FBcUIrRCxHQUFzQmlCLEVBQWMsVUFBVTNLLEdBQW1CNkssQ0FBUSxDQUFDLEdBQUc1SyxHQUFPNEssQ0FBUSxDQUFDLEdBQ3hJMUMsRUFBTyxLQUFLLGlCQUFpQnRnQixHQUFZb1ksR0FBTzRLLENBQVEsR0FDeEQ1SyxFQUFNLEtBQUssaUJBQWlCcFksR0FBWWdqQixDQUFRO0FBQ2hELFVBQU1FLElBQWN6SyxFQUFRLGVBQWU2SCxFQUFPLE9BQU87QUFDekQsUUFBSTRDLEdBQWE7QUFDYjFqQixNQUFBQSxFQUFPLE1BQU0sOEJBQThCLEdBQ3ZDLE9BQU8wakIsS0FBZ0IsY0FDdkJILEVBQVksU0FBUztBQUFBLFFBQ2pCLFNBQVM7QUFBQSxRQUNULE1BQU07QUFBQSxVQUNGLFNBQVM7QUFBQSxRQUNaO0FBQUEsTUFDckIsQ0FBaUI7QUFFTCxZQUFNSSxJQUFtQjtBQUFBLFFBQ3JCLGNBQWMsTUFBTSxRQUFReEQsQ0FBYSxJQUNuQyxDQUFDLEdBQUdBLENBQWEsSUFDakJBO0FBQUEsUUFDTixpQkFBaUIsQ0FBQyxHQUFHQyxDQUFZO0FBQUEsUUFDakMsVUFBVSxDQUFDLEdBQUdDLENBQVk7QUFBQSxNQUM3QixHQUNLcnZCLElBQVcweUIsRUFBWUMsQ0FBZ0I7QUFDN0MsTUFBQXhELElBQWdCbnZCLEVBQVMsY0FDekJvdkIsSUFBZXB2QixFQUFTLGlCQUN4QnF2QixJQUFlcnZCLEVBQVM7QUFBQSxJQUNwQztBQUNRLFdBQU8sSUFBSWt2QixHQUFpQkMsR0FBZVMsR0FBYVIsR0FBY0MsR0FBYyxFQUFFLE1BQU0scUJBQXFCLFVBQUFtRCxHQUFVO0FBQUEsRUFDbkksR0FBTztBQUFBLElBQ0MsTUFBTTtBQUFBLE1BQ0YsWUFBWTVLLEVBQU07QUFBQSxJQUNyQjtBQUFBLEVBQ1QsQ0FBSztBQUNMO0FBQ0EsTUFBTWdMLEtBQW1CO0FBQUEsRUFDckIsZUFBZTtBQUFBLEVBQ2YsZUFBZTtBQUNuQjtBQUlPLGVBQWVuQyxHQUE2QjdJLEdBQU9pTCxHQUFhenBCLEdBQU87QUFDMUUsTUFBSXlwQixFQUFZLFdBQVc7QUFDdkIsV0FBT0Q7QUFFWCxRQUFNRSxJQUFnQkQsRUFDakIsT0FBTyxDQUFDeGtCLE1BQU1BLEVBQUUsbUJBQW1Cb2YsRUFBbUIsRUFDdEQsSUFBSSxDQUFDcGYsTUFBTUEsRUFBRSxPQUFPO0FBQ3pCLE1BQUl5a0IsRUFBYyxTQUFTO0FBQ3ZCLFdBQU87QUFBQSxNQUNILGVBQWU7QUFBQSxNQUNmLGVBQWU7QUFBQSxNQUNmLGVBQUFBO0FBQUEsSUFDSDtBQUVMLE1BQUlsTCxFQUFNLG9CQUFvQjtBQUMxQixXQUFPZ0w7QUFFWCxRQUFNRyxJQUFrQkYsRUFBWSxDQUFDO0FBQ3JDLE1BQUlqTCxFQUFNLG9CQUFvQjtBQUMxQixZQUFJbUwsS0FBQSxnQkFBQUEsRUFBaUIsVUFBUyxvQkFFbkI7QUFBQSxNQUNILGVBQWU7QUFBQSxNQUNmLGVBQWU7QUFBQSxNQUNmLGFBSmlCOWpCLEdBQWM4akIsRUFBZ0IsTUFBTTtBQUFBLElBS3hELElBRUVIO0FBRVgsUUFBTUksSUFBa0JwTCxFQUFNO0FBQzlCLE1BQUksT0FBT29MLEtBQW9CLFVBQVU7QUFDckMsVUFBTUMsSUFBZUosRUFBWSxLQUFLLENBQUN4a0IsTUFBTTJrQixFQUFnQixnQkFBZ0IsU0FBUzNrQixFQUFFLEtBQUssSUFBSSxDQUFDO0FBQ2xHLFlBQUk0a0IsS0FBQSxnQkFBQUEsRUFBYyxVQUFTLG9CQUVoQjtBQUFBLE1BQ0gsZUFBZTtBQUFBLE1BQ2YsZUFBZTtBQUFBLE1BQ2YsYUFKaUJoa0IsR0FBY2drQixFQUFhLE1BQU07QUFBQSxJQUtyRCxJQUVFTDtBQUFBLEVBQ2Y7QUFDSSxNQUFJLE9BQU9JLEtBQW9CO0FBQzNCLFdBQU9BLEVBQWdCNXBCLEVBQU0sVUFBVXlwQixDQUFXO0FBRXRELFFBQU0sSUFBSXBwQixFQUFVLDRCQUE0QnVwQixDQUFlLElBQUk1cEIsQ0FBSztBQUM1RTtBQUNPLFNBQVM4cEIsR0FBbUIzc0IsR0FBUXdRLEdBQU07QUFDN0MsYUFBVzFhLEtBQVEwYSxFQUFLLGNBQWM7QUFDbEMsUUFBSW9jO0FBQ0osUUFBSTkyQixhQUFnQjB3QjtBQUNoQixNQUFBb0csSUFBVztBQUFBLGFBRU45MkIsYUFBZ0JneEI7QUFDckIsTUFBQThGLElBQVc7QUFBQSxhQUVOOTJCLGFBQWdCaXhCO0FBQ3JCLE1BQUE2RixJQUFXO0FBQUEsYUFFTjkyQixhQUFnQjZ3QjtBQUNyQixNQUFBaUcsSUFBVztBQUFBLGFBRU45MkIsYUFBZ0I4d0I7QUFDckIsTUFBQWdHLElBQVc7QUFBQSxhQUVOOTJCLGFBQWdCK3dCO0FBQ3JCLE1BQUErRixJQUFXO0FBQUEsYUFFTjkyQixhQUFnQm94QjtBQUNyQixNQUFBMEYsSUFBVztBQUFBLFNBRVY7QUFDRG5rQixNQUFBQSxFQUFPLEtBQUssdUJBQXVCM1MsQ0FBSTtBQUN2QztBQUFBLElBQ1o7QUFDUSxJQUFBa0ssRUFBTyxTQUFTLElBQUl3bkIsR0FBbUJvRixHQUFVOTJCLENBQUksQ0FBQztBQUFBLEVBQzlEO0FBQ0E7O0FBQ08sTUFBTSsyQixHQUFvQjtBQUFBLEVBQTFCO0FBQ0gsSUFBQXBULEVBQUEsTUFBQXFULElBQWdCLG9CQUFJLElBQUs7QUFBQTtBQUFBLEVBQ3pCLFdBQVd6TCxHQUFPakosR0FBVztBQUN6QixJQUFBd0IsRUFBQSxNQUFLa1QsSUFBYyxJQUFJekwsR0FBT2pKLENBQVM7QUFBQSxFQUMvQztBQUFBLEVBQ0ksYUFBYWlKLEdBQU87QUFDaEIsV0FBT3pILEVBQUEsTUFBS2tULElBQWMsSUFBSXpMLENBQUs7QUFBQSxFQUMzQztBQUFBLEVBQ0ksU0FBUztBQUNMLFdBQU8sT0FBTyxZQUFZLE1BQU0sS0FBS3pILEVBQUEsTUFBS2tULElBQWMsUUFBTyxDQUFFLEVBQUUsSUFBSSxDQUFDLENBQUN6TCxHQUFPakosQ0FBUyxNQUM5RSxDQUFDaUosRUFBTSxNQUFNakosQ0FBUyxDQUNoQyxDQUFDO0FBQUEsRUFDVjtBQUNBO0FBWkkwVSxLQUFBO0FDbHRCRyxNQUFNQyxLQUF5QixPQUNoQ0MsS0FBaUJyVixFQUFVb1YsRUFBc0IsR0FDakRFLEtBQXdCeFYsRUFBUztBQUFBLEVBQ25DLE1BQU1DLEVBQVU7QUFDcEIsQ0FBQyxHQUNLd1YsS0FBcUJ6VixFQUFTO0FBQUEsRUFDaEMsUUFBUUUsRUFBVSxZQUFZO0FBQUEsRUFDOUIsSUFBSUQsRUFBVTtBQUFBLEVBQ2QsVUFBVUEsRUFBVTtBQUFBLEVBQ3BCLFdBQVdBLEVBQVUsRUFBQyxTQUFVO0FBQUEsRUFDaEMsWUFBWUEsRUFBVSxFQUFDLFNBQVU7QUFBQSxFQUNqQyxVQUFVQSxFQUFVLEVBQUMsU0FBVTtBQUFBLEVBQy9CLE9BQU95VixFQUNLO0FBQUEsSUFDUixTQUFTelYsRUFBVTtBQUFBLElBQ25CLE1BQU1FLEdBQVNGLEVBQVEsR0FBSUcsRUFBTyxDQUFBLEVBQUUsU0FBVTtBQUFBLEVBQ2pELENBQUEsRUFDSSxTQUFVO0FBQUEsRUFDZixXQUFXRCxHQUFTRixFQUFVLEdBQUVHLEVBQUssQ0FBRTtBQUMzQyxDQUFDLEdBQ0t1VixLQUFpQkYsR0FBbUIsT0FBTztBQUFBLEVBQzdDLGVBQWVHLEdBQU8sTUFBTUQsRUFBYyxFQUFFLFNBQVU7QUFDMUQsQ0FBQyxHQUNLRSxLQUFjN1YsRUFBUztBQUFBLEVBQ3pCLFVBQVV1TCxFQUFVO0FBQUEsRUFDcEIsYUFBYUEsRUFBVTtBQUFBLEVBQ3ZCLGNBQWNBLEVBQVU7QUFBQSxFQUN4QixhQUFhQSxFQUFVO0FBQzNCLENBQUMsR0FDS3VLLEtBQXNCOVYsRUFBUztBQUFBLEVBQ2pDLE9BQU82VjtBQUFBLEVBQ1AsUUFBUXhWLEVBQVEwVixFQUF3QjtBQUFBLEVBQ3hDLFlBQVk5VixFQUFVLEVBQUMsU0FBVTtBQUNyQyxDQUFDLEdBQ0srVixLQUFhMUssR0FBcUIsUUFBUTtBQUFBLEVBQzVDdEwsRUFBUztBQUFBLElBQ0wsTUFBTUUsRUFBVSxxQkFBcUI7QUFBQSxJQUNyQyxTQUFTK1Y7QUFBQUEsSUFDVCxPQUFPVDtBQUFBLEVBQ2YsQ0FBSztBQUFBLEVBQ0R4VixFQUFTO0FBQUEsSUFDTCxNQUFNRSxFQUFVLGdCQUFnQjtBQUFBLElBQ2hDLFNBQVNnVyxHQUFzQixHQUFHQyxFQUEyQjtBQUFBLElBQzdELE9BQU9YO0FBQUEsRUFDZixDQUFLO0FBQUEsRUFDRHhWLEVBQVM7QUFBQSxJQUNMLE1BQU1FLEVBQVUsdUJBQXVCO0FBQUEsSUFDdkMsU0FBU2tXO0FBQUFBLElBQ1QsT0FBT1o7QUFBQSxJQUNQLFFBQVF2VixFQUFVO0FBQUEsRUFDMUIsQ0FBSztBQUFBLEVBQ0RELEVBQVM7QUFBQSxJQUNMLE1BQU1FLEVBQVUsZ0JBQWdCO0FBQUEsSUFDaEMsU0FBU21XO0FBQUFBLElBQ1QsT0FBT2I7QUFBQSxFQUNmLENBQUs7QUFBQSxFQUNEeFYsRUFBUztBQUFBLElBQ0wsTUFBTUUsRUFBVSxtQkFBbUI7QUFBQSxJQUNuQyxTQUFTb1c7QUFBQUEsSUFDVCxPQUFPZDtBQUFBLEVBQ2YsQ0FBSztBQUFBLEVBQ0R4VixFQUFTO0FBQUEsSUFDTCxNQUFNRSxFQUFVLHFCQUFxQjtBQUFBLElBQ3JDLFNBQVNrVztBQUFBQSxJQUNULGFBQWFaO0FBQUEsSUFDYixhQUFhQTtBQUFBLEVBQ3JCLENBQUs7QUFBQSxFQUNEeFYsRUFBUztBQUFBLElBQ0wsTUFBTUUsRUFBVSxvQkFBb0I7QUFBQSxJQUNwQyxTQUFTb1csR0FBMEIsR0FBR0gsRUFBMkI7QUFBQSxJQUNqRSxPQUFPWDtBQUFBLEVBQ2YsQ0FBSztBQUNMLENBQUMsR0FDS2UsS0FBd0J2VyxFQUFTO0FBQUEsRUFDbkMsUUFBUUUsRUFBVSxPQUFPO0FBQUEsRUFDekIsSUFBSUQsRUFBVTtBQUFBLEVBQ2QsZUFBZUEsRUFBVTtBQUFBLEVBQ3pCLFVBQVVBLEVBQVUsRUFBQyxTQUFVO0FBQUEsRUFDL0IsVUFBVUUsR0FBU0YsRUFBVSxHQUFFRyxFQUFLLENBQUU7QUFDMUMsQ0FBQyxHQUNLb1csS0FBb0N4VyxFQUFTO0FBQUEsRUFDL0MsVUFBVUssRUFBUTJWLEVBQVU7QUFBQSxFQUM1QixXQUFXM1YsRUFBUUosR0FBVTtBQUFBLEVBQzdCLFVBQVVJLEVBQVFMLEVBQVM7QUFBQSxJQUN2QixVQUFVSSxFQUFPO0FBQUEsSUFDakIsU0FBU0EsRUFBTztBQUFBLEVBQ3hCLENBQUssQ0FBQztBQUFBLEVBQ0YsV0FBV0MsRUFBUUwsRUFBUztBQUFBLElBQ3hCLFVBQVVJLEVBQU87QUFBQSxJQUNqQixNQUFNQSxFQUFPO0FBQUEsRUFDckIsQ0FBSyxDQUFDO0FBQUEsRUFDRixpQkFBaUJDLEVBQVFMLEVBQVM7QUFBQSxJQUM5QixVQUFVSSxFQUFPO0FBQUEsSUFDakIsVUFBVUEsRUFBTztBQUFBLEVBQ3pCLENBQUssQ0FBQztBQUFBLEVBQ0YscUJBQXFCcVcsRUFDVnpXLEVBQVM7QUFBQSxJQUNoQixhQUFhQSxFQUFTO0FBQUE7QUFBQSxNQUVsQixTQUFTQSxFQUFTO0FBQUEsUUFDZCxNQUFNRSxFQUFVLGtCQUFrQjtBQUFBLFFBQ2xDLE1BQU1ELEVBQVU7QUFBQSxRQUNoQixXQUFXQSxFQUFVLEVBQUMsU0FBVTtBQUFBLFFBQ2hDLFFBQVFBLEVBQVUsRUFBQyxTQUFVO0FBQUEsUUFDN0IsUUFBUUEsRUFBVSxFQUFDLFNBQVU7QUFBQSxNQUM3QyxDQUFhO0FBQUEsSUFDYixDQUFTO0FBQUE7QUFBQSxJQUVELFNBQVNELEVBQVM7QUFBQSxNQUNkLE1BQU1FLEVBQVUsYUFBYTtBQUFBLE1BQzdCLE1BQU1BLEVBQVUsWUFBWTtBQUFBLE1BQzVCLGNBQWNDLEdBQVNGLEVBQVUsR0FBRUcsRUFBSyxDQUFFO0FBQUEsSUFDdEQsQ0FBUztBQUFBLEVBQ1QsQ0FBSyxDQUFDLEVBQ0csU0FBVTtBQUNuQixDQUFDLEdBQ0tzVyxLQUFnQzFXLEVBQVM7QUFBQSxFQUMzQyxtQkFBbUJNLEdBQVc7QUFBQSxFQUM5QixZQUFZRixFQUFPO0FBQ3ZCLENBQUMsR0FDS3VXLEtBQTZCM1csRUFBUztBQUFBLEVBQ3hDLFdBQVdBLEVBQVM7QUFBQSxJQUNoQixNQUFNRSxFQUFVLE9BQU87QUFBQSxJQUN2QixNQUFNRCxFQUFVO0FBQUEsRUFDeEIsQ0FBSztBQUFBLEVBQ0QsUUFBUXlXO0FBQ1osQ0FBQyxHQUNLRSxLQUE4QjVXLEVBQVM7QUFBQSxFQUN6QyxXQUFXQSxFQUFTO0FBQUEsSUFDaEIsTUFBTUUsRUFBVSxRQUFRO0FBQUEsSUFDeEIsTUFBTUQsRUFBVTtBQUFBLEVBQ3hCLENBQUs7QUFBQSxFQUNELGFBQWFHLEVBQU87QUFBQSxFQUNwQixPQUFPb1Y7QUFBQSxFQUNQLFFBQVFrQjtBQUNaLENBQUMsR0FDWUcsS0FBcUI3VyxFQUFTO0FBQUEsRUFDdkMsZ0JBQUF1VjtBQUFBLEVBQ0EsYUFBYWhLLEVBQVU7QUFBQSxFQUN2QixjQUFjaUs7QUFBQSxFQUNkLGVBQWV2VixFQUFVLEVBQUMsR0FBR0ksRUFBUXlXLEVBQWtCLENBQUM7QUFBQSxFQUN4RCxnQkFBZ0J6VyxFQUFReVYsRUFBbUI7QUFBQSxFQUMzQyxTQUFTOVYsRUFBUztBQUFBLElBQ2QsT0FBTzZWO0FBQUEsSUFDUCxXQUFXMVYsR0FBU0YsRUFBVSxHQUFFRCxFQUFTO0FBQUEsTUFDckMsVUFBVUssRUFBUUosRUFBUSxDQUFFLEVBQUUsR0FBR0ssR0FBUyxDQUFFO0FBQUEsTUFDNUMsVUFBVUQsRUFBUUosRUFBUSxDQUFFLEVBQUUsR0FBR0ssR0FBUyxDQUFFO0FBQUEsSUFDeEQsQ0FBUyxDQUFDO0FBQUEsSUFDRixTQUFTSCxHQUFTRixFQUFVLEdBQUVHLEVBQUssQ0FBRTtBQUFBLEVBQzdDLENBQUs7QUFBQSxFQUNELGdCQUFnQkQsR0FBU0YsRUFBUSxHQUFJSSxFQUFRSixFQUFVLENBQUEsQ0FBQztBQUFBLEVBQ3hELFVBQVVzTCxFQUFVO0FBQUEsRUFDcEIsa0JBQWtCb0ssR0FBZSxTQUFVLEVBQUMsU0FBVTtBQUFBLEVBQ3RELGtCQUFrQnJWLEdBQVc7QUFBQSxFQUM3Qix1QkFBdUJELEVBQVFzVyxFQUEwQjtBQUFBLEVBQ3pELHdCQUF3QnRXLEVBQVF1VyxFQUEyQjtBQUFBLEVBQzNELGFBQWEzRixHQUFlLFNBQVU7QUFBQSxFQUN0QyxtQkFBbUI2RSxHQUFvQixTQUFVO0FBQUEsRUFDakQsZ0JBQWdCelYsRUFBUTJWLEVBQVU7QUFBQSxFQUNsQyx1QkFBdUJRLEdBQWtDLFNBQVU7QUFBQSxFQUNuRSxPQUFPRCxHQUFzQixTQUFVO0FBQzNDLENBQUM7QUFTTSxNQUFNUSxHQUFTO0FBQUEsRUFpRWxCLFlBQVk1bEIsR0FBU2dnQixHQUFlNkYsR0FBZUMsR0FBVTtBQTdEN0Q7QUFBQTtBQUFBO0FBQUEsSUFBQTVyQixFQUFBLHNCQUFlO0FBSWY7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxFQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxFQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxFQUFBLDJCQUFvQjtBQUlwQjtBQUFBO0FBQUE7QUFBQSxJQUFBQSxFQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxFQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsRUFBQTtBQUlBO0FBQUE7QUFBQTtBQUFBLElBQUFBLEVBQUEsZ0JBQVM7QUFFTCxTQUFLLFdBQVc4RixHQUNoQixLQUFLLGlCQUFpQixnQkFBZ0JnZ0IsQ0FBYSxHQUNuRCxLQUFLLGtCQUFrQixDQUFFLEdBQ3pCLEtBQUssb0JBQW9CLFFBQ3pCLEtBQUssZ0JBQWdCNkYsR0FDckIsS0FBSyxrQkFBa0IsSUFBSTVCLEdBQXFCLEdBQ2hELEtBQUssa0JBQWtCLENBQUUsR0FDekIsS0FBSyxZQUFZNkIsR0FDakIsS0FBSyx5QkFBeUIsQ0FBRSxHQUNoQyxLQUFLLDBCQUEwQixDQUFFLEdBQ2pDLEtBQUssU0FBUy9ULEdBQWlCO0FBQUEsRUFDdkM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQWFJLFFBQVF1SyxHQUFjbnRCLElBQVUsRUFBRSxlQUFlLEdBQUssR0FBSTtBQUN0RCxTQUFLLFNBQVMsWUFBWW10QixHQUFjbnRCLENBQU87QUFBQSxFQUN2RDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBYUksT0FBT210QixHQUFjbnRCLElBQVUsRUFBRSxjQUFjLEdBQUssR0FBSTtBQUNwRCxTQUFLLFNBQVMsV0FBV210QixHQUFjbnRCLENBQU87QUFBQSxFQUN0RDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVNJLFNBQVM7O0FBQ0wsVUFBTWlNLElBQVM7QUFBQSxNQUNYLGdCQUFnQitvQjtBQUFBLE1BQ2hCLGFBQWEsS0FBSztBQUFBLE1BQ2xCLGNBQWM7QUFBQSxRQUNWLE1BQU0sS0FBSyxjQUFjO0FBQUEsTUFDNUI7QUFBQSxNQUNELGVBQWUsS0FBSztBQUFBLE1BQ3BCLGdCQUFnQixLQUFLLGdCQUFnQixJQUFJLENBQUMxQixPQUMvQjtBQUFBLFFBQ0gsT0FBTztBQUFBLFVBQ0gsVUFBVUEsRUFBUyxNQUFNO0FBQUEsVUFDekIsYUFBYUEsRUFBUyxNQUFNO0FBQUEsVUFDNUIsY0FBY0EsRUFBUyxNQUFNO0FBQUEsVUFDN0IsYUFBYUEsRUFBUyxNQUFNO0FBQUEsUUFDL0I7QUFBQSxRQUNELFFBQVFBLEVBQVM7QUFBQSxRQUNqQixZQUFZQSxFQUFTO0FBQUEsTUFDeEIsRUFDSjtBQUFBLE1BQ0QsU0FBUyxLQUFLLFNBQVMsT0FBUTtBQUFBLE1BQy9CLGdCQUFnQixLQUFLLGdCQUFnQixPQUFRO0FBQUEsTUFDN0MsVUFBVSxLQUFLO0FBQUEsTUFDZixtQkFBa0I1dkIsSUFBQSxLQUFLLHNCQUFMLGdCQUFBQSxFQUF3QjtBQUFBLE1BQzFDLGtCQUFrQixLQUFLO0FBQUEsTUFDdkIsdUJBQXVCLEtBQUs7QUFBQSxNQUM1Qix3QkFBd0IsS0FBSyx3QkFBd0IsSUFBSSxDQUFDcU0sT0FBTztBQUFBLFFBQzdELEdBQUdBO0FBQUEsUUFDSCxPQUFPQSxFQUFFLE1BQU0sT0FBUTtBQUFBLE1BQ3ZDLEVBQWM7QUFBQSxNQUNGLGFBQWEsS0FBSztBQUFBLE1BQ2xCLG1CQUFtQixLQUFLO0FBQUEsTUFDeEIsZ0JBQWdCLEtBQUssZ0JBQWdCLElBQUksQ0FBQ2hTLE1BQVNBLEVBQUssUUFBUTtBQUFBLE1BQ2hFLHVCQUF1QixLQUFLO0FBQUEsTUFDNUIsT0FBTyxLQUFLLFNBQVMsS0FBSyxPQUFPLE9BQU0sSUFBSztBQUFBLElBQy9DLEdBRUtvVCxJQUFTb2xCLEdBQW1CLFVBQVV0cUIsQ0FBTTtBQUNsRCxRQUFJLENBQUNrRixFQUFPO0FBQ1IsWUFBTSxJQUFJbkcsR0FBWSxrQ0FBa0NtRyxFQUFPLE1BQU0sT0FBTyxFQUFFO0FBRWxGLFdBQU9BLEVBQU87QUFBQSxFQUN0QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVNJLFdBQVc7QUFDUCxXQUFPLEtBQUssVUFBVSxLQUFLLE9BQU0sQ0FBRTtBQUFBLEVBQzNDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPSSxhQUFhLFdBQVd5bEIsR0FBY2hxQixHQUFLOztBQUN2QyxVQUFNLENBQUNpcUIsR0FBY0MsQ0FBVSxJQUFJLE1BQU14M0IsR0FBWSxNQUFNLEtBQUssTUFBTXNOLENBQUcsQ0FBQztBQUMxRSxRQUFJaXFCO0FBQ0EsWUFBTSxJQUFJMXJCLEVBQVUsOEJBQThCMHJCLGFBQXdCLFFBQVFBLEVBQWEsVUFBVSxPQUFPQSxDQUFZLENBQUMsRUFBRTtBQUVuSSxVQUFNRSxJQUF1QkQsRUFBVztBQUN4QyxRQUFJLENBQUNDO0FBQ0QsWUFBTSxJQUFJNXJCLEVBQVUscUNBQXFDO0FBRTdELFFBQUk0ckIsTUFBeUIvQjtBQUN6QixZQUFNLElBQUk3cEIsRUFBVSw0QkFBNEI0ckIsQ0FBb0IseUNBQXlDL0IsRUFBc0IsRUFBRTtBQUV6SSxVQUFNZ0MsSUFBWVQsR0FBbUIsTUFBTSxLQUFLLE1BQU0zcEIsQ0FBRyxDQUFDLEdBQ3BEcXFCLElBQVdDLEdBQWNOLENBQVksR0FJckMvbEIsSUFBVSxJQUFJOGIsR0FBV3FLLEVBQVUsUUFBUSxPQUFPO0FBQ3hELElBQUFubUIsRUFBUSxrQkFBa0JtbUIsRUFBVSxRQUFRLFNBQVM7QUFJckQsVUFBTUcsSUFBZUYsRUFBUyxJQUFJRCxFQUFVLGFBQWEsSUFBSTtBQUM3RCxRQUFJLENBQUNHO0FBQ0QsWUFBTSxJQUFJaHNCLEVBQVUsU0FBUzZyQixFQUFVLGFBQWEsSUFBSSxZQUFZO0FBRXhFLFVBQU1sc0IsSUFBUSxJQUFJMnJCLEdBQVM1bEIsR0FBUyxJQUFJc21CLEdBQWNILEVBQVUsUUFBUTtBQUN4RSxJQUFBbHNCLEVBQU0sZUFBZWtzQixFQUFVLGFBRS9CbHNCLEVBQU0sa0JBQWtCLElBQUlncUIsR0FBcUI7QUFDakQsZUFBVyxDQUFDc0MsR0FBVy9XLENBQVMsS0FBSyxPQUFPLFFBQVEyVyxFQUFVLGNBQWM7QUFDeEUsTUFBQWxzQixFQUFNLGdCQUFnQixXQUFXbXNCLEVBQVMsSUFBSUcsQ0FBUyxHQUFHL1csQ0FBUztBQUd2RSxRQUFJMlcsRUFBVSxrQkFBa0I7QUFDNUIsTUFBS0EsRUFBVSxTQUNYdG1CLEVBQU8sS0FBSywwQ0FBMEM7QUFFMUQsWUFBTXFTLElBQVFHLEdBQXdCLEVBQUMsWUFBWTtBQUFBLFFBQy9DLFVBQVN4ZixJQUFBc3pCLEVBQVUsVUFBVixnQkFBQXR6QixFQUFpQjtBQUFBLFFBQzFCLE9BQU1ELElBQUF1ekIsRUFBVSxVQUFWLGdCQUFBdnpCLEVBQWlCO0FBQUEsUUFDdkIsV0FBU2tELElBQUFxd0IsRUFBVSxVQUFWLGdCQUFBcndCLEVBQWlCLGFBQVk7QUFBQSxRQUN0QyxXQUFVRSxJQUFBbXdCLEVBQVUsVUFBVixnQkFBQW53QixFQUFpQjtBQUFBLE1BQzNDLENBQWE7QUFDRCxNQUFBaUUsRUFBTSxvQkFBb0J1c0IsR0FBZ0J0VSxHQUFPaVUsRUFBVSxnQkFBZ0IsR0FDM0Vsc0IsRUFBTSxTQUFTaVk7QUFBQSxJQUMzQjtBQUNRLFdBQUFqWSxFQUFNLG9CQUFvQmtzQixFQUFVLGtCQUNwQ2xzQixFQUFNLHlCQUNGa3NCLEVBQVUsdUJBQ2Rsc0IsRUFBTSwwQkFBMEJrc0IsRUFBVSx1QkFBdUIsSUFBSSxDQUFDam5CLE9BQU87QUFBQSxNQUN6RSxHQUFHQTtBQUFBLE1BQ0gsT0FBT2tuQixFQUFTLElBQUlsbkIsRUFBRSxNQUFNLElBQUk7QUFBQSxJQUM1QyxFQUFVLEdBQ0ZqRixFQUFNLGVBQWVrc0IsRUFBVSxhQUMvQmxzQixFQUFNLGlCQUFpQmtzQixFQUFVLGVBQ2pDbHNCLEVBQU0sa0JBQWtCa3NCLEVBQVUsZUFBZSxJQUFJTSxFQUF3QixHQUM3RXhzQixFQUFNLG9CQUFvQmtzQixFQUFVLG9CQUM5Qk0sR0FBeUJOLEVBQVUsaUJBQWlCLElBQ3BELFFBQ05sc0IsRUFBTSxrQkFBa0Jrc0IsRUFBVSxlQUFlLElBQUksQ0FBQ2o1QixNQUFTdzVCLEdBQWdCeDVCLEdBQU1rNUIsQ0FBUSxDQUFDLEdBQzlGbnNCLEVBQU0seUJBQXlCa3NCLEVBQVUsd0JBQ25DLE1BQU1RLEdBQTZCUCxHQUFVbnNCLEVBQU0sZUFBZWtzQixFQUFVLHFCQUFxQixJQUNqRyxVQUNGUyxJQUFBVCxFQUFVLGdCQUFWLGdCQUFBUyxFQUF1QixVQUFTLHdCQUNoQzNzQixFQUFNLGVBQWU7QUFBQSxNQUNqQixNQUFNO0FBQUEsTUFDTixVQUFVbXNCLEVBQVMsSUFBSUQsRUFBVSxZQUFZLFNBQVMsSUFBSTtBQUFBLElBQzdELElBRUVsc0I7QUFBQSxFQUNmO0FBQ0E7QUFJTyxTQUFTb3NCLEdBQWNOLEdBQWM7QUFDeEMsUUFBTWxrQixJQUFNLG9CQUFJLElBQUssR0FDZmdsQixJQUFRLENBQUNkLENBQVk7QUFDM0IsU0FBT2MsRUFBTSxTQUFTLEtBQUc7QUFDckIsVUFBTVAsSUFBZU8sRUFBTSxNQUFPO0FBQ2xDLFFBQUksQ0FBQWhsQixFQUFJLElBQUl5a0IsRUFBYSxJQUFJLEdBRzdCO0FBQUEsTUFBQXprQixFQUFJLElBQUl5a0IsRUFBYSxNQUFNQSxDQUFZO0FBQ3ZDLGlCQUFXeE4sS0FBV3dOLEVBQWE7QUFDL0IsUUFBSXhOLGFBQW1CZ08sS0FDZGpsQixFQUFJLElBQUlpWCxFQUFRLElBQUksS0FDckIrTixFQUFNLEtBQUsvTixDQUFPLElBR2pCQSxFQUFRLFVBQ1JqWCxFQUFJLElBQUlpWCxFQUFRLE1BQU0sSUFBSSxLQUMzQitOLEVBQU0sS0FBSy9OLEVBQVEsS0FBSztBQUFBO0FBQUEsRUFJNUM7QUFDSSxTQUFPalg7QUFDWDtBQUlPLFNBQVMya0IsR0FBZ0J0VSxHQUFPNlUsR0FBZ0I7QUFDbkQsUUFBTUMsSUFBV0QsRUFBZSxXQUMxQkUsSUFBZUYsRUFBZSxnQkFDOUJQLEdBQWdCdFUsR0FBTzZVLEVBQWUsYUFBYSxJQUNuRCxRQUNBL1csSUFBT3FDLEdBQXdCLEVBQUMsV0FBVztBQUFBLElBQzdDLFFBQVEwVSxFQUFlO0FBQUEsSUFDdkIsU0FBU0EsRUFBZTtBQUFBLElBQ3hCLFVBQVVBLEVBQWUsYUFBYTtBQUFBLElBQ3RDLFdBQVdBLEVBQWUsY0FBYztBQUFBLElBQ3hDLFNBQVNBLEVBQWUsWUFBWTtBQUFBLElBQ3BDLE1BQU1DO0FBQUEsRUFDVCxHQUFFOVUsQ0FBSztBQUNSLFNBQUFsQyxFQUFLLGVBQWVpWCxHQUNialg7QUFDWDtBQUlPLFNBQVN5VyxHQUF5QlMsR0FBeUI7QUFDOUQsUUFBTUMsSUFBUSxJQUFJdkwsR0FBTztBQUN6QixTQUFBdUwsRUFBTSxXQUFXRCxFQUF3QixNQUFNLFVBQy9DQyxFQUFNLGNBQWNELEVBQXdCLE1BQU0sYUFDbERDLEVBQU0sZUFBZUQsRUFBd0IsTUFBTSxjQUNuREMsRUFBTSxjQUFjRCxFQUF3QixNQUFNLGFBQzNDO0FBQUEsSUFDSCxPQUFBQztBQUFBLElBQ0EsUUFBUUQsRUFBd0IsT0FBTyxJQUFJLENBQUNoNkIsTUFBUzAzQixHQUF5QixNQUFNMTNCLENBQUksQ0FBQztBQUFBLElBQ3pGLFlBQVlnNkIsRUFBd0I7QUFBQSxFQUN2QztBQUNMO0FBSU8sU0FBU1IsR0FBZ0JVLEdBQWdCaEIsR0FBVTtBQUN0RCxVQUFRZ0IsRUFBZSxNQUFJO0FBQUEsSUFDdkIsS0FBSztBQUNELGFBQU8sSUFBSXhKLEdBQXFCd0osRUFBZSxTQUFTaEIsRUFBUyxJQUFJZ0IsRUFBZSxNQUFNLElBQUksQ0FBQztBQUFBLElBQ25HLEtBQUs7QUFDRCxhQUFPLElBQUlySixHQUFnQnFKLEVBQWUsU0FBU2hCLEVBQVMsSUFBSWdCLEVBQWUsTUFBTSxJQUFJLENBQUM7QUFBQSxJQUM5RixLQUFLO0FBQ0QsYUFBTyxJQUFJcEosR0FBc0JvSixFQUFlLFNBQVNoQixFQUFTLElBQUlnQixFQUFlLE1BQU0sSUFBSSxHQUFHQSxFQUFlLE1BQU07QUFBQSxJQUMzSCxLQUFLO0FBQ0QsYUFBTyxJQUFJbkosR0FBaUJtSixFQUFlLFNBQVNoQixFQUFTLElBQUlnQixFQUFlLE1BQU0sSUFBSSxDQUFDO0FBQUEsSUFDL0YsS0FBSztBQUNELGFBQU8sSUFBSWxKLEdBQW1Ca0osRUFBZSxTQUFTaEIsRUFBUyxJQUFJZ0IsRUFBZSxNQUFNLElBQUksQ0FBQztBQUFBLElBQ2pHLEtBQUs7QUFDRCxhQUFPLElBQUlqSixHQUFxQmlKLEVBQWUsU0FBU2hCLEVBQVMsSUFBSWdCLEVBQWUsWUFBWSxJQUFJLEdBQUdoQixFQUFTLElBQUlnQixFQUFlLFlBQVksSUFBSSxDQUFDO0FBQUEsSUFDeEosS0FBSztBQUNELGFBQU8sSUFBSTlJLEdBQW9COEksRUFBZSxTQUFTaEIsRUFBUyxJQUFJZ0IsRUFBZSxNQUFNLElBQUksQ0FBQztBQUFBLEVBQzFHO0FBQ0E7QUFJQSxlQUFlVCxHQUE2QlAsR0FBVUUsR0FBY2UsR0FBNkI7QUFDN0YsUUFBTTlYLElBQVcsTUFBTStXLEVBQWEsWUFBYSxHQUMzQ3BXLElBQVEsSUFBSSxJQUFJWCxFQUNqQixPQUFPLENBQUNoVyxNQUFTQSxFQUFLLFNBQVMsVUFBVSxFQUN6QyxJQUFJLENBQUNBLE1BQVMsQ0FBQ0EsRUFBSyxNQUFNQSxDQUFJLENBQUMsQ0FBQyxHQUMvQit0QixJQUFnQixJQUFJLElBQUkvWCxFQUN6QixPQUFPLENBQUNoVyxNQUFTQSxFQUFLLFNBQVMsVUFBVSxFQUN6QyxJQUFJLENBQUNBLE1BQVMsQ0FBQ0EsRUFBSyxNQUFNQSxDQUFJLENBQUMsQ0FBQyxHQUMvQnlsQixJQUFXLElBQUksSUFBSXNILEVBQWEsU0FBUyxJQUFJLENBQUN4NEIsTUFDNUNBLGFBQWlCZzVCLEtBQ1YsQ0FBQ2g1QixFQUFNLE1BQU1nckIsR0FBUWhyQixDQUFLLENBQUMsSUFFL0IsQ0FBQ0EsRUFBTSxVQUFVQSxDQUFLLENBQ2hDLENBQUMsR0FDSXNKLElBQVM7QUFBQSxJQUNYLFVBQVVpd0IsRUFBNEIsU0FBUyxJQUFJLENBQUNuNkIsTUFBU3c1QixHQUFnQng1QixHQUFNazVCLENBQVEsQ0FBQztBQUFBLElBQzVGLFdBQVdpQixFQUE0QjtBQUFBLElBQ3ZDLFVBQVVBLEVBQTRCLFNBQVMsSUFBSSxDQUFDdk8sTUFBWTtBQUM1RCxVQUFJLENBQUNrRyxFQUFTLElBQUlsRyxFQUFRLFFBQVEsUUFBUTtBQUN0QyxjQUFNLElBQUl4ZSxFQUFVLFdBQVd3ZSxFQUFRLFFBQVEsUUFBUSxZQUFZO0FBRXZFLGFBQU87QUFBQSxRQUNILFVBQVVBLEVBQVE7QUFBQSxRQUNsQixTQUFTa0csRUFBUyxJQUFJbEcsRUFBUSxRQUFRLFFBQVE7QUFBQSxNQUNqRDtBQUFBLElBQ2IsQ0FBUztBQUFBLElBQ0QsV0FBVyxNQUFNLFFBQVEsSUFBSXVPLEVBQTRCLFVBQVUsSUFBSSxPQUFPRSxNQUFpQjtBQUMzRixVQUFJLENBQUNyWCxFQUFNLElBQUlxWCxFQUFhLEtBQUssSUFBSTtBQUNqQyxjQUFNLElBQUlqdEIsRUFBVSxRQUFRaXRCLEVBQWEsS0FBSyxJQUFJLFlBQVk7QUFFbEUsYUFBTztBQUFBLFFBQ0gsVUFBVUEsRUFBYTtBQUFBLFFBQ3ZCLE1BQU1yWCxFQUFNLElBQUlxWCxFQUFhLEtBQUssSUFBSTtBQUFBLE1BQ3pDO0FBQUEsSUFDYixDQUFTLENBQUM7QUFBQSxJQUNGLGlCQUFpQkYsRUFBNEIsZ0JBQWdCLElBQUksQ0FBQ0csTUFBbUI7QUFDakYsWUFBTXZMLElBQVd1TCxFQUFlLFNBQVM7QUFDekMsVUFBSSxDQUFDRixFQUFjLElBQUlyTCxDQUFRO0FBQzNCLGNBQU0sSUFBSTNoQixFQUFVLGlCQUFpQjJoQixDQUFRLFlBQVk7QUFFN0QsYUFBTztBQUFBLFFBQ0gsVUFBVXVMLEVBQWU7QUFBQSxRQUN6QixVQUFVRixFQUFjLElBQUlyTCxDQUFRO0FBQUEsTUFDdkM7QUFBQSxJQUNiLENBQVM7QUFBQSxJQUNELHNCQUFzQm9MLEVBQTRCLHVCQUF1QixDQUFBLEdBQUksSUFBSSxDQUFDM0YsT0FBcUI7QUFBQSxNQUNuRyxhQUFhLElBQUlwRCxHQUFvQm9ELEVBQWdCLFlBQ2hELFNBQVM0RSxDQUFZO0FBQUEsTUFDMUIsU0FBUzVFLEVBQWdCO0FBQUEsSUFDckMsRUFBVTtBQUFBLEVBQ0w7QUFDRCxTQUFPO0FBQUEsSUFDSCxHQUFHdHFCO0FBQUEsSUFDSCwyQkFBMkI7QUFDdkIsYUFBUUEsRUFBTyxTQUFTLFNBQVMsS0FDN0JBLEVBQU8sVUFBVSxTQUFTLEtBQzFCQSxFQUFPLG9CQUFvQixTQUFTLEtBQ3BDQSxFQUFPLGdCQUFnQixTQUFTO0FBQUEsSUFDdkM7QUFBQSxFQUNKO0FBQ0w7QUNyakJBLE1BQU1xd0IsS0FBb0I7QUFJbkIsU0FBU0MsR0FBV0MsR0FBaUJDLEdBQTJCO0FBQ25FLFNBQUlELElBQ08sS0FFUEMsSUFDTyxLQUVKO0FBQ1g7QUFDTyxTQUFTbEwsR0FBYXNELEdBQWU2SCxHQUFnQjtBQUN4RCxRQUFNQyxJQUFXRCxFQUFlLElBQUksQ0FBQzM2QixNQUFTQSxFQUFLLE9BQU87QUFDMUQsU0FBSSxPQUFPOHlCLEtBQWtCLGFBQ3pCQSxJQUFnQixDQUFDLEVBQUUsTUFBTSxXQUFXLE1BQU0sUUFBUSxTQUFTQSxHQUFlLElBRXZFLENBQUMsR0FBR0EsR0FBZSxHQUFHOEgsQ0FBUTtBQUN6Qzs7QUFJTyxNQUFNQyxXQUFlM1AsR0FBUztBQUFBLEVBSWpDLFlBQVlXLElBQVMsSUFBSTtBQUNyQixVQUFPO0FBTFIsSUFBQWxJLEVBQUEsTUFBQW1YO0FBQ0gsSUFBQTl0QixFQUFBO0FBQ0EsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFHSSxTQUFLLFNBQVM7QUFBQSxNQUNWLGVBQWU2ZSxFQUFPLGlCQUFpQkssR0FBeUI7QUFBQSxNQUNoRSxPQUFPTCxFQUFPO0FBQUEsTUFDZCxlQUFlQSxFQUFPO0FBQUEsTUFDdEIsb0JBQW9CQSxFQUFPO0FBQUEsTUFDM0IsaUJBQWlCQSxFQUFPO0FBQUEsTUFDeEIsa0JBQWtCQSxFQUFPO0FBQUEsTUFDekIsaUJBQWlCQSxFQUFPLG1CQUFtQjtBQUFBLE1BQzNDLDJCQUEyQkEsRUFBTyw2QkFBNkI7QUFBQSxNQUMvRCxjQUFjQSxFQUFPLGdCQUFnQjtBQUFBLE1BQ3JDLFNBQVNBLEVBQU87QUFBQSxNQUNoQixTQUFTQSxFQUFPO0FBQUEsTUFDaEIsZUFBZUEsRUFBTztBQUFBLElBQ3pCLEdBQ0QsS0FBSyxzQkFBc0JBLEVBQU8sbUJBQW1CLENBQUUsR0FBRSxJQUFJVixFQUFvQixHQUNqRixLQUFLLHVCQUF1QlUsRUFBTyxvQkFBb0IsQ0FBRSxHQUFFLElBQUlSLEVBQXFCO0FBQUEsRUFDNUY7QUFBQSxFQXNaSSxJQUFJRSxHQUFPN2QsR0FBT3pMLElBQVU7QUFBQSxJQUN4QixRQUFRO0FBQUEsSUFDUixTQUFTO0FBQUEsRUFDakIsR0FBTztBQUNDLFdBQUl5TCxhQUFpQmdyQixNQUFZaHJCLEVBQU0sU0FDNUJ1WCxHQUFVdlgsRUFBTSxRQUFRLGFBQ3ZCQSxFQUFNLHFCQUNOMlgsR0FBZTNYLEVBQU0saUJBQWlCLEdBRXRDekwsS0FBQSxRQUFBQSxFQUFTLFNBQ0Yra0IsRUFBQSxNQUFLOFQsSUFBQUMsSUFBTCxXQUEwQnhQLEdBQU83ZCxHQUFPekwsS0FHeEMra0IsRUFBQSxNQUFLOFQsSUFBQUUsSUFBTCxXQUE2QnpQLEdBQU83ZCxHQUFPekwsR0FFekQsSUFFRW1qQixHQUFpQixZQUNoQm5qQixLQUFBLFFBQUFBLEVBQVMsU0FDRitrQixFQUFBLE1BQUs4VCxJQUFBQyxJQUFMLFdBQTBCeFAsR0FBTzdkLEdBQU96TCxLQUd4QytrQixFQUFBLE1BQUs4VCxJQUFBRSxJQUFMLFdBQTZCelAsR0FBTzdkLEdBQU96TCxFQUV6RDtBQUFBLEVBQ1Q7QUFDQTtBQXRjTzY0QixLQUFBLGVBMEJHRSxLQUF1QixlQUFDckMsR0FBZWpyQixHQUFPekwsR0FBUztBQUN6RCxTQUFPeWpCLEdBQW1CLFlBQVk7O0FBRWxDLFVBQU0zWSxJQUFRVyxhQUFpQmdyQixLQUN6QmhyQixJQUNBLElBQUlnckIsR0FBU3oyQixFQUFRLG1CQUFtQjJzQixLQUNwQzNzQixFQUFRLFVBQ1IsSUFBSTJzQixHQUFXM3NCLEVBQVEsT0FBTyxHQUFHeUwsR0FBT2lyQixHQUFlMTJCLEVBQVEsWUFBWXM0QixFQUFpQjtBQUN0RyxRQUFJO0FBQ0EsaUJBQWE7QUFDVCxZQUFJVSxJQUFRbHVCLEVBQU0sY0FBYyxTQUFTLEtBQUssT0FBTztBQVFyRCxZQVBJLE9BQU9rdUIsS0FBVSxhQUNqQkEsSUFBUSxNQUFNLEtBQUssT0FBTyxjQUFjLFNBQVNBLENBQUssSUFHMURsdUIsRUFBTSxlQUFlQSxFQUFNLGdCQUFnQjtBQUFBLFVBQ3ZDLE1BQU07QUFBQSxRQUNULEdBQ0dBLEVBQU0sYUFBYSxTQUFTLDBCQUEwQjtBQUV0RCxjQURBNEYsRUFBTyxNQUFNLDhCQUE4QixHQUN2QyxDQUFDNUYsRUFBTSxxQkFBcUIsQ0FBQ0EsRUFBTTtBQUNuQyxrQkFBTSxJQUFJSyxFQUFVLDZDQUE2Q0wsQ0FBSztBQUUxRSxnQkFBTW11QixJQUFhLE1BQU03SCxHQUFzQ3RtQixFQUFNLGVBQWVBLEVBQU0sZ0JBQWdCQSxFQUFNLGlCQUFpQkEsRUFBTSxtQkFBbUJBLEVBQU0sd0JBQXdCLE1BQU1BLENBQUs7QUFDbk0sVUFBQUEsRUFBTSxnQkFBZ0IsV0FBV0EsRUFBTSxlQUFlQSxFQUFNLHVCQUF1QixTQUFTLEdBQzVGQSxFQUFNLGlCQUFpQm11QixFQUFXLGVBQ2xDbnVCLEVBQU0sa0JBQWtCbXVCLEVBQVcsZ0JBQ25DbnVCLEVBQU0sZUFBZW11QixFQUFXO0FBQ2hDO0FBQUEsUUFDeEI7QUFDb0IsWUFBSW51QixFQUFNLGFBQWEsU0FBUyx1QkFBdUI7QUFDbkQsZ0JBQU0ra0IsSUFBVy9rQixFQUFNLGNBQWMsU0FBUyxJQUFJa2YsRUFBVTtBQUM1RCxjQUFJLENBQUNsZixFQUFNLG1CQUFtQjtBQUMxQixrQkFBTW91QixJQUFlckosRUFBUyxJQUFJLENBQUN6akIsTUFBTUEsRUFBRSxTQUFTO0FBQ3BELFlBQUF0QixFQUFNLG9CQUFvQnVkLEdBQWdCO0FBQUEsY0FDdEMsTUFBTTtBQUFBLGdCQUNGLE1BQU12ZCxFQUFNLGNBQWM7QUFBQSxnQkFDMUIsVUFBVW91QjtBQUFBLGdCQUNWLGFBQWFwdUIsRUFBTSxjQUFjO0FBQUEsY0FDcEM7QUFBQSxZQUNqQyxDQUE2QixHQUNEQSxFQUFNLGtCQUFrQixNQUFPLEdBQy9Cc1ksR0FBZXRZLEVBQU0saUJBQWlCO0FBQUEsVUFDbEU7QUFDd0IsZ0JBQU1pVyxJQUFRLE1BQU1qVyxFQUFNLGNBQWMsWUFBYSxHQUMvQ3F1QixJQUFrQnBZLEVBQU0sSUFBSSxDQUFDTCxNQUFNNE4sR0FBYzVOLENBQUMsQ0FBQyxHQUNuRDBZLElBQXFCdkosRUFBUyxJQUFJLENBQUN6akIsTUFBTW1pQixHQUFpQm5pQixDQUFDLENBQUM7QUFLbEUsY0FKSXRCLEVBQU0sc0JBQ05BLEVBQU0sa0JBQWtCLFNBQVMsUUFBUWlXLEVBQU0sSUFBSSxDQUFDTCxNQUFNQSxFQUFFLElBQUksSUFFcEU1VixFQUFNLGdCQUNGQSxFQUFNLGVBQWVBLEVBQU07QUFDM0IsbUJBQUFwSCxJQUFBb0gsRUFBTSxzQkFBTixRQUFBcEgsRUFBeUIsU0FBUztBQUFBLGNBQzlCLFNBQVM7QUFBQSxjQUNULE1BQU0sRUFBRSxXQUFXb0gsRUFBTSxVQUFXO0FBQUEsWUFDcEUsSUFDa0MsSUFBSUcsR0FBc0IsY0FBY0gsRUFBTSxTQUFTLGNBQWNBLENBQUs7QUFFcEY0RixVQUFBQSxFQUFPLE1BQU0saUJBQWlCNUYsRUFBTSxjQUFjLElBQUksVUFBVUEsRUFBTSxZQUFZLEdBQUcsR0FDakZBLEVBQU0saUJBQWlCLEtBQ3ZCLE1BQU1pYSxFQUFBLE1BQUs4VCxJQUFBUSxJQUFMLFdBQXlCdnVCO0FBRW5DLGdCQUFNd3VCLElBQVkvTCxHQUFhemlCLEVBQU0sZ0JBQWdCQSxFQUFNLGVBQWU7QUFDMUUsVUFBSUEsRUFBTSxzQkFDTkEsRUFBTSxjQUFjLEtBQUssZUFBZUEsRUFBTSxVQUFVQSxFQUFNLGFBQWEsR0FDM0UsS0FBSyxLQUFLLGVBQWVBLEVBQU0sVUFBVUEsRUFBTSxhQUFhO0FBRWhFLGNBQUlxbUIsSUFBZ0I7QUFBQSxZQUNoQixHQUFHLEtBQUssT0FBTztBQUFBLFlBQ2YsR0FBR3JtQixFQUFNLGNBQWM7QUFBQSxVQUMxQjtBQUNELFVBQUFxbUIsSUFBZ0JGLEdBQXFCbm1CLEVBQU0sZUFBZUEsRUFBTSxpQkFBaUJxbUIsQ0FBYSxHQUM5RnJtQixFQUFNLG9CQUFvQixNQUFNa3VCLEVBQU0sWUFBWTtBQUFBLFlBQzlDLG9CQUFvQixNQUFNbHVCLEVBQU0sY0FBYyxnQkFBZ0JBLEVBQU0sUUFBUTtBQUFBLFlBQzVFLE9BQU93dUI7QUFBQSxZQUNQLG9CQUFvQnQ1QixFQUFRO0FBQUEsWUFDNUIsZUFBQW14QjtBQUFBLFlBQ0EsT0FBT2dJO0FBQUEsWUFDUCxZQUFZcHRCLEdBQXFDakIsRUFBTSxjQUFjLFVBQVU7QUFBQSxZQUMvRSxVQUFVc3VCO0FBQUEsWUFDVixTQUFTYixHQUFXLEtBQUssT0FBTyxpQkFBaUIsS0FBSyxPQUFPLHlCQUF5QjtBQUFBLFlBQ3RGLFFBQVF2NEIsRUFBUTtBQUFBLFVBQzVDLENBQXlCLEdBQ0Q4SyxFQUFNLGdCQUFnQixLQUFLQSxFQUFNLGlCQUFpQixHQUNsREEsRUFBTSxTQUFTLE1BQU0sSUFBSUEsRUFBTSxrQkFBa0IsS0FBSyxHQUN0REEsRUFBTSxvQkFBb0I7QUFDMUIsZ0JBQU15bUIsSUFBb0I1QixHQUFxQjdrQixFQUFNLG1CQUFtQkEsRUFBTSxlQUFlaVcsR0FBTzhPLENBQVE7QUFDNUcsVUFBQS9rQixFQUFNLHlCQUF5QnltQjtBQUMvQixnQkFBTTBILElBQWEsTUFBTTdHLEdBQTJCdG5CLEVBQU0sZUFBZUEsRUFBTSxnQkFBZ0JBLEVBQU0saUJBQWlCQSxFQUFNLG1CQUFtQkEsRUFBTSx3QkFBd0IsTUFBTUEsQ0FBSztBQUN4TCxVQUFBQSxFQUFNLGdCQUFnQixXQUFXQSxFQUFNLGVBQWVBLEVBQU0sdUJBQXVCLFNBQVMsR0FDNUZBLEVBQU0saUJBQWlCbXVCLEVBQVcsZUFDbENudUIsRUFBTSxrQkFBa0JtdUIsRUFBVyxnQkFDbkNudUIsRUFBTSxlQUFlbXVCLEVBQVc7QUFBQSxRQUN4RDtBQUNvQixZQUFJbnVCLEVBQU0sZ0JBQ05BLEVBQU0sYUFBYSxTQUFTO0FBQzVCLHVCQUFNaWEsRUFBQSxNQUFLOFQsSUFBQVUsSUFBTCxXQUEwQnp1QixHQUFPQSxFQUFNLGFBQWEsU0FDMUQsS0FBSyxLQUFLLGFBQWFBLEVBQU0sVUFBVUEsRUFBTSxlQUFlQSxFQUFNLGFBQWEsTUFBTSxHQUNyRkEsRUFBTSxjQUFjLEtBQUssYUFBYUEsRUFBTSxVQUFVQSxFQUFNLGFBQWEsTUFBTSxHQUN4RSxJQUFJMmlCLEdBQVUzaUIsQ0FBSztBQUV6QixZQUFJQSxFQUFNLGdCQUNYQSxFQUFNLGFBQWEsU0FBUztBQUM1QixVQUFBQSxFQUFNLGdCQUFnQkEsRUFBTSxhQUFhLFVBQ3JDQSxFQUFNLHNCQUNOQSxFQUFNLGtCQUFrQixJQUFLLEdBQzdCdVksR0FBa0IsR0FDbEJ2WSxFQUFNLG9CQUFvQixTQUU5QkEsRUFBTSxvQkFBb0IsSUFFMUJBLEVBQU0sZUFBZSxFQUFFLE1BQU0sc0JBQXVCO0FBQUEsYUFFbkQ7QUFBQSxjQUFJQSxFQUFNLGdCQUNYQSxFQUFNLGFBQWEsU0FBUztBQUU1QixtQkFBTyxJQUFJMmlCLEdBQVUzaUIsQ0FBSztBQUcxQjRGLFVBQUFBLEVBQU8sTUFBTSxtQkFBbUI7QUFBQTtBQUFBLE1BRXhEO0FBQUEsSUFDQSxTQUNtQjRELEdBQUs7QUFDUixZQUFJeEosRUFBTSxxQkFDTkEsRUFBTSxrQkFBa0IsU0FBUztBQUFBLFFBQzdCLFNBQVM7QUFBQSxRQUNULE1BQU0sRUFBRSxPQUFPLE9BQU93SixDQUFHLEVBQUc7QUFBQSxNQUNwRCxDQUFxQixHQUVDQTtBQUFBLElBQ3RCLFVBQ29CO0FBQ0osTUFBSXhKLEVBQU0sd0JBQ0ZySCxJQUFBcUgsRUFBTSxpQkFBTixnQkFBQXJILEVBQW9CLFVBQVMsNEJBRTdCcUgsRUFBTSxrQkFBa0IsSUFBSyxHQUVqQ3VZLEdBQWtCO0FBQUEsSUFFdEM7QUFBQSxFQUNBLENBQVM7QUFDVCxHQUNVZ1csS0FBbUIsZUFBQ3Z1QixHQUFPO0FBQzdCLFFBQU0wdUIsSUFBYSxLQUFLLG1CQUFtQixPQUFPMXVCLEVBQU0sY0FBYyxnQkFBZ0IsSUFBSW9lLEVBQW9CLENBQUM7QUFDL0csTUFBSXNRLEVBQVcsU0FBUyxHQUFHO0FBQ3ZCLFVBQU1DLElBQWdCO0FBQUEsTUFDbEIsT0FBTzN1QixFQUFNO0FBQUEsTUFDYixPQUFPQSxFQUFNO0FBQUEsTUFDYixTQUFTQSxFQUFNO0FBQUEsSUFDbEI7QUFDRCxRQUFJO0FBQ0EsWUFBTWtJLElBQVUsTUFBTSxRQUFRLElBQUl3bUIsRUFBVyxJQUFJLE9BQU9FLE1BQzdDL1EsR0FBa0IsT0FBTzlILE1BQVM7QUFDckMsY0FBTTVZLElBQVMsTUFBTXl4QixFQUFVLElBQUlELENBQWE7QUFDaEQsZUFBQTVZLEVBQUssU0FBUyxZQUFZNVksRUFBTyxPQUFPLG1CQUNqQ0E7QUFBQSxNQUMvQixHQUF1QixFQUFFLE1BQU0sRUFBRSxNQUFNeXhCLEVBQVUsT0FBUSxHQUFFNXVCLEVBQU0saUJBQWlCLENBQ2pFLENBQUM7QUFDRixpQkFBVzdDLEtBQVUrSztBQUNqQixZQUFJL0ssRUFBTyxPQUFPO0FBQ2QsZ0JBQUk2QyxFQUFNLHFCQUNOQSxFQUFNLGtCQUFrQixTQUFTO0FBQUEsWUFDN0IsU0FBUztBQUFBLFlBQ1QsTUFBTSxFQUFFLFdBQVc3QyxFQUFPLFVBQVUsS0FBTTtBQUFBLFVBQzFFLENBQTZCLEdBRUMsSUFBSXFELEdBQWdDLDhCQUE4QixLQUFLLFVBQVVyRCxFQUFPLE9BQU8sVUFBVSxDQUFDLElBQUlBLEdBQVE2QyxDQUFLO0FBQUEsSUFHekosU0FDbUJuSixHQUFHO0FBQ04sWUFBSUEsYUFBYTJKLEtBQ1AzSixLQUdWbUosRUFBTSxnQkFDQSxJQUFJTSxHQUF3Qix1Q0FBdUN6SixDQUFDLElBQUlBLEdBQUdtSixDQUFLO0FBQUEsSUFDdEc7QUFBQSxFQUNBO0FBQ0EsR0FDVXl1QixLQUFvQixlQUFDenVCLEdBQU9tQixHQUFRO0FBQ3RDLFFBQU11dEIsSUFBYSxLQUFLLG9CQUFvQixPQUFPMXVCLEVBQU0sY0FBYyxpQkFBaUIsSUFBSXNlLEVBQXFCLENBQUM7QUFDbEgsTUFBSW9RLEVBQVcsU0FBUyxHQUFHO0FBQ3ZCLFVBQU1HLElBQWM3dUIsRUFBTSxjQUFjLG1CQUFtQm1CLENBQU0sR0FDM0R3dEIsSUFBZ0I7QUFBQSxNQUNsQixPQUFPM3VCLEVBQU07QUFBQSxNQUNiLGFBQUE2dUI7QUFBQSxNQUNBLFNBQVM3dUIsRUFBTTtBQUFBLElBQ2xCO0FBQ0QsUUFBSTtBQUNBLFlBQU1rSSxJQUFVLE1BQU0sUUFBUSxJQUFJd21CLEVBQVcsSUFBSSxPQUFPRSxNQUM3Qy9RLEdBQWtCLE9BQU85SCxNQUFTO0FBQ3JDLGNBQU01WSxJQUFTLE1BQU15eEIsRUFBVSxJQUFJRCxDQUFhO0FBQ2hELGVBQUE1WSxFQUFLLFNBQVMsWUFBWTVZLEVBQU8sT0FBTyxtQkFDakNBO0FBQUEsTUFDL0IsR0FBdUIsRUFBRSxNQUFNLEVBQUUsTUFBTXl4QixFQUFVLE9BQVEsR0FBRTV1QixFQUFNLGlCQUFpQixDQUNqRSxDQUFDO0FBQ0YsaUJBQVc3QyxLQUFVK0s7QUFDakIsWUFBSS9LLEVBQU8sT0FBTztBQUNkLGdCQUFJNkMsRUFBTSxxQkFDTkEsRUFBTSxrQkFBa0IsU0FBUztBQUFBLFlBQzdCLFNBQVM7QUFBQSxZQUNULE1BQU0sRUFBRSxXQUFXN0MsRUFBTyxVQUFVLEtBQU07QUFBQSxVQUMxRSxDQUE2QixHQUVDLElBQUlzRCxHQUFpQywrQkFBK0IsS0FBSyxVQUFVdEQsRUFBTyxPQUFPLFVBQVUsQ0FBQyxJQUFJQSxHQUFRNkMsQ0FBSztBQUFBLElBRzNKLFNBQ21CbkosR0FBRztBQUNOLFlBQUlBLGFBQWE0SixLQUNQNUosSUFFSixJQUFJeUosR0FBd0Isd0NBQXdDekosQ0FBQyxJQUFJQSxHQUFHbUosQ0FBSztBQUFBLElBQ3ZHO0FBQUEsRUFDQTtBQUNBLEdBSVU4dUIsS0FBYyxlQUFDM3hCLEdBQVFqSSxHQUFTOztBQUNsQyxNQUFJO0FBQ0EsZUFBYTtBQUNULFlBQU1tM0IsSUFBZWx2QixFQUFPLE1BQU0sZUFDNUI0bkIsSUFBV3NILEVBQWEsU0FBUyxJQUFJbk4sRUFBVSxHQUMvQ2pKLElBQVEsTUFBTW9XLEVBQWEsWUFBYSxHQUN4Q2dDLElBQWtCcFksRUFBTSxJQUFJLENBQUNMLE1BQU00TixHQUFjNU4sQ0FBQyxDQUFDLEdBQ25EMFksSUFBcUJ2SixFQUFTLElBQUksQ0FBQ3pqQixNQUFNbWlCLEdBQWlCbmlCLENBQUMsQ0FBQztBQUlsRSxVQUhBbkUsRUFBTyxNQUFNLGVBQWVBLEVBQU8sTUFBTSxnQkFBZ0I7QUFBQSxRQUNyRCxNQUFNO0FBQUEsTUFDVCxHQUNHQSxFQUFPLE1BQU0sYUFBYSxTQUFTLDBCQUEwQjtBQUU3RCxZQURBeUksRUFBTyxNQUFNLDhCQUE4QixHQUN2QyxDQUFDekksRUFBTyxNQUFNLHFCQUNkLENBQUNBLEVBQU8sTUFBTTtBQUNkLGdCQUFNLElBQUlrRCxFQUFVLDZDQUE2Q2xELEVBQU8sS0FBSztBQUVqRixjQUFNZ3hCLElBQWEsTUFBTTdILEdBQXNDbnBCLEVBQU8sTUFBTSxlQUFlQSxFQUFPLE1BQU0sZ0JBQWdCQSxFQUFPLE1BQU0saUJBQWlCQSxFQUFPLE1BQU0sbUJBQW1CQSxFQUFPLE1BQU0sd0JBQXdCLE1BQU1BLEVBQU8sS0FBSztBQUM3TyxRQUFBMnNCLEdBQW1CM3NCLEdBQVFneEIsQ0FBVSxHQUNyQ2h4QixFQUFPLE1BQU0sZ0JBQWdCLFdBQVdBLEVBQU8sTUFBTSxlQUFlQSxFQUFPLE1BQU0sdUJBQXVCLFNBQVMsR0FDakhBLEVBQU8sTUFBTSxpQkFBaUJneEIsRUFBVyxlQUN6Q2h4QixFQUFPLE1BQU0sa0JBQWtCZ3hCLEVBQVcsZ0JBQzFDaHhCLEVBQU8sTUFBTSxlQUFlZ3hCLEVBQVc7QUFDdkM7QUFBQSxNQUNwQjtBQUNnQixVQUFJaHhCLEVBQU8sTUFBTSxhQUFhLFNBQVMsdUJBQXVCO0FBQzFELFlBQUksQ0FBQ0EsRUFBTyxNQUFNLG1CQUFtQjtBQUNqQyxnQkFBTWl4QixJQUFlckosRUFBUyxJQUFJLENBQUN6akIsTUFBTUEsRUFBRSxTQUFTO0FBQ3BELFVBQUFuRSxFQUFPLE1BQU0sb0JBQW9Cb2dCLEdBQWdCO0FBQUEsWUFDN0MsTUFBTTtBQUFBLGNBQ0YsTUFBTThPLEVBQWE7QUFBQSxjQUNuQixVQUFVK0I7QUFBQSxjQUNWLE9BQU9uWSxFQUFNLElBQUksQ0FBQ0wsTUFBTUEsRUFBRSxJQUFJO0FBQUEsY0FDOUIsYUFBYXlXLEVBQWE7QUFBQSxZQUM3QjtBQUFBLFVBQzdCLENBQXlCLEdBQ0RsdkIsRUFBTyxNQUFNLGtCQUFrQixNQUFPLEdBQ3RDbWIsR0FBZW5iLEVBQU8sTUFBTSxpQkFBaUI7QUFBQSxRQUNyRTtBQUVvQixZQURBQSxFQUFPLE1BQU0sZ0JBQ1RBLEVBQU8sTUFBTSxlQUFlQSxFQUFPLE1BQU07QUFDekMsaUJBQUF2RSxJQUFBdUUsRUFBTyxNQUFNLHNCQUFiLFFBQUF2RSxFQUFnQyxTQUFTO0FBQUEsWUFDckMsU0FBUztBQUFBLFlBQ1QsTUFBTSxFQUFFLFdBQVd1RSxFQUFPLE1BQU0sVUFBVztBQUFBLFVBQ3ZFLElBQzhCLElBQUlnRCxHQUFzQixjQUFjaEQsRUFBTyxNQUFNLFNBQVMsY0FBY0EsRUFBTyxLQUFLO0FBRWxHeUksUUFBQUEsRUFBTyxNQUFNLGlCQUFpQnltQixFQUFhLElBQUksVUFBVWx2QixFQUFPLE1BQU0sWUFBWSxHQUFHO0FBQ3JGLFlBQUkrd0IsSUFBUTdCLEVBQWEsU0FBUyxLQUFLLE9BQU87QUFDOUMsUUFBSSxPQUFPNkIsS0FBVSxhQUNqQkEsSUFBUSxNQUFNLEtBQUssT0FBTyxjQUFjLFNBQVNBLENBQUssSUFFdEQvd0IsRUFBTyxNQUFNLGlCQUFpQixLQUM5QixNQUFNOGMsRUFBQSxNQUFLOFQsSUFBQVEsSUFBTCxXQUF5QnB4QixFQUFPO0FBRTFDLFlBQUlrcEIsSUFBZ0I7QUFBQSxVQUNoQixHQUFHLEtBQUssT0FBTztBQUFBLFVBQ2YsR0FBR2dHLEVBQWE7QUFBQSxRQUNuQjtBQUNELFFBQUFoRyxJQUFnQkYsR0FBcUJrRyxHQUFjbHZCLEVBQU8sTUFBTSxpQkFBaUJrcEIsQ0FBYTtBQUM5RixjQUFNbUksSUFBWS9MLEdBQWF0bEIsRUFBTyxPQUFPQSxFQUFPLFFBQVE7QUFDNUQsUUFBSUEsRUFBTyxNQUFNLHNCQUNia3ZCLEVBQWEsS0FBSyxlQUFlbHZCLEVBQU8sTUFBTSxVQUFVa3ZCLENBQVksR0FDcEUsS0FBSyxLQUFLLGVBQWVsdkIsRUFBTyxNQUFNLFVBQVVrdkIsQ0FBWTtBQUVoRSxZQUFJMEM7QUFDSix5QkFBaUIvNkIsS0FBU2s2QixFQUFNLG9CQUFvQjtBQUFBLFVBQ2hELG9CQUFvQixNQUFNN0IsRUFBYSxnQkFBZ0JsdkIsRUFBTyxNQUFNLFFBQVE7QUFBQSxVQUM1RSxPQUFPcXhCO0FBQUEsVUFDUCxvQkFBb0J0NUIsRUFBUTtBQUFBLFVBQzVCLGVBQUFteEI7QUFBQSxVQUNBLE9BQU9nSTtBQUFBLFVBQ1AsVUFBVUM7QUFBQSxVQUNWLFlBQVlydEIsR0FBcUNvckIsRUFBYSxVQUFVO0FBQUEsVUFDeEUsU0FBU29CLEdBQVcsS0FBSyxPQUFPLGlCQUFpQixLQUFLLE9BQU8seUJBQXlCO0FBQUEsVUFDdEYsUUFBUXY0QixFQUFRO0FBQUEsUUFDeEMsQ0FBcUIsR0FBRztBQUNBLGNBQUlsQixFQUFNLFNBQVMsaUJBQWlCO0FBQ2hDLGtCQUFNcVMsSUFBU29iLEdBQTZCLE1BQU16dEIsQ0FBSztBQUN2RCxZQUFBKzZCLElBQWdCO0FBQUEsY0FDWixPQUFPLElBQUlwTixHQUFNdGIsRUFBTyxTQUFTLEtBQUs7QUFBQSxjQUN0QyxRQUFRQSxFQUFPLFNBQVM7QUFBQSxjQUN4QixZQUFZQSxFQUFPLFNBQVM7QUFBQSxZQUMvQjtBQUFBLFVBQzdCO0FBQ3dCLGNBQUlsSixFQUFPO0FBR1A7QUFFSixVQUFBQSxFQUFPLFNBQVMsSUFBSXVuQixHQUF1QjF3QixDQUFLLENBQUM7QUFBQSxRQUN6RTtBQUVvQixZQURBbUosRUFBTyxNQUFNLG9CQUFvQixJQUM3QixDQUFDNHhCO0FBQ0QsZ0JBQU0sSUFBSTN1QixHQUFtQiwyQ0FBMkNqRCxFQUFPLEtBQUs7QUFFeEYsUUFBQUEsRUFBTyxNQUFNLG9CQUFvQjR4QixHQUNqQzV4QixFQUFPLE1BQU0sZ0JBQWdCLEtBQUtBLEVBQU8sTUFBTSxpQkFBaUI7QUFDaEUsY0FBTXNwQixJQUFvQjVCLEdBQXFCMW5CLEVBQU8sTUFBTSxtQkFBbUJrdkIsR0FBY3BXLEdBQU84TyxDQUFRO0FBQzVHLFFBQUE1bkIsRUFBTyxNQUFNLHlCQUF5QnNwQjtBQUN0QyxjQUFNMEgsSUFBYSxNQUFNN0csR0FBMkIrRSxHQUFjbHZCLEVBQU8sTUFBTSxnQkFBZ0JBLEVBQU8sTUFBTSxpQkFBaUJBLEVBQU8sTUFBTSxtQkFBbUJBLEVBQU8sTUFBTSx3QkFBd0IsTUFBTUEsRUFBTyxLQUFLO0FBQ3BOLFFBQUEyc0IsR0FBbUIzc0IsR0FBUWd4QixDQUFVLEdBQ3JDaHhCLEVBQU8sTUFBTSxnQkFBZ0IsV0FBV2t2QixHQUFjNUYsRUFBa0IsU0FBUyxHQUNqRnRwQixFQUFPLE1BQU0saUJBQWlCZ3hCLEVBQVcsZUFDekNoeEIsRUFBTyxNQUFNLGtCQUFrQmd4QixFQUFXLGdCQUMxQ2h4QixFQUFPLE1BQU0sZUFBZWd4QixFQUFXO0FBQUEsTUFDM0Q7QUFDZ0IsVUFBSWh4QixFQUFPLE1BQU0sYUFBYSxTQUFTLDBCQUEwQjtBQUM3RCxjQUFNOGMsRUFBQSxNQUFLOFQsSUFBQVUsSUFBTCxXQUEwQnR4QixFQUFPLE9BQU9BLEVBQU8sTUFBTSxhQUFhO0FBQ3hFO0FBQUEsTUFDcEIsT0FDcUI7QUFBQSxZQUFJQSxFQUFPLE1BQU0sYUFBYSxTQUFTO0FBRXhDO0FBRUMsUUFBSUEsRUFBTyxNQUFNLGFBQWEsU0FBUyx1QkFDeENBLEVBQU8sTUFBTSxpQkFBZ0J4RSxJQUFBd0UsRUFBTyxNQUFNLGlCQUFiLGdCQUFBeEUsRUFDdkIsVUFDRndFLEVBQU8sTUFBTSxzQkFDYkEsRUFBTyxNQUFNLGtCQUFrQixJQUFLLEdBQ3BDb2IsR0FBa0IsSUFFdEJwYixFQUFPLE1BQU0sb0JBQW9CLFFBQ2pDQSxFQUFPLFNBQVMsSUFBSXluQixHQUEyQnlILENBQVksQ0FBQyxHQUM1RGx2QixFQUFPLE1BQU0sb0JBQW9CLElBRWpDQSxFQUFPLE1BQU0sZUFBZTtBQUFBLFVBQ3hCLE1BQU07QUFBQSxRQUNULEtBR0R5SSxFQUFPLE1BQU0sbUJBQW1CO0FBQUE7QUFBQSxJQUVwRDtBQUFBLEVBQ0EsU0FDZWxSLEdBQU87QUFDVixVQUFJeUksRUFBTyxNQUFNLHFCQUNiQSxFQUFPLE1BQU0sa0JBQWtCLFNBQVM7QUFBQSxNQUNwQyxTQUFTO0FBQUEsTUFDVCxNQUFNLEVBQUUsT0FBTyxPQUFPekksQ0FBSyxFQUFHO0FBQUEsSUFDbEQsQ0FBaUIsR0FFQ0E7QUFBQSxFQUNsQixVQUNnQjtBQUNKLElBQUl5SSxFQUFPLE1BQU0sd0JBQ1R0QixJQUFBc0IsRUFBTyxNQUFNLGlCQUFiLGdCQUFBdEIsRUFBMkIsVUFBUyw0QkFDcENzQixFQUFPLE1BQU0sa0JBQWtCLElBQUssR0FFeENvYixHQUFrQjtBQUFBLEVBRWxDO0FBQ0EsR0FJVXlWLEtBQW9CLGVBQUN4UCxHQUFPN2QsR0FBT3pMLEdBQVM7QUFDOUMsU0FBQUEsSUFBVUEsS0FBVyxDQUFFLEdBQ2hCeWpCLEdBQW1CLFlBQVk7QUFFbEMsVUFBTTNZLElBQVFXLGFBQWlCZ3JCLEtBQ3pCaHJCLElBQ0EsSUFBSWdyQixHQUFTejJCLEVBQVEsbUJBQW1CMnNCLEtBQ3BDM3NCLEVBQVEsVUFDUixJQUFJMnNCLEdBQVczc0IsRUFBUSxPQUFPLEdBQUd5TCxHQUFPNmQsR0FBT3RwQixFQUFRLFlBQVlzNEIsRUFBaUIsR0FFeEZyd0IsSUFBUyxJQUFJeWxCLEdBQWtCO0FBQUEsTUFDakMsUUFBUTF0QixFQUFRO0FBQUEsTUFDaEIsT0FBQThLO0FBQUEsSUFDaEIsQ0FBYTtBQUVELFdBQUE3QyxFQUFPLFdBQVdqSSxFQUFRLFlBQVk4SyxFQUFNLFdBRTVDaWEsRUFBQSxNQUFLOFQsSUFBQWUsSUFBTCxXQUFvQjN4QixHQUFRakksR0FBUyxLQUFLLE1BQU07QUFDNUMsTUFBQWlJLEVBQU8sTUFBTztBQUFBLElBQ2pCLEdBQUUsQ0FBQ3FNLE1BQVE7QUFDUixNQUFBck0sRUFBTyxZQUFZcU0sQ0FBRztBQUFBLElBQ3RDLENBQWEsR0FDTXJNO0FBQUEsRUFDbkIsQ0FBUztBQUNUO0FDL2JPLE1BQU0wdkIsV0FBYzVPLEdBQVc7QUFBQSxFQXlCbEMsWUFBWWEsR0FBUTtBQUNoQixVQUFPO0FBZFgsSUFBQTdlLEVBQUE7QUFDQSxJQUFBQSxFQUFBO0FBQ0EsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBO0FBQ0EsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBO0FBQ0EsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFDQSxJQUFBQSxFQUFBLG9CQUFhO0FBQ2IsSUFBQUEsRUFBQTtBQUNBLElBQUFBLEVBQUE7QUFHUSxlQUFPNmUsRUFBTyxRQUFTLFlBQVlBLEVBQU8sS0FBSyxLQUFNLE1BQUs7QUFDMUQsWUFBTSxJQUFJemUsRUFBVSx5QkFBeUI7QUFrQmpELFFBaEJBLEtBQUssT0FBT3llLEVBQU8sTUFDbkIsS0FBSyxlQUFlQSxFQUFPLGdCQUFnQixJQUMzQyxLQUFLLHFCQUFxQkEsRUFBTyxzQkFBc0IsSUFDdkQsS0FBSyxXQUFXQSxFQUFPLFlBQVksQ0FBRSxHQUNyQyxLQUFLLFFBQVFBLEVBQU8sU0FBUyxJQUM3QixLQUFLLGdCQUFnQkEsRUFBTyxpQkFBaUIsQ0FBRSxHQUMvQyxLQUFLLFFBQVFBLEVBQU8sU0FBUyxDQUFFLEdBQy9CLEtBQUssYUFBYUEsRUFBTyxjQUFjLENBQUUsR0FDekMsS0FBSyxrQkFBa0JBLEVBQU8sbUJBQW1CLENBQUUsR0FDbkQsS0FBSyxtQkFBbUJBLEVBQU8sb0JBQW9CLENBQUUsR0FDakRBLEVBQU8sZUFDUCxLQUFLLGFBQWFBLEVBQU8sYUFFN0IsS0FBSyxrQkFBa0JBLEVBQU8sbUJBQW1CLGlCQUNqRCxLQUFLLGtCQUFrQkEsRUFBTyxtQkFBbUIsS0FFN0NBLEVBQU8sb0NBQW9DLFVBQzNDQSxFQUFPLG9DQUNILEtBQUssWUFBWSxLQUFLLFlBQVk7QUFDbEMsWUFBTWtRLElBQWMsb0JBQUksSUFBSSxDQUFDLEtBQUssVUFBVSxLQUFLLFVBQVUsQ0FBQyxDQUFDO0FBQzdELGlCQUFXMXRCLEtBQUssS0FBSztBQUNqQixRQUFJLGdCQUFnQkEsS0FBS0EsRUFBRSxhQUN2QjB0QixFQUFZLElBQUksS0FBSyxVQUFVMXRCLEVBQUUsVUFBVSxDQUFDLElBRXZDLFdBQVdBLEtBQUtBLEVBQUUsTUFBTSxjQUM3QjB0QixFQUFZLElBQUksS0FBSyxVQUFVMXRCLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFHMUQsTUFBSTB0QixFQUFZLE9BQU8sS0FDbkJwcEIsRUFBTyxLQUFLLGdFQUFnRSxNQUFNLEtBQUtvcEIsQ0FBVyxFQUFFLEtBQUssSUFBSSxDQUFDLDRFQUE0RTtBQUFBLElBRTlNO0FBQUEsRUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBM0RJLE9BQU8sT0FBT2xRLEdBQVE7QUFDbEIsV0FBTyxJQUFJK04sR0FBTTtBQUFBLE1BQ2IsR0FBRy9OO0FBQUEsTUFDSCxVQUFVQSxFQUFPO0FBQUEsTUFDakIsWUFBWUEsRUFBTztBQUFBLE1BQ25CLGlDQUFpQztBQUFBLElBQzdDLENBQVM7QUFBQSxFQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUF3REksSUFBSSxtQkFBbUI7QUFDbkIsUUFBSSxLQUFLLGVBQWU7QUFDcEIsYUFBTztBQUVOLFFBQUlwZSxHQUFZLEtBQUssVUFBVTtBQUNoQyxhQUFPO0FBRU4sUUFBSSxPQUFPLEtBQUssY0FBZTtBQUNoQyxhQUFPLEtBQUssV0FBVztBQUUzQixVQUFNLElBQUksTUFBTSx3QkFBd0IsS0FBSyxVQUFVLEVBQUU7QUFBQSxFQUNqRTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFXSSxNQUFNb2UsR0FBUTtBQUNWLFdBQU8sSUFBSStOLEdBQU07QUFBQSxNQUNiLEdBQUc7QUFBQSxNQUNILEdBQUcvTjtBQUFBLElBQ2YsQ0FBUztBQUFBLEVBQ1Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQWFJLE9BQU81cEIsR0FBUztBQUNaLFVBQU0sRUFBRSxVQUFBOHNCLEdBQVUsaUJBQUFpTixHQUFpQix1QkFBQUMsRUFBdUIsSUFBR2g2QjtBQUM3RCxXQUFPb0ssR0FBSztBQUFBLE1BQ1IsTUFBTTBpQixLQUFZbmhCLEdBQW1CLEtBQUssSUFBSTtBQUFBLE1BQzlDLGFBQWFvdUIsS0FBbUI7QUFBQSxNQUNoQyxZQUFZO0FBQUEsUUFDUixNQUFNO0FBQUEsUUFDTixZQUFZO0FBQUEsVUFDUixPQUFPO0FBQUEsWUFDSCxNQUFNO0FBQUEsVUFDVDtBQUFBLFFBQ0o7QUFBQSxRQUNELFVBQVUsQ0FBQyxPQUFPO0FBQUEsUUFDbEIsc0JBQXNCO0FBQUEsTUFDekI7QUFBQSxNQUNELFFBQVE7QUFBQSxNQUNSLFNBQVMsT0FBT3BvQixHQUFNZCxNQUFZO0FBQzlCLFlBQUksQ0FBQ25GLEdBQWlCaUcsQ0FBSTtBQUN0QixnQkFBTSxJQUFJekcsR0FBbUIsc0NBQXNDO0FBR3ZFLGNBQU1qRCxJQUFTLE1BREEsSUFBSTJ3QixHQUFRLEVBQ0MsSUFBSSxNQUFNam5CLEVBQUssT0FBTztBQUFBLFVBQzlDLFNBQVNkLEtBQUEsZ0JBQUFBLEVBQVM7QUFBQSxRQUN0QyxDQUFpQjtBQUNELGVBQUksT0FBT21wQixLQUEwQixhQUMxQkEsRUFBc0IveEIsQ0FBTSxJQUVoQ3NuQixHQUFjdG5CLEVBQU8sYUFBYUEsRUFBTyxhQUFhLFNBQVMsQ0FBQyxDQUFDO0FBQUEsTUFDM0U7QUFBQSxJQUNiLENBQVM7QUFBQSxFQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPSSxNQUFNLGdCQUFnQmlKLEdBQVk7QUFDOUIsV0FBSSxPQUFPLEtBQUssZ0JBQWlCLGFBQ3RCLE1BQU0sS0FBSyxhQUFhQSxHQUFZLElBQUksSUFFNUMsS0FBSztBQUFBLEVBQ3BCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtJLE1BQU0sY0FBYztBQUNoQixXQUFJLEtBQUssV0FBVyxTQUFTLElBQ2xCK1AsR0FBZSxLQUFLLFVBQVUsSUFFbEMsQ0FBRTtBQUFBLEVBQ2pCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUksTUFBTSxjQUFjO0FBQ2hCLFdBQU8sQ0FBQyxHQUFJLE1BQU0sS0FBSyxZQUFhLEdBQUcsR0FBRyxLQUFLLEtBQUs7QUFBQSxFQUM1RDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0ksbUJBQW1CaFYsR0FBUTtBQUN2QixRQUFJLEtBQUssZUFBZTtBQUNwQixhQUFPQTtBQUVYLFFBQUksT0FBTyxLQUFLLGNBQWUsVUFBVTtBQUNyQyxZQUFNa0YsSUFBUyxLQUFLLE1BQU1sRixDQUFNO0FBQ2hDLGFBQUlULEdBQVksS0FBSyxVQUFVLElBQ3BCLEtBQUssV0FBVyxNQUFNMkYsQ0FBTSxJQUVoQ0E7QUFBQSxJQUNuQjtBQUNRLFVBQU0sSUFBSSxNQUFNLHdCQUF3QixLQUFLLFVBQVUsRUFBRTtBQUFBLEVBQ2pFO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUksU0FBUztBQUNMLFdBQU87QUFBQSxNQUNILE1BQU0sS0FBSztBQUFBLElBQ2Q7QUFBQSxFQUNUO0FBQ0E7QUM1TEEwWCxHQUFrQjdDLEdBQWdCLENBQUU7QUNKN0IsTUFBTWlVLFdBQXNCdEMsR0FBTTtBQUFBLEVBTXJDLFlBQVkvTixHQUFRO0FBQ2hCLFVBQU1BLENBQU07QUFGaEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBN2UsRUFBQTtBQUdJLFNBQUssUUFBUTZlLEVBQU8sU0FBUztBQUFBLEVBQ3JDO0FBQ0E7QUNsQ08sU0FBU3NRLEdBQTZCQyxHQUFVO0FBQ25ELFNBQU87QUFBQSxJQUNILG9CQUFvQkEsRUFBUyxzQkFBc0I7QUFBQSxFQUN0RDtBQUNMO0FBQ08sU0FBU0MsR0FBOEIsRUFBRSxZQUFZQyxHQUFpQixHQUFHcjZCLEVBQU8sR0FBSTtBQUN2RixRQUFNczZCLElBQWdCbFIsR0FBc0JwcEIsQ0FBTyxHQUM3Q3U2QixJQUFhRixLQUFtQkMsRUFBYztBQUNwRCxTQUFPO0FBQUEsSUFDSCxHQUFHQTtBQUFBLElBQ0gsWUFBQUM7QUFBQSxJQUNBLEtBQUssT0FBTzN2QixNQUFTO0FBQ2pCLFlBQU0zQyxJQUFTLE1BQU1xeUIsRUFBYyxJQUFJMXZCLENBQUk7QUFDM0MsYUFBTztBQUFBLFFBQ0gsR0FBRzNDO0FBQUEsUUFDSCxXQUFXLEVBQUUsR0FBR0EsRUFBTyxXQUFXLFlBQUFzeUIsRUFBWTtBQUFBLE1BQ2pEO0FBQUEsSUFDSjtBQUFBLEVBQ0o7QUFDTDtBQUtPLFNBQVNDLEdBQW9DdnlCLEdBQVE7QUFDeEQsU0FBTztBQUFBO0FBQUEsMkJBRWdCQSxFQUFPLFVBQVUsVUFBVTtBQUFBLG1CQUNuQyxLQUFLLFVBQVVBLEVBQU8sT0FBTyxjQUFjLENBQUEsQ0FBRSxDQUFDO0FBQUE7QUFBQSxFQUUvRCxLQUFNO0FBQ1I7QUMvQkEsTUFBTXlJLEtBQVNELEdBQVUsd0JBQXdCO0FDQW5CaVAsRUFBUztBQUFBLEVBQ25DLFFBQVFDLEVBQVU7QUFDdEIsQ0FBQztBQUNNLE1BQU04YSxLQUE0QnpQLEdBQXFCLFFBQVE7QUFBQSxFQUNsRXRMLEVBQVM7QUFBQSxJQUNMLFFBQVFDLEVBQVU7QUFBQSxJQUNsQixnQkFBZ0JBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBVTtBQUFBLElBQ2hELE1BQU1DLEVBQVUsU0FBUztBQUFBLElBQ3pCLE1BQU1BLEVBQVUsUUFBUTtBQUFBLElBQ3hCLFNBQVNHLEVBQVFMLEVBQVMsRUFBRSxNQUFNRSxFQUFVLFlBQVksR0FBRyxNQUFNRCxFQUFVLEVBQUEsQ0FBRSxDQUFDO0FBQUEsRUFDdEYsQ0FBSztBQUFBLEVBQ0RELEVBQVM7QUFBQSxJQUNMLFFBQVFDLEVBQVU7QUFBQSxJQUNsQixnQkFBZ0JBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBVTtBQUFBLElBQ2hELE1BQU1DLEVBQVUsU0FBUztBQUFBLElBQ3pCLE1BQU1BLEVBQVUsTUFBTTtBQUFBLElBQ3RCLFFBQVFzTCxHQUFPLENBQUMsZUFBZSxXQUFXLENBQUM7QUFBQSxJQUMzQyxTQUFTbkwsRUFBUUwsRUFBUyxFQUFFLE1BQU1FLEVBQVUsWUFBWSxHQUFHLE1BQU1ELEVBQVUsRUFBQSxDQUFFLEVBQUUsR0FBR0QsRUFBUztBQUFBLE1BQ3ZGLE1BQU1FLEVBQVUsYUFBYTtBQUFBLE1BQzdCLE9BQU9ELEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBVTtBQUFBLE1BQ3ZDLFlBQVlBLEVBQVUsRUFBQyxTQUFVO0FBQUEsSUFDcEMsQ0FBQSxDQUFDLENBQUM7QUFBQSxFQUNYLENBQUs7QUFBQSxFQUNERCxFQUFTO0FBQUEsSUFDTCxRQUFRQyxFQUFVO0FBQUEsSUFDbEIsZ0JBQWdCQSxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVU7QUFBQSxJQUNoRCxNQUFNQyxFQUFVLFNBQVM7QUFBQSxJQUN6QixNQUFNQSxFQUFVLFdBQVc7QUFBQSxJQUMzQixRQUFRc0wsR0FBTyxDQUFDLGVBQWUsYUFBYSxZQUFZLENBQUM7QUFBQSxJQUN6RCxTQUFTbkwsRUFBUUwsRUFBUyxFQUFFLE1BQU1FLEVBQVUsTUFBTSxHQUFHLE1BQU1ELEVBQVUsRUFBQSxDQUFFLEVBQUUsR0FBR0QsRUFBUztBQUFBLE1BQ2pGLE1BQU1FLEVBQVUsT0FBTztBQUFBLE1BQ3ZCLE9BQU9ELEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBVTtBQUFBLE1BQ3ZDLFlBQVlBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBVTtBQUFBLElBQy9DLENBQUEsQ0FBQyxDQUFDO0FBQUEsRUFDWCxDQUFLO0FBQ0wsQ0FBQyxHQUNZK2EsS0FBdUJoYixFQUFTO0FBQUEsRUFDekMsUUFBUUMsRUFBVTtBQUFBLEVBQ2xCLGdCQUFnQkEsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFVO0FBQUEsRUFDaEQsTUFBTUMsRUFBVSxlQUFlO0FBQUEsRUFDL0IsUUFBUXNMLEdBQU8sQ0FBQyxlQUFlLFdBQVcsQ0FBQztBQUFBLEVBQzNDLFdBQVd2TCxFQUFVO0FBQUEsRUFDckIsTUFBTUEsRUFBVTtBQUFBLEVBQ2hCLFFBQVFBLEVBQVUsRUFBQyxTQUFVO0FBQ2pDLENBQUMsR0N6Q1lnYixLQUFtQmpiLEVBQVM7QUFBQSxFQUNyQyxJQUFJQyxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVU7QUFBQSxFQUNwQyxpQkFBaUJBLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBVTtBQUFBLEVBQ2pELG1CQUFtQnNMLEVBQVUsRUFBQyxHQUFHckwsRUFBVSxLQUFLLENBQUMsRUFBRSxTQUFVLEVBQUMsU0FBVTtBQUFBLEVBQ3hFLFVBQVVDLEdBQVNGLEVBQVUsR0FBRUcsRUFBSyxDQUFFLEVBQUUsU0FBVSxFQUFDLFNBQVU7QUFBQSxFQUM3RCxZQUFZQyxFQUFRSixFQUFRLENBQUUsRUFBRSxTQUFRLEVBQUcsU0FBVTtBQUFBLEVBQ3JELFFBQVFDLEVBQVUsbUJBQW1CLEVBQUUsU0FBUSxFQUFHLFNBQVU7QUFBQSxFQUM1RCxRQUFRRyxFQUFRRCxFQUFLLENBQUUsRUFBRSxTQUFRLEVBQUcsU0FBVTtBQUFBLEVBQzlDLHFCQUFxQkgsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFVO0FBQUEsRUFDckQsUUFBUWliLEdBQ0UsQ0FBQyxhQUFhLGNBQWMsVUFBVSxhQUFhLGFBQWEsQ0FBQyxFQUN0RSxTQUFRLEVBQ1IsU0FBVTtBQUFBLEVBQ2YsZ0JBQWdCL2EsR0FBU0YsRUFBVSxHQUFFRyxFQUFLLENBQUUsRUFBRSxTQUFVLEVBQUMsU0FBVTtBQUFBLEVBQ25FLE9BQU9zVixFQUNLO0FBQUEsSUFDUixjQUFjbkssRUFBVSxFQUFDLFNBQVU7QUFBQSxJQUNuQyxzQkFBc0JwTCxHQUFTRixFQUFVLEdBQUVHLEVBQUssQ0FBRSxFQUFFLFNBQVUsRUFBQyxTQUFVO0FBQUEsSUFDekUsZUFBZW1MLEVBQVUsRUFBQyxTQUFVO0FBQUEsSUFDcEMsdUJBQXVCNFAsR0FDWGxiLEVBQVUsR0FBRUcsRUFBTyxDQUFBLEVBQzFCLFNBQVEsRUFDUixTQUFVO0FBQUEsRUFDbEIsQ0FBQSxFQUNJLFNBQVEsRUFDUixTQUFVO0FBQUEsRUFDZixPQUFPSCxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVU7QUFDM0MsQ0FBQyxHQUVZbWIsS0FBZ0NwYixFQUFTO0FBQUEsRUFDbEQsSUFBSUMsRUFBVSxFQUFDLFNBQVU7QUFBQSxFQUN6QixPQUFPQSxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVU7QUFBQSxFQUN2QyxNQUFNQSxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVU7QUFBQSxFQUN0QyxZQUFZQSxFQUFRLEVBQUcsU0FBUSxFQUFHLFNBQVU7QUFBQSxFQUM1QyxNQUFNd00sR0FBUTtBQUFBLElBQ1Z2TSxFQUFVLFlBQVk7QUFBQSxJQUN0QkEsRUFBVSxhQUFhO0FBQUEsSUFDdkJBLEVBQVUsZ0JBQWdCO0FBQUEsSUFDMUJBLEVBQVUsTUFBTTtBQUFBLElBQ2hCQSxFQUFVLE9BQU87QUFBQSxFQUN6QixDQUFLO0FBQ0wsQ0FBQyxHQUNZbWIsS0FBeUJyYixFQUFTO0FBQUEsRUFDM0MsSUFBSUMsRUFBVSxFQUFDLFNBQVU7QUFBQSxFQUN6QixXQUFXQSxFQUFVLEVBQUMsU0FBVTtBQUFBLEVBQ2hDLFNBQVNBLEVBQVUsRUFBQyxTQUFVO0FBQUEsRUFDOUIsU0FBU0ksRUFBUSthLEVBQTZCLEVBQUUsU0FBVTtBQUFBLEVBQzFELE1BQU1uYixFQUFVLEVBQUMsU0FBVTtBQUFBLEVBQzNCLFFBQVFDLEVBQVUsZUFBZSxFQUFFLFNBQVU7QUFBQSxFQUM3QyxRQUFRRCxFQUFVLEVBQUMsU0FBVTtBQUFBLEVBQzdCLE1BQU11TCxHQUFPLENBQUMsUUFBUSxhQUFhLFFBQVEsQ0FBQyxFQUFFLFNBQVU7QUFBQSxFQUN4RCxRQUFRQSxHQUFPLENBQUMsYUFBYSxjQUFjLGFBQWEsQ0FBQyxFQUFFLFNBQVU7QUFBQSxFQUNyRSxNQUFNQSxHQUFPLENBQUMsV0FBVyxpQkFBaUIsc0JBQXNCLENBQUMsRUFBRSxTQUFVO0FBQ2pGLENBQUMsR0FDWThQLEtBQWlDdGIsRUFBUztBQUFBLEVBQ25ELE1BQU1FLEVBQVUsc0JBQXNCO0FBQUEsRUFDdEMsVUFBVUQsRUFBVTtBQUFBLEVBQ3BCLGNBQWNELEVBQVM7QUFBQSxJQUNuQixJQUFJQyxFQUFVLEVBQUMsU0FBVTtBQUFBLElBQ3pCLFFBQVFDLEVBQVUsdUJBQXVCLEVBQUUsU0FBVTtBQUFBLEVBQzdELENBQUs7QUFDTCxDQUFDLEdBQ1lxYixLQUFxQ3ZiLEVBQVM7QUFBQSxFQUN2RCxNQUFNRSxFQUFVLDJCQUEyQjtBQUFBLEVBQzNDLFVBQVVELEVBQVU7QUFBQSxFQUNwQixNQUFNb2I7QUFBQSxFQUNOLGtCQUFrQnBiLEVBQVEsRUFBRyxTQUFRLEVBQUcsU0FBVTtBQUN0RCxDQUFDLEdBQ1l1YixLQUFxQ3hiLEVBQVM7QUFBQSxFQUN2RCxNQUFNRSxFQUFVLDJCQUEyQjtBQUFBLEVBQzNDLFVBQVVELEVBQVU7QUFBQSxFQUNwQixTQUFTQSxFQUFVO0FBQ3ZCLENBQUMsR0FDWXdiLEtBQThEemIsRUFBUztBQUFBLEVBQ2hGLE1BQU1FLEVBQVUsdURBQXVEO0FBQUEsRUFDdkUsVUFBVUQsRUFBVTtBQUFBLEVBQ3BCLFNBQVNBLEVBQVU7QUFBQSxFQUNuQixlQUFlc0wsRUFBVTtBQUFBLEVBQ3pCLFlBQVl0TCxFQUFVO0FBQUEsRUFDdEIsVUFBVUksRUFBUUQsRUFBSyxDQUFFLEVBQUUsU0FBUSxFQUFHLFNBQVU7QUFDcEQsQ0FBQyxHQUNZc2IsS0FBMEQxYixFQUFTO0FBQUEsRUFDNUUsTUFBTUUsRUFBVSxtREFBbUQ7QUFBQSxFQUNuRSxVQUFVRCxFQUFVO0FBQUEsRUFDcEIsU0FBU0EsRUFBVTtBQUFBLEVBQ25CLGVBQWVzTCxFQUFVLEVBQUMsU0FBVTtBQUFBLEVBQ3BDLE9BQU90TCxFQUFVLEVBQUMsU0FBVTtBQUFBLEVBQzVCLFVBQVVJLEVBQVFELEVBQUssQ0FBRSxFQUFFLFNBQVEsRUFBRyxTQUFVO0FBQ3BELENBQUMsR0FDWXViLEtBQTJEM2IsRUFBUztBQUFBLEVBQzdFLE1BQU1FLEVBQVUsb0RBQW9EO0FBQUEsRUFDcEUsVUFBVUQsRUFBVTtBQUFBLEVBQ3BCLFNBQVNBLEVBQVU7QUFBQSxFQUNuQixlQUFlc0wsRUFBVTtBQUFBLEVBQ3pCLE9BQU92TCxFQUFTO0FBQUEsSUFDWixNQUFNQyxFQUFVLEVBQUMsU0FBVTtBQUFBLElBQzNCLFNBQVNBLEVBQVUsRUFBQyxTQUFVO0FBQUEsSUFDOUIsT0FBT0EsRUFBVSxFQUFDLFNBQVU7QUFBQSxJQUM1QixNQUFNQSxFQUFVLEVBQUMsU0FBVTtBQUFBLEVBQ25DLENBQUs7QUFDTCxDQUFDLEdBQ1kyYixLQUF1QzViLEVBQVM7QUFBQSxFQUN6RCxNQUFNRSxFQUFVLDZCQUE2QjtBQUFBLEVBQzdDLFVBQVVELEVBQVU7QUFBQSxFQUNwQixNQUFNb2I7QUFDVixDQUFDLEdBQ1lRLEtBQXVDN2IsRUFBUztBQUFBLEVBQ3pELE1BQU1FLEVBQVUsNkJBQTZCO0FBQUEsRUFDN0MsVUFBVUQsRUFBVTtBQUFBLEVBQ3BCLFNBQVNBLEVBQVU7QUFBQSxFQUNuQixjQUFjc0wsRUFBVTtBQUFBLEVBQ3hCLGVBQWVBLEVBQVU7QUFDN0IsQ0FBQyxHQUNZdVEsS0FBb0M5YixFQUFTO0FBQUEsRUFDdEQsTUFBTUUsRUFBVSwwQkFBMEI7QUFBQSxFQUMxQyxNQUFNbWI7QUFBQSxFQUNOLFVBQVVwYixFQUFVLEVBQUMsU0FBVTtBQUFBLEVBQy9CLGtCQUFrQkEsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFVO0FBQ3RELENBQUMsR0FDWThiLEtBQW9DL2IsRUFBUztBQUFBLEVBQ3RELE1BQU1FLEVBQVUsMEJBQTBCO0FBQUEsRUFDMUMsU0FBU0QsRUFBVTtBQUFBLEVBQ25CLFVBQVVBLEVBQVUsRUFBQyxTQUFVO0FBQ25DLENBQUMsR0FDWStiLEtBQXNDaGMsRUFBUztBQUFBLEVBQ3hELE1BQU1FLEVBQVUsNEJBQTRCO0FBQUEsRUFDNUMsU0FBU0QsRUFBVTtBQUFBLEVBQ25CLFVBQVVBLEVBQVUsRUFBQyxTQUFVO0FBQ25DLENBQUMsR0FDWWdjLEtBQXNDamMsRUFBUztBQUFBLEVBQ3hELE1BQU1FLEVBQVUsNEJBQTRCO0FBQUEsRUFDNUMsU0FBU0QsRUFBVTtBQUFBLEVBQ25CLGNBQWNzTCxFQUFVO0FBQUEsRUFDeEIsZUFBZUEsRUFBVTtBQUFBLEVBQ3pCLFVBQVV0TCxFQUFVLEVBQUMsU0FBVTtBQUNuQyxDQUFDLEdBQ1lpYyxLQUFtQmxjLEVBQVM7QUFBQSxFQUNyQyxNQUFNRSxFQUFVLE9BQU87QUFBQSxFQUN2QixVQUFVRCxFQUFVLEVBQUMsU0FBVTtBQUFBLEVBQy9CLE9BQU9HLEVBQU8sRUFBQyxTQUFVO0FBQzdCLENBQUMsR0FDWStiLEtBQXFDbmMsRUFBUztBQUFBLEVBQ3ZELE1BQU1FLEVBQVUsNEJBQTRCO0FBQUEsRUFDNUMsVUFBVUQsRUFBVTtBQUN4QixDQUFDLEdBQ1ltYyxLQUFvQ3BjLEVBQVM7QUFBQSxFQUN0RCxNQUFNRSxFQUFVLDJCQUEyQjtBQUFBLEVBQzNDLE9BQU9ELEVBQVU7QUFBQSxFQUNqQixVQUFVQSxFQUFVLEVBQUMsU0FBVTtBQUNuQyxDQUFDLEdBQ1lvYyxLQUFtQ3JjLEVBQVM7QUFBQSxFQUNyRCxNQUFNRSxFQUFVLDBCQUEwQjtBQUFBLEVBQzFDLFVBQVVELEVBQVUsRUFBQyxTQUFVO0FBQ25DLENBQUMsR0FDWXFjLEtBQW9DdGMsRUFBUztBQUFBLEVBQ3RELE1BQU1FLEVBQVUsMkJBQTJCO0FBQUEsRUFDM0MsVUFBVUQsRUFBVSxFQUFDLFNBQVU7QUFDbkMsQ0FBQyxHQUNZc2MsS0FBdUN2YyxFQUFTO0FBQUEsRUFDekQsTUFBTUUsRUFBVSw4QkFBOEI7QUFBQSxFQUM5QyxVQUFVRCxFQUFVO0FBQUEsRUFDcEIsU0FBU0EsRUFBVTtBQUFBLEVBQ25CLGtCQUFrQkEsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFVO0FBQ3RELENBQUMsR0FDWXVjLEtBQTJDeGMsRUFBUztBQUFBLEVBQzdELE1BQU1FLEVBQVUsbUNBQW1DO0FBQUEsRUFDbkQsVUFBVUQsRUFBVTtBQUFBLEVBQ3BCLFNBQVNBLEVBQVU7QUFBQSxFQUNuQixnQkFBZ0JzTCxFQUFVO0FBQzlCLENBQUMsR0FDWWtSLEtBQTJDemMsRUFBUztBQUFBLEVBQzdELE1BQU1FLEVBQVUsbUNBQW1DO0FBQUEsRUFDbkQsVUFBVUQsRUFBVTtBQUFBLEVBQ3BCLFNBQVNBLEVBQVU7QUFBQSxFQUNuQixjQUFjc0wsRUFBVTtBQUM1QixDQUFDLEdBQ1ltUixLQUFzQ0MsRUFDdkM7QUFBQSxFQUNSLE1BQU16YyxFQUFVLDZCQUE2QjtBQUFBLEVBQzdDLFVBQVVELEVBQVU7QUFDeEIsQ0FBQyxFQUNJLFlBQWEsR0FDTDJjLEtBQXNDRCxFQUN2QztBQUFBLEVBQ1IsTUFBTXpjLEVBQVUsNkJBQTZCO0FBQUEsRUFDN0MsVUFBVUQsRUFBVTtBQUN4QixDQUFDLEVBQ0ksWUFBYSxHQUNMNGMsS0FBc0M3YyxFQUFTO0FBQUEsRUFDeEQsTUFBTUUsRUFBVSw2QkFBNkI7QUFBQSxFQUM3QyxVQUFVRCxFQUFVO0FBQ3hCLENBQUMsR0FDWTZjLEtBQStCOWMsRUFBUztBQUFBLEVBQ2pELE1BQU1FLEVBQVUscUJBQXFCO0FBQUEsRUFDckMsVUFBVUQsRUFBVTtBQUFBLEVBQ3BCLGFBQWFJLEVBQVFMLEVBQVM7QUFBQSxJQUMxQixPQUFPdUwsRUFBVSxFQUFDLFNBQVU7QUFBQSxJQUM1QixNQUFNQyxHQUFPLENBQUMsWUFBWSxRQUFRLENBQUMsRUFBRSxTQUFVO0FBQUEsSUFDL0MsV0FBV0QsRUFBVSxFQUFDLFNBQVU7QUFBQSxJQUNoQyxlQUFlQSxFQUFVLEVBQUMsU0FBVTtBQUFBLEVBQzVDLENBQUssQ0FBQztBQUNOLENBQUMsR0FDWXdSLEtBQWdDL2MsRUFBUztBQUFBLEVBQ2xELE1BQU1FLEVBQVUsc0JBQXNCO0FBQUEsRUFDdEMsVUFBVUQsRUFBVTtBQUFBLEVBQ3BCLFNBQVNBLEVBQVU7QUFBQSxFQUNuQixlQUFlc0wsRUFBVTtBQUFBLEVBQ3pCLE9BQU90TCxFQUFVO0FBQUEsRUFDakIsY0FBY3NMLEVBQVU7QUFBQSxFQUN4QixhQUFhdEwsRUFBVTtBQUMzQixDQUFDLEdBQ1krYyxLQUErQmhkLEVBQVM7QUFBQSxFQUNqRCxNQUFNRSxFQUFVLHFCQUFxQjtBQUFBLEVBQ3JDLFVBQVVELEVBQVU7QUFBQSxFQUNwQixTQUFTQSxFQUFVO0FBQUEsRUFDbkIsZUFBZXNMLEVBQVU7QUFBQSxFQUN6QixjQUFjQSxFQUFVO0FBQUEsRUFDeEIsYUFBYXRMLEVBQVU7QUFDM0IsQ0FBQyxHQUNZZ2QsS0FBMENqZCxFQUFTO0FBQUEsRUFDNUQsTUFBTUUsRUFBVSxpQ0FBaUM7QUFBQSxFQUNqRCxVQUFVRCxFQUFVO0FBQUEsRUFDcEIsU0FBU0EsRUFBVTtBQUFBLEVBQ25CLGVBQWVzTCxFQUFVO0FBQUEsRUFDekIsT0FBT3RMLEVBQVU7QUFBQSxFQUNqQixjQUFjc0wsRUFBVTtBQUFBLEVBQ3hCLGFBQWF0TCxFQUFVO0FBQzNCLENBQUMsR0FDWWlkLEtBQXlDbGQsRUFBUztBQUFBLEVBQzNELE1BQU1FLEVBQVUsZ0NBQWdDO0FBQUEsRUFDaEQsVUFBVUQsRUFBVTtBQUFBLEVBQ3BCLFNBQVNBLEVBQVU7QUFBQSxFQUNuQixlQUFlc0wsRUFBVTtBQUFBLEVBQ3pCLFlBQVl0TCxFQUFVO0FBQUEsRUFDdEIsY0FBY3NMLEVBQVU7QUFBQSxFQUN4QixhQUFhdEwsRUFBVTtBQUMzQixDQUFDLEdBQ1lrZCxLQUFzQ25kLEVBQVM7QUFBQSxFQUN4RCxNQUFNRSxFQUFVLDZCQUE2QjtBQUFBLEVBQzdDLFVBQVVELEVBQVU7QUFBQSxFQUNwQixTQUFTQSxFQUFVO0FBQUEsRUFDbkIsZUFBZXNMLEVBQVU7QUFBQSxFQUN6QixjQUFjQSxFQUFVO0FBQUEsRUFDeEIsYUFBYXRMLEVBQVU7QUFBQSxFQUN2QixNQUFNRCxFQUFTO0FBQUEsSUFDWCxPQUFPQyxFQUFVLEVBQUMsU0FBVTtBQUFBLElBQzVCLE1BQU1BLEVBQVUsRUFBQyxTQUFVO0FBQUEsSUFDM0IsWUFBWUEsRUFBVSxFQUFDLFNBQVU7QUFBQSxJQUNqQyxNQUFNdUwsR0FBTyxDQUFDLFFBQVEsT0FBTyxDQUFDLEVBQUUsU0FBVTtBQUFBLEVBQ2xELENBQUs7QUFDTCxDQUFDLEdBQ1k0UixLQUFxQ3BkLEVBQVM7QUFBQSxFQUN2RCxNQUFNRSxFQUFVLDRCQUE0QjtBQUFBLEVBQzVDLFVBQVVELEVBQVU7QUFBQSxFQUNwQixTQUFTQSxFQUFVO0FBQUEsRUFDbkIsZUFBZXNMLEVBQVU7QUFBQSxFQUN6QixjQUFjQSxFQUFVO0FBQUEsRUFDeEIsYUFBYXRMLEVBQVU7QUFBQSxFQUN2QixNQUFNRCxFQUFTO0FBQUEsSUFDWCxPQUFPQyxFQUFVLEVBQUMsU0FBVTtBQUFBLElBQzVCLE1BQU1BLEVBQVUsRUFBQyxTQUFVO0FBQUEsSUFDM0IsWUFBWUEsRUFBVSxFQUFDLFNBQVU7QUFBQSxJQUNqQyxNQUFNdUwsR0FBTyxDQUFDLFFBQVEsT0FBTyxDQUFDLEVBQUUsU0FBVTtBQUFBLEVBQ2xELENBQUs7QUFDTCxDQUFDLEdBQ1k2UixLQUE2QnJkLEVBQVM7QUFBQSxFQUMvQyxNQUFNRSxFQUFVLGtCQUFrQjtBQUFBLEVBQ2xDLFVBQVVELEVBQVU7QUFBQSxFQUNwQixVQUFVZ2I7QUFDZCxDQUFDLEdBQ1lxQyxLQUEwQnRkLEVBQVM7QUFBQSxFQUM1QyxNQUFNRSxFQUFVLGVBQWU7QUFBQSxFQUMvQixVQUFVRCxFQUFVO0FBQUEsRUFDcEIsVUFBVWdiO0FBQ2QsQ0FBQyxHQUNZc0MsS0FBZ0R2ZCxFQUFTO0FBQUEsRUFDbEUsTUFBTUUsRUFBVSx3Q0FBd0M7QUFBQSxFQUN4RCxVQUFVRCxFQUFVO0FBQUEsRUFDcEIsU0FBU0EsRUFBVTtBQUFBLEVBQ25CLFNBQVNBLEVBQVU7QUFBQSxFQUNuQixPQUFPQSxFQUFVO0FBQUEsRUFDakIsY0FBY3NMLEVBQVU7QUFBQSxFQUN4QixhQUFhdEwsRUFBVTtBQUMzQixDQUFDLEdBQ1l1ZCxLQUErQ3hkLEVBQVM7QUFBQSxFQUNqRSxNQUFNRSxFQUFVLHVDQUF1QztBQUFBLEVBQ3ZELFVBQVVELEVBQVU7QUFBQSxFQUNwQixTQUFTQSxFQUFVO0FBQUEsRUFDbkIsU0FBU0EsRUFBVTtBQUFBLEVBQ25CLFdBQVdBLEVBQVU7QUFBQSxFQUNyQixjQUFjc0wsRUFBVTtBQUFBLEVBQ3hCLGFBQWF0TCxFQUFVO0FBQzNCLENBQUMsR0FDWXdkLEtBQXFDemQsRUFBUztBQUFBLEVBQ3ZELE1BQU1FLEVBQVUsNEJBQTRCO0FBQUEsRUFDNUMsVUFBVUQsRUFBVTtBQUFBLEVBQ3BCLE1BQU1vYjtBQUFBLEVBQ04sY0FBYzlQLEVBQVU7QUFBQSxFQUN4QixhQUFhdEwsRUFBVTtBQUMzQixDQUFDLEdBQ1l5ZCxLQUFvQzFkLEVBQVM7QUFBQSxFQUN0RCxNQUFNRSxFQUFVLDJCQUEyQjtBQUFBLEVBQzNDLFVBQVVELEVBQVU7QUFBQSxFQUNwQixNQUFNb2I7QUFBQSxFQUNOLGNBQWM5UCxFQUFVO0FBQUEsRUFDeEIsYUFBYXRMLEVBQVU7QUFDM0IsQ0FBQyxHQUNZMGQsS0FBK0IzZCxFQUFTO0FBQUEsRUFDakQsTUFBTUUsRUFBVSxxQkFBcUI7QUFBQSxFQUNyQyxVQUFVRCxFQUFVO0FBQUEsRUFDcEIsU0FBU0EsRUFBVTtBQUFBLEVBQ25CLGVBQWVzTCxFQUFVO0FBQUEsRUFDekIsT0FBT3RMLEVBQVU7QUFBQSxFQUNqQixjQUFjc0wsRUFBVTtBQUFBLEVBQ3hCLGFBQWF0TCxFQUFVO0FBQzNCLENBQUMsR0FDWTJkLEtBQThCNWQsRUFBUztBQUFBLEVBQ2hELE1BQU1FLEVBQVUsb0JBQW9CO0FBQUEsRUFDcEMsVUFBVUQsRUFBVTtBQUFBLEVBQ3BCLFNBQVNBLEVBQVU7QUFBQSxFQUNuQixlQUFlc0wsRUFBVTtBQUFBLEVBQ3pCLE1BQU10TCxFQUFVO0FBQUEsRUFDaEIsY0FBY3NMLEVBQVU7QUFBQSxFQUN4QixhQUFhdEwsRUFBVTtBQUMzQixDQUFDLEdBQ1k0ZCxLQUE0QjdkLEVBQVM7QUFBQSxFQUM5QyxNQUFNRSxFQUFVLGlCQUFpQjtBQUFBLEVBQ2pDLFVBQVVELEVBQVU7QUFBQSxFQUNwQixTQUFTRyxFQUFPO0FBQ3BCLENBQUMsR0FDWTBkLEtBQTRCOWQsRUFBUztBQUFBLEVBQzlDLE1BQU1FLEVBQVUsaUJBQWlCO0FBQUEsRUFDakMsVUFBVUQsRUFBVTtBQUFBLEVBQ3BCLFNBQVNHLEVBQU87QUFDcEIsQ0FBQyxHQUNZMmQsS0FBNEIvZCxFQUFTO0FBQUEsRUFDOUMsTUFBTUUsRUFBVSxpQkFBaUI7QUFBQSxFQUNqQyxVQUFVRCxFQUFVLEVBQUMsU0FBVTtBQUFBLEVBQy9CLGFBQWFBLEVBQVUsRUFBQyxTQUFVO0FBQ3RDLENBQUMsR0FDWStkLEtBQTRCaGUsRUFBUztBQUFBLEVBQzlDLE1BQU1FLEVBQVUsaUJBQWlCO0FBQUEsRUFDakMsVUFBVUQsRUFBVSxFQUFDLFNBQVU7QUFBQSxFQUMvQixVQUFVRyxFQUFPLEVBQUMsU0FBVTtBQUNoQyxDQUFDLEdBQ1k2ZCxLQUEyQmplLEVBQVM7QUFBQSxFQUM3QyxNQUFNRSxFQUFVLGdCQUFnQjtBQUFBLEVBQ2hDLFVBQVVELEVBQVUsRUFBQyxTQUFVO0FBQUEsRUFDL0IsU0FBU0csRUFBTztBQUNwQixDQUFDLEdBQ1k4ZCxLQUF3Q2xlLEVBQVM7QUFBQSxFQUMxRCxNQUFNRSxFQUFVLDhCQUE4QjtBQUFBLEVBQzlDLFVBQVVELEVBQVUsRUFBQyxTQUFVO0FBQUEsRUFDL0IsU0FBU0csRUFBTztBQUNwQixDQUFDLEdBQ1krZCxLQUF5Q25lLEVBQVM7QUFBQSxFQUMzRCxNQUFNRSxFQUFVLCtCQUErQjtBQUFBLEVBQy9DLFVBQVVELEVBQVU7QUFBQSxFQUNwQixTQUFTRyxFQUFPO0FBQ3BCLENBQUMsR0FNWWdlLEtBQXFCekIsRUFDdEI7QUFBQSxFQUNSLE1BQU0xYyxFQUFVO0FBQUEsRUFDaEIsVUFBVUEsRUFBUSxFQUFHLFNBQVEsRUFBRyxTQUFVO0FBQzlDLENBQUMsRUFDSSxZQUFhLEdBQ0xvZSxLQUE0Qi9TLEdBQXFCLFFBQVE7QUFBQSxFQUNsRWdRO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBSztBQUFBLEVBQ0FDO0FBQUEsRUFDQUk7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBRTtBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FLO0FBQ0osQ0FBQztBQUN3QzdTLEdBQXFCLFFBQVE7QUFBQSxFQUNsRXdRO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQUc7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQUEsRUFDQXlCO0FBQUEsRUFDQUM7QUFBQSxFQUNBQztBQUFBLEVBQ0FDO0FBQ0osQ0FBQztBQU1NLFNBQVNJLEdBQW1CbC9CLEdBQU87QUFDdEMsUUFBTW0vQixJQUFNLEtBQUssTUFBTW4vQixFQUFNLEtBQUssVUFBVSxHQUN0Q3FTLElBQVM0c0IsR0FBMEIsVUFBVUUsQ0FBRztBQUN0RCxNQUFJLENBQUM5c0IsRUFBTyxTQUFTO0FBQ2pCLFVBQU0rc0IsSUFBZ0JKLEdBQW1CLFVBQVVHLENBQUc7QUFDdEQsV0FBSUMsRUFBYyxVQUNQLEVBQUUsTUFBTUEsRUFBYyxNQUFNLFdBQVcsR0FBTSxJQUVqRCxFQUFFLE1BQU0sTUFBTSxXQUFXLEdBQU07QUFBQSxFQUM5QztBQUNJLFNBQU8sRUFBRSxNQUFNL3NCLEVBQU8sTUFBTSxXQUFXLEdBQU87QUFDbEQ7QUMvYVksTUFBQ2d0QixLQUFnQywyQkFLaENDLEtBQXlDO0FBQUEsRUFDbEQsT0FBTztBQUFBLEVBQ1AsWUFBWSxDQUFDLFFBQVEsT0FBTztBQUFBLEVBQzVCLGtCQUFrQjtBQUFBLEVBQ2xCLG1CQUFtQjtBQUFBLEVBQ25CLHlCQUF5QjtBQUFBLElBQ3JCLE9BQU87QUFBQSxFQUNWO0FBQUEsRUFDRCxlQUFlO0FBQUEsSUFDWCxNQUFNO0FBQUEsRUFDVDtBQUNMOztBQUNPLE1BQU1DLFdBQTJCdlYsR0FBcUI7QUFBQSxFQUt6RCxZQUFZOW9CLElBQVUsSUFBSTtBQUN0QixVQUFPO0FBTFgsSUFBQTBoQixFQUFBLE1BQUE0YztBQUNBLElBQUE1YyxFQUFBLE1BQUE2YztBQUNBLElBQUE3YyxFQUFBLE1BQUE4YyxJQUFpQjtBQUNqQixJQUFBenpCLEVBQUEsc0JBQWUsSUFBSWllLEdBQXFCO0FBR3BDLElBQUFsRSxFQUFBLE1BQUt3WixJQUFTdCtCLEVBQVEsU0FBU20rQixLQUMvQnJaLEVBQUEsTUFBS3laLElBQVV2K0IsRUFBUTtBQUFBLEVBQy9CO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJSSxJQUFJLGVBQWU7QUFDZixXQUFPNmhCLEVBQUEsTUFBS3ljO0FBQUEsRUFDcEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0ksSUFBSSxhQUFhdEYsR0FBTztBQUNwQixJQUFBbFUsRUFBQSxNQUFLd1osSUFBU3RGO0FBQUEsRUFDdEI7QUFBQSxFQUNJLE1BQU0sV0FBV2g1QixHQUFTO0FBQ3RCLFVBQU15K0IsSUFBU3orQixFQUFRLFVBQVU2aEIsRUFBQSxNQUFLMGM7QUFDdEMsV0FBSSxPQUFPRSxLQUFXLGFBQ1gsTUFBTUEsRUFBUSxJQUVsQkE7QUFBQSxFQUNmO0FBQUEsRUFDSSxXQUFXMy9CLEdBQU87O0FBQ2QsVUFBTSxFQUFFLE1BQU1xUyxHQUFRLFdBQUF1dEIsRUFBUyxJQUFLVixHQUFtQmwvQixDQUFLO0FBQzVELFFBQUlxUyxNQUFXLFNBR2YsS0FBSyxLQUFLLEtBQUtBLENBQU0sR0FDakIsQ0FBQXV0QixJQVNKO0FBQUEsVUFOSXZ0QixFQUFPLFNBQVMsVUFDaEIsS0FBSyxLQUFLLFNBQVMsRUFBRSxNQUFNLFNBQVMsT0FBT0EsR0FBUSxJQUduRCxLQUFLLEtBQUtBLEVBQU8sTUFBTUEsQ0FBTSxHQUU3QkEsRUFBTyxTQUFTLG9CQUFvQjtBQUNwQyxhQUFLLEtBQUssZ0JBQWdCO0FBQUEsVUFDdEIsTUFBTTtBQUFBLFVBQ04sY0FBYztBQUFBLFlBQ1YsR0FBR0E7QUFBQSxVQUNOO0FBQUEsUUFDakIsQ0FBYTtBQUNEO0FBQUEsTUFDWjtBQUNRLFVBQUlBLEVBQU8sU0FBUyxpQkFBaUI7QUFDakMsY0FBTW1pQixJQUFXMEosR0FBd0IsVUFBVTdyQixDQUFNO0FBQ3pELFlBQUksQ0FBQ21pQixFQUFTLFNBQVM7QUFDbkIsVUFBQTVpQixHQUFPLE1BQU0scUNBQXFDNGlCLEVBQVMsS0FBSztBQUNoRTtBQUFBLFFBQ2hCO0FBQ1ksY0FBTXFMLE1BQWNqN0IsSUFBQTR2QixFQUFTLEtBQUssU0FBUyxVQUF2QixnQkFBQTV2QixFQUE4QixpQkFBZ0IsR0FDNURrN0IsTUFBZW43QixJQUFBNnZCLEVBQVMsS0FBSyxTQUFTLFVBQXZCLGdCQUFBN3ZCLEVBQThCLGtCQUFpQixHQUM5RG83QixJQUFjRixJQUFjQyxHQUM1QjVHLElBQVEsSUFBSXZMLEdBQU07QUFBQSxVQUNwQixhQUFBa1M7QUFBQSxVQUNBLHNCQUFvQmg0QixJQUFBMnNCLEVBQVMsS0FBSyxTQUFTLFVBQXZCLGdCQUFBM3NCLEVBQThCLHlCQUF3QixDQUFFO0FBQUEsVUFDNUUsY0FBQWk0QjtBQUFBLFVBQ0EsdUJBQXFCLzNCLElBQUF5c0IsRUFBUyxLQUFLLFNBQVMsVUFBdkIsZ0JBQUF6c0IsRUFBOEIsMEJBQXlCLENBQUU7QUFBQSxVQUM5RSxhQUFBZzRCO0FBQUEsUUFDaEIsQ0FBYTtBQUNELGFBQUssS0FBSyxnQkFBZ0I3RyxDQUFLLEdBQy9CLEtBQUssS0FBSyxhQUFhO0FBQUEsVUFDbkIsTUFBTTtBQUFBLFVBQ04sVUFBVTtBQUFBLFlBQ04sSUFBSTFFLEVBQVMsS0FBSyxTQUFTLE1BQU07QUFBQSxZQUNqQyxRQUFRQSxFQUFTLEtBQUssU0FBUyxVQUFVLENBQUU7QUFBQSxZQUMzQyxPQUFPO0FBQUEsY0FDSCxhQUFBcUw7QUFBQSxjQUNBLHNCQUFvQmxILElBQUFuRSxFQUFTLEtBQUssU0FBUyxVQUF2QixnQkFBQW1FLEVBQThCLHlCQUF3QixDQUFFO0FBQUEsY0FDNUUsY0FBQW1IO0FBQUEsY0FDQSx1QkFBcUJFLElBQUF4TCxFQUFTLEtBQUssU0FBUyxVQUF2QixnQkFBQXdMLEVBQThCLDBCQUF5QixDQUFFO0FBQUEsY0FDOUUsYUFBQUQ7QUFBQSxZQUNIO0FBQUEsVUFDSjtBQUFBLFFBQ2pCLENBQWE7QUFDRDtBQUFBLE1BQ1o7QUFDUSxVQUFJMXRCLEVBQU8sU0FBUyx1QkFBdUI7QUFDdkMsYUFBSyxLQUFLLFlBQVk7QUFDdEI7QUFBQSxNQUNaO0FBQ1EsVUFBSUEsRUFBTyxTQUFTLDZCQUE2QjtBQUM3QyxhQUFLLEtBQUssZ0JBQWdCO0FBQUEsVUFDdEIsUUFBUUEsRUFBTztBQUFBLFFBQy9CLENBQWE7QUFDRDtBQUFBLE1BQ1o7QUFDUSxVQUFJQSxFQUFPLFNBQVMsMkRBQ2hCQSxFQUFPLFNBQVMsK0JBQStCO0FBRy9DLGFBQUssVUFBVTtBQUFBLFVBQ1gsTUFBTTtBQUFBLFVBQ04sU0FBU0EsRUFBTztBQUFBLFFBQ2hDLENBQWE7QUFDRDtBQUFBLE1BQ1o7QUFDUSxVQUFJQSxFQUFPLFNBQVMsdURBQ2hCQSxFQUFPLFNBQVMseUJBQ2hCQSxFQUFPLFNBQVMscUNBQ2hCQSxFQUFPLFNBQVMsMENBQTBDO0FBQzFELFFBQUlBLEVBQU8sU0FBUyxxQ0FDaEIsS0FBSyxLQUFLLDBCQUEwQjtBQUFBLFVBQ2hDLE1BQU07QUFBQSxVQUNOLE9BQU9BLEVBQU87QUFBQSxVQUNkLFFBQVFBLEVBQU87QUFBQSxVQUNmLFlBQVlBLEVBQU87QUFBQSxRQUN2QyxDQUFpQjtBQUdMO0FBQUEsTUFDWjtBQUNRLFdBQUlBLEVBQU8sU0FBUywrQkFDaEJBLEVBQU8sU0FBUyxrQ0FDWkEsRUFBTyxLQUFLLFNBQVMsV0FBVztBQUNoQyxjQUFNNHRCLElBQWlCNXRCLEVBQU8sU0FBUyw4QkFDakNBLEVBQU8sbUJBQ1AsTUFDQXBULElBQU8wOEIsR0FBMEIsTUFBTTtBQUFBLFVBQ3pDLFFBQVF0cEIsRUFBTyxLQUFLO0FBQUEsVUFDcEIsZ0JBQUE0dEI7QUFBQSxVQUNBLE1BQU01dEIsRUFBTyxLQUFLO0FBQUEsVUFDbEIsTUFBTUEsRUFBTyxLQUFLO0FBQUEsVUFDbEIsU0FBU0EsRUFBTyxLQUFLO0FBQUEsVUFDckIsUUFBUUEsRUFBTyxLQUFLO0FBQUEsUUFDeEMsQ0FBaUI7QUFDRCxhQUFLLEtBQUssZUFBZXBULENBQUk7QUFDN0I7QUFBQSxNQUNoQjtBQUVRLFVBQUlvVCxFQUFPLFNBQVMsK0JBQ2hCQSxFQUFPLFNBQVMsOEJBQThCO0FBQzlDLGNBQU1wVCxJQUFPb1QsRUFBTztBQUNwQixZQUFJcFQsRUFBSyxTQUFTLG1CQUFtQkEsRUFBSyxXQUFXLGFBQWE7QUFDOUQsZ0JBQU1pMUIsSUFBVzBILEdBQXFCLE1BQU07QUFBQSxZQUN4QyxRQUFRMzhCLEVBQUs7QUFBQSxZQUNiLE1BQU1BLEVBQUs7QUFBQSxZQUNYLFFBQVE7QUFBQTtBQUFBLFlBQ1IsV0FBV0EsRUFBSztBQUFBLFlBQ2hCLE1BQU1BLEVBQUs7QUFBQSxZQUNYLFFBQVE7QUFBQSxVQUM1QixDQUFpQjtBQUNELGVBQUssS0FBSyxlQUFlaTFCLENBQVEsR0FDakMsS0FBSyxLQUFLLGlCQUFpQjtBQUFBLFlBQ3ZCLElBQUlqMUIsRUFBSztBQUFBLFlBQ1QsTUFBTTtBQUFBLFlBQ04sUUFBUUEsRUFBSyxXQUFXO0FBQUEsWUFDeEIsV0FBV0EsRUFBSyxhQUFhO0FBQUEsWUFDN0IsTUFBTUEsRUFBSyxRQUFRO0FBQUEsVUFDdkMsQ0FBaUI7QUFDRDtBQUFBLFFBQ2hCO0FBQ1ksWUFBSUEsRUFBSyxTQUFTLFdBQVc7QUFDekIsZ0JBQU1paEMsSUFBZXZFLEdBQTBCLE1BQU07QUFBQSxZQUNqRCxRQUFRdHBCLEVBQU8sS0FBSztBQUFBLFlBQ3BCLE1BQU1BLEVBQU8sS0FBSztBQUFBLFlBQ2xCLE1BQU1BLEVBQU8sS0FBSztBQUFBLFlBQ2xCLFNBQVNBLEVBQU8sS0FBSztBQUFBLFlBQ3JCLFFBQVE7QUFBQSxVQUM1QixDQUFpQjtBQUNELGVBQUssS0FBSyxlQUFlNnRCLENBQVk7QUFDckM7QUFBQSxRQUNoQjtBQUFBLE1BQ0E7QUFBQTtBQUFBLEVBQ0E7QUFBQSxFQUNJLFNBQVN4L0IsR0FBTztBQUNaLFNBQUssS0FBSyxTQUFTO0FBQUEsTUFDZixNQUFNO0FBQUEsTUFDTixPQUFBQTtBQUFBLElBQ1osQ0FBUztBQUFBLEVBQ1Q7QUFBQSxFQUNJLFVBQVU7QUFDTixTQUFLLEtBQUssV0FBVztBQUFBLEVBQzdCO0FBQUEsRUFDSSxXQUFXO0FBQ1AsU0FBSyxLQUFLLGNBQWM7QUFBQSxFQUNoQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFRSSxZQUFZNkQsR0FBUzQ3QixHQUFnQjtBQUNqQyxTQUFLLFVBQVU7QUFBQSxNQUNYLE1BQU07QUFBQSxNQUNOLE1BQU0sT0FBTzU3QixLQUFZLFdBQ25CO0FBQUEsUUFDRSxNQUFNO0FBQUEsUUFDTixNQUFNO0FBQUEsUUFDTixTQUFTO0FBQUEsVUFDTDtBQUFBLFlBQ0ksTUFBTTtBQUFBLFlBQ04sTUFBTUE7QUFBQSxVQUNUO0FBQUEsUUFDSjtBQUFBLE1BQ3JCLElBQ2tCQTtBQUFBLE1BQ04sR0FBRzQ3QjtBQUFBLElBQ2YsQ0FBUyxHQUNELEtBQUssVUFBVTtBQUFBLE1BQ1gsTUFBTTtBQUFBLElBQ2xCLENBQVM7QUFBQSxFQUNUO0FBQUEsRUFDSSx3QkFBd0JyVixHQUFROztBQXlCNUIsV0F4Qm9CO0FBQUEsTUFDaEIsY0FBY0EsRUFBTztBQUFBLE1BQ3JCLE9BQU9BLEVBQU8sU0FDVi9ILEVBQUEsTUFBS3ljLE9BQ0xGLEdBQXVDO0FBQUEsTUFDM0MsT0FBT3hVLEVBQU8sU0FBU3dVLEdBQXVDO0FBQUEsTUFDOUQsWUFBWXhVLEVBQU8sY0FBY3dVLEdBQXVDO0FBQUEsTUFDeEUsb0JBQW9CeFUsRUFBTyxvQkFDdkJ3VSxHQUF1QztBQUFBLE1BQzNDLHFCQUFxQnhVLEVBQU8scUJBQ3hCd1UsR0FBdUM7QUFBQSxNQUMzQywyQkFBMkJ4VSxFQUFPLDJCQUM5QndVLEdBQXVDO0FBQUEsTUFDM0MsZ0JBQWdCeFUsRUFBTyxpQkFDbkJ3VSxHQUF1QztBQUFBLE1BQzNDLGFBQWF4VSxFQUFPLGNBQWN3VSxHQUF1QztBQUFBLE1BQ3pFLFFBQU8xNkIsSUFBQWttQixFQUFPLFVBQVAsZ0JBQUFsbUIsRUFBYyxJQUFJLENBQUMwRyxPQUFVO0FBQUEsUUFDaEMsR0FBR0E7QUFBQSxRQUNILFFBQVE7QUFBQSxNQUN4QjtBQUFBO0FBQUE7QUFBQSxNQUdZLEdBQUl3ZixFQUFPLGdCQUFnQjtJQUM5QjtBQUFBLEVBRVQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0ksSUFBSSxlQUFlc1YsR0FBZTtBQUM5QixJQUFBcGEsRUFBQSxNQUFLMFosSUFBaUJVO0FBQUEsRUFDOUI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFNSSxxQkFBcUJBLEdBQWU7O0FBS2hDLFFBSkksT0FBT3JkLEVBQUEsTUFBSzJjLE1BQW1CLE9BRS9CMVosRUFBQSxNQUFLMFosSUFBaUIsT0FFdEJVLE1BQWtCLFFBQVE7QUFFMUIsV0FBSyxVQUFVO0FBQUEsUUFDWCxNQUFNO0FBQUEsUUFDTixTQUFTO0FBQUEsVUFDTCxTQUFTO0FBQUEsUUFDWjtBQUFBLE1BQ2pCLENBQWE7QUFDRDtBQUFBLElBQ1o7QUFDUSxRQUFJLE9BQU9yZCxFQUFBLE1BQUsyYyxPQUFtQixZQUMvQixPQUFPVSxLQUFrQixVQUFVO0FBRW5DLE1BQUF4dUIsR0FBTyxLQUFLLDBJQUEwSTtBQUN0SjtBQUFBLElBQ1o7QUFDUSxRQUFJd3VCLE1BQWtCLE1BQU07QUFDeEIsTUFBQXh1QixHQUFPLE1BQU0saUdBQWlHLEdBQzlHLEtBQUssVUFBVTtBQUFBLFFBQ1gsTUFBTTtBQUFBLFFBQ04sU0FBUztBQUFBLFVBQ0wsU0FBUztBQUFBLFFBQ1o7QUFBQSxNQUNqQixDQUFhO0FBQ0Q7QUFBQSxJQUNaO0FBQ1EsUUFBSW1SLEVBQUEsTUFBSzJjLFFBQW1CLFFBQ3hCLE9BQU8zYyxFQUFBLE1BQUsyYyxPQUFtQixVQUFVO0FBRXpDLFdBQUssVUFBVTtBQUFBLFFBQ1gsTUFBTTtBQUFBLFFBQ04sU0FBUztBQUFBLFVBQ0wsU0FBU1U7QUFBQSxRQUNaO0FBQUEsTUFDakIsQ0FBYTtBQUNEO0FBQUEsSUFDWjtBQUNRLFNBQUlBLEtBQUEsZ0JBQUFBLEVBQWUsZ0JBQWF4N0IsSUFBQW1lLEVBQUEsTUFBSzJjLFFBQUwsZ0JBQUE5NkIsRUFBcUIsY0FDakR3N0IsS0FBQSxnQkFBQUEsRUFBZSxnQkFBYXo3QixJQUFBb2UsRUFBQSxNQUFLMmMsUUFBTCxnQkFBQS82QixFQUFxQixjQUNqRHk3QixLQUFBLGdCQUFBQSxFQUFlLHFCQUFrQnY0QixJQUFBa2IsRUFBQSxNQUFLMmMsUUFBTCxnQkFBQTczQixFQUFxQixnQkFBZTtBQUNyRSxNQUFBK0osR0FBTyxLQUFLLGtNQUFrTSxLQUFLLFVBQVVtUixFQUFBLE1BQUsyYyxHQUFjLEdBQUcsS0FBSyxVQUFVVSxDQUFhLENBQUM7QUFDaFI7QUFBQSxJQUNaO0FBQ1EsU0FBSyxVQUFVO0FBQUEsTUFDWCxNQUFNO0FBQUEsTUFDTixTQUFTO0FBQUEsUUFDTCxTQUFTQTtBQUFBLE1BQ1o7QUFBQSxJQUNiLENBQVM7QUFBQSxFQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPSSxvQkFBb0J0VixHQUFRO0FBQ3hCLFVBQU11VixJQUFjLEtBQUssd0JBQXdCdlYsQ0FBTTtBQUN2RCxTQUFLLFVBQVU7QUFBQSxNQUNYLE1BQU07QUFBQSxNQUNOLFNBQVN1VjtBQUFBLElBQ3JCLENBQVM7QUFBQSxFQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVFJLHVCQUF1Qm5NLEdBQVUvbUIsR0FBUW16QixJQUFnQixJQUFNO0FBQzNELFNBQUssVUFBVTtBQUFBLE1BQ1gsTUFBTTtBQUFBLE1BQ04sTUFBTTtBQUFBLFFBQ0YsTUFBTTtBQUFBLFFBQ04sUUFBQW56QjtBQUFBLFFBQ0EsU0FBUyttQixFQUFTO0FBQUEsTUFDckI7QUFBQSxJQUNiLENBQVM7QUFDRCxRQUFJO0FBQ0EsWUFBTWoxQixJQUFPMjhCLEdBQXFCLE1BQU07QUFBQSxRQUNwQyxRQUFRMUgsRUFBUztBQUFBLFFBQ2pCLGdCQUFnQkEsRUFBUztBQUFBLFFBQ3pCLE1BQU07QUFBQSxRQUNOLFFBQVE7QUFBQSxRQUNSLFdBQVdBLEVBQVM7QUFBQSxRQUNwQixNQUFNQSxFQUFTO0FBQUEsUUFDZixRQUFBL21CO0FBQUEsTUFDaEIsQ0FBYTtBQUNELFdBQUssS0FBSyxlQUFlbE8sQ0FBSTtBQUFBLElBQ3pDLFNBQ2V5QixHQUFPO0FBQ1YsTUFBQWtSLEdBQU8sTUFBTSxnQ0FBZ0NsUixHQUFPd3pCLENBQVE7QUFBQSxJQUN4RTtBQUNRLElBQUlvTSxLQUNBLEtBQUssVUFBVTtBQUFBLE1BQ1gsTUFBTTtBQUFBLElBQ3RCLENBQWE7QUFBQSxFQUViO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBU0ksVUFBVUMsR0FBTyxFQUFFLFFBQUFDLElBQVMsR0FBSyxJQUFLLENBQUEsR0FBSTtBQUN0QyxTQUFLLFVBQVU7QUFBQSxNQUNYLE1BQU07QUFBQSxNQUNOLE9BQU8xaEMsR0FBb0J5aEMsQ0FBSztBQUFBLElBQzVDLENBQVMsR0FDR0MsS0FDQSxLQUFLLFVBQVU7QUFBQSxNQUNYLE1BQU07QUFBQSxJQUN0QixDQUFhO0FBQUEsRUFFYjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFRSSxhQUFhcGhDLEdBQVlDLEdBQVk7QUFDakMsVUFBTSxFQUFFLFVBQUFDLEdBQVUsV0FBQUUsR0FBVyxTQUFBRSxFQUFTLElBQUdQLEdBQW9CQyxHQUFZQyxDQUFVLEdBQzdFb2hDLElBQWEsSUFBSSxJQUFJbmhDLEVBQVMsSUFBSSxDQUFDTCxNQUFTQSxFQUFLLE1BQU0sQ0FBQztBQUU5RCxlQUFXeWhDLEtBQVVoaEM7QUFDakIsTUFBQStnQyxFQUFXLElBQUlDLEVBQU8sTUFBTTtBQUVoQyxRQUFJRCxFQUFXLE9BQU87QUFDbEIsaUJBQVdFLEtBQVVGO0FBQ2pCLGFBQUssVUFBVTtBQUFBLFVBQ1gsTUFBTTtBQUFBLFVBQ04sU0FBU0U7QUFBQSxRQUM3QixDQUFpQjtBQUdULFVBQU1DLElBQXNCLENBQUMsR0FBR3BoQyxHQUFXLEdBQUdFLENBQU87QUFDckQsZUFBV21oQyxLQUFZRDtBQUNuQixVQUFJQyxFQUFTLFNBQVMsV0FBVztBQUM3QixjQUFNQyxJQUFZO0FBQUEsVUFDZCxNQUFNO0FBQUEsVUFDTixNQUFNRCxFQUFTO0FBQUEsVUFDZixTQUFTQSxFQUFTO0FBQUEsVUFDbEIsSUFBSUEsRUFBUztBQUFBLFFBQ2hCO0FBQ0QsUUFBSUEsRUFBUyxTQUFTLFlBQVlBLEVBQVMsV0FDdkNDLEVBQVUsU0FBU0QsRUFBUyxTQUVoQyxLQUFLLFVBQVU7QUFBQSxVQUNYLE1BQU07QUFBQSxVQUNOLE1BQU1DO0FBQUEsUUFDMUIsQ0FBaUI7QUFBQSxNQUNqQixNQUNpQixDQUFJRCxFQUFTLFNBQVMsbUJBQ3ZCanZCLEdBQU8sS0FBSyw2RUFBNkU7QUFBQSxFQUd6RztBQUNBO0FBcmFJNHRCLEtBQUEsZUFDQUMsS0FBQSxlQUNBQyxLQUFBOztBQ2RHLE1BQU1xQixXQUE2QnhCLEdBQW1CO0FBQUEsRUFXekQsWUFBWXIrQixJQUFVLElBQUk7QUFDdEIsUUFBSSxPQUFPLG9CQUFzQjtBQUM3QixZQUFNLElBQUksTUFBTSw2Q0FBNkM7QUFFakUsVUFBTUEsQ0FBTztBQWRqQixJQUFBK0ssRUFBQTtBQUNBLElBQUEyVyxFQUFBLE1BQUFvZTtBQUNBLElBQUFwZSxFQUFBLE1BQUFxZSxHQUFTO0FBQUEsTUFDTCxRQUFRO0FBQUEsTUFDUixnQkFBZ0I7QUFBQSxNQUNoQixhQUFhO0FBQUEsSUFDaEI7QUFDRCxJQUFBcmUsRUFBQSxNQUFBc2U7QUFDQSxJQUFBdGUsRUFBQSxNQUFBdWUsSUFBbUI7QUFDbkIsSUFBQXZlLEVBQUEsTUFBQXdlLElBQVM7QUFNTCxTQUFLLFVBQVVsZ0MsR0FDZjhrQixFQUFBLE1BQUtnYixJQUFPOS9CLEVBQVEsV0FBVyx1Q0FDL0I4a0IsRUFBQSxNQUFLa2IsSUFBcUJoZ0MsRUFBUSxxQkFBcUI7QUFBQSxFQUMvRDtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUksSUFBSSxTQUFTO0FBQ1QsV0FBTzZoQixFQUFBLE1BQUtrZSxHQUFPO0FBQUEsRUFDM0I7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0ksSUFBSSxrQkFBa0I7QUFDbEIsV0FBT2xlLEVBQUEsTUFBS2tlO0FBQUEsRUFDcEI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlJLElBQUksUUFBUTtBQUNSLFdBQU9sZSxFQUFBLE1BQUtxZTtBQUFBLEVBQ3BCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFVSSxNQUFNLFFBQVFsZ0MsR0FBUztBQUNuQixRQUFJNmhCLEVBQUEsTUFBS2tlLEdBQU8sV0FBVztBQUN2QjtBQUVKLElBQUlsZSxFQUFBLE1BQUtrZSxHQUFPLFdBQVcsZ0JBQ3ZCcnZCLEdBQU8sS0FBSyx3RUFBd0U7QUFFeEYsVUFBTXNvQixJQUFRaDVCLEVBQVEsU0FBUyxLQUFLO0FBQ3BDLFNBQUssZUFBZWc1QjtBQUNwQixVQUFNbUgsSUFBVW5nQyxFQUFRLE9BQU82aEIsRUFBQSxNQUFLaWUsS0FDOUJyQixJQUFTLE1BQU0sS0FBSyxXQUFXeitCLENBQU8sR0FDdENvZ0MsSUFBYyxPQUFPM0IsS0FBVyxZQUFZQSxFQUFPLFdBQVcsS0FBSztBQUN6RSxRQUE4QixDQUFDNWMsRUFBQSxNQUFLbWUsT0FBc0IsQ0FBQ0k7QUFDdkQsWUFBTSxJQUFJajFCLEVBQVUsMktBQTJLO0FBR25NLFdBQU8sSUFBSSxRQUFRLE9BQU9rYSxHQUFTK0ksTUFBVztBQUMxQyxVQUFJO0FBQ0EsY0FBTWlTLElBQW9CO0FBQUEsVUFDdEIsR0FBSXJnQyxFQUFRLHdCQUF3QjtVQUNwQyxPQUFPLEtBQUs7QUFBQSxRQUNmLEdBQ0tzZ0MsSUFBZ0IsSUFBSSxJQUFJSCxDQUFPO0FBQ3JDLFlBQUlJLElBQWlCLElBQUksa0JBQW1CO0FBQzVDLGNBQU1DLElBQWNELEVBQWUsa0JBQWtCLFlBQVk7QUFDakUsUUFBQXpiLEVBQUEsTUFBS2liLEdBQVM7QUFBQSxVQUNWLFFBQVE7QUFBQSxVQUNSLGdCQUFBUTtBQUFBLFVBQ0EsYUFBQUM7QUFBQSxRQUNILElBQ0QsS0FBSyxLQUFLLHFCQUFxQjNlLEVBQUEsTUFBS2tlLEdBQU8sTUFBTSxHQUNqRFMsRUFBWSxpQkFBaUIsUUFBUSxNQUFNO0FBQ3ZDLFVBQUExYixFQUFBLE1BQUtpYixHQUFTO0FBQUEsWUFDVixRQUFRO0FBQUEsWUFDUixnQkFBQVE7QUFBQSxZQUNBLGFBQUFDO0FBQUEsVUFDSCxJQUtELEtBQUssb0JBQW9CSCxDQUFpQixHQUMxQyxLQUFLLEtBQUsscUJBQXFCeGUsRUFBQSxNQUFLa2UsR0FBTyxNQUFNLEdBQ2pELEtBQUssUUFBUyxHQUNkMWEsRUFBUztBQUFBLFFBQzdCLENBQWlCLEdBQ0RtYixFQUFZLGlCQUFpQixTQUFTLENBQUMxaEMsT0FBVTtBQUM3QyxlQUFLLE1BQU8sR0FDWixLQUFLLFNBQVNBLEVBQUssR0FDbkJzdkIsRUFBT3R2QixFQUFLO0FBQUEsUUFDaEMsQ0FBaUIsR0FDRDBoQyxFQUFZLGlCQUFpQixXQUFXLENBQUMxaEMsT0FBVTtBQUMvQyxlQUFLLFdBQVdBLEVBQUs7QUFDckIsZ0JBQU0sRUFBRSxNQUFNcVMsSUFBUSxXQUFBdXRCLEdBQVMsSUFBS1YsR0FBbUJsL0IsRUFBSztBQUM1RCxVQUFJLENBQUNxUyxNQUFVdXRCLE9BR1h2dEIsR0FBTyxTQUFTLHFCQUNoQjJULEVBQUEsTUFBS21iLElBQW1CLE1BRW5COXVCLEdBQU8sU0FBUyxtQkFDckIyVCxFQUFBLE1BQUttYixJQUFtQixLQUV4Qjl1QixHQUFPLFNBQVMsc0JBQ2hCLEtBQUssaUJBQWlCQSxHQUFPLFFBQVEsU0FFckMsS0FBSyxxQkFBcUJrdkIsRUFBa0IsV0FBVyxNQUFNO0FBQUEsUUFFckYsQ0FBaUI7QUFFRCxjQUFNSSxJQUFlLEtBQUssUUFBUSxnQkFBZ0IsU0FBUyxjQUFjLE9BQU87QUFDaEYsUUFBQUEsRUFBYSxXQUFXLElBQ3hCRixFQUFlLFVBQVUsQ0FBQ3poQyxPQUFVO0FBQ2hDLFVBQUEyaEMsRUFBYSxZQUFZM2hDLEdBQU0sUUFBUSxDQUFDO0FBQUEsUUFDM0M7QUFFRCxjQUFNdXZCLElBQVMsS0FBSyxRQUFRLGVBQ3ZCLE1BQU0sVUFBVSxhQUFhLGFBQWE7QUFBQSxVQUN2QyxPQUFPO0FBQUEsUUFDL0IsQ0FBcUI7QUFDTCxRQUFBa1MsRUFBZSxTQUFTbFMsRUFBTyxlQUFnQixFQUFDLENBQUMsQ0FBQyxHQUM5QyxLQUFLLFFBQVEseUJBQ2JrUyxJQUNJLE1BQU0sS0FBSyxRQUFRLHFCQUFxQkEsQ0FBYyxHQUMxRHpiLEVBQUEsTUFBS2liLEdBQVMsRUFBRSxHQUFHbGUsRUFBQSxNQUFLa2UsSUFBUSxnQkFBQVEsRUFBZ0I7QUFFcEQsY0FBTUcsSUFBUSxNQUFNSCxFQUFlLFlBQWE7QUFFaEQsWUFEQSxNQUFNQSxFQUFlLG9CQUFvQkcsQ0FBSyxHQUMxQyxDQUFDQSxFQUFNO0FBQ1AsZ0JBQU0sSUFBSSxNQUFNLHdCQUF3QjtBQUU1QyxjQUFNQyxJQUFnQjtBQUFBLFVBQ2xCLEdBQUcsS0FBSyx3QkFBd0JOLENBQWlCO0FBQUEsVUFDakQsT0FBTyxLQUFLO0FBQUEsUUFDZixHQUNLMXVCLElBQU8sSUFBSSxTQUFVO0FBQzNCLFFBQUFBLEVBQUssT0FBTyxPQUFPK3VCLEVBQU0sR0FBRyxHQUM1Qi91QixFQUFLLE9BQU8sV0FBVyxLQUFLLFVBQVVndkIsQ0FBYSxDQUFDO0FBU3BELGNBQU1DLElBQVM7QUFBQSxVQUNYLE1BQU07QUFBQSxVQUNOLEtBQUssT0FWVyxNQUFNLE1BQU1OLEdBQWU7QUFBQSxZQUMzQyxRQUFRO0FBQUEsWUFDUixNQUFNM3VCO0FBQUEsWUFDTixTQUFTO0FBQUEsY0FDTCxlQUFlLFVBQVU4c0IsQ0FBTTtBQUFBLGNBQy9CLHVCQUF1QnIvQixHQUFRLHFCQUFxQjtBQUFBLFlBQ3ZEO0FBQUEsVUFDckIsQ0FBaUIsR0FHMEIsS0FBTTtBQUFBLFFBQ2hDO0FBQ0QsY0FBTW1oQyxFQUFlLHFCQUFxQkssQ0FBTTtBQUFBLE1BQ2hFLFNBQ21CcGhDLEdBQU87QUFDVixhQUFLLE1BQU8sR0FDWixLQUFLLFNBQVNBLENBQUssR0FDbkI0dUIsRUFBTzV1QixDQUFLO0FBQUEsTUFDNUI7QUFBQSxJQUNBLENBQVM7QUFBQSxFQUNUO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPSSxVQUFVVixHQUFPO0FBQ2IsUUFBSSxDQUFDK2lCLEVBQUEsTUFBS2tlLEdBQU8sZUFDYmxlLEVBQUEsTUFBS2tlLEdBQU8sWUFBWSxlQUFlO0FBQ3ZDLFlBQU0sSUFBSSxNQUFNLDZGQUE2RjtBQUVqSCxJQUFBbGUsRUFBQSxNQUFLa2UsR0FBTyxZQUFZLEtBQUssS0FBSyxVQUFVamhDLENBQUssQ0FBQztBQUFBLEVBQzFEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtJLEtBQUsraEMsR0FBTztBQUNSLElBQUEvYixFQUFBLE1BQUtvYixJQUFTVyxJQUNWaGYsRUFBQSxNQUFLa2UsR0FBTyxrQkFDV2xlLEVBQUEsTUFBS2tlLEdBQU8sZUFDcEIsV0FBVSxFQUFHLFFBQVEsQ0FBQ2UsTUFBVztBQUM1QyxNQUFJQSxFQUFPLFVBQ1BBLEVBQU8sTUFBTSxVQUFVLENBQUNEO0FBQUEsSUFFNUMsQ0FBYTtBQUFBLEVBRWI7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlJLFFBQVE7QUFJSixRQUhJaGYsRUFBQSxNQUFLa2UsR0FBTyxlQUNabGUsRUFBQSxNQUFLa2UsR0FBTyxZQUFZLE1BQU8sR0FFL0JsZSxFQUFBLE1BQUtrZSxHQUFPLGdCQUFnQjtBQUM1QixZQUFNUSxJQUFpQjFlLEVBQUEsTUFBS2tlLEdBQU87QUFDbkMsTUFBQVEsRUFBZSxXQUFVLEVBQUcsUUFBUSxDQUFDTyxNQUFXOztBQUM1QyxTQUFBcDlCLElBQUFvOUIsRUFBTyxVQUFQLFFBQUFwOUIsRUFBYztBQUFBLE1BQzlCLENBQWEsR0FDRDY4QixFQUFlLE1BQU87QUFBQSxJQUNsQztBQUNRLElBQUkxZSxFQUFBLE1BQUtrZSxHQUFPLFdBQVcsbUJBQ3ZCamIsRUFBQSxNQUFLaWIsR0FBUztBQUFBLE1BQ1YsUUFBUTtBQUFBLE1BQ1IsZ0JBQWdCO0FBQUEsTUFDaEIsYUFBYTtBQUFBLElBQ2hCLElBQ0QsS0FBSyxLQUFLLHFCQUFxQmxlLEVBQUEsTUFBS2tlLEdBQU8sTUFBTSxHQUNqRCxLQUFLLFNBQVU7QUFBQSxFQUUzQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLSSxZQUFZO0FBQ1IsSUFBSWxlLEVBQUEsTUFBS29lLFFBQ0wsS0FBSyxVQUFVO0FBQUEsTUFDWCxNQUFNO0FBQUEsSUFDdEIsQ0FBYSxHQUNEbmIsRUFBQSxNQUFLbWIsSUFBbUIsTUFFNUIsS0FBSyxVQUFVO0FBQUEsTUFDWCxNQUFNO0FBQUEsSUFDbEIsQ0FBUztBQUFBLEVBQ1Q7QUFDQTtBQXhPSUgsS0FBQSxlQUNBQyxJQUFBLGVBS0FDLEtBQUEsZUFDQUMsS0FBQSxlQUNBQyxLQUFBO0FDeEJHLE1BQU1hLEtBQVksV0FBVzs7QUNTN0IsTUFBTUMsV0FBZ0MzQyxHQUFtQjtBQUFBLEVBb0I1RCxZQUFZcitCLElBQVUsSUFBSTtBQUN0QixVQUFNQSxDQUFPO0FBckJkLElBQUEwaEIsRUFBQSxNQUFBdWY7QUFDSCxJQUFBdmYsRUFBQSxNQUFBNmM7QUFDQSxJQUFBN2MsRUFBQSxNQUFBb2U7QUFDQSxJQUFBcGUsRUFBQSxNQUFBcWUsR0FBUztBQUFBLE1BQ0wsUUFBUTtBQUFBLE1BQ1IsV0FBVztBQUFBLElBQ2Q7QUFDRCxJQUFBcmUsRUFBQSxNQUFBc2U7QUFDQSxJQUFBdGUsRUFBQSxNQUFBd2Y7QUFDQSxJQUFBeGYsRUFBQSxNQUFBeWY7QUFRQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFwMkIsRUFBQTtBQUNBLElBQUFBLEVBQUEsd0JBQWlCO0FBQ2pCLElBQUEyVyxFQUFBLE1BQUF1ZSxJQUFtQjtBQUdmLElBQUFuYixFQUFBLE1BQUtnYixJQUFPLDBDQUEwQyxLQUFLLFlBQVksS0FDdkVoYixFQUFBLE1BQUtrYixJQUFxQmhnQyxFQUFRLHFCQUFxQjtBQUFBLEVBQy9EO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJSSxJQUFJLFNBQVM7QUFDVCxXQUFPNmhCLEVBQUEsTUFBS2tlLEdBQU87QUFBQSxFQUMzQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUksSUFBSSxrQkFBa0I7QUFDbEIsV0FBT2xlLEVBQUEsTUFBS2tlO0FBQUEsRUFDcEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0ksSUFBSSxRQUFRO0FBQ1IsV0FBTztBQUFBLEVBQ2Y7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlJLElBQUksZ0JBQWdCO0FBQ2hCLFdBQU9sZSxFQUFBLE1BQUtxZjtBQUFBLEVBQ3BCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVFJLFNBQVNFLEdBQVk7QUFDakIsU0FBSyxLQUFLLFNBQVNBLENBQVU7QUFBQSxFQUNyQztBQUFBLEVBd0dJLE1BQU0sUUFBUXBoQyxHQUFTO0FBQ25CLFVBQU1nNUIsSUFBUWg1QixFQUFRLFNBQVMsS0FBSztBQUNwQyxTQUFLLGVBQWVnNUIsR0FDcEJsVSxFQUFBLE1BQUt5WixJQUFVLE1BQU0sS0FBSyxXQUFXditCLENBQU8sSUFDNUM4a0IsRUFBQSxNQUFLZ2IsSUFDRDkvQixFQUFRLE9BQ0osMENBQTBDLEtBQUssWUFBWTtBQUNuRSxVQUFNMmdDLElBQWdCO0FBQUEsTUFDbEIsR0FBSTNnQyxFQUFRLHdCQUF3QjtNQUNwQyxPQUFPLEtBQUs7QUFBQSxJQUNmO0FBQ0QsVUFBTSxJQUFJLFFBQVEsQ0FBQ3FsQixHQUFTK0ksTUFBVztBQUNuQyxVQUFJO0FBQ0EsUUFBQXJKLEVBQUEsTUFBS2tjLElBQUFJLElBQUwsV0FBcUJoYyxHQUFTK0ksR0FBUXVTO0FBQUEsTUFDdEQsU0FDbUJuaEMsR0FBTztBQUNWLFFBQUE0dUIsRUFBTzV1QixDQUFLO0FBQUEsTUFDNUI7QUFBQSxJQUNBLENBQVMsR0FDRCxNQUFNLEtBQUssb0JBQW9CbWhDLENBQWE7QUFBQSxFQUNwRDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0ksVUFBVTdoQyxHQUFPO0FBQ2IsUUFBSSxDQUFDK2lCLEVBQUEsTUFBS2tlLEdBQU87QUFDYixZQUFNLElBQUksTUFBTSxtRkFBbUY7QUFFdkcsSUFBQWxlLEVBQUEsTUFBS2tlLEdBQU8sVUFBVSxLQUFLLEtBQUssVUFBVWpoQyxDQUFLLENBQUM7QUFBQSxFQUN4RDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1JLFFBQVE7O0FBQ0osS0FBQTRFLElBQUFtZSxFQUFBLE1BQUtrZSxHQUFPLGNBQVosUUFBQXI4QixFQUF1QixTQUN2Qm9oQixFQUFBLE1BQUtvYyxJQUFpQixTQUN0QixLQUFLLHVCQUF1QixRQUM1QixLQUFLLGlCQUFpQixHQUN0QnBjLEVBQUEsTUFBS3FjLElBQTRCO0FBQUEsRUFDekM7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlJLEtBQUtqQixHQUFRO0FBQ1QsVUFBTSxJQUFJLE1BQU0sK0ZBQStGO0FBQUEsRUFDdkg7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBUUksVUFBVWIsR0FBT3IvQixJQUFVLElBQUk7QUFDM0IsSUFBSTZoQixFQUFBLE1BQUtrZSxHQUFPLFdBQVcsZUFDdkIsTUFBTSxVQUFVVixHQUFPci9CLENBQU87QUFBQSxFQUUxQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLSSxrQkFBa0I7QUFFZCxJQUFJNmhCLEVBQUEsTUFBS29lLFFBQ0wsS0FBSyxVQUFVO0FBQUEsTUFDWCxNQUFNO0FBQUEsSUFDdEIsQ0FBYSxHQUNEbmIsRUFBQSxNQUFLbWIsSUFBbUI7QUFBQSxFQUVwQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBVUksV0FBV3FCLEdBQWE7QUFFcEIsU0FBSyxLQUFLLG1CQUFtQixHQUM3QixLQUFLLFVBQVU7QUFBQSxNQUNYLE1BQU07QUFBQSxNQUNOLFNBQVN6ZixFQUFBLE1BQUtxZjtBQUFBLE1BQ2QsZUFBZXJmLEVBQUEsTUFBS3NmO0FBQUEsTUFDcEIsY0FBY0c7QUFBQSxJQUMxQixDQUFTO0FBQUEsRUFDVDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQVNJLFlBQVk7QUFDUixRQUFJLENBQUN6ZixFQUFBLE1BQUtxZixPQUFrQixPQUFPLEtBQUssd0JBQXlCO0FBQzdEO0FBRUosU0FBSyxnQkFBaUI7QUFDdEIsVUFBTUksSUFBYyxLQUFLLElBQUssSUFBRyxLQUFLO0FBQ3RDLElBQUlBLEtBQWUsS0FBS0EsSUFBYyxLQUFLLGtCQUN2QyxLQUFLLFdBQVdBLENBQVcsR0FFL0J4YyxFQUFBLE1BQUtvYyxJQUFpQixTQUN0QixLQUFLLHVCQUF1QixRQUM1QixLQUFLLGlCQUFpQixHQUN0QnBjLEVBQUEsTUFBS3FjLElBQTRCO0FBQUEsRUFDekM7QUFDQTtBQXZSSTVDLEtBQUEsZUFDQXVCLEtBQUEsZUFDQUMsSUFBQSxlQUlBQyxLQUFBLGVBQ0FrQixLQUFBLGVBQ0FDLEtBQUEsZUFVQWxCLEtBQUEsZUFuQkdnQixLQUFBLGVBNERISSxLQUFlLFNBQUNoYyxHQUFTK0ksR0FBUXVTLEdBQWU7QUFDNUMsTUFBSTllLEVBQUEsTUFBS2tlLEdBQU8sV0FBVztBQUN2QixJQUFBMWEsRUFBUztBQUNUO0FBQUEsRUFDWjtBQUNRLE1BQUksQ0FBQ3hELEVBQUEsTUFBSzBjO0FBQ04sVUFBTSxJQUFJcHpCLEVBQVUsb0VBQW9FO0FBRTVGLE1BQ0ksQ0FBQzBXLEVBQUEsTUFBSzBjLElBQVEsV0FBVyxLQUFLLEtBQzlCLENBQUMxYyxFQUFBLE1BQUttZTtBQUNOLFVBQU0sSUFBSTcwQixFQUFVLDZLQUE2SztBQUVyTSxRQUFNbzJCLElBQ0E7QUFBQSxJQUNFO0FBQUE7QUFBQSxJQUVBLDZCQUE2QjFmLEVBQUEsTUFBSzBjO0FBQUE7QUFBQSxJQUVsQztBQUFBO0FBQUEsSUFFQWwvQjtBQUFBLEVBQ2hCLEdBUWNtaUMsSUFBSyxJQUFJVCxHQUFVbGYsRUFBQSxNQUFLaWUsS0FBTXlCLENBQWtCO0FBQ3RELEVBQUF6YyxFQUFBLE1BQUtpYixHQUFTO0FBQUEsSUFDVixRQUFRO0FBQUEsSUFDUixXQUFXeUI7QUFBQSxFQUNkLElBQ0QsS0FBSyxLQUFLLHFCQUFxQjNmLEVBQUEsTUFBS2tlLEdBQU8sTUFBTSxHQUNqRHlCLEVBQUcsaUJBQWlCLFFBQVEsTUFBTTtBQUM5QixJQUFBMWMsRUFBQSxNQUFLaWIsR0FBUztBQUFBLE1BQ1YsUUFBUTtBQUFBLE1BQ1IsV0FBV3lCO0FBQUEsSUFDZCxJQUNELEtBQUssS0FBSyxxQkFBcUIzZixFQUFBLE1BQUtrZSxHQUFPLE1BQU0sR0FDakQsS0FBSyxRQUFTLEdBQ2QxYSxFQUFTO0FBQUEsRUFDckIsQ0FBUyxHQUNEbWMsRUFBRyxpQkFBaUIsU0FBUyxDQUFDaGlDLE1BQVU7QUFDcEMsU0FBSyxTQUFTQSxDQUFLLEdBQ25Cc2xCLEVBQUEsTUFBS2liLEdBQVM7QUFBQSxNQUNWLFFBQVE7QUFBQSxNQUNSLFdBQVc7QUFBQSxJQUNkLElBQ0QsS0FBSyxLQUFLLHFCQUFxQmxlLEVBQUEsTUFBS2tlLEdBQU8sTUFBTSxHQUNqRDNSLEVBQU81dUIsQ0FBSztBQUFBLEVBQ3hCLENBQVMsR0FDRGdpQyxFQUFHLGlCQUFpQixXQUFXLENBQUNuK0IsTUFBWTtBQUN4QyxTQUFLLFdBQVdBLENBQU87QUFDdkIsVUFBTSxFQUFFLE1BQU04TixHQUFRLFdBQUF1dEIsRUFBUyxJQUFLVixHQUFtQjM2QixDQUFPO0FBQzlELFFBQUksR0FBQzhOLEtBQVV1dEI7QUFHZixVQUFJdnRCLEVBQU8sU0FBUyx3QkFBd0I7QUFDeEMsUUFBQTJULEVBQUEsTUFBS3FjLElBQTRCaHdCLEVBQU8sZ0JBQ3hDMlQsRUFBQSxNQUFLb2MsSUFBaUIvdkIsRUFBTyxVQUN6QixLQUFLLHlCQUF5QixXQUc5QixLQUFLLHVCQUF1QixLQUFLLElBQUssR0FDdEMsS0FBSyxpQkFBaUI7QUFFMUIsY0FBTXN3QixJQUFPbmtDLEdBQW9CNlQsRUFBTyxLQUFLO0FBRTdDLGFBQUssa0JBQWtCc3dCLEVBQUssYUFBYSxLQUFLO0FBQzlDLGNBQU1MLElBQWE7QUFBQSxVQUNmLE1BQU07QUFBQSxVQUNOLE1BQU1LO0FBQUEsVUFDTixZQUFZdHdCLEVBQU87QUFBQSxRQUN0QjtBQUNELGFBQUssU0FBU2l3QixDQUFVO0FBQUEsTUFDeEMsTUFDaUIsQ0FBSWp3QixFQUFPLFNBQVMsc0NBQ3JCLEtBQUssVUFBVyxJQUVYQSxFQUFPLFNBQVMscUJBQ3JCMlQsRUFBQSxNQUFLbWIsSUFBbUIsTUFFbkI5dUIsRUFBTyxTQUFTLGtCQUNyQjJULEVBQUEsTUFBS21iLElBQW1CLE1BRW5COXVCLEVBQU8sU0FBUyxzQkFDckIsS0FBSyxpQkFBaUJBLEVBQU8sUUFBUSxTQUVyQyxLQUFLLHFCQUFxQnd2QixFQUFjLFdBQVcsTUFBTTtBQUFBLEVBRXpFLENBQVMsR0FDRGEsRUFBRyxpQkFBaUIsU0FBUyxNQUFNO0FBQy9CLElBQUExYyxFQUFBLE1BQUtpYixHQUFTO0FBQUEsTUFDVixRQUFRO0FBQUEsTUFDUixXQUFXO0FBQUEsSUFDZCxJQUNELEtBQUssS0FBSyxxQkFBcUJsZSxFQUFBLE1BQUtrZSxHQUFPLE1BQU0sR0FDakQsS0FBSyxTQUFVO0FBQUEsRUFDM0IsQ0FBUztBQUNUOztBQ25JTyxNQUFNMkIsV0FBd0IxWSxHQUFvQjtBQUFBLEVBYXJELFlBQVk0TixHQUFjNTJCLElBQVUsSUFBSTtBQUNwQyxVQUFPO0FBZFIsSUFBQTBoQixFQUFBLE1BQUFpZ0I7QUFDSCxJQUFBNTJCLEVBQUE7QUFDQSxJQUFBQSxFQUFBO0FBQ0EsSUFBQTJXLEVBQUEsTUFBQWtnQjtBQUNBLElBQUFsZ0IsRUFBQSxNQUFBbWdCO0FBQ0EsSUFBQW5nQixFQUFBLE1BQUFvZ0IsSUFBZ0IsQ0FBRTtBQUNsQixJQUFBcGdCLEVBQUEsTUFBQVA7QUFDQSxJQUFBTyxFQUFBLE1BQUFxZ0IsSUFBb0IsQ0FBRTtBQUN0QixJQUFBcmdCLEVBQUEsTUFBQXNnQjtBQUNBLElBQUF0Z0IsRUFBQSxNQUFBdWdCLElBQXlCLENBQUU7QUFDM0IsSUFBQXZnQixFQUFBLE1BQUF3Z0IsR0FBVyxDQUFFO0FBQ2IsSUFBQXhnQixFQUFBLE1BQUF5Z0I7QUFDQSxJQUFBemdCLEVBQUEsTUFBQTBnQixJQUEwQixDQUFFO0FBR3hCLFNBQUssZUFBZXhMLEdBQ3BCLEtBQUssVUFBVTUyQixHQUNWLE9BQU9BLEVBQVEsWUFBYyxPQUFldkIsR0FBa0IsS0FDL0R1QixFQUFRLGNBQWMsV0FDdEI4a0IsRUFBQSxNQUFLOGMsR0FBYSxJQUFJL0IsR0FBc0IsS0FFdkM3L0IsRUFBUSxjQUFjLGVBQzNCLE9BQU9BLEVBQVEsWUFBYyxNQUM3QjhrQixFQUFBLE1BQUs4YyxHQUFhLElBQUlaLEdBQXlCLEtBRy9DbGMsRUFBQSxNQUFLOGMsR0FBYTVoQyxFQUFRLFlBRTlCOGtCLEVBQUEsTUFBSytjLEdBQWdCakwsSUFDckI5UixFQUFBLE1BQUszRCxHQUFXLElBQUl3TCxHQUFXO0FBQUEsTUFDM0IsR0FBSTNzQixFQUFRLFdBQVc7TUFDdkIsU0FBUzZoQixFQUFBLE1BQUtxZ0I7QUFBQSxJQUMxQixDQUFTLElBQ0RwZCxFQUFBLE1BQUtpZCxLQUFxQi9oQyxFQUFRLG9CQUFvQixDQUFFLEdBQUUsSUFBSW82QixFQUE2QixJQUMzRnRWLEVBQUEsTUFBS2tkLElBQTJCOUgsR0FBNkJsNkIsRUFBUSwyQkFBMkIsQ0FBQSxDQUFFLElBQ2xHOGtCLEVBQUEsTUFBS3FkLElBQTBCbmlDLEVBQVEscUJBQXFCO0FBQUEsRUFDcEU7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlJLElBQUksWUFBWTtBQUNaLFdBQU82aEIsRUFBQSxNQUFLK2Y7QUFBQSxFQUNwQjtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBSUksSUFBSSxlQUFlO0FBQ2YsV0FBTy9mLEVBQUEsTUFBS2dnQjtBQUFBLEVBQ3BCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJSSxJQUFJLFFBQVE7QUFDUixXQUFPaGdCLEVBQUEsTUFBS1YsR0FBUztBQUFBLEVBQzdCO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJSSxJQUFJLFVBQVU7QUFDVixXQUFPVSxFQUFBLE1BQUtWO0FBQUEsRUFDcEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0ksSUFBSSxRQUFRO0FBQ1IsV0FBT1UsRUFBQSxNQUFLK2YsR0FBVztBQUFBLEVBQy9CO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFJSSxJQUFJLFVBQVU7QUFDVixXQUFPL2YsRUFBQSxNQUFLcWdCO0FBQUEsRUFDcEI7QUFBQSxFQXdDSSxNQUFNLFlBQVloTyxHQUFVO0FBQ3hCLFdBQUFyUyxFQUFBLE1BQUtnZ0IsR0FBYyxLQUFLLGlCQUFpQmhnQixFQUFBLE1BQUtWLElBQVUrUyxDQUFRLEdBQ2hFLEtBQUssS0FBSyxpQkFBaUJyUyxFQUFBLE1BQUtWLElBQVVVLEVBQUEsTUFBS2dnQixJQUFlM04sQ0FBUSxHQUN0RSxNQUFNblAsRUFBQSxNQUFLNGMsR0FBQVUsSUFBTCxXQUFzQm5PLElBQzVCLE1BQU1yUyxFQUFBLE1BQUsrZixHQUFXLG9CQUFvQixNQUFNN2MsRUFBQSxNQUFLNGMsR0FBQVcsSUFBTCxVQUF3QixHQUNqRXBPO0FBQUEsRUFDZjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQTBOSSxNQUFNLFFBQVFsMEIsR0FBUztBQUVuQixVQUFNK2tCLEVBQUEsTUFBSzRjLEdBQUFVLElBQUwsV0FBc0IsS0FBSyxlQUNqQ3RkLEVBQUEsTUFBSzRjLEdBQUFZLElBQUwsWUFDQSxNQUFNMWdCLEVBQUEsTUFBSytmLEdBQVcsUUFBUTtBQUFBLE1BQzFCLFFBQVE1aEMsRUFBUSxVQUFVLEtBQUssUUFBUTtBQUFBLE1BQ3ZDLE9BQU8sS0FBSyxRQUFRO0FBQUEsTUFDcEIsc0JBQXNCLE1BQU0ra0IsRUFBQSxNQUFLNGMsR0FBQVcsSUFBTCxXQUF1QixLQUFLLFFBQVE7QUFBQSxJQUM1RSxDQUFTLEdBQ0R4ZCxFQUFBLE1BQUtvZCxHQUFXLENBQUUsSUFDbEIsS0FBSyxLQUFLLG1CQUFtQnJnQixFQUFBLE1BQUtxZ0IsRUFBUTtBQUFBLEVBQ2xEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUtJLGNBQWMvakMsR0FBWTtBQUN0QixRQUFJcWtDO0FBQ0osSUFBSSxPQUFPcmtDLEtBQWUsYUFDdEJxa0MsSUFBaUJya0MsRUFBVzBqQixFQUFBLE1BQUtxZ0IsRUFBUSxJQUd6Q00sSUFBaUJya0MsR0FFckIwakIsRUFBQSxNQUFLK2YsR0FBVyxhQUFhL2YsRUFBQSxNQUFLcWdCLElBQVVNLENBQWM7QUFBQSxFQUNsRTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU1JLFlBQVluL0IsR0FBUzQ3QixJQUFpQixJQUFJO0FBQ3RDLElBQUFwZCxFQUFBLE1BQUsrZixHQUFXLFlBQVl2K0IsR0FBUzQ3QixDQUFjO0FBQUEsRUFDM0Q7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0ksS0FBSzRCLEdBQU87QUFDUixJQUFBaGYsRUFBQSxNQUFLK2YsR0FBVyxLQUFLZixDQUFLO0FBQUEsRUFDbEM7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQUlJLFFBQVE7QUFDSixJQUFBL2IsRUFBQSxNQUFLc2QsSUFBMEIsQ0FBRSxJQUNqQ3ZnQixFQUFBLE1BQUsrZixHQUFXLE1BQU87QUFBQSxFQUMvQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBT0ksVUFBVXZDLEdBQU9yL0IsSUFBVSxJQUFJO0FBQzNCLElBQUE2aEIsRUFBQSxNQUFLK2YsR0FBVyxVQUFVdkMsR0FBT3IvQixDQUFPO0FBQUEsRUFDaEQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0ksWUFBWTtBQUNSLElBQUE2aEIsRUFBQSxNQUFLK2YsR0FBVyxVQUFXO0FBQUEsRUFDbkM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9JLE1BQU0sUUFBUXpVLEdBQWNudEIsSUFBVSxFQUFFLGVBQWUsR0FBSyxHQUFJO0FBQzVELElBQUE2aEIsRUFBQSxNQUFLVixHQUFTLFlBQVlnTSxHQUFjbnRCLENBQU87QUFDL0MsVUFBTW9LLElBQU95WCxFQUFBLE1BQUtnZ0IsR0FBYyxNQUFNLEtBQUssQ0FBQ3ozQixNQUFTQSxFQUFLLFNBQVMraUIsRUFBYSxRQUFRLElBQUk7QUFDNUYsUUFBSS9pQixLQUNBQSxFQUFLLFNBQVMsY0FDZCtpQixFQUFhLFFBQVEsU0FBUztBQUM5QixZQUFNcEksRUFBQSxNQUFLNGMsR0FBQWMsSUFBTCxXQUE2QnRWLEVBQWEsU0FBUy9pQjtBQUFBO0FBR3pELFlBQU0sSUFBSWMsR0FBbUIsUUFBUWlpQixFQUFhLFFBQVEsSUFBSSxZQUFZO0FBQUEsRUFFdEY7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9JLE1BQU0sT0FBT0EsR0FBY250QixJQUFVLEVBQUUsY0FBYyxHQUFLLEdBQUk7QUFDMUQsSUFBQTZoQixFQUFBLE1BQUtWLEdBQVMsV0FBV2dNLEdBQWNudEIsQ0FBTztBQUU5QyxVQUFNb0ssSUFBT3lYLEVBQUEsTUFBS2dnQixHQUFjLE1BQU0sS0FBSyxDQUFDejNCLE1BQVNBLEVBQUssU0FBUytpQixFQUFhLFFBQVEsSUFBSTtBQUM1RixRQUFJL2lCLEtBQ0FBLEVBQUssU0FBUyxjQUNkK2lCLEVBQWEsUUFBUSxTQUFTO0FBQzlCLFlBQU1wSSxFQUFBLE1BQUs0YyxHQUFBYyxJQUFMLFdBQTZCdFYsRUFBYSxTQUFTL2lCO0FBQUE7QUFHekQsWUFBTSxJQUFJYyxHQUFtQixRQUFRaWlCLEVBQWEsUUFBUSxJQUFJLFlBQVk7QUFBQSxFQUV0RjtBQUNBO0FBbmJJeVUsSUFBQSxlQUNBQyxJQUFBLGVBQ0FDLEtBQUEsZUFDQTNnQixJQUFBLGVBQ0E0Z0IsS0FBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUEsZUFDQUMsSUFBQSxlQUNBQyxLQUFBLGVBQ0FDLEtBQUEsZUFaR1QsSUFBQSxlQTBFR1UsS0FBZ0IsZUFBQy9ZLEdBQU87QUFDMUIsRUFBQXhFLEVBQUEsTUFBSytjLEdBQWdCdlk7QUFFckIsUUFBTW9aLElBRFc3Z0IsRUFBQSxNQUFLZ2dCLEdBQWMsU0FBUyxJQUFJN1gsRUFBVSxFQUM3QixJQUFJLENBQUNMLE1BQVlBLEVBQVEsMEJBQTBCO0FBQ2pGLEVBQUE3RSxFQUFBLE1BQUtnZCxJQUFnQjtBQUFBLElBQ2pCLElBQUksTUFBTWpnQixFQUFBLE1BQUtnZ0IsR0FBYyxZQUFhLEdBQUUsT0FBTyxDQUFDejNCLE1BQVNBLEVBQUssU0FBUyxVQUFVO0FBQUEsSUFDckYsR0FBR3M0QjtBQUFBLEVBQ047QUFDVCxHQUNVSixLQUFpQixlQUFDSyxJQUFtQixJQUFJO0FBQzNDLFFBQU1DLElBQWUsTUFBTS9nQixFQUFBLE1BQUtnZ0IsR0FBYyxnQkFBZ0JoZ0IsRUFBQSxNQUFLVixFQUFRLEdBQ3JFK2QsSUFBZ0IsS0FBSyxRQUN0QixrQkFDQyxPQUNBLEtBQUssUUFBUSxlQUNUO0FBQUEsSUFDRSxlQUFlLEtBQUssUUFBUTtBQUFBLEVBQ2hELElBQ2tCO0FBQ1YsU0FBSUEsTUFBa0IsUUFBUUEsTUFBa0IsVUFDeEMsS0FBSyxRQUFRLFlBQ2JBLEVBQWMsV0FBVyxLQUFLLFFBQVEsVUFFdEMsS0FBSyxRQUFRLGtCQUNiQSxFQUFjLFdBQVcsS0FBSyxRQUFRLG1CQUdyQyxLQUFLLFFBQVEsV0FBVyxLQUFLLFFBQVEsa0JBQzFDeHVCLEdBQU8sS0FBSyxnRkFBZ0YsR0FFekY7QUFBQSxJQUNILGNBQUFreUI7QUFBQSxJQUNBLE9BQU8vZ0IsRUFBQSxNQUFLZ2dCLEdBQWM7QUFBQSxJQUMxQixPQUFPLEtBQUssUUFBUTtBQUFBLElBQ3BCLE9BQU9oZ0IsRUFBQSxNQUFLaWdCO0FBQUEsSUFDWixTQUFTNUM7QUFBQSxJQUNULEdBQUd5RDtBQUFBLEVBQ047QUFDVCxHQVFVRSxLQUFjLGVBQUM3UCxHQUFVckosR0FBUztBQUNwQyxRQUFNdUssSUFBWSxNQUFNdkssRUFBUSxnQkFBZ0I5SCxFQUFBLE1BQUtWLElBQVU2UixFQUFTLFNBQVM7QUFDakYsRUFBQW5SLEVBQUEsTUFBS2dnQixHQUFjLEtBQUssaUJBQWlCaGdCLEVBQUEsTUFBS1YsSUFBVStTLENBQVEsR0FDaEUsS0FBSyxLQUFLLGlCQUFpQnJTLEVBQUEsTUFBS1YsSUFBVVUsRUFBQSxNQUFLZ2dCLElBQWUzTixDQUFRLEdBRXRFLE1BQU1uUCxFQUFBLE1BQUs0YyxHQUFBVSxJQUFMLFdBQXNCbk8sSUFDNUIsTUFBTXJTLEVBQUEsTUFBSytmLEdBQVcsb0JBQW9CLE1BQU03YyxFQUFBLE1BQUs0YyxHQUFBVyxJQUFMLFVBQXdCO0FBQ3hFLFFBQU1yMkIsSUFBU29kLEdBQW1CNkssQ0FBUTtBQUMxQyxTQUFBclMsRUFBQSxNQUFLK2YsR0FBVyx1QkFBdUI1TyxHQUFVL21CLEdBQVEsRUFBSSxHQUN0RGlvQjtBQUNmLEdBQ1V1TyxLQUF1QixlQUFDelAsR0FBVTVvQixHQUFNO0FBQzFDLEVBQUF5WCxFQUFBLE1BQUtWLEdBQVMsUUFBUSxVQUFVLEtBQUssTUFBTSxLQUFLLFVBQVVVLEVBQUEsTUFBS3FnQixFQUFRLENBQUM7QUFDeEUsTUFBSTlPLElBQWFKLEVBQVM7QUFVMUIsTUFUSTVvQixFQUFLLGVBQ0RvQixHQUFZcEIsRUFBSyxVQUFVLElBQzNCZ3BCLElBQWFocEIsRUFBSyxXQUFXLE1BQU1ncEIsQ0FBVSxJQUc3Q0EsSUFBYSxLQUFLLE1BQU1BLENBQVUsSUFHcEIsTUFBTWhwQixFQUFLLGNBQWN5WCxFQUFBLE1BQUtWLElBQVVpUyxHQUFZSixFQUFTLE1BQU0sR0FDdEU7QUFDZixVQUFNSyxJQUFXLEtBQUssUUFBUSxlQUFlO0FBQUEsTUFDekMsVUFBVWpwQixFQUFLO0FBQUEsTUFDZixRQUFRNG9CLEVBQVM7QUFBQSxJQUNqQyxDQUFhO0FBQ0QsUUFBSUssTUFBYSxJQUFPO0FBQ3BCLFdBQUssS0FBSyxvQkFBb0J4UixFQUFBLE1BQUtWLElBQVVVLEVBQUEsTUFBS2dnQixJQUFlejNCLENBQUksR0FDckV5WCxFQUFBLE1BQUtnZ0IsR0FBYyxLQUFLLG9CQUFvQmhnQixFQUFBLE1BQUtWLElBQVUvVyxDQUFJO0FBQy9ELFlBQU1uQyxJQUFTO0FBQ2YsTUFBQTRaLEVBQUEsTUFBSytmLEdBQVcsdUJBQXVCNU8sR0FBVS9xQixHQUFRLEVBQUksR0FDN0QsS0FBSyxLQUFLLGtCQUFrQjRaLEVBQUEsTUFBS1YsSUFBVVUsRUFBQSxNQUFLZ2dCLElBQWV6M0IsR0FBTW5DLENBQU0sR0FDM0U0WixFQUFBLE1BQUtnZ0IsR0FBYyxLQUFLLGtCQUFrQmhnQixFQUFBLE1BQUtWLElBQVUvVyxHQUFNbkMsQ0FBTTtBQUNyRTtBQUFBLElBQ2hCLFdBQ3FCLE9BQU9vckIsSUFBYSxLQUFhO0FBQ3RDLFdBQUssS0FBSywyQkFBMkJ4UixFQUFBLE1BQUtWLElBQVVVLEVBQUEsTUFBS2dnQixJQUFlO0FBQUEsUUFDcEUsTUFBTTtBQUFBLFFBQ04sTUFBQXozQjtBQUFBLFFBQ0EsY0FBYyxJQUFJK2tCLEdBQW9CNkQsR0FBVW5SLEVBQUEsTUFBS2dnQixFQUFhO0FBQUEsTUFDdEYsQ0FBaUI7QUFDRDtBQUFBLElBQ2hCO0FBQUEsRUFDQTtBQUNRLE9BQUssS0FBSyxvQkFBb0JoZ0IsRUFBQSxNQUFLVixJQUFVVSxFQUFBLE1BQUtnZ0IsSUFBZXozQixDQUFJLEdBQ3JFeVgsRUFBQSxNQUFLZ2dCLEdBQWMsS0FBSyxvQkFBb0JoZ0IsRUFBQSxNQUFLVixJQUFVL1csQ0FBSSxHQUMvRHlYLEVBQUEsTUFBS1YsR0FBUyxRQUFRLFVBQVUsS0FBSyxNQUFNLEtBQUssVUFBVVUsRUFBQSxNQUFLcWdCLEVBQVEsQ0FBQztBQUN4RSxRQUFNajZCLElBQVMsTUFBTW1DLEVBQUssT0FBT3lYLEVBQUEsTUFBS1YsSUFBVTZSLEVBQVMsU0FBUyxHQUM1RDVoQixJQUFlVCxHQUFjMUksQ0FBTTtBQUN6QyxFQUFBNFosRUFBQSxNQUFLK2YsR0FBVyx1QkFBdUI1TyxHQUFVNWhCLEdBQWMsRUFBSSxHQUNuRSxLQUFLLEtBQUssa0JBQWtCeVEsRUFBQSxNQUFLVixJQUFVVSxFQUFBLE1BQUtnZ0IsSUFBZXozQixHQUFNZ0gsQ0FBWSxHQUNqRnlRLEVBQUEsTUFBS2dnQixHQUFjLEtBQUssa0JBQWtCaGdCLEVBQUEsTUFBS1YsSUFBVS9XLEdBQU1nSCxDQUFZO0FBQ25GLEdBQ1UweEIsS0FBbUIsZUFBQzlQLEdBQVU7QUFDaEMsUUFBTTdDLElBQWEsSUFBSSxJQUFJdE8sRUFBQSxNQUFLZ2dCLEdBQWMsU0FDekMsSUFBSTdYLEVBQVUsRUFDZCxJQUFJLENBQUNMLE1BQVksQ0FBQ0EsRUFBUSxVQUFVQSxDQUFPLENBQUMsQ0FBQyxHQUM1Q29aLElBQWtCLElBQUksS0FBSyxNQUFNbGhCLEVBQUEsTUFBS2dnQixHQUFjLFlBQVcsR0FBSSxJQUFJLENBQUN6M0IsTUFBUyxDQUFDQSxFQUFLLE1BQU1BLENBQUksQ0FBQyxDQUFDLEdBQ25HNDRCLElBQWtCN1MsRUFBVyxJQUFJNkMsRUFBUyxJQUFJO0FBQ3BELE1BQUlnUTtBQUNBLFVBQU1qZSxFQUFBLE1BQUs0YyxHQUFBa0IsSUFBTCxXQUFvQjdQLEdBQVVnUTtBQUFBLE9BRW5DO0FBQ0QsVUFBTXRTLElBQWVxUyxFQUFnQixJQUFJL1AsRUFBUyxJQUFJO0FBQ3RELFFBQUl0QyxLQUFnQkEsRUFBYSxTQUFTO0FBQ3RDLFlBQU0zTCxFQUFBLE1BQUs0YyxHQUFBYyxJQUFMLFdBQTZCelAsR0FBVXRDO0FBQUE7QUFHN0MsWUFBTSxJQUFJeGxCLEdBQW1CLFFBQVE4bkIsRUFBUyxJQUFJLFlBQVk7QUFBQSxFQUU5RTtBQUNBLEdBQ1V1RyxLQUFvQixlQUFDdHRCLEdBQVFnM0IsR0FBWTtBQUMzQyxNQUFJcGhCLEVBQUEsTUFBS2tnQixJQUFrQixXQUFXO0FBQ2xDO0FBRUosUUFBTXRJLElBQWdCO0FBQUEsSUFDbEIsT0FBTzVYLEVBQUEsTUFBS2dnQjtBQUFBLElBQ1osYUFBYTUxQjtBQUFBLElBQ2IsU0FBUzRWLEVBQUEsTUFBS1Y7QUFBQSxFQUNqQixHQUVLK2hCLEtBRFUsTUFBTSxRQUFRLElBQUlyaEIsRUFBQSxNQUFLa2dCLElBQWtCLElBQUksQ0FBQ3JJLE1BQWNBLEVBQVUsSUFBSUQsQ0FBYSxDQUFDLENBQUMsR0FDbEUsS0FBSyxDQUFDeHhCLE1BQVdBLEVBQU8sT0FBTyxpQkFBaUI7QUFDdkYsTUFBSWk3QixHQUF3QjtBQUd4QixRQUFJcmhCLEVBQUEsTUFBS3VnQixJQUF3QmEsQ0FBVTtBQUN2QztBQUVKLElBQUFwaEIsRUFBQSxNQUFLdWdCLElBQXdCYSxDQUFVLElBQUk7QUFDM0MsVUFBTXpqQyxJQUFRLElBQUkrTCxHQUFpQywrQkFBK0IsS0FBSyxVQUFVMjNCLEVBQXVCLE9BQU8sVUFBVSxDQUFDLElBQUlBLENBQXNCO0FBQ3BLLFNBQUssS0FBSyxxQkFBcUJyaEIsRUFBQSxNQUFLVixJQUFVVSxFQUFBLE1BQUtnZ0IsSUFBZXJpQyxDQUFLLEdBQ3ZFLEtBQUssVUFBVztBQUNoQixVQUFNMmpDLElBQWUzSSxHQUFvQzBJLENBQXNCO0FBQy9FLFNBQUssWUFBWUMsQ0FBWTtBQUM3QjtBQUFBLEVBQ1o7QUFDQSxHQUNJWixLQUFrQixXQUFHO0FBQ2pCLEVBQUExZ0IsRUFBQSxNQUFLK2YsR0FBVyxHQUFHLEtBQUssQ0FBQzlpQyxNQUFVO0FBQy9CLFNBQUssS0FBSyxtQkFBbUJBLENBQUs7QUFBQSxFQUM5QyxDQUFTLEdBQ0QraUIsRUFBQSxNQUFLK2YsR0FBVyxHQUFHLFNBQVMsQ0FBQzlpQyxNQUFVO0FBQ25DLFNBQUssS0FBSyxTQUFTQSxDQUFLO0FBQUEsRUFDcEMsQ0FBUyxHQUNEK2lCLEVBQUEsTUFBSytmLEdBQVcsR0FBRyxnQkFBZ0IsTUFBTTtBQUNyQyxTQUFLLEtBQUssZUFBZS9mLEVBQUEsTUFBS1YsSUFBVVUsRUFBQSxNQUFLZ2dCLEVBQWEsR0FDMURoZ0IsRUFBQSxNQUFLZ2dCLEdBQWMsS0FBSyxlQUFlaGdCLEVBQUEsTUFBS1YsSUFBVVUsRUFBQSxNQUFLZ2dCLEVBQWE7QUFBQSxFQUNwRixDQUFTLEdBQ0RoZ0IsRUFBQSxNQUFLK2YsR0FBVyxHQUFHLGFBQWEsQ0FBQzlpQyxNQUFVO0FBQ3ZDLFVBQU1mLElBQU9lLEVBQU0sU0FBUyxPQUFPQSxFQUFNLFNBQVMsT0FBTyxTQUFTLENBQUMsR0FDN0Rza0MsSUFBYXRsQyxHQUFrQ0MsQ0FBSSxLQUFLO0FBQzlELFNBQUssS0FBSyxhQUFhOGpCLEVBQUEsTUFBS1YsSUFBVVUsRUFBQSxNQUFLZ2dCLElBQWV1QixDQUFVLEdBQ3BFdmhCLEVBQUEsTUFBS2dnQixHQUFjLEtBQUssYUFBYWhnQixFQUFBLE1BQUtWLElBQVVpaUIsQ0FBVSxHQUM5RHJlLEVBQUEsTUFBSzRjLEdBQUFwSSxJQUFMLFdBQTBCNkosR0FBWXRrQyxFQUFNLFNBQVM7QUFBQSxFQUNqRSxDQUFTLEdBQ0QraUIsRUFBQSxNQUFLK2YsR0FBVyxHQUFHLGNBQWMsTUFBTTtBQUNuQyxTQUFLLEtBQUssaUJBQWlCL2YsRUFBQSxNQUFLVixJQUFVVSxFQUFBLE1BQUtnZ0IsRUFBYTtBQUFBLEVBQ3hFLENBQVM7QUFDRCxNQUFJd0IsSUFBZSxHQUNmQztBQUNKLEVBQUF6aEIsRUFBQSxNQUFLK2YsR0FBVyxHQUFHLDBCQUEwQixDQUFDOWlDLE1BQVU7QUFDcEQsUUFBSTtBQUNBLFlBQU15a0MsSUFBUXprQyxFQUFNLE9BQ2QyZ0MsSUFBUzNnQyxFQUFNLFFBQ2Zta0MsSUFBYW5rQyxFQUFNO0FBQ3pCLE1BQUl3a0MsTUFBZTdELE1BQ2Y2RCxJQUFhN0QsR0FDYjRELElBQWU7QUFHbkIsWUFBTUcsS0FEYzNoQixFQUFBLE1BQUtvZ0IsSUFBdUJ4QyxDQUFNLEtBQUssTUFDN0I4RDtBQUU5QixVQURBMWhCLEVBQUEsTUFBS29nQixJQUF1QnhDLENBQU0sSUFBSStELEdBQ2xDM2hCLEVBQUEsTUFBS21nQixJQUF5QixxQkFBcUI7QUFDbkQ7QUFFSixZQUFNeUIsSUFBYyxLQUFLLE1BQU1ELEVBQVEsU0FBUzNoQixFQUFBLE1BQUttZ0IsSUFBeUIsa0JBQWtCO0FBQ2hHLE1BQUl5QixJQUFjSixNQUNkQSxJQUFlSSxHQUlmMWUsRUFBQSxNQUFLNGMsR0FBQXBJLElBQUwsV0FBMEJpSyxHQUFTUDtBQUFBLElBRXZELFNBQ21CM3VCLEdBQUs7QUFDUixXQUFLLEtBQUssU0FBUztBQUFBLFFBQ2YsTUFBTTtBQUFBLFFBQ04sT0FBT0E7QUFBQSxNQUMzQixDQUFpQjtBQUFBLElBQ2pCO0FBQUEsRUFDQSxDQUFTLEdBQ0R1TixFQUFBLE1BQUsrZixHQUFXLEdBQUcsZUFBZSxDQUFDOWlDLE1BQVU7QUFDekMsUUFBSTtBQUNBLFlBQU00a0MsSUFBUSxDQUFDN2hCLEVBQUEsTUFBS3FnQixHQUFTLEtBQUssQ0FBQ25rQyxNQUFTQSxFQUFLLFdBQVdlLEVBQU0sTUFBTTtBQUd4RSxVQUZBZ21CLEVBQUEsTUFBS29kLEdBQVd0akMsR0FBc0JpakIsRUFBQSxNQUFLcWdCLElBQVVwakMsR0FBTytpQixFQUFBLE1BQUtzZ0IsR0FBdUIsSUFDeEZ0Z0IsRUFBQSxNQUFLVixHQUFTLFFBQVEsVUFBVVUsRUFBQSxNQUFLcWdCLElBQ2pDd0IsR0FBTztBQUNQLGNBQU1DLElBQVk5aEIsRUFBQSxNQUFLcWdCLEdBQVMsS0FBSyxDQUFDbmtDLE1BQVNBLEVBQUssV0FBV2UsRUFBTSxNQUFNO0FBQzNFLFFBQUk2a0MsS0FDQSxLQUFLLEtBQUssaUJBQWlCQSxDQUFTO0FBQUEsTUFFNUQ7QUFDZ0IsV0FBSyxLQUFLLG1CQUFtQjloQixFQUFBLE1BQUtxZ0IsRUFBUTtBQUFBLElBQzFELFNBQ21CNXRCLEdBQUs7QUFDUixXQUFLLEtBQUssU0FBUztBQUFBLFFBQ2YsTUFBTTtBQUFBLFFBQ04sT0FBT0E7QUFBQSxNQUMzQixDQUFpQjtBQUFBLElBQ2pCO0FBQUEsRUFDQSxDQUFTLEdBQ0R1TixFQUFBLE1BQUsrZixHQUFXLEdBQUcsZ0JBQWdCLENBQUM5aUMsTUFBVTtBQUMxQyxRQUFJO0FBQ0EsTUFBQWdtQixFQUFBLE1BQUtvZCxHQUFXcmdCLEVBQUEsTUFBS3FnQixHQUFTLE9BQU8sQ0FBQ25rQyxNQUFTQSxFQUFLLFdBQVdlLEVBQU0sTUFBTSxJQUMzRStpQixFQUFBLE1BQUtWLEdBQVMsUUFBUSxVQUFVVSxFQUFBLE1BQUtxZ0IsSUFDckMsS0FBSyxLQUFLLG1CQUFtQnJnQixFQUFBLE1BQUtxZ0IsRUFBUTtBQUFBLElBQzFELFNBQ21CNXRCLEdBQUs7QUFDUixXQUFLLEtBQUssU0FBUztBQUFBLFFBQ2YsTUFBTTtBQUFBLFFBQ04sT0FBT0E7QUFBQSxNQUMzQixDQUFpQjtBQUFBLElBQ2pCO0FBQUEsRUFDQSxDQUFTLEdBQ0R1TixFQUFBLE1BQUsrZixHQUFXLEdBQUcsaUJBQWlCLE9BQU85aUMsTUFBVTtBQUNqRCxRQUFJO0FBQ0EsWUFBTWltQixFQUFBLE1BQUs0YyxHQUFBbUIsSUFBTCxXQUF5QmhrQztBQUFBLElBQy9DLFNBQ21CVSxHQUFPO0FBQ1YsTUFBQWtSLEdBQU8sTUFBTSxnQ0FBZ0NsUixDQUFLLEdBQ2xELEtBQUssS0FBSyxTQUFTO0FBQUEsUUFDZixNQUFNO0FBQUEsUUFDTixPQUFBQTtBQUFBLE1BQ3BCLENBQWlCO0FBQUEsSUFDakI7QUFBQSxFQUNBLENBQVMsR0FDRHFpQixFQUFBLE1BQUsrZixHQUFXLEdBQUcsZ0JBQWdCLENBQUM1SixNQUFVO0FBQzFDLElBQUFuVyxFQUFBLE1BQUtWLEdBQVMsTUFBTSxJQUFJNlcsQ0FBSztBQUFBLEVBQ3pDLENBQVMsR0FDRG5XLEVBQUEsTUFBSytmLEdBQVcsR0FBRyxxQkFBcUIsTUFBTTtBQUMxQyxTQUFLLEtBQUsscUJBQXFCL2YsRUFBQSxNQUFLVixJQUFVVSxFQUFBLE1BQUtnZ0IsRUFBYTtBQUFBLEVBQzVFLENBQVMsR0FDRGhnQixFQUFBLE1BQUsrZixHQUFXLEdBQUcsU0FBUyxDQUFDcGlDLE1BQVU7QUFDbkMsU0FBSyxLQUFLLFNBQVNBLENBQUs7QUFBQSxFQUNwQyxDQUFTO0FBQ1Q7QUMzV1ksTUFBQ29rQyxLQUFRO0FBQUEsRUFDakIscUJBQXFCQztBQUFBQSxFQUNyQixxQkFBcUJDO0FBQUFBLEVBQ3JCLG1DQUFtQ0M7QUFDdkM7IiwieF9nb29nbGVfaWdub3JlTGlzdCI6WzMsNCw1LDYsNyw4LDksMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTksMjAsMjEsMjIsMjMsMjQsMjUsMjYsMjcsMjgsMjksMzAsMzEsMzIsMzMsMzQsMzUsMzYsMzcsMzgsMzksNDAsNDEsNDIsNDMsNDQsNDUsNDksNTAsNTEsNTYsNTcsNTgsNTksNjAsNjEsNjJdfQ==
